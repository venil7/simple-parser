var Gn=Object.defineProperty;var qn=(s,e,i)=>e in s?Gn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var Ot=(s,e,i)=>(qn(s,typeof e!="symbol"?e+"":e,i),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var reactDom={exports:{}},reactDom_production_min={},react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$3=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function shouldUseNative(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var o=Object.getOwnPropertyNames(e).map(function(c){return e[c]});if(o.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(c){a[c]=c}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(s,e){for(var i,o=toObject(s),a,c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var d in i)hasOwnProperty$3.call(i,d)&&(o[d]=i[d]);if(getOwnPropertySymbols){a=getOwnPropertySymbols(i);for(var _=0;_<a.length;_++)propIsEnumerable.call(i,a[_])&&(o[a[_]]=i[a[_]])}}return o};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n$1=60103,p$1=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$1=60109,r$1=60110,t=60112;react_production_min.Suspense=60113;var u=60115,v=60116;if(typeof Symbol=="function"&&Symbol.for){var w=Symbol.for;n$1=w("react.element"),p$1=w("react.portal"),react_production_min.Fragment=w("react.fragment"),react_production_min.StrictMode=w("react.strict_mode"),react_production_min.Profiler=w("react.profiler"),q$1=w("react.provider"),r$1=w("react.context"),t=w("react.forward_ref"),react_production_min.Suspense=w("react.suspense"),u=w("react.memo"),v=w("react.lazy")}var x=typeof Symbol=="function"&&Symbol.iterator;function y$1(s){return s===null||typeof s!="object"?null:(s=x&&s[x]||s["@@iterator"],typeof s=="function"?s:null)}function z(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$1={};function C(s,e,i){this.props=s,this.context=e,this.refs=B$1,this.updater=i||A}C.prototype.isReactComponent={};C.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error(z(85));this.updater.enqueueSetState(this,s,e,"setState")};C.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function D$1(){}D$1.prototype=C.prototype;function E$1(s,e,i){this.props=s,this.context=e,this.refs=B$1,this.updater=i||A}var F$1=E$1.prototype=new D$1;F$1.constructor=E$1;l(F$1,C.prototype);F$1.isPureReactComponent=!0;var G$1={current:null},H$1=Object.prototype.hasOwnProperty,I$1={key:!0,ref:!0,__self:!0,__source:!0};function J(s,e,i){var o,a={},c=null,d=null;if(e!=null)for(o in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)H$1.call(e,o)&&!I$1.hasOwnProperty(o)&&(a[o]=e[o]);var _=arguments.length-2;if(_===1)a.children=i;else if(1<_){for(var b=Array(_),k=0;k<_;k++)b[k]=arguments[k+2];a.children=b}if(s&&s.defaultProps)for(o in _=s.defaultProps,_)a[o]===void 0&&(a[o]=_[o]);return{$$typeof:n$1,type:s,key:c,ref:d,props:a,_owner:G$1.current}}function K(s,e){return{$$typeof:n$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function L(s){return typeof s=="object"&&s!==null&&s.$$typeof===n$1}function escape$1(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(i){return e[i]})}var M$1=/\/+/g;function N$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape$1(""+s.key):e.toString(36)}function O$1(s,e,i,o,a){var c=typeof s;(c==="undefined"||c==="boolean")&&(s=null);var d=!1;if(s===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(s.$$typeof){case n$1:case p$1:d=!0}}if(d)return d=s,a=a(d),s=o===""?"."+N$1(d,0):o,Array.isArray(a)?(i="",s!=null&&(i=s.replace(M$1,"$&/")+"/"),O$1(a,e,i,"",function(k){return k})):a!=null&&(L(a)&&(a=K(a,i+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(M$1,"$&/")+"/")+s)),e.push(a)),1;if(d=0,o=o===""?".":o+":",Array.isArray(s))for(var _=0;_<s.length;_++){c=s[_];var b=o+N$1(c,_);d+=O$1(c,e,i,b,a)}else if(b=y$1(s),typeof b=="function")for(s=b.call(s),_=0;!(c=s.next()).done;)c=c.value,b=o+N$1(c,_++),d+=O$1(c,e,i,b,a);else if(c==="object")throw e=""+s,Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e));return d}function P$1(s,e,i){if(s==null)return s;var o=[],a=0;return O$1(s,o,"","",function(c){return e.call(i,c,a++)}),o}function Q(s){if(s._status===-1){var e=s._result;e=e(),s._status=0,s._result=e,e.then(function(i){s._status===0&&(i=i.default,s._status=1,s._result=i)},function(i){s._status===0&&(s._status=2,s._result=i)})}if(s._status===1)return s._result;throw s._result}var R$1={current:null};function S$1(){var s=R$1.current;if(s===null)throw Error(z(321));return s}var T$1={ReactCurrentDispatcher:R$1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$1,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:P$1,forEach:function(s,e,i){P$1(s,function(){e.apply(this,arguments)},i)},count:function(s){var e=0;return P$1(s,function(){e++}),e},toArray:function(s){return P$1(s,function(e){return e})||[]},only:function(s){if(!L(s))throw Error(z(143));return s}};react_production_min.Component=C;react_production_min.PureComponent=E$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$1;react_production_min.cloneElement=function(s,e,i){if(s==null)throw Error(z(267,s));var o=l({},s.props),a=s.key,c=s.ref,d=s._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=G$1.current),e.key!==void 0&&(a=""+e.key),s.type&&s.type.defaultProps)var _=s.type.defaultProps;for(b in e)H$1.call(e,b)&&!I$1.hasOwnProperty(b)&&(o[b]=e[b]===void 0&&_!==void 0?_[b]:e[b])}var b=arguments.length-2;if(b===1)o.children=i;else if(1<b){_=Array(b);for(var k=0;k<b;k++)_[k]=arguments[k+2];o.children=_}return{$$typeof:n$1,type:s.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(s,e){return e===void 0&&(e=null),s={$$typeof:r$1,_calculateChangedBits:e,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null},s.Provider={$$typeof:q$1,_context:s},s.Consumer=s};react_production_min.createElement=J;react_production_min.createFactory=function(s){var e=J.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:t,render:s}};react_production_min.isValidElement=L;react_production_min.lazy=function(s){return{$$typeof:v,_payload:{_status:-1,_result:s},_init:Q}};react_production_min.memo=function(s,e){return{$$typeof:u,type:s,compare:e===void 0?null:e}};react_production_min.useCallback=function(s,e){return S$1().useCallback(s,e)};react_production_min.useContext=function(s,e){return S$1().useContext(s,e)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(s,e){return S$1().useEffect(s,e)};react_production_min.useImperativeHandle=function(s,e,i){return S$1().useImperativeHandle(s,e,i)};react_production_min.useLayoutEffect=function(s,e){return S$1().useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return S$1().useMemo(s,e)};react_production_min.useReducer=function(s,e,i){return S$1().useReducer(s,e,i)};react_production_min.useRef=function(s){return S$1().useRef(s)};react_production_min.useState=function(s){return S$1().useState(s)};react_production_min.version="17.0.2";(function(s){s.exports=react_production_min})(react);const React=getDefaultExportFromCjs(react.exports);var scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){var e,i,o,a;if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,_=d.now();s.unstable_now=function(){return d.now()-_}}if(typeof window>"u"||typeof MessageChannel!="function"){var b=null,k=null,j=function(){if(b!==null)try{var St=s.unstable_now();b(!0,St),b=null}catch(Lt){throw setTimeout(j,0),Lt}};e=function(St){b!==null?setTimeout(e,0,St):(b=St,setTimeout(j,0))},i=function(St,Lt){k=setTimeout(St,Lt)},o=function(){clearTimeout(k)},s.unstable_shouldYield=function(){return!1},a=s.unstable_forceFrameRate=function(){}}else{var _e=window.setTimeout,et=window.clearTimeout;if(typeof console<"u"){var tt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof tt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var it=!1,st=null,ot=-1,nt=5,rt=0;s.unstable_shouldYield=function(){return s.unstable_now()>=rt},a=function(){},s.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<St?Math.floor(1e3/St):5};var at=new MessageChannel,lt=at.port2;at.port1.onmessage=function(){if(st!==null){var St=s.unstable_now();rt=St+nt;try{st(!0,St)?lt.postMessage(null):(it=!1,st=null)}catch(Lt){throw lt.postMessage(null),Lt}}else it=!1},e=function(St){st=St,it||(it=!0,lt.postMessage(null))},i=function(St,Lt){ot=_e(function(){St(s.unstable_now())},Lt)},o=function(){et(ot),ot=-1}}function gt(St,Lt){var It=St.length;St.push(Lt);e:for(;;){var xt=It-1>>>1,Mt=St[xt];if(Mt!==void 0&&0<ct(Mt,Lt))St[xt]=Lt,St[It]=Mt,It=xt;else break e}}function ht(St){return St=St[0],St===void 0?null:St}function ut(St){var Lt=St[0];if(Lt!==void 0){var It=St.pop();if(It!==Lt){St[0]=It;e:for(var xt=0,Mt=St.length;xt<Mt;){var Pt=2*(xt+1)-1,Ft=St[Pt],Bt=Pt+1,Wt=St[Bt];if(Ft!==void 0&&0>ct(Ft,It))Wt!==void 0&&0>ct(Wt,Ft)?(St[xt]=Wt,St[Bt]=It,xt=Bt):(St[xt]=Ft,St[Pt]=It,xt=Pt);else if(Wt!==void 0&&0>ct(Wt,It))St[xt]=Wt,St[Bt]=It,xt=Bt;else break e}}return Lt}return null}function ct(St,Lt){var It=St.sortIndex-Lt.sortIndex;return It!==0?It:St.id-Lt.id}var ft=[],dt=[],pt=1,mt=null,_t=3,Ct=!1,bt=!1,yt=!1;function wt(St){for(var Lt=ht(dt);Lt!==null;){if(Lt.callback===null)ut(dt);else if(Lt.startTime<=St)ut(dt),Lt.sortIndex=Lt.expirationTime,gt(ft,Lt);else break;Lt=ht(dt)}}function Tt(St){if(yt=!1,wt(St),!bt)if(ht(ft)!==null)bt=!0,e(kt);else{var Lt=ht(dt);Lt!==null&&i(Tt,Lt.startTime-St)}}function kt(St,Lt){bt=!1,yt&&(yt=!1,o()),Ct=!0;var It=_t;try{for(wt(Lt),mt=ht(ft);mt!==null&&(!(mt.expirationTime>Lt)||St&&!s.unstable_shouldYield());){var xt=mt.callback;if(typeof xt=="function"){mt.callback=null,_t=mt.priorityLevel;var Mt=xt(mt.expirationTime<=Lt);Lt=s.unstable_now(),typeof Mt=="function"?mt.callback=Mt:mt===ht(ft)&&ut(ft),wt(Lt)}else ut(ft);mt=ht(ft)}if(mt!==null)var Pt=!0;else{var Ft=ht(dt);Ft!==null&&i(Tt,Ft.startTime-Lt),Pt=!1}return Pt}finally{mt=null,_t=It,Ct=!1}}var Rt=a;s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(St){St.callback=null},s.unstable_continueExecution=function(){bt||Ct||(bt=!0,e(kt))},s.unstable_getCurrentPriorityLevel=function(){return _t},s.unstable_getFirstCallbackNode=function(){return ht(ft)},s.unstable_next=function(St){switch(_t){case 1:case 2:case 3:var Lt=3;break;default:Lt=_t}var It=_t;_t=Lt;try{return St()}finally{_t=It}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=Rt,s.unstable_runWithPriority=function(St,Lt){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var It=_t;_t=St;try{return Lt()}finally{_t=It}},s.unstable_scheduleCallback=function(St,Lt,It){var xt=s.unstable_now();switch(typeof It=="object"&&It!==null?(It=It.delay,It=typeof It=="number"&&0<It?xt+It:xt):It=xt,St){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=It+Mt,St={id:pt++,callback:Lt,priorityLevel:St,startTime:It,expirationTime:Mt,sortIndex:-1},It>xt?(St.sortIndex=It,gt(dt,St),ht(ft)===null&&St===ht(dt)&&(yt?o():yt=!0,i(Tt,It-xt))):(St.sortIndex=Mt,gt(ft,St),bt||Ct||(bt=!0,e(kt))),St},s.unstable_wrapCallback=function(St){var Lt=_t;return function(){var It=_t;_t=Lt;try{return St.apply(this,arguments)}finally{_t=It}}}})(scheduler_production_min);(function(s){s.exports=scheduler_production_min})(scheduler);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,m$1=objectAssign,r=scheduler.exports;function y(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(s,e){ea(s,e),ea(s+"Capture",e)}function ea(s,e){for(ca[s]=e,s=0;s<e.length;s++)ba.add(e[s])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(s){return ia.call(ka,s)?!0:ia.call(ja,s)?!1:ha.test(s)?ka[s]=!0:(ja[s]=!0,!1)}function ma(s,e,i,o){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function na(s,e,i,o){if(e===null||typeof e>"u"||ma(s,e,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function B(s,e,i,o,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=s,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){D[s]=new B(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];D[e]=new B(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){D[s]=new B(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){D[s]=new B(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){D[s]=new B(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){D[s]=new B(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){D[s]=new B(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){D[s]=new B(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){D[s]=new B(s,5,!1,s.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(oa,pa);D[e]=new B(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){D[s]=new B(s,1,!1,s.toLowerCase(),null,!1,!1)});D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){D[s]=new B(s,1,!1,s.toLowerCase(),null,!0,!0)});function qa(s,e,i,o){var a=D.hasOwnProperty(e)?D[e]:null,c=a!==null?a.type===0:o?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");c||(na(e,i,a,o)&&(i=null),o||a===null?la(e)&&(i===null?s.removeAttribute(e):s.setAttribute(e,""+i)):a.mustUseProperty?s[a.propertyName]=i===null?a.type===3?!1:"":i:(e=a.attributeName,o=a.attributeNamespace,i===null?s.removeAttribute(e):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,o?s.setAttributeNS(o,e,i):s.setAttribute(e,i))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E=Symbol.for;sa=E("react.element"),ta=E("react.portal"),ua=E("react.fragment"),wa=E("react.strict_mode"),xa=E("react.profiler"),ya=E("react.provider"),za=E("react.context"),Aa=E("react.forward_ref"),Ba=E("react.suspense"),Ca=E("react.suspense_list"),Da=E("react.memo"),Ea=E("react.lazy"),Fa=E("react.block"),E("react.scope"),Ga=E("react.opaque.id"),Ha=E("react.debug_trace_mode"),Ia=E("react.offscreen"),Ja=E("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(s){return s===null||typeof s!="object"?null:(s=Ka&&s[Ka]||s["@@iterator"],typeof s=="function"?s:null)}var Ma;function Na(s){if(Ma===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Ma=e&&e[1]||""}return`
`+Ma+s}var Oa=!1;function Pa(s,e){if(!s||Oa)return"";Oa=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(b){var o=b}Reflect.construct(s,[],e)}else{try{e.call()}catch(b){o=b}s.call(e.prototype)}else{try{throw Error()}catch(b){o=b}s()}}catch(b){if(b&&o&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,_=c.length-1;1<=d&&0<=_&&a[d]!==c[_];)_--;for(;1<=d&&0<=_;d--,_--)if(a[d]!==c[_]){if(d!==1||_!==1)do if(d--,_--,0>_||a[d]!==c[_])return`
`+a[d].replace(" at new "," at ");while(1<=d&&0<=_);break}}}finally{Oa=!1,Error.prepareStackTrace=i}return(s=s?s.displayName||s.name:"")?Na(s):""}function Qa(s){switch(s.tag){case 5:return Na(s.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return s=Pa(s.type,!1),s;case 11:return s=Pa(s.type.render,!1),s;case 22:return s=Pa(s.type._render,!1),s;case 1:return s=Pa(s.type,!0),s;default:return""}}function Ra(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case za:return(s.displayName||"Context")+".Consumer";case ya:return(s._context.displayName||"Context")+".Provider";case Aa:var e=s.render;return e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Da:return Ra(s.type);case Fa:return Ra(s._render);case Ea:e=s._payload,s=s._init;try{return Ra(s(e))}catch{}}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"object":case"string":case"undefined":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),o=""+s[e];if(!s.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,c=i.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(s,e,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var i=e.getValue(),o="";return s&&(o=Ta(s)?s.checked?"true":"false":s.value),s=o,s!==i?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var i=e.checked;return m$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:s._wrapperState.initialChecked})}function Za(s,e){var i=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;i=Sa(e.value!=null?e.value:i),s._wrapperState={initialChecked:o,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $a(s,e){e=e.checked,e!=null&&qa(s,"checked",e,!1)}function ab(s,e){$a(s,e);var i=Sa(e.value),o=e.type;if(i!=null)o==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+i):s.value!==""+i&&(s.value=""+i);else if(o==="submit"||o==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?bb(s,e.type,i):e.hasOwnProperty("defaultValue")&&bb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function cb(s,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,i||e===s.value||(s.value=e),s.defaultValue=e}i=s.name,i!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,i!==""&&(s.name=i)}function bb(s,e,i){(e!=="number"||Xa(s.ownerDocument)!==s)&&(i==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+i&&(s.defaultValue=""+i))}function db(s){var e="";return aa.Children.forEach(s,function(i){i!=null&&(e+=i)}),e}function eb(s,e){return s=m$1({children:void 0},e),(e=db(e.children))&&(s.children=e),s}function fb(s,e,i,o){if(s=s.options,e){e={};for(var a=0;a<i.length;a++)e["$"+i[a]]=!0;for(i=0;i<s.length;i++)a=e.hasOwnProperty("$"+s[i].value),s[i].selected!==a&&(s[i].selected=a),a&&o&&(s[i].defaultSelected=!0)}else{for(i=""+Sa(i),e=null,a=0;a<s.length;a++){if(s[a].value===i){s[a].selected=!0,o&&(s[a].defaultSelected=!0);return}e!==null||s[a].disabled||(e=s[a])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(y(91));return m$1({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(y(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(y(93));i=i[0]}e=i}e==null&&(e=""),i=e}s._wrapperState={initialValue:Sa(i)}}function ib(s,e){var i=Sa(e.value),o=Sa(e.defaultValue);i!=null&&(i=""+i,i!==s.value&&(s.value=i),e.defaultValue==null&&s.defaultValue!==i&&(s.defaultValue=i)),o!=null&&(s.defaultValue=""+o)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?lb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var nb,ob=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,o,a){MSApp.execUnsafeLocalFunction(function(){return s(e,i,o,a)})}:s}(function(s,e){if(s.namespaceURI!==kb.svg||"innerHTML"in s)s.innerHTML=e;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function pb(s,e){if(e){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=e;return}}s.textContent=e}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(s){rb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),qb[e]=qb[s]})});function sb(s,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||qb.hasOwnProperty(s)&&qb[s]?(""+e).trim():e+"px"}function tb(s,e){s=s.style;for(var i in e)if(e.hasOwnProperty(i)){var o=i.indexOf("--")===0,a=sb(i,e[i],o);i==="float"&&(i="cssFloat"),o?s.setProperty(i,a):s[i]=a}}var ub=m$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(s,e){if(e){if(ub[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(y(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(y(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(y(62))}}function wb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(y(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(s,e,i,o,a){return s(e,i,o,a)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(s,e,i){if(Lb)return s(e,i);Lb=!0;try{return Jb(s,e,i)}finally{Lb=!1,Mb()}}function Ob(s,e){var i=s.stateNode;if(i===null)return null;var o=Db(i);if(o===null)return null;i=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(s=s.type,o=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!o;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(y(231,e,typeof i));return i}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(s,e,i,o,a,c,d,_,b){var k=Array.prototype.slice.call(arguments,3);try{e.apply(i,k)}catch(j){this.onError(j)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(s){Sb=!0,Tb=s}};function Xb(s,e,i,o,a,c,d,_,b){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(s,e,i,o,a,c,d,_,b){if(Xb.apply(this,arguments),Sb){if(Sb){var k=Tb;Sb=!1,Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=k)}}function Zb(s){var e=s,i=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,(e.flags&1026)!==0&&(i=e.return),s=e.return;while(s)}return e.tag===3?i:null}function $b(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function ac(s){if(Zb(s)!==s)throw Error(y(188))}function bc(s){var e=s.alternate;if(!e){if(e=Zb(s),e===null)throw Error(y(188));return e!==s?null:s}for(var i=s,o=e;;){var a=i.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){i=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===i)return ac(a),s;if(c===o)return ac(a),e;c=c.sibling}throw Error(y(188))}if(i.return!==o.return)i=a,o=c;else{for(var d=!1,_=a.child;_;){if(_===i){d=!0,i=a,o=c;break}if(_===o){d=!0,o=a,i=c;break}_=_.sibling}if(!d){for(_=c.child;_;){if(_===i){d=!0,i=c,o=a;break}if(_===o){d=!0,o=c,i=a;break}_=_.sibling}if(!d)throw Error(y(189))}}if(i.alternate!==o)throw Error(y(190))}if(i.tag!==3)throw Error(y(188));return i.stateNode.current===i?s:e}function cc(s){if(s=bc(s),!s)return null;for(var e=s;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===s)break;for(;!e.sibling;){if(!e.return||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function dc(s,e){for(var i=s.alternate;e!==null;){if(e===s||e===i)return!0;e=e.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(s,e,i,o,a){return{blockedOn:s,domEventName:e,eventSystemFlags:i|16,nativeEvent:a,targetContainers:[o]}}function sc(s,e){switch(s){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(e.pointerId)}}function tc(s,e,i,o,a,c){return s===null||s.nativeEvent!==c?(s=rc(e,i,o,a,c),e!==null&&(e=Cb(e),e!==null&&fc(e)),s):(s.eventSystemFlags|=o,e=s.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),s)}function uc(s,e,i,o,a){switch(e){case"focusin":return kc=tc(kc,s,e,i,o,a),!0;case"dragenter":return lc=tc(lc,s,e,i,o,a),!0;case"mouseover":return mc=tc(mc,s,e,i,o,a),!0;case"pointerover":var c=a.pointerId;return nc.set(c,tc(nc.get(c)||null,s,e,i,o,a)),!0;case"gotpointercapture":return c=a.pointerId,oc.set(c,tc(oc.get(c)||null,s,e,i,o,a)),!0}return!1}function vc(s){var e=wc(s.target);if(e!==null){var i=Zb(e);if(i!==null){if(e=i.tag,e===13){if(e=$b(i),e!==null){s.blockedOn=e,hc(s.lanePriority,function(){r.unstable_runWithPriority(s.priority,function(){gc(i)})});return}}else if(e===3&&i.stateNode.hydrate){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var i=yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(i!==null)return e=Cb(i),e!==null&&fc(e),s.blockedOn=i,!1;e.shift()}return!0}function zc(s,e,i){xc(s)&&i.delete(e)}function Ac(){for(ic=!1;0<jc.length;){var s=jc[0];if(s.blockedOn!==null){s=Cb(s.blockedOn),s!==null&&ec(s);break}for(var e=s.targetContainers;0<e.length;){var i=yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(i!==null){s.blockedOn=i;break}e.shift()}s.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(s,e){s.blockedOn===e&&(s.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}function Cc(s){function e(a){return Bc(a,s)}if(0<jc.length){Bc(jc[0],s);for(var i=1;i<jc.length;i++){var o=jc[i];o.blockedOn===s&&(o.blockedOn=null)}}for(kc!==null&&Bc(kc,s),lc!==null&&Bc(lc,s),mc!==null&&Bc(mc,s),nc.forEach(e),oc.forEach(e),i=0;i<pc.length;i++)o=pc[i],o.blockedOn===s&&(o.blockedOn=null);for(;0<pc.length&&(i=pc[0],i.blockedOn===null);)vc(i),i.blockedOn===null&&pc.shift()}function Dc(s,e){var i={};return i[s.toLowerCase()]=e.toLowerCase(),i["Webkit"+s]="webkit"+e,i["Moz"+s]="moz"+e,i}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(s){if(Fc[s])return Fc[s];if(!Ec[s])return s;var e=Ec[s],i;for(i in e)if(e.hasOwnProperty(i)&&i in Gc)return Fc[s]=e[i];return s}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(s,e){for(var i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Nc.set(o,e),Mc.set(o,a),da(a,[o])}}var Qc=r.unstable_now;Qc();var F=8;function Rc(s){if((1&s)!==0)return F=15,1;if((2&s)!==0)return F=14,2;if((4&s)!==0)return F=13,4;var e=24&s;return e!==0?(F=12,e):(s&32)!==0?(F=11,32):(e=192&s,e!==0?(F=10,e):(s&256)!==0?(F=9,256):(e=3584&s,e!==0?(F=8,e):(s&4096)!==0?(F=7,4096):(e=4186112&s,e!==0?(F=6,e):(e=62914560&s,e!==0?(F=5,e):s&67108864?(F=4,67108864):(s&134217728)!==0?(F=3,134217728):(e=805306368&s,e!==0?(F=2,e):(1073741824&s)!==0?(F=1,1073741824):(F=8,s))))))}function Sc(s){switch(s){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(s){switch(s){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,s))}}function Uc(s,e){var i=s.pendingLanes;if(i===0)return F=0;var o=0,a=0,c=s.expiredLanes,d=s.suspendedLanes,_=s.pingedLanes;if(c!==0)o=c,a=F=15;else if(c=i&134217727,c!==0){var b=c&~d;b!==0?(o=Rc(b),a=F):(_&=c,_!==0&&(o=Rc(_),a=F))}else c=i&~d,c!==0?(o=Rc(c),a=F):_!==0&&(o=Rc(_),a=F);if(o===0)return 0;if(o=31-Vc(o),o=i&((0>o?0:1<<o)<<1)-1,e!==0&&e!==o&&(e&d)===0){if(Rc(e),a<=F)return e;F=a}if(e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=o;0<e;)i=31-Vc(e),a=1<<i,o|=s[i],e&=~a;return o}function Wc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Xc(s,e){switch(s){case 15:return 1;case 14:return 2;case 12:return s=Yc(24&~e),s===0?Xc(10,e):s;case 10:return s=Yc(192&~e),s===0?Xc(8,e):s;case 8:return s=Yc(3584&~e),s===0&&(s=Yc(4186112&~e),s===0&&(s=512)),s;case 2:return e=Yc(805306368&~e),e===0&&(e=268435456),e}throw Error(y(358,s))}function Yc(s){return s&-s}function Zc(s){for(var e=[],i=0;31>i;i++)e.push(s);return e}function $c(s,e,i){s.pendingLanes|=e;var o=e-1;s.suspendedLanes&=o,s.pingedLanes&=o,s=s.eventTimes,e=31-Vc(e),s[e]=i}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(s){return s===0?32:31-(bd(s)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(s,e,i,o){Kb||Ib();var a=hd,c=Kb;Kb=!0;try{Hb(a,s,e,i,o)}finally{(Kb=c)||Mb()}}function id(s,e,i,o){ed(dd,hd.bind(null,s,e,i,o))}function hd(s,e,i,o){if(fd){var a;if((a=(e&4)===0)&&0<jc.length&&-1<qc.indexOf(s))s=rc(null,s,e,i,o),jc.push(s);else{var c=yc(s,e,i,o);if(c===null)a&&sc(s,o);else{if(a){if(-1<qc.indexOf(s)){s=rc(c,s,e,i,o),jc.push(s);return}if(uc(c,s,e,i,o))return;sc(s,o)}jd(s,e,o,null,i)}}}}function yc(s,e,i,o){var a=xb(o);if(a=wc(a),a!==null){var c=Zb(a);if(c===null)a=null;else{var d=c.tag;if(d===13){if(a=$b(c),a!==null)return a;a=null}else if(d===3){if(c.stateNode.hydrate)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return jd(s,e,o,a,i),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,i=e.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(s=0;s<i&&e[s]===a[s];s++);var d=i-s;for(o=1;o<=d&&e[i-o]===a[c-o];o++);return md=a.slice(s,1<o?1-o:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(i,o,a,c,d){this._reactName=i,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var _ in s)s.hasOwnProperty(_)&&(i=s[_],this[_]=i?i(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=m$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=m$1({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=m$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return s=e.data,s===ee&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le[s.type]:e==="textarea"}function ne(s,e,i,o){Eb(o),e=oe(e,"onChange"),0<e.length&&(i=new td("onChange","change",null,i,o),s.push({event:i,listeners:e}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];if(ne(e,qe,s,xb(s)),s=re,Kb)s(e);else{Kb=!0;try{Gb(s,e)}finally{Kb=!1,Mb()}}}}function Ce(s,e,i){s==="focusin"?(Ae(),pe=e,qe=i,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;function Je(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var i=Object.keys(s),o=Object.keys(e);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++)if(!Ie.call(e,i[o])||!He(s[i[o]],e[i[o]]))return!1;return!0}function Ke(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Le(s,e){var i=Ke(s);s=0;for(var o;i;){if(i.nodeType===3){if(o=s+i.textContent.length,s<=e&&o>=e)return{node:i,offset:e-s};s=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ke(i)}}function Me(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Me(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Ne(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Oe(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,e,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Oe(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Je(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(e=new td("onSelect","select",null,e,i),s.push({event:e,listeners:o}),e.target=Qe)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));function Ze(s,e,i){var o=s.type||"unknown-event";s.currentTarget=i,Yb(o,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var i=0;i<s.length;i++){var o=s[i],a=o.event;o=o.listeners;e:{var c=void 0;if(e)for(var d=o.length-1;0<=d;d--){var _=o[d],b=_.instance,k=_.currentTarget;if(_=_.listener,b!==c&&a.isPropagationStopped())break e;Ze(a,_,k),c=b}else for(d=0;d<o.length;d++){if(_=o[d],b=_.instance,k=_.currentTarget,_=_.listener,b!==c&&a.isPropagationStopped())break e;Ze(a,_,k),c=b}}}if(Ub)throw s=Vb,Ub=!1,Vb=null,s}function G(s,e){var i=$e(e),o=s+"__bubble";i.has(o)||(af(e,s,2,!1),i.add(o))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(s){s[bf]||(s[bf]=!0,ba.forEach(function(e){Ye.has(e)||df(e,!1,s,null),df(e,!0,s,null)}))}function df(s,e,i,o){var a=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=i;if(s==="selectionchange"&&i.nodeType!==9&&(c=i.ownerDocument),o!==null&&!e&&Ye.has(s)){if(s!=="scroll")return;a|=2,c=o}var d=$e(c),_=s+"__"+(e?"capture":"bubble");d.has(_)||(e&&(a|=4),af(c,s,a,e),d.add(_))}function af(s,e,i,o){var a=Nc.get(e);switch(a===void 0?2:a){case 0:a=gd;break;case 1:a=id;break;default:a=hd}i=a.bind(null,e,i,s),a=void 0,!Pb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),o?a!==void 0?s.addEventListener(e,i,{capture:!0,passive:a}):s.addEventListener(e,i,!0):a!==void 0?s.addEventListener(e,i,{passive:a}):s.addEventListener(e,i,!1)}function jd(s,e,i,o,a){var c=o;if((e&1)===0&&(e&2)===0&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var _=o.stateNode.containerInfo;if(_===a||_.nodeType===8&&_.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;d=d.return}for(;_!==null;){if(d=wc(_),d===null)return;if(b=d.tag,b===5||b===6){o=c=d;continue e}_=_.parentNode}}o=o.return}Nb(function(){var k=c,j=xb(i),_e=[];e:{var et=Mc.get(s);if(et!==void 0){var tt=td,it=s;switch(s){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":tt=Rd;break;case"focusin":it="focus",tt=Fd;break;case"focusout":it="blur",tt=Fd;break;case"beforeblur":case"afterblur":tt=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Vd;break;case Ic:case Jc:case Kc:tt=Hd;break;case Lc:tt=Xd;break;case"scroll":tt=vd;break;case"wheel":tt=Zd;break;case"copy":case"cut":case"paste":tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Td}var st=(e&4)!==0,ot=!st&&s==="scroll",nt=st?et!==null?et+"Capture":null:et;st=[];for(var rt=k,at;rt!==null;){at=rt;var lt=at.stateNode;if(at.tag===5&&lt!==null&&(at=lt,nt!==null&&(lt=Ob(rt,nt),lt!=null&&st.push(ef(rt,lt,at)))),ot)break;rt=rt.return}0<st.length&&(et=new tt(et,it,null,i,j),_e.push({event:et,listeners:st}))}}if((e&7)===0){e:{if(et=s==="mouseover"||s==="pointerover",tt=s==="mouseout"||s==="pointerout",et&&(e&16)===0&&(it=i.relatedTarget||i.fromElement)&&(wc(it)||it[ff]))break e;if((tt||et)&&(et=j.window===j?j:(et=j.ownerDocument)?et.defaultView||et.parentWindow:window,tt?(it=i.relatedTarget||i.toElement,tt=k,it=it?wc(it):null,it!==null&&(ot=Zb(it),it!==ot||it.tag!==5&&it.tag!==6)&&(it=null)):(tt=null,it=k),tt!==it)){if(st=Bd,lt="onMouseLeave",nt="onMouseEnter",rt="mouse",(s==="pointerout"||s==="pointerover")&&(st=Td,lt="onPointerLeave",nt="onPointerEnter",rt="pointer"),ot=tt==null?et:ue(tt),at=it==null?et:ue(it),et=new st(lt,rt+"leave",tt,i,j),et.target=ot,et.relatedTarget=at,lt=null,wc(j)===k&&(st=new st(nt,rt+"enter",it,i,j),st.target=at,st.relatedTarget=ot,lt=st),ot=lt,tt&&it)t:{for(st=tt,nt=it,rt=0,at=st;at;at=gf(at))rt++;for(at=0,lt=nt;lt;lt=gf(lt))at++;for(;0<rt-at;)st=gf(st),rt--;for(;0<at-rt;)nt=gf(nt),at--;for(;rt--;){if(st===nt||nt!==null&&st===nt.alternate)break t;st=gf(st),nt=gf(nt)}st=null}else st=null;tt!==null&&hf(_e,et,tt,st,!1),it!==null&&ot!==null&&hf(_e,ot,it,st,!0)}}e:{if(et=k?ue(k):window,tt=et.nodeName&&et.nodeName.toLowerCase(),tt==="select"||tt==="input"&&et.type==="file")var gt=ve;else if(me(et))if(we)gt=Fe;else{gt=De;var ht=Ce}else(tt=et.nodeName)&&tt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(gt=Ee);if(gt&&(gt=gt(s,k))){ne(_e,gt,i,j);break e}ht&&ht(s,et,k),s==="focusout"&&(ht=et._wrapperState)&&ht.controlled&&et.type==="number"&&bb(et,"number",et.value)}switch(ht=k?ue(k):window,s){case"focusin":(me(ht)||ht.contentEditable==="true")&&(Qe=ht,Re=k,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_e,i,j);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_e,i,j)}var ut;if(ae)e:{switch(s){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else ie?ge(s,i)&&(ct="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(ct="onCompositionStart");ct&&(de&&i.locale!=="ko"&&(ie||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&ie&&(ut=nd()):(kd=j,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ht=oe(k,ct),0<ht.length&&(ct=new Ld(ct,s,null,i,j),_e.push({event:ct,listeners:ht}),ut?ct.data=ut:(ut=he(i),ut!==null&&(ct.data=ut)))),(ut=ce?je(s,i):ke(s,i))&&(k=oe(k,"onBeforeInput"),0<k.length&&(j=new Ld("onBeforeInput","beforeinput",null,i,j),_e.push({event:j,listeners:k}),j.data=ut))}se(_e,e)})}function ef(s,e,i){return{instance:s,listener:e,currentTarget:i}}function oe(s,e){for(var i=e+"Capture",o=[];s!==null;){var a=s,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Ob(s,i),c!=null&&o.unshift(ef(s,c,a)),c=Ob(s,e),c!=null&&o.push(ef(s,c,a))),s=s.return}return o}function gf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function hf(s,e,i,o,a){for(var c=e._reactName,d=[];i!==null&&i!==o;){var _=i,b=_.alternate,k=_.stateNode;if(b!==null&&b===o)break;_.tag===5&&k!==null&&(_=k,a?(b=Ob(i,c),b!=null&&d.unshift(ef(i,b,_))):a||(b=Ob(i,c),b!=null&&d.push(ef(i,b,_)))),i=i.return}d.length!==0&&s.push({event:e,listeners:d})}function jf(){}var kf=null,lf=null;function mf(s,e){switch(s){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function nf(s,e){return s==="textarea"||s==="option"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(s){s.nodeType===1?s.textContent="":s.nodeType===9&&(s=s.body,s!=null&&(s.textContent=""))}function rf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break}return s}function sf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return s;e--}else i==="/$"&&e++}s=s.previousSibling}return null}var tf=0;function uf(s){return{$$typeof:Ga,toString:s,valueOf:s}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(s){var e=s[wf];if(e)return e;for(var i=s.parentNode;i;){if(e=i[ff]||i[wf]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(s=sf(s);s!==null;){if(i=s[wf])return i;s=sf(s)}return e}s=i,i=s.parentNode}return null}function Cb(s){return s=s[wf]||s[ff],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(y(33))}function Db(s){return s[xf]||null}function $e(s){var e=s[yf];return e===void 0&&(e=s[yf]=new Set),e}var zf=[],Af=-1;function Bf(s){return{current:s}}function H(s){0>Af||(s.current=zf[Af],zf[Af]=null,Af--)}function I(s,e){Af++,zf[Af]=s.current,s.current=e}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;function Ef(s,e){var i=s.type.contextTypes;if(!i)return Cf;var o=s.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in i)a[c]=e[c];return o&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=a),a}function Ff(s){return s=s.childContextTypes,s!=null}function Gf(){H(N),H(M)}function Hf(s,e,i){if(M.current!==Cf)throw Error(y(168));I(M,e),I(N,i)}function If(s,e,i){var o=s.stateNode;if(s=e.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var a in o)if(!(a in s))throw Error(y(108,Ra(e)||"Unknown",a));return m$1({},i,o)}function Jf(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Cf,Df=M.current,I(M,s),I(N,N.current),!0}function Kf(s,e,i){var o=s.stateNode;if(!o)throw Error(y(169));i?(s=If(s,e,Df),o.__reactInternalMemoizedMergedChildContext=s,H(N),H(M),I(M,s)):H(N),I(N,i)}var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332))}}function fg(s){switch(s){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332))}}function gg(s,e){return s=fg(s),Nf(s,e)}function hg(s,e,i){return s=fg(s),Of(s,e,i)}function ig(){if(bg!==null){var s=bg;bg=null,Pf(s)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var s=0;try{var e=ag;gg(99,function(){for(;s<e.length;s++){var i=e[s];do i=i(!0);while(i!==null)}}),ag=null}catch(i){throw ag!==null&&(ag=ag.slice(s+1)),Of(Uf,ig),i}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(s,e){if(s&&s.defaultProps){e=m$1({},e),s=s.defaultProps;for(var i in s)e[i]===void 0&&(e[i]=s[i]);return e}return e}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(s){var e=mg.current;H(mg),s.type._context._currentValue=e}function sg(s,e){for(;s!==null;){var i=s.alternate;if((s.childLanes&e)===e){if(i===null||(i.childLanes&e)===e)break;i.childLanes|=e}else s.childLanes|=e,i!==null&&(i.childLanes|=e);s=s.return}}function tg(s,e){ng=s,pg=og=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&e)!==0&&(ug=!0),s.firstContext=null)}function vg(s,e){if(pg!==s&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(pg=s,e=1073741823),e={context:s,observedBits:e,next:null},og===null){if(ng===null)throw Error(y(308));og=e,ng.dependencies={lanes:0,firstContext:e,responders:null}}else og=og.next=e;return s._currentValue}var wg=!1;function xg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function zg(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Ag(s,e){if(s=s.updateQueue,s!==null){s=s.shared;var i=s.pending;i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e}}function Bg(s,e){var i=s.updateQueue,o=s.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var a=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?a=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?a=c=e:c=c.next=e}else a=c=e;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=e:s.next=e,i.lastBaseUpdate=e}function Cg(s,e,i,o){var a=s.updateQueue;wg=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,_=a.shared.pending;if(_!==null){a.shared.pending=null;var b=_,k=b.next;b.next=null,d===null?c=k:d.next=k,d=b;var j=s.alternate;if(j!==null){j=j.updateQueue;var _e=j.lastBaseUpdate;_e!==d&&(_e===null?j.firstBaseUpdate=k:_e.next=k,j.lastBaseUpdate=b)}}if(c!==null){_e=a.baseState,d=0,j=k=b=null;do{_=c.lane;var et=c.eventTime;if((o&_)===_){j!==null&&(j=j.next={eventTime:et,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var tt=s,it=c;switch(_=e,et=i,it.tag){case 1:if(tt=it.payload,typeof tt=="function"){_e=tt.call(et,_e,_);break e}_e=tt;break e;case 3:tt.flags=tt.flags&-4097|64;case 0:if(tt=it.payload,_=typeof tt=="function"?tt.call(et,_e,_):tt,_==null)break e;_e=m$1({},_e,_);break e;case 2:wg=!0}}c.callback!==null&&(s.flags|=32,_=a.effects,_===null?a.effects=[c]:_.push(c))}else et={eventTime:et,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},j===null?(k=j=et,b=_e):j=j.next=et,d|=_;if(c=c.next,c===null){if(_=a.shared.pending,_===null)break;c=_.next,_.next=null,a.lastBaseUpdate=_,a.shared.pending=null}}while(1);j===null&&(b=_e),a.baseState=b,a.firstBaseUpdate=k,a.lastBaseUpdate=j,Dg|=d,s.lanes=d,s.memoizedState=_e}}function Eg(s,e,i){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var o=s[e],a=o.callback;if(a!==null){if(o.callback=null,o=i,typeof a!="function")throw Error(y(191,a));a.call(o)}}}var Fg=new aa.Component().refs;function Gg(s,e,i,o){e=s.memoizedState,i=i(o,e),i=i==null?e:m$1({},e,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var Kg={isMounted:function(s){return(s=s._reactInternals)?Zb(s)===s:!1},enqueueSetState:function(s,e,i){s=s._reactInternals;var o=Hg(),a=Ig(s),c=zg(o,a);c.payload=e,i!=null&&(c.callback=i),Ag(s,c),Jg(s,a,o)},enqueueReplaceState:function(s,e,i){s=s._reactInternals;var o=Hg(),a=Ig(s),c=zg(o,a);c.tag=1,c.payload=e,i!=null&&(c.callback=i),Ag(s,c),Jg(s,a,o)},enqueueForceUpdate:function(s,e){s=s._reactInternals;var i=Hg(),o=Ig(s),a=zg(i,o);a.tag=2,e!=null&&(a.callback=e),Ag(s,a),Jg(s,o,i)}};function Lg(s,e,i,o,a,c,d){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(o,c,d):e.prototype&&e.prototype.isPureReactComponent?!Je(i,o)||!Je(a,c):!0}function Mg(s,e,i){var o=!1,a=Cf,c=e.contextType;return typeof c=="object"&&c!==null?c=vg(c):(a=Ff(e)?Df:M.current,o=e.contextTypes,c=(o=o!=null)?Ef(s,a):Cf),e=new e(i,c),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,s.stateNode=e,e._reactInternals=s,o&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=c),e}function Ng(s,e,i,o){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,o),e.state!==s&&Kg.enqueueReplaceState(e,e.state,null)}function Og(s,e,i,o){var a=s.stateNode;a.props=i,a.state=s.memoizedState,a.refs=Fg,xg(s);var c=e.contextType;typeof c=="object"&&c!==null?a.context=vg(c):(c=Ff(e)?Df:M.current,a.context=Ef(s,c)),Cg(s,i,a,o),a.state=s.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Gg(s,e,c,i),a.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Kg.enqueueReplaceState(a,a.state,null),Cg(s,i,a,o),a.state=s.memoizedState),typeof a.componentDidMount=="function"&&(s.flags|=4)}var Pg=Array.isArray;function Qg(s,e,i){if(s=i.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(y(309));var o=i.stateNode}if(!o)throw Error(y(147,s));var a=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(c){var d=o.refs;d===Fg&&(d=o.refs={}),c===null?delete d[a]:d[a]=c},e._stringRef=a,e)}if(typeof s!="string")throw Error(y(284));if(!i._owner)throw Error(y(290,s))}return s}function Rg(s,e){if(s.type!=="textarea")throw Error(y(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Sg(s){function e(ot,nt){if(s){var rt=ot.lastEffect;rt!==null?(rt.nextEffect=nt,ot.lastEffect=nt):ot.firstEffect=ot.lastEffect=nt,nt.nextEffect=null,nt.flags=8}}function i(ot,nt){if(!s)return null;for(;nt!==null;)e(ot,nt),nt=nt.sibling;return null}function o(ot,nt){for(ot=new Map;nt!==null;)nt.key!==null?ot.set(nt.key,nt):ot.set(nt.index,nt),nt=nt.sibling;return ot}function a(ot,nt){return ot=Tg(ot,nt),ot.index=0,ot.sibling=null,ot}function c(ot,nt,rt){return ot.index=rt,s?(rt=ot.alternate,rt!==null?(rt=rt.index,rt<nt?(ot.flags=2,nt):rt):(ot.flags=2,nt)):nt}function d(ot){return s&&ot.alternate===null&&(ot.flags=2),ot}function _(ot,nt,rt,at){return nt===null||nt.tag!==6?(nt=Ug(rt,ot.mode,at),nt.return=ot,nt):(nt=a(nt,rt),nt.return=ot,nt)}function b(ot,nt,rt,at){return nt!==null&&nt.elementType===rt.type?(at=a(nt,rt.props),at.ref=Qg(ot,nt,rt),at.return=ot,at):(at=Vg(rt.type,rt.key,rt.props,null,ot.mode,at),at.ref=Qg(ot,nt,rt),at.return=ot,at)}function k(ot,nt,rt,at){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==rt.containerInfo||nt.stateNode.implementation!==rt.implementation?(nt=Wg(rt,ot.mode,at),nt.return=ot,nt):(nt=a(nt,rt.children||[]),nt.return=ot,nt)}function j(ot,nt,rt,at,lt){return nt===null||nt.tag!==7?(nt=Xg(rt,ot.mode,at,lt),nt.return=ot,nt):(nt=a(nt,rt),nt.return=ot,nt)}function _e(ot,nt,rt){if(typeof nt=="string"||typeof nt=="number")return nt=Ug(""+nt,ot.mode,rt),nt.return=ot,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case sa:return rt=Vg(nt.type,nt.key,nt.props,null,ot.mode,rt),rt.ref=Qg(ot,null,nt),rt.return=ot,rt;case ta:return nt=Wg(nt,ot.mode,rt),nt.return=ot,nt}if(Pg(nt)||La(nt))return nt=Xg(nt,ot.mode,rt,null),nt.return=ot,nt;Rg(ot,nt)}return null}function et(ot,nt,rt,at){var lt=nt!==null?nt.key:null;if(typeof rt=="string"||typeof rt=="number")return lt!==null?null:_(ot,nt,""+rt,at);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case sa:return rt.key===lt?rt.type===ua?j(ot,nt,rt.props.children,at,lt):b(ot,nt,rt,at):null;case ta:return rt.key===lt?k(ot,nt,rt,at):null}if(Pg(rt)||La(rt))return lt!==null?null:j(ot,nt,rt,at,null);Rg(ot,rt)}return null}function tt(ot,nt,rt,at,lt){if(typeof at=="string"||typeof at=="number")return ot=ot.get(rt)||null,_(nt,ot,""+at,lt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case sa:return ot=ot.get(at.key===null?rt:at.key)||null,at.type===ua?j(nt,ot,at.props.children,lt,at.key):b(nt,ot,at,lt);case ta:return ot=ot.get(at.key===null?rt:at.key)||null,k(nt,ot,at,lt)}if(Pg(at)||La(at))return ot=ot.get(rt)||null,j(nt,ot,at,lt,null);Rg(nt,at)}return null}function it(ot,nt,rt,at){for(var lt=null,gt=null,ht=nt,ut=nt=0,ct=null;ht!==null&&ut<rt.length;ut++){ht.index>ut?(ct=ht,ht=null):ct=ht.sibling;var ft=et(ot,ht,rt[ut],at);if(ft===null){ht===null&&(ht=ct);break}s&&ht&&ft.alternate===null&&e(ot,ht),nt=c(ft,nt,ut),gt===null?lt=ft:gt.sibling=ft,gt=ft,ht=ct}if(ut===rt.length)return i(ot,ht),lt;if(ht===null){for(;ut<rt.length;ut++)ht=_e(ot,rt[ut],at),ht!==null&&(nt=c(ht,nt,ut),gt===null?lt=ht:gt.sibling=ht,gt=ht);return lt}for(ht=o(ot,ht);ut<rt.length;ut++)ct=tt(ht,ot,ut,rt[ut],at),ct!==null&&(s&&ct.alternate!==null&&ht.delete(ct.key===null?ut:ct.key),nt=c(ct,nt,ut),gt===null?lt=ct:gt.sibling=ct,gt=ct);return s&&ht.forEach(function(dt){return e(ot,dt)}),lt}function st(ot,nt,rt,at){var lt=La(rt);if(typeof lt!="function")throw Error(y(150));if(rt=lt.call(rt),rt==null)throw Error(y(151));for(var gt=lt=null,ht=nt,ut=nt=0,ct=null,ft=rt.next();ht!==null&&!ft.done;ut++,ft=rt.next()){ht.index>ut?(ct=ht,ht=null):ct=ht.sibling;var dt=et(ot,ht,ft.value,at);if(dt===null){ht===null&&(ht=ct);break}s&&ht&&dt.alternate===null&&e(ot,ht),nt=c(dt,nt,ut),gt===null?lt=dt:gt.sibling=dt,gt=dt,ht=ct}if(ft.done)return i(ot,ht),lt;if(ht===null){for(;!ft.done;ut++,ft=rt.next())ft=_e(ot,ft.value,at),ft!==null&&(nt=c(ft,nt,ut),gt===null?lt=ft:gt.sibling=ft,gt=ft);return lt}for(ht=o(ot,ht);!ft.done;ut++,ft=rt.next())ft=tt(ht,ot,ut,ft.value,at),ft!==null&&(s&&ft.alternate!==null&&ht.delete(ft.key===null?ut:ft.key),nt=c(ft,nt,ut),gt===null?lt=ft:gt.sibling=ft,gt=ft);return s&&ht.forEach(function(pt){return e(ot,pt)}),lt}return function(ot,nt,rt,at){var lt=typeof rt=="object"&&rt!==null&&rt.type===ua&&rt.key===null;lt&&(rt=rt.props.children);var gt=typeof rt=="object"&&rt!==null;if(gt)switch(rt.$$typeof){case sa:e:{for(gt=rt.key,lt=nt;lt!==null;){if(lt.key===gt){switch(lt.tag){case 7:if(rt.type===ua){i(ot,lt.sibling),nt=a(lt,rt.props.children),nt.return=ot,ot=nt;break e}break;default:if(lt.elementType===rt.type){i(ot,lt.sibling),nt=a(lt,rt.props),nt.ref=Qg(ot,lt,rt),nt.return=ot,ot=nt;break e}}i(ot,lt);break}else e(ot,lt);lt=lt.sibling}rt.type===ua?(nt=Xg(rt.props.children,ot.mode,at,rt.key),nt.return=ot,ot=nt):(at=Vg(rt.type,rt.key,rt.props,null,ot.mode,at),at.ref=Qg(ot,nt,rt),at.return=ot,ot=at)}return d(ot);case ta:e:{for(lt=rt.key;nt!==null;){if(nt.key===lt)if(nt.tag===4&&nt.stateNode.containerInfo===rt.containerInfo&&nt.stateNode.implementation===rt.implementation){i(ot,nt.sibling),nt=a(nt,rt.children||[]),nt.return=ot,ot=nt;break e}else{i(ot,nt);break}else e(ot,nt);nt=nt.sibling}nt=Wg(rt,ot.mode,at),nt.return=ot,ot=nt}return d(ot)}if(typeof rt=="string"||typeof rt=="number")return rt=""+rt,nt!==null&&nt.tag===6?(i(ot,nt.sibling),nt=a(nt,rt),nt.return=ot,ot=nt):(i(ot,nt),nt=Ug(rt,ot.mode,at),nt.return=ot,ot=nt),d(ot);if(Pg(rt))return it(ot,nt,rt,at);if(La(rt))return st(ot,nt,rt,at);if(gt&&Rg(ot,rt),typeof rt>"u"&&!lt)switch(ot.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(ot.type)||"Component"))}return i(ot,nt)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(s){if(s===$g)throw Error(y(174));return s}function eh(s,e){switch(I(ch,e),I(bh,s),I(ah,$g),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=mb(e,s)}H(ah),I(ah,e)}function fh(){H(ah),H(bh),H(ch)}function gh(s){dh(ch.current);var e=dh(ah.current),i=mb(e,s.type);e!==i&&(I(bh,s),I(ah,i))}function hh(s){bh.current===s&&(H(ah),H(bh))}var P=Bf(0);function ih(s){for(var e=s;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jh=null,kh=null,lh=!1;function mh(s,e){var i=nh(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=s,i.flags=8,s.lastEffect!==null?(s.lastEffect.nextEffect=i,s.lastEffect=i):s.firstEffect=s.lastEffect=i}function oh(s,e){switch(s.tag){case 5:var i=s.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function ph(s){if(lh){var e=kh;if(e){var i=e;if(!oh(s,e)){if(e=rf(i.nextSibling),!e||!oh(s,e)){s.flags=s.flags&-1025|2,lh=!1,jh=s;return}mh(jh,i)}jh=s,kh=rf(e.firstChild)}else s.flags=s.flags&-1025|2,lh=!1,jh=s}}function qh(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jh=s}function rh(s){if(s!==jh)return!1;if(!lh)return qh(s),lh=!0,!1;var e=s.type;if(s.tag!==5||e!=="head"&&e!=="body"&&!nf(e,s.memoizedProps))for(e=kh;e;)mh(s,e),e=rf(e.nextSibling);if(qh(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(y(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="/$"){if(e===0){kh=rf(s.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}s=s.nextSibling}kh=null}}else kh=jh?rf(s.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var s=0;s<th.length;s++)th[s]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321))}function Bh(s,e){if(e===null)return!1;for(var i=0;i<e.length&&i<s.length;i++)if(!He(s[i],e[i]))return!1;return!0}function Ch(s,e,i,o,a,c){if(xh=c,R=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vh.current=s===null||s.memoizedState===null?Dh:Eh,s=i(o,a),zh){c=0;do{if(zh=!1,!(25>c))throw Error(y(301));c+=1,T=S=null,e.updateQueue=null,vh.current=Fh,s=i(o,a)}while(zh)}if(vh.current=Gh,e=S!==null&&S.next!==null,xh=0,T=S=R=null,yh=!1,e)throw Error(y(300));return s}function Hh(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T===null?R.memoizedState=T=s:T=T.next=s,T}function Ih(){if(S===null){var s=R.alternate;s=s!==null?s.memoizedState:null}else s=S.next;var e=T===null?R.memoizedState:T.next;if(e!==null)T=e,S=s;else{if(s===null)throw Error(y(310));S=s,s={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null},T===null?R.memoizedState=T=s:T=T.next=s}return T}function Jh(s,e){return typeof e=="function"?e(s):e}function Kh(s){var e=Ih(),i=e.queue;if(i===null)throw Error(y(311));i.lastRenderedReducer=s;var o=S,a=o.baseQueue,c=i.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,i.pending=null}if(a!==null){a=a.next,o=o.baseState;var _=d=c=null,b=a;do{var k=b.lane;if((xh&k)===k)_!==null&&(_=_.next={lane:0,action:b.action,eagerReducer:b.eagerReducer,eagerState:b.eagerState,next:null}),o=b.eagerReducer===s?b.eagerState:s(o,b.action);else{var j={lane:k,action:b.action,eagerReducer:b.eagerReducer,eagerState:b.eagerState,next:null};_===null?(d=_=j,c=o):_=_.next=j,R.lanes|=k,Dg|=k}b=b.next}while(b!==null&&b!==a);_===null?c=o:_.next=d,He(o,e.memoizedState)||(ug=!0),e.memoizedState=o,e.baseState=c,e.baseQueue=_,i.lastRenderedState=o}return[e.memoizedState,i.dispatch]}function Lh(s){var e=Ih(),i=e.queue;if(i===null)throw Error(y(311));i.lastRenderedReducer=s;var o=i.dispatch,a=i.pending,c=e.memoizedState;if(a!==null){i.pending=null;var d=a=a.next;do c=s(c,d.action),d=d.next;while(d!==a);He(c,e.memoizedState)||(ug=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),i.lastRenderedState=c}return[c,o]}function Mh(s,e,i){var o=e._getVersion;o=o(e._source);var a=e._workInProgressVersionPrimary;if(a!==null?s=a===o:(s=s.mutableReadLanes,(s=(xh&s)===s)&&(e._workInProgressVersionPrimary=o,th.push(e))),s)return i(e._source);throw th.push(e),Error(y(350))}function Nh(s,e,i,o){var a=U;if(a===null)throw Error(y(349));var c=e._getVersion,d=c(e._source),_=vh.current,b=_.useState(function(){return Mh(a,e,i)}),k=b[1],j=b[0];b=T;var _e=s.memoizedState,et=_e.refs,tt=et.getSnapshot,it=_e.source;_e=_e.subscribe;var st=R;return s.memoizedState={refs:et,source:e,subscribe:o},_.useEffect(function(){et.getSnapshot=i,et.setSnapshot=k;var ot=c(e._source);if(!He(d,ot)){ot=i(e._source),He(j,ot)||(k(ot),ot=Ig(st),a.mutableReadLanes|=ot&a.pendingLanes),ot=a.mutableReadLanes,a.entangledLanes|=ot;for(var nt=a.entanglements,rt=ot;0<rt;){var at=31-Vc(rt),lt=1<<at;nt[at]|=ot,rt&=~lt}}},[i,e,o]),_.useEffect(function(){return o(e._source,function(){var ot=et.getSnapshot,nt=et.setSnapshot;try{nt(ot(e._source));var rt=Ig(st);a.mutableReadLanes|=rt&a.pendingLanes}catch(at){nt(function(){throw at})}})},[e,o]),He(tt,i)&&He(it,e)&&He(_e,o)||(s={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:j},s.dispatch=k=Oh.bind(null,R,s),b.queue=s,b.baseQueue=null,j=Mh(a,e,i),b.memoizedState=b.baseState=j),j}function Ph(s,e,i){var o=Ih();return Nh(o,s,e,i)}function Qh(s){var e=Hh();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s=e.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:s},s=s.dispatch=Oh.bind(null,R,s),[e.memoizedState,s]}function Rh(s,e,i,o){return s={tag:s,create:e,destroy:i,deps:o,next:null},e=R.updateQueue,e===null?(e={lastEffect:null},R.updateQueue=e,e.lastEffect=s.next=s):(i=e.lastEffect,i===null?e.lastEffect=s.next=s:(o=i.next,i.next=s,s.next=o,e.lastEffect=s)),s}function Sh(s){var e=Hh();return s={current:s},e.memoizedState=s}function Th(){return Ih().memoizedState}function Uh(s,e,i,o){var a=Hh();R.flags|=s,a.memoizedState=Rh(1|e,i,void 0,o===void 0?null:o)}function Vh(s,e,i,o){var a=Ih();o=o===void 0?null:o;var c=void 0;if(S!==null){var d=S.memoizedState;if(c=d.destroy,o!==null&&Bh(o,d.deps)){Rh(e,i,c,o);return}}R.flags|=s,a.memoizedState=Rh(1|e,i,c,o)}function Wh(s,e){return Uh(516,4,s,e)}function Xh(s,e){return Vh(516,4,s,e)}function Yh(s,e){return Vh(4,2,s,e)}function Zh(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function $h(s,e,i){return i=i!=null?i.concat([s]):null,Vh(4,2,Zh.bind(null,e,s),i)}function ai(){}function bi(s,e){var i=Ih();e=e===void 0?null:e;var o=i.memoizedState;return o!==null&&e!==null&&Bh(e,o[1])?o[0]:(i.memoizedState=[s,e],s)}function ci(s,e){var i=Ih();e=e===void 0?null:e;var o=i.memoizedState;return o!==null&&e!==null&&Bh(e,o[1])?o[0]:(s=s(),i.memoizedState=[s,e],s)}function di(s,e){var i=eg();gg(98>i?98:i,function(){s(!0)}),gg(97<i?97:i,function(){var o=wh.transition;wh.transition=1;try{s(!1),e()}finally{wh.transition=o}})}function Oh(s,e,i){var o=Hg(),a=Ig(s),c={lane:a,action:i,eagerReducer:null,eagerState:null,next:null},d=e.pending;if(d===null?c.next=c:(c.next=d.next,d.next=c),e.pending=c,d=s.alternate,s===R||d!==null&&d===R)zh=yh=!0;else{if(s.lanes===0&&(d===null||d.lanes===0)&&(d=e.lastRenderedReducer,d!==null))try{var _=e.lastRenderedState,b=d(_,i);if(c.eagerReducer=d,c.eagerState=b,He(b,_))return}catch{}finally{}Jg(s,a,o)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(s,e){return Hh().memoizedState=[s,e===void 0?null:e],s},useContext:vg,useEffect:Wh,useImperativeHandle:function(s,e,i){return i=i!=null?i.concat([s]):null,Uh(4,2,Zh.bind(null,e,s),i)},useLayoutEffect:function(s,e){return Uh(4,2,s,e)},useMemo:function(s,e){var i=Hh();return e=e===void 0?null:e,s=s(),i.memoizedState=[s,e],s},useReducer:function(s,e,i){var o=Hh();return e=i!==void 0?i(e):e,o.memoizedState=o.baseState=e,s=o.queue={pending:null,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},s=s.dispatch=Oh.bind(null,R,s),[o.memoizedState,s]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(s){var e=Qh(s),i=e[0],o=e[1];return Wh(function(){var a=wh.transition;wh.transition=1;try{o(s)}finally{wh.transition=a}},[s]),i},useTransition:function(){var s=Qh(!1),e=s[0];return s=di.bind(null,s[1]),Sh(s),[s,e]},useMutableSource:function(s,e,i){var o=Hh();return o.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:s,subscribe:i},Nh(o,s,e,i)},useOpaqueIdentifier:function(){if(lh){var s=!1,e=uf(function(){throw s||(s=!0,i("r:"+(tf++).toString(36))),Error(y(355))}),i=Qh(e)[1];return(R.mode&2)===0&&(R.flags|=516,Rh(5,function(){i("r:"+(tf++).toString(36))},void 0,null)),e}return e="r:"+(tf++).toString(36),Qh(e),e},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(s){var e=Kh(Jh),i=e[0],o=e[1];return Xh(function(){var a=wh.transition;wh.transition=1;try{o(s)}finally{wh.transition=a}},[s]),i},useTransition:function(){var s=Kh(Jh)[0];return[Th().current,s]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(s){var e=Lh(Jh),i=e[0],o=e[1];return Xh(function(){var a=wh.transition;wh.transition=1;try{o(s)}finally{wh.transition=a}},[s]),i},useTransition:function(){var s=Lh(Jh)[0];return[Th().current,s]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(s,e,i,o){e.child=s===null?Zg(e,null,i,o):Yg(e,s.child,i,o)}function gi(s,e,i,o,a){i=i.render;var c=e.ref;return tg(e,a),o=Ch(s,e,i,o,c,a),s!==null&&!ug?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~a,hi(s,e,a)):(e.flags|=1,fi(s,e,o,a),e.child)}function ii(s,e,i,o,a,c){if(s===null){var d=i.type;return typeof d=="function"&&!ji(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=d,ki(s,e,d,o,a,c)):(s=Vg(i.type,null,o,e,e.mode,c),s.ref=e.ref,s.return=e,e.child=s)}return d=s.child,(a&c)===0&&(a=d.memoizedProps,i=i.compare,i=i!==null?i:Je,i(a,o)&&s.ref===e.ref)?hi(s,e,c):(e.flags|=1,s=Tg(d,o),s.ref=e.ref,s.return=e,e.child=s)}function ki(s,e,i,o,a,c){if(s!==null&&Je(s.memoizedProps,o)&&s.ref===e.ref)if(ug=!1,(c&a)!==0)(s.flags&16384)!==0&&(ug=!0);else return e.lanes=s.lanes,hi(s,e,c);return li(s,e,i,o,c)}function mi(s,e,i){var o=e.pendingProps,a=o.children,c=s!==null?s.memoizedState:null;if(o.mode==="hidden"||o.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},ni(e,i);else if((i&1073741824)!==0)e.memoizedState={baseLanes:0},ni(e,c!==null?c.baseLanes:i);else return s=c!==null?c.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s},ni(e,s),null;else c!==null?(o=c.baseLanes|i,e.memoizedState=null):o=i,ni(e,o);return fi(s,e,a,i),e.child}function oi(s,e){var i=e.ref;(s===null&&i!==null||s!==null&&s.ref!==i)&&(e.flags|=128)}function li(s,e,i,o,a){var c=Ff(i)?Df:M.current;return c=Ef(e,c),tg(e,a),i=Ch(s,e,i,o,c,a),s!==null&&!ug?(e.updateQueue=s.updateQueue,e.flags&=-517,s.lanes&=~a,hi(s,e,a)):(e.flags|=1,fi(s,e,i,a),e.child)}function pi(s,e,i,o,a){if(Ff(i)){var c=!0;Jf(e)}else c=!1;if(tg(e,a),e.stateNode===null)s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),Mg(e,i,o),Og(e,i,o,a),o=!0;else if(s===null){var d=e.stateNode,_=e.memoizedProps;d.props=_;var b=d.context,k=i.contextType;typeof k=="object"&&k!==null?k=vg(k):(k=Ff(i)?Df:M.current,k=Ef(e,k));var j=i.getDerivedStateFromProps,_e=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function";_e||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==o||b!==k)&&Ng(e,d,o,k),wg=!1;var et=e.memoizedState;d.state=et,Cg(e,o,d,a),b=e.memoizedState,_!==o||et!==b||N.current||wg?(typeof j=="function"&&(Gg(e,i,j,o),b=e.memoizedState),(_=wg||Lg(e,i,_,o,et,b,k))?(_e||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4)):(typeof d.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=o,e.memoizedState=b),d.props=o,d.state=b,d.context=k,o=_):(typeof d.componentDidMount=="function"&&(e.flags|=4),o=!1)}else{d=e.stateNode,yg(s,e),_=e.memoizedProps,k=e.type===e.elementType?_:lg(e.type,_),d.props=k,_e=e.pendingProps,et=d.context,b=i.contextType,typeof b=="object"&&b!==null?b=vg(b):(b=Ff(i)?Df:M.current,b=Ef(e,b));var tt=i.getDerivedStateFromProps;(j=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==_e||et!==b)&&Ng(e,d,o,b),wg=!1,et=e.memoizedState,d.state=et,Cg(e,o,d,a);var it=e.memoizedState;_!==_e||et!==it||N.current||wg?(typeof tt=="function"&&(Gg(e,i,tt,o),it=e.memoizedState),(k=wg||Lg(e,i,k,o,et,it,b))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,it,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,it,b)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof d.componentDidUpdate!="function"||_===s.memoizedProps&&et===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&et===s.memoizedState||(e.flags|=256),e.memoizedProps=o,e.memoizedState=it),d.props=o,d.state=it,d.context=b,o=k):(typeof d.componentDidUpdate!="function"||_===s.memoizedProps&&et===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&et===s.memoizedState||(e.flags|=256),o=!1)}return qi(s,e,i,o,c,a)}function qi(s,e,i,o,a,c){oi(s,e);var d=(e.flags&64)!==0;if(!o&&!d)return a&&Kf(e,i,!1),hi(s,e,c);o=e.stateNode,ei.current=e;var _=d&&typeof i.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,s!==null&&d?(e.child=Yg(e,s.child,null,c),e.child=Yg(e,null,_,c)):fi(s,e,_,c),e.memoizedState=o.state,a&&Kf(e,i,!0),e.child}function ri(s){var e=s.stateNode;e.pendingContext?Hf(s,e.pendingContext,e.pendingContext!==e.context):e.context&&Hf(s,e.context,!1),eh(s,e.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(s,e,i){var o=e.pendingProps,a=P.current,c=!1,d;return(d=(e.flags&64)!==0)||(d=s!==null&&s.memoizedState===null?!1:(a&2)!==0),d?(c=!0,e.flags&=-65):s!==null&&s.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(a|=1),I(P,a&1),s===null?(o.fallback!==void 0&&ph(e),s=o.children,a=o.fallback,c?(s=ui(e,s,a,i),e.child.memoizedState={baseLanes:i},e.memoizedState=si,s):typeof o.unstable_expectedLoadTime=="number"?(s=ui(e,s,a,i),e.child.memoizedState={baseLanes:i},e.memoizedState=si,e.lanes=33554432,s):(i=vi({mode:"visible",children:s},e.mode,i,null),i.return=e,e.child=i)):s.memoizedState!==null?c?(o=wi(s,e,o.children,o.fallback,i),c=e.child,a=s.child.memoizedState,c.memoizedState=a===null?{baseLanes:i}:{baseLanes:a.baseLanes|i},c.childLanes=s.childLanes&~i,e.memoizedState=si,o):(i=xi(s,e,o.children,i),e.memoizedState=null,i):c?(o=wi(s,e,o.children,o.fallback,i),c=e.child,a=s.child.memoizedState,c.memoizedState=a===null?{baseLanes:i}:{baseLanes:a.baseLanes|i},c.childLanes=s.childLanes&~i,e.memoizedState=si,o):(i=xi(s,e,o.children,i),e.memoizedState=null,i)}function ui(s,e,i,o){var a=s.mode,c=s.child;return e={mode:"hidden",children:e},(a&2)===0&&c!==null?(c.childLanes=0,c.pendingProps=e):c=vi(e,a,0,null),i=Xg(i,a,o,null),c.return=s,i.return=s,c.sibling=i,s.child=c,i}function xi(s,e,i,o){var a=s.child;return s=a.sibling,i=Tg(a,{mode:"visible",children:i}),(e.mode&2)===0&&(i.lanes=o),i.return=e,i.sibling=null,s!==null&&(s.nextEffect=null,s.flags=8,e.firstEffect=e.lastEffect=s),e.child=i}function wi(s,e,i,o,a){var c=e.mode,d=s.child;s=d.sibling;var _={mode:"hidden",children:i};return(c&2)===0&&e.child!==d?(i=e.child,i.childLanes=0,i.pendingProps=_,d=i.lastEffect,d!==null?(e.firstEffect=i.firstEffect,e.lastEffect=d,d.nextEffect=null):e.firstEffect=e.lastEffect=null):i=Tg(d,_),s!==null?o=Tg(s,o):(o=Xg(o,c,a,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,o}function yi(s,e){s.lanes|=e;var i=s.alternate;i!==null&&(i.lanes|=e),sg(s.return,e)}function zi(s,e,i,o,a,c){var d=s.memoizedState;d===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a,lastEffect:c}:(d.isBackwards=e,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=i,d.tailMode=a,d.lastEffect=c)}function Ai(s,e,i){var o=e.pendingProps,a=o.revealOrder,c=o.tail;if(fi(s,e,o.children,i),o=P.current,(o&2)!==0)o=o&1|2,e.flags|=64;else{if(s!==null&&(s.flags&64)!==0)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yi(s,i);else if(s.tag===19)yi(s,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o&=1}if(I(P,o),(e.mode&2)===0)e.memoizedState=null;else switch(a){case"forwards":for(i=e.child,a=null;i!==null;)s=i.alternate,s!==null&&ih(s)===null&&(a=i),i=i.sibling;i=a,i===null?(a=e.child,e.child=null):(a=i.sibling,i.sibling=null),zi(e,!1,a,i,c,e.lastEffect);break;case"backwards":for(i=null,a=e.child,e.child=null;a!==null;){if(s=a.alternate,s!==null&&ih(s)===null){e.child=a;break}s=a.sibling,a.sibling=i,i=a,a=s}zi(e,!0,i,null,c,e.lastEffect);break;case"together":zi(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function hi(s,e,i){if(s!==null&&(e.dependencies=s.dependencies),Dg|=e.lanes,(i&e.childLanes)!==0){if(s!==null&&e.child!==s.child)throw Error(y(153));if(e.child!==null){for(s=e.child,i=Tg(s,s.pendingProps),e.child=i,i.return=e;s.sibling!==null;)s=s.sibling,i=i.sibling=Tg(s,s.pendingProps),i.return=e;i.sibling=null}return e.child}return null}var Bi,Ci,Di,Ei;Bi=function(s,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)s.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Ci=function(){};Di=function(s,e,i,o){var a=s.memoizedProps;if(a!==o){s=e.stateNode,dh(ah.current);var c=null;switch(i){case"input":a=Ya(s,a),o=Ya(s,o),c=[];break;case"option":a=eb(s,a),o=eb(s,o),c=[];break;case"select":a=m$1({},a,{value:void 0}),o=m$1({},o,{value:void 0}),c=[];break;case"textarea":a=gb(s,a),o=gb(s,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(s.onclick=jf)}vb(i,o);var d;i=null;for(k in a)if(!o.hasOwnProperty(k)&&a.hasOwnProperty(k)&&a[k]!=null)if(k==="style"){var _=a[k];for(d in _)_.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(ca.hasOwnProperty(k)?c||(c=[]):(c=c||[]).push(k,null));for(k in o){var b=o[k];if(_=a!=null?a[k]:void 0,o.hasOwnProperty(k)&&b!==_&&(b!=null||_!=null))if(k==="style")if(_){for(d in _)!_.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in b)b.hasOwnProperty(d)&&_[d]!==b[d]&&(i||(i={}),i[d]=b[d])}else i||(c||(c=[]),c.push(k,i)),i=b;else k==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,_=_?_.__html:void 0,b!=null&&_!==b&&(c=c||[]).push(k,b)):k==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(k,""+b):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(ca.hasOwnProperty(k)?(b!=null&&k==="onScroll"&&G("scroll",s),c||_===b||(c=[])):typeof b=="object"&&b!==null&&b.$$typeof===Ga?b.toString():(c=c||[]).push(k,b))}i&&(c=c||[]).push("style",i);var k=c;(e.updateQueue=k)&&(e.flags|=4)}};Ei=function(s,e,i,o){i!==o&&(e.flags|=4)};function Fi(s,e){if(!lh)switch(s.tailMode){case"hidden":e=s.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:o.sibling=null}}function Gi(s,e,i){var o=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(e.type)&&Gf(),null;case 3:return fh(),H(N),H(M),uh(),o=e.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(rh(e)?e.flags|=4:o.hydrate||(e.flags|=256)),Ci(e),null;case 5:hh(e);var a=dh(ch.current);if(i=e.type,s!==null&&e.stateNode!=null)Di(s,e,i,o,a),s.ref!==e.ref&&(e.flags|=128);else{if(!o){if(e.stateNode===null)throw Error(y(166));return null}if(s=dh(ah.current),rh(e)){o=e.stateNode,i=e.type;var c=e.memoizedProps;switch(o[wf]=e,o[xf]=c,i){case"dialog":G("cancel",o),G("close",o);break;case"iframe":case"object":case"embed":G("load",o);break;case"video":case"audio":for(s=0;s<Xe.length;s++)G(Xe[s],o);break;case"source":G("error",o);break;case"img":case"image":case"link":G("error",o),G("load",o);break;case"details":G("toggle",o);break;case"input":Za(o,c),G("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},G("invalid",o);break;case"textarea":hb(o,c),G("invalid",o)}vb(i,c),s=null;for(var d in c)c.hasOwnProperty(d)&&(a=c[d],d==="children"?typeof a=="string"?o.textContent!==a&&(s=["children",a]):typeof a=="number"&&o.textContent!==""+a&&(s=["children",""+a]):ca.hasOwnProperty(d)&&a!=null&&d==="onScroll"&&G("scroll",o));switch(i){case"input":Va(o),cb(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=jf)}o=s,e.updateQueue=o,o!==null&&(e.flags|=4)}else{switch(d=a.nodeType===9?a:a.ownerDocument,s===kb.html&&(s=lb(i)),s===kb.html?i==="script"?(s=d.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof o.is=="string"?s=d.createElement(i,{is:o.is}):(s=d.createElement(i),i==="select"&&(d=s,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):s=d.createElementNS(s,i),s[wf]=e,s[xf]=o,Bi(s,e,!1,!1),e.stateNode=s,d=wb(i,o),i){case"dialog":G("cancel",s),G("close",s),a=o;break;case"iframe":case"object":case"embed":G("load",s),a=o;break;case"video":case"audio":for(a=0;a<Xe.length;a++)G(Xe[a],s);a=o;break;case"source":G("error",s),a=o;break;case"img":case"image":case"link":G("error",s),G("load",s),a=o;break;case"details":G("toggle",s),a=o;break;case"input":Za(s,o),a=Ya(s,o),G("invalid",s);break;case"option":a=eb(s,o);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},a=m$1({},o,{value:void 0}),G("invalid",s);break;case"textarea":hb(s,o),a=gb(s,o),G("invalid",s);break;default:a=o}vb(i,a);var _=a;for(c in _)if(_.hasOwnProperty(c)){var b=_[c];c==="style"?tb(s,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&ob(s,b)):c==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&pb(s,b):typeof b=="number"&&pb(s,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ca.hasOwnProperty(c)?b!=null&&c==="onScroll"&&G("scroll",s):b!=null&&qa(s,c,b,d))}switch(i){case"input":Va(s),cb(s,o,!1);break;case"textarea":Va(s),jb(s);break;case"option":o.value!=null&&s.setAttribute("value",""+Sa(o.value));break;case"select":s.multiple=!!o.multiple,c=o.value,c!=null?fb(s,!!o.multiple,c,!1):o.defaultValue!=null&&fb(s,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(s.onclick=jf)}mf(i,o)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(s&&e.stateNode!=null)Ei(s,e,s.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(y(166));i=dh(ch.current),dh(ah.current),rh(e)?(o=e.stateNode,i=e.memoizedProps,o[wf]=e,o.nodeValue!==i&&(e.flags|=4)):(o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[wf]=e,e.stateNode=o)}return null;case 13:return H(P),o=e.memoizedState,(e.flags&64)!==0?(e.lanes=i,e):(o=o!==null,i=!1,s===null?e.memoizedProps.fallback!==void 0&&rh(e):i=s.memoizedState!==null,o&&!i&&(e.mode&2)!==0&&(s===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(P.current&1)!==0?V===0&&(V=3):((V===0||V===3)&&(V=4),U===null||(Dg&134217727)===0&&(Hi&134217727)===0||Ii(U,W))),(o||i)&&(e.flags|=4),null);case 4:return fh(),Ci(e),s===null&&cf(e.stateNode.containerInfo),null;case 10:return rg(e),null;case 17:return Ff(e.type)&&Gf(),null;case 19:if(H(P),o=e.memoizedState,o===null)return null;if(c=(e.flags&64)!==0,d=o.rendering,d===null)if(c)Fi(o,!1);else{if(V!==0||s!==null&&(s.flags&64)!==0)for(s=e.child;s!==null;){if(d=ih(s),d!==null){for(e.flags|=64,Fi(o,!1),c=d.updateQueue,c!==null&&(e.updateQueue=c,e.flags|=4),o.lastEffect===null&&(e.firstEffect=null),e.lastEffect=o.lastEffect,o=i,i=e.child;i!==null;)c=i,s=o,c.flags&=2,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null,d=c.alternate,d===null?(c.childLanes=0,c.lanes=s,c.child=null,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,s=d.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i=i.sibling;return I(P,P.current&1|2),e.child}s=s.sibling}o.tail!==null&&O()>Ji&&(e.flags|=64,c=!0,Fi(o,!1),e.lanes=33554432)}else{if(!c)if(s=ih(d),s!==null){if(e.flags|=64,c=!0,i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Fi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!lh)return e=e.lastEffect=o.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*O()-o.renderingStartTime>Ji&&i!==1073741824&&(e.flags|=64,c=!0,Fi(o,!1),e.lanes=33554432);o.isBackwards?(d.sibling=e.child,e.child=d):(i=o.last,i!==null?i.sibling=d:e.child=d,o.last=d)}return o.tail!==null?(i=o.tail,o.rendering=i,o.tail=i.sibling,o.lastEffect=e.lastEffect,o.renderingStartTime=O(),i.sibling=null,e=P.current,I(P,c?e&1|2:e&1),i):null;case 23:case 24:return Ki(),s!==null&&s.memoizedState!==null!=(e.memoizedState!==null)&&o.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(y(156,e.tag))}function Li(s){switch(s.tag){case 1:Ff(s.type)&&Gf();var e=s.flags;return e&4096?(s.flags=e&-4097|64,s):null;case 3:if(fh(),H(N),H(M),uh(),e=s.flags,(e&64)!==0)throw Error(y(285));return s.flags=e&-4097|64,s;case 5:return hh(s),null;case 13:return H(P),e=s.flags,e&4096?(s.flags=e&-4097|64,s):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(s),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(s,e){try{var i="",o=e;do i+=Qa(o),o=o.return;while(o);var a=i}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:s,source:e,stack:a}}function Ni(s,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(s,e,i){i=zg(-1,i),i.tag=3,i.payload={element:null};var o=e.value;return i.callback=function(){Qi||(Qi=!0,Ri=o),Ni(s,e)},i}function Si(s,e,i){i=zg(-1,i),i.tag=3;var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var a=e.value;i.payload=function(){return Ni(s,e),o(a)}}var c=s.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){typeof o!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(s,e));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),i}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(s){var e=s.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){Wi(s,i)}else e.current=null}function Xi(s,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&s!==null){var i=s.memoizedProps,o=s.memoizedState;s=e.stateNode,e=s.getSnapshotBeforeUpdate(e.elementType===e.type?i:lg(e.type,i),o),s.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&qf(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163))}function Yi(s,e,i){switch(i.tag){case 0:case 11:case 15:case 22:if(e=i.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{if((s.tag&3)===3){var o=s.create;s.destroy=o()}s=s.next}while(s!==e)}if(e=i.updateQueue,e=e!==null?e.lastEffect:null,e!==null){s=e=e.next;do{var a=s;o=a.next,a=a.tag,(a&4)!==0&&(a&1)!==0&&(Zi(i,s),$i(i,s)),s=o}while(s!==e)}return;case 1:s=i.stateNode,i.flags&4&&(e===null?s.componentDidMount():(o=i.elementType===i.type?e.memoizedProps:lg(i.type,e.memoizedProps),s.componentDidUpdate(o,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate))),e=i.updateQueue,e!==null&&Eg(i,e,s);return;case 3:if(e=i.updateQueue,e!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}Eg(i,e,s)}return;case 5:s=i.stateNode,e===null&&i.flags&4&&mf(i.type,i.memoizedProps)&&s.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&Cc(i))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163))}function aj(s,e){for(var i=s;;){if(i.tag===5){var o=i.stateNode;if(e)o=o.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{o=i.stateNode;var a=i.memoizedProps.style;a=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=sb("display",a)}}else if(i.tag===6)i.stateNode.nodeValue=e?"":i.memoizedProps;else if((i.tag!==23&&i.tag!==24||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function bj(s,e){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null)){var i=s=s.next;do{var o=i,a=o.destroy;if(o=o.tag,a!==void 0)if((o&4)!==0)Zi(e,i);else{o=e;try{a()}catch(c){Wi(o,c)}}i=i.next}while(i!==s)}break;case 1:if(Vi(e),s=e.stateNode,typeof s.componentWillUnmount=="function")try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(c){Wi(e,c)}break;case 5:Vi(e);break;case 4:cj(s,e)}}function dj(s){s.alternate=null,s.child=null,s.dependencies=null,s.firstEffect=null,s.lastEffect=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.return=null,s.updateQueue=null}function ej(s){return s.tag===5||s.tag===3||s.tag===4}function fj(s){e:{for(var e=s.return;e!==null;){if(ej(e))break e;e=e.return}throw Error(y(160))}var i=e;switch(e=i.stateNode,i.tag){case 5:var o=!1;break;case 3:e=e.containerInfo,o=!0;break;case 4:e=e.containerInfo,o=!0;break;default:throw Error(y(161))}i.flags&16&&(pb(e,""),i.flags&=-17);e:t:for(i=s;;){for(;i.sibling===null;){if(i.return===null||ej(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2)){i=i.stateNode;break e}}o?gj(s,i,e):hj(s,i,e)}function gj(s,e,i){var o=s.tag,a=o===5||o===6;if(a)s=a?s.stateNode:s.stateNode.instance,e?i.nodeType===8?i.parentNode.insertBefore(s,e):i.insertBefore(s,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(s,i)):(e=i,e.appendChild(s)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=jf));else if(o!==4&&(s=s.child,s!==null))for(gj(s,e,i),s=s.sibling;s!==null;)gj(s,e,i),s=s.sibling}function hj(s,e,i){var o=s.tag,a=o===5||o===6;if(a)s=a?s.stateNode:s.stateNode.instance,e?i.insertBefore(s,e):i.appendChild(s);else if(o!==4&&(s=s.child,s!==null))for(hj(s,e,i),s=s.sibling;s!==null;)hj(s,e,i),s=s.sibling}function cj(s,e){for(var i=e,o=!1,a,c;;){if(!o){o=i.return;e:for(;;){if(o===null)throw Error(y(160));switch(a=o.stateNode,o.tag){case 5:c=!1;break e;case 3:a=a.containerInfo,c=!0;break e;case 4:a=a.containerInfo,c=!0;break e}o=o.return}o=!0}if(i.tag===5||i.tag===6){e:for(var d=s,_=i,b=_;;)if(bj(d,b),b.child!==null&&b.tag!==4)b.child.return=b,b=b.child;else{if(b===_)break e;for(;b.sibling===null;){if(b.return===null||b.return===_)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c?(d=a,_=i.stateNode,d.nodeType===8?d.parentNode.removeChild(_):d.removeChild(_)):a.removeChild(i.stateNode)}else if(i.tag===4){if(i.child!==null){a=i.stateNode.containerInfo,c=!0,i.child.return=i,i=i.child;continue}}else if(bj(s,i),i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return,i.tag===4&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ij(s,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do(o.tag&3)===3&&(s=o.destroy,o.destroy=void 0,s!==void 0&&s()),o=o.next;while(o!==i)}return;case 1:return;case 5:if(i=e.stateNode,i!=null){o=e.memoizedProps;var a=s!==null?s.memoizedProps:o;s=e.type;var c=e.updateQueue;if(e.updateQueue=null,c!==null){for(i[xf]=o,s==="input"&&o.type==="radio"&&o.name!=null&&$a(i,o),wb(s,a),e=wb(s,o),a=0;a<c.length;a+=2){var d=c[a],_=c[a+1];d==="style"?tb(i,_):d==="dangerouslySetInnerHTML"?ob(i,_):d==="children"?pb(i,_):qa(i,d,_,e)}switch(s){case"input":ab(i,o);break;case"textarea":ib(i,o);break;case"select":s=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!o.multiple,c=o.value,c!=null?fb(i,!!o.multiple,c,!1):s!==!!o.multiple&&(o.defaultValue!=null?fb(i,!!o.multiple,o.defaultValue,!0):fb(i,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(y(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:i=e.stateNode,i.hydrate&&(i.hydrate=!1,Cc(i.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(jj=O(),aj(e.child,!0)),kj(e);return;case 19:kj(e);return;case 17:return;case 23:case 24:aj(e,e.memoizedState!==null);return}throw Error(y(163))}function kj(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var i=s.stateNode;i===null&&(i=s.stateNode=new Ui),e.forEach(function(o){var a=lj.bind(null,s,o);i.has(o)||(i.add(o),o.then(a,a))})}}function mj(s,e){return s!==null&&(s=s.memoizedState,s===null||s.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X&48)!==0?O():Fj!==-1?Fj:Fj=O()}function Ig(s){if(s=s.mode,(s&2)===0)return 1;if((s&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),s=Gj;var e=4186112&~Hj;return e&=-e,e===0&&(s=4186112&~s,e=s&-s,e===0&&(e=8192)),e}return s=eg(),(X&4)!==0&&s===98?s=Xc(12,Gj):(s=Sc(s),s=Xc(s,Gj)),s}function Jg(s,e,i){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));if(s=Kj(s,e),s===null)return null;$c(s,e,i),s===U&&(Hi|=e,V===4&&Ii(s,W));var o=eg();e===1?(X&8)!==0&&(X&48)===0?Lj(s):(Mj(s,i),X===0&&(wj(),ig())):((X&4)===0||o!==98&&o!==99||(Cj===null?Cj=new Set([s]):Cj.add(s)),Mj(s,i)),vj=s}function Kj(s,e){s.lanes|=e;var i=s.alternate;for(i!==null&&(i.lanes|=e),i=s,s=s.return;s!==null;)s.childLanes|=e,i=s.alternate,i!==null&&(i.childLanes|=e),i=s,s=s.return;return i.tag===3?i.stateNode:null}function Mj(s,e){for(var i=s.callbackNode,o=s.suspendedLanes,a=s.pingedLanes,c=s.expirationTimes,d=s.pendingLanes;0<d;){var _=31-Vc(d),b=1<<_,k=c[_];if(k===-1){if((b&o)===0||(b&a)!==0){k=e,Rc(b);var j=F;c[_]=10<=j?k+250:6<=j?k+5e3:-1}}else k<=e&&(s.expiredLanes|=b);d&=~b}if(o=Uc(s,s===U?W:0),e=F,o===0)i!==null&&(i!==Zf&&Pf(i),s.callbackNode=null,s.callbackPriority=0);else{if(i!==null){if(s.callbackPriority===e)return;i!==Zf&&Pf(i)}e===15?(i=Lj.bind(null,s),ag===null?(ag=[i],bg=Of(Uf,jg)):ag.push(i),i=Zf):e===14?i=hg(99,Lj.bind(null,s)):(i=Tc(e),i=hg(i,Nj.bind(null,s))),s.callbackPriority=e,s.callbackNode=i}}function Nj(s){if(Fj=-1,Hj=Gj=0,(X&48)!==0)throw Error(y(327));var e=s.callbackNode;if(Oj()&&s.callbackNode!==e)return null;var i=Uc(s,s===U?W:0);if(i===0)return null;var o=i,a=X;X|=16;var c=Pj();(U!==s||W!==o)&&(wj(),Qj(s,o));do try{Rj();break}catch(_){Sj(s,_)}while(1);if(qg(),oj.current=c,X=a,Y!==null?o=0:(U=null,W=0,o=V),(tj&Hi)!==0)Qj(s,0);else if(o!==0){if(o===2&&(X|=64,s.hydrate&&(s.hydrate=!1,qf(s.containerInfo)),i=Wc(s),i!==0&&(o=Tj(s,i))),o===1)throw e=sj,Qj(s,0),Ii(s,i),Mj(s,O()),e;switch(s.finishedWork=s.current.alternate,s.finishedLanes=i,o){case 0:case 1:throw Error(y(345));case 2:Uj(s);break;case 3:if(Ii(s,i),(i&62914560)===i&&(o=jj+500-O(),10<o)){if(Uc(s,0)!==0)break;if(a=s.suspendedLanes,(a&i)!==i){Hg(),s.pingedLanes|=s.suspendedLanes&a;break}s.timeoutHandle=of(Uj.bind(null,s),o);break}Uj(s);break;case 4:if(Ii(s,i),(i&4186112)===i)break;for(o=s.eventTimes,a=-1;0<i;){var d=31-Vc(i);c=1<<d,d=o[d],d>a&&(a=d),i&=~c}if(i=a,i=O()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*nj(i/1960))-i,10<i){s.timeoutHandle=of(Uj.bind(null,s),i);break}Uj(s);break;case 5:Uj(s);break;default:throw Error(y(329))}}return Mj(s,O()),s.callbackNode===e?Nj.bind(null,s):null}function Ii(s,e){for(e&=~uj,e&=~Hi,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var i=31-Vc(e),o=1<<i;s[i]=-1,e&=~o}}function Lj(s){if((X&48)!==0)throw Error(y(327));if(Oj(),s===U&&(s.expiredLanes&W)!==0){var e=W,i=Tj(s,e);(tj&Hi)!==0&&(e=Uc(s,e),i=Tj(s,e))}else e=Uc(s,0),i=Tj(s,e);if(s.tag!==0&&i===2&&(X|=64,s.hydrate&&(s.hydrate=!1,qf(s.containerInfo)),e=Wc(s),e!==0&&(i=Tj(s,e))),i===1)throw i=sj,Qj(s,0),Ii(s,e),Mj(s,O()),i;return s.finishedWork=s.current.alternate,s.finishedLanes=e,Uj(s),Mj(s,O()),null}function Vj(){if(Cj!==null){var s=Cj;Cj=null,s.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Mj(e,O())})}ig()}function Wj(s,e){var i=X;X|=1;try{return s(e)}finally{X=i,X===0&&(wj(),ig())}}function Xj(s,e){var i=X;X&=-2,X|=8;try{return s(e)}finally{X=i,X===0&&(wj(),ig())}}function ni(s,e){I(rj,qj),qj|=e,tj|=e}function Ki(){qj=rj.current,H(rj)}function Qj(s,e){s.finishedWork=null,s.finishedLanes=0;var i=s.timeoutHandle;if(i!==-1&&(s.timeoutHandle=-1,pf(i)),Y!==null)for(i=Y.return;i!==null;){var o=i;switch(o.tag){case 1:o=o.type.childContextTypes,o!=null&&Gf();break;case 3:fh(),H(N),H(M),uh();break;case 5:hh(o);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(o);break;case 23:case 24:Ki()}i=i.return}U=s,Y=Tg(s.current,null),W=qj=tj=e,V=0,sj=null,uj=Hi=Dg=0}function Sj(s,e){do{var i=Y;try{if(qg(),vh.current=Gh,yh){for(var o=R.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}yh=!1}if(xh=0,T=S=R=null,zh=!1,pj.current=null,i===null||i.return===null){V=1,sj=e,Y=null;break}e:{var c=s,d=i.return,_=i,b=e;if(e=W,_.flags|=2048,_.firstEffect=_.lastEffect=null,b!==null&&typeof b=="object"&&typeof b.then=="function"){var k=b;if((_.mode&2)===0){var j=_.alternate;j?(_.updateQueue=j.updateQueue,_.memoizedState=j.memoizedState,_.lanes=j.lanes):(_.updateQueue=null,_.memoizedState=null)}var _e=(P.current&1)!==0,et=d;do{var tt;if(tt=et.tag===13){var it=et.memoizedState;if(it!==null)tt=it.dehydrated!==null;else{var st=et.memoizedProps;tt=st.fallback===void 0?!1:st.unstable_avoidThisFallback!==!0?!0:!_e}}if(tt){var ot=et.updateQueue;if(ot===null){var nt=new Set;nt.add(k),et.updateQueue=nt}else ot.add(k);if((et.mode&2)===0){if(et.flags|=64,_.flags|=16384,_.flags&=-2981,_.tag===1)if(_.alternate===null)_.tag=17;else{var rt=zg(-1,1);rt.tag=2,Ag(_,rt)}_.lanes|=1;break e}b=void 0,_=e;var at=c.pingCache;if(at===null?(at=c.pingCache=new Oi,b=new Set,at.set(k,b)):(b=at.get(k),b===void 0&&(b=new Set,at.set(k,b))),!b.has(_)){b.add(_);var lt=Yj.bind(null,c,k,_);k.then(lt,lt)}et.flags|=4096,et.lanes=e;break e}et=et.return}while(et!==null);b=Error((Ra(_.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V!==5&&(V=2),b=Mi(b,_),et=d;do{switch(et.tag){case 3:c=b,et.flags|=4096,e&=-e,et.lanes|=e;var gt=Pi(et,c,e);Bg(et,gt);break e;case 1:c=b;var ht=et.type,ut=et.stateNode;if((et.flags&64)===0&&(typeof ht.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Ti===null||!Ti.has(ut)))){et.flags|=4096,e&=-e,et.lanes|=e;var ct=Si(et,c,e);Bg(et,ct);break e}}et=et.return}while(et!==null)}Zj(i)}catch(ft){e=ft,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(1)}function Pj(){var s=oj.current;return oj.current=Gh,s===null?Gh:s}function Tj(s,e){var i=X;X|=16;var o=Pj();U===s&&W===e||Qj(s,e);do try{ak();break}catch(a){Sj(s,a)}while(1);if(qg(),X=i,oj.current=o,Y!==null)throw Error(y(261));return U=null,W=0,V}function ak(){for(;Y!==null;)bk(Y)}function Rj(){for(;Y!==null&&!Qf();)bk(Y)}function bk(s){var e=ck(s.alternate,s,qj);s.memoizedProps=s.pendingProps,e===null?Zj(s):Y=e,pj.current=null}function Zj(s){var e=s;do{var i=e.alternate;if(s=e.return,(e.flags&2048)===0){if(i=Gi(i,e,qj),i!==null){Y=i;return}if(i=e,i.tag!==24&&i.tag!==23||i.memoizedState===null||(qj&1073741824)!==0||(i.mode&4)===0){for(var o=0,a=i.child;a!==null;)o|=a.lanes|a.childLanes,a=a.sibling;i.childLanes=o}s!==null&&(s.flags&2048)===0&&(s.firstEffect===null&&(s.firstEffect=e.firstEffect),e.lastEffect!==null&&(s.lastEffect!==null&&(s.lastEffect.nextEffect=e.firstEffect),s.lastEffect=e.lastEffect),1<e.flags&&(s.lastEffect!==null?s.lastEffect.nextEffect=e:s.firstEffect=e,s.lastEffect=e))}else{if(i=Li(e),i!==null){i.flags&=2047,Y=i;return}s!==null&&(s.firstEffect=s.lastEffect=null,s.flags|=2048)}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);V===0&&(V=5)}function Uj(s){var e=eg();return gg(99,dk.bind(null,s,e)),null}function dk(s,e){do Oj();while(yj!==null);if((X&48)!==0)throw Error(y(327));var i=s.finishedWork;if(i===null)return null;if(s.finishedWork=null,s.finishedLanes=0,i===s.current)throw Error(y(177));s.callbackNode=null;var o=i.lanes|i.childLanes,a=o,c=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;for(var d=s.eventTimes,_=s.expirationTimes;0<c;){var b=31-Vc(c),k=1<<b;a[b]=0,d[b]=-1,_[b]=-1,c&=~k}if(Cj!==null&&(o&24)===0&&Cj.has(s)&&Cj.delete(s),s===U&&(Y=U=null,W=0),1<i.flags?i.lastEffect!==null?(i.lastEffect.nextEffect=i,o=i.firstEffect):o=i:o=i.firstEffect,o!==null){if(a=X,X|=32,pj.current=null,kf=fd,d=Ne(),Oe(d)){if("selectionStart"in d)_={start:d.selectionStart,end:d.selectionEnd};else e:if(_=(_=d.ownerDocument)&&_.defaultView||window,(k=_.getSelection&&_.getSelection())&&k.rangeCount!==0){_=k.anchorNode,c=k.anchorOffset,b=k.focusNode,k=k.focusOffset;try{_.nodeType,b.nodeType}catch{_=null;break e}var j=0,_e=-1,et=-1,tt=0,it=0,st=d,ot=null;t:for(;;){for(var nt;st!==_||c!==0&&st.nodeType!==3||(_e=j+c),st!==b||k!==0&&st.nodeType!==3||(et=j+k),st.nodeType===3&&(j+=st.nodeValue.length),(nt=st.firstChild)!==null;)ot=st,st=nt;for(;;){if(st===d)break t;if(ot===_&&++tt===c&&(_e=j),ot===b&&++it===k&&(et=j),(nt=st.nextSibling)!==null)break;st=ot,ot=st.parentNode}st=nt}_=_e===-1||et===-1?null:{start:_e,end:et}}else _=null;_=_||{start:0,end:0}}else _=null;lf={focusedElem:d,selectionRange:_},fd=!1,Ij=null,Jj=!1,Z=o;do try{ek()}catch(ft){if(Z===null)throw Error(y(330));Wi(Z,ft),Z=Z.nextEffect}while(Z!==null);Ij=null,Z=o;do try{for(d=s;Z!==null;){var rt=Z.flags;if(rt&16&&pb(Z.stateNode,""),rt&128){var at=Z.alternate;if(at!==null){var lt=at.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}switch(rt&1038){case 2:fj(Z),Z.flags&=-3;break;case 6:fj(Z),Z.flags&=-3,ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025,ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:_=Z,cj(d,_);var gt=_.alternate;dj(_),gt!==null&&dj(gt)}Z=Z.nextEffect}}catch(ft){if(Z===null)throw Error(y(330));Wi(Z,ft),Z=Z.nextEffect}while(Z!==null);if(lt=lf,at=Ne(),rt=lt.focusedElem,d=lt.selectionRange,at!==rt&&rt&&rt.ownerDocument&&Me(rt.ownerDocument.documentElement,rt)){for(d!==null&&Oe(rt)&&(at=d.start,lt=d.end,lt===void 0&&(lt=at),"selectionStart"in rt?(rt.selectionStart=at,rt.selectionEnd=Math.min(lt,rt.value.length)):(lt=(at=rt.ownerDocument||document)&&at.defaultView||window,lt.getSelection&&(lt=lt.getSelection(),_=rt.textContent.length,gt=Math.min(d.start,_),d=d.end===void 0?gt:Math.min(d.end,_),!lt.extend&&gt>d&&(_=d,d=gt,gt=_),_=Le(rt,gt),c=Le(rt,d),_&&c&&(lt.rangeCount!==1||lt.anchorNode!==_.node||lt.anchorOffset!==_.offset||lt.focusNode!==c.node||lt.focusOffset!==c.offset)&&(at=at.createRange(),at.setStart(_.node,_.offset),lt.removeAllRanges(),gt>d?(lt.addRange(at),lt.extend(c.node,c.offset)):(at.setEnd(c.node,c.offset),lt.addRange(at)))))),at=[],lt=rt;lt=lt.parentNode;)lt.nodeType===1&&at.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<at.length;rt++)lt=at[rt],lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}fd=!!kf,lf=kf=null,s.current=i,Z=o;do try{for(rt=s;Z!==null;){var ht=Z.flags;if(ht&36&&Yi(rt,Z.alternate,Z),ht&128){at=void 0;var ut=Z.ref;if(ut!==null){var ct=Z.stateNode;switch(Z.tag){case 5:at=ct;break;default:at=ct}typeof ut=="function"?ut(at):ut.current=at}}Z=Z.nextEffect}}catch(ft){if(Z===null)throw Error(y(330));Wi(Z,ft),Z=Z.nextEffect}while(Z!==null);Z=null,$f(),X=a}else s.current=i;if(xj)xj=!1,yj=s,zj=e;else for(Z=o;Z!==null;)e=Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(ht=Z,ht.sibling=null,ht.stateNode=null),Z=e;if(o=s.pendingLanes,o===0&&(Ti=null),o===1?s===Ej?Dj++:(Dj=0,Ej=s):Dj=0,i=i.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,i,void 0,(i.current.flags&64)===64)}catch{}if(Mj(s,O()),Qi)throw Qi=!1,s=Ri,Ri=null,s;return(X&8)!==0||ig(),null}function ek(){for(;Z!==null;){var s=Z.alternate;Jj||Ij===null||((Z.flags&8)!==0?dc(Z,Ij)&&(Jj=!0):Z.tag===13&&mj(s,Z)&&dc(Z,Ij)&&(Jj=!0));var e=Z.flags;(e&256)!==0&&Xi(s,Z),(e&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z=Z.nextEffect}}function Oj(){if(zj!==90){var s=97<zj?97:zj;return zj=90,gg(s,fk)}return!1}function $i(s,e){Aj.push(e,s),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(s,e){Bj.push(e,s),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var s=yj;if(yj=null,(X&48)!==0)throw Error(y(331));var e=X;X|=32;var i=Bj;Bj=[];for(var o=0;o<i.length;o+=2){var a=i[o],c=i[o+1],d=a.destroy;if(a.destroy=void 0,typeof d=="function")try{d()}catch(b){if(c===null)throw Error(y(330));Wi(c,b)}}for(i=Aj,Aj=[],o=0;o<i.length;o+=2){a=i[o],c=i[o+1];try{var _=a.create;a.destroy=_()}catch(b){if(c===null)throw Error(y(330));Wi(c,b)}}for(_=s.current.firstEffect;_!==null;)s=_.nextEffect,_.nextEffect=null,_.flags&8&&(_.sibling=null,_.stateNode=null),_=s;return X=e,ig(),!0}function gk(s,e,i){e=Mi(i,e),e=Pi(s,e,1),Ag(s,e),e=Hg(),s=Kj(s,1),s!==null&&($c(s,1,e),Mj(s,e))}function Wi(s,e){if(s.tag===3)gk(s,s,e);else for(var i=s.return;i!==null;){if(i.tag===3){gk(i,s,e);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ti===null||!Ti.has(o))){s=Mi(e,s);var a=Si(i,s,1);if(Ag(i,a),a=Hg(),i=Kj(i,1),i!==null)$c(i,1,a),Mj(i,a);else if(typeof o.componentDidCatch=="function"&&(Ti===null||!Ti.has(o)))try{o.componentDidCatch(e,s)}catch{}break}}i=i.return}}function Yj(s,e,i){var o=s.pingCache;o!==null&&o.delete(e),e=Hg(),s.pingedLanes|=s.suspendedLanes&i,U===s&&(W&i)===i&&(V===4||V===3&&(W&62914560)===W&&500>O()-jj?Qj(s,0):uj|=i),Mj(s,e)}function lj(s,e){var i=s.stateNode;i!==null&&i.delete(e),e=0,e===0&&(e=s.mode,(e&2)===0?e=1:(e&4)===0?e=eg()===99?1:2:(Gj===0&&(Gj=tj),e=Yc(62914560&~Gj),e===0&&(e=4194304))),i=Hg(),s=Kj(s,e),s!==null&&($c(s,e,i),Mj(s,i))}var ck;ck=function(s,e,i){var o=e.lanes;if(s!==null)if(s.memoizedProps!==e.pendingProps||N.current)ug=!0;else if((i&o)!==0)ug=(s.flags&16384)!==0;else{switch(ug=!1,e.tag){case 3:ri(e),sh();break;case 5:gh(e);break;case 1:Ff(e.type)&&Jf(e);break;case 4:eh(e,e.stateNode.containerInfo);break;case 10:o=e.memoizedProps.value;var a=e.type._context;I(mg,a._currentValue),a._currentValue=o;break;case 13:if(e.memoizedState!==null)return(i&e.child.childLanes)!==0?ti(s,e,i):(I(P,P.current&1),e=hi(s,e,i),e!==null?e.sibling:null);I(P,P.current&1);break;case 19:if(o=(i&e.childLanes)!==0,(s.flags&64)!==0){if(o)return Ai(s,e,i);e.flags|=64}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),I(P,P.current),o)break;return null;case 23:case 24:return e.lanes=0,mi(s,e,i)}return hi(s,e,i)}else ug=!1;switch(e.lanes=0,e.tag){case 2:if(o=e.type,s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,a=Ef(e,M.current),tg(e,i),a=Ch(null,e,o,s,a,i),e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ff(o)){var c=!0;Jf(e)}else c=!1;e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,xg(e);var d=o.getDerivedStateFromProps;typeof d=="function"&&Gg(e,o,d,s),a.updater=Kg,e.stateNode=a,a._reactInternals=e,Og(e,o,s,i),e=qi(null,e,o,!0,c,i)}else e.tag=0,fi(null,e,a,i),e=e.child;return e;case 16:a=e.elementType;e:{switch(s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),s=e.pendingProps,c=a._init,a=c(a._payload),e.type=a,c=e.tag=hk(a),s=lg(a,s),c){case 0:e=li(null,e,a,s,i);break e;case 1:e=pi(null,e,a,s,i);break e;case 11:e=gi(null,e,a,s,i);break e;case 14:e=ii(null,e,a,lg(a.type,s),o,i);break e}throw Error(y(306,a,""))}return e;case 0:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:lg(o,a),li(s,e,o,a,i);case 1:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:lg(o,a),pi(s,e,o,a,i);case 3:if(ri(e),o=e.updateQueue,s===null||o===null)throw Error(y(282));if(o=e.pendingProps,a=e.memoizedState,a=a!==null?a.element:null,yg(s,e),Cg(e,o,null,i),o=e.memoizedState.element,o===a)sh(),e=hi(s,e,i);else{if(a=e.stateNode,(c=a.hydrate)&&(kh=rf(e.stateNode.containerInfo.firstChild),jh=e,c=lh=!0),c){if(s=a.mutableSourceEagerHydrationData,s!=null)for(a=0;a<s.length;a+=2)c=s[a],c._workInProgressVersionPrimary=s[a+1],th.push(c);for(i=Zg(e,null,o,i),e.child=i;i;)i.flags=i.flags&-3|1024,i=i.sibling}else fi(s,e,o,i),sh();e=e.child}return e;case 5:return gh(e),s===null&&ph(e),o=e.type,a=e.pendingProps,c=s!==null?s.memoizedProps:null,d=a.children,nf(o,a)?d=null:c!==null&&nf(o,c)&&(e.flags|=16),oi(s,e),fi(s,e,d,i),e.child;case 6:return s===null&&ph(e),null;case 13:return ti(s,e,i);case 4:return eh(e,e.stateNode.containerInfo),o=e.pendingProps,s===null?e.child=Yg(e,null,o,i):fi(s,e,o,i),e.child;case 11:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:lg(o,a),gi(s,e,o,a,i);case 7:return fi(s,e,e.pendingProps,i),e.child;case 8:return fi(s,e,e.pendingProps.children,i),e.child;case 12:return fi(s,e,e.pendingProps.children,i),e.child;case 10:e:{o=e.type._context,a=e.pendingProps,d=e.memoizedProps,c=a.value;var _=e.type._context;if(I(mg,_._currentValue),_._currentValue=c,d!==null)if(_=d.value,c=He(_,c)?0:(typeof o._calculateChangedBits=="function"?o._calculateChangedBits(_,c):1073741823)|0,c===0){if(d.children===a.children&&!N.current){e=hi(s,e,i);break e}}else for(_=e.child,_!==null&&(_.return=e);_!==null;){var b=_.dependencies;if(b!==null){d=_.child;for(var k=b.firstContext;k!==null;){if(k.context===o&&(k.observedBits&c)!==0){_.tag===1&&(k=zg(-1,i&-i),k.tag=2,Ag(_,k)),_.lanes|=i,k=_.alternate,k!==null&&(k.lanes|=i),sg(_.return,i),b.lanes|=i;break}k=k.next}}else d=_.tag===10&&_.type===e.type?null:_.child;if(d!==null)d.return=_;else for(d=_;d!==null;){if(d===e){d=null;break}if(_=d.sibling,_!==null){_.return=d.return,d=_;break}d=d.return}_=d}fi(s,e,a.children,i),e=e.child}return e;case 9:return a=e.type,c=e.pendingProps,o=c.children,tg(e,i),a=vg(a,c.unstable_observedBits),o=o(a),e.flags|=1,fi(s,e,o,i),e.child;case 14:return a=e.type,c=lg(a,e.pendingProps),c=lg(a.type,c),ii(s,e,a,c,o,i);case 15:return ki(s,e,e.type,e.pendingProps,o,i);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:lg(o,a),s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ff(o)?(s=!0,Jf(e)):s=!1,tg(e,i),Mg(e,o,a),Og(e,o,a,i),qi(null,e,o,!0,s,i);case 19:return Ai(s,e,i);case 23:return mi(s,e,i);case 24:return mi(s,e,i)}throw Error(y(156,e.tag))};function ik(s,e,i,o){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(s,e,i,o){return new ik(s,e,i,o)}function ji(s){return s=s.prototype,!(!s||!s.isReactComponent)}function hk(s){if(typeof s=="function")return ji(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Aa)return 11;if(s===Da)return 14}return 2}function Tg(s,e){var i=s.alternate;return i===null?(i=nh(s.tag,e,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=e,i.type=s.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i}function Vg(s,e,i,o,a,c){var d=2;if(o=s,typeof s=="function")ji(s)&&(d=1);else if(typeof s=="string")d=5;else e:switch(s){case ua:return Xg(i.children,a,c,e);case Ha:d=8,a|=16;break;case wa:d=8,a|=1;break;case xa:return s=nh(12,i,e,a|8),s.elementType=xa,s.type=xa,s.lanes=c,s;case Ba:return s=nh(13,i,e,a),s.type=Ba,s.elementType=Ba,s.lanes=c,s;case Ca:return s=nh(19,i,e,a),s.elementType=Ca,s.lanes=c,s;case Ia:return vi(i,a,c,e);case Ja:return s=nh(24,i,e,a),s.elementType=Ja,s.lanes=c,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ya:d=10;break e;case za:d=9;break e;case Aa:d=11;break e;case Da:d=14;break e;case Ea:d=16,o=null;break e;case Fa:d=22;break e}throw Error(y(130,s==null?s:typeof s,""))}return e=nh(d,i,e,a),e.elementType=s,e.type=o,e.lanes=c,e}function Xg(s,e,i,o){return s=nh(7,s,o,e),s.lanes=i,s}function vi(s,e,i,o){return s=nh(23,s,o,e),s.elementType=Ia,s.lanes=i,s}function Ug(s,e,i){return s=nh(6,s,null,e),s.lanes=i,s}function Wg(s,e,i){return e=nh(4,s.children!==null?s.children:[],s.key,e),e.lanes=i,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function jk(s,e,i){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(s,e,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:o==null?null:""+o,children:s,containerInfo:e,implementation:i}}function lk(s,e,i,o){var a=e.current,c=Hg(),d=Ig(a);e:if(i){i=i._reactInternals;t:{if(Zb(i)!==i||i.tag!==1)throw Error(y(170));var _=i;do{switch(_.tag){case 3:_=_.stateNode.context;break t;case 1:if(Ff(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break t}}_=_.return}while(_!==null);throw Error(y(171))}if(i.tag===1){var b=i.type;if(Ff(b)){i=If(i,b,_);break e}}i=_}else i=Cf;return e.context===null?e.context=i:e.pendingContext=i,e=zg(c,d),e.payload={element:s},o=o===void 0?null:o,o!==null&&(e.callback=o),Ag(a,e),Jg(a,d,c),d}function mk(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function nk(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<e?i:e}}function ok$1(s,e){nk(s,e),(s=s.alternate)&&nk(s,e)}function pk(){return null}function qk(s,e,i){var o=i!=null&&i.hydrationOptions!=null&&i.hydrationOptions.mutableSources||null;if(i=new jk(s,e,i!=null&&i.hydrate===!0),e=nh(3,null,null,e===2?7:e===1?3:0),i.current=e,e.stateNode=i,xg(e),s[ff]=i.current,cf(s.nodeType===8?s.parentNode:s),o)for(s=0;s<o.length;s++){e=o[s];var a=e._getVersion;a=a(e._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[e,a]:i.mutableSourceEagerHydrationData.push(e,a)}this._internalRoot=i}qk.prototype.render=function(s){lk(s,this._internalRoot,null,null)};qk.prototype.unmount=function(){var s=this._internalRoot,e=s.containerInfo;lk(null,s,null,function(){e[ff]=null})};function rk(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function sk(s,e){if(e||(e=s?s.nodeType===9?s.documentElement:s.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=s.lastChild;)s.removeChild(i);return new qk(s,0,e?{hydrate:!0}:void 0)}function tk(s,e,i,o,a){var c=i._reactRootContainer;if(c){var d=c._internalRoot;if(typeof a=="function"){var _=a;a=function(){var k=mk(d);_.call(k)}}lk(e,d,s,a)}else{if(c=i._reactRootContainer=sk(i,o),d=c._internalRoot,typeof a=="function"){var b=a;a=function(){var k=mk(d);b.call(k)}}Xj(function(){lk(e,d,s,a)})}return mk(d)}ec=function(s){if(s.tag===13){var e=Hg();Jg(s,4,e),ok$1(s,4)}};fc=function(s){if(s.tag===13){var e=Hg();Jg(s,67108864,e),ok$1(s,67108864)}};gc=function(s){if(s.tag===13){var e=Hg(),i=Ig(s);Jg(s,i,e),ok$1(s,i)}};hc=function(s,e){return e()};yb=function(s,e,i){switch(e){case"input":if(ab(s,i),e=i.name,i.type==="radio"&&e!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var o=i[e];if(o!==s&&o.form===s.form){var a=Db(o);if(!a)throw Error(y(90));Wa(o),ab(o,a)}}}break;case"textarea":ib(s,i);break;case"select":e=i.value,e!=null&&fb(s,!!i.multiple,e,!1)}};Gb=Wj;Hb=function(s,e,i,o,a){var c=X;X|=4;try{return gg(98,s.bind(null,e,i,o,a))}finally{X=c,X===0&&(wj(),ig())}};Ib=function(){(X&49)===0&&(Vj(),Oj())};Jb=function(s,e){var i=X;X|=2;try{return s(e)}finally{X=i,X===0&&(wj(),ig())}};function uk(s,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(e))throw Error(y(200));return kk(s,e,null,i)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=cc(s),s===null?null:s.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(y(188)):Error(y(268,Object.keys(s)));return s=cc(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s,e){var i=X;if((i&48)!==0)return s(e);X|=1;try{if(s)return gg(99,s.bind(null,e))}finally{X=i,ig()}};reactDom_production_min.hydrate=function(s,e,i){if(!rk(e))throw Error(y(200));return tk(null,s,e,!0,i)};reactDom_production_min.render=function(s,e,i){if(!rk(e))throw Error(y(200));return tk(null,s,e,!1,i)};reactDom_production_min.unmountComponentAtNode=function(s){if(!rk(s))throw Error(y(40));return s._reactRootContainer?(Xj(function(){tk(null,null,s,!1,function(){s._reactRootContainer=null,s[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(s,e){return uk(s,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,i,o){if(!rk(i))throw Error(y(200));if(s==null||s._reactInternals===void 0)throw Error(y(38));return tk(s,e,i,!1,o)};reactDom_production_min.version="17.0.2";(function(s){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}e(),s.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDom.exports);var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function s(o,a,c,d,_,b){if(b!==ReactPropTypesSecret){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}s.isRequired=s;function e(){return s}var i={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:e,element:s,elementType:s,instanceOf:e,node:s,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return i.PropTypes=i,i};propTypes.exports=factoryWithThrowingShims();var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var e={}.hasOwnProperty;function i(){for(var o=[],a=0;a<arguments.length;a++){var c=arguments[a];if(!!c){var d=typeof c;if(d==="string"||d==="number")o.push(c);else if(Array.isArray(c)){if(c.length){var _=i.apply(null,c);_&&o.push(_)}}else if(d==="object"){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){o.push(c.toString());continue}for(var b in c)e.call(c,b)&&c[b]&&o.push(b)}}}return o.join(" ")}s.exports?(i.default=i,s.exports=i):window.classNames=i})()})(classnames);const classNames=classnames.exports;var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=react.exports,g=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h=Symbol.for;g=h("react.element"),reactJsxRuntime_production_min.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,i){var o,a={},c=null,d=null;i!==void 0&&(c=""+i),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(o in e)n.call(e,o)&&!p.hasOwnProperty(o)&&(a[o]=e[o]);if(s&&s.defaultProps)for(o in e=s.defaultProps,e)a[o]===void 0&&(a[o]=e[o]);return{$$typeof:g,type:s,key:c,ref:d,props:a,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;(function(s){s.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntime.exports.Fragment,jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;var ManagerReferenceNodeContext=react.exports.createContext(),ManagerReferenceNodeSetterContext=react.exports.createContext();function Manager(s){var e=s.children,i=react.exports.useState(null),o=i[0],a=i[1],c=react.exports.useRef(!1);react.exports.useEffect(function(){return function(){c.current=!0}},[]);var d=react.exports.useCallback(function(_){c.current||a(_)},[]);return jsx(ManagerReferenceNodeContext.Provider,{value:o,children:jsx(ManagerReferenceNodeSetterContext.Provider,{value:d,children:e})})}var unwrapArray=function(e){return Array.isArray(e)?e[0]:e},safeInvoke$1=function(e){if(typeof e=="function"){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e.apply(void 0,o)}},setRef=function(e,i){if(typeof e=="function")return safeInvoke$1(e,i);e!=null&&(e.current=i)},fromEntries=function(e){return e.reduce(function(i,o){var a=o[0],c=o[1];return i[a]=c,i},{})},useIsomorphicLayoutEffect=typeof window<"u"&&window.document&&window.document.createElement?react.exports.useLayoutEffect:react.exports.useEffect,top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(s,e){return s.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(s,e){return s.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(s){return s?(s.nodeName||"").toLowerCase():null}function getWindow(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function isElement(s){var e=getWindow(s).Element;return s instanceof e||s instanceof Element}function isHTMLElement$1(s){var e=getWindow(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function isShadowRoot$1(s){if(typeof ShadowRoot>"u")return!1;var e=getWindow(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function applyStyles(s){var e=s.state;Object.keys(e.elements).forEach(function(i){var o=e.styles[i]||{},a=e.attributes[i]||{},c=e.elements[i];!isHTMLElement$1(c)||!getNodeName(c)||(Object.assign(c.style,o),Object.keys(a).forEach(function(d){var _=a[d];_===!1?c.removeAttribute(d):c.setAttribute(d,_===!0?"":_)}))})}function effect$2(s){var e=s.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(o){var a=e.elements[o],c=e.attributes[o]||{},d=Object.keys(e.styles.hasOwnProperty(o)?e.styles[o]:i[o]),_=d.reduce(function(b,k){return b[k]="",b},{});!isHTMLElement$1(a)||!getNodeName(a)||(Object.assign(a.style,_),Object.keys(c).forEach(function(b){a.removeAttribute(b)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(s){return s.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var s=navigator.userAgentData;return s!=null&&s.brands?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(s,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var o=s.getBoundingClientRect(),a=1,c=1;e&&isHTMLElement$1(s)&&(a=s.offsetWidth>0&&round(o.width)/s.offsetWidth||1,c=s.offsetHeight>0&&round(o.height)/s.offsetHeight||1);var d=isElement(s)?getWindow(s):window,_=d.visualViewport,b=!isLayoutViewport()&&i,k=(o.left+(b&&_?_.offsetLeft:0))/a,j=(o.top+(b&&_?_.offsetTop:0))/c,_e=o.width/a,et=o.height/c;return{width:_e,height:et,top:j,right:k+_e,bottom:j+et,left:k,x:k,y:j}}function getLayoutRect(s){var e=getBoundingClientRect(s),i=s.offsetWidth,o=s.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-o)<=1&&(o=e.height),{x:s.offsetLeft,y:s.offsetTop,width:i,height:o}}function contains(s,e){var i=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(i&&isShadowRoot$1(i)){var o=e;do{if(o&&s.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function getComputedStyle$2(s){return getWindow(s).getComputedStyle(s)}function isTableElement(s){return["table","td","th"].indexOf(getNodeName(s))>=0}function getDocumentElement(s){return((isElement(s)?s.ownerDocument:s.document)||window.document).documentElement}function getParentNode(s){return getNodeName(s)==="html"?s:s.assignedSlot||s.parentNode||(isShadowRoot$1(s)?s.host:null)||getDocumentElement(s)}function getTrueOffsetParent(s){return!isHTMLElement$1(s)||getComputedStyle$2(s).position==="fixed"?null:s.offsetParent}function getContainingBlock(s){var e=/firefox/i.test(getUAString()),i=/Trident/i.test(getUAString());if(i&&isHTMLElement$1(s)){var o=getComputedStyle$2(s);if(o.position==="fixed")return null}var a=getParentNode(s);for(isShadowRoot$1(a)&&(a=a.host);isHTMLElement$1(a)&&["html","body"].indexOf(getNodeName(a))<0;){var c=getComputedStyle$2(a);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||e&&c.willChange==="filter"||e&&c.filter&&c.filter!=="none")return a;a=a.parentNode}return null}function getOffsetParent(s){for(var e=getWindow(s),i=getTrueOffsetParent(s);i&&isTableElement(i)&&getComputedStyle$2(i).position==="static";)i=getTrueOffsetParent(i);return i&&(getNodeName(i)==="html"||getNodeName(i)==="body"&&getComputedStyle$2(i).position==="static")?e:i||getContainingBlock(s)||e}function getMainAxisFromPlacement(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function within(s,e,i){return max(s,min(e,i))}function withinMaxClamp(s,e,i){var o=within(s,e,i);return o>i?i:o}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(s){return Object.assign({},getFreshSideObject(),s)}function expandToHashMap(s,e){return e.reduce(function(i,o){return i[o]=s,i},{})}var toPaddingObject=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(s){var e,i=s.state,o=s.name,a=s.options,c=i.elements.arrow,d=i.modifiersData.popperOffsets,_=getBasePlacement(i.placement),b=getMainAxisFromPlacement(_),k=[left,right].indexOf(_)>=0,j=k?"height":"width";if(!(!c||!d)){var _e=toPaddingObject(a.padding,i),et=getLayoutRect(c),tt=b==="y"?top:left,it=b==="y"?bottom:right,st=i.rects.reference[j]+i.rects.reference[b]-d[b]-i.rects.popper[j],ot=d[b]-i.rects.reference[b],nt=getOffsetParent(c),rt=nt?b==="y"?nt.clientHeight||0:nt.clientWidth||0:0,at=st/2-ot/2,lt=_e[tt],gt=rt-et[j]-_e[it],ht=rt/2-et[j]/2+at,ut=within(lt,ht,gt),ct=b;i.modifiersData[o]=(e={},e[ct]=ut,e.centerOffset=ut-ht,e)}}function effect$1(s){var e=s.state,i=s.options,o=i.element,a=o===void 0?"[data-popper-arrow]":o;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!contains(e.elements.popper,a)||(e.elements.arrow=a))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(s){return s.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(s){var e=s.x,i=s.y,o=window,a=o.devicePixelRatio||1;return{x:round(e*a)/a||0,y:round(i*a)/a||0}}function mapToStyles(s){var e,i=s.popper,o=s.popperRect,a=s.placement,c=s.variation,d=s.offsets,_=s.position,b=s.gpuAcceleration,k=s.adaptive,j=s.roundOffsets,_e=s.isFixed,et=d.x,tt=et===void 0?0:et,it=d.y,st=it===void 0?0:it,ot=typeof j=="function"?j({x:tt,y:st}):{x:tt,y:st};tt=ot.x,st=ot.y;var nt=d.hasOwnProperty("x"),rt=d.hasOwnProperty("y"),at=left,lt=top,gt=window;if(k){var ht=getOffsetParent(i),ut="clientHeight",ct="clientWidth";if(ht===getWindow(i)&&(ht=getDocumentElement(i),getComputedStyle$2(ht).position!=="static"&&_==="absolute"&&(ut="scrollHeight",ct="scrollWidth")),ht=ht,a===top||(a===left||a===right)&&c===end){lt=bottom;var ft=_e&&ht===gt&&gt.visualViewport?gt.visualViewport.height:ht[ut];st-=ft-o.height,st*=b?1:-1}if(a===left||(a===top||a===bottom)&&c===end){at=right;var dt=_e&&ht===gt&&gt.visualViewport?gt.visualViewport.width:ht[ct];tt-=dt-o.width,tt*=b?1:-1}}var pt=Object.assign({position:_},k&&unsetSides),mt=j===!0?roundOffsetsByDPR({x:tt,y:st}):{x:tt,y:st};if(tt=mt.x,st=mt.y,b){var _t;return Object.assign({},pt,(_t={},_t[lt]=rt?"0":"",_t[at]=nt?"0":"",_t.transform=(gt.devicePixelRatio||1)<=1?"translate("+tt+"px, "+st+"px)":"translate3d("+tt+"px, "+st+"px, 0)",_t))}return Object.assign({},pt,(e={},e[lt]=rt?st+"px":"",e[at]=nt?tt+"px":"",e.transform="",e))}function computeStyles$1(s){var e=s.state,i=s.options,o=i.gpuAcceleration,a=o===void 0?!0:o,c=i.adaptive,d=c===void 0?!0:c,_=i.roundOffsets,b=_===void 0?!0:_,k={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},k,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:d,roundOffsets:b})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},k,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles$1,data:{}};var passive={passive:!0};function effect(s){var e=s.state,i=s.instance,o=s.options,a=o.scroll,c=a===void 0?!0:a,d=o.resize,_=d===void 0?!0:d,b=getWindow(e.elements.popper),k=[].concat(e.scrollParents.reference,e.scrollParents.popper);return c&&k.forEach(function(j){j.addEventListener("scroll",i.update,passive)}),_&&b.addEventListener("resize",i.update,passive),function(){c&&k.forEach(function(j){j.removeEventListener("scroll",i.update,passive)}),_&&b.removeEventListener("resize",i.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(s){return s.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(s){return s.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(s){var e=getWindow(s),i=e.pageXOffset,o=e.pageYOffset;return{scrollLeft:i,scrollTop:o}}function getWindowScrollBarX(s){return getBoundingClientRect(getDocumentElement(s)).left+getWindowScroll(s).scrollLeft}function getViewportRect(s,e){var i=getWindow(s),o=getDocumentElement(s),a=i.visualViewport,c=o.clientWidth,d=o.clientHeight,_=0,b=0;if(a){c=a.width,d=a.height;var k=isLayoutViewport();(k||!k&&e==="fixed")&&(_=a.offsetLeft,b=a.offsetTop)}return{width:c,height:d,x:_+getWindowScrollBarX(s),y:b}}function getDocumentRect(s){var e,i=getDocumentElement(s),o=getWindowScroll(s),a=(e=s.ownerDocument)==null?void 0:e.body,c=max(i.scrollWidth,i.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),d=max(i.scrollHeight,i.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),_=-o.scrollLeft+getWindowScrollBarX(s),b=-o.scrollTop;return getComputedStyle$2(a||i).direction==="rtl"&&(_+=max(i.clientWidth,a?a.clientWidth:0)-c),{width:c,height:d,x:_,y:b}}function isScrollParent(s){var e=getComputedStyle$2(s),i=e.overflow,o=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+a+o)}function getScrollParent(s){return["html","body","#document"].indexOf(getNodeName(s))>=0?s.ownerDocument.body:isHTMLElement$1(s)&&isScrollParent(s)?s:getScrollParent(getParentNode(s))}function listScrollParents(s,e){var i;e===void 0&&(e=[]);var o=getScrollParent(s),a=o===((i=s.ownerDocument)==null?void 0:i.body),c=getWindow(o),d=a?[c].concat(c.visualViewport||[],isScrollParent(o)?o:[]):o,_=e.concat(d);return a?_:_.concat(listScrollParents(getParentNode(d)))}function rectToClientRect(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function getInnerBoundingClientRect(s,e){var i=getBoundingClientRect(s,!1,e==="fixed");return i.top=i.top+s.clientTop,i.left=i.left+s.clientLeft,i.bottom=i.top+s.clientHeight,i.right=i.left+s.clientWidth,i.width=s.clientWidth,i.height=s.clientHeight,i.x=i.left,i.y=i.top,i}function getClientRectFromMixedType(s,e,i){return e===viewport?rectToClientRect(getViewportRect(s,i)):isElement(e)?getInnerBoundingClientRect(e,i):rectToClientRect(getDocumentRect(getDocumentElement(s)))}function getClippingParents(s){var e=listScrollParents(getParentNode(s)),i=["absolute","fixed"].indexOf(getComputedStyle$2(s).position)>=0,o=i&&isHTMLElement$1(s)?getOffsetParent(s):s;return isElement(o)?e.filter(function(a){return isElement(a)&&contains(a,o)&&getNodeName(a)!=="body"}):[]}function getClippingRect(s,e,i,o){var a=e==="clippingParents"?getClippingParents(s):[].concat(e),c=[].concat(a,[i]),d=c[0],_=c.reduce(function(b,k){var j=getClientRectFromMixedType(s,k,o);return b.top=max(j.top,b.top),b.right=min(j.right,b.right),b.bottom=min(j.bottom,b.bottom),b.left=max(j.left,b.left),b},getClientRectFromMixedType(s,d,o));return _.width=_.right-_.left,_.height=_.bottom-_.top,_.x=_.left,_.y=_.top,_}function computeOffsets(s){var e=s.reference,i=s.element,o=s.placement,a=o?getBasePlacement(o):null,c=o?getVariation(o):null,d=e.x+e.width/2-i.width/2,_=e.y+e.height/2-i.height/2,b;switch(a){case top:b={x:d,y:e.y-i.height};break;case bottom:b={x:d,y:e.y+e.height};break;case right:b={x:e.x+e.width,y:_};break;case left:b={x:e.x-i.width,y:_};break;default:b={x:e.x,y:e.y}}var k=a?getMainAxisFromPlacement(a):null;if(k!=null){var j=k==="y"?"height":"width";switch(c){case start:b[k]=b[k]-(e[j]/2-i[j]/2);break;case end:b[k]=b[k]+(e[j]/2-i[j]/2);break}}return b}function detectOverflow(s,e){e===void 0&&(e={});var i=e,o=i.placement,a=o===void 0?s.placement:o,c=i.strategy,d=c===void 0?s.strategy:c,_=i.boundary,b=_===void 0?clippingParents:_,k=i.rootBoundary,j=k===void 0?viewport:k,_e=i.elementContext,et=_e===void 0?popper:_e,tt=i.altBoundary,it=tt===void 0?!1:tt,st=i.padding,ot=st===void 0?0:st,nt=mergePaddingObject(typeof ot!="number"?ot:expandToHashMap(ot,basePlacements)),rt=et===popper?reference:popper,at=s.rects.popper,lt=s.elements[it?rt:et],gt=getClippingRect(isElement(lt)?lt:lt.contextElement||getDocumentElement(s.elements.popper),b,j,d),ht=getBoundingClientRect(s.elements.reference),ut=computeOffsets({reference:ht,element:at,strategy:"absolute",placement:a}),ct=rectToClientRect(Object.assign({},at,ut)),ft=et===popper?ct:ht,dt={top:gt.top-ft.top+nt.top,bottom:ft.bottom-gt.bottom+nt.bottom,left:gt.left-ft.left+nt.left,right:ft.right-gt.right+nt.right},pt=s.modifiersData.offset;if(et===popper&&pt){var mt=pt[a];Object.keys(dt).forEach(function(_t){var Ct=[right,bottom].indexOf(_t)>=0?1:-1,bt=[top,bottom].indexOf(_t)>=0?"y":"x";dt[_t]+=mt[bt]*Ct})}return dt}function computeAutoPlacement(s,e){e===void 0&&(e={});var i=e,o=i.placement,a=i.boundary,c=i.rootBoundary,d=i.padding,_=i.flipVariations,b=i.allowedAutoPlacements,k=b===void 0?placements:b,j=getVariation(o),_e=j?_?variationPlacements:variationPlacements.filter(function(it){return getVariation(it)===j}):basePlacements,et=_e.filter(function(it){return k.indexOf(it)>=0});et.length===0&&(et=_e);var tt=et.reduce(function(it,st){return it[st]=detectOverflow(s,{placement:st,boundary:a,rootBoundary:c,padding:d})[getBasePlacement(st)],it},{});return Object.keys(tt).sort(function(it,st){return tt[it]-tt[st]})}function getExpandedFallbackPlacements(s){if(getBasePlacement(s)===auto)return[];var e=getOppositePlacement(s);return[getOppositeVariationPlacement(s),e,getOppositeVariationPlacement(e)]}function flip(s){var e=s.state,i=s.options,o=s.name;if(!e.modifiersData[o]._skip){for(var a=i.mainAxis,c=a===void 0?!0:a,d=i.altAxis,_=d===void 0?!0:d,b=i.fallbackPlacements,k=i.padding,j=i.boundary,_e=i.rootBoundary,et=i.altBoundary,tt=i.flipVariations,it=tt===void 0?!0:tt,st=i.allowedAutoPlacements,ot=e.options.placement,nt=getBasePlacement(ot),rt=nt===ot,at=b||(rt||!it?[getOppositePlacement(ot)]:getExpandedFallbackPlacements(ot)),lt=[ot].concat(at).reduce(function(xt,Mt){return xt.concat(getBasePlacement(Mt)===auto?computeAutoPlacement(e,{placement:Mt,boundary:j,rootBoundary:_e,padding:k,flipVariations:it,allowedAutoPlacements:st}):Mt)},[]),gt=e.rects.reference,ht=e.rects.popper,ut=new Map,ct=!0,ft=lt[0],dt=0;dt<lt.length;dt++){var pt=lt[dt],mt=getBasePlacement(pt),_t=getVariation(pt)===start,Ct=[top,bottom].indexOf(mt)>=0,bt=Ct?"width":"height",yt=detectOverflow(e,{placement:pt,boundary:j,rootBoundary:_e,altBoundary:et,padding:k}),wt=Ct?_t?right:left:_t?bottom:top;gt[bt]>ht[bt]&&(wt=getOppositePlacement(wt));var Tt=getOppositePlacement(wt),kt=[];if(c&&kt.push(yt[mt]<=0),_&&kt.push(yt[wt]<=0,yt[Tt]<=0),kt.every(function(xt){return xt})){ft=pt,ct=!1;break}ut.set(pt,kt)}if(ct)for(var Rt=it?3:1,St=function(Mt){var Pt=lt.find(function(Ft){var Bt=ut.get(Ft);if(Bt)return Bt.slice(0,Mt).every(function(Wt){return Wt})});if(Pt)return ft=Pt,"break"},Lt=Rt;Lt>0;Lt--){var It=St(Lt);if(It==="break")break}e.placement!==ft&&(e.modifiersData[o]._skip=!0,e.placement=ft,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(s,e,i){return i===void 0&&(i={x:0,y:0}),{top:s.top-e.height-i.y,right:s.right-e.width+i.x,bottom:s.bottom-e.height+i.y,left:s.left-e.width-i.x}}function isAnySideFullyClipped(s){return[top,right,bottom,left].some(function(e){return s[e]>=0})}function hide$1(s){var e=s.state,i=s.name,o=e.rects.reference,a=e.rects.popper,c=e.modifiersData.preventOverflow,d=detectOverflow(e,{elementContext:"reference"}),_=detectOverflow(e,{altBoundary:!0}),b=getSideOffsets(d,o),k=getSideOffsets(_,a,c),j=isAnySideFullyClipped(b),_e=isAnySideFullyClipped(k);e.modifiersData[i]={referenceClippingOffsets:b,popperEscapeOffsets:k,isReferenceHidden:j,hasPopperEscaped:_e},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":j,"data-popper-escaped":_e})}const hide$2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide$1};function distanceAndSkiddingToXY(s,e,i){var o=getBasePlacement(s),a=[left,top].indexOf(o)>=0?-1:1,c=typeof i=="function"?i(Object.assign({},e,{placement:s})):i,d=c[0],_=c[1];return d=d||0,_=(_||0)*a,[left,right].indexOf(o)>=0?{x:_,y:d}:{x:d,y:_}}function offset(s){var e=s.state,i=s.options,o=s.name,a=i.offset,c=a===void 0?[0,0]:a,d=placements.reduce(function(j,_e){return j[_e]=distanceAndSkiddingToXY(_e,e.rects,c),j},{}),_=d[e.placement],b=_.x,k=_.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=b,e.modifiersData.popperOffsets.y+=k),e.modifiersData[o]=d}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(s){var e=s.state,i=s.name;e.modifiersData[i]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(s){return s==="x"?"y":"x"}function preventOverflow(s){var e=s.state,i=s.options,o=s.name,a=i.mainAxis,c=a===void 0?!0:a,d=i.altAxis,_=d===void 0?!1:d,b=i.boundary,k=i.rootBoundary,j=i.altBoundary,_e=i.padding,et=i.tether,tt=et===void 0?!0:et,it=i.tetherOffset,st=it===void 0?0:it,ot=detectOverflow(e,{boundary:b,rootBoundary:k,padding:_e,altBoundary:j}),nt=getBasePlacement(e.placement),rt=getVariation(e.placement),at=!rt,lt=getMainAxisFromPlacement(nt),gt=getAltAxis(lt),ht=e.modifiersData.popperOffsets,ut=e.rects.reference,ct=e.rects.popper,ft=typeof st=="function"?st(Object.assign({},e.rects,{placement:e.placement})):st,dt=typeof ft=="number"?{mainAxis:ft,altAxis:ft}:Object.assign({mainAxis:0,altAxis:0},ft),pt=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,mt={x:0,y:0};if(!!ht){if(c){var _t,Ct=lt==="y"?top:left,bt=lt==="y"?bottom:right,yt=lt==="y"?"height":"width",wt=ht[lt],Tt=wt+ot[Ct],kt=wt-ot[bt],Rt=tt?-ct[yt]/2:0,St=rt===start?ut[yt]:ct[yt],Lt=rt===start?-ct[yt]:-ut[yt],It=e.elements.arrow,xt=tt&&It?getLayoutRect(It):{width:0,height:0},Mt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Pt=Mt[Ct],Ft=Mt[bt],Bt=within(0,ut[yt],xt[yt]),Wt=at?ut[yt]/2-Rt-Bt-Pt-dt.mainAxis:St-Bt-Pt-dt.mainAxis,yn=at?-ut[yt]/2+Rt+Bt+Ft+dt.mainAxis:Lt+Bt+Ft+dt.mainAxis,jt=e.elements.arrow&&getOffsetParent(e.elements.arrow),Yt=jt?lt==="y"?jt.clientTop||0:jt.clientLeft||0:0,on=(_t=pt==null?void 0:pt[lt])!=null?_t:0,un=wt+Wt-on-Yt,Jt=wt+yn-on,en=within(tt?min(Tt,un):Tt,wt,tt?max(kt,Jt):kt);ht[lt]=en,mt[lt]=en-wt}if(_){var hn,rn=lt==="x"?top:left,Sn=lt==="x"?bottom:right,Ut=ht[gt],Kt=gt==="y"?"height":"width",Gt=Ut+ot[rn],qt=Ut-ot[Sn],sn=[top,left].indexOf(nt)!==-1,fn=(hn=pt==null?void 0:pt[gt])!=null?hn:0,gn=sn?Gt:Ut-ut[Kt]-ct[Kt]-fn+dt.altAxis,an=sn?Ut+ut[Kt]+ct[Kt]-fn-dt.altAxis:qt,pn=tt&&sn?withinMaxClamp(gn,Ut,an):within(tt?gn:Gt,Ut,tt?an:qt);ht[gt]=pn,mt[gt]=pn-Ut}e.modifiersData[o]=mt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function getNodeScroll(s){return s===getWindow(s)||!isHTMLElement$1(s)?getWindowScroll(s):getHTMLElementScroll(s)}function isElementScaled(s){var e=s.getBoundingClientRect(),i=round(e.width)/s.offsetWidth||1,o=round(e.height)/s.offsetHeight||1;return i!==1||o!==1}function getCompositeRect(s,e,i){i===void 0&&(i=!1);var o=isHTMLElement$1(e),a=isHTMLElement$1(e)&&isElementScaled(e),c=getDocumentElement(e),d=getBoundingClientRect(s,a,i),_={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!i)&&((getNodeName(e)!=="body"||isScrollParent(c))&&(_=getNodeScroll(e)),isHTMLElement$1(e)?(b=getBoundingClientRect(e,!0),b.x+=e.clientLeft,b.y+=e.clientTop):c&&(b.x=getWindowScrollBarX(c))),{x:d.left+_.scrollLeft-b.x,y:d.top+_.scrollTop-b.y,width:d.width,height:d.height}}function order(s){var e=new Map,i=new Set,o=[];s.forEach(function(c){e.set(c.name,c)});function a(c){i.add(c.name);var d=[].concat(c.requires||[],c.requiresIfExists||[]);d.forEach(function(_){if(!i.has(_)){var b=e.get(_);b&&a(b)}}),o.push(c)}return s.forEach(function(c){i.has(c.name)||a(c)}),o}function orderModifiers(s){var e=order(s);return modifierPhases.reduce(function(i,o){return i.concat(e.filter(function(a){return a.phase===o}))},[])}function debounce(s){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(s())})})),e}}function mergeByName(s){var e=s.reduce(function(i,o){var a=i[o.name];return i[o.name]=a?Object.assign({},a,o,{options:Object.assign({},a.options,o.options),data:Object.assign({},a.data,o.data)}):o,i},{});return Object.keys(e).map(function(i){return e[i]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var s=arguments.length,e=new Array(s),i=0;i<s;i++)e[i]=arguments[i];return!e.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function popperGenerator(s){s===void 0&&(s={});var e=s,i=e.defaultModifiers,o=i===void 0?[]:i,a=e.defaultOptions,c=a===void 0?DEFAULT_OPTIONS:a;return function(_,b,k){k===void 0&&(k=c);var j={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,c),modifiersData:{},elements:{reference:_,popper:b},attributes:{},styles:{}},_e=[],et=!1,tt={state:j,setOptions:function(nt){var rt=typeof nt=="function"?nt(j.options):nt;st(),j.options=Object.assign({},c,j.options,rt),j.scrollParents={reference:isElement(_)?listScrollParents(_):_.contextElement?listScrollParents(_.contextElement):[],popper:listScrollParents(b)};var at=orderModifiers(mergeByName([].concat(o,j.options.modifiers)));return j.orderedModifiers=at.filter(function(lt){return lt.enabled}),it(),tt.update()},forceUpdate:function(){if(!et){var nt=j.elements,rt=nt.reference,at=nt.popper;if(!!areValidElements(rt,at)){j.rects={reference:getCompositeRect(rt,getOffsetParent(at),j.options.strategy==="fixed"),popper:getLayoutRect(at)},j.reset=!1,j.placement=j.options.placement,j.orderedModifiers.forEach(function(dt){return j.modifiersData[dt.name]=Object.assign({},dt.data)});for(var lt=0;lt<j.orderedModifiers.length;lt++){if(j.reset===!0){j.reset=!1,lt=-1;continue}var gt=j.orderedModifiers[lt],ht=gt.fn,ut=gt.options,ct=ut===void 0?{}:ut,ft=gt.name;typeof ht=="function"&&(j=ht({state:j,options:ct,name:ft,instance:tt})||j)}}}},update:debounce(function(){return new Promise(function(ot){tt.forceUpdate(),ot(j)})}),destroy:function(){st(),et=!0}};if(!areValidElements(_,b))return tt;tt.setOptions(k).then(function(ot){!et&&k.onFirstUpdate&&k.onFirstUpdate(ot)});function it(){j.orderedModifiers.forEach(function(ot){var nt=ot.name,rt=ot.options,at=rt===void 0?{}:rt,lt=ot.effect;if(typeof lt=="function"){var gt=lt({state:j,name:nt,instance:tt,options:at}),ht=function(){};_e.push(gt||ht)}})}function st(){_e.forEach(function(ot){return ot()}),_e=[]}return tt}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$2,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$2],createPopper=popperGenerator({defaultModifiers}),hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(s,e){if(s===e)return!0;if(s&&e&&typeof s=="object"&&typeof e=="object"){if(s.constructor!==e.constructor)return!1;var i,o,a;if(Array.isArray(s)){if(i=s.length,i!=e.length)return!1;for(o=i;o--!==0;)if(!equal(s[o],e[o]))return!1;return!0}var c;if(hasMap&&s instanceof Map&&e instanceof Map){if(s.size!==e.size)return!1;for(c=s.entries();!(o=c.next()).done;)if(!e.has(o.value[0]))return!1;for(c=s.entries();!(o=c.next()).done;)if(!equal(o.value[1],e.get(o.value[0])))return!1;return!0}if(hasSet&&s instanceof Set&&e instanceof Set){if(s.size!==e.size)return!1;for(c=s.entries();!(o=c.next()).done;)if(!e.has(o.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(e)){if(i=s.length,i!=e.length)return!1;for(o=i;o--!==0;)if(s[o]!==e[o])return!1;return!0}if(s.constructor===RegExp)return s.source===e.source&&s.flags===e.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===e.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===e.toString();if(a=Object.keys(s),i=a.length,i!==Object.keys(e).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[o]))return!1;if(hasElementType&&s instanceof Element)return!1;for(o=i;o--!==0;)if(!((a[o]==="_owner"||a[o]==="__v"||a[o]==="__o")&&s.$$typeof)&&!equal(s[a[o]],e[a[o]]))return!1;return!0}return s!==s&&e!==e}var reactFastCompare=function(e,i){try{return equal(e,i)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}},EMPTY_MODIFIERS$1=[],usePopper=function(e,i,o){o===void 0&&(o={});var a=react.exports.useRef(null),c={onFirstUpdate:o.onFirstUpdate,placement:o.placement||"bottom",strategy:o.strategy||"absolute",modifiers:o.modifiers||EMPTY_MODIFIERS$1},d=react.exports.useState({styles:{popper:{position:c.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),_=d[0],b=d[1],k=react.exports.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(tt){var it=tt.state,st=Object.keys(it.elements);reactDom.exports.flushSync(function(){b({styles:fromEntries(st.map(function(ot){return[ot,it.styles[ot]||{}]})),attributes:fromEntries(st.map(function(ot){return[ot,it.attributes[ot]]}))})})},requires:["computeStyles"]}},[]),j=react.exports.useMemo(function(){var et={onFirstUpdate:c.onFirstUpdate,placement:c.placement,strategy:c.strategy,modifiers:[].concat(c.modifiers,[k,{name:"applyStyles",enabled:!1}])};return reactFastCompare(a.current,et)?a.current||et:(a.current=et,et)},[c.onFirstUpdate,c.placement,c.strategy,c.modifiers,k]),_e=react.exports.useRef();return useIsomorphicLayoutEffect(function(){_e.current&&_e.current.setOptions(j)},[j]),useIsomorphicLayoutEffect(function(){if(!(e==null||i==null)){var et=o.createPopper||createPopper,tt=et(e,i,j);return _e.current=tt,function(){tt.destroy(),_e.current=null}}},[e,i,o.createPopper]),{state:_e.current?_e.current.state:null,styles:_.styles,attributes:_.attributes,update:_e.current?_e.current.update:null,forceUpdate:_e.current?_e.current.forceUpdate:null}},NOOP=function(){},NOOP_PROMISE=function(){return Promise.resolve(null)},EMPTY_MODIFIERS=[];function Popper(s){var e=s.placement,i=e===void 0?"bottom":e,o=s.strategy,a=o===void 0?"absolute":o,c=s.modifiers,d=c===void 0?EMPTY_MODIFIERS:c,_=s.referenceElement,b=s.onFirstUpdate,k=s.innerRef,j=s.children,_e=react.exports.useContext(ManagerReferenceNodeContext),et=react.exports.useState(null),tt=et[0],it=et[1],st=react.exports.useState(null),ot=st[0],nt=st[1];react.exports.useEffect(function(){setRef(k,tt)},[k,tt]);var rt=react.exports.useMemo(function(){return{placement:i,strategy:a,onFirstUpdate:b,modifiers:[].concat(d,[{name:"arrow",enabled:ot!=null,options:{element:ot}}])}},[i,a,b,d,ot]),at=usePopper(_||_e,tt,rt),lt=at.state,gt=at.styles,ht=at.forceUpdate,ut=at.update,ct=react.exports.useMemo(function(){return{ref:it,style:gt.popper,placement:lt?lt.placement:i,hasPopperEscaped:lt&&lt.modifiersData.hide?lt.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:lt&&lt.modifiersData.hide?lt.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:gt.arrow,ref:nt},forceUpdate:ht||NOOP,update:ut||NOOP_PROMISE}},[it,nt,i,lt,gt,ut,ht]);return unwrapArray(j)(ct)}function Reference(s){var e=s.children,i=s.innerRef,o=react.exports.useContext(ManagerReferenceNodeSetterContext),a=react.exports.useCallback(function(c){setRef(i,c),safeInvoke$1(o,c)},[i,o]);return react.exports.useEffect(function(){return function(){return setRef(i,null)}},[]),react.exports.useEffect(function(){},[o]),unwrapArray(e)({ref:a})}function _objectWithoutPropertiesLoose$1(s,e){if(s==null)return{};var i={},o=Object.keys(s),a,c;for(c=0;c<o.length;c++)a=o[c],!(e.indexOf(a)>=0)&&(i[a]=s[a]);return i}function _setPrototypeOf(s,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},_setPrototypeOf(s,e)}function _inheritsLoose(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,_setPrototypeOf(s,e)}const config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(e){return e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(s){_inheritsLoose(e,s);function e(o,a){var c;c=s.call(this,o,a)||this;var d=a,_=d&&!d.isMounting?o.enter:o.appear,b;return c.appearStatus=null,o.in?_?(b=EXITED,c.appearStatus=ENTERING):b=ENTERED:o.unmountOnExit||o.mountOnEnter?b=UNMOUNTED:b=EXITED,c.state={status:b},c.nextCallback=null,c}e.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===UNMOUNTED?{status:EXITED}:null};var i=e.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==ENTERING&&d!==ENTERED&&(c=ENTERING):(d===ENTERING||d===ENTERED)&&(c=EXITING)}this.updateStatus(!1,c)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var a=this.props.timeout,c,d,_;return c=d=_=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,_=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:_}},i.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);d&&forceReflow(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},i.performEnter=function(a){var c=this,d=this.props.enter,_=this.context?this.context.isMounting:a,b=this.props.nodeRef?[_]:[ReactDOM.findDOMNode(this),_],k=b[0],j=b[1],_e=this.getTimeouts(),et=_?_e.appear:_e.enter;if(!a&&!d||config.disabled){this.safeSetState({status:ENTERED},function(){c.props.onEntered(k)});return}this.props.onEnter(k,j),this.safeSetState({status:ENTERING},function(){c.props.onEntering(k,j),c.onTransitionEnd(et,function(){c.safeSetState({status:ENTERED},function(){c.props.onEntered(k,j)})})})},i.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),_=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!c||config.disabled){this.safeSetState({status:EXITED},function(){a.props.onExited(_)});return}this.props.onExit(_),this.safeSetState({status:EXITING},function(){a.props.onExiting(_),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:EXITED},function(){a.props.onExited(_)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},i.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(_){d&&(d=!1,c.nextCallback=null,a(_))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},i.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),_=a==null&&!this.props.addEndListener;if(!d||_){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],k=b[0],j=b[1];this.props.addEndListener(k,j)}a!=null&&setTimeout(this.nextCallback,a)},i.render=function(){var a=this.state.status;if(a===UNMOUNTED)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var _=_objectWithoutPropertiesLoose$1(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return jsx(TransitionGroupContext.Provider,{value:null,children:typeof d=="function"?d(a,_):React.cloneElement(React.Children.only(d),_)})},e}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$4(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$4,onEntering:noop$4,onEntered:noop$4,onExit:noop$4,onExiting:noop$4,onExited:noop$4};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function ownKeys(s,e){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),i.push.apply(i,o)}return i}function _objectSpread2(s){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach(function(o){_defineProperty(s,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(i,o))})}return s}function _defineProperty(s,e,i){return e in s?Object.defineProperty(s,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[e]=i,s}function _extends(){return _extends=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o])}return s},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(s,e){if(s==null)return{};var i={},o=Object.keys(s),a,c;for(c=0;c<o.length;c++)a=o[c],!(e.indexOf(a)>=0)&&(i[a]=s[a]);return i}function _objectWithoutProperties(s,e){if(s==null)return{};var i=_objectWithoutPropertiesLoose(s,e),o,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(a=0;a<c.length;a++)o=c[a],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,o)||(i[o]=s[o]))}return i}function getScrollbarWidth(){let s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="50px",s.style.height="50px",s.style.overflow="scroll",document.body.appendChild(s);const e=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),e}function setScrollbarWidth(s){document.body.style.paddingRight=s>0?`${s}px`:null}function isBodyOverflowing(){return document.body.clientWidth<window.innerWidth}function getOriginalBodyPadding(){const s=window.getComputedStyle(document.body,null);return parseInt(s&&s.getPropertyValue("padding-right")||0,10)}function conditionallyUpdateScrollbar(){const s=getScrollbarWidth(),e=document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")[0],i=e?parseInt(e.style.paddingRight||0,10):0;isBodyOverflowing()&&setScrollbarWidth(i+s)}let globalCssModule;function mapToCssModules(s="",e=globalCssModule){return e?s.split(" ").map(i=>e[i]||i).join(" "):s}function omit(s,e){const i={};return Object.keys(s).forEach(o=>{e.indexOf(o)===-1&&(i[o]=s[o])}),i}function pick(s,e){const i=Array.isArray(e)?e:[e];let{length:o}=i,a;const c={};for(;o>0;)o-=1,a=i[o],c[a]=s[a];return c}let warned={};function warnOnce(s){warned[s]||(typeof console<"u"&&console.error(s),warned[s]=!0)}function deprecated(s,e){return function(o,a,c,...d){return o[a]!==null&&typeof o[a]<"u"&&warnOnce(`"${a}" property of "${c}" has been deprecated.
${e}`),s(o,a,c,...d)}}const Element$1=typeof window=="object"&&window.Element||function(){};function DOMElement(s,e,i){if(!(s[e]instanceof Element$1))return new Error("Invalid prop `"+e+"` supplied to `"+i+"`. Expected prop to be an instance of Element. Validation failed.")}const targetPropType=propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.func,DOMElement,propTypes.exports.shape({current:propTypes.exports.any})]),tagPropType=propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.string,propTypes.exports.shape({$$typeof:propTypes.exports.symbol,render:propTypes.exports.func}),propTypes.exports.arrayOf(propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.string,propTypes.exports.shape({$$typeof:propTypes.exports.symbol,render:propTypes.exports.func})]))]),TransitionTimeouts={Fade:150,Collapse:350,Modal:300,Carousel:600,Offcanvas:300},TransitionPropTypeKeys=["in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],TransitionStatuses={ENTERING:"entering",ENTERED:"entered",EXITING:"exiting",EXITED:"exited"},keyCodes={esc:27,space:32,enter:13,tab:9,up:38,down:40,home:36,end:35,n:78,p:80},PopperPlacements=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function isReactRefObj(s){return s&&typeof s=="object"?"current"in s:!1}function getTag(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}function isObject$1(s){const e=typeof s;return s!=null&&(e==="object"||e==="function")}function isFunction$1(s){if(!isObject$1(s))return!1;const e=getTag(s);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object Proxy]"}function findDOMElements(s){if(isReactRefObj(s))return s.current;if(isFunction$1(s))return s();if(typeof s=="string"&&canUseDOM){let e=document.querySelectorAll(s);if(e.length||(e=document.querySelectorAll(`#${s}`)),!e.length)throw new Error(`The target '${s}' could not be identified in the dom, tip: check spelling`);return e}return s}function isArrayOrNodeList(s){return s===null?!1:Array.isArray(s)||canUseDOM&&typeof s.length=="number"}function getTarget(s,e){const i=findDOMElements(s);return e?isArrayOrNodeList(i)?i:i===null?[]:[i]:isArrayOrNodeList(i)?i[0]:i}const defaultToggleEvents=["touchstart","click"];function addMultipleEventListeners(s,e,i,o){let a=s;isArrayOrNodeList(a)||(a=[a]);let c=i;if(typeof c=="string"&&(c=c.split(/\s+/)),!isArrayOrNodeList(a)||typeof e!="function"||!Array.isArray(c))throw new Error(`
      The first argument of this function must be DOM node or an array on DOM nodes or NodeList.
      The second must be a function.
      The third is a string or an array of strings that represents DOM events
    `);return Array.prototype.forEach.call(c,d=>{Array.prototype.forEach.call(a,_=>{_.addEventListener(d,e,o)})}),function(){Array.prototype.forEach.call(c,_=>{Array.prototype.forEach.call(a,b=>{b.removeEventListener(_,e,o)})})}}const focusableElements=["a[href]","area[href]","input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","[tabindex]:not(.modal):not(.offcanvas)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],_excluded$1h=["className","cssModule","fluid","tag"],propTypes$1m={tag:tagPropType,fluid:propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]),className:propTypes.exports.string,cssModule:propTypes.exports.object},defaultProps$1k={tag:"div"};function Container(s){const{className:e,cssModule:i,fluid:o,tag:a}=s,c=_objectWithoutProperties(s,_excluded$1h);let d="container";o===!0?d="container-fluid":o&&(d=`container-${o}`);const _=mapToCssModules(classNames(e,d),i);return jsx(a,{...c,className:_})}Container.propTypes=propTypes$1m;Container.defaultProps=defaultProps$1k;const _excluded$1g=["className","cssModule","noGutters","tag","widths"],rowColWidths=["xs","sm","md","lg","xl","xxl"],rowColsPropType=propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string]),propTypes$1l={tag:tagPropType,noGutters:deprecated(propTypes.exports.bool,"Please use Bootstrap 5 gutter utility classes. https://getbootstrap.com/docs/5.0/layout/gutters/"),className:propTypes.exports.string,cssModule:propTypes.exports.object,xs:rowColsPropType,sm:rowColsPropType,md:rowColsPropType,lg:rowColsPropType,xl:rowColsPropType,xxl:rowColsPropType,widths:propTypes.exports.array},defaultProps$1j={tag:"div",widths:rowColWidths};function Row(s){const{className:e,cssModule:i,noGutters:o,tag:a,widths:c}=s,d=_objectWithoutProperties(s,_excluded$1g),_=[];c.forEach((k,j)=>{let _e=s[k];if(delete d[k],!_e)return;const et=!j;_.push(et?`row-cols-${_e}`:`row-cols-${k}-${_e}`)});const b=mapToCssModules(classNames(e,o?"gx-0":null,"row",_),i);return jsx(a,{...d,className:b})}Row.propTypes=propTypes$1l;Row.defaultProps=defaultProps$1j;const _excluded$1f=["className","cssModule","widths","tag"],colWidths$1=["xs","sm","md","lg","xl","xxl"],stringOrNumberProp$1=propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string]),columnProps$1=propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.number,propTypes.exports.string,propTypes.exports.shape({size:propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.number,propTypes.exports.string]),order:stringOrNumberProp$1,offset:stringOrNumberProp$1})]),propTypes$1k={tag:tagPropType,xs:columnProps$1,sm:columnProps$1,md:columnProps$1,lg:columnProps$1,xl:columnProps$1,xxl:columnProps$1,className:propTypes.exports.string,cssModule:propTypes.exports.object,widths:propTypes.exports.array},defaultProps$1i={tag:"div",widths:colWidths$1},getColumnSizeClass$1=(s,e,i)=>i===!0||i===""?s?"col":`col-${e}`:i==="auto"?s?"col-auto":`col-${e}-auto`:s?`col-${i}`:`col-${e}-${i}`,getColumnClasses=(s,e,i=colWidths$1)=>{const o=s,a=[];return i.forEach((c,d)=>{let _=o[c];if(delete o[c],!_&&_!=="")return;const b=!d;if(isObject$1(_)){const k=b?"-":`-${c}-`,j=getColumnSizeClass$1(b,c,_.size);a.push(mapToCssModules(classNames({[j]:_.size||_.size==="",[`order${k}${_.order}`]:_.order||_.order===0,[`offset${k}${_.offset}`]:_.offset||_.offset===0}),e))}else{const k=getColumnSizeClass$1(b,c,_);a.push(k)}}),{colClasses:a,modifiedAttributes:o}};function Col(s){const{className:e,cssModule:i,widths:o,tag:a}=s,c=_objectWithoutProperties(s,_excluded$1f);let{modifiedAttributes:d,colClasses:_}=getColumnClasses(c,i,o);_.length||_.push("col");const b=mapToCssModules(classNames(e,_),i);return jsx(a,{...d,className:b})}Col.propTypes=propTypes$1k;Col.defaultProps=defaultProps$1i;propTypes.exports.node,propTypes.exports.string,propTypes.exports.string,propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]),propTypes.exports.object,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]),propTypes.exports.string,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.string;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.node;propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.oneOf(["center","end"]),propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]);propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object;const _excluded$18=["className","cssModule","active","tag","innerRef"],propTypes$1d={active:propTypes.exports.bool,className:propTypes.exports.string,cssModule:propTypes.exports.object,disabled:propTypes.exports.bool,href:propTypes.exports.any,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),onClick:propTypes.exports.func,tag:tagPropType},defaultProps$1b={tag:"a"};class NavLink extends React.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){if(this.props.disabled){e.preventDefault();return}this.props.href==="#"&&e.preventDefault(),this.props.onClick&&this.props.onClick(e)}render(){let e=this.props,{className:i,cssModule:o,active:a,tag:c,innerRef:d}=e,_=_objectWithoutProperties(e,_excluded$18);const b=mapToCssModules(classNames(i,"nav-link",{disabled:_.disabled,active:a}),o);return jsx(c,{..._,ref:d,onClick:this.onClick,className:b})}}NavLink.propTypes=propTypes$1d;NavLink.defaultProps=defaultProps$1b;propTypes.exports.string,propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string;propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object;const _excluded$15=["className","cssModule","variant","innerRef"],propTypes$1a={active:propTypes.exports.bool,"aria-label":propTypes.exports.string,onClick:propTypes.exports.func,variant:propTypes.exports.oneOf(["white"]),className:propTypes.exports.string,cssModule:propTypes.exports.object,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func])},defaultProps$18={"aria-label":"close"};function CloseButton(s){const{className:e,cssModule:i,variant:o,innerRef:a}=s,c=_objectWithoutProperties(s,_excluded$15),d=mapToCssModules(classNames(e,"btn-close",o&&`btn-close-${o}`));return jsx("button",{ref:a,type:"button",className:d,...c})}CloseButton.propTypes=propTypes$1a;CloseButton.defaultProps=defaultProps$18;const _excluded$14=["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"],propTypes$19={active:propTypes.exports.bool,"aria-label":propTypes.exports.string,block:propTypes.exports.bool,children:propTypes.exports.node,className:propTypes.exports.string,cssModule:propTypes.exports.object,close:propTypes.exports.bool,color:propTypes.exports.string,disabled:propTypes.exports.bool,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),onClick:propTypes.exports.func,outline:propTypes.exports.bool,size:propTypes.exports.string,tag:tagPropType},defaultProps$17={color:"secondary",tag:"button"};function Button$1(s){const e=react.exports.useCallback(ot=>{if(s.disabled){ot.preventDefault();return}if(s.onClick)return s.onClick(ot)},[s.onClick,s.disabled]);let{active:i,"aria-label":o,block:a,className:c,close:d,cssModule:_,color:b,outline:k,size:j,tag:_e,innerRef:et}=s,tt=_objectWithoutProperties(s,_excluded$14);if(d)return jsx(CloseButton,{...tt});const it=`btn${k?"-outline":""}-${b}`,st=mapToCssModules(classNames(c,"btn",it,j?`btn-${j}`:!1,a?"d-block w-100":!1,{active:i,disabled:s.disabled}),_);return tt.href&&_e==="button"&&(_e="a"),jsx(_e,{type:_e==="button"&&tt.onClick?"button":void 0,...tt,className:st,ref:et,onClick:e,"aria-label":o})}Button$1.propTypes=propTypes$19;Button$1.defaultProps=defaultProps$17;propTypes.exports.func,propTypes.exports.func,propTypes.exports.func,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object;const DropdownContext=React.createContext({}),InputGroupContext=React.createContext({}),_excluded$12=["className","cssModule","direction","isOpen","group","size","nav","setActiveFromChild","active","tag","menuRole"],propTypes$17={a11y:propTypes.exports.bool,disabled:propTypes.exports.bool,direction:propTypes.exports.oneOf(["up","down","start","end","left","right"]),group:propTypes.exports.bool,isOpen:propTypes.exports.bool,nav:propTypes.exports.bool,active:propTypes.exports.bool,size:propTypes.exports.string,tag:tagPropType,toggle:propTypes.exports.func,children:propTypes.exports.node,className:propTypes.exports.string,cssModule:propTypes.exports.object,dropup:propTypes.exports.bool,inNavbar:propTypes.exports.bool,setActiveFromChild:propTypes.exports.bool,menuRole:propTypes.exports.oneOf(["listbox","menu"])},defaultProps$15={a11y:!0,isOpen:!1,direction:"down",nav:!1,active:!1,inNavbar:!1,setActiveFromChild:!1},preventDefaultKeys=[keyCodes.space,keyCodes.enter,keyCodes.up,keyCodes.down,keyCodes.end,keyCodes.home];class Dropdown extends React.Component{constructor(e){super(e),this.addEvents=this.addEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.removeEvents=this.removeEvents.bind(this),this.toggle=this.toggle.bind(this),this.handleMenuRef=this.handleMenuRef.bind(this),this.handleToggleRef=this.handleToggleRef.bind(this),this.containerRef=React.createRef(),this.menuRef=React.createRef(),this.toggleRef=React.createRef()}componentDidMount(){this.handleProps()}componentDidUpdate(e){this.props.isOpen!==e.isOpen&&this.handleProps()}componentWillUnmount(){this.removeEvents()}handleMenuRef(e){this.menuRef.current=e}handleToggleRef(e){this.toggleRef.current=e}handleDocumentClick(e){if(e&&(e.which===3||e.type==="keyup"&&e.which!==keyCodes.tab))return;const i=this.getContainer(),o=this.getMenu(),a=this.getToggle(),c=e.target===a,d=o&&o.contains(e.target)&&o!==e.target;let _=!1;i&&(_=i.classList.contains("input-group")&&i.classList.contains("dropdown")&&e.target.tagName==="INPUT"),!((c&&!_||d)&&(e.type!=="keyup"||e.which===keyCodes.tab))&&this.toggle(e)}handleKeyDown(e){const i=e.target.getAttribute("role")==="menuitem"||e.target.getAttribute("role")==="option",o=this.getMenuCtrl()===e.target,a=keyCodes.tab===e.which;if(!(/input|textarea/i.test(e.target.tagName)||a&&!this.props.a11y||a&&!(i||o))&&((preventDefaultKeys.indexOf(e.which)!==-1||e.which>=48&&e.which<=90)&&e.preventDefault(),!this.props.disabled&&(o&&([keyCodes.space,keyCodes.enter,keyCodes.up,keyCodes.down].indexOf(e.which)>-1?(this.props.isOpen||this.toggle(e),setTimeout(()=>this.getMenuItems()[0].focus())):this.props.isOpen&&a?(e.preventDefault(),this.getMenuItems()[0].focus()):this.props.isOpen&&e.which===keyCodes.esc&&this.toggle(e)),this.props.isOpen&&i))){if([keyCodes.tab,keyCodes.esc].indexOf(e.which)>-1)this.toggle(e),this.getMenuCtrl().focus();else if([keyCodes.space,keyCodes.enter].indexOf(e.which)>-1)e.target.click(),this.getMenuCtrl().focus();else if([keyCodes.down,keyCodes.up].indexOf(e.which)>-1||[keyCodes.n,keyCodes.p].indexOf(e.which)>-1&&e.ctrlKey){const c=this.getMenuItems();let d=c.indexOf(e.target);keyCodes.up===e.which||keyCodes.p===e.which&&e.ctrlKey?d=d!==0?d-1:c.length-1:(keyCodes.down===e.which||keyCodes.n===e.which&&e.ctrlKey)&&(d=d===c.length-1?0:d+1),c[d].focus()}else if(keyCodes.end===e.which){const c=this.getMenuItems();c[c.length-1].focus()}else if(keyCodes.home===e.which)this.getMenuItems()[0].focus();else if(e.which>=48&&e.which<=90){const c=this.getMenuItems(),d=String.fromCharCode(e.which).toLowerCase();for(let _=0;_<c.length;_+=1)if((c[_].textContent&&c[_].textContent[0].toLowerCase())===d){c[_].focus();break}}}}handleProps(){this.props.isOpen?this.addEvents():this.removeEvents()}getContextValue(){return{toggle:this.toggle,isOpen:this.props.isOpen,direction:this.props.direction==="down"&&this.props.dropup?"up":this.props.direction,inNavbar:this.props.inNavbar,disabled:this.props.disabled,onMenuRef:this.handleMenuRef,onToggleRef:this.handleToggleRef,menuRole:this.props.menuRole}}getContainer(){return this.containerRef.current}getMenu(){return this.menuRef.current}getToggle(){return this.toggleRef.current}getMenuCtrl(){return this._$menuCtrl?this._$menuCtrl:(this._$menuCtrl=this.getToggle(),this._$menuCtrl)}getItemType(){return this.props.menuRole==="listbox"?"option":"menuitem"}getMenuItems(){const e=this.getMenu()||this.getContainer();return[].slice.call(e.querySelectorAll(`[role="${this.getItemType()}"]`))}addEvents(){["click","touchstart","keyup"].forEach(e=>document.addEventListener(e,this.handleDocumentClick,!0))}removeEvents(){["click","touchstart","keyup"].forEach(e=>document.removeEventListener(e,this.handleDocumentClick,!0))}toggle(e){return this.props.disabled?e&&e.preventDefault():this.props.toggle(e)}render(){const e=omit(this.props,["toggle","disabled","inNavbar","a11y"]),{className:i,cssModule:o,direction:a,isOpen:c,group:d,size:_,nav:b,setActiveFromChild:k,active:j,tag:_e,menuRole:et}=e,tt=_objectWithoutProperties(e,_excluded$12),it=_e||(b?"li":"div");let st=!1;k&&React.Children.map(this.props.children[1].props.children,nt=>{nt&&nt.props.active&&(st=!0)});const ot=mapToCssModules(classNames(i,b&&j?"active":!1,k&&st?"active":!1,{"btn-group":d,[`btn-group-${_}`]:!!_,dropdown:!d,dropup:a==="up",dropstart:a==="start"||a==="left",dropend:a==="end"||a==="right",show:c,"nav-item":b}),o);return this.context.insideInputGroup?jsx(DropdownContext.Provider,{value:this.getContextValue(),children:jsx(Manager,{children:React.Children.map(this.props.children,nt=>React.cloneElement(nt,{onKeyDown:this.handleKeyDown}))})}):jsx(DropdownContext.Provider,{value:this.getContextValue(),children:jsx(Manager,{children:jsx(it,{..._extends({},tt,{[typeof it=="string"?"ref":"innerRef"]:this.containerRef,onKeyDown:this.handleKeyDown,className:ot})})})})}}Dropdown.propTypes=propTypes$17;Dropdown.defaultProps=defaultProps$15;Dropdown.contextType=InputGroupContext;var Dropdown$1=Dropdown;const propTypes$16={children:propTypes.exports.node};function ButtonDropdown(s){return jsx(Dropdown$1,{group:!0,...s})}ButtonDropdown.propTypes=propTypes$16;propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.string,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string;const _excluded$$=["className","cssModule","divider","tag","header","active","text"],propTypes$13={children:propTypes.exports.node,active:propTypes.exports.bool,disabled:propTypes.exports.bool,divider:propTypes.exports.bool,tag:tagPropType,header:propTypes.exports.bool,onClick:propTypes.exports.func,className:propTypes.exports.string,cssModule:propTypes.exports.object,toggle:propTypes.exports.bool,text:propTypes.exports.bool},defaultProps$12={tag:"button",toggle:!0};class DropdownItem extends React.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this),this.getTabIndex=this.getTabIndex.bind(this)}onClick(e){const{disabled:i,header:o,divider:a,text:c}=this.props;if(i||o||a||c){e.preventDefault();return}this.props.onClick&&this.props.onClick(e),this.props.toggle&&this.context.toggle(e)}getRole(){return this.context.menuRole==="listbox"?"option":"menuitem"}getTabIndex(){const{disabled:e,header:i,divider:o,text:a}=this.props;return e||i||o||a?"-1":"0"}render(){const e=this.getTabIndex(),i=e>-1?this.getRole():void 0;let o=omit(this.props,["toggle"]),{className:a,cssModule:c,divider:d,tag:_,header:b,active:k,text:j}=o,_e=_objectWithoutProperties(o,_excluded$$);const et=mapToCssModules(classNames(a,{disabled:_e.disabled,"dropdown-item":!d&&!b&&!j,active:k,"dropdown-header":b,"dropdown-divider":d,"dropdown-item-text":j}),c);return _==="button"&&(b?_="h6":d?_="div":_e.href?_="a":j&&(_="span")),jsx(_,{type:_==="button"&&(_e.onClick||this.props.toggle)?"button":void 0,..._e,tabIndex:e,role:i,className:et,onClick:this.onClick})}}DropdownItem.propTypes=propTypes$13;DropdownItem.defaultProps=defaultProps$12;DropdownItem.contextType=DropdownContext;const _excluded$_=["className","cssModule","dark","end","right","tag","flip","modifiers","persist","strategy","container","updateOnSelect"],propTypes$12={tag:tagPropType,children:propTypes.exports.node.isRequired,dark:propTypes.exports.bool,end:propTypes.exports.bool,flip:propTypes.exports.bool,modifiers:propTypes.exports.array,className:propTypes.exports.string,cssModule:propTypes.exports.object,style:propTypes.exports.object,persist:propTypes.exports.bool,strategy:propTypes.exports.string,container:targetPropType,updateOnSelect:propTypes.exports.bool,right:deprecated(propTypes.exports.bool,'Please use "end" instead.')},defaultProps$11={tag:"div",flip:!0,modifiers:[]},directionPositionMap={up:"top",left:"left",right:"right",start:"left",end:"right",down:"bottom"};class DropdownMenu extends React.Component{getRole(){return this.context.menuRole==="listbox"?"listbox":"menu"}render(){const e=this.props,{className:i,cssModule:o,dark:a,end:c,right:d,tag:_,flip:b,modifiers:k,persist:j,strategy:_e,container:et,updateOnSelect:tt}=e,it=_objectWithoutProperties(e,_excluded$_),st=mapToCssModules(classNames(i,"dropdown-menu",{"dropdown-menu-dark":a,"dropdown-menu-end":c||d,show:this.context.isOpen}),o),ot=_;if(j||this.context.isOpen&&!this.context.inNavbar){const lt=`${directionPositionMap[this.context.direction]||"bottom"}-${c||d?"end":"start"}`,gt=[...k,{name:"flip",enabled:!!b}],ht=jsx(Popper,{placement:lt,modifiers:gt,strategy:_e,children:({ref:ut,style:ct,placement:ft,update:dt})=>{let pt=_objectSpread2(_objectSpread2({},this.props.style),ct);const mt=_t=>{ut(_t);const{onMenuRef:Ct}=this.context;Ct&&Ct(_t)};return jsx(ot,{tabIndex:"-1",role:this.getRole(),ref:mt,...it,style:pt,"aria-hidden":!this.context.isOpen,className:st,"data-popper-placement":ft,onClick:()=>tt&&dt()})}});return et?ReactDOM.createPortal(ht,getTarget(et)):ht}const{onMenuRef:nt}=this.context;return jsx(ot,{tabIndex:"-1",role:this.getRole(),...it,ref:nt,"aria-hidden":!this.context.isOpen,className:st,"data-popper-placement":it.placement})}}DropdownMenu.propTypes=propTypes$12;DropdownMenu.defaultProps=defaultProps$11;DropdownMenu.contextType=DropdownContext;const _excluded$Z=["className","color","cssModule","caret","split","nav","tag","innerRef"],propTypes$11={caret:propTypes.exports.bool,color:propTypes.exports.string,children:propTypes.exports.node,className:propTypes.exports.string,cssModule:propTypes.exports.object,disabled:propTypes.exports.bool,onClick:propTypes.exports.func,"aria-haspopup":propTypes.exports.bool,split:propTypes.exports.bool,tag:tagPropType,nav:propTypes.exports.bool,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func])},defaultProps$10={color:"secondary","aria-haspopup":!0};class DropdownToggle extends React.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){if(this.props.disabled||this.context.disabled){e.preventDefault();return}this.props.nav&&!this.props.tag&&e.preventDefault(),this.props.onClick&&this.props.onClick(e),this.context.toggle(e)}getRole(){return this.context.menuRole||this.props["aria-haspopup"]}render(){const e=this.props,{className:i,color:o,cssModule:a,caret:c,split:d,nav:_,tag:b,innerRef:k}=e,j=_objectWithoutProperties(e,_excluded$Z),_e=j["aria-label"]||"Toggle Dropdown",et=mapToCssModules(classNames(i,{"dropdown-toggle":c||d,"dropdown-toggle-split":d,"nav-link":_}),a),tt=typeof j.children<"u"?j.children:jsx("span",{className:"visually-hidden",children:_e});let it;return _&&!b?(it="a",j.href="#"):b?it=b:(it=Button$1,j.color=o,j.cssModule=a),this.context.inNavbar?jsx(it,{...j,className:et,onClick:this.onClick,ref:this.context.onToggleRef,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:tt}):jsx(Reference,{innerRef:k,children:({ref:st})=>{const ot=nt=>{st(nt);const{onToggleRef:rt}=this.context;rt&&rt(nt)};return jsx(it,{..._extends({},j,{[typeof it=="string"?"ref":"innerRef"]:ot,className:et,onClick:this.onClick,"aria-expanded":this.context.isOpen,"aria-haspopup":this.getRole(),children:tt})})}})}}DropdownToggle.propTypes=propTypes$11;DropdownToggle.defaultProps=defaultProps$10;DropdownToggle.contextType=DropdownContext;const _excluded$Y=["tag","baseClass","baseClassActive","className","cssModule","children","innerRef"],propTypes$10=_objectSpread2(_objectSpread2({},Transition$1.propTypes),{},{children:propTypes.exports.oneOfType([propTypes.exports.arrayOf(propTypes.exports.node),propTypes.exports.node]),tag:tagPropType,baseClass:propTypes.exports.string,baseClassActive:propTypes.exports.string,className:propTypes.exports.string,cssModule:propTypes.exports.object,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func])}),defaultProps$$=_objectSpread2(_objectSpread2({},Transition$1.defaultProps),{},{tag:"div",baseClass:"fade",baseClassActive:"show",timeout:TransitionTimeouts.Fade,appear:!0,enter:!0,exit:!0,in:!0});function Fade(s){const{tag:e,baseClass:i,baseClassActive:o,className:a,cssModule:c,children:d,innerRef:_}=s,b=_objectWithoutProperties(s,_excluded$Y),k=pick(b,TransitionPropTypeKeys),j=omit(b,TransitionPropTypeKeys);return jsx(Transition$1,{...k,children:_e=>{const tt=mapToCssModules(classNames(a,i,_e==="entered"&&o),c);return jsx(e,{className:tt,...j,ref:_,children:d})}})}Fade.propTypes=propTypes$10;Fade.defaultProps=defaultProps$$;React.createContext({});propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),propTypes.exports.oneOfType([propTypes.exports.array,propTypes.exports.string]).isRequired,propTypes.exports.func.isRequired;propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),propTypes.exports.node,propTypes.exports.oneOfType([propTypes.exports.array,propTypes.exports.string]),propTypes.exports.bool;propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),propTypes.exports.string.isRequired;propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]);const _excluded$T=["tag","horizontal","isOpen","className","navbar","cssModule","children","innerRef"],propTypes$X=_objectSpread2(_objectSpread2({},Transition$1.propTypes),{},{horizontal:propTypes.exports.bool,isOpen:propTypes.exports.bool,children:propTypes.exports.oneOfType([propTypes.exports.arrayOf(propTypes.exports.node),propTypes.exports.node]),tag:tagPropType,className:propTypes.exports.node,navbar:propTypes.exports.bool,cssModule:propTypes.exports.object,innerRef:propTypes.exports.shape({current:propTypes.exports.object})}),defaultProps$W=_objectSpread2(_objectSpread2({},Transition$1.defaultProps),{},{horizontal:!1,isOpen:!1,appear:!1,enter:!0,exit:!0,tag:"div",timeout:TransitionTimeouts.Collapse}),transitionStatusToClassHash={[TransitionStatuses.ENTERING]:"collapsing",[TransitionStatuses.ENTERED]:"collapse show",[TransitionStatuses.EXITING]:"collapsing",[TransitionStatuses.EXITED]:"collapse"};function getTransitionClass(s){return transitionStatusToClassHash[s]||"collapse"}class Collapse extends react.exports.Component{constructor(e){super(e),this.state={dimension:null},this.nodeRef=e.innerRef||React.createRef(),["onEntering","onEntered","onExit","onExiting","onExited"].forEach(i=>{this[i]=this[i].bind(this)})}onEntering(e,i){const o=this.getNode();this.setState({dimension:this.getDimension(o)}),this.props.onEntering(o,i)}onEntered(e,i){const o=this.getNode();this.setState({dimension:null}),this.props.onEntered(o,i)}onExit(){const e=this.getNode();this.setState({dimension:this.getDimension(e)}),this.props.onExit(e)}onExiting(){const e=this.getNode();this.getDimension(e),this.setState({dimension:0}),this.props.onExiting(e)}onExited(){const e=this.getNode();this.setState({dimension:null}),this.props.onExited(e)}getNode(){return this.nodeRef.current}getDimension(e){return this.props.horizontal?e.scrollWidth:e.scrollHeight}render(){const e=this.props,{tag:i,horizontal:o,isOpen:a,className:c,navbar:d,cssModule:_,children:b,innerRef:k}=e,j=_objectWithoutProperties(e,_excluded$T),{dimension:_e}=this.state,et=pick(j,TransitionPropTypeKeys),tt=omit(j,TransitionPropTypeKeys);return jsx(Transition$1,{...et,in:a,nodeRef:this.nodeRef,onEntering:this.onEntering,onEntered:this.onEntered,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited,children:it=>{let st=getTransitionClass(it);const ot=mapToCssModules(classNames(c,o&&"collapse-horizontal",st,d&&"navbar-collapse"),_),nt=_e===null?null:{[o?"width":"height"]:_e};return jsx(i,{...tt,style:_objectSpread2(_objectSpread2({},tt.style),nt),className:ot,ref:this.nodeRef,children:b})}})}}Collapse.propTypes=propTypes$X;Collapse.defaultProps=defaultProps$W;var Collapse$1=Collapse;propTypes.exports.string.isRequired,propTypes.exports.string,propTypes.exports.node,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]);propTypes.exports.node,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),propTypes.exports.bool;propTypes.exports.bool,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),propTypes.exports.bool,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]);propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.object;const CarouselContext=React.createContext({}),_excluded$G=["in","children","cssModule","slide","tag","className"];class CarouselItem extends React.Component{constructor(e){super(e),this.state={startAnimation:!1},this.onEnter=this.onEnter.bind(this),this.onEntering=this.onEntering.bind(this),this.onExit=this.onExit.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onEnter(e,i){this.setState({startAnimation:!1}),this.props.onEnter(e,i)}onEntering(e,i){const{offsetHeight:o}=e;return this.setState({startAnimation:!0}),this.props.onEntering(e,i),o}onExit(e){this.setState({startAnimation:!1}),this.props.onExit(e)}onExiting(e){this.setState({startAnimation:!0}),e.dispatchEvent(new CustomEvent("slide.bs.carousel")),this.props.onExiting(e)}onExited(e){e.dispatchEvent(new CustomEvent("slid.bs.carousel")),this.props.onExited(e)}render(){const e=this.props,{in:i,children:o,cssModule:a,slide:c,tag:d,className:_}=e,b=_objectWithoutProperties(e,_excluded$G);return jsx(Transition$1,{...b,enter:c,exit:c,in:i,onEnter:this.onEnter,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited,children:k=>{const{direction:j}=this.context,_e=k===TransitionStatuses.ENTERED||k===TransitionStatuses.EXITING,et=(k===TransitionStatuses.ENTERING||k===TransitionStatuses.EXITING)&&this.state.startAnimation&&(j==="end"?"carousel-item-start":"carousel-item-end"),tt=k===TransitionStatuses.ENTERING&&(j==="end"?"carousel-item-next":"carousel-item-prev"),it=mapToCssModules(classNames(_,"carousel-item",_e&&"active",et,tt),a);return jsx(d,{className:it,children:o})}})}}CarouselItem.propTypes=_objectSpread2(_objectSpread2({},Transition$1.propTypes),{},{tag:tagPropType,in:propTypes.exports.bool,cssModule:propTypes.exports.object,children:propTypes.exports.node,slide:propTypes.exports.bool,className:propTypes.exports.string});CarouselItem.defaultProps=_objectSpread2(_objectSpread2({},Transition$1.defaultProps),{},{tag:"div",timeout:TransitionTimeouts.Carousel,slide:!0});CarouselItem.contextType=CarouselContext;var CarouselItem$1=CarouselItem;const SWIPE_THRESHOLD=40,propTypes$K={activeIndex:propTypes.exports.number,next:propTypes.exports.func.isRequired,previous:propTypes.exports.func.isRequired,keyboard:propTypes.exports.bool,pause:propTypes.exports.oneOf(["hover",!1]),ride:propTypes.exports.oneOf(["carousel"]),interval:propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string,propTypes.exports.bool]),children:propTypes.exports.array,mouseEnter:propTypes.exports.func,mouseLeave:propTypes.exports.func,slide:propTypes.exports.bool,dark:propTypes.exports.bool,fade:propTypes.exports.bool,cssModule:propTypes.exports.object,className:propTypes.exports.string,enableTouch:propTypes.exports.bool},propsToOmit$2=Object.keys(propTypes$K),defaultProps$J={interval:5e3,pause:"hover",keyboard:!0,slide:!0,enableTouch:!0,fade:!1};class Carousel extends React.Component{constructor(e){super(e),this.handleKeyPress=this.handleKeyPress.bind(this),this.renderItems=this.renderItems.bind(this),this.hoverStart=this.hoverStart.bind(this),this.hoverEnd=this.hoverEnd.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.touchStartX=0,this.touchStartY=0,this.state={activeIndex:this.props.activeIndex,direction:"end",indicatorClicked:!1}}componentDidMount(){this.props.ride==="carousel"&&this.setInterval(),document.addEventListener("keyup",this.handleKeyPress)}static getDerivedStateFromProps(e,i){let o=null,{activeIndex:a,direction:c,indicatorClicked:d}=i;return e.activeIndex!==a&&(e.activeIndex===a+1?c="end":e.activeIndex===a-1?c="start":e.activeIndex<a?c=d?"start":"end":e.activeIndex!==a&&(c=d?"end":"start"),o={activeIndex:e.activeIndex,direction:c,indicatorClicked:!1}),o}componentDidUpdate(e,i){i.activeIndex!==this.state.activeIndex&&this.setInterval()}componentWillUnmount(){this.clearInterval(),document.removeEventListener("keyup",this.handleKeyPress)}handleKeyPress(e){this.props.keyboard&&(e.keyCode===37?this.props.previous():e.keyCode===39&&this.props.next())}handleTouchStart(e){!this.props.enableTouch||(this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY)}handleTouchEnd(e){if(!this.props.enableTouch)return;const i=e.changedTouches[0].screenX,o=e.changedTouches[0].screenY,a=Math.abs(this.touchStartX-i),c=Math.abs(this.touchStartY-o);a<c||a<SWIPE_THRESHOLD||(i<this.touchStartX?this.props.next():this.props.previous())}getContextValue(){return{direction:this.state.direction}}setInterval(){this.clearInterval(),this.props.interval&&(this.cycleInterval=setInterval(()=>{this.props.next()},parseInt(this.props.interval,10)))}clearInterval(){clearInterval(this.cycleInterval)}hoverStart(...e){this.props.pause==="hover"&&this.clearInterval(),this.props.mouseEnter&&this.props.mouseEnter(...e)}hoverEnd(...e){this.props.pause==="hover"&&this.setInterval(),this.props.mouseLeave&&this.props.mouseLeave(...e)}renderItems(e,i){const{slide:o}=this.props;return jsx("div",{className:i,children:e.map((a,c)=>{const d=c===this.state.activeIndex;return React.cloneElement(a,{in:d,slide:o})})})}render(){const{cssModule:e,slide:i,className:o,dark:a,fade:c}=this.props,d=omit(this.props,propsToOmit$2),_=mapToCssModules(classNames(o,"carousel",c&&"carousel-fade",i&&"slide",a&&"carousel-dark"),e),b=mapToCssModules(classNames("carousel-inner"),e),k=this.props.children.filter(nt=>nt!=null&&typeof nt!="boolean");if(k.every(nt=>nt.type===CarouselItem$1))return jsx("div",{...d,className:_,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,children:jsx(CarouselContext.Provider,{value:this.getContextValue(),children:this.renderItems(k,b)})});if(k[0]instanceof Array){const nt=k[0],rt=k[1],at=k[2];return jsx("div",{...d,className:_,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,children:jsxs(CarouselContext.Provider,{value:this.getContextValue(),children:[this.renderItems(nt,b),rt,at]})})}const _e=k[0],et=nt=>{typeof _e.props.onClickHandler=="function"&&this.setState({indicatorClicked:!0},()=>_e.props.onClickHandler(nt))},tt=React.cloneElement(_e,{onClickHandler:et}),it=k[1],st=k[2],ot=k[3];return jsx("div",{...d,className:_,onMouseEnter:this.hoverStart,onMouseLeave:this.hoverEnd,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,children:jsxs(CarouselContext.Provider,{value:this.getContextValue(),children:[tt,this.renderItems(it,b),st,ot]})})}}Carousel.propTypes=propTypes$K;Carousel.defaultProps=defaultProps$J;var Carousel$1=Carousel;const _excluded$F=["direction","onClickHandler","cssModule","directionText","className"];function CarouselControl(s){const{direction:e,onClickHandler:i,cssModule:o,directionText:a,className:c}=s,d=_objectWithoutProperties(s,_excluded$F),_=mapToCssModules(classNames(c,`carousel-control-${e}`),o),b=mapToCssModules(classNames(`carousel-control-${e}-icon`),o),k=mapToCssModules(classNames("visually-hidden"),o);return jsxs("a",{...d,className:_,style:{cursor:"pointer"},role:"button",tabIndex:"0",onClick:j=>{j.preventDefault(),i()},children:[jsx("span",{className:b,"aria-hidden":"true"}),jsx("span",{className:k,children:a||e})]})}CarouselControl.propTypes={direction:propTypes.exports.oneOf(["prev","next"]).isRequired,onClickHandler:propTypes.exports.func.isRequired,cssModule:propTypes.exports.object,directionText:propTypes.exports.string,className:propTypes.exports.string};const _excluded$E=["items","activeIndex","cssModule","onClickHandler","className"];function CarouselIndicators(s){const{items:e,activeIndex:i,cssModule:o,onClickHandler:a,className:c}=s,d=_objectWithoutProperties(s,_excluded$E),_=mapToCssModules(classNames(c,"carousel-indicators"),o),b=e.map((k,j)=>{const _e=mapToCssModules(classNames({active:i===j}),o);return jsx("button",{"aria-label":k.caption,"data-bs-target":!0,type:"button",onClick:et=>{et.preventDefault(),a(j)},className:_e},`${k.key||Object.values(k).join("")}`)});return jsx("div",{className:_,...d,children:b})}CarouselIndicators.propTypes={activeIndex:propTypes.exports.number.isRequired,className:propTypes.exports.string,cssModule:propTypes.exports.object,items:propTypes.exports.array.isRequired,onClickHandler:propTypes.exports.func.isRequired};function CarouselCaption(s){const{captionHeader:e,captionText:i,cssModule:o,className:a}=s,c=mapToCssModules(classNames(a,"carousel-caption","d-none","d-md-block"),o);return jsxs("div",{className:c,children:[jsx("h3",{children:e}),jsx("p",{children:i})]})}CarouselCaption.propTypes={captionHeader:propTypes.exports.node,captionText:propTypes.exports.node.isRequired,className:propTypes.exports.string,cssModule:propTypes.exports.object};const _excluded$D=["defaultActiveIndex","autoPlay","indicators","controls","items","goToIndex"],propTypes$J={items:propTypes.exports.array.isRequired,indicators:propTypes.exports.bool,controls:propTypes.exports.bool,autoPlay:propTypes.exports.bool,defaultActiveIndex:propTypes.exports.number,activeIndex:propTypes.exports.number,next:propTypes.exports.func,previous:propTypes.exports.func,goToIndex:propTypes.exports.func};class UncontrolledCarousel extends react.exports.Component{constructor(e){super(e),this.animating=!1,this.state={activeIndex:e.defaultActiveIndex||0},this.next=this.next.bind(this),this.previous=this.previous.bind(this),this.goToIndex=this.goToIndex.bind(this),this.onExiting=this.onExiting.bind(this),this.onExited=this.onExited.bind(this)}onExiting(){this.animating=!0}onExited(){this.animating=!1}next(){this.animating||this.setState(e=>({activeIndex:e.activeIndex===this.props.items.length-1?0:e.activeIndex+1}))}previous(){this.animating||this.setState(e=>({activeIndex:e.activeIndex===0?this.props.items.length-1:e.activeIndex-1}))}goToIndex(e){this.animating||this.setState({activeIndex:e})}render(){const e=this.props,{defaultActiveIndex:i,autoPlay:o,indicators:a,controls:c,items:d,goToIndex:_}=e,b=_objectWithoutProperties(e,_excluded$D),{activeIndex:k}=this.state,j=d.map(_e=>{const et=_e.key||_e.src;return jsxs(CarouselItem$1,{onExiting:this.onExiting,onExited:this.onExited,children:[jsx("img",{className:"d-block w-100",src:_e.src,alt:_e.altText}),jsx(CarouselCaption,{captionText:_e.caption,captionHeader:_e.header||_e.caption})]},et)});return jsxs(Carousel$1,{activeIndex:k,next:this.next,previous:this.previous,ride:o?"carousel":void 0,...b,children:[a&&jsx(CarouselIndicators,{items:d,activeIndex:b.activeIndex||k,onClickHandler:_||this.goToIndex}),j,c&&jsx(CarouselControl,{direction:"prev",directionText:"Previous",onClickHandler:b.previous||this.previous}),c&&jsx(CarouselControl,{direction:"next",directionText:"Next",onClickHandler:b.next||this.next})]})}}UncontrolledCarousel.propTypes=propTypes$J;UncontrolledCarousel.defaultProps={controls:!0,indicators:!0,autoPlay:!0};propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;const _excluded$z=["cssModule","children","isOpen","flip","target","offset","fallbackPlacements","placementPrefix","arrowClassName","hideArrow","popperClassName","tag","container","modifiers","strategy","boundariesElement","onClosed","fade","transition","placement"];function noop$2(){}const propTypes$F={children:propTypes.exports.oneOfType([propTypes.exports.node,propTypes.exports.func]).isRequired,popperClassName:propTypes.exports.string,placement:propTypes.exports.string,placementPrefix:propTypes.exports.string,arrowClassName:propTypes.exports.string,hideArrow:propTypes.exports.bool,tag:tagPropType,isOpen:propTypes.exports.bool,cssModule:propTypes.exports.object,offset:propTypes.exports.arrayOf(propTypes.exports.number),fallbackPlacements:propTypes.exports.array,flip:propTypes.exports.bool,container:targetPropType,target:targetPropType.isRequired,modifiers:propTypes.exports.array,strategy:propTypes.exports.string,boundariesElement:propTypes.exports.oneOfType([propTypes.exports.string,DOMElement]),onClosed:propTypes.exports.func,fade:propTypes.exports.bool,transition:propTypes.exports.shape(Fade.propTypes)},defaultProps$F={boundariesElement:"scrollParent",placement:"auto",hideArrow:!1,isOpen:!1,offset:[0,0],flip:!0,container:"body",modifiers:[],onClosed:noop$2,fade:!0,transition:_objectSpread2({},Fade.defaultProps)};class PopperContent extends React.Component{constructor(e){super(e),this.setTargetNode=this.setTargetNode.bind(this),this.getTargetNode=this.getTargetNode.bind(this),this.getRef=this.getRef.bind(this),this.onClosed=this.onClosed.bind(this),this.state={isOpen:e.isOpen}}static getDerivedStateFromProps(e,i){return e.isOpen&&!i.isOpen?{isOpen:e.isOpen}:null}componentDidUpdate(){this._element&&this._element.childNodes&&this._element.childNodes[0]&&this._element.childNodes[0].focus&&this._element.childNodes[0].focus()}onClosed(){this.props.onClosed(),this.setState({isOpen:!1})}getTargetNode(){return this.targetNode}getContainerNode(){return getTarget(this.props.container)}getRef(e){this._element=e}setTargetNode(e){this.targetNode=typeof e=="string"?getTarget(e):e}renderChildren(){const e=this.props,{cssModule:i,children:o,isOpen:a,flip:c,target:d,offset:_,fallbackPlacements:b,placementPrefix:k,arrowClassName:j,hideArrow:_e,popperClassName:et,tag:tt,container:it,modifiers:st,strategy:ot,boundariesElement:nt,onClosed:rt,fade:at,transition:lt,placement:gt}=e,ht=_objectWithoutProperties(e,_excluded$z),ut=mapToCssModules(classNames("arrow",j),i),ct=mapToCssModules(classNames(et,k?`${k}-auto`:""),this.props.cssModule),ft=st.map(_t=>_t.name),pt=[...[{name:"offset",options:{offset:_}},{name:"flip",enabled:c,options:{fallbackPlacements:b}},{name:"preventOverflow",options:{boundary:nt}}].filter(_t=>!ft.includes(_t.name)),...st],mt=_objectSpread2(_objectSpread2(_objectSpread2({},Fade.defaultProps),lt),{},{baseClass:at?lt.baseClass:"",timeout:at?lt.timeout:0});return jsx(Fade,{...mt,...ht,in:a,onExited:this.onClosed,tag:tt,children:jsx(Popper,{referenceElement:this.targetNode,modifiers:pt,placement:gt,strategy:ot,children:({ref:_t,style:Ct,placement:bt,isReferenceHidden:yt,arrowProps:wt,update:Tt})=>jsxs("div",{ref:_t,style:Ct,className:ct,"data-popper-placement":bt,"data-popper-reference-hidden":yt?"true":void 0,children:[typeof o=="function"?o({update:Tt}):o,!_e&&jsx("span",{ref:wt.ref,className:ut,style:wt.style})]})})})}render(){return this.setTargetNode(this.props.target),this.state.isOpen?this.props.container==="inline"?this.renderChildren():ReactDOM.createPortal(jsx("div",{ref:this.getRef,children:this.renderChildren()}),this.getContainerNode()):null}}PopperContent.propTypes=propTypes$F;PopperContent.defaultProps=defaultProps$F;var PopperContent$1=PopperContent;propTypes.exports.object.isRequired;targetPropType.isRequired;const propTypes$E={children:propTypes.exports.oneOfType([propTypes.exports.node,propTypes.exports.func]),placement:propTypes.exports.oneOf(PopperPlacements),target:targetPropType.isRequired,container:targetPropType,isOpen:propTypes.exports.bool,disabled:propTypes.exports.bool,hideArrow:propTypes.exports.bool,boundariesElement:propTypes.exports.oneOfType([propTypes.exports.string,DOMElement]),className:propTypes.exports.string,innerClassName:propTypes.exports.string,arrowClassName:propTypes.exports.string,popperClassName:propTypes.exports.string,cssModule:propTypes.exports.object,toggle:propTypes.exports.func,autohide:propTypes.exports.bool,placementPrefix:propTypes.exports.string,delay:propTypes.exports.oneOfType([propTypes.exports.shape({show:propTypes.exports.number,hide:propTypes.exports.number}),propTypes.exports.number]),modifiers:propTypes.exports.array,strategy:propTypes.exports.string,offset:propTypes.exports.arrayOf(propTypes.exports.number),innerRef:propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.string,propTypes.exports.object]),trigger:propTypes.exports.string,fade:propTypes.exports.bool,flip:propTypes.exports.bool},DEFAULT_DELAYS={show:0,hide:50},defaultProps$E={isOpen:!1,hideArrow:!1,autohide:!1,delay:DEFAULT_DELAYS,toggle:function(){},trigger:"click",fade:!0};function isInDOMSubtree(s,e){return e&&(s===e||e.contains(s))}function isInDOMSubtrees(s,e=[]){return e&&e.length&&e.filter(i=>isInDOMSubtree(s,i))[0]}class TooltipPopoverWrapper extends React.Component{constructor(e){super(e),this._targets=[],this.currentTargetElement=null,this.addTargetEvents=this.addTargetEvents.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.removeTargetEvents=this.removeTargetEvents.bind(this),this.toggle=this.toggle.bind(this),this.showWithDelay=this.showWithDelay.bind(this),this.hideWithDelay=this.hideWithDelay.bind(this),this.onMouseOverTooltipContent=this.onMouseOverTooltipContent.bind(this),this.onMouseLeaveTooltipContent=this.onMouseLeaveTooltipContent.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.onEscKeyDown=this.onEscKeyDown.bind(this),this.getRef=this.getRef.bind(this),this.state={isOpen:e.isOpen},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.updateTarget()}componentWillUnmount(){this._isMounted=!1,this.removeTargetEvents(),this._targets=null,this.clearShowTimeout(),this.clearHideTimeout()}static getDerivedStateFromProps(e,i){return e.isOpen&&!i.isOpen?{isOpen:e.isOpen}:null}handleDocumentClick(e){const i=this.props.trigger.split(" ");i.indexOf("legacy")>-1&&(this.props.isOpen||isInDOMSubtrees(e.target,this._targets))?(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen&&!isInDOMSubtree(e.target,this._popover)?this.hideWithDelay(e):this.props.isOpen||this.showWithDelay(e)):i.indexOf("click")>-1&&isInDOMSubtrees(e.target,this._targets)&&(this._hideTimeout&&this.clearHideTimeout(),this.props.isOpen?this.hideWithDelay(e):this.showWithDelay(e))}onMouseOverTooltipContent(){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._hideTimeout&&this.clearHideTimeout(),this.state.isOpen&&!this.props.isOpen&&this.toggle())}onMouseLeaveTooltipContent(e){this.props.trigger.indexOf("hover")>-1&&!this.props.autohide&&(this._showTimeout&&this.clearShowTimeout(),e.persist(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide")))}onEscKeyDown(e){e.key==="Escape"&&this.hide(e)}getRef(e){const{innerRef:i}=this.props;i&&(typeof i=="function"?i(e):typeof i=="object"&&(i.current=e)),this._popover=e}getDelay(e){const{delay:i}=this.props;return typeof i=="object"?isNaN(i[e])?DEFAULT_DELAYS[e]:i[e]:i}getCurrentTarget(e){if(!e)return null;const i=this._targets.indexOf(e);return i>=0?this._targets[i]:this.getCurrentTarget(e.parentElement)}show(e){if(!this.props.isOpen){if(this.clearShowTimeout(),this.currentTargetElement=e?e.currentTarget||this.getCurrentTarget(e.target):null,e&&e.composedPath&&typeof e.composedPath=="function"){const i=e.composedPath();this.currentTargetElement=i&&i[0]||this.currentTargetElement}this.toggle(e)}}showWithDelay(e){this._hideTimeout&&this.clearHideTimeout(),this._showTimeout=setTimeout(this.show.bind(this,e),this.getDelay("show"))}hide(e){this.props.isOpen&&(this.clearHideTimeout(),this.currentTargetElement=null,this.toggle(e))}hideWithDelay(e){this._showTimeout&&this.clearShowTimeout(),this._hideTimeout=setTimeout(this.hide.bind(this,e),this.getDelay("hide"))}clearShowTimeout(){clearTimeout(this._showTimeout),this._showTimeout=void 0}clearHideTimeout(){clearTimeout(this._hideTimeout),this._hideTimeout=void 0}addEventOnTargets(e,i,o){this._targets.forEach(a=>{a.addEventListener(e,i,o)})}removeEventOnTargets(e,i,o){this._targets.forEach(a=>{a.removeEventListener(e,i,o)})}addTargetEvents(){if(this.props.trigger){let e=this.props.trigger.split(" ");e.indexOf("manual")===-1&&((e.indexOf("click")>-1||e.indexOf("legacy")>-1)&&document.addEventListener("click",this.handleDocumentClick,!0),this._targets&&this._targets.length&&(e.indexOf("hover")>-1&&(this.addEventOnTargets("mouseover",this.showWithDelay,!0),this.addEventOnTargets("mouseout",this.hideWithDelay,!0)),e.indexOf("focus")>-1&&(this.addEventOnTargets("focusin",this.show,!0),this.addEventOnTargets("focusout",this.hide,!0)),this.addEventOnTargets("keydown",this.onEscKeyDown,!0)))}}removeTargetEvents(){this._targets&&(this.removeEventOnTargets("mouseover",this.showWithDelay,!0),this.removeEventOnTargets("mouseout",this.hideWithDelay,!0),this.removeEventOnTargets("keydown",this.onEscKeyDown,!0),this.removeEventOnTargets("focusin",this.show,!0),this.removeEventOnTargets("focusout",this.hide,!0)),document.removeEventListener("click",this.handleDocumentClick,!0)}updateTarget(){const e=getTarget(this.props.target,!0);e!==this._targets&&(this.removeTargetEvents(),this._targets=e?Array.from(e):[],this.currentTargetElement=this.currentTargetElement||this._targets[0],this.addTargetEvents())}toggle(e){return this.props.disabled||!this._isMounted?e&&e.preventDefault():this.props.toggle(e)}render(){this.props.isOpen&&this.updateTarget();const e=this.currentTargetElement||this._targets[0];if(!e)return null;const{className:i,cssModule:o,innerClassName:a,isOpen:c,hideArrow:d,boundariesElement:_,placement:b,placementPrefix:k,arrowClassName:j,popperClassName:_e,container:et,modifiers:tt,strategy:it,offset:st,fade:ot,flip:nt,children:rt}=this.props,at=omit(this.props,Object.keys(propTypes$E)),lt=mapToCssModules(_e,o),gt=mapToCssModules(a,o);return jsx(PopperContent$1,{className:i,target:e,isOpen:c,hideArrow:d,boundariesElement:_,placement:b,placementPrefix:k,arrowClassName:j,popperClassName:lt,container:et,modifiers:tt,strategy:it,offset:st,cssModule:o,fade:ot,flip:nt,children:({update:ht})=>jsx("div",{...at,ref:this.getRef,className:gt,role:"tooltip",onMouseOver:this.onMouseOverTooltipContent,onMouseLeave:this.onMouseLeaveTooltipContent,onKeyDown:this.onEscKeyDown,children:typeof rt=="function"?rt({update:ht}):rt})})}}TooltipPopoverWrapper.propTypes=propTypes$E;TooltipPopoverWrapper.defaultProps=defaultProps$E;var TooltipPopoverWrapper$1=TooltipPopoverWrapper;const defaultProps$D={placement:"right",placementPrefix:"bs-popover",trigger:"click",offset:[0,8]};function Popover(s){const e=classNames("popover","show",s.popperClassName),i=classNames("popover-inner",s.innerClassName);return jsx(TooltipPopoverWrapper$1,{...s,arrowClassName:"popover-arrow",popperClassName:e,innerClassName:i})}Popover.propTypes=propTypes$E;Popover.defaultProps=defaultProps$D;const omitKeys$4=["defaultOpen"];class UncontrolledPopover extends react.exports.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({isOpen:!e.isOpen}))}render(){return jsx(Popover,{isOpen:this.state.isOpen,toggle:this.toggle,...omit(this.props,omitKeys$4)})}}UncontrolledPopover.propTypes=_objectSpread2({defaultOpen:propTypes.exports.bool},Popover.propTypes);propTypes.exports.string,propTypes.exports.object;const _excluded$x=["className","cssModule","tag"],propTypes$C={tag:tagPropType,className:propTypes.exports.string,cssModule:propTypes.exports.object},defaultProps$B={tag:"div"};function PopoverBody(s){const{className:e,cssModule:i,tag:o}=s,a=_objectWithoutProperties(s,_excluded$x),c=mapToCssModules(classNames(e,"popover-body"),i);return jsx(o,{...a,className:c})}PopoverBody.propTypes=propTypes$C;PopoverBody.defaultProps=defaultProps$B;propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]);const propTypes$A={children:propTypes.exports.node.isRequired,node:propTypes.exports.any};class Portal extends React.Component{componentWillUnmount(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null}render(){return canUseDOM?(!this.props.node&&!this.defaultNode&&(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),ReactDOM.createPortal(this.props.children,this.props.node||this.defaultNode)):null}}Portal.propTypes=propTypes$A;var Portal$1=Portal;function noop$1(){}const FadePropTypes$1=propTypes.exports.shape(Fade.propTypes),propTypes$z={autoFocus:propTypes.exports.bool,backdrop:propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.oneOf(["static"])]),backdropClassName:propTypes.exports.string,backdropTransition:FadePropTypes$1,centered:propTypes.exports.bool,children:propTypes.exports.node,contentClassName:propTypes.exports.string,className:propTypes.exports.string,container:targetPropType,cssModule:propTypes.exports.object,external:propTypes.exports.node,fade:propTypes.exports.bool,fullscreen:propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.oneOf(["sm","md","lg","xl"])]),innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),isOpen:propTypes.exports.bool,keyboard:propTypes.exports.bool,labelledBy:propTypes.exports.string,modalClassName:propTypes.exports.string,modalTransition:FadePropTypes$1,onClosed:propTypes.exports.func,onEnter:propTypes.exports.func,onExit:propTypes.exports.func,onOpened:propTypes.exports.func,returnFocusAfterClose:propTypes.exports.bool,role:propTypes.exports.string,scrollable:propTypes.exports.bool,size:propTypes.exports.string,toggle:propTypes.exports.func,trapFocus:propTypes.exports.bool,unmountOnClose:propTypes.exports.bool,wrapClassName:propTypes.exports.string,zIndex:propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string])},propsToOmit$1=Object.keys(propTypes$z),defaultProps$z={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:noop$1,onClosed:noop$1,modalTransition:{timeout:TransitionTimeouts.Modal},backdropTransition:{mountOnEnter:!0,timeout:TransitionTimeouts.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class Modal extends React.Component{constructor(e){super(e),this._element=null,this._originalBodyPadding=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleStaticBackdropAnimation=this.handleStaticBackdropAnimation.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1,showStaticBackdropAnimation:!1}}componentDidMount(){const{isOpen:e,autoFocus:i,onEnter:o}=this.props;e&&(this.init(),this.setState({isOpen:!0}),i&&this.setFocus()),o&&o(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(e,i){if(this.props.isOpen&&!e.isOpen){this.init(),this.setState({isOpen:!0});return}this.props.autoFocus&&this.state.isOpen&&!i.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}handleBackdropClick(e){if(e.target===this._mouseDownElement){e.stopPropagation();const i=this._dialog?this._dialog.parentNode:null;if(i&&e.target===i&&this.props.backdrop==="static"&&this.handleStaticBackdropAnimation(),!this.props.isOpen||this.props.backdrop!==!0)return;i&&e.target===i&&this.props.toggle&&this.props.toggle(e)}}handleTab(e){if(e.which!==9||this.modalIndex<Modal.openCount-1)return;const i=this.getFocusableChildren(),o=i.length;if(o===0)return;const a=this.getFocusedChild();let c=0;for(let d=0;d<o;d+=1)if(i[d]===a){c=d;break}e.shiftKey&&c===0?(e.preventDefault(),i[o-1].focus()):!e.shiftKey&&c===o-1&&(e.preventDefault(),i[0].focus())}handleBackdropMouseDown(e){this._mouseDownElement=e.target}handleEscape(e){this.props.isOpen&&e.keyCode===keyCodes.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):this.props.backdrop==="static"&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))}handleStaticBackdropAnimation(){this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout(()=>{this.setState({showStaticBackdropAnimation:!1})},100)}onOpened(e,i){this.props.onOpened(),(this.props.modalTransition.onEntered||noop$1)(e,i)}onClosed(e){const{unmountOnClose:i}=this.props;this.props.onClosed(),(this.props.modalTransition.onExited||noop$1)(e),i&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&this._dialog.parentNode&&typeof this._dialog.parentNode.focus=="function"&&this._dialog.parentNode.focus()}getFocusableChildren(){return this._element.querySelectorAll(focusableElements.join(", "))}getFocusedChild(){let e;const i=this.getFocusableChildren();try{e=document.activeElement}catch{e=i[0]}return e}trapFocus(e){if(!this.props.trapFocus||!this._element||this._dialog&&this._dialog.parentNode===e.target||this.modalIndex<Modal.openCount-1)return;const i=this.getFocusableChildren();for(let o=0;o<i.length;o+=1)if(i[o]===e.target)return;i.length>0&&(e.preventDefault(),e.stopPropagation(),i[0].focus())}init(){try{this._triggeringElement=document.activeElement}catch{this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=getTarget(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=getOriginalBodyPadding(),Modal.openCount<1&&(Modal.originalBodyOverflow=window.getComputedStyle(document.body).overflow),conditionallyUpdateScrollbar(),Modal.openCount===0&&(document.body.className=classNames(document.body.className,mapToCssModules("modal-open",this.props.cssModule)),document.body.style.overflow="hidden"),this.modalIndex=Modal.openCount,Modal.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:e}=this.props;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){if(Modal.openCount<=1){const e=mapToCssModules("modal-open",this.props.cssModule),i=new RegExp(`(^| )${e}( |$)`);document.body.className=document.body.className.replace(i," ").trim(),document.body.style.overflow=Modal.originalBodyOverflow}this.manageFocusAfterClose(),Modal.openCount=Math.max(0,Modal.openCount-1),setScrollbarWidth(this._originalBodyPadding)}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}renderModalDialog(){const e=omit(this.props,propsToOmit$1),i="modal-dialog";return jsx("div",{...e,className:mapToCssModules(classNames(i,this.props.className,{[`modal-${this.props.size}`]:this.props.size,[`${i}-centered`]:this.props.centered,[`${i}-scrollable`]:this.props.scrollable,"modal-fullscreen":this.props.fullscreen===!0,[`modal-fullscreen-${this.props.fullscreen}-down`]:typeof this.props.fullscreen=="string"}),this.props.cssModule),role:"document",ref:o=>{this._dialog=o},children:jsx("div",{className:mapToCssModules(classNames("modal-content",this.props.contentClassName),this.props.cssModule),children:this.props.children})})}render(){const{unmountOnClose:e}=this.props;if(!!this._element&&(this.state.isOpen||!e)){const i=!!this._element&&!this.state.isOpen&&!e;this._element.style.display=i?"none":"block";const{wrapClassName:o,modalClassName:a,backdropClassName:c,cssModule:d,isOpen:_,backdrop:b,role:k,labelledBy:j,external:_e,innerRef:et}=this.props,tt={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":j,role:k,tabIndex:"-1"},it=this.props.fade,st=_objectSpread2(_objectSpread2(_objectSpread2({},Fade.defaultProps),this.props.modalTransition),{},{baseClass:it?this.props.modalTransition.baseClass:"",timeout:it?this.props.modalTransition.timeout:0}),ot=_objectSpread2(_objectSpread2(_objectSpread2({},Fade.defaultProps),this.props.backdropTransition),{},{baseClass:it?this.props.backdropTransition.baseClass:"",timeout:it?this.props.backdropTransition.timeout:0}),nt=b&&(it?jsx(Fade,{...ot,in:_&&!!b,cssModule:d,className:mapToCssModules(classNames("modal-backdrop",c),d)}):jsx("div",{className:mapToCssModules(classNames("modal-backdrop","show",c),d)}));return jsx(Portal$1,{node:this._element,children:jsxs("div",{className:mapToCssModules(o),children:[jsxs(Fade,{...tt,...st,in:_,onEntered:this.onOpened,onExited:this.onClosed,cssModule:d,className:mapToCssModules(classNames("modal",a,this.state.showStaticBackdropAnimation&&"modal-static"),d),innerRef:et,children:[_e,this.renderModalDialog()]}),nt]})})}return null}}Modal.propTypes=propTypes$z;Modal.defaultProps=defaultProps$z;Modal.openCount=0;Modal.originalBodyOverflow=null;propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.object,propTypes.exports.func;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;const defaultProps$v={placement:"top",autohide:!0,placementPrefix:"bs-tooltip",trigger:"hover focus"};function Tooltip(s){const e=classNames("tooltip","show",s.popperClassName),i=classNames("tooltip-inner",s.innerClassName);return jsx(TooltipPopoverWrapper$1,{...s,arrowClassName:"tooltip-arrow",popperClassName:e,innerClassName:i})}Tooltip.propTypes=propTypes$E;Tooltip.defaultProps=defaultProps$v;propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.func,propTypes.exports.string,propTypes.exports.object]),propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]),propTypes.exports.string,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string]),propTypes.exports.bool;const _excluded$q=["className","cssModule","tag","innerRef"],propTypes$t={children:propTypes.exports.node,tag:tagPropType,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),className:propTypes.exports.string,cssModule:propTypes.exports.object},defaultProps$s={tag:"form"};class Form extends react.exports.Component{constructor(e){super(e),this.getRef=this.getRef.bind(this),this.submit=this.submit.bind(this)}getRef(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}submit(){this.ref&&this.ref.submit()}render(){const e=this.props,{className:i,cssModule:o,tag:a,innerRef:c}=e,d=_objectWithoutProperties(e,_excluded$q),_=mapToCssModules(i,o);return jsx(a,{...d,ref:c,className:_})}}Form.propTypes=propTypes$t;Form.defaultProps=defaultProps$s;propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.bool;propTypes.exports.node,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object;propTypes.exports.node,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object;const _excluded$m=["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"],propTypes$p={children:propTypes.exports.node,type:propTypes.exports.string,size:propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string]),bsSize:propTypes.exports.string,valid:propTypes.exports.bool,invalid:propTypes.exports.bool,tag:tagPropType,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),plaintext:propTypes.exports.bool,addon:propTypes.exports.bool,className:propTypes.exports.string,cssModule:propTypes.exports.object},defaultProps$o={type:"text"};class Input extends React.Component{constructor(e){super(e),this.getRef=this.getRef.bind(this),this.focus=this.focus.bind(this)}getRef(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e}focus(){this.ref&&this.ref.focus()}render(){let e=this.props,{className:i,cssModule:o,type:a,bsSize:c,valid:d,invalid:_,tag:b,addon:k,plaintext:j,innerRef:_e}=e,et=_objectWithoutProperties(e,_excluded$m);const tt=["switch","radio","checkbox"].indexOf(a)>-1,it=/\D/g,st=a==="textarea",ot=a==="select",nt=a==="range";let rt=b||(ot||st?a:"input"),at="form-control";j?(at=`${at}-plaintext`,rt=b||"input"):nt?at="form-range":ot?at="form-select":tt&&(k?at=null:at="form-check-input"),et.size&&it.test(et.size)&&(warnOnce(`Please use the prop "bsSize" instead of the "size" to bootstrap's input sizing.`),c=et.size,delete et.size);const lt=mapToCssModules(classNames(i,_&&"is-invalid",d&&"is-valid",c?ot?`form-select-${c}`:`form-control-${c}`:!1,at),o);return(rt==="input"||b&&typeof b=="function")&&(et.type=a==="switch"?"checkbox":a),et.children&&!(j||a==="select"||typeof rt!="string"||rt==="select")&&(warnOnce(`Input with a type of "${a}" cannot have children. Please use "value"/"defaultValue" instead.`),delete et.children),jsx(rt,{...et,ref:_e,className:lt,"aria-invalid":_})}}Input.propTypes=propTypes$p;Input.defaultProps=defaultProps$o;propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.string;propTypes.exports.string,propTypes.exports.object;const stringOrNumberProp=propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string]),columnProps=propTypes.exports.oneOfType([propTypes.exports.bool,propTypes.exports.string,propTypes.exports.number,propTypes.exports.shape({size:stringOrNumberProp,order:stringOrNumberProp,offset:stringOrNumberProp})]);propTypes.exports.node,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.array;propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool;function noop$3(){}const FadePropTypes=propTypes.exports.shape(Fade.propTypes),propTypes$k={autoFocus:propTypes.exports.bool,backdrop:propTypes.exports.bool,backdropClassName:propTypes.exports.string,backdropTransition:FadePropTypes,children:propTypes.exports.node,className:propTypes.exports.string,container:targetPropType,cssModule:propTypes.exports.object,direction:propTypes.exports.oneOf(["start","end","bottom","top"]),fade:propTypes.exports.bool,innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),isOpen:propTypes.exports.bool,keyboard:propTypes.exports.bool,labelledBy:propTypes.exports.string,offcanvasTransition:FadePropTypes,onClosed:propTypes.exports.func,onEnter:propTypes.exports.func,onExit:propTypes.exports.func,style:propTypes.exports.object,onOpened:propTypes.exports.func,returnFocusAfterClose:propTypes.exports.bool,role:propTypes.exports.string,scrollable:propTypes.exports.bool,toggle:propTypes.exports.func,trapFocus:propTypes.exports.bool,unmountOnClose:propTypes.exports.bool,zIndex:propTypes.exports.oneOfType([propTypes.exports.number,propTypes.exports.string])},propsToOmit=Object.keys(propTypes$k),defaultProps$k={isOpen:!1,autoFocus:!0,direction:"start",scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:noop$3,onClosed:noop$3,offcanvasTransition:{timeout:TransitionTimeouts.Offcanvas},backdropTransition:{mountOnEnter:!0,timeout:TransitionTimeouts.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body",trapFocus:!1};class Offcanvas extends React.Component{constructor(e){super(e),this._element=null,this._originalBodyPadding=null,this.getFocusableChildren=this.getFocusableChildren.bind(this),this.handleBackdropClick=this.handleBackdropClick.bind(this),this.handleBackdropMouseDown=this.handleBackdropMouseDown.bind(this),this.handleEscape=this.handleEscape.bind(this),this.handleTab=this.handleTab.bind(this),this.onOpened=this.onOpened.bind(this),this.onClosed=this.onClosed.bind(this),this.manageFocusAfterClose=this.manageFocusAfterClose.bind(this),this.clearBackdropAnimationTimeout=this.clearBackdropAnimationTimeout.bind(this),this.trapFocus=this.trapFocus.bind(this),this.state={isOpen:!1}}componentDidMount(){const{isOpen:e,autoFocus:i,onEnter:o}=this.props;e&&(this.init(),this.setState({isOpen:!0}),i&&this.setFocus()),o&&o(),document.addEventListener("focus",this.trapFocus,!0),this._isMounted=!0}componentDidUpdate(e,i){if(this.props.isOpen&&!e.isOpen){this.init(),this.setState({isOpen:!0});return}this.props.autoFocus&&this.state.isOpen&&!i.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)}componentWillUnmount(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),document.removeEventListener("focus",this.trapFocus,!0),this._isMounted=!1}handleBackdropClick(e){if(e.target===this._mouseDownElement){e.stopPropagation();const i=this._backdrop;if(!this.props.isOpen||this.props.backdrop!==!0)return;i&&e.target===i&&this.props.toggle&&this.props.toggle(e)}}handleTab(e){if(e.which!==9||this.offcanvasIndex<Offcanvas.openCount-1)return;const i=this.getFocusableChildren(),o=i.length;if(o===0)return;const a=this.getFocusedChild();let c=0;for(let d=0;d<o;d+=1)if(i[d]===a){c=d;break}e.shiftKey&&c===0?(e.preventDefault(),i[o-1].focus()):!e.shiftKey&&c===o-1&&(e.preventDefault(),i[0].focus())}handleBackdropMouseDown(e){this._mouseDownElement=e.target}handleEscape(e){this.props.isOpen&&e.keyCode===keyCodes.esc&&this.props.toggle&&this.props.keyboard&&(e.preventDefault(),e.stopPropagation(),this.props.toggle(e))}onOpened(e,i){this.props.onOpened(),(this.props.offcanvasTransition.onEntered||noop$3)(e,i)}onClosed(e){const{unmountOnClose:i}=this.props;this.props.onClosed(),(this.props.offcanvasTransition.onExited||noop$3)(e),i&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})}setFocus(){this._dialog&&typeof this._dialog.focus=="function"&&this._dialog.focus()}getFocusableChildren(){return this._element.querySelectorAll(focusableElements.join(", "))}getFocusedChild(){let e;const i=this.getFocusableChildren();try{e=document.activeElement}catch{e=i[0]}return e}trapFocus(e){if(!this.props.trapFocus||!this._element||this._dialog===e.target||this.offcanvasIndex<Offcanvas.openCount-1)return;const i=this.getFocusableChildren();for(let o=0;o<i.length;o+=1)if(i[o]===e.target)return;i.length>0&&(e.preventDefault(),e.stopPropagation(),i[0].focus())}init(){try{this._triggeringElement=document.activeElement}catch{this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=getTarget(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=getOriginalBodyPadding(),conditionallyUpdateScrollbar(),Offcanvas.openCount===0&&this.props.backdrop&&!this.props.scrollable&&(document.body.style.overflow="hidden"),this.offcanvasIndex=Offcanvas.openCount,Offcanvas.openCount+=1}destroy(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()}manageFocusAfterClose(){if(this._triggeringElement){const{returnFocusAfterClose:e}=this.props;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}}close(){this.manageFocusAfterClose(),Offcanvas.openCount=Math.max(0,Offcanvas.openCount-1),document.body.style.overflow=null,setScrollbarWidth(this._originalBodyPadding)}clearBackdropAnimationTimeout(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)}render(){const{direction:e,unmountOnClose:i}=this.props;if(!!this._element&&(this.state.isOpen||!i)){const o=!!this._element&&!this.state.isOpen&&!i;this._element.style.display=o?"none":"block";const{className:a,backdropClassName:c,cssModule:d,isOpen:_,backdrop:b,role:k,labelledBy:j,style:_e}=this.props,et={onKeyUp:this.handleEscape,onKeyDown:this.handleTab,"aria-labelledby":j,role:k,tabIndex:"-1"},tt=this.props.fade,it=_objectSpread2(_objectSpread2(_objectSpread2({},Fade.defaultProps),this.props.offcanvasTransition),{},{baseClass:tt?this.props.offcanvasTransition.baseClass:"",timeout:tt?this.props.offcanvasTransition.timeout:0}),st=_objectSpread2(_objectSpread2(_objectSpread2({},Fade.defaultProps),this.props.backdropTransition),{},{baseClass:tt?this.props.backdropTransition.baseClass:"",timeout:tt?this.props.backdropTransition.timeout:0}),ot=b&&(tt?jsx(Fade,{...st,in:_&&!!b,innerRef:rt=>{this._backdrop=rt},cssModule:d,className:mapToCssModules(classNames("offcanvas-backdrop",c),d),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown}):jsx("div",{className:mapToCssModules(classNames("offcanvas-backdrop","show",c),d),onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown})),nt=omit(this.props,propsToOmit);return jsxs(Portal$1,{node:this._element,children:[jsx(Fade,{...nt,...et,...it,in:_,onEntered:this.onOpened,onExited:this.onClosed,cssModule:d,className:mapToCssModules(classNames("offcanvas",a,`offcanvas-${e}`),d),innerRef:rt=>{this._dialog=rt},style:_objectSpread2(_objectSpread2({},_e),{},{visibility:_?"visible":"hidden"}),children:this.props.children}),ot]})}return null}}Offcanvas.propTypes=propTypes$k;Offcanvas.defaultProps=defaultProps$k;Offcanvas.openCount=0;propTypes.exports.string,propTypes.exports.object;propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.object,propTypes.exports.func;propTypes.exports.node,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.string;propTypes.exports.bool,propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.bool;const TabContext=React.createContext({}),propTypes$e={tag:tagPropType,activeTab:propTypes.exports.any,className:propTypes.exports.string,cssModule:propTypes.exports.object},defaultProps$e={tag:"div"};class TabContent extends react.exports.Component{static getDerivedStateFromProps(e,i){return i.activeTab!==e.activeTab?{activeTab:e.activeTab}:null}constructor(e){super(e),this.state={activeTab:this.props.activeTab}}render(){const{className:e,cssModule:i,tag:o}=this.props,a=omit(this.props,Object.keys(propTypes$e)),c=mapToCssModules(classNames("tab-content",e),i);return jsx(TabContext.Provider,{value:{activeTabId:this.state.activeTab},children:jsx(o,{...a,className:c})})}}TabContent.propTypes=propTypes$e;TabContent.defaultProps=defaultProps$e;propTypes.exports.string,propTypes.exports.object,propTypes.exports.any;propTypes.exports.node,propTypes.exports.string,propTypes.exports.string,propTypes.exports.string,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]),propTypes.exports.bool,propTypes.exports.func,propTypes.exports.shape(Fade.propTypes);_objectSpread2(_objectSpread2({},Fade.defaultProps),{},{unmountOnExit:!0});propTypes.exports.node,propTypes.exports.string,propTypes.exports.object,propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.shape(Fade.propTypes),propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]);_objectSpread2(_objectSpread2({},Fade.defaultProps),{},{unmountOnExit:!0});propTypes.exports.string,propTypes.exports.object,propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.string,propTypes.exports.func]);propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.node]),propTypes.exports.func,propTypes.exports.string,propTypes.exports.object,propTypes.exports.node,propTypes.exports.string,propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),propTypes.exports.object,propTypes.exports.string;propTypes.exports.bool,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object,propTypes.exports.string,propTypes.exports.bool;propTypes.exports.string,propTypes.exports.object;propTypes.exports.string,propTypes.exports.object;const _excluded$4=["className","cssModule","tag","type"],propTypes$5={className:propTypes.exports.string,cssModule:propTypes.exports.object,tag:tagPropType,type:propTypes.exports.string},defaultProps$5={tag:"ul"},List$1=react.exports.forwardRef((s,e)=>{const{className:i,cssModule:o,tag:a,type:c}=s,d=_objectWithoutProperties(s,_excluded$4),_=mapToCssModules(classNames(i,c?`list-${c}`:!1),o);return jsx(a,{...d,className:_,ref:e})});List$1.name="List";List$1.propTypes=propTypes$5;List$1.defaultProps=defaultProps$5;const _excluded$3=["className","cssModule","tag"],propTypes$4={className:propTypes.exports.string,cssModule:propTypes.exports.object,tag:tagPropType},defaultProps$4={tag:"li"},ListInlineItem=react.exports.forwardRef((s,e)=>{const{className:i,cssModule:o,tag:a}=s,c=_objectWithoutProperties(s,_excluded$3),d=mapToCssModules(classNames(i,"list-inline-item"),o);return jsx(a,{...c,className:d,ref:e})});ListInlineItem.name="ListInlineItem";ListInlineItem.propTypes=propTypes$4;ListInlineItem.defaultProps=defaultProps$4;const omitKeys$3=["defaultOpen"];class UncontrolledButtonDropdown extends react.exports.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({isOpen:!e.isOpen}))}render(){return jsx(ButtonDropdown,{isOpen:this.state.isOpen,toggle:this.toggle,...omit(this.props,omitKeys$3)})}}UncontrolledButtonDropdown.propTypes=_objectSpread2({defaultOpen:propTypes.exports.bool},ButtonDropdown.propTypes);const omitKeys$2=["toggleEvents","defaultOpen"],propTypes$3={defaultOpen:propTypes.exports.bool,toggler:propTypes.exports.string.isRequired,toggleEvents:propTypes.exports.arrayOf(propTypes.exports.string)},defaultProps$3={toggleEvents:defaultToggleEvents};class UncontrolledCollapse extends react.exports.Component{constructor(e){super(e),this.togglers=null,this.removeEventListeners=null,this.toggle=this.toggle.bind(this),this.state={isOpen:e.defaultOpen||!1}}componentDidMount(){this.togglers=findDOMElements(this.props.toggler),this.togglers.length&&(this.removeEventListeners=addMultipleEventListeners(this.togglers,this.toggle,this.props.toggleEvents))}componentWillUnmount(){this.togglers.length&&this.removeEventListeners&&this.removeEventListeners()}toggle(e){this.setState(({isOpen:i})=>({isOpen:!i})),e.preventDefault()}render(){return jsx(Collapse$1,{isOpen:this.state.isOpen,...omit(this.props,omitKeys$2)})}}UncontrolledCollapse.propTypes=propTypes$3;UncontrolledCollapse.defaultProps=defaultProps$3;const omitKeys$1=["defaultOpen"];class UncontrolledDropdown extends react.exports.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(e){this.setState(i=>({isOpen:!i.isOpen}),()=>{this.props.onToggle&&this.props.onToggle(e,this.state.isOpen)})}render(){return jsx(Dropdown$1,{isOpen:this.state.isOpen,toggle:this.toggle,...omit(this.props,omitKeys$1)})}}UncontrolledDropdown.propTypes=_objectSpread2({defaultOpen:propTypes.exports.bool,onToggle:propTypes.exports.func},Dropdown$1.propTypes);const omitKeys=["defaultOpen"];class UncontrolledTooltip extends react.exports.Component{constructor(e){super(e),this.state={isOpen:e.defaultOpen||!1},this.toggle=this.toggle.bind(this)}toggle(){this.setState(e=>({isOpen:!e.isOpen}))}render(){return jsx(Tooltip,{isOpen:this.state.isOpen,toggle:this.toggle,...omit(this.props,omitKeys)})}}UncontrolledTooltip.propTypes=_objectSpread2({defaultOpen:propTypes.exports.bool},Tooltip.propTypes);propTypes.exports.oneOf(["border","grow"]),propTypes.exports.oneOf(["sm"]),propTypes.exports.oneOf(["primary","secondary","success","danger","warning","info","light","dark"]),propTypes.exports.string,propTypes.exports.object,propTypes.exports.string;_objectSpread2(_objectSpread2({},Col.propTypes),{},{color:propTypes.exports.string,tag:tagPropType,animation:propTypes.exports.oneOf(["glow","wave"]),innerRef:propTypes.exports.oneOfType([propTypes.exports.object,propTypes.exports.func,propTypes.exports.string]),size:propTypes.exports.oneOf(["lg","sm","xs"])});propTypes.exports.string,propTypes.exports.string,propTypes.exports.bool,propTypes.exports.string,propTypes.exports.object;(()=>{if(typeof window!="object"||typeof window.CustomEvent=="function")return;const s=(e,i)=>{i=i||{bubbles:!1,cancelable:!1,detail:null};let o=document.createEvent("CustomEvent");return o.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),o};window.CustomEvent=s})();(()=>{if(typeof Object.values=="function")return;Object.values=e=>Object.keys(e).map(i=>e[i])})();var BinaryOp=(s=>(s.Plus="+",s.Minus="-",s.Mul="*",s.Div="/",s.Power="^",s.Eq="==",s.NotEq="!=",s.GT=">",s.GTE=">=",s.LT="<",s.LTE="<=",s))(BinaryOp||{});const toBinaryOp=s=>{switch(s){case"+":return"+";case"-":return"-";case"*":return"*";case"/":return"/";case"^":return"^";case"==":return"==";case"!=":return"!=";case">":return">";case">=":return">=";case"<":return"<";case"<=":return"<=";default:throw new Error(`Unexpected binary op ${s}`)}},BINARYOPS=["==","!=","+","-","*","/","^",">",">=","<","<="].map(s=>s.toString()),OPS=Array.from(new Set(BINARYOPS.join("").split("")));class Peekable{constructor(e){Ot(this,"item");this.iterator=e}peek(){return this.item?this.item:(this.item=this.iterator.next(),this.item)}eof(){var i;return(i=this.peek().done)!=null?i:!1}next(){if(this.item){const e=this.item;return this.item=null,e}return this.iterator.next()}[Symbol.iterator](){return this}}class CharStream{constructor(e){Ot(this,"pos",0);Ot(this,"col",0);Ot(this,"line",1);this.input=e}*stream(){for(let e of this.input)e===`
`?(this.col=0,this.line+=1):this.col+=1,this.pos+=1,yield e}peek(){return this.input.charAt(this.pos)}eof(){return this.peek()===void 0}error(e){throw Error(`Error: ${e} at line: ${this.line} col: ${this.col}`)}}var TokenType=(s=>(s.Punc="PUNC",s.Num="NUM",s.Str="STRING",s.Var="VAR",s.Kw="KW",s.Op="OP",s))(TokenType||{});const WHITESPACE=[" ",`
`,"	"],ALPHABET="abcdefghijklmnopqrstuvwxyz".split(""),NUMBER="1234567890".split(""),VARSTART=[...ALPHABET,"_"],IDENTIFIER=[...VARSTART,...NUMBER],PUNCT="{}[]();:,".split(""),COMMENT=["#"],KEYWORDS=["if","then","else","lambda","true","false","let"],includes=(...s)=>e=>s.indexOf(e)>=0,excludes=(...s)=>e=>!includes(...s)(e),isPunctuation=includes(...PUNCT),isWhitespace$1=includes(...WHITESPACE);includes(...ALPHABET);const isVarstart=includes(...VARSTART),isNumber$2=includes(...NUMBER),isOperator=includes(...OPS),isAssign$1=includes("="),isBinaryOperator=includes(...BINARYOPS),isQuote$1=includes('"'),isComment=includes(...COMMENT),isKeword=includes(...KEYWORDS);class TokenStream{constructor(e){Ot(this,"charStream");Ot(this,"charIterator");Ot(this,"error",e=>this.charStream.error(e));this.input=e,this.charStream=new CharStream(e),this.charIterator=new Peekable(this.charStream.stream())}takeWhile(...e){const i=includes(...e);let o="";for(;!this.charIterator.eof()&&i(this.charIterator.peek().value);)o+=this.charIterator.next().value;return o}takeUntil(...e){const i=excludes(...e);let o="";for(;!this.charIterator.eof()&&i(this.charIterator.peek().value);)o+=this.charIterator.next().value;return o}skipWhitespace(){this.takeWhile(...WHITESPACE)}skipLineRemainder(){this.takeUntil(`
`)}takeAsString(){this.charIterator.next();const e=this.takeUntil('"',`
`),i=this.charIterator.next();return isQuote$1(i.value)||this.error("Unterminated string"),e.replace(/\"/g,"")}takeAsOperator(){const e=this.takeWhile(...OPS);return!isBinaryOperator(e)&&!isAssign$1(e)&&this.error(`Unknown operator ${e}`),e}takeAsIdentifier(){return this.takeWhile(...IDENTIFIER)}takeAsNumber(){const e=this.takeWhile(...NUMBER),{value:i}=this.charIterator.peek();return isVarstart(i)&&this.error(`Unknown token ${e}${i}..`),Number(e)}*stream(){for(;!this.charIterator.eof();){const{value:e}=this.charIterator.peek();if(isComment(e))this.skipLineRemainder();else if(isWhitespace$1(e))this.skipWhitespace();else if(isPunctuation(e))yield{type:"PUNC",value:this.charIterator.next().value};else if(isNumber$2(e))yield{type:"NUM",value:this.takeAsNumber()};else if(isQuote$1(e))yield{type:"STRING",value:this.takeAsString()};else if(isOperator(e))yield{type:"OP",value:this.takeAsOperator()};else if(isVarstart(e)){const i=this.takeAsIdentifier();isKeword(i)?yield{type:"KW",value:i}:yield{type:"VAR",value:i}}else this.error(`Unknown token ${e}`)}}}var AstNode=(s=>(s.Num="Num",s.Str="Str",s.Bool="Bool",s.Var="Var",s.Lambda="Lambda",s.Call="Call",s.If="If",s.Assign="Assign",s.Binary="Binary",s.Prog="Prog",s))(AstNode||{});const isTokenType=s=>e=>s===e.type,isTokenVal=s=>e=>s===e.value,isToken=s=>e=>i=>isTokenType(s)(i)&&isTokenVal(e)(i),isOp=isTokenType(TokenType.Op);isTokenType(TokenType.Punc);isToken(TokenType.Punc)(";");const isOpenParen=isToken(TokenType.Punc)("(");isToken(TokenType.Punc)(")");const isOpenCurly=isToken(TokenType.Punc)("{");isToken(TokenType.Punc)("}");const isVar=isTokenType(TokenType.Var),isString$2=isTokenType(TokenType.Str),isNum=isTokenType(TokenType.Num),isIf=isToken(TokenType.Kw)("if"),isLambda=isToken(TokenType.Kw)("lambda"),isDeclare=isToken(TokenType.Kw)("let"),isTrue=isToken(TokenType.Kw)("true"),isFalse=isToken(TokenType.Kw)("false"),isAssign=isToken(TokenType.Op)("=");class Parser$1{constructor(e){Ot(this,"rawTokenStream");Ot(this,"tokenStream");Ot(this,"parseNum",e=>({type:"Num",value:e}));Ot(this,"parseStr",e=>({type:"Str",value:e}));Ot(this,"parseVar",e=>({type:"Var",value:e}));Ot(this,"parseBool",e=>({type:"Bool",value:e}));Ot(this,"parseVarName",()=>{const e=this.peek();if(isVar(e)){const i=this.next().value;return this.parseVar(i)}return this.error(`${e.value} is not a variable name`)});Ot(this,"skipKw",e=>this.skipToken(TokenType.Kw,e));Ot(this,"skipIf",()=>this.skipKw("if"));Ot(this,"skipLambda",()=>this.skipKw("lambda"));Ot(this,"skipLet",()=>this.skipKw("let"));Ot(this,"skipThen",()=>this.skipOptionalToken(TokenType.Kw,"then"));Ot(this,"skipElse",()=>this.skipKw("else"));Ot(this,"skipPunc",e=>this.skipToken(TokenType.Punc,e));Ot(this,"skipOp",e=>this.skipToken(TokenType.Op,e));Ot(this,"skipSemicol",()=>this.skipPunc(";"));Ot(this,"skipCol",()=>this.skipPunc(":"));Ot(this,"eof",()=>this.tokenStream.eof());Ot(this,"next",()=>this.tokenStream.next().value);Ot(this,"peek",()=>this.tokenStream.peek().value);Ot(this,"error",e=>this.rawTokenStream.error(`${e} around "${this.peek().value}"`));this.rawTokenStream=new TokenStream(e),this.tokenStream=new Peekable(this.rawTokenStream.stream())}parseItem(){const e=this.peek();if(isIf(e))return this.parseIf();if(isOpenParen(e))return this.parseParenthesis();if(isOpenCurly(e))return this.parseProg();if(isLambda(e))return this.parseLambda();if(isDeclare(e))return this.parseDeclare();const i=this.next();return isVar(i)?this.maybeCall(()=>this.parseVar(i.value)):isFalse(i)?this.parseBool(!1):isTrue(i)?this.parseBool(!0):isString$2(i)?this.parseStr(i.value):isNum(i)?this.parseNum(i.value):this.error(`Unexpected token "${i.value}"`)}parseParenthesis(){this.skipPunc("(");const e=this.parseExpression();return this.skipPunc(")"),e}parseDeclare(){this.skipLet();const e=this.parseVarName();this.skipOp("=");const i=this.parseExpression();return{left:e,right:i,declare:!0,type:"Assign"}}parseProg(){const e=this.delimited("{","}",";",()=>this.parseExpression());return e.length===1?e[0]:{type:"Prog",body:e}}parseLambda(){this.skipLambda();const e=this.delimited("(",")",",",()=>this.parseVarName());this.skipCol();const i=this.parseExpression();return{type:"Lambda",vars:e,body:i}}parseIf(){this.skipIf();const e=this.parseExpression();this.skipThen();const i=this.parseExpression();this.skipElse();const o=this.parseExpression();return{type:"If",cond:e,then:i,else:o}}parseCall(e){return{type:"Call",func:e,args:this.delimited("(",")",",",()=>this.parseExpression())}}maybeCall(e){const i=e(),o=this.peek();return!this.eof()&&isOpenParen(o)?this.parseCall(i):i}maybeBinary(e){const i=this.peek();if(!this.eof()&&isOp(i)){const o=this.next(),a=isAssign(o),c=this.maybeBinary(this.parseItem());return a?{declare:!1,type:"Assign",left:e,right:c}:{type:"Binary",op:toBinaryOp(o.value.toString()),left:e,right:c}}return e}parseExpression(){return this.maybeCall(()=>this.maybeBinary(this.parseItem()))}delimited(e,i,o,a){const c=isToken(TokenType.Punc)(i),d=[];let _=!0;for(this.skipPunc(e);!this.eof();){if(c(this.peek())){this.skipPunc(i);break}if(_?_=!1:this.skipPunc(o),c(this.peek())){this.skipPunc(i);break}d.push(a())}return d}parseTopLevel(){const e=[];for(;!this.tokenStream.eof();)e.push(this.parseExpression()),this.tokenStream.eof()||this.skipSemicol();return{type:"Prog",body:e}}skipOptionalToken(e,i){const o=this.peek();isToken(e)(i)(o)&&this.skipToken(e,i)}skipToken(e,i){const o=this.next();isToken(e)(i)(o)||this.error(`${i} expected`)}}const allButLast=s=>{const[,...e]=[...s].reverse();return[...e].reverse()},last=s=>{if(s.length){const[e]=[...s].reverse();return e}return null},compileNum=s=>`${s.value}`,compileStr=s=>`"${s.value}"`,compileBool=s=>s.value?"true":"false",compileVar=s=>`${s.value}`,compileLastInBlock=s=>s===null?"":s.type==AstNode.Assign?`${compile$1(s)}
 ${compileLastInBlock(s.left)}`:`return ${compile$1(s)};`,compileSelfInvokingFunc=s=>{let e="";s.body.length===1&&(e=compileLastInBlock(s.body[0]));const i=allButLast(s.body),o=last(s.body);return e=`${i.map(a=>`${compile$1(a)};
`).join("")}${compileLastInBlock(o)}`,`(function(){ ${e} }())`},compileAssign=s=>s.declare?`var ${compile$1(s.left)} = ${compile$1(s.right)}`:`${compile$1(s.left)} = ${compile$1(s.right)}`,compileBinary=s=>{switch(s.op){case BinaryOp.Power:return`Math.pow(${compile$1(s.left)}, ${compile$1(s.right)})`;case BinaryOp.Eq:return`${compile$1(s.left)} === ${compile$1(s.right)}`;case BinaryOp.NotEq:return`${compile$1(s.left)} !== ${compile$1(s.right)}`;default:return`${compile$1(s.left)} ${s.op} ${compile$1(s.right)}`}},compileIf=s=>`(${compile$1(s.cond)}) ? ${compile$1(s.then)} : ${compile$1(s.else)}`,compileLambda=s=>`function (${s.vars.map(compileVar).join(",")}) {${compileLambdaBody(s.body)}}`,compileLambdaBody=s=>s.type===AstNode.Prog?compile$1(s):`return ${compile$1(s)};`,compileCall=s=>`${compile$1(s.func)}(${s.args.map(compile$1).join(",")})`,compile$1=s=>{switch(s.type){case AstNode.Num:return compileNum(s);case AstNode.Str:return compileStr(s);case AstNode.Bool:return compileBool(s);case AstNode.Var:return compileVar(s);case AstNode.Prog:return compileSelfInvokingFunc(s);case AstNode.Assign:return compileAssign(s);case AstNode.Binary:return compileBinary(s);case AstNode.If:return compileIf(s);case AstNode.Lambda:return compileLambda(s);case AstNode.Call:return compileCall(s)}};var reactTreeview$1={exports:{}};(function(s,e){Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(tt){for(var it=1;it<arguments.length;it++){var st=arguments[it];for(var ot in st)Object.prototype.hasOwnProperty.call(st,ot)&&(tt[ot]=st[ot])}return tt},o=function(){function tt(it,st){for(var ot=0;ot<st.length;ot++){var nt=st[ot];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(it,nt.key,nt)}}return function(it,st,ot){return st&&tt(it.prototype,st),ot&&tt(it,ot),it}}(),a=function(it,st,ot){var nt=!0;e:for(;nt;){var rt=it,at=st,lt=ot;nt=!1,rt===null&&(rt=Function.prototype);var gt=Object.getOwnPropertyDescriptor(rt,at);if(gt===void 0){var ht=Object.getPrototypeOf(rt);if(ht===null)return;it=ht,st=at,ot=lt,nt=!0,gt=ht=void 0;continue e}else{if("value"in gt)return gt.value;var ut=gt.get;return ut===void 0?void 0:ut.call(lt)}}};function c(tt){return tt&&tt.__esModule?tt:{default:tt}}function d(tt,it){var st={};for(var ot in tt)it.indexOf(ot)>=0||!Object.prototype.hasOwnProperty.call(tt,ot)||(st[ot]=tt[ot]);return st}function _(tt,it){if(!(tt instanceof it))throw new TypeError("Cannot call a class as a function")}function b(tt,it){if(typeof it!="function"&&it!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof it);tt.prototype=Object.create(it&&it.prototype,{constructor:{value:tt,enumerable:!1,writable:!0,configurable:!0}}),it&&(Object.setPrototypeOf?Object.setPrototypeOf(tt,it):tt.__proto__=it)}var k=react.exports,j=c(k),_e=propTypes.exports;c(_e);var et=function(tt){b(it,tt);function it(st){_(this,it),a(Object.getPrototypeOf(it.prototype),"constructor",this).call(this,st),this.state={collapsed:st.defaultCollapsed},this.handleClick=this.handleClick.bind(this)}return o(it,[{key:"handleClick",value:function(){if(this.setState({collapsed:!this.state.collapsed}),this.props.onClick){var ot;(ot=this.props).onClick.apply(ot,arguments)}}},{key:"render",value:function(){var ot=this.props,nt=ot.collapsed,rt=nt===void 0?this.state.collapsed:nt,at=ot.className,lt=at===void 0?"":at,gt=ot.itemClassName,ht=gt===void 0?"":gt,ut=ot.treeViewClassName,ct=ut===void 0?"":ut,ft=ot.childrenClassName,dt=ft===void 0?"":ft,pt=ot.nodeLabel,mt=ot.children;ot.defaultCollapsed;var _t=d(ot,["collapsed","className","itemClassName","treeViewClassName","childrenClassName","nodeLabel","children","defaultCollapsed"]),Ct="tree-view_arrow",bt="tree-view_children";rt&&(Ct+=" tree-view_arrow-collapsed",bt+=" tree-view_children-collapsed");var yt=j.default.createElement("div",i({},_t,{className:lt+" "+Ct,onClick:this.handleClick}));return j.default.createElement("div",{className:"tree-view "+ct},j.default.createElement("div",{className:"tree-view_item "+ht},yt,pt),j.default.createElement("div",{className:bt+" "+dt},rt?null:mt))}}]),it}(j.default.PureComponent);e.default=et,s.exports=e.default})(reactTreeview$1,reactTreeview$1.exports);const TreeView=getDefaultExportFromCjs(reactTreeview$1.exports),astNode=s=>{const e=Math.random().toString();switch(s.type){case AstNode.Bool:case AstNode.Str:case AstNode.Num:case AstNode.Var:return jsx(AstTerminalNode,{node:s,id:e},e);case AstNode.Prog:return jsx(AstProgNode,{node:s,id:e},e);case AstNode.Lambda:return jsx(AstLambdaNode,{node:s,id:e},e);case AstNode.If:return jsx(AstIfNode,{node:s,id:e},e);case AstNode.Call:return jsx(AstCallNode,{node:s,id:e},e);case AstNode.Binary:case AstNode.Assign:return jsx(AstBinaryNode,{node:s,id:e},e)}},AstTerminalNode=({id:s,node:e})=>{const i=`${e.type}: ${e.value}`;return jsx(TreeView,{nodeLabel:i},s)},AstBinaryNode=({id:s,node:e})=>{let i;switch(e.type){case AstNode.Assign:i=e.declare?"Declare (let)":"Assign (=)";break;case AstNode.Binary:i=`Op (${e.op})`;break}return jsxs(TreeView,{nodeLabel:i,children:[astNode(e.left),astNode(e.right)]},s)},AstCallNode=({id:s,node:e})=>jsxs(TreeView,{nodeLabel:e.type,children:[astNode(e.func),e.args.map(astNode)]},s),AstProgNode=({id:s,node:e})=>jsx(TreeView,{nodeLabel:e.type,children:e.body.map(astNode)},s),AstIfNode=({id:s,node:e})=>jsxs(TreeView,{nodeLabel:e.type,children:[astNode(e.cond),astNode(e.then),astNode(e.else)]},s),AstLambdaNode=({id:s,node:e})=>jsxs(TreeView,{nodeLabel:e.type,children:[jsx(TreeView,{nodeLabel:"args",children:e.vars.map(astNode)}),jsx(TreeView,{nodeLabel:"body",children:astNode(e.body)})]},s),AstViewer=({ast:s,error:e})=>e?jsx("pre",{children:e}):jsx("div",{className:"top-tree-view",children:astNode(s)});var js={exports:{}},src={},javascript={exports:{}},beautifier$2={},output={},hasRequiredOutput;function requireOutput(){if(hasRequiredOutput)return output;hasRequiredOutput=1;function s(o){this.__parent=o,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}s.prototype.clone_empty=function(){var o=new s(this.__parent);return o.set_indent(this.__indent_count,this.__alignment_count),o},s.prototype.item=function(o){return o<0?this.__items[this.__items.length+o]:this.__items[o]},s.prototype.has_match=function(o){for(var a=this.__items.length-1;a>=0;a--)if(this.__items[a].match(o))return!0;return!1},s.prototype.set_indent=function(o,a){this.is_empty()&&(this.__indent_count=o||0,this.__alignment_count=a||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},s.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},s.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},s.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var o=this.__parent.current_line;return o.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),o.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),o.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,o.__items[0]===" "&&(o.__items.splice(0,1),o.__character_count-=1),!0}return!1},s.prototype.is_empty=function(){return this.__items.length===0},s.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},s.prototype.push=function(o){this.__items.push(o);var a=o.lastIndexOf(`
`);a!==-1?this.__character_count=o.length-a:this.__character_count+=o.length},s.prototype.pop=function(){var o=null;return this.is_empty()||(o=this.__items.pop(),this.__character_count-=o.length),o},s.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},s.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},s.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},s.prototype.toString=function(){var o="";return this.is_empty()?this.__parent.indent_empty_lines&&(o=this.__parent.get_indent_string(this.__indent_count)):(o=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),o+=this.__items.join("")),o};function e(o,a){this.__cache=[""],this.__indent_size=o.indent_size,this.__indent_string=o.indent_char,o.indent_with_tabs||(this.__indent_string=new Array(o.indent_size+1).join(o.indent_char)),a=a||"",o.indent_level>0&&(a=new Array(o.indent_level+1).join(this.__indent_string)),this.__base_string=a,this.__base_string_length=a.length}e.prototype.get_indent_size=function(o,a){var c=this.__base_string_length;return a=a||0,o<0&&(c=0),c+=o*this.__indent_size,c+=a,c},e.prototype.get_indent_string=function(o,a){var c=this.__base_string;return a=a||0,o<0&&(o=0,c=""),a+=o*this.__indent_size,this.__ensure_cache(a),c+=this.__cache[a],c},e.prototype.__ensure_cache=function(o){for(;o>=this.__cache.length;)this.__add_column()},e.prototype.__add_column=function(){var o=this.__cache.length,a=0,c="";this.__indent_size&&o>=this.__indent_size&&(a=Math.floor(o/this.__indent_size),o-=a*this.__indent_size,c=new Array(a+1).join(this.__indent_string)),o&&(c+=new Array(o+1).join(" ")),this.__cache.push(c)};function i(o,a){this.__indent_cache=new e(o,a),this.raw=!1,this._end_with_newline=o.end_with_newline,this.indent_size=o.indent_size,this.wrap_line_length=o.wrap_line_length,this.indent_empty_lines=o.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new s(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return i.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},i.prototype.get_line_number=function(){return this.__lines.length},i.prototype.get_indent_string=function(o,a){return this.__indent_cache.get_indent_string(o,a)},i.prototype.get_indent_size=function(o,a){return this.__indent_cache.get_indent_size(o,a)},i.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},i.prototype.add_new_line=function(o){return this.is_empty()||!o&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},i.prototype.get_code=function(o){this.trim(!0);var a=this.current_line.pop();a&&(a[a.length-1]===`
`&&(a=a.replace(/\n+$/g,"")),this.current_line.push(a)),this._end_with_newline&&this.__add_outputline();var c=this.__lines.join(`
`);return o!==`
`&&(c=c.replace(/[\n]/g,o)),c},i.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},i.prototype.set_indent=function(o,a){return o=o||0,a=a||0,this.next_line.set_indent(o,a),this.__lines.length>1?(this.current_line.set_indent(o,a),!0):(this.current_line.set_indent(),!1)},i.prototype.add_raw_token=function(o){for(var a=0;a<o.newlines;a++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(o.whitespace_before),this.current_line.push(o.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},i.prototype.add_token=function(o){this.__add_space_before_token(),this.current_line.push(o),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},i.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},i.prototype.remove_indent=function(o){for(var a=this.__lines.length;o<a;)this.__lines[o]._remove_indent(),o++;this.current_line._remove_wrap_indent()},i.prototype.trim=function(o){for(o=o===void 0?!1:o,this.current_line.trim();o&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},i.prototype.just_added_newline=function(){return this.current_line.is_empty()},i.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},i.prototype.ensure_empty_line_above=function(o,a){for(var c=this.__lines.length-2;c>=0;){var d=this.__lines[c];if(d.is_empty())break;if(d.item(0).indexOf(o)!==0&&d.item(-1)!==a){this.__lines.splice(c+1,0,new s(this)),this.previous_line=this.__lines[this.__lines.length-2];break}c--}},output.Output=i,output}var token={},hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function s(e,i,o,a){this.type=e,this.text=i,this.comments_before=null,this.newlines=o||0,this.whitespace_before=a||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return token.Token=s,token}var acorn={},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(s){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",a="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",c="(?:\\\\u[0-9a-fA-F]{4}|["+e+o+"])",d="(?:\\\\u[0-9a-fA-F]{4}|["+i+o+a+"])*";s.identifier=new RegExp(c+d,"g"),s.identifierStart=new RegExp(c),s.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+i+o+a+"])+"),s.newline=/[\n\r\u2028\u2029]/,s.lineBreak=new RegExp(`\r
|`+s.newline.source),s.allLineBreaks=new RegExp(s.lineBreak.source,"g")}(acorn)),acorn}var options$3={},options$2={},hasRequiredOptions$3;function requireOptions$3(){if(hasRequiredOptions$3)return options$2;hasRequiredOptions$3=1;function s(o,a){this.raw_options=e(o,a),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}s.prototype._get_array=function(o,a){var c=this.raw_options[o],d=a||[];return typeof c=="object"?c!==null&&typeof c.concat=="function"&&(d=c.concat()):typeof c=="string"&&(d=c.split(/[^a-zA-Z0-9_\/\-]+/)),d},s.prototype._get_boolean=function(o,a){var c=this.raw_options[o],d=c===void 0?!!a:!!c;return d},s.prototype._get_characters=function(o,a){var c=this.raw_options[o],d=a||"";return typeof c=="string"&&(d=c.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),d},s.prototype._get_number=function(o,a){var c=this.raw_options[o];a=parseInt(a,10),isNaN(a)&&(a=0);var d=parseInt(c,10);return isNaN(d)&&(d=a),d},s.prototype._get_selection=function(o,a,c){var d=this._get_selection_list(o,a,c);if(d.length!==1)throw new Error("Invalid Option Value: The option '"+o+`' can only be one of the following values:
`+a+`
You passed in: '`+this.raw_options[o]+"'");return d[0]},s.prototype._get_selection_list=function(o,a,c){if(!a||a.length===0)throw new Error("Selection list cannot be empty.");if(c=c||[a[0]],!this._is_valid_selection(c,a))throw new Error("Invalid Default Value!");var d=this._get_array(o,c);if(!this._is_valid_selection(d,a))throw new Error("Invalid Option Value: The option '"+o+`' can contain only the following values:
`+a+`
You passed in: '`+this.raw_options[o]+"'");return d},s.prototype._is_valid_selection=function(o,a){return o.length&&a.length&&!o.some(function(c){return a.indexOf(c)===-1})};function e(o,a){var c={};o=i(o);var d;for(d in o)d!==a&&(c[d]=o[d]);if(a&&o[a])for(d in o[a])c[d]=o[a][d];return c}function i(o){var a={},c;for(c in o){var d=c.replace(/-/g,"_");a[d]=o[c]}return a}return options$2.Options=s,options$2.normalizeOpts=i,options$2.mergeOpts=e,options$2}var hasRequiredOptions$2;function requireOptions$2(){if(hasRequiredOptions$2)return options$3;hasRequiredOptions$2=1;var s=requireOptions$3().Options,e=["before-newline","after-newline","preserve-newline"];function i(o){s.call(this,o,"js");var a=this.raw_options.brace_style||null;a==="expand-strict"?this.raw_options.brace_style="expand":a==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var c=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var d=0;d<c.length;d++)c[d]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=c[d];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",e),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return i.prototype=new s,options$3.Options=i,options$3}var tokenizer$2={},inputscanner={},hasRequiredInputscanner;function requireInputscanner(){if(hasRequiredInputscanner)return inputscanner;hasRequiredInputscanner=1;var s=RegExp.prototype.hasOwnProperty("sticky");function e(i){this.__input=i||"",this.__input_length=this.__input.length,this.__position=0}return e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){this.__position>0&&(this.__position-=1)},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var i=null;return this.hasNext()&&(i=this.__input.charAt(this.__position),this.__position+=1),i},e.prototype.peek=function(i){var o=null;return i=i||0,i+=this.__position,i>=0&&i<this.__input_length&&(o=this.__input.charAt(i)),o},e.prototype.__match=function(i,o){i.lastIndex=o;var a=i.exec(this.__input);return a&&!(s&&i.sticky)&&a.index!==o&&(a=null),a},e.prototype.test=function(i,o){return o=o||0,o+=this.__position,o>=0&&o<this.__input_length?!!this.__match(i,o):!1},e.prototype.testChar=function(i,o){var a=this.peek(o);return i.lastIndex=0,a!==null&&i.test(a)},e.prototype.match=function(i){var o=this.__match(i,this.__position);return o?this.__position+=o[0].length:o=null,o},e.prototype.read=function(i,o,a){var c="",d;return i&&(d=this.match(i),d&&(c+=d[0])),o&&(d||!i)&&(c+=this.readUntil(o,a)),c},e.prototype.readUntil=function(i,o){var a="",c=this.__position;i.lastIndex=this.__position;var d=i.exec(this.__input);return d?(c=d.index,o&&(c+=d[0].length)):c=this.__input_length,a=this.__input.substring(this.__position,c),this.__position=c,a},e.prototype.readUntilAfter=function(i){return this.readUntil(i,!0)},e.prototype.get_regexp=function(i,o){var a=null,c="g";return o&&s&&(c="y"),typeof i=="string"&&i!==""?a=new RegExp(i,c):i&&(a=new RegExp(i.source,c)),a},e.prototype.get_literal_regexp=function(i){return RegExp(i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(i){var o=this.__position,a=this.readUntilAfter(i);return this.__position=o,a},e.prototype.lookBack=function(i){var o=this.__position-1;return o>=i.length&&this.__input.substring(o-i.length,o).toLowerCase()===i},inputscanner.InputScanner=e,inputscanner}var tokenizer$1={},tokenstream={},hasRequiredTokenstream;function requireTokenstream(){if(hasRequiredTokenstream)return tokenstream;hasRequiredTokenstream=1;function s(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}return s.prototype.restart=function(){this.__position=0},s.prototype.isEmpty=function(){return this.__tokens_length===0},s.prototype.hasNext=function(){return this.__position<this.__tokens_length},s.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},s.prototype.peek=function(e){var i=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(i=this.__tokens[e]),i},s.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},tokenstream.TokenStream=s,tokenstream}var whitespacepattern={},pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1;function s(e,i){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,i&&(this._starting_pattern=this._input.get_regexp(i._starting_pattern,!0),this._match_pattern=this._input.get_regexp(i._match_pattern,!0),this._until_pattern=this._input.get_regexp(i._until_pattern),this._until_after=i._until_after)}return s.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},s.prototype.read_match=function(){return this._input.match(this._match_pattern)},s.prototype.until_after=function(e){var i=this._create();return i._until_after=!0,i._until_pattern=this._input.get_regexp(e),i._update(),i},s.prototype.until=function(e){var i=this._create();return i._until_after=!1,i._until_pattern=this._input.get_regexp(e),i._update(),i},s.prototype.starting_with=function(e){var i=this._create();return i._starting_pattern=this._input.get_regexp(e,!0),i._update(),i},s.prototype.matching=function(e){var i=this._create();return i._match_pattern=this._input.get_regexp(e,!0),i._update(),i},s.prototype._create=function(){return new s(this._input,this)},s.prototype._update=function(){},pattern.Pattern=s,pattern}var hasRequiredWhitespacepattern;function requireWhitespacepattern(){if(hasRequiredWhitespacepattern)return whitespacepattern;hasRequiredWhitespacepattern=1;var s=requirePattern().Pattern;function e(i,o){s.call(this,i,o),o?this._line_regexp=this._input.get_regexp(o._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return e.prototype=new s,e.prototype.__set_whitespace_patterns=function(i,o){i+="\\t ",o+="\\n\\r",this._match_pattern=this._input.get_regexp("["+i+o+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+o+"]")},e.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var i=this._input.read(this._match_pattern);if(i===" ")this.whitespace_before_token=" ";else if(i){var o=this.__split(this._newline_regexp,i);this.newline_count=o.length-1,this.whitespace_before_token=o[this.newline_count]}return i},e.prototype.matching=function(i,o){var a=this._create();return a.__set_whitespace_patterns(i,o),a._update(),a},e.prototype._create=function(){return new e(this._input,this)},e.prototype.__split=function(i,o){i.lastIndex=0;for(var a=0,c=[],d=i.exec(o);d;)c.push(o.substring(a,d.index)),a=d.index+d[0].length,d=i.exec(o);return a<o.length?c.push(o.substring(a,o.length)):c.push(""),c},whitespacepattern.WhitespacePattern=e,whitespacepattern}var hasRequiredTokenizer$2;function requireTokenizer$2(){if(hasRequiredTokenizer$2)return tokenizer$1;hasRequiredTokenizer$2=1;var s=requireInputscanner().InputScanner,e=requireToken().Token,i=requireTokenstream().TokenStream,o=requireWhitespacepattern().WhitespacePattern,a={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},c=function(d,_){this._input=new s(d),this._options=_||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new o(this._input)};return c.prototype.tokenize=function(){this._input.restart(),this.__tokens=new i,this._reset();for(var d,_=new e(a.START,""),b=null,k=[],j=new i;_.type!==a.EOF;){for(d=this._get_next_token(_,b);this._is_comment(d);)j.add(d),d=this._get_next_token(_,b);j.isEmpty()||(d.comments_before=j,j=new i),d.parent=b,this._is_opening(d)?(k.push(b),b=d):b&&this._is_closing(d,b)&&(d.opened=b,b.closed=d,b=k.pop(),d.parent=b),d.previous=_,_.next=d,this.__tokens.add(d),_=d}return this.__tokens},c.prototype._is_first_token=function(){return this.__tokens.isEmpty()},c.prototype._reset=function(){},c.prototype._get_next_token=function(d,_){this._readWhitespace();var b=this._input.read(/.+/g);return b?this._create_token(a.RAW,b):this._create_token(a.EOF,"")},c.prototype._is_comment=function(d){return!1},c.prototype._is_opening=function(d){return!1},c.prototype._is_closing=function(d,_){return!1},c.prototype._create_token=function(d,_){var b=new e(d,_,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return b},c.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},tokenizer$1.Tokenizer=c,tokenizer$1.TOKEN=a,tokenizer$1}var directives={},hasRequiredDirectives;function requireDirectives(){if(hasRequiredDirectives)return directives;hasRequiredDirectives=1;function s(e,i){e=typeof e=="string"?e:e.source,i=typeof i=="string"?i:i.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+i,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+i,"g")}return s.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var i={};this.__directive_pattern.lastIndex=0;for(var o=this.__directive_pattern.exec(e);o;)i[o[1]]=o[2],o=this.__directive_pattern.exec(e);return i},s.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},directives.Directives=s,directives}var templatablepattern={},hasRequiredTemplatablepattern;function requireTemplatablepattern(){if(hasRequiredTemplatablepattern)return templatablepattern;hasRequiredTemplatablepattern=1;var s=requirePattern().Pattern,e={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function i(o,a){s.call(this,o,a),this.__template_pattern=null,this._disabled=Object.assign({},e),this._excluded=Object.assign({},e),a&&(this.__template_pattern=this._input.get_regexp(a.__template_pattern),this._excluded=Object.assign(this._excluded,a._excluded),this._disabled=Object.assign(this._disabled,a._disabled));var c=new s(o);this.__patterns={handlebars_comment:c.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:c.starting_with(/{{{/).until_after(/}}}/),handlebars:c.starting_with(/{{/).until_after(/}}/),php:c.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:c.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:c.starting_with(/{%/).until_after(/%}/),django_value:c.starting_with(/{{/).until_after(/}}/),django_comment:c.starting_with(/{#/).until_after(/#}/),smarty:c.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:c.starting_with(/{\*/).until_after(/\*}/),smarty_literal:c.starting_with(/{literal}/).until_after(/{\/literal}/)}}return i.prototype=new s,i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){this.__set_templated_pattern()},i.prototype.disable=function(o){var a=this._create();return a._disabled[o]=!0,a._update(),a},i.prototype.read_options=function(o){var a=this._create();for(var c in e)a._disabled[c]=o.templating.indexOf(c)===-1;return a._update(),a},i.prototype.exclude=function(o){var a=this._create();return a._excluded[o]=!0,a._update(),a},i.prototype.read=function(){var o="";this._match_pattern?o=this._input.read(this._starting_pattern):o=this._input.read(this._starting_pattern,this.__template_pattern);for(var a=this._read_template();a;)this._match_pattern?a+=this._input.read(this._match_pattern):a+=this._input.readUntil(this.__template_pattern),o+=a,a=this._read_template();return this._until_after&&(o+=this._input.readUntilAfter(this._until_pattern)),o},i.prototype.__set_templated_pattern=function(){var o=[];this._disabled.php||o.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||o.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||o.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(o.push(this.__patterns.django._starting_pattern.source),o.push(this.__patterns.django_value._starting_pattern.source),o.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||o.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&o.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+o.join("|")+")")},i.prototype._read_template=function(){var o="",a=this._input.peek();if(a==="<"){var c=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&c==="?"&&(o=o||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&c==="%"&&(o=o||this.__patterns.erb.read())}else a==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(o=o||this.__patterns.handlebars_comment.read(),o=o||this.__patterns.handlebars_unescaped.read(),o=o||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(o=o||this.__patterns.django_value.read()),this._excluded.django||(o=o||this.__patterns.django_comment.read(),o=o||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(o=o||this.__patterns.smarty_comment.read(),o=o||this.__patterns.smarty_literal.read(),o=o||this.__patterns.smarty.read()));return o},templatablepattern.TemplatablePattern=i,templatablepattern}var hasRequiredTokenizer$1;function requireTokenizer$1(){if(hasRequiredTokenizer$1)return tokenizer$2;hasRequiredTokenizer$1=1;var s=requireInputscanner().InputScanner,e=requireTokenizer$2().Tokenizer,i=requireTokenizer$2().TOKEN,o=requireDirectives().Directives,a=requireAcorn(),c=requirePattern().Pattern,d=requireTemplatablepattern().TemplatablePattern;function _(ht,ut){return ut.indexOf(ht)!==-1}var b={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},k=new o(/\/\*/,/\*\//),j=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,_e=/[0-9]/,et=/[^\d\.]/,tt=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),it=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";it=it.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),it="\\?\\.(?!\\d) "+it,it=it.replace(/ /g,"|");var st=new RegExp(it),ot="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),nt=ot.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),rt=new RegExp("^(?:"+nt.join("|")+")$"),at,lt=function(ht,ut){e.call(this,ht,ut),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var ct=new c(this._input),ft=new d(this._input).read_options(this._options);this.__patterns={template:ft,identifier:ft.starting_with(a.identifier).matching(a.identifierMatch),number:ct.matching(j),punct:ct.matching(st),comment:ct.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:ct.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:ct.matching(/<!--/),html_comment_end:ct.matching(/-->/),include:ct.starting_with(/#include/).until_after(a.lineBreak),shebang:ct.starting_with(/#!/).until_after(a.lineBreak),xml:ct.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:ft.until(/['\\\n\r\u2028\u2029]/),double_quote:ft.until(/["\\\n\r\u2028\u2029]/),template_text:ft.until(/[`\\$]/),template_expression:ft.until(/[`}\\]/)}};lt.prototype=new e,lt.prototype._is_comment=function(ht){return ht.type===b.COMMENT||ht.type===b.BLOCK_COMMENT||ht.type===b.UNKNOWN},lt.prototype._is_opening=function(ht){return ht.type===b.START_BLOCK||ht.type===b.START_EXPR},lt.prototype._is_closing=function(ht,ut){return(ht.type===b.END_BLOCK||ht.type===b.END_EXPR)&&ut&&(ht.text==="]"&&ut.text==="["||ht.text===")"&&ut.text==="("||ht.text==="}"&&ut.text==="{")},lt.prototype._reset=function(){at=!1},lt.prototype._get_next_token=function(ht,ut){var ct=null;this._readWhitespace();var ft=this._input.peek();return ft===null?this._create_token(b.EOF,""):(ct=ct||this._read_non_javascript(ft),ct=ct||this._read_string(ft),ct=ct||this._read_word(ht),ct=ct||this._read_singles(ft),ct=ct||this._read_comment(ft),ct=ct||this._read_regexp(ft,ht),ct=ct||this._read_xml(ft,ht),ct=ct||this._read_punctuation(),ct=ct||this._create_token(b.UNKNOWN,this._input.next()),ct)},lt.prototype._read_word=function(ht){var ut;if(ut=this.__patterns.identifier.read(),ut!=="")return ut=ut.replace(a.allLineBreaks,`
`),!(ht.type===b.DOT||ht.type===b.RESERVED&&(ht.text==="set"||ht.text==="get"))&&rt.test(ut)?(ut==="in"||ut==="of")&&(ht.type===b.WORD||ht.type===b.STRING)?this._create_token(b.OPERATOR,ut):this._create_token(b.RESERVED,ut):this._create_token(b.WORD,ut);if(ut=this.__patterns.number.read(),ut!=="")return this._create_token(b.WORD,ut)},lt.prototype._read_singles=function(ht){var ut=null;return ht==="("||ht==="["?ut=this._create_token(b.START_EXPR,ht):ht===")"||ht==="]"?ut=this._create_token(b.END_EXPR,ht):ht==="{"?ut=this._create_token(b.START_BLOCK,ht):ht==="}"?ut=this._create_token(b.END_BLOCK,ht):ht===";"?ut=this._create_token(b.SEMICOLON,ht):ht==="."&&et.test(this._input.peek(1))?ut=this._create_token(b.DOT,ht):ht===","&&(ut=this._create_token(b.COMMA,ht)),ut&&this._input.next(),ut},lt.prototype._read_punctuation=function(){var ht=this.__patterns.punct.read();if(ht!=="")return ht==="="?this._create_token(b.EQUALS,ht):ht==="?."?this._create_token(b.DOT,ht):this._create_token(b.OPERATOR,ht)},lt.prototype._read_non_javascript=function(ht){var ut="";if(ht==="#"){if(this._is_first_token()&&(ut=this.__patterns.shebang.read(),ut))return this._create_token(b.UNKNOWN,ut.trim()+`
`);if(ut=this.__patterns.include.read(),ut)return this._create_token(b.UNKNOWN,ut.trim()+`
`);ht=this._input.next();var ct="#";if(this._input.hasNext()&&this._input.testChar(_e)){do ht=this._input.next(),ct+=ht;while(this._input.hasNext()&&ht!=="#"&&ht!=="=");return ht==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(ct+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(ct+="{}",this._input.next(),this._input.next())),this._create_token(b.WORD,ct)}this._input.back()}else if(ht==="<"&&this._is_first_token()){if(ut=this.__patterns.html_comment_start.read(),ut){for(;this._input.hasNext()&&!this._input.testChar(a.newline);)ut+=this._input.next();return at=!0,this._create_token(b.COMMENT,ut)}}else if(at&&ht==="-"&&(ut=this.__patterns.html_comment_end.read(),ut))return at=!1,this._create_token(b.COMMENT,ut);return null},lt.prototype._read_comment=function(ht){var ut=null;if(ht==="/"){var ct="";if(this._input.peek(1)==="*"){ct=this.__patterns.block_comment.read();var ft=k.get_directives(ct);ft&&ft.ignore==="start"&&(ct+=k.readIgnored(this._input)),ct=ct.replace(a.allLineBreaks,`
`),ut=this._create_token(b.BLOCK_COMMENT,ct),ut.directives=ft}else this._input.peek(1)==="/"&&(ct=this.__patterns.comment.read(),ut=this._create_token(b.COMMENT,ct))}return ut},lt.prototype._read_string=function(ht){if(ht==="`"||ht==="'"||ht==='"'){var ut=this._input.next();return this.has_char_escapes=!1,ht==="`"?ut+=this._read_string_recursive("`",!0,"${"):ut+=this._read_string_recursive(ht),this.has_char_escapes&&this._options.unescape_strings&&(ut=gt(ut)),this._input.peek()===ht&&(ut+=this._input.next()),ut=ut.replace(a.allLineBreaks,`
`),this._create_token(b.STRING,ut)}return null},lt.prototype._allow_regexp_or_xml=function(ht){return ht.type===b.RESERVED&&_(ht.text,["return","case","throw","else","do","typeof","yield"])||ht.type===b.END_EXPR&&ht.text===")"&&ht.opened.previous.type===b.RESERVED&&_(ht.opened.previous.text,["if","while","for"])||_(ht.type,[b.COMMENT,b.START_EXPR,b.START_BLOCK,b.START,b.END_BLOCK,b.OPERATOR,b.EQUALS,b.EOF,b.SEMICOLON,b.COMMA])},lt.prototype._read_regexp=function(ht,ut){if(ht==="/"&&this._allow_regexp_or_xml(ut)){for(var ct=this._input.next(),ft=!1,dt=!1;this._input.hasNext()&&(ft||dt||this._input.peek()!==ht)&&!this._input.testChar(a.newline);)ct+=this._input.peek(),ft?ft=!1:(ft=this._input.peek()==="\\",this._input.peek()==="["?dt=!0:this._input.peek()==="]"&&(dt=!1)),this._input.next();return this._input.peek()===ht&&(ct+=this._input.next(),ct+=this._input.read(a.identifier)),this._create_token(b.STRING,ct)}return null},lt.prototype._read_xml=function(ht,ut){if(this._options.e4x&&ht==="<"&&this._allow_regexp_or_xml(ut)){var ct="",ft=this.__patterns.xml.read_match();if(ft){for(var dt=ft[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),pt=dt.indexOf("{")===0,mt=0;ft;){var _t=!!ft[1],Ct=ft[2],bt=!!ft[ft.length-1]||Ct.slice(0,8)==="![CDATA[";if(!bt&&(Ct===dt||pt&&Ct.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(_t?--mt:++mt),ct+=ft[0],mt<=0)break;ft=this.__patterns.xml.read_match()}return ft||(ct+=this._input.match(/[\s\S]*/g)[0]),ct=ct.replace(a.allLineBreaks,`
`),this._create_token(b.STRING,ct)}}return null};function gt(ht){for(var ut="",ct=0,ft=new s(ht),dt=null;ft.hasNext();)if(dt=ft.match(/([\s]|[^\\]|\\\\)+/g),dt&&(ut+=dt[0]),ft.peek()==="\\"){if(ft.next(),ft.peek()==="x")dt=ft.match(/x([0-9A-Fa-f]{2})/g);else if(ft.peek()==="u")dt=ft.match(/u([0-9A-Fa-f]{4})/g);else{ut+="\\",ft.hasNext()&&(ut+=ft.next());continue}if(!dt||(ct=parseInt(dt[1],16),ct>126&&ct<=255&&dt[0].indexOf("x")===0))return ht;if(ct>=0&&ct<32){ut+="\\"+dt[0];continue}else ct===34||ct===39||ct===92?ut+="\\"+String.fromCharCode(ct):ut+=String.fromCharCode(ct)}return ut}return lt.prototype._read_string_recursive=function(ht,ut,ct){var ft,dt;ht==="'"?dt=this.__patterns.single_quote:ht==='"'?dt=this.__patterns.double_quote:ht==="`"?dt=this.__patterns.template_text:ht==="}"&&(dt=this.__patterns.template_expression);for(var pt=dt.read(),mt="";this._input.hasNext();){if(mt=this._input.next(),mt===ht||!ut&&a.newline.test(mt)){this._input.back();break}else mt==="\\"&&this._input.hasNext()?(ft=this._input.peek(),ft==="x"||ft==="u"?this.has_char_escapes=!0:ft==="\r"&&this._input.peek(1)===`
`&&this._input.next(),mt+=this._input.next()):ct&&(ct==="${"&&mt==="$"&&this._input.peek()==="{"&&(mt+=this._input.next()),ct===mt&&(ht==="`"?mt+=this._read_string_recursive("}",ut,"`"):mt+=this._read_string_recursive("`",ut,"${"),this._input.hasNext()&&(mt+=this._input.next())));mt+=dt.read(),pt+=mt}return pt},tokenizer$2.Tokenizer=lt,tokenizer$2.TOKEN=b,tokenizer$2.positionable_operators=tt.slice(),tokenizer$2.line_starters=ot.slice(),tokenizer$2}var hasRequiredBeautifier$2;function requireBeautifier$2(){if(hasRequiredBeautifier$2)return beautifier$2;hasRequiredBeautifier$2=1;var s=requireOutput().Output,e=requireToken().Token,i=requireAcorn(),o=requireOptions$2().Options,a=requireTokenizer$1().Tokenizer,c=requireTokenizer$1().line_starters,d=requireTokenizer$1().positionable_operators,_=requireTokenizer$1().TOKEN;function b(dt,pt){return pt.indexOf(dt)!==-1}function k(dt){return dt.replace(/^\s+/g,"")}function j(dt){for(var pt={},mt=0;mt<dt.length;mt++)pt[dt[mt].replace(/-/g,"_")]=dt[mt];return pt}function _e(dt,pt){return dt&&dt.type===_.RESERVED&&dt.text===pt}function et(dt,pt){return dt&&dt.type===_.RESERVED&&b(dt.text,pt)}var tt=["case","return","do","if","throw","else","await","break","continue","async"],it=["before-newline","after-newline","preserve-newline"],st=j(it),ot=[st.before_newline,st.preserve_newline],nt={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function rt(dt,pt){pt.multiline_frame||pt.mode===nt.ForInitializer||pt.mode===nt.Conditional||dt.remove_indent(pt.start_line_index)}function at(dt){dt=dt.replace(i.allLineBreaks,`
`);for(var pt=[],mt=dt.indexOf(`
`);mt!==-1;)pt.push(dt.substring(0,mt)),dt=dt.substring(mt+1),mt=dt.indexOf(`
`);return dt.length&&pt.push(dt),pt}function lt(dt){return dt===nt.ArrayLiteral}function gt(dt){return b(dt,[nt.Expression,nt.ForInitializer,nt.Conditional])}function ht(dt,pt){for(var mt=0;mt<dt.length;mt++){var _t=dt[mt].trim();if(_t.charAt(0)!==pt)return!1}return!0}function ut(dt,pt){for(var mt=0,_t=dt.length,Ct;mt<_t;mt++)if(Ct=dt[mt],Ct&&Ct.indexOf(pt)!==0)return!1;return!0}function ct(dt,pt){pt=pt||{},this._source_text=dt||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new o(pt)}ct.prototype.create_flags=function(dt,pt){var mt=0;dt&&(mt=dt.indentation_level,!this._output.just_added_newline()&&dt.line_indent_level>mt&&(mt=dt.line_indent_level));var _t={mode:pt,parent:dt,last_token:dt?dt.last_token:new e(_.START_BLOCK,""),last_word:dt?dt.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:mt,alignment:0,line_indent_level:dt?dt.line_indent_level:mt,start_line_index:this._output.get_line_number(),ternary_depth:0};return _t},ct.prototype._reset=function(dt){var pt=dt.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new s(this._options,pt),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(nt.BlockStatement);var mt=new a(dt,this._options);return this._tokens=mt.tokenize(),dt},ct.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var dt,pt=this._reset(this._source_text),mt=this._options.eol;this._options.eol==="auto"&&(mt=`
`,pt&&i.lineBreak.test(pt||"")&&(mt=pt.match(i.lineBreak)[0]));for(var _t=this._tokens.next();_t;)this.handle_token(_t),this._last_last_text=this._flags.last_token.text,this._flags.last_token=_t,_t=this._tokens.next();return dt=this._output.get_code(mt),dt},ct.prototype.handle_token=function(dt,pt){dt.type===_.START_EXPR?this.handle_start_expr(dt):dt.type===_.END_EXPR?this.handle_end_expr(dt):dt.type===_.START_BLOCK?this.handle_start_block(dt):dt.type===_.END_BLOCK?this.handle_end_block(dt):dt.type===_.WORD?this.handle_word(dt):dt.type===_.RESERVED?this.handle_word(dt):dt.type===_.SEMICOLON?this.handle_semicolon(dt):dt.type===_.STRING?this.handle_string(dt):dt.type===_.EQUALS?this.handle_equals(dt):dt.type===_.OPERATOR?this.handle_operator(dt):dt.type===_.COMMA?this.handle_comma(dt):dt.type===_.BLOCK_COMMENT?this.handle_block_comment(dt,pt):dt.type===_.COMMENT?this.handle_comment(dt,pt):dt.type===_.DOT?this.handle_dot(dt):dt.type===_.EOF?this.handle_eof(dt):dt.type===_.UNKNOWN?this.handle_unknown(dt,pt):this.handle_unknown(dt,pt)},ct.prototype.handle_whitespace_and_comments=function(dt,pt){var mt=dt.newlines,_t=this._options.keep_array_indentation&&lt(this._flags.mode);if(dt.comments_before)for(var Ct=dt.comments_before.next();Ct;)this.handle_whitespace_and_comments(Ct,pt),this.handle_token(Ct,pt),Ct=dt.comments_before.next();if(_t)for(var bt=0;bt<mt;bt+=1)this.print_newline(bt>0,pt);else if(this._options.max_preserve_newlines&&mt>this._options.max_preserve_newlines&&(mt=this._options.max_preserve_newlines),this._options.preserve_newlines&&mt>1){this.print_newline(!1,pt);for(var yt=1;yt<mt;yt+=1)this.print_newline(!0,pt)}};var ft=["async","break","continue","return","throw","yield"];return ct.prototype.allow_wrap_or_preserved_newline=function(dt,pt){if(pt=pt===void 0?!1:pt,!this._output.just_added_newline()){var mt=this._options.preserve_newlines&&dt.newlines||pt,_t=b(this._flags.last_token.text,d)||b(dt.text,d);if(_t){var Ct=b(this._flags.last_token.text,d)&&b(this._options.operator_position,ot)||b(dt.text,d);mt=mt&&Ct}if(mt)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(et(this._flags.last_token,ft))return;this._output.set_wrap_point()}}},ct.prototype.print_newline=function(dt,pt){if(!pt&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var mt=this._tokens.peek();this._flags.mode===nt.Statement&&!(this._flags.if_block&&_e(mt,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(dt)&&(this._flags.multiline_frame=!0)},ct.prototype.print_token_line_indentation=function(dt){this._output.just_added_newline()&&(this._options.keep_array_indentation&&dt.newlines&&(dt.text==="["||lt(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(dt.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ct.prototype.print_token=function(dt){if(this._output.raw){this._output.add_raw_token(dt);return}if(this._options.comma_first&&dt.previous&&dt.previous.type===_.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var pt=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(pt),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(dt),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(dt),this._output.non_breaking_space=!0,this._output.add_token(dt.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},ct.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ct.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ct.prototype.set_mode=function(dt){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,dt),this._flags=this.create_flags(this._previous_flags,dt),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ct.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===nt.Statement&&rt(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ct.prototype.start_of_object_property=function(){return this._flags.parent.mode===nt.ObjectLiteral&&this._flags.mode===nt.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||et(this._flags.last_token,["get","set"]))},ct.prototype.start_of_statement=function(dt){var pt=!1;return pt=pt||et(this._flags.last_token,["var","let","const"])&&dt.type===_.WORD,pt=pt||_e(this._flags.last_token,"do"),pt=pt||!(this._flags.parent.mode===nt.ObjectLiteral&&this._flags.mode===nt.Statement)&&et(this._flags.last_token,ft)&&!dt.newlines,pt=pt||_e(this._flags.last_token,"else")&&!(_e(dt,"if")&&!dt.comments_before),pt=pt||this._flags.last_token.type===_.END_EXPR&&(this._previous_flags.mode===nt.ForInitializer||this._previous_flags.mode===nt.Conditional),pt=pt||this._flags.last_token.type===_.WORD&&this._flags.mode===nt.BlockStatement&&!this._flags.in_case&&!(dt.text==="--"||dt.text==="++")&&this._last_last_text!=="function"&&dt.type!==_.WORD&&dt.type!==_.RESERVED,pt=pt||this._flags.mode===nt.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||et(this._flags.last_token,["get","set"])),pt?(this.set_mode(nt.Statement),this.indent(),this.handle_whitespace_and_comments(dt,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(dt,et(dt,["do","for","if","while"])),!0):!1},ct.prototype.handle_start_expr=function(dt){this.start_of_statement(dt)||this.handle_whitespace_and_comments(dt);var pt=nt.Expression;if(dt.text==="["){if(this._flags.last_token.type===_.WORD||this._flags.last_token.text===")"){et(this._flags.last_token,c)&&(this._output.space_before_token=!0),this.print_token(dt),this.set_mode(pt),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}pt=nt.ArrayLiteral,lt(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),b(this._flags.last_token.type,[_.START_EXPR,_.END_EXPR,_.WORD,_.OPERATOR,_.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===_.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,pt=nt.ForInitializer):b(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,pt=nt.Conditional):b(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&dt.whitespace_before===""?this._output.space_before_token=!1:(b(this._flags.last_token.text,c)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(dt);else if(this._flags.last_token.type===_.WORD){this._output.space_before_token=!1;var mt=this._tokens.peek(-3);if(this._options.space_after_named_function&&mt){var _t=this._tokens.peek(-4);et(mt,["async","function"])||mt.text==="*"&&et(_t,["async","function"])?this._output.space_before_token=!0:this._flags.mode===nt.ObjectLiteral?(mt.text==="{"||mt.text===","||mt.text==="*"&&(_t.text==="{"||_t.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(dt);(this._flags.last_token.type===_.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(b(this._last_last_text,["function","yield"])||this._flags.mode===nt.ObjectLiteral&&b(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===_.START_BLOCK?this.print_newline():(this._flags.last_token.type===_.END_EXPR||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===_.COMMA)&&this.allow_wrap_or_preserved_newline(dt,dt.newlines),this.print_token(dt),this.set_mode(pt),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ct.prototype.handle_end_expr=function(dt){for(;this._flags.mode===nt.Statement;)this.restore_mode();this.handle_whitespace_and_comments(dt),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(dt,dt.text==="]"&&lt(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===_.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(dt),this.restore_mode(),rt(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===nt.Conditional&&(this._previous_flags.mode=nt.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},ct.prototype.handle_start_block=function(dt){this.handle_whitespace_and_comments(dt);var pt=this._tokens.peek(),mt=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===_.END_EXPR?(this.set_mode(nt.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(nt.BlockStatement):mt&&(b(mt.text,[":",","])&&b(pt.type,[_.STRING,_.WORD,_.RESERVED])||b(pt.text,["get","set","..."])&&b(mt.type,[_.WORD,_.RESERVED]))?b(this._last_last_text,["class","interface"])&&!b(mt.text,[":",","])?this.set_mode(nt.BlockStatement):this.set_mode(nt.ObjectLiteral):this._flags.last_token.type===_.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(nt.BlockStatement):b(this._flags.last_token.type,[_.EQUALS,_.START_EXPR,_.COMMA,_.OPERATOR])||et(this._flags.last_token,["return","throw","import","default"])?this.set_mode(nt.ObjectLiteral):this.set_mode(nt.BlockStatement),this._flags.last_token&&et(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var _t=!pt.comments_before&&pt.text==="}",Ct=_t&&this._flags.last_word==="function"&&this._flags.last_token.type===_.END_EXPR;if(this._options.brace_preserve_inline){var bt=0,yt=null;this._flags.inline_frame=!0;do if(bt+=1,yt=this._tokens.peek(bt-1),yt.newlines){this._flags.inline_frame=!1;break}while(yt.type!==_.EOF&&!(yt.type===_.END_BLOCK&&yt.opened===dt))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&dt.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==_.OPERATOR&&(Ct||this._flags.last_token.type===_.EQUALS||et(this._flags.last_token,tt)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(lt(this._previous_flags.mode)&&(this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.COMMA)&&((this._flags.last_token.type===_.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(dt),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==_.OPERATOR&&this._flags.last_token.type!==_.START_EXPR&&(this._flags.last_token.type===_.START_BLOCK&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(dt),this.indent(),!_t&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},ct.prototype.handle_end_block=function(dt){for(this.handle_whitespace_and_comments(dt);this._flags.mode===nt.Statement;)this.restore_mode();var pt=this._flags.last_token.type===_.START_BLOCK;this._flags.inline_frame&&!pt?this._output.space_before_token=!0:this._options.brace_style==="expand"?pt||this.print_newline():pt||(lt(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(dt)},ct.prototype.handle_word=function(dt){if(dt.type===_.RESERVED){if(b(dt.text,["set","get"])&&this._flags.mode!==nt.ObjectLiteral)dt.type=_.WORD;else if(dt.text==="import"&&b(this._tokens.peek().text,["(","."]))dt.type=_.WORD;else if(b(dt.text,["as","from"])&&!this._flags.import_block)dt.type=_.WORD;else if(this._flags.mode===nt.ObjectLiteral){var pt=this._tokens.peek();pt.text===":"&&(dt.type=_.WORD)}}if(this.start_of_statement(dt)?et(this._flags.last_token,["var","let","const"])&&dt.type===_.WORD&&(this._flags.declaration_statement=!0):dt.newlines&&!gt(this._flags.mode)&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==_.EQUALS&&(this._options.preserve_newlines||!et(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(dt),this.print_newline()):this.handle_whitespace_and_comments(dt),this._flags.do_block&&!this._flags.do_while)if(_e(dt,"while")){this._output.space_before_token=!0,this.print_token(dt),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&_e(dt,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===nt.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&et(dt,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(dt),this._flags.in_case=!0;return}if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(dt)),_e(dt,"function")){(b(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(b(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===_.OPERATOR))&&!this._output.just_added_blankline()&&!dt.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD?et(this._flags.last_token,["get","set","new","export"])||et(this._flags.last_token,ft)?this._output.space_before_token=!0:_e(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===_.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(gt(this._flags.mode)||lt(this._flags.mode))||this.print_newline(),this.print_token(dt),this._flags.last_word=dt.text;return}var mt="NONE";if(this._flags.last_token.type===_.END_BLOCK?this._previous_flags.inline_frame?mt="SPACE":et(dt,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&dt.newlines?mt="NEWLINE":(mt="SPACE",this._output.space_before_token=!0):mt="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&this._flags.mode===nt.BlockStatement?mt="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&gt(this._flags.mode)?mt="SPACE":this._flags.last_token.type===_.STRING?mt="NEWLINE":this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.last_token.text==="*"&&(b(this._last_last_text,["function","yield"])||this._flags.mode===nt.ObjectLiteral&&b(this._last_last_text,["{",","]))?mt="SPACE":this._flags.last_token.type===_.START_BLOCK?this._flags.inline_frame?mt="SPACE":mt="NEWLINE":this._flags.last_token.type===_.END_EXPR&&(this._output.space_before_token=!0,mt="NEWLINE"),et(dt,c)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?mt="SPACE":mt="NEWLINE"),et(dt,["else","catch","finally"]))if((!(this._flags.last_token.type===_.END_BLOCK&&this._previous_flags.mode===nt.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&dt.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var _t=this._output.current_line;_t.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else mt==="NEWLINE"?et(this._flags.last_token,tt)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&et(dt,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==_.END_EXPR?(this._flags.last_token.type!==_.START_EXPR||!et(dt,["var","let","const"]))&&this._flags.last_token.text!==":"&&(_e(dt,"if")&&_e(dt.previous,"else")?this._output.space_before_token=!0:this.print_newline()):et(dt,c)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&lt(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():mt==="SPACE"&&(this._output.space_before_token=!0);dt.previous&&(dt.previous.type===_.WORD||dt.previous.type===_.RESERVED)&&(this._output.space_before_token=!0),this.print_token(dt),this._flags.last_word=dt.text,dt.type===_.RESERVED&&(dt.text==="do"?this._flags.do_block=!0:dt.text==="if"?this._flags.if_block=!0:dt.text==="import"?this._flags.import_block=!0:this._flags.import_block&&_e(dt,"from")&&(this._flags.import_block=!1))},ct.prototype.handle_semicolon=function(dt){this.start_of_statement(dt)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(dt);for(var pt=this._tokens.peek();this._flags.mode===nt.Statement&&!(this._flags.if_block&&_e(pt,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(dt)},ct.prototype.handle_string=function(dt){dt.text.startsWith("`")&&dt.newlines===0&&dt.whitespace_before===""&&(dt.previous.text===")"||this._flags.last_token.type===_.WORD)||(this.start_of_statement(dt)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(dt),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(dt):dt.text.startsWith("`")&&this._flags.last_token.type===_.END_EXPR&&(dt.previous.text==="]"||dt.previous.text===")")&&dt.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(dt)},ct.prototype.handle_equals=function(dt){this.start_of_statement(dt)||this.handle_whitespace_and_comments(dt),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(dt),this._output.space_before_token=!0},ct.prototype.handle_comma=function(dt){this.handle_whitespace_and_comments(dt,!0),this.print_token(dt),this._output.space_before_token=!0,this._flags.declaration_statement?(gt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(dt)):this._flags.mode===nt.ObjectLiteral||this._flags.mode===nt.Statement&&this._flags.parent.mode===nt.ObjectLiteral?(this._flags.mode===nt.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(dt)},ct.prototype.handle_operator=function(dt){var pt=dt.text==="*"&&(et(this._flags.last_token,["function","yield"])||b(this._flags.last_token.type,[_.START_BLOCK,_.COMMA,_.END_BLOCK,_.SEMICOLON])),mt=b(dt.text,["-","+"])&&(b(this._flags.last_token.type,[_.START_BLOCK,_.START_EXPR,_.EQUALS,_.OPERATOR])||b(this._flags.last_token.text,c)||this._flags.last_token.text===",");if(!this.start_of_statement(dt)){var _t=!pt;this.handle_whitespace_and_comments(dt,_t)}if(dt.text==="*"&&this._flags.last_token.type===_.DOT){this.print_token(dt);return}if(dt.text==="::"){this.print_token(dt);return}if(this._flags.last_token.type===_.OPERATOR&&b(this._options.operator_position,ot)&&this.allow_wrap_or_preserved_newline(dt),dt.text===":"&&this._flags.in_case){this.print_token(dt),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==_.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var Ct=!0,bt=!0,yt=!1;if(dt.text===":"?this._flags.ternary_depth===0?Ct=!1:(this._flags.ternary_depth-=1,yt=!0):dt.text==="?"&&(this._flags.ternary_depth+=1),!mt&&!pt&&this._options.preserve_newlines&&b(dt.text,d)){var wt=dt.text===":",Tt=wt&&yt,kt=wt&&!yt;switch(this._options.operator_position){case st.before_newline:this._output.space_before_token=!kt,this.print_token(dt),(!wt||Tt)&&this.allow_wrap_or_preserved_newline(dt),this._output.space_before_token=!0;return;case st.after_newline:this._output.space_before_token=!0,!wt||Tt?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(dt):this._output.space_before_token=!1,this.print_token(dt),this._output.space_before_token=!0;return;case st.preserve_newline:kt||this.allow_wrap_or_preserved_newline(dt),Ct=!(this._output.just_added_newline()||kt),this._output.space_before_token=Ct,this.print_token(dt),this._output.space_before_token=!0;return}}if(pt){this.allow_wrap_or_preserved_newline(dt),Ct=!1;var Rt=this._tokens.peek();bt=Rt&&b(Rt.type,[_.WORD,_.RESERVED])}else if(dt.text==="...")this.allow_wrap_or_preserved_newline(dt),Ct=this._flags.last_token.type===_.START_BLOCK,bt=!1;else if(b(dt.text,["--","++","!","~"])||mt){if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR)&&this.allow_wrap_or_preserved_newline(dt),Ct=!1,bt=!1,dt.newlines&&(dt.text==="--"||dt.text==="++"||dt.text==="~")){var St=et(this._flags.last_token,tt)&&dt.newlines;St&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(St,!0)}this._flags.last_token.text===";"&&gt(this._flags.mode)&&(Ct=!0),this._flags.last_token.type===_.RESERVED?Ct=!0:this._flags.last_token.type===_.END_EXPR?Ct=!(this._flags.last_token.text==="]"&&(dt.text==="--"||dt.text==="++")):this._flags.last_token.type===_.OPERATOR&&(Ct=b(dt.text,["--","-","++","+"])&&b(this._flags.last_token.text,["--","-","++","+"]),b(dt.text,["+","-"])&&b(this._flags.last_token.text,["--","++"])&&(bt=!0)),(this._flags.mode===nt.BlockStatement&&!this._flags.inline_frame||this._flags.mode===nt.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||Ct,this.print_token(dt),this._output.space_before_token=bt},ct.prototype.handle_block_comment=function(dt,pt){if(this._output.raw){this._output.add_raw_token(dt),dt.directives&&dt.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(dt.directives){this.print_newline(!1,pt),this.print_token(dt),dt.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!i.newline.test(dt.text)&&!dt.newlines){this._output.space_before_token=!0,this.print_token(dt),this._output.space_before_token=!0;return}else this.print_block_commment(dt,pt)},ct.prototype.print_block_commment=function(dt,pt){var mt=at(dt.text),_t,Ct=!1,bt=!1,yt=dt.whitespace_before,wt=yt.length;if(this.print_newline(!1,pt),this.print_token_line_indentation(dt),this._output.add_token(mt[0]),this.print_newline(!1,pt),mt.length>1){for(mt=mt.slice(1),Ct=ht(mt,"*"),bt=ut(mt,yt),Ct&&(this._flags.alignment=1),_t=0;_t<mt.length;_t++)Ct?(this.print_token_line_indentation(dt),this._output.add_token(k(mt[_t]))):bt&&mt[_t]?(this.print_token_line_indentation(dt),this._output.add_token(mt[_t].substring(wt))):(this._output.current_line.set_indent(-1),this._output.add_token(mt[_t])),this.print_newline(!1,pt);this._flags.alignment=0}},ct.prototype.handle_comment=function(dt,pt){dt.newlines?this.print_newline(!1,pt):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(dt),this.print_newline(!1,pt)},ct.prototype.handle_dot=function(dt){this.start_of_statement(dt)||this.handle_whitespace_and_comments(dt,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),et(this._flags.last_token,tt)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(dt,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(dt)},ct.prototype.handle_unknown=function(dt,pt){this.print_token(dt),dt.text[dt.text.length-1]===`
`&&this.print_newline(!1,pt)},ct.prototype.handle_eof=function(dt){for(;this._flags.mode===nt.Statement;)this.restore_mode();this.handle_whitespace_and_comments(dt)},beautifier$2.Beautifier=ct,beautifier$2}var hasRequiredJavascript;function requireJavascript(){if(hasRequiredJavascript)return javascript.exports;hasRequiredJavascript=1;var s=requireBeautifier$2().Beautifier,e=requireOptions$2().Options;function i(o,a){var c=new s(o,a);return c.beautify()}return javascript.exports=i,javascript.exports.defaultOptions=function(){return new e},javascript.exports}var css={exports:{}},beautifier$1={},options$1={},hasRequiredOptions$1;function requireOptions$1(){if(hasRequiredOptions$1)return options$1;hasRequiredOptions$1=1;var s=requireOptions$3().Options;function e(i){s.call(this,i,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var o=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||o;var a=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var c=0;c<a.length;c++)a[c]!=="expand"?this.brace_style="collapse":this.brace_style=a[c]}return e.prototype=new s,options$1.Options=e,options$1}var hasRequiredBeautifier$1;function requireBeautifier$1(){if(hasRequiredBeautifier$1)return beautifier$1;hasRequiredBeautifier$1=1;var s=requireOptions$1().Options,e=requireOutput().Output,i=requireInputscanner().InputScanner,o=requireDirectives().Directives,a=new o(/\/\*/,/\*\//),c=/\r\n|[\r\n]/,d=/\r\n|[\r\n]/g,_=/\s/,b=/(?:\s|\n)+/g,k=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,j=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function _e(et,tt){this._source_text=et||"",this._options=new s(tt),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return _e.prototype.eatString=function(et){var tt="";for(this._ch=this._input.next();this._ch;){if(tt+=this._ch,this._ch==="\\")tt+=this._input.next();else if(et.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return tt},_e.prototype.eatWhitespace=function(et){for(var tt=_.test(this._input.peek()),it=0;_.test(this._input.peek());)this._ch=this._input.next(),et&&this._ch===`
`&&(it===0||it<this._options.max_preserve_newlines)&&(it++,this._output.add_new_line(!0));return tt},_e.prototype.foundNestedPseudoClass=function(){for(var et=0,tt=1,it=this._input.peek(tt);it;){if(it==="{")return!0;if(it==="(")et+=1;else if(it===")"){if(et===0)return!1;et-=1}else if(it===";"||it==="}")return!1;tt++,it=this._input.peek(tt)}return!1},_e.prototype.print_string=function(et){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(et)},_e.prototype.preserveSingleSpace=function(et){et&&(this._output.space_before_token=!0)},_e.prototype.indent=function(){this._indentLevel++},_e.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},_e.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var et=this._source_text,tt=this._options.eol;tt==="auto"&&(tt=`
`,et&&c.test(et||"")&&(tt=et.match(c)[0])),et=et.replace(d,`
`);var it=et.match(/^[\t ]*/)[0];this._output=new e(this._options,it),this._input=new i(et),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var st=0,ot=!1,nt=!1,rt=!1,at=!1,lt=!1,gt=!1,ht=this._ch,ut=!1,ct,ft,dt;ct=this._input.read(b),ft=ct!=="",dt=ht,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),ht=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var pt=this._input.read(k),mt=a.get_directives(pt);mt&&mt.ignore==="start"&&(pt+=a.readIgnored(this._input)),this.print_string(pt),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(j)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(ft),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var _t=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);_t.match(/[ :]$/)&&(_t=this.eatString(": ").replace(/\s$/,""),this.print_string(_t),this._output.space_before_token=!0),_t=_t.replace(/\s$/,""),_t==="extend"?at=!0:_t==="import"&&(lt=!0),_t in this.NESTED_AT_RULE?(this._nestedLevel+=1,_t in this.CONDITIONAL_GROUP_RULE&&(rt=!0)):!ot&&st===0&&_t.indexOf(":")!==-1&&(nt=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(ft),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")nt&&(nt=!1,this.outdent()),rt?(rt=!1,ot=this._indentLevel>=this._nestedLevel):ot=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&ot&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(dt==="("?this._output.space_before_token=!1:dt!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),dt==="{"&&this._output.trim(!0),lt=!1,at=!1,nt&&(this.outdent(),nt=!1),this.print_string(this._ch),ot=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var Ct=0;Ct<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;Ct++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[Ct])){ut=!0;break}(ot||rt)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!at&&st===0?(this.print_string(":"),nt||(nt=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var bt=dt==='"'||dt==="'";this.preserveSingleSpace(bt||ft),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")ut=!1,st===0?(nt&&(this.outdent(),nt=!1),at=!1,lt=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),st++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),st&&(st--,this.outdent()));else{var yt=!1;this._input.lookBack("with")&&(yt=!0),this.preserveSingleSpace(ft||yt),this.print_string(this._ch),nt&&dt==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),gt=!0):(this.eatWhitespace(),st++,this.indent())}else if(this._ch===")")st&&(st--,this.outdent()),gt&&this._input.peek()===";"&&this._options.selector_separator_newline&&(gt=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!nt||gt)&&st===0&&!lt&&!at?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!nt&&st===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&_.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(ft),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),_.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var wt=dt==='"'||dt==="'";this.preserveSingleSpace(wt||ft),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&ut&&this._output.add_new_line()}var Tt=this._output.get_code(tt);return Tt},beautifier$1.Beautifier=_e,beautifier$1}var hasRequiredCss;function requireCss(){if(hasRequiredCss)return css.exports;hasRequiredCss=1;var s=requireBeautifier$1().Beautifier,e=requireOptions$1().Options;function i(o,a){var c=new s(o,a);return c.beautify()}return css.exports=i,css.exports.defaultOptions=function(){return new e},css.exports}var html$2={exports:{}},beautifier={},options={},hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options;hasRequiredOptions=1;var s=requireOptions$3().Options;function e(i){s.call(this,i,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return e.prototype=new s,options.Options=e,options}var tokenizer={},hasRequiredTokenizer;function requireTokenizer(){if(hasRequiredTokenizer)return tokenizer;hasRequiredTokenizer=1;var s=requireTokenizer$2().Tokenizer,e=requireTokenizer$2().TOKEN,i=requireDirectives().Directives,o=requireTemplatablepattern().TemplatablePattern,a=requirePattern().Pattern,c={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:e.START,RAW:e.RAW,EOF:e.EOF},d=new i(/<\!--/,/-->/),_=function(b,k){s.call(this,b,k),this._current_tag_name="";var j=new o(this._input).read_options(this._options),_e=new a(this._input);if(this.__patterns={word:j.until(/[\n\r\t <]/),single_quote:j.until_after(/'/),double_quote:j.until_after(/"/),attribute:j.until(/[\n\r\t =>]|\/>/),element_name:j.until(/[\n\r\t >\/]/),handlebars_comment:_e.starting_with(/{{!--/).until_after(/--}}/),handlebars:_e.starting_with(/{{/).until_after(/}}/),handlebars_open:_e.until(/[\n\r\t }]/),handlebars_raw_close:_e.until(/}}/),comment:_e.starting_with(/<!--/).until_after(/-->/),cdata:_e.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:_e.starting_with(/<!\[/).until_after(/]>/),processing:_e.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var et=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=_e.matching(et).until_after(et)}};return _.prototype=new s,_.prototype._is_comment=function(b){return!1},_.prototype._is_opening=function(b){return b.type===c.TAG_OPEN},_.prototype._is_closing=function(b,k){return b.type===c.TAG_CLOSE&&k&&((b.text===">"||b.text==="/>")&&k.text[0]==="<"||b.text==="}}"&&k.text[0]==="{"&&k.text[1]==="{")},_.prototype._reset=function(){this._current_tag_name=""},_.prototype._get_next_token=function(b,k){var j=null;this._readWhitespace();var _e=this._input.peek();return _e===null?this._create_token(c.EOF,""):(j=j||this._read_open_handlebars(_e,k),j=j||this._read_attribute(_e,b,k),j=j||this._read_close(_e,k),j=j||this._read_raw_content(_e,b,k),j=j||this._read_content_word(_e),j=j||this._read_comment_or_cdata(_e),j=j||this._read_processing(_e),j=j||this._read_open(_e,k),j=j||this._create_token(c.UNKNOWN,this._input.next()),j)},_.prototype._read_comment_or_cdata=function(b){var k=null,j=null,_e=null;if(b==="<"){var et=this._input.peek(1);et==="!"&&(j=this.__patterns.comment.read(),j?(_e=d.get_directives(j),_e&&_e.ignore==="start"&&(j+=d.readIgnored(this._input))):j=this.__patterns.cdata.read()),j&&(k=this._create_token(c.COMMENT,j),k.directives=_e)}return k},_.prototype._read_processing=function(b){var k=null,j=null,_e=null;if(b==="<"){var et=this._input.peek(1);(et==="!"||et==="?")&&(j=this.__patterns.conditional_comment.read(),j=j||this.__patterns.processing.read()),j&&(k=this._create_token(c.COMMENT,j),k.directives=_e)}return k},_.prototype._read_open=function(b,k){var j=null,_e=null;return k||b==="<"&&(j=this._input.next(),this._input.peek()==="/"&&(j+=this._input.next()),j+=this.__patterns.element_name.read(),_e=this._create_token(c.TAG_OPEN,j)),_e},_.prototype._read_open_handlebars=function(b,k){var j=null,_e=null;return k||this._options.indent_handlebars&&b==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(j=this.__patterns.handlebars_comment.read(),j=j||this.__patterns.handlebars.read(),_e=this._create_token(c.COMMENT,j)):(j=this.__patterns.handlebars_open.read(),_e=this._create_token(c.TAG_OPEN,j))),_e},_.prototype._read_close=function(b,k){var j=null,_e=null;return k&&(k.text[0]==="<"&&(b===">"||b==="/"&&this._input.peek(1)===">")?(j=this._input.next(),b==="/"&&(j+=this._input.next()),_e=this._create_token(c.TAG_CLOSE,j)):k.text[0]==="{"&&b==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),_e=this._create_token(c.TAG_CLOSE,"}}"))),_e},_.prototype._read_attribute=function(b,k,j){var _e=null,et="";if(j&&j.text[0]==="<")if(b==="=")_e=this._create_token(c.EQUALS,this._input.next());else if(b==='"'||b==="'"){var tt=this._input.next();b==='"'?tt+=this.__patterns.double_quote.read():tt+=this.__patterns.single_quote.read(),_e=this._create_token(c.VALUE,tt)}else et=this.__patterns.attribute.read(),et&&(k.type===c.EQUALS?_e=this._create_token(c.VALUE,et):_e=this._create_token(c.ATTRIBUTE,et));return _e},_.prototype._is_content_unformatted=function(b){return this._options.void_elements.indexOf(b)===-1&&(this._options.content_unformatted.indexOf(b)!==-1||this._options.unformatted.indexOf(b)!==-1)},_.prototype._read_raw_content=function(b,k,j){var _e="";if(j&&j.text[0]==="{")_e=this.__patterns.handlebars_raw_close.read();else if(k.type===c.TAG_CLOSE&&k.opened.text[0]==="<"&&k.text[0]!=="/"){var et=k.opened.text.substr(1).toLowerCase();if(et==="script"||et==="style"){var tt=this._read_comment_or_cdata(b);if(tt)return tt.type=c.TEXT,tt;_e=this._input.readUntil(new RegExp("</"+et+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(et)&&(_e=this._input.readUntil(new RegExp("</"+et+"[\\n\\r\\t ]*?>","ig")))}return _e?this._create_token(c.TEXT,_e):null},_.prototype._read_content_word=function(b){var k="";if(this._options.unformatted_content_delimiter&&b===this._options.unformatted_content_delimiter[0]&&(k=this.__patterns.unformatted_content_delimiter.read()),k||(k=this.__patterns.word.read()),k)return this._create_token(c.TEXT,k)},tokenizer.Tokenizer=_,tokenizer.TOKEN=c,tokenizer}var hasRequiredBeautifier;function requireBeautifier(){if(hasRequiredBeautifier)return beautifier;hasRequiredBeautifier=1;var s=requireOptions().Options,e=requireOutput().Output,i=requireTokenizer().Tokenizer,o=requireTokenizer().TOKEN,a=/\r\n|[\r\n]/,c=/\r\n|[\r\n]/g,d=function(ot,nt){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=ot.max_preserve_newlines,this.preserve_newlines=ot.preserve_newlines,this._output=new e(ot,nt)};d.prototype.current_line_has_match=function(ot){return this._output.current_line.has_match(ot)},d.prototype.set_space_before_token=function(ot,nt){this._output.space_before_token=ot,this._output.non_breaking_space=nt},d.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},d.prototype.add_raw_token=function(ot){this._output.add_raw_token(ot)},d.prototype.print_preserved_newlines=function(ot){var nt=0;ot.type!==o.TEXT&&ot.previous.type!==o.TEXT&&(nt=ot.newlines?1:0),this.preserve_newlines&&(nt=ot.newlines<this.max_preserve_newlines+1?ot.newlines:this.max_preserve_newlines+1);for(var rt=0;rt<nt;rt++)this.print_newline(rt>0);return nt!==0},d.prototype.traverse_whitespace=function(ot){return ot.whitespace_before||ot.newlines?(this.print_preserved_newlines(ot)||(this._output.space_before_token=!0),!0):!1},d.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},d.prototype.print_newline=function(ot){this._output.add_new_line(ot)},d.prototype.print_token=function(ot){ot.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(ot.text))},d.prototype.indent=function(){this.indent_level++},d.prototype.get_full_indent=function(ot){return ot=this.indent_level+(ot||0),ot<1?"":this._output.get_indent_string(ot)};var _=function(ot){for(var nt=null,rt=ot.next;rt.type!==o.EOF&&ot.closed!==rt;){if(rt.type===o.ATTRIBUTE&&rt.text==="type"){rt.next&&rt.next.type===o.EQUALS&&rt.next.next&&rt.next.next.type===o.VALUE&&(nt=rt.next.next.text);break}rt=rt.next}return nt},b=function(ot,nt){var rt=null,at=null;return nt.closed?(ot==="script"?rt="text/javascript":ot==="style"&&(rt="text/css"),rt=_(nt)||rt,rt.search("text/css")>-1?at="css":rt.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?at="javascript":rt.search(/(text|application|dojo)\/(x-)?(html)/)>-1?at="html":rt.search(/test\/null/)>-1&&(at="null"),at):null};function k(ot,nt){return nt.indexOf(ot)!==-1}function j(ot,nt,rt){this.parent=ot||null,this.tag=nt?nt.tag_name:"",this.indent_level=rt||0,this.parser_token=nt||null}function _e(ot){this._printer=ot,this._current_frame=null}_e.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},_e.prototype.record_tag=function(ot){var nt=new j(this._current_frame,ot,this._printer.indent_level);this._current_frame=nt},_e.prototype._try_pop_frame=function(ot){var nt=null;return ot&&(nt=ot.parser_token,this._printer.indent_level=ot.indent_level,this._current_frame=ot.parent),nt},_e.prototype._get_frame=function(ot,nt){for(var rt=this._current_frame;rt&&ot.indexOf(rt.tag)===-1;){if(nt&&nt.indexOf(rt.tag)!==-1){rt=null;break}rt=rt.parent}return rt},_e.prototype.try_pop=function(ot,nt){var rt=this._get_frame([ot],nt);return this._try_pop_frame(rt)},_e.prototype.indent_to_tag=function(ot){var nt=this._get_frame(ot);nt&&(this._printer.indent_level=nt.indent_level)};function et(ot,nt,rt,at){this._source_text=ot||"",nt=nt||{},this._js_beautify=rt,this._css_beautify=at,this._tag_stack=null;var lt=new s(nt,"html");this._options=lt,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}et.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var ot=this._source_text,nt=this._options.eol;this._options.eol==="auto"&&(nt=`
`,ot&&a.test(ot)&&(nt=ot.match(a)[0])),ot=ot.replace(c,`
`);var rt=ot.match(/^[\t ]*/)[0],at={text:"",type:""},lt=new tt,gt=new d(this._options,rt),ht=new i(ot,this._options).tokenize();this._tag_stack=new _e(gt);for(var ut=null,ct=ht.next();ct.type!==o.EOF;)ct.type===o.TAG_OPEN||ct.type===o.COMMENT?(ut=this._handle_tag_open(gt,ct,lt,at),lt=ut):ct.type===o.ATTRIBUTE||ct.type===o.EQUALS||ct.type===o.VALUE||ct.type===o.TEXT&&!lt.tag_complete?ut=this._handle_inside_tag(gt,ct,lt,ht):ct.type===o.TAG_CLOSE?ut=this._handle_tag_close(gt,ct,lt):ct.type===o.TEXT?ut=this._handle_text(gt,ct,lt):gt.add_raw_token(ct),at=ut,ct=ht.next();var ft=gt._output.get_code(nt);return ft},et.prototype._handle_tag_close=function(ot,nt,rt){var at={text:nt.text,type:nt.type};return ot.alignment_size=0,rt.tag_complete=!0,ot.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),rt.is_unformatted?ot.add_raw_token(nt):(rt.tag_start_char==="<"&&(ot.set_space_before_token(nt.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&rt.has_wrapped_attrs&&ot.print_newline(!1)),ot.print_token(nt)),rt.indent_content&&!(rt.is_unformatted||rt.is_content_unformatted)&&(ot.indent(),rt.indent_content=!1),!rt.is_inline_element&&!(rt.is_unformatted||rt.is_content_unformatted)&&ot.set_wrap_point(),at},et.prototype._handle_inside_tag=function(ot,nt,rt,at){var lt=rt.has_wrapped_attrs,gt={text:nt.text,type:nt.type};if(ot.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),rt.is_unformatted)ot.add_raw_token(nt);else if(rt.tag_start_char==="{"&&nt.type===o.TEXT)ot.print_preserved_newlines(nt)?(nt.newlines=0,ot.add_raw_token(nt)):ot.print_token(nt);else{if(nt.type===o.ATTRIBUTE?(ot.set_space_before_token(!0),rt.attr_count+=1):(nt.type===o.EQUALS||nt.type===o.VALUE&&nt.previous.type===o.EQUALS)&&ot.set_space_before_token(!1),nt.type===o.ATTRIBUTE&&rt.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(ot.traverse_whitespace(nt),lt=lt||nt.newlines!==0),this._is_wrap_attributes_force)){var ht=rt.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&rt.attr_count===1){var ut=!0,ct=0,ft;do{if(ft=at.peek(ct),ft.type===o.ATTRIBUTE){ut=!1;break}ct+=1}while(ct<4&&ft.type!==o.EOF&&ft.type!==o.TAG_CLOSE);ht=!ut}ht&&(ot.print_newline(!1),lt=!0)}ot.print_token(nt),lt=lt||ot.previous_token_wrapped(),rt.has_wrapped_attrs=lt}return gt},et.prototype._handle_text=function(ot,nt,rt){var at={text:nt.text,type:"TK_CONTENT"};return rt.custom_beautifier_name?this._print_custom_beatifier_text(ot,nt,rt):rt.is_unformatted||rt.is_content_unformatted?ot.add_raw_token(nt):(ot.traverse_whitespace(nt),ot.print_token(nt)),at},et.prototype._print_custom_beatifier_text=function(ot,nt,rt){var at=this;if(nt.text!==""){var lt=nt.text,gt,ht=1,ut="",ct="";rt.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?gt=this._js_beautify:rt.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?gt=this._css_beautify:rt.custom_beautifier_name==="html"&&(gt=function(Ct,bt){var yt=new et(Ct,bt,at._js_beautify,at._css_beautify);return yt.beautify()}),this._options.indent_scripts==="keep"?ht=0:this._options.indent_scripts==="separate"&&(ht=-ot.indent_level);var ft=ot.get_full_indent(ht);if(lt=lt.replace(/\n[ \t]*$/,""),rt.custom_beautifier_name!=="html"&&lt[0]==="<"&&lt.match(/^(<!--|<!\[CDATA\[)/)){var dt=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(lt);if(!dt){ot.add_raw_token(nt);return}ut=ft+dt[1]+`
`,lt=dt[4],dt[5]&&(ct=ft+dt[5]),lt=lt.replace(/\n[ \t]*$/,""),(dt[2]||dt[3].indexOf(`
`)!==-1)&&(dt=dt[3].match(/[ \t]+$/),dt&&(nt.whitespace_before=dt[0]))}if(lt)if(gt){var pt=function(){this.eol=`
`};pt.prototype=this._options.raw_options;var mt=new pt;lt=gt(ft+lt,mt)}else{var _t=nt.whitespace_before;_t&&(lt=lt.replace(new RegExp(`
(`+_t+")?","g"),`
`)),lt=ft+lt.replace(/\n/g,`
`+ft)}ut&&(lt?lt=ut+lt+`
`+ct:lt=ut+ct),ot.print_newline(!1),lt&&(nt.text=lt,nt.whitespace_before="",nt.newlines=0,ot.add_raw_token(nt),ot.print_newline(!0))}},et.prototype._handle_tag_open=function(ot,nt,rt,at){var lt=this._get_tag_open_token(nt);return(rt.is_unformatted||rt.is_content_unformatted)&&!rt.is_empty_element&&nt.type===o.TAG_OPEN&&nt.text.indexOf("</")===0?(ot.add_raw_token(nt),lt.start_tag_token=this._tag_stack.try_pop(lt.tag_name)):(ot.traverse_whitespace(nt),this._set_tag_position(ot,nt,lt,rt,at),lt.is_inline_element||ot.set_wrap_point(),ot.print_token(nt)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(lt.alignment_size=nt.text.length+1),!lt.tag_complete&&!lt.is_unformatted&&(ot.alignment_size=lt.alignment_size),lt};var tt=function(ot,nt){if(this.parent=ot||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!nt)this.tag_complete=!0;else{var rt;this.tag_start_char=nt.text[0],this.text=nt.text,this.tag_start_char==="<"?(rt=nt.text.match(/^<([^\s>]*)/),this.tag_check=rt?rt[1]:""):(rt=nt.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=rt?rt[1]:"",(nt.text.startsWith("{{#>")||nt.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&nt.next!==null?this.tag_check=nt.next.text.split(" ")[0]:this.tag_check=nt.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),nt.type===o.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||nt.closed&&nt.closed.text==="/>";var at=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(at=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(at)))}};et.prototype._get_tag_open_token=function(ot){var nt=new tt(this._tag_stack.get_parser_token(),ot);return nt.alignment_size=this._options.wrap_attributes_indent_size,nt.is_end_tag=nt.is_end_tag||k(nt.tag_check,this._options.void_elements),nt.is_empty_element=nt.tag_complete||nt.is_start_tag&&nt.is_end_tag,nt.is_unformatted=!nt.tag_complete&&k(nt.tag_check,this._options.unformatted),nt.is_content_unformatted=!nt.is_empty_element&&k(nt.tag_check,this._options.content_unformatted),nt.is_inline_element=k(nt.tag_name,this._options.inline)||nt.tag_name.includes("-")||nt.tag_start_char==="{",nt},et.prototype._set_tag_position=function(ot,nt,rt,at,lt){if(rt.is_empty_element||(rt.is_end_tag?rt.start_tag_token=this._tag_stack.try_pop(rt.tag_name):(this._do_optional_end_element(rt)&&(rt.is_inline_element||ot.print_newline(!1)),this._tag_stack.record_tag(rt),(rt.tag_name==="script"||rt.tag_name==="style")&&!(rt.is_unformatted||rt.is_content_unformatted)&&(rt.custom_beautifier_name=b(rt.tag_check,nt)))),k(rt.tag_check,this._options.extra_liners)&&(ot.print_newline(!1),ot._output.just_added_blankline()||ot.print_newline(!0)),rt.is_empty_element){if(rt.tag_start_char==="{"&&rt.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),rt.indent_content=!0;var gt=ot.current_line_has_match(/{{#if/);gt||ot.print_newline(!1)}rt.tag_name==="!--"&&lt.type===o.TAG_CLOSE&&at.is_end_tag&&rt.text.indexOf(`
`)===-1||(rt.is_inline_element||rt.is_unformatted||ot.print_newline(!1),this._calcluate_parent_multiline(ot,rt))}else if(rt.is_end_tag){var ht=!1;ht=rt.start_tag_token&&rt.start_tag_token.multiline_content,ht=ht||!rt.is_inline_element&&!(at.is_inline_element||at.is_unformatted)&&!(lt.type===o.TAG_CLOSE&&rt.start_tag_token===at)&&lt.type!=="TK_CONTENT",(rt.is_content_unformatted||rt.is_unformatted)&&(ht=!1),ht&&ot.print_newline(!1)}else rt.indent_content=!rt.custom_beautifier_name,rt.tag_start_char==="<"&&(rt.tag_name==="html"?rt.indent_content=this._options.indent_inner_html:rt.tag_name==="head"?rt.indent_content=this._options.indent_head_inner_html:rt.tag_name==="body"&&(rt.indent_content=this._options.indent_body_inner_html)),!(rt.is_inline_element||rt.is_unformatted)&&(lt.type!=="TK_CONTENT"||rt.is_content_unformatted)&&ot.print_newline(!1),this._calcluate_parent_multiline(ot,rt)},et.prototype._calcluate_parent_multiline=function(ot,nt){nt.parent&&ot._output.just_added_newline()&&!((nt.is_inline_element||nt.is_unformatted)&&nt.parent.is_inline_element)&&(nt.parent.multiline_content=!0)};var it=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],st=["a","audio","del","ins","map","noscript","video"];return et.prototype._do_optional_end_element=function(ot){var nt=null;if(!(ot.is_empty_element||!ot.is_start_tag||!ot.parent)){if(ot.tag_name==="body")nt=nt||this._tag_stack.try_pop("head");else if(ot.tag_name==="li")nt=nt||this._tag_stack.try_pop("li",["ol","ul"]);else if(ot.tag_name==="dd"||ot.tag_name==="dt")nt=nt||this._tag_stack.try_pop("dt",["dl"]),nt=nt||this._tag_stack.try_pop("dd",["dl"]);else if(ot.parent.tag_name==="p"&&it.indexOf(ot.tag_name)!==-1){var rt=ot.parent.parent;(!rt||st.indexOf(rt.tag_name)===-1)&&(nt=nt||this._tag_stack.try_pop("p"))}else ot.tag_name==="rp"||ot.tag_name==="rt"?(nt=nt||this._tag_stack.try_pop("rt",["ruby","rtc"]),nt=nt||this._tag_stack.try_pop("rp",["ruby","rtc"])):ot.tag_name==="optgroup"?nt=nt||this._tag_stack.try_pop("optgroup",["select"]):ot.tag_name==="option"?nt=nt||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):ot.tag_name==="colgroup"?nt=nt||this._tag_stack.try_pop("caption",["table"]):ot.tag_name==="thead"?(nt=nt||this._tag_stack.try_pop("caption",["table"]),nt=nt||this._tag_stack.try_pop("colgroup",["table"])):ot.tag_name==="tbody"||ot.tag_name==="tfoot"?(nt=nt||this._tag_stack.try_pop("caption",["table"]),nt=nt||this._tag_stack.try_pop("colgroup",["table"]),nt=nt||this._tag_stack.try_pop("thead",["table"]),nt=nt||this._tag_stack.try_pop("tbody",["table"])):ot.tag_name==="tr"?(nt=nt||this._tag_stack.try_pop("caption",["table"]),nt=nt||this._tag_stack.try_pop("colgroup",["table"]),nt=nt||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(ot.tag_name==="th"||ot.tag_name==="td")&&(nt=nt||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),nt=nt||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return ot.parent=this._tag_stack.get_parser_token(),nt}},beautifier.Beautifier=et,beautifier}var hasRequiredHtml;function requireHtml(){if(hasRequiredHtml)return html$2.exports;hasRequiredHtml=1;var s=requireBeautifier().Beautifier,e=requireOptions().Options;function i(o,a,c,d){var _=new s(o,a,c,d);return _.beautify()}return html$2.exports=i,html$2.exports.defaultOptions=function(){return new e},html$2.exports}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var s=requireJavascript(),e=requireCss(),i=requireHtml();function o(a,c,d,_){return d=d||s,_=_||e,i(a,c,d,_)}return o.defaultOptions=i.defaultOptions,src.js=s,src.css=e,src.html=o,src}(function(s){function e(i,o,a){var c=function(d,_){return i.js_beautify(d,_)};return c.js=i.js_beautify,c.css=o.css_beautify,c.html=a.html_beautify,c.js_beautify=i.js_beautify,c.css_beautify=o.css_beautify,c.html_beautify=a.html_beautify,c}(function(i){var o=requireSrc();o.js_beautify=o.js,o.css_beautify=o.css,o.html_beautify=o.html,i.exports=e(o,o,o)})(s)})(js);globalThis&&globalThis.__awaiter;let isPseudo=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function _format$1(s,e){let i;return e.length===0?i=s:i=s.replace(/\{(\d+)\}/g,(o,a)=>{const c=a[0],d=e[c];let _=o;return typeof d=="string"?_=d:(typeof d=="number"||typeof d=="boolean"||d===void 0||d===null)&&(_=String(d)),_}),isPseudo&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function localize(s,e,...i){return _format$1(e,i)}function getConfiguredDefaultLocale(s){}var _a$9;const LANGUAGE_DEFAULT="en";let _isWindows=!1,_isMacintosh=!1,_isLinux=!1,_isNative=!1,_isWeb=!1,_isIOS=!1,_locale,_language=LANGUAGE_DEFAULT,_translationsConfigFile,_userAgent;const globals=typeof self=="object"?self:typeof global=="object"?global:{};let nodeProcess;typeof globals.vscode<"u"&&typeof globals.vscode.process<"u"?nodeProcess=globals.vscode.process:typeof process<"u"&&(nodeProcess=process);const isElectronProcess=typeof((_a$9=nodeProcess==null?void 0:nodeProcess.versions)===null||_a$9===void 0?void 0:_a$9.electron)=="string",isElectronRenderer=isElectronProcess&&(nodeProcess==null?void 0:nodeProcess.type)==="renderer";if(typeof navigator=="object"&&!isElectronRenderer)_userAgent=navigator.userAgent,_isWindows=_userAgent.indexOf("Windows")>=0,_isMacintosh=_userAgent.indexOf("Macintosh")>=0,_isIOS=(_userAgent.indexOf("Macintosh")>=0||_userAgent.indexOf("iPad")>=0||_userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_isLinux=_userAgent.indexOf("Linux")>=0,_isWeb=!0,localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"),_locale=LANGUAGE_DEFAULT,_language=_locale;else if(typeof nodeProcess=="object"){_isWindows=nodeProcess.platform==="win32",_isMacintosh=nodeProcess.platform==="darwin",_isLinux=nodeProcess.platform==="linux",_isLinux&&!!nodeProcess.env.SNAP&&nodeProcess.env.SNAP_REVISION,nodeProcess.env.CI||nodeProcess.env.BUILD_ARTIFACTSTAGINGDIRECTORY,_locale=LANGUAGE_DEFAULT,_language=LANGUAGE_DEFAULT;const s=nodeProcess.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s),i=e.availableLanguages["*"];_locale=e.locale,_language=i||LANGUAGE_DEFAULT,_translationsConfigFile=e._translationsConfigFile}catch{}_isNative=!0}else console.error("Unable to resolve platform.");const isWindows=_isWindows,isMacintosh=_isMacintosh,isLinux=_isLinux,isNative=_isNative,isWeb=_isWeb,isWebWorker=_isWeb&&typeof globals.importScripts=="function",isIOS=_isIOS,userAgent$1=_userAgent,setTimeout0IsFaster=typeof globals.postMessage=="function"&&!globals.importScripts,setTimeout0=(()=>{if(setTimeout0IsFaster){const s=[];globals.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let o=0,a=s.length;o<a;o++){const c=s[o];if(c.id===i.data.vscodeScheduleAsyncWork){s.splice(o,1),c.callback();return}}});let e=0;return i=>{const o=++e;s.push({id:o,callback:i}),globals.postMessage({vscodeScheduleAsyncWork:o},"*")}}return s=>setTimeout(s)})(),OS=_isMacintosh||_isIOS?2:_isWindows?1:3;let _isLittleEndian=!0,_isLittleEndianComputed=!1;function isLittleEndian(){if(!_isLittleEndianComputed){_isLittleEndianComputed=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,_isLittleEndian=new Uint16Array(s.buffer)[0]===(2<<8)+1}return _isLittleEndian}const isChrome$1=!!(userAgent$1&&userAgent$1.indexOf("Chrome")>=0),isFirefox$1=!!(userAgent$1&&userAgent$1.indexOf("Firefox")>=0),isSafari$1=!!(!isChrome$1&&userAgent$1&&userAgent$1.indexOf("Safari")>=0),isEdge=!!(userAgent$1&&userAgent$1.indexOf("Edg/")>=0);userAgent$1&&userAgent$1.indexOf("Android")>=0;var Iterable;(function(s){function e(lt){return lt&&typeof lt=="object"&&typeof lt[Symbol.iterator]=="function"}s.is=e;const i=Object.freeze([]);function o(){return i}s.empty=o;function*a(lt){yield lt}s.single=a;function c(lt){return lt||i}s.from=c;function d(lt){return!lt||lt[Symbol.iterator]().next().done===!0}s.isEmpty=d;function _(lt){return lt[Symbol.iterator]().next().value}s.first=_;function b(lt,gt){for(const ht of lt)if(gt(ht))return!0;return!1}s.some=b;function k(lt,gt){for(const ht of lt)if(gt(ht))return ht}s.find=k;function*j(lt,gt){for(const ht of lt)gt(ht)&&(yield ht)}s.filter=j;function*_e(lt,gt){let ht=0;for(const ut of lt)yield gt(ut,ht++)}s.map=_e;function*et(...lt){for(const gt of lt)for(const ht of gt)yield ht}s.concat=et;function*tt(lt){for(const gt of lt)for(const ht of gt)yield ht}s.concatNested=tt;function it(lt,gt,ht){let ut=ht;for(const ct of lt)ut=gt(ut,ct);return ut}s.reduce=it;function st(lt,gt){let ht=0;for(const ut of lt)gt(ut,ht++)}s.forEach=st;function*ot(lt,gt,ht=lt.length){for(gt<0&&(gt+=lt.length),ht<0?ht+=lt.length:ht>lt.length&&(ht=lt.length);gt<ht;gt++)yield lt[gt]}s.slice=ot;function nt(lt,gt=Number.POSITIVE_INFINITY){const ht=[];if(gt===0)return[ht,lt];const ut=lt[Symbol.iterator]();for(let ct=0;ct<gt;ct++){const ft=ut.next();if(ft.done)return[ht,s.empty()];ht.push(ft.value)}return[ht,{[Symbol.iterator](){return ut}}]}s.consume=nt;function rt(lt){return nt(lt)[0]}s.collect=rt;function at(lt,gt,ht=(ut,ct)=>ut===ct){const ut=lt[Symbol.iterator](),ct=gt[Symbol.iterator]();for(;;){const ft=ut.next(),dt=ct.next();if(ft.done!==dt.done)return!1;if(ft.done)return!0;if(!ht(ft.value,dt.value))return!1}}s.equals=at})(Iterable||(Iterable={}));class Node$2{constructor(e){this.element=e,this.next=Node$2.Undefined,this.prev=Node$2.Undefined}}Node$2.Undefined=new Node$2(void 0);class LinkedList{constructor(){this._first=Node$2.Undefined,this._last=Node$2.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Node$2.Undefined}clear(){let e=this._first;for(;e!==Node$2.Undefined;){const i=e.next;e.prev=Node$2.Undefined,e.next=Node$2.Undefined,e=i}this._first=Node$2.Undefined,this._last=Node$2.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,i){const o=new Node$2(e);if(this._first===Node$2.Undefined)this._first=o,this._last=o;else if(i){const c=this._last;this._last=o,o.prev=c,c.next=o}else{const c=this._first;this._first=o,o.next=c,c.prev=o}this._size+=1;let a=!1;return()=>{a||(a=!0,this._remove(o))}}shift(){if(this._first!==Node$2.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Node$2.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Node$2.Undefined&&e.next!==Node$2.Undefined){const i=e.prev;i.next=e.next,e.next.prev=i}else e.prev===Node$2.Undefined&&e.next===Node$2.Undefined?(this._first=Node$2.Undefined,this._last=Node$2.Undefined):e.next===Node$2.Undefined?(this._last=this._last.prev,this._last.next=Node$2.Undefined):e.prev===Node$2.Undefined&&(this._first=this._first.next,this._first.prev=Node$2.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Node$2.Undefined;)yield e.element,e=e.next}}const USUAL_WORD_SEPARATORS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function createWordRegExp(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const i of USUAL_WORD_SEPARATORS)s.indexOf(i)>=0||(e+="\\"+i);return e+="\\s]+)",new RegExp(e,"g")}const DEFAULT_WORD_REGEXP=createWordRegExp();function ensureValidWordDefinition(s){let e=DEFAULT_WORD_REGEXP;if(s&&s instanceof RegExp)if(s.global)e=s;else{let i="g";s.ignoreCase&&(i+="i"),s.multiline&&(i+="m"),s.unicode&&(i+="u"),e=new RegExp(s.source,i)}return e.lastIndex=0,e}const _defaultConfig=new LinkedList;_defaultConfig.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function getWordAtText(s,e,i,o,a){if(a||(a=Iterable.first(_defaultConfig)),i.length>a.maxLen){let k=s-a.maxLen/2;return k<0?k=0:o+=k,i=i.substring(k,s+a.maxLen/2),getWordAtText(s,e,i,o,a)}const c=Date.now(),d=s-1-o;let _=-1,b=null;for(let k=1;!(Date.now()-c>=a.timeBudget);k++){const j=d-a.windowSize*k;e.lastIndex=Math.max(0,j);const _e=_findRegexMatchEnclosingPosition(e,i,d,_);if(!_e&&b||(b=_e,j<=0))break;_=j}if(b){const k={word:b[0],startColumn:o+1+b.index,endColumn:o+1+b.index+b[0].length};return e.lastIndex=0,k}return null}function _findRegexMatchEnclosingPosition(s,e,i,o){let a;for(;a=s.exec(e);){const c=a.index||0;if(c<=i&&s.lastIndex>=i)return a;if(o>0&&c>o)return null}return null}function tail(s,e=0){return s[s.length-(1+e)]}function tail2(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}function equals$1(s,e,i=(o,a)=>o===a){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let o=0,a=s.length;o<a;o++)if(!i(s[o],e[o]))return!1;return!0}function removeFastWithoutKeepingOrder(s,e){const i=s.length-1;e<i&&(s[e]=s[i]),s.pop()}function binarySearch(s,e,i){return binarySearch2(s.length,o=>i(s[o],e))}function binarySearch2(s,e){let i=0,o=s-1;for(;i<=o;){const a=(i+o)/2|0,c=e(a);if(c<0)i=a+1;else if(c>0)o=a-1;else return a}return-(i+1)}function coalesce(s){return s.filter(e=>!!e)}function isFalsyOrEmpty(s){return!Array.isArray(s)||s.length===0}function isNonEmptyArray(s){return Array.isArray(s)&&s.length>0}function distinct(s,e=i=>i){const i=new Set;return s.filter(o=>{const a=e(o);return i.has(a)?!1:(i.add(a),!0)})}function findLast(s,e){const i=lastIndex(s,e);if(i!==-1)return s[i]}function lastIndex(s,e){for(let i=s.length-1;i>=0;i--){const o=s[i];if(e(o))return i}return-1}function firstOrDefault(s,e){return s.length>0?s[0]:e}function range(s,e){let i=typeof e=="number"?s:0;typeof e=="number"?i=s:(i=0,e=s);const o=[];if(i<=e)for(let a=i;a<e;a++)o.push(a);else for(let a=i;a>e;a--)o.push(a);return o}function arrayInsert(s,e,i){const o=s.slice(0,e),a=s.slice(e);return o.concat(i,a)}function pushToStart(s,e){const i=s.indexOf(e);i>-1&&(s.splice(i,1),s.unshift(e))}function pushToEnd(s,e){const i=s.indexOf(e);i>-1&&(s.splice(i,1),s.push(e))}function pushMany(s,e){for(const i of e)s.push(i)}function insertInto(s,e,i){const o=getActualStartIndex(s,e),a=s.length,c=i.length;s.length=a+c;for(let d=a-1;d>=o;d--)s[d+c]=s[d];for(let d=0;d<c;d++)s[d+o]=i[d]}function splice$1(s,e,i,o){const a=getActualStartIndex(s,e),c=s.splice(a,i);return insertInto(s,a,o),c}function getActualStartIndex(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}var CompareResult;(function(s){function e(a){return a<0}s.isLessThan=e;function i(a){return a>0}s.isGreaterThan=i;function o(a){return a===0}s.isNeitherLessOrGreaterThan=o,s.greaterThan=1,s.lessThan=-1,s.neitherLessOrGreaterThan=0})(CompareResult||(CompareResult={}));function compareBy(s,e){return(i,o)=>e(s(i),s(o))}function findMaxBy(s,e){if(s.length===0)return;let i=s[0];for(let o=1;o<s.length;o++){const a=s[o];e(a,i)>0&&(i=a)}return i}function findLastMaxBy(s,e){if(s.length===0)return;let i=s[0];for(let o=1;o<s.length;o++){const a=s[o];e(a,i)>=0&&(i=a)}return i}function findMinBy(s,e){return findMaxBy(s,(i,o)=>-e(i,o))}class ArrayQueue{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let i=this.firstIdx;for(;i<this.items.length&&e(this.items[i]);)i++;const o=i===this.firstIdx?null:this.items.slice(this.firstIdx,i);return this.firstIdx=i,o}takeFromEndWhile(e){let i=this.lastIdx;for(;i>=0&&e(this.items[i]);)i--;const o=i===this.lastIdx?null:this.items.slice(i+1,this.lastIdx+1);return this.lastIdx=i,o}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const i=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,i}}function isArray(s){return Array.isArray(s)}function isString$1(s){return typeof s=="string"}function isObject(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}function isTypedArray(s){const e=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof e}function isNumber$1(s){return typeof s=="number"&&!isNaN(s)}function isIterable(s){return!!s&&typeof s[Symbol.iterator]=="function"}function isBoolean(s){return s===!0||s===!1}function isUndefined(s){return typeof s>"u"}function isDefined(s){return!isUndefinedOrNull(s)}function isUndefinedOrNull(s){return isUndefined(s)||s===null}function assertType(s,e){if(!s)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function isFunction(s){return typeof s=="function"}function validateConstraints(s,e){const i=Math.min(s.length,e.length);for(let o=0;o<i;o++)validateConstraint(s[o],e[o])}function validateConstraint(s,e){if(isString$1(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(isFunction(e)){try{if(s instanceof e)return}catch{}if(!isUndefinedOrNull(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function getAllPropertyNames(s){let e=[],i=Object.getPrototypeOf(s);for(;Object.prototype!==i;)e=e.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return e}function getAllMethodNames(s){const e=[];for(const i of getAllPropertyNames(s))typeof s[i]=="function"&&e.push(i);return e}function createProxyObject$1(s,e){const i=a=>function(){const c=Array.prototype.slice.call(arguments,0);return e(a,c)},o={};for(const a of s)o[a]=i(a);return o}function withNullAsUndefined(s){return s===null?void 0:s}function assertNever(s,e="Unreachable"){throw new Error(e)}function deepClone(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.keys(s).forEach(i=>{s[i]&&typeof s[i]=="object"?e[i]=deepClone(s[i]):e[i]=s[i]}),e}function deepFreeze(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const i=e.shift();Object.freeze(i);for(const o in i)if(_hasOwnProperty.call(i,o)){const a=i[o];typeof a=="object"&&!Object.isFrozen(a)&&!isTypedArray(a)&&e.push(a)}}return s}const _hasOwnProperty=Object.prototype.hasOwnProperty;function cloneAndChange(s,e){return _cloneAndChange(s,e,new Set)}function _cloneAndChange(s,e,i){if(isUndefinedOrNull(s))return s;const o=e(s);if(typeof o<"u")return o;if(isArray(s)){const a=[];for(const c of s)a.push(_cloneAndChange(c,e,i));return a}if(isObject(s)){if(i.has(s))throw new Error("Cannot clone recursive data-structure");i.add(s);const a={};for(const c in s)_hasOwnProperty.call(s,c)&&(a[c]=_cloneAndChange(s[c],e,i));return i.delete(s),a}return s}function mixin(s,e,i=!0){return isObject(s)?(isObject(e)&&Object.keys(e).forEach(o=>{o in s?i&&(isObject(s[o])&&isObject(e[o])?mixin(s[o],e[o],i):s[o]=e[o]):s[o]=e[o]}),s):e}function equals(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let i,o;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(i=0;i<s.length;i++)if(!equals(s[i],e[i]))return!1}else{const a=[];for(o in s)a.push(o);a.sort();const c=[];for(o in e)c.push(o);if(c.sort(),!equals(a,c))return!1;for(i=0;i<a.length;i++)if(!equals(s[a[i]],e[a[i]]))return!1}return!0}const EDITOR_MODEL_DEFAULTS={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},MINIMAP_GUTTER_WIDTH=8;class ConfigurationChangedEvent{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class ComputeOptionsMemory{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class BaseEditorOption{constructor(e,i,o,a){this.id=e,this.name=i,this.defaultValue=o,this.schema=a}applyUpdate(e,i){return applyUpdate(e,i)}compute(e,i,o){return o}}class ApplyUpdateResult{constructor(e,i){this.newValue=e,this.didChange=i}}function applyUpdate(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new ApplyUpdateResult(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const o=Array.isArray(s)&&Array.isArray(e)&&equals$1(s,e);return new ApplyUpdateResult(e,!o)}let i=!1;for(const o in e)if(e.hasOwnProperty(o)){const a=applyUpdate(s[o],e[o]);a.didChange&&(s[o]=a.newValue,i=!0)}return new ApplyUpdateResult(s,i)}class ComputedEditorOption{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,i){return applyUpdate(e,i)}validate(e){return this.defaultValue}}class SimpleEditorOption{constructor(e,i,o,a){this.id=e,this.name=i,this.defaultValue=o,this.schema=a}applyUpdate(e,i){return applyUpdate(e,i)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,i,o){return o}}function boolean(s,e){return typeof s>"u"?e:s==="false"?!1:Boolean(s)}class EditorBooleanOption extends SimpleEditorOption{constructor(e,i,o,a=void 0){typeof a<"u"&&(a.type="boolean",a.default=o),super(e,i,o,a)}validate(e){return boolean(e,this.defaultValue)}}function clampedInt(s,e,i,o){if(typeof s>"u")return e;let a=parseInt(s,10);return isNaN(a)?e:(a=Math.max(i,a),a=Math.min(o,a),a|0)}class EditorIntOption extends SimpleEditorOption{constructor(e,i,o,a,c,d=void 0){typeof d<"u"&&(d.type="integer",d.default=o,d.minimum=a,d.maximum=c),super(e,i,o,d),this.minimum=a,this.maximum=c}static clampedInt(e,i,o,a){return clampedInt(e,i,o,a)}validate(e){return EditorIntOption.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class EditorFloatOption extends SimpleEditorOption{constructor(e,i,o,a,c){typeof c<"u"&&(c.type="number",c.default=o),super(e,i,o,c),this.validationFn=a}static clamp(e,i,o){return e<i?i:e>o?o:e}static float(e,i){if(typeof e=="number")return e;if(typeof e>"u")return i;const o=parseFloat(e);return isNaN(o)?i:o}validate(e){return this.validationFn(EditorFloatOption.float(e,this.defaultValue))}}class EditorStringOption extends SimpleEditorOption{static string(e,i){return typeof e!="string"?i:e}constructor(e,i,o,a=void 0){typeof a<"u"&&(a.type="string",a.default=o),super(e,i,o,a)}validate(e){return EditorStringOption.string(e,this.defaultValue)}}function stringSet(s,e,i){return typeof s!="string"||i.indexOf(s)===-1?e:s}class EditorStringEnumOption extends SimpleEditorOption{constructor(e,i,o,a,c=void 0){typeof c<"u"&&(c.type="string",c.enum=a,c.default=o),super(e,i,o,c),this._allowedValues=a}validate(e){return stringSet(e,this.defaultValue,this._allowedValues)}}class EditorEnumOption extends BaseEditorOption{constructor(e,i,o,a,c,d,_=void 0){typeof _<"u"&&(_.type="string",_.enum=c,_.default=a),super(e,i,o,_),this._allowedValues=c,this._convert=d}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function _autoIndentFromString(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class EditorAccessibilitySupport extends BaseEditorOption{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[localize("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),localize("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),localize("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:localize("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,i,o){return o===0?e.accessibilitySupport:o}}class EditorComments extends BaseEditorOption{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:localize("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:localize("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{insertSpace:boolean(i.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:boolean(i.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function _cursorBlinkingStyleFromString(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var TextEditorCursorStyle$1;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(TextEditorCursorStyle$1||(TextEditorCursorStyle$1={}));function _cursorStyleFromString(s){switch(s){case"line":return TextEditorCursorStyle$1.Line;case"block":return TextEditorCursorStyle$1.Block;case"underline":return TextEditorCursorStyle$1.Underline;case"line-thin":return TextEditorCursorStyle$1.LineThin;case"block-outline":return TextEditorCursorStyle$1.BlockOutline;case"underline-thin":return TextEditorCursorStyle$1.UnderlineThin}}class EditorClassName extends ComputedEditorOption{constructor(){super(130)}compute(e,i,o){const a=["monaco-editor"];return i.get(35)&&a.push(i.get(35)),e.extraEditorClassName&&a.push(e.extraEditorClassName),i.get(68)==="default"?a.push("mouse-default"):i.get(68)==="copy"&&a.push("mouse-copy"),i.get(102)&&a.push("showUnused"),i.get(128)&&a.push("showDeprecated"),a.join(" ")}}class EditorEmptySelectionClipboard extends EditorBooleanOption{constructor(){super(33,"emptySelectionClipboard",!0,{description:localize("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,i,o){return o&&e.emptySelectionClipboard}}class EditorFind extends BaseEditorOption{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(37,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:localize("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[localize("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),localize("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),localize("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:localize("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[localize("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),localize("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),localize("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:localize("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:localize("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:isMacintosh},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:localize("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:localize("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{cursorMoveOnType:boolean(i.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":stringSet(i.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":stringSet(i.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:boolean(i.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:boolean(i.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:boolean(i.loop,this.defaultValue.loop)}}}class EditorFontLigatures extends BaseEditorOption{constructor(){super(47,"fontLigatures",EditorFontLigatures.OFF,{anyOf:[{type:"boolean",description:localize("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:localize("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:localize("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?EditorFontLigatures.OFF:e==="true"?EditorFontLigatures.ON:e:Boolean(e)?EditorFontLigatures.ON:EditorFontLigatures.OFF}}EditorFontLigatures.OFF='"liga" off, "calt" off';EditorFontLigatures.ON='"liga" on, "calt" on';class EditorFontInfo extends ComputedEditorOption{constructor(){super(46)}compute(e,i,o){return e.fontInfo}}class EditorFontSize extends SimpleEditorOption{constructor(){super(48,"fontSize",EDITOR_FONT_DEFAULTS.fontSize,{type:"number",minimum:6,maximum:100,default:EDITOR_FONT_DEFAULTS.fontSize,description:localize("fontSize","Controls the font size in pixels.")})}validate(e){const i=EditorFloatOption.float(e,this.defaultValue);return i===0?EDITOR_FONT_DEFAULTS.fontSize:EditorFloatOption.clamp(i,6,100)}compute(e,i,o){return e.fontInfo.fontSize}}class EditorFontWeight extends BaseEditorOption{constructor(){super(49,"fontWeight",EDITOR_FONT_DEFAULTS.fontWeight,{anyOf:[{type:"number",minimum:EditorFontWeight.MINIMUM_VALUE,maximum:EditorFontWeight.MAXIMUM_VALUE,errorMessage:localize("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:EditorFontWeight.SUGGESTION_VALUES}],default:EDITOR_FONT_DEFAULTS.fontWeight,description:localize("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(EditorIntOption.clampedInt(e,EDITOR_FONT_DEFAULTS.fontWeight,EditorFontWeight.MINIMUM_VALUE,EditorFontWeight.MAXIMUM_VALUE))}}EditorFontWeight.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];EditorFontWeight.MINIMUM_VALUE=1;EditorFontWeight.MAXIMUM_VALUE=1e3;class EditorGoToLocation extends BaseEditorOption{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},i={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[localize("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),localize("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),localize("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},o=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(53,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:localize("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:localize("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:localize("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleDeclarations":Object.assign({description:localize("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleImplementations":Object.assign({description:localize("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleReferences":Object.assign({description:localize("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},i),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:o,description:localize("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:o,description:localize("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:o,description:localize("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:o,description:localize("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:o,description:localize("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var i,o,a,c,d;if(!e||typeof e!="object")return this.defaultValue;const _=e;return{multiple:stringSet(_.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(i=_.multipleDefinitions)!==null&&i!==void 0?i:stringSet(_.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(o=_.multipleTypeDefinitions)!==null&&o!==void 0?o:stringSet(_.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(a=_.multipleDeclarations)!==null&&a!==void 0?a:stringSet(_.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(c=_.multipleImplementations)!==null&&c!==void 0?c:stringSet(_.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(d=_.multipleReferences)!==null&&d!==void 0?d:stringSet(_.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:EditorStringOption.string(_.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:EditorStringOption.string(_.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:EditorStringOption.string(_.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:EditorStringOption.string(_.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:EditorStringOption.string(_.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class EditorHover extends BaseEditorOption{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(55,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:localize("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:localize("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:localize("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:localize("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:boolean(i.enabled,this.defaultValue.enabled),delay:EditorIntOption.clampedInt(i.delay,this.defaultValue.delay,0,1e4),sticky:boolean(i.sticky,this.defaultValue.sticky),above:boolean(i.above,this.defaultValue.above)}}}class EditorLayoutInfoComputer extends ComputedEditorOption{constructor(){super(133)}compute(e,i,o){return EditorLayoutInfoComputer.computeLayout(i,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const i=e.height/e.lineHeight,o=e.scrollBeyondLastLine?i-1:0,a=(e.viewLineCount+o)/(e.pixelRatio*e.height),c=Math.floor(e.viewLineCount/a);return{typicalViewportLineCount:i,extraLinesBeyondLastLine:o,desiredRatio:a,minimapLineCount:c}}static _computeMinimapLayout(e,i){const o=e.outerWidth,a=e.outerHeight,c=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(c*a),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:a};const d=i.stableMinimapLayoutInput,_=d&&e.outerHeight===d.outerHeight&&e.lineHeight===d.lineHeight&&e.typicalHalfwidthCharacterWidth===d.typicalHalfwidthCharacterWidth&&e.pixelRatio===d.pixelRatio&&e.scrollBeyondLastLine===d.scrollBeyondLastLine&&e.minimap.enabled===d.minimap.enabled&&e.minimap.side===d.minimap.side&&e.minimap.size===d.minimap.size&&e.minimap.showSlider===d.minimap.showSlider&&e.minimap.renderCharacters===d.minimap.renderCharacters&&e.minimap.maxColumn===d.minimap.maxColumn&&e.minimap.scale===d.minimap.scale&&e.verticalScrollbarWidth===d.verticalScrollbarWidth&&e.isViewportWrapping===d.isViewportWrapping,b=e.lineHeight,k=e.typicalHalfwidthCharacterWidth,j=e.scrollBeyondLastLine,_e=e.minimap.renderCharacters;let et=c>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const tt=e.minimap.maxColumn,it=e.minimap.size,st=e.minimap.side,ot=e.verticalScrollbarWidth,nt=e.viewLineCount,rt=e.remainingWidth,at=e.isViewportWrapping,lt=_e?2:3;let gt=Math.floor(c*a);const ht=gt/c;let ut=!1,ct=!1,ft=lt*et,dt=et/c,pt=1;if(it==="fill"||it==="fit"){const{typicalViewportLineCount:Tt,extraLinesBeyondLastLine:kt,desiredRatio:Rt,minimapLineCount:St}=EditorLayoutInfoComputer.computeContainedMinimapLineCount({viewLineCount:nt,scrollBeyondLastLine:j,height:a,lineHeight:b,pixelRatio:c});if(nt/St>1)ut=!0,ct=!0,et=1,ft=1,dt=et/c;else{let It=!1,xt=et+1;if(it==="fit"){const Mt=Math.ceil((nt+kt)*ft);at&&_&&rt<=i.stableFitRemainingWidth?(It=!0,xt=i.stableFitMaxMinimapScale):It=Mt>gt}if(it==="fill"||It){ut=!0;const Mt=et;ft=Math.min(b*c,Math.max(1,Math.floor(1/Rt))),at&&_&&rt<=i.stableFitRemainingWidth&&(xt=i.stableFitMaxMinimapScale),et=Math.min(xt,Math.max(1,Math.floor(ft/lt))),et>Mt&&(pt=Math.min(2,et/Mt)),dt=et/c/pt,gt=Math.ceil(Math.max(Tt,nt+kt)*ft),at?(i.stableMinimapLayoutInput=e,i.stableFitRemainingWidth=rt,i.stableFitMaxMinimapScale=et):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const mt=Math.floor(tt*dt),_t=Math.min(mt,Math.max(0,Math.floor((rt-ot-2)*dt/(k+dt)))+MINIMAP_GUTTER_WIDTH);let Ct=Math.floor(c*_t);const bt=Ct/c;Ct=Math.floor(Ct*pt);const yt=_e?1:2,wt=st==="left"?0:o-_t-ot;return{renderMinimap:yt,minimapLeft:wt,minimapWidth:_t,minimapHeightIsEditorHeight:ut,minimapIsSampling:ct,minimapScale:et,minimapLineHeight:ft,minimapCanvasInnerWidth:Ct,minimapCanvasInnerHeight:gt,minimapCanvasOuterWidth:bt,minimapCanvasOuterHeight:ht}}static computeLayout(e,i){const o=i.outerWidth|0,a=i.outerHeight|0,c=i.lineHeight|0,d=i.lineNumbersDigitCount|0,_=i.typicalHalfwidthCharacterWidth,b=i.maxDigitWidth,k=i.pixelRatio,j=i.viewLineCount,_e=e.get(125),et=_e==="inherit"?e.get(124):_e,tt=et==="inherit"?e.get(120):et,it=e.get(123),st=e.get(2),ot=i.isDominatedByLongLines,nt=e.get(52),rt=e.get(62).renderType!==0,at=e.get(63),lt=e.get(96),gt=e.get(67),ht=e.get(94),ut=ht.verticalScrollbarSize,ct=ht.verticalHasArrows,ft=ht.arrowSize,dt=ht.horizontalScrollbarSize,pt=e.get(60),mt=e.get(39),_t=e.get(101)!=="never";let Ct;if(typeof pt=="string"&&/^\d+(\.\d+)?ch$/.test(pt)){const Wt=parseFloat(pt.substr(0,pt.length-2));Ct=EditorIntOption.clampedInt(Wt*_,0,0,1e3)}else Ct=EditorIntOption.clampedInt(pt,0,0,1e3);mt&&_t&&(Ct+=16);let bt=0;if(rt){const Wt=Math.max(d,at);bt=Math.round(Wt*b)}let yt=0;nt&&(yt=c);let wt=0,Tt=wt+yt,kt=Tt+bt,Rt=kt+Ct;const St=o-yt-bt-Ct;let Lt=!1,It=!1,xt=-1;st!==2&&(et==="inherit"&&ot?(Lt=!0,It=!0):tt==="on"||tt==="bounded"?It=!0:tt==="wordWrapColumn"&&(xt=it));const Mt=EditorLayoutInfoComputer._computeMinimapLayout({outerWidth:o,outerHeight:a,lineHeight:c,typicalHalfwidthCharacterWidth:_,pixelRatio:k,scrollBeyondLastLine:lt,minimap:gt,verticalScrollbarWidth:ut,viewLineCount:j,remainingWidth:St,isViewportWrapping:It},i.memory||new ComputeOptionsMemory);Mt.renderMinimap!==0&&Mt.minimapLeft===0&&(wt+=Mt.minimapWidth,Tt+=Mt.minimapWidth,kt+=Mt.minimapWidth,Rt+=Mt.minimapWidth);const Pt=St-Mt.minimapWidth,Ft=Math.max(1,Math.floor((Pt-ut-2)/_)),Bt=ct?ft:0;return It&&(xt=Math.max(1,Ft),tt==="bounded"&&(xt=Math.min(xt,it))),{width:o,height:a,glyphMarginLeft:wt,glyphMarginWidth:yt,lineNumbersLeft:Tt,lineNumbersWidth:bt,decorationsLeft:kt,decorationsWidth:Ct,contentLeft:Rt,contentWidth:Pt,minimap:Mt,viewportColumn:Ft,isWordWrapMinified:Lt,isViewportWrapping:It,wrappingColumn:xt,verticalScrollbarWidth:ut,horizontalScrollbarHeight:dt,overviewRuler:{top:Bt,width:ut,height:a-2*Bt,right:0}}}}class EditorLightbulb extends BaseEditorOption{constructor(){const e={enabled:!0};super(59,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:localize("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:boolean(e.enabled,this.defaultValue.enabled)}}}class EditorExperimental extends BaseEditorOption{constructor(){const e={stickyScroll:{enabled:!1}};super(34,"experimental",e,{"editor.experimental.stickyScroll.enabled":{type:"boolean",default:e.stickyScroll.enabled,description:localize("editor.experimental.stickyScroll","Shows the nested current scopes during the scroll at the top of the editor.")}})}validate(e){var i;return!e||typeof e!="object"?this.defaultValue:{stickyScroll:{enabled:boolean((i=e.stickyScroll)===null||i===void 0?void 0:i.enabled,this.defaultValue.stickyScroll.enabled)}}}}class EditorInlayHints extends BaseEditorOption{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(129,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:localize("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[localize("editor.inlayHints.on","Inlay hints are enabled"),localize("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding `Ctrl+Alt`"),localize("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding `Ctrl+Alt`"),localize("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:localize("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:localize("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:localize("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return typeof i.enabled=="boolean"&&(i.enabled=i.enabled?"on":"off"),{enabled:stringSet(i.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:EditorIntOption.clampedInt(i.fontSize,this.defaultValue.fontSize,0,100),fontFamily:EditorStringOption.string(i.fontFamily,this.defaultValue.fontFamily),padding:boolean(i.padding,this.defaultValue.padding)}}}class EditorLineHeight extends EditorFloatOption{constructor(){super(61,"lineHeight",EDITOR_FONT_DEFAULTS.lineHeight,e=>EditorFloatOption.clamp(e,0,150),{markdownDescription:localize("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,i,o){return e.fontInfo.lineHeight}}class EditorMinimap extends BaseEditorOption{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(67,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:localize("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:localize("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[localize("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),localize("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),localize("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:localize("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:localize("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:localize("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:localize("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:localize("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:localize("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:boolean(i.enabled,this.defaultValue.enabled),autohide:boolean(i.autohide,this.defaultValue.autohide),size:stringSet(i.size,this.defaultValue.size,["proportional","fill","fit"]),side:stringSet(i.side,this.defaultValue.side,["right","left"]),showSlider:stringSet(i.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:boolean(i.renderCharacters,this.defaultValue.renderCharacters),scale:EditorIntOption.clampedInt(i.scale,1,1,3),maxColumn:EditorIntOption.clampedInt(i.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function _multiCursorModifierFromString(s){return s==="ctrlCmd"?isMacintosh?"metaKey":"ctrlKey":"altKey"}class EditorPadding extends BaseEditorOption{constructor(){super(77,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:localize("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:localize("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{top:EditorIntOption.clampedInt(i.top,0,0,1e3),bottom:EditorIntOption.clampedInt(i.bottom,0,0,1e3)}}}class EditorParameterHints extends BaseEditorOption{constructor(){const e={enabled:!0,cycle:!1};super(78,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:localize("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:localize("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:boolean(i.enabled,this.defaultValue.enabled),cycle:boolean(i.cycle,this.defaultValue.cycle)}}}class EditorPixelRatio extends ComputedEditorOption{constructor(){super(131)}compute(e,i,o){return e.pixelRatio}}class EditorQuickSuggestions extends BaseEditorOption{constructor(){const e={other:"on",comments:"off",strings:"off"},i=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[localize("on","Quick suggestions show inside the suggest widget"),localize("inline","Quick suggestions show as ghost text"),localize("off","Quick suggestions are disabled")]}];super(81,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:i,default:e.strings,description:localize("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:i,default:e.comments,description:localize("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:i,default:e.other,description:localize("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:localize("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const k=e?"on":"off";return{comments:k,strings:k,other:k}}if(!e||typeof e!="object")return this.defaultValue;const{other:i,comments:o,strings:a}=e,c=["on","inline","off"];let d,_,b;return typeof i=="boolean"?d=i?"on":"off":d=stringSet(i,this.defaultValue.other,c),typeof o=="boolean"?_=o?"on":"off":_=stringSet(o,this.defaultValue.comments,c),typeof a=="boolean"?b=a?"on":"off":b=stringSet(a,this.defaultValue.strings,c),{other:d,comments:_,strings:b}}}class EditorRenderLineNumbersOption extends BaseEditorOption{constructor(){super(62,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[localize("lineNumbers.off","Line numbers are not rendered."),localize("lineNumbers.on","Line numbers are rendered as absolute number."),localize("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),localize("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:localize("lineNumbers","Controls the display of line numbers.")})}validate(e){let i=this.defaultValue.renderType,o=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(i=4,o=e):e==="interval"?i=3:e==="relative"?i=2:e==="on"?i=1:i=0),{renderType:i,renderFn:o}}}function filterValidationDecorations(s){const e=s.get(89);return e==="editable"?s.get(83):e!=="on"}class EditorRulers extends BaseEditorOption{constructor(){const e=[],i={type:"number",description:localize("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(93,"rulers",e,{type:"array",items:{anyOf:[i,{type:["object"],properties:{column:i,color:{type:"string",description:localize("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:localize("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const i=[];for(const o of e)if(typeof o=="number")i.push({column:EditorIntOption.clampedInt(o,0,0,1e4),color:null});else if(o&&typeof o=="object"){const a=o;i.push({column:EditorIntOption.clampedInt(a.column,0,0,1e4),color:a.color})}return i.sort((o,a)=>o.column-a.column),i}return this.defaultValue}}function _scrollbarVisibilityFromString(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}class EditorScrollbar$1 extends BaseEditorOption{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(94,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[localize("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),localize("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),localize("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:localize("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[localize("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),localize("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),localize("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:localize("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:localize("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:localize("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:localize("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e,o=EditorIntOption.clampedInt(i.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),a=EditorIntOption.clampedInt(i.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:EditorIntOption.clampedInt(i.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:_scrollbarVisibilityFromString(i.vertical,this.defaultValue.vertical),horizontal:_scrollbarVisibilityFromString(i.horizontal,this.defaultValue.horizontal),useShadows:boolean(i.useShadows,this.defaultValue.useShadows),verticalHasArrows:boolean(i.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:boolean(i.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:boolean(i.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:boolean(i.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:o,horizontalSliderSize:EditorIntOption.clampedInt(i.horizontalSliderSize,o,0,1e3),verticalScrollbarSize:a,verticalSliderSize:EditorIntOption.clampedInt(i.verticalSliderSize,a,0,1e3),scrollByPage:boolean(i.scrollByPage,this.defaultValue.scrollByPage)}}}const inUntrustedWorkspace="inUntrustedWorkspace",unicodeHighlightConfigKeys={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class UnicodeHighlight extends BaseEditorOption{constructor(){const e={nonBasicASCII:inUntrustedWorkspace,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:inUntrustedWorkspace,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(115,"unicodeHighlight",e,{[unicodeHighlightConfigKeys.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,inUntrustedWorkspace],default:e.nonBasicASCII,description:localize("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[unicodeHighlightConfigKeys.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:localize("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[unicodeHighlightConfigKeys.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:localize("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[unicodeHighlightConfigKeys.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,inUntrustedWorkspace],default:e.includeComments,description:localize("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[unicodeHighlightConfigKeys.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,inUntrustedWorkspace],default:e.includeStrings,description:localize("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to unicode highlighting.")},[unicodeHighlightConfigKeys.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:localize("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[unicodeHighlightConfigKeys.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:localize("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,i){let o=!1;i.allowedCharacters&&e&&(equals(e.allowedCharacters,i.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:i.allowedCharacters}),o=!0)),i.allowedLocales&&e&&(equals(e.allowedLocales,i.allowedLocales)||(e=Object.assign(Object.assign({},e),{allowedLocales:i.allowedLocales}),o=!0));const a=super.applyUpdate(e,i);return o?new ApplyUpdateResult(a.newValue,!0):a}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{nonBasicASCII:primitiveSet(i.nonBasicASCII,inUntrustedWorkspace,[!0,!1,inUntrustedWorkspace]),invisibleCharacters:boolean(i.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:boolean(i.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:primitiveSet(i.includeComments,inUntrustedWorkspace,[!0,!1,inUntrustedWorkspace]),includeStrings:primitiveSet(i.includeStrings,inUntrustedWorkspace,[!0,!1,inUntrustedWorkspace]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,i){if(typeof e!="object"||!e)return i;const o={};for(const[a,c]of Object.entries(e))c===!0&&(o[a]=!0);return o}}class InlineEditorSuggest extends BaseEditorOption{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(57,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:localize("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:boolean(i.enabled,this.defaultValue.enabled),mode:stringSet(i.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class BracketPairColorization extends BaseEditorOption{constructor(){const e={enabled:EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:localize("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:localize("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{enabled:boolean(i.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:boolean(i.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class GuideOptions extends BaseEditorOption{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[localize("editor.guides.bracketPairs.true","Enables bracket pair guides."),localize("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),localize("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:localize("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[localize("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),localize("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),localize("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:localize("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:localize("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:localize("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[localize("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),localize("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),localize("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:localize("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{bracketPairs:primitiveSet(i.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:primitiveSet(i.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:boolean(i.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:boolean(i.indentation,this.defaultValue.indentation),highlightActiveIndentation:primitiveSet(i.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function primitiveSet(s,e,i){const o=i.indexOf(s);return o===-1?e:i[o]}class EditorSuggest extends BaseEditorOption{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(108,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[localize("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),localize("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:localize("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:localize("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:localize("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:localize("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:localize("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:localize("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:localize("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:localize("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:localize("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:localize("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:localize("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:localize("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const i=e;return{insertMode:stringSet(i.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:boolean(i.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:boolean(i.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:boolean(i.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:boolean(i.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:boolean(i.showIcons,this.defaultValue.showIcons),showStatusBar:boolean(i.showStatusBar,this.defaultValue.showStatusBar),preview:boolean(i.preview,this.defaultValue.preview),previewMode:stringSet(i.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:boolean(i.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:boolean(i.showMethods,this.defaultValue.showMethods),showFunctions:boolean(i.showFunctions,this.defaultValue.showFunctions),showConstructors:boolean(i.showConstructors,this.defaultValue.showConstructors),showDeprecated:boolean(i.showDeprecated,this.defaultValue.showDeprecated),showFields:boolean(i.showFields,this.defaultValue.showFields),showVariables:boolean(i.showVariables,this.defaultValue.showVariables),showClasses:boolean(i.showClasses,this.defaultValue.showClasses),showStructs:boolean(i.showStructs,this.defaultValue.showStructs),showInterfaces:boolean(i.showInterfaces,this.defaultValue.showInterfaces),showModules:boolean(i.showModules,this.defaultValue.showModules),showProperties:boolean(i.showProperties,this.defaultValue.showProperties),showEvents:boolean(i.showEvents,this.defaultValue.showEvents),showOperators:boolean(i.showOperators,this.defaultValue.showOperators),showUnits:boolean(i.showUnits,this.defaultValue.showUnits),showValues:boolean(i.showValues,this.defaultValue.showValues),showConstants:boolean(i.showConstants,this.defaultValue.showConstants),showEnums:boolean(i.showEnums,this.defaultValue.showEnums),showEnumMembers:boolean(i.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:boolean(i.showKeywords,this.defaultValue.showKeywords),showWords:boolean(i.showWords,this.defaultValue.showWords),showColors:boolean(i.showColors,this.defaultValue.showColors),showFiles:boolean(i.showFiles,this.defaultValue.showFiles),showReferences:boolean(i.showReferences,this.defaultValue.showReferences),showFolders:boolean(i.showFolders,this.defaultValue.showFolders),showTypeParameters:boolean(i.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:boolean(i.showSnippets,this.defaultValue.showSnippets),showUsers:boolean(i.showUsers,this.defaultValue.showUsers),showIssues:boolean(i.showIssues,this.defaultValue.showIssues)}}}class SmartSelect extends BaseEditorOption{constructor(){super(104,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:localize("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:boolean(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class EditorTabFocusMode extends ComputedEditorOption{constructor(){super(132)}compute(e,i,o){return i.get(83)?!0:e.tabFocusMode}}function _wrappingIndentFromString(s){switch(s){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class EditorWrappingInfoComputer extends ComputedEditorOption{constructor(){super(134)}compute(e,i,o){const a=i.get(133);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:a.isWordWrapMinified,isViewportWrapping:a.isViewportWrapping,wrappingColumn:a.wrappingColumn}}}class EditorDropIntoEditor extends BaseEditorOption{constructor(){const e={enabled:!0};super(32,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:localize("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down `shift` (instead of opening the file in an editor).")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:boolean(e.enabled,this.defaultValue.enabled)}}}const DEFAULT_WINDOWS_FONT_FAMILY="Consolas, 'Courier New', monospace",DEFAULT_MAC_FONT_FAMILY="Menlo, Monaco, 'Courier New', monospace",DEFAULT_LINUX_FONT_FAMILY="'Droid Sans Mono', 'monospace', monospace",EDITOR_FONT_DEFAULTS={fontFamily:isMacintosh?DEFAULT_MAC_FONT_FAMILY:isLinux?DEFAULT_LINUX_FONT_FAMILY:DEFAULT_WINDOWS_FONT_FAMILY,fontWeight:"normal",fontSize:isMacintosh?12:14,lineHeight:0,letterSpacing:0},editorOptionsRegistry=[];function register$1(s){return editorOptionsRegistry[s.id]=s,s}const EditorOptions={acceptSuggestionOnCommitCharacter:register$1(new EditorBooleanOption(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:localize("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`; `) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:register$1(new EditorStringEnumOption(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",localize("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:localize("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:register$1(new EditorAccessibilitySupport),accessibilityPageSize:register$1(new EditorIntOption(3,"accessibilityPageSize",10,1,1073741824,{description:localize("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:register$1(new EditorStringOption(4,"ariaLabel",localize("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:register$1(new EditorStringEnumOption(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",localize("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),localize("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:localize("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:register$1(new EditorStringEnumOption(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",localize("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:localize("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:register$1(new EditorStringEnumOption(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",localize("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:localize("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:register$1(new EditorStringEnumOption(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",localize("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),localize("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:localize("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:register$1(new EditorEnumOption(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],_autoIndentFromString,{enumDescriptions:[localize("editor.autoIndent.none","The editor will not insert indentation automatically."),localize("editor.autoIndent.keep","The editor will keep the current line's indentation."),localize("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),localize("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),localize("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:localize("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:register$1(new EditorBooleanOption(10,"automaticLayout",!1)),autoSurround:register$1(new EditorStringEnumOption(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[localize("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),localize("editor.autoSurround.quotes","Surround with quotes but not brackets."),localize("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:localize("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:register$1(new BracketPairColorization),bracketPairGuides:register$1(new GuideOptions),stickyTabStops:register$1(new EditorBooleanOption(106,"stickyTabStops",!1,{description:localize("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:register$1(new EditorBooleanOption(14,"codeLens",!0,{description:localize("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:register$1(new EditorStringOption(15,"codeLensFontFamily","",{description:localize("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:register$1(new EditorIntOption(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:localize("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:register$1(new EditorBooleanOption(17,"colorDecorators",!0,{description:localize("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:register$1(new EditorBooleanOption(18,"columnSelection",!1,{description:localize("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:register$1(new EditorComments),contextmenu:register$1(new EditorBooleanOption(20,"contextmenu",!0)),copyWithSyntaxHighlighting:register$1(new EditorBooleanOption(21,"copyWithSyntaxHighlighting",!0,{description:localize("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:register$1(new EditorEnumOption(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],_cursorBlinkingStyleFromString,{description:localize("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:register$1(new EditorBooleanOption(23,"cursorSmoothCaretAnimation",!1,{description:localize("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:register$1(new EditorEnumOption(24,"cursorStyle",TextEditorCursorStyle$1.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],_cursorStyleFromString,{description:localize("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:register$1(new EditorIntOption(25,"cursorSurroundingLines",0,0,1073741824,{description:localize("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:register$1(new EditorStringEnumOption(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[localize("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),localize("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:localize("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:register$1(new EditorIntOption(27,"cursorWidth",0,0,1073741824,{markdownDescription:localize("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:register$1(new EditorBooleanOption(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:register$1(new EditorBooleanOption(29,"disableMonospaceOptimizations",!1)),domReadOnly:register$1(new EditorBooleanOption(30,"domReadOnly",!1)),dragAndDrop:register$1(new EditorBooleanOption(31,"dragAndDrop",!0,{description:localize("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:register$1(new EditorEmptySelectionClipboard),dropIntoEditor:register$1(new EditorDropIntoEditor),experimental:register$1(new EditorExperimental),extraEditorClassName:register$1(new EditorStringOption(35,"extraEditorClassName","")),fastScrollSensitivity:register$1(new EditorFloatOption(36,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:localize("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:register$1(new EditorFind),fixedOverflowWidgets:register$1(new EditorBooleanOption(38,"fixedOverflowWidgets",!1)),folding:register$1(new EditorBooleanOption(39,"folding",!0,{description:localize("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:register$1(new EditorStringEnumOption(40,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[localize("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),localize("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:localize("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:register$1(new EditorBooleanOption(41,"foldingHighlight",!0,{description:localize("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:register$1(new EditorBooleanOption(42,"foldingImportsByDefault",!1,{description:localize("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:register$1(new EditorIntOption(43,"foldingMaximumRegions",5e3,10,65e3,{description:localize("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:register$1(new EditorBooleanOption(44,"unfoldOnClickAfterEndOfLine",!1,{description:localize("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:register$1(new EditorStringOption(45,"fontFamily",EDITOR_FONT_DEFAULTS.fontFamily,{description:localize("fontFamily","Controls the font family.")})),fontInfo:register$1(new EditorFontInfo),fontLigatures2:register$1(new EditorFontLigatures),fontSize:register$1(new EditorFontSize),fontWeight:register$1(new EditorFontWeight),formatOnPaste:register$1(new EditorBooleanOption(50,"formatOnPaste",!1,{description:localize("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:register$1(new EditorBooleanOption(51,"formatOnType",!1,{description:localize("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:register$1(new EditorBooleanOption(52,"glyphMargin",!0,{description:localize("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:register$1(new EditorGoToLocation),hideCursorInOverviewRuler:register$1(new EditorBooleanOption(54,"hideCursorInOverviewRuler",!1,{description:localize("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:register$1(new EditorHover),inDiffEditor:register$1(new EditorBooleanOption(56,"inDiffEditor",!1)),letterSpacing:register$1(new EditorFloatOption(58,"letterSpacing",EDITOR_FONT_DEFAULTS.letterSpacing,s=>EditorFloatOption.clamp(s,-5,20),{description:localize("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:register$1(new EditorLightbulb),lineDecorationsWidth:register$1(new SimpleEditorOption(60,"lineDecorationsWidth",10)),lineHeight:register$1(new EditorLineHeight),lineNumbers:register$1(new EditorRenderLineNumbersOption),lineNumbersMinChars:register$1(new EditorIntOption(63,"lineNumbersMinChars",5,1,300)),linkedEditing:register$1(new EditorBooleanOption(64,"linkedEditing",!1,{description:localize("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:register$1(new EditorBooleanOption(65,"links",!0,{description:localize("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:register$1(new EditorStringEnumOption(66,"matchBrackets","always",["always","near","never"],{description:localize("matchBrackets","Highlight matching brackets.")})),minimap:register$1(new EditorMinimap),mouseStyle:register$1(new EditorStringEnumOption(68,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:register$1(new EditorFloatOption(69,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:localize("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:register$1(new EditorBooleanOption(70,"mouseWheelZoom",!1,{markdownDescription:localize("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:register$1(new EditorBooleanOption(71,"multiCursorMergeOverlapping",!0,{description:localize("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:register$1(new EditorEnumOption(72,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],_multiCursorModifierFromString,{markdownEnumDescriptions:[localize("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),localize("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:localize({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:register$1(new EditorStringEnumOption(73,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[localize("multiCursorPaste.spread","Each cursor pastes a single line of the text."),localize("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:localize("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:register$1(new EditorBooleanOption(74,"occurrencesHighlight",!0,{description:localize("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:register$1(new EditorBooleanOption(75,"overviewRulerBorder",!0,{description:localize("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:register$1(new EditorIntOption(76,"overviewRulerLanes",3,0,3)),padding:register$1(new EditorPadding),parameterHints:register$1(new EditorParameterHints),peekWidgetDefaultFocus:register$1(new EditorStringEnumOption(79,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[localize("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),localize("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:localize("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:register$1(new EditorBooleanOption(80,"definitionLinkOpensInPeek",!1,{description:localize("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:register$1(new EditorQuickSuggestions),quickSuggestionsDelay:register$1(new EditorIntOption(82,"quickSuggestionsDelay",10,0,1073741824,{description:localize("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:register$1(new EditorBooleanOption(83,"readOnly",!1)),renameOnType:register$1(new EditorBooleanOption(84,"renameOnType",!1,{description:localize("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:localize("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:register$1(new EditorBooleanOption(85,"renderControlCharacters",!0,{description:localize("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:register$1(new EditorBooleanOption(86,"renderFinalNewline",!0,{description:localize("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:register$1(new EditorStringEnumOption(87,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",localize("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:localize("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:register$1(new EditorBooleanOption(88,"renderLineHighlightOnlyWhenFocus",!1,{description:localize("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:register$1(new EditorStringEnumOption(89,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:register$1(new EditorStringEnumOption(90,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",localize("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),localize("renderWhitespace.selection","Render whitespace characters only on selected text."),localize("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:localize("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:register$1(new EditorIntOption(91,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:register$1(new EditorBooleanOption(92,"roundedSelection",!0,{description:localize("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:register$1(new EditorRulers),scrollbar:register$1(new EditorScrollbar$1),scrollBeyondLastColumn:register$1(new EditorIntOption(95,"scrollBeyondLastColumn",4,0,1073741824,{description:localize("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:register$1(new EditorBooleanOption(96,"scrollBeyondLastLine",!0,{description:localize("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:register$1(new EditorBooleanOption(97,"scrollPredominantAxis",!0,{description:localize("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:register$1(new EditorBooleanOption(98,"selectionClipboard",!0,{description:localize("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:isLinux})),selectionHighlight:register$1(new EditorBooleanOption(99,"selectionHighlight",!0,{description:localize("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:register$1(new EditorBooleanOption(100,"selectOnLineNumbers",!0)),showFoldingControls:register$1(new EditorStringEnumOption(101,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[localize("showFoldingControls.always","Always show the folding controls."),localize("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),localize("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:localize("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:register$1(new EditorBooleanOption(102,"showUnused",!0,{description:localize("showUnused","Controls fading out of unused code.")})),showDeprecated:register$1(new EditorBooleanOption(128,"showDeprecated",!0,{description:localize("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:register$1(new EditorInlayHints),snippetSuggestions:register$1(new EditorStringEnumOption(103,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[localize("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),localize("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),localize("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),localize("snippetSuggestions.none","Do not show snippet suggestions.")],description:localize("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:register$1(new SmartSelect),smoothScrolling:register$1(new EditorBooleanOption(105,"smoothScrolling",!1,{description:localize("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:register$1(new EditorIntOption(107,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:register$1(new EditorSuggest),inlineSuggest:register$1(new InlineEditorSuggest),suggestFontSize:register$1(new EditorIntOption(109,"suggestFontSize",0,0,1e3,{markdownDescription:localize("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:register$1(new EditorIntOption(110,"suggestLineHeight",0,0,1e3,{markdownDescription:localize("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:register$1(new EditorBooleanOption(111,"suggestOnTriggerCharacters",!0,{description:localize("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:register$1(new EditorStringEnumOption(112,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[localize("suggestSelection.first","Always select the first suggestion."),localize("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),localize("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:localize("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:register$1(new EditorStringEnumOption(113,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[localize("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),localize("tabCompletion.off","Disable tab completions."),localize("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:localize("tabCompletion","Enables tab completions.")})),tabIndex:register$1(new EditorIntOption(114,"tabIndex",0,-1,1073741824)),unicodeHighlight:register$1(new UnicodeHighlight),unusualLineTerminators:register$1(new EditorStringEnumOption(116,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[localize("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),localize("unusualLineTerminators.off","Unusual line terminators are ignored."),localize("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:localize("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:register$1(new EditorBooleanOption(117,"useShadowDOM",!0)),useTabStops:register$1(new EditorBooleanOption(118,"useTabStops",!0,{description:localize("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:register$1(new EditorStringOption(119,"wordSeparators",USUAL_WORD_SEPARATORS,{description:localize("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:register$1(new EditorStringEnumOption(120,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[localize("wordWrap.off","Lines will never wrap."),localize("wordWrap.on","Lines will wrap at the viewport width."),localize({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),localize({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:localize({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:register$1(new EditorStringOption(121,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:register$1(new EditorStringOption(122,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:register$1(new EditorIntOption(123,"wordWrapColumn",80,1,1073741824,{markdownDescription:localize({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:register$1(new EditorStringEnumOption(124,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:register$1(new EditorStringEnumOption(125,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:register$1(new EditorEnumOption(126,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],_wrappingIndentFromString,{enumDescriptions:[localize("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),localize("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),localize("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),localize("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:localize("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:register$1(new EditorStringEnumOption(127,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[localize("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),localize("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:localize("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:register$1(new EditorClassName),pixelRatio:register$1(new EditorPixelRatio),tabFocusMode:register$1(new EditorTabFocusMode),layoutInfo:register$1(new EditorLayoutInfoComputer),wrappingInfo:register$1(new EditorWrappingInfoComputer)};class ErrorHandler{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ErrorNoTelemetry.isErrorNoTelemetry(e)?new ErrorNoTelemetry(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(i=>{i(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const errorHandler=new ErrorHandler;function onUnexpectedError(s){isCancellationError(s)||errorHandler.onUnexpectedError(s)}function onUnexpectedExternalError(s){isCancellationError(s)||errorHandler.onUnexpectedExternalError(s)}function transformErrorForSerialization(s){if(s instanceof Error){const{name:e,message:i}=s,o=s.stacktrace||s.stack;return{$isError:!0,name:e,message:i,stack:o,noTelemetry:ErrorNoTelemetry.isErrorNoTelemetry(s)}}return s}const canceledName="Canceled";function isCancellationError(s){return s instanceof CancellationError?!0:s instanceof Error&&s.name===canceledName&&s.message===canceledName}class CancellationError extends Error{constructor(){super(canceledName),this.name=this.message}}function canceled(){const s=new Error(canceledName);return s.name=s.message,s}function illegalArgument(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}function illegalState(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}class NotSupportedError extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class ErrorNoTelemetry extends Error{constructor(e){super(e),this.name="ErrorNoTelemetry"}static fromError(e){if(e instanceof ErrorNoTelemetry)return e;const i=new ErrorNoTelemetry;return i.message=e.message,i.stack=e.stack,i}static isErrorNoTelemetry(e){return e.name==="ErrorNoTelemetry"}}class BugIndicatingError extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,BugIndicatingError.prototype);debugger}}function once$1(s){const e=this;let i=!1,o;return function(){return i||(i=!0,o=s.apply(e,arguments)),o}}function trackDisposable(s){return s}function setParentOfDisposable(s,e){}function markAsSingleton(s){return s}class MultiDisposeError extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function isDisposable(s){return typeof s.dispose=="function"&&s.dispose.length===0}function dispose(s){if(Iterable.is(s)){const e=[];for(const i of s)if(i)try{i.dispose()}catch(o){e.push(o)}if(e.length===1)throw e[0];if(e.length>1)throw new MultiDisposeError(e);return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}function combinedDisposable(...s){return toDisposable(()=>dispose(s))}function toDisposable(s){return{dispose:once$1(()=>{s()})}}class DisposableStore{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){try{dispose(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?DisposableStore.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}DisposableStore.DISABLE_DISPOSED_WARNING=!1;class Disposable{constructor(){this._store=new DisposableStore,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Disposable.None=Object.freeze({dispose(){}});class MutableDisposable{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var i;this._isDisposed||e===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class SafeDisposable{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1}set(e){let i=e;return this.unset=()=>i=void 0,this.isset=()=>i!==void 0,this.dispose=()=>{i&&(i(),i=void 0)},this}}class ImmortalReference{constructor(e){this.object=e}dispose(){}}const hasPerformanceNow=globals.performance&&typeof globals.performance.now=="function";class StopWatch{constructor(e){this._highResolution=hasPerformanceNow&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new StopWatch(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?globals.performance.now():Date.now()}}var Event;(function(s){s.None=()=>Disposable.None;function e(ht){return(ut,ct=null,ft)=>{let dt=!1,pt;return pt=ht(mt=>{if(!dt)return pt?pt.dispose():dt=!0,ut.call(ct,mt)},null,ft),dt&&pt.dispose(),pt}}s.once=e;function i(ht,ut,ct){return b((ft,dt=null,pt)=>ht(mt=>ft.call(dt,ut(mt)),null,pt),ct)}s.map=i;function o(ht,ut,ct){return b((ft,dt=null,pt)=>ht(mt=>{ut(mt),ft.call(dt,mt)},null,pt),ct)}s.forEach=o;function a(ht,ut,ct){return b((ft,dt=null,pt)=>ht(mt=>ut(mt)&&ft.call(dt,mt),null,pt),ct)}s.filter=a;function c(ht){return ht}s.signal=c;function d(...ht){return(ut,ct=null,ft)=>combinedDisposable(...ht.map(dt=>dt(pt=>ut.call(ct,pt),null,ft)))}s.any=d;function _(ht,ut,ct,ft){let dt=ct;return i(ht,pt=>(dt=ut(dt,pt),dt),ft)}s.reduce=_;function b(ht,ut){let ct;const ft={onFirstListenerAdd(){ct=ht(dt.fire,dt)},onLastListenerRemove(){ct==null||ct.dispose()}},dt=new Emitter$1(ft);return ut==null||ut.add(dt),dt.event}function k(ht,ut,ct=100,ft=!1,dt,pt){let mt,_t,Ct,bt=0;const yt={leakWarningThreshold:dt,onFirstListenerAdd(){mt=ht(Tt=>{bt++,_t=ut(_t,Tt),ft&&!Ct&&(wt.fire(_t),_t=void 0),clearTimeout(Ct),Ct=setTimeout(()=>{const kt=_t;_t=void 0,Ct=void 0,(!ft||bt>1)&&wt.fire(kt),bt=0},ct)})},onLastListenerRemove(){mt.dispose()}},wt=new Emitter$1(yt);return pt==null||pt.add(wt),wt.event}s.debounce=k;function j(ht,ut=(ft,dt)=>ft===dt,ct){let ft=!0,dt;return a(ht,pt=>{const mt=ft||!ut(pt,dt);return ft=!1,dt=pt,mt},ct)}s.latch=j;function _e(ht,ut,ct){return[s.filter(ht,ut,ct),s.filter(ht,ft=>!ut(ft),ct)]}s.split=_e;function et(ht,ut=!1,ct=[]){let ft=ct.slice(),dt=ht(_t=>{ft?ft.push(_t):mt.fire(_t)});const pt=()=>{ft==null||ft.forEach(_t=>mt.fire(_t)),ft=null},mt=new Emitter$1({onFirstListenerAdd(){dt||(dt=ht(_t=>mt.fire(_t)))},onFirstListenerDidAdd(){ft&&(ut?setTimeout(pt):pt())},onLastListenerRemove(){dt&&dt.dispose(),dt=null}});return mt.event}s.buffer=et;class tt{constructor(ut){this.event=ut,this.disposables=new DisposableStore}map(ut){return new tt(i(this.event,ut,this.disposables))}forEach(ut){return new tt(o(this.event,ut,this.disposables))}filter(ut){return new tt(a(this.event,ut,this.disposables))}reduce(ut,ct){return new tt(_(this.event,ut,ct,this.disposables))}latch(){return new tt(j(this.event,void 0,this.disposables))}debounce(ut,ct=100,ft=!1,dt){return new tt(k(this.event,ut,ct,ft,dt,this.disposables))}on(ut,ct,ft){return this.event(ut,ct,ft)}once(ut,ct,ft){return e(this.event)(ut,ct,ft)}dispose(){this.disposables.dispose()}}function it(ht){return new tt(ht)}s.chain=it;function st(ht,ut,ct=ft=>ft){const ft=(..._t)=>mt.fire(ct(..._t)),dt=()=>ht.on(ut,ft),pt=()=>ht.removeListener(ut,ft),mt=new Emitter$1({onFirstListenerAdd:dt,onLastListenerRemove:pt});return mt.event}s.fromNodeEventEmitter=st;function ot(ht,ut,ct=ft=>ft){const ft=(..._t)=>mt.fire(ct(..._t)),dt=()=>ht.addEventListener(ut,ft),pt=()=>ht.removeEventListener(ut,ft),mt=new Emitter$1({onFirstListenerAdd:dt,onLastListenerRemove:pt});return mt.event}s.fromDOMEventEmitter=ot;function nt(ht){return new Promise(ut=>e(ht)(ut))}s.toPromise=nt;function rt(ht,ut){return ut(void 0),ht(ct=>ut(ct))}s.runAndSubscribe=rt;function at(ht,ut){let ct=null;function ft(pt){ct==null||ct.dispose(),ct=new DisposableStore,ut(pt,ct)}ft(void 0);const dt=ht(pt=>ft(pt));return toDisposable(()=>{dt.dispose(),ct==null||ct.dispose()})}s.runAndSubscribeWithStore=at;class lt{constructor(ut,ct){this.obs=ut,this._counter=0,this._hasChanged=!1;const ft={onFirstListenerAdd:()=>{ut.addObserver(this)},onLastListenerRemove:()=>{ut.removeObserver(this)}};this.emitter=new Emitter$1(ft),ct&&ct.add(this.emitter)}beginUpdate(ut){this._counter++}handleChange(ut,ct){this._hasChanged=!0}endUpdate(ut){--this._counter===0&&this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this.obs.get()))}}function gt(ht,ut){return new lt(ht,ut).emitter.event}s.fromObservable=gt})(Event||(Event={}));class EventProfiling{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${EventProfiling._idPool++}`}start(e){this._stopWatch=new StopWatch(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}EventProfiling._idPool=0;class Stacktrace{constructor(e){this.value=e}static create(){var e;return new Stacktrace((e=new Error().stack)!==null&&e!==void 0?e:"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Listener{constructor(e,i,o){this.callback=e,this.callbackThis=i,this.stack=o,this.subscription=new SafeDisposable}invoke(e){this.callback.call(this.callbackThis,e)}}class Emitter$1{constructor(e){var i,o;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((i=this._options)===null||i===void 0)&&i._profName?new EventProfiling(this._options._profName):void 0,this._deliveryQueue=(o=this._options)===null||o===void 0?void 0:o.deliveryQueue}dispose(){var e,i,o,a;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),(e=this._deliveryQueue)===null||e===void 0||e.clear(this),(o=(i=this._options)===null||i===void 0?void 0:i.onLastListenerRemove)===null||o===void 0||o.call(i),(a=this._leakageMon)===null||a===void 0||a.dispose())}get event(){return this._event||(this._event=(e,i,o)=>{var a,c,d;this._listeners||(this._listeners=new LinkedList);const _=this._listeners.isEmpty();_&&((a=this._options)===null||a===void 0?void 0:a.onFirstListenerAdd)&&this._options.onFirstListenerAdd(this);let b,k;this._leakageMon&&this._listeners.size>=30&&(k=Stacktrace.create(),b=this._leakageMon.check(k,this._listeners.size+1));const j=new Listener(e,i,k),_e=this._listeners.push(j);_&&((c=this._options)===null||c===void 0?void 0:c.onFirstListenerDidAdd)&&this._options.onFirstListenerDidAdd(this),!((d=this._options)===null||d===void 0)&&d.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,i);const et=j.subscription.set(()=>{b==null||b(),this._disposed||(_e(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return o instanceof DisposableStore?o.add(et):Array.isArray(o)&&o.push(et),et}),this._event}fire(e){var i,o;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new PrivateEventDeliveryQueue);for(const a of this._listeners)this._deliveryQueue.push(this,a,e);(i=this._perfMon)===null||i===void 0||i.start(this._deliveryQueue.size),this._deliveryQueue.deliver(),(o=this._perfMon)===null||o===void 0||o.stop()}}}class EventDeliveryQueue{constructor(){this._queue=new LinkedList}get size(){return this._queue.size}push(e,i,o){this._queue.push(new EventDeliveryQueueElement(e,i,o))}clear(e){const i=new LinkedList;for(const o of this._queue)o.emitter!==e&&i.push(o);this._queue=i}deliver(){for(;this._queue.size>0;){const e=this._queue.shift();try{e.listener.invoke(e.event)}catch(i){onUnexpectedError(i)}}}}class PrivateEventDeliveryQueue extends EventDeliveryQueue{clear(e){this._queue.clear()}}class EventDeliveryQueueElement{constructor(e,i,o){this.emitter=e,this.listener=i,this.event=o}}class PauseableEmitter extends Emitter$1{constructor(e){super(e),this._isPaused=0,this._eventQueue=new LinkedList,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class DebounceEmitter extends PauseableEmitter{constructor(e){var i;super(e),this._delay=(i=e.delay)!==null&&i!==void 0?i:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class EventBufferer{constructor(){this.buffers=[]}wrapEvent(e){return(i,o,a)=>e(c=>{const d=this.buffers[this.buffers.length-1];d?d.push(()=>i.call(o,c)):i.call(o,c)},void 0,a)}bufferEvents(e){const i=[];this.buffers.push(i);const o=e();return this.buffers.pop(),i.forEach(a=>a()),o}}class Relay{constructor(){this.listening=!1,this.inputEvent=Event.None,this.inputEventListener=Disposable.None,this.emitter=new Emitter$1({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const shortcutEvent=Object.freeze(function(s,e){const i=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(i)}}});var CancellationToken;(function(s){function e(i){return i===s.None||i===s.Cancelled||i instanceof MutableToken?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Event.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:shortcutEvent})})(CancellationToken||(CancellationToken={}));class MutableToken{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new Emitter$1),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class CancellationTokenSource$1{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token instanceof MutableToken&&this._token.cancel():this._token=CancellationToken.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=CancellationToken.None}}class KeyCodeStrMap{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,i){this._keyCodeToStr[e]=i,this._strToKeyCode[i.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const uiMap=new KeyCodeStrMap,userSettingsUSMap=new KeyCodeStrMap,userSettingsGeneralMap=new KeyCodeStrMap,EVENT_KEY_CODE_MAP=new Array(230),scanCodeStrToInt=Object.create(null),scanCodeLowerCaseStrToInt=Object.create(null),IMMUTABLE_CODE_TO_KEY_CODE=[];for(let s=0;s<=193;s++)IMMUTABLE_CODE_TO_KEY_CODE[s]=-1;(function(){const s="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",s,s],[0,1,1,"Hyper",0,s,0,s,s,s],[0,1,2,"Super",0,s,0,s,s,s],[0,1,3,"Fn",0,s,0,s,s,s],[0,1,4,"FnLock",0,s,0,s,s,s],[0,1,5,"Suspend",0,s,0,s,s,s],[0,1,6,"Resume",0,s,0,s,s,s],[0,1,7,"Turbo",0,s,0,s,s,s],[0,1,8,"Sleep",0,s,0,"VK_SLEEP",s,s],[0,1,9,"WakeUp",0,s,0,s,s,s],[31,0,10,"KeyA",31,"A",65,"VK_A",s,s],[32,0,11,"KeyB",32,"B",66,"VK_B",s,s],[33,0,12,"KeyC",33,"C",67,"VK_C",s,s],[34,0,13,"KeyD",34,"D",68,"VK_D",s,s],[35,0,14,"KeyE",35,"E",69,"VK_E",s,s],[36,0,15,"KeyF",36,"F",70,"VK_F",s,s],[37,0,16,"KeyG",37,"G",71,"VK_G",s,s],[38,0,17,"KeyH",38,"H",72,"VK_H",s,s],[39,0,18,"KeyI",39,"I",73,"VK_I",s,s],[40,0,19,"KeyJ",40,"J",74,"VK_J",s,s],[41,0,20,"KeyK",41,"K",75,"VK_K",s,s],[42,0,21,"KeyL",42,"L",76,"VK_L",s,s],[43,0,22,"KeyM",43,"M",77,"VK_M",s,s],[44,0,23,"KeyN",44,"N",78,"VK_N",s,s],[45,0,24,"KeyO",45,"O",79,"VK_O",s,s],[46,0,25,"KeyP",46,"P",80,"VK_P",s,s],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",s,s],[48,0,27,"KeyR",48,"R",82,"VK_R",s,s],[49,0,28,"KeyS",49,"S",83,"VK_S",s,s],[50,0,29,"KeyT",50,"T",84,"VK_T",s,s],[51,0,30,"KeyU",51,"U",85,"VK_U",s,s],[52,0,31,"KeyV",52,"V",86,"VK_V",s,s],[53,0,32,"KeyW",53,"W",87,"VK_W",s,s],[54,0,33,"KeyX",54,"X",88,"VK_X",s,s],[55,0,34,"KeyY",55,"Y",89,"VK_Y",s,s],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",s,s],[22,0,36,"Digit1",22,"1",49,"VK_1",s,s],[23,0,37,"Digit2",23,"2",50,"VK_2",s,s],[24,0,38,"Digit3",24,"3",51,"VK_3",s,s],[25,0,39,"Digit4",25,"4",52,"VK_4",s,s],[26,0,40,"Digit5",26,"5",53,"VK_5",s,s],[27,0,41,"Digit6",27,"6",54,"VK_6",s,s],[28,0,42,"Digit7",28,"7",55,"VK_7",s,s],[29,0,43,"Digit8",29,"8",56,"VK_8",s,s],[30,0,44,"Digit9",30,"9",57,"VK_9",s,s],[21,0,45,"Digit0",21,"0",48,"VK_0",s,s],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",s,s],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",s,s],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",s,s],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",s,s],[10,1,50,"Space",10,"Space",32,"VK_SPACE",s,s],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,s,0,s,s,s],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",s,s],[59,1,64,"F1",59,"F1",112,"VK_F1",s,s],[60,1,65,"F2",60,"F2",113,"VK_F2",s,s],[61,1,66,"F3",61,"F3",114,"VK_F3",s,s],[62,1,67,"F4",62,"F4",115,"VK_F4",s,s],[63,1,68,"F5",63,"F5",116,"VK_F5",s,s],[64,1,69,"F6",64,"F6",117,"VK_F6",s,s],[65,1,70,"F7",65,"F7",118,"VK_F7",s,s],[66,1,71,"F8",66,"F8",119,"VK_F8",s,s],[67,1,72,"F9",67,"F9",120,"VK_F9",s,s],[68,1,73,"F10",68,"F10",121,"VK_F10",s,s],[69,1,74,"F11",69,"F11",122,"VK_F11",s,s],[70,1,75,"F12",70,"F12",123,"VK_F12",s,s],[0,1,76,"PrintScreen",0,s,0,s,s,s],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",s,s],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",s,s],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",s,s],[14,1,80,"Home",14,"Home",36,"VK_HOME",s,s],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",s,s],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",s,s],[13,1,83,"End",13,"End",35,"VK_END",s,s],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",s,s],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",s],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",s],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",s],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",s],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",s,s],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",s,s],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",s,s],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",s,s],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",s,s],[3,1,94,"NumpadEnter",3,s,0,s,s,s],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",s,s],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",s,s],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",s,s],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",s,s],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",s,s],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",s,s],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",s,s],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",s,s],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",s,s],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",s,s],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",s,s],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",s,s],[58,1,107,"ContextMenu",58,"ContextMenu",93,s,s,s],[0,1,108,"Power",0,s,0,s,s,s],[0,1,109,"NumpadEqual",0,s,0,s,s,s],[71,1,110,"F13",71,"F13",124,"VK_F13",s,s],[72,1,111,"F14",72,"F14",125,"VK_F14",s,s],[73,1,112,"F15",73,"F15",126,"VK_F15",s,s],[74,1,113,"F16",74,"F16",127,"VK_F16",s,s],[75,1,114,"F17",75,"F17",128,"VK_F17",s,s],[76,1,115,"F18",76,"F18",129,"VK_F18",s,s],[77,1,116,"F19",77,"F19",130,"VK_F19",s,s],[0,1,117,"F20",0,s,0,"VK_F20",s,s],[0,1,118,"F21",0,s,0,"VK_F21",s,s],[0,1,119,"F22",0,s,0,"VK_F22",s,s],[0,1,120,"F23",0,s,0,"VK_F23",s,s],[0,1,121,"F24",0,s,0,"VK_F24",s,s],[0,1,122,"Open",0,s,0,s,s,s],[0,1,123,"Help",0,s,0,s,s,s],[0,1,124,"Select",0,s,0,s,s,s],[0,1,125,"Again",0,s,0,s,s,s],[0,1,126,"Undo",0,s,0,s,s,s],[0,1,127,"Cut",0,s,0,s,s,s],[0,1,128,"Copy",0,s,0,s,s,s],[0,1,129,"Paste",0,s,0,s,s,s],[0,1,130,"Find",0,s,0,s,s,s],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",s,s],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",s,s],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",s,s],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",s,s],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",s,s],[0,1,136,"KanaMode",0,s,0,s,s,s],[0,0,137,"IntlYen",0,s,0,s,s,s],[0,1,138,"Convert",0,s,0,s,s,s],[0,1,139,"NonConvert",0,s,0,s,s,s],[0,1,140,"Lang1",0,s,0,s,s,s],[0,1,141,"Lang2",0,s,0,s,s,s],[0,1,142,"Lang3",0,s,0,s,s,s],[0,1,143,"Lang4",0,s,0,s,s,s],[0,1,144,"Lang5",0,s,0,s,s,s],[0,1,145,"Abort",0,s,0,s,s,s],[0,1,146,"Props",0,s,0,s,s,s],[0,1,147,"NumpadParenLeft",0,s,0,s,s,s],[0,1,148,"NumpadParenRight",0,s,0,s,s,s],[0,1,149,"NumpadBackspace",0,s,0,s,s,s],[0,1,150,"NumpadMemoryStore",0,s,0,s,s,s],[0,1,151,"NumpadMemoryRecall",0,s,0,s,s,s],[0,1,152,"NumpadMemoryClear",0,s,0,s,s,s],[0,1,153,"NumpadMemoryAdd",0,s,0,s,s,s],[0,1,154,"NumpadMemorySubtract",0,s,0,s,s,s],[0,1,155,"NumpadClear",126,"Clear",12,"VK_CLEAR",s,s],[0,1,156,"NumpadClearEntry",0,s,0,s,s,s],[5,1,0,s,5,"Ctrl",17,"VK_CONTROL",s,s],[4,1,0,s,4,"Shift",16,"VK_SHIFT",s,s],[6,1,0,s,6,"Alt",18,"VK_MENU",s,s],[57,1,0,s,57,"Meta",0,"VK_COMMAND",s,s],[5,1,157,"ControlLeft",5,s,0,"VK_LCONTROL",s,s],[4,1,158,"ShiftLeft",4,s,0,"VK_LSHIFT",s,s],[6,1,159,"AltLeft",6,s,0,"VK_LMENU",s,s],[57,1,160,"MetaLeft",57,s,0,"VK_LWIN",s,s],[5,1,161,"ControlRight",5,s,0,"VK_RCONTROL",s,s],[4,1,162,"ShiftRight",4,s,0,"VK_RSHIFT",s,s],[6,1,163,"AltRight",6,s,0,"VK_RMENU",s,s],[57,1,164,"MetaRight",57,s,0,"VK_RWIN",s,s],[0,1,165,"BrightnessUp",0,s,0,s,s,s],[0,1,166,"BrightnessDown",0,s,0,s,s,s],[0,1,167,"MediaPlay",0,s,0,s,s,s],[0,1,168,"MediaRecord",0,s,0,s,s,s],[0,1,169,"MediaFastForward",0,s,0,s,s,s],[0,1,170,"MediaRewind",0,s,0,s,s,s],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",s,s],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",s,s],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",s,s],[0,1,174,"Eject",0,s,0,s,s,s],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",s,s],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",s,s],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",s,s],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",s,s],[0,1,179,"LaunchApp1",0,s,0,"VK_MEDIA_LAUNCH_APP1",s,s],[0,1,180,"SelectTask",0,s,0,s,s,s],[0,1,181,"LaunchScreenSaver",0,s,0,s,s,s],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",s,s],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",s,s],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",s,s],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",s,s],[0,1,186,"BrowserStop",0,s,0,"VK_BROWSER_STOP",s,s],[0,1,187,"BrowserRefresh",0,s,0,"VK_BROWSER_REFRESH",s,s],[0,1,188,"BrowserFavorites",0,s,0,"VK_BROWSER_FAVORITES",s,s],[0,1,189,"ZoomToggle",0,s,0,s,s,s],[0,1,190,"MailReply",0,s,0,s,s,s],[0,1,191,"MailForward",0,s,0,s,s,s],[0,1,192,"MailSend",0,s,0,s,s,s],[109,1,0,s,109,"KeyInComposition",229,s,s,s],[111,1,0,s,111,"ABNT_C2",194,"VK_ABNT_C2",s,s],[91,1,0,s,91,"OEM_8",223,"VK_OEM_8",s,s],[0,1,0,s,0,s,0,"VK_KANA",s,s],[0,1,0,s,0,s,0,"VK_HANGUL",s,s],[0,1,0,s,0,s,0,"VK_JUNJA",s,s],[0,1,0,s,0,s,0,"VK_FINAL",s,s],[0,1,0,s,0,s,0,"VK_HANJA",s,s],[0,1,0,s,0,s,0,"VK_KANJI",s,s],[0,1,0,s,0,s,0,"VK_CONVERT",s,s],[0,1,0,s,0,s,0,"VK_NONCONVERT",s,s],[0,1,0,s,0,s,0,"VK_ACCEPT",s,s],[0,1,0,s,0,s,0,"VK_MODECHANGE",s,s],[0,1,0,s,0,s,0,"VK_SELECT",s,s],[0,1,0,s,0,s,0,"VK_PRINT",s,s],[0,1,0,s,0,s,0,"VK_EXECUTE",s,s],[0,1,0,s,0,s,0,"VK_SNAPSHOT",s,s],[0,1,0,s,0,s,0,"VK_HELP",s,s],[0,1,0,s,0,s,0,"VK_APPS",s,s],[0,1,0,s,0,s,0,"VK_PROCESSKEY",s,s],[0,1,0,s,0,s,0,"VK_PACKET",s,s],[0,1,0,s,0,s,0,"VK_DBE_SBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_DBE_DBCSCHAR",s,s],[0,1,0,s,0,s,0,"VK_ATTN",s,s],[0,1,0,s,0,s,0,"VK_CRSEL",s,s],[0,1,0,s,0,s,0,"VK_EXSEL",s,s],[0,1,0,s,0,s,0,"VK_EREOF",s,s],[0,1,0,s,0,s,0,"VK_PLAY",s,s],[0,1,0,s,0,s,0,"VK_ZOOM",s,s],[0,1,0,s,0,s,0,"VK_NONAME",s,s],[0,1,0,s,0,s,0,"VK_PA1",s,s],[0,1,0,s,0,s,0,"VK_OEM_CLEAR",s,s]],i=[],o=[];for(const a of e){const[c,d,_,b,k,j,_e,et,tt,it]=a;if(o[_]||(o[_]=!0,scanCodeStrToInt[b]=_,scanCodeLowerCaseStrToInt[b.toLowerCase()]=_,d&&(IMMUTABLE_CODE_TO_KEY_CODE[_]=k)),!i[k]){if(i[k]=!0,!j)throw new Error(`String representation missing for key code ${k} around scan code ${b}`);uiMap.define(k,j),userSettingsUSMap.define(k,tt||j),userSettingsGeneralMap.define(k,it||tt||j)}_e&&(EVENT_KEY_CODE_MAP[_e]=k)}})();var KeyCodeUtils;(function(s){function e(_){return uiMap.keyCodeToStr(_)}s.toString=e;function i(_){return uiMap.strToKeyCode(_)}s.fromString=i;function o(_){return userSettingsUSMap.keyCodeToStr(_)}s.toUserSettingsUS=o;function a(_){return userSettingsGeneralMap.keyCodeToStr(_)}s.toUserSettingsGeneral=a;function c(_){return userSettingsUSMap.strToKeyCode(_)||userSettingsGeneralMap.strToKeyCode(_)}s.fromUserSettings=c;function d(_){if(_>=93&&_<=108)return null;switch(_){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return uiMap.keyCodeToStr(_)}s.toElectronAccelerator=d})(KeyCodeUtils||(KeyCodeUtils={}));function KeyChord(s,e){const i=(e&65535)<<16>>>0;return(s|i)>>>0}let safeProcess;if(typeof globals.vscode<"u"&&typeof globals.vscode.process<"u"){const s=globals.vscode.process;safeProcess={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"?safeProcess={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:safeProcess={get platform(){return isWindows?"win32":isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const cwd=safeProcess.cwd,env=safeProcess.env,platform=safeProcess.platform,CHAR_UPPERCASE_A=65,CHAR_LOWERCASE_A=97,CHAR_UPPERCASE_Z=90,CHAR_LOWERCASE_Z=122,CHAR_DOT=46,CHAR_FORWARD_SLASH=47,CHAR_BACKWARD_SLASH=92,CHAR_COLON=58,CHAR_QUESTION_MARK=63;class ErrorInvalidArgType extends Error{constructor(e,i,o){let a;typeof i=="string"&&i.indexOf("not ")===0?(a="must not be",i=i.replace(/^not /,"")):a="must be";const c=e.indexOf(".")!==-1?"property":"argument";let d=`The "${e}" ${c} ${a} of type ${i}`;d+=`. Received type ${typeof o}`,super(d),this.code="ERR_INVALID_ARG_TYPE"}}function validateString(s,e){if(typeof s!="string")throw new ErrorInvalidArgType(e,"string",s)}function isPathSeparator$1(s){return s===CHAR_FORWARD_SLASH||s===CHAR_BACKWARD_SLASH}function isPosixPathSeparator(s){return s===CHAR_FORWARD_SLASH}function isWindowsDeviceRoot(s){return s>=CHAR_UPPERCASE_A&&s<=CHAR_UPPERCASE_Z||s>=CHAR_LOWERCASE_A&&s<=CHAR_LOWERCASE_Z}function normalizeString(s,e,i,o){let a="",c=0,d=-1,_=0,b=0;for(let k=0;k<=s.length;++k){if(k<s.length)b=s.charCodeAt(k);else{if(o(b))break;b=CHAR_FORWARD_SLASH}if(o(b)){if(!(d===k-1||_===1))if(_===2){if(a.length<2||c!==2||a.charCodeAt(a.length-1)!==CHAR_DOT||a.charCodeAt(a.length-2)!==CHAR_DOT){if(a.length>2){const j=a.lastIndexOf(i);j===-1?(a="",c=0):(a=a.slice(0,j),c=a.length-1-a.lastIndexOf(i)),d=k,_=0;continue}else if(a.length!==0){a="",c=0,d=k,_=0;continue}}e&&(a+=a.length>0?`${i}..`:"..",c=2)}else a.length>0?a+=`${i}${s.slice(d+1,k)}`:a=s.slice(d+1,k),c=k-d-1;d=k,_=0}else b===CHAR_DOT&&_!==-1?++_:_=-1}return a}function _format(s,e){if(e===null||typeof e!="object")throw new ErrorInvalidArgType("pathObject","Object",e);const i=e.dir||e.root,o=e.base||`${e.name||""}${e.ext||""}`;return i?i===e.root?`${i}${o}`:`${i}${s}${o}`:o}const win32={resolve(...s){let e="",i="",o=!1;for(let a=s.length-1;a>=-1;a--){let c;if(a>=0){if(c=s[a],validateString(c,"path"),c.length===0)continue}else e.length===0?c=cwd():(c=env[`=${e}`]||cwd(),(c===void 0||c.slice(0,2).toLowerCase()!==e.toLowerCase()&&c.charCodeAt(2)===CHAR_BACKWARD_SLASH)&&(c=`${e}\\`));const d=c.length;let _=0,b="",k=!1;const j=c.charCodeAt(0);if(d===1)isPathSeparator$1(j)&&(_=1,k=!0);else if(isPathSeparator$1(j))if(k=!0,isPathSeparator$1(c.charCodeAt(1))){let _e=2,et=_e;for(;_e<d&&!isPathSeparator$1(c.charCodeAt(_e));)_e++;if(_e<d&&_e!==et){const tt=c.slice(et,_e);for(et=_e;_e<d&&isPathSeparator$1(c.charCodeAt(_e));)_e++;if(_e<d&&_e!==et){for(et=_e;_e<d&&!isPathSeparator$1(c.charCodeAt(_e));)_e++;(_e===d||_e!==et)&&(b=`\\\\${tt}\\${c.slice(et,_e)}`,_=_e)}}}else _=1;else isWindowsDeviceRoot(j)&&c.charCodeAt(1)===CHAR_COLON&&(b=c.slice(0,2),_=2,d>2&&isPathSeparator$1(c.charCodeAt(2))&&(k=!0,_=3));if(b.length>0)if(e.length>0){if(b.toLowerCase()!==e.toLowerCase())continue}else e=b;if(o){if(e.length>0)break}else if(i=`${c.slice(_)}\\${i}`,o=k,k&&e.length>0)break}return i=normalizeString(i,!o,"\\",isPathSeparator$1),o?`${e}\\${i}`:`${e}${i}`||"."},normalize(s){validateString(s,"path");const e=s.length;if(e===0)return".";let i=0,o,a=!1;const c=s.charCodeAt(0);if(e===1)return isPosixPathSeparator(c)?"\\":s;if(isPathSeparator$1(c))if(a=!0,isPathSeparator$1(s.charCodeAt(1))){let _=2,b=_;for(;_<e&&!isPathSeparator$1(s.charCodeAt(_));)_++;if(_<e&&_!==b){const k=s.slice(b,_);for(b=_;_<e&&isPathSeparator$1(s.charCodeAt(_));)_++;if(_<e&&_!==b){for(b=_;_<e&&!isPathSeparator$1(s.charCodeAt(_));)_++;if(_===e)return`\\\\${k}\\${s.slice(b)}\\`;_!==b&&(o=`\\\\${k}\\${s.slice(b,_)}`,i=_)}}}else i=1;else isWindowsDeviceRoot(c)&&s.charCodeAt(1)===CHAR_COLON&&(o=s.slice(0,2),i=2,e>2&&isPathSeparator$1(s.charCodeAt(2))&&(a=!0,i=3));let d=i<e?normalizeString(s.slice(i),!a,"\\",isPathSeparator$1):"";return d.length===0&&!a&&(d="."),d.length>0&&isPathSeparator$1(s.charCodeAt(e-1))&&(d+="\\"),o===void 0?a?`\\${d}`:d:a?`${o}\\${d}`:`${o}${d}`},isAbsolute(s){validateString(s,"path");const e=s.length;if(e===0)return!1;const i=s.charCodeAt(0);return isPathSeparator$1(i)||e>2&&isWindowsDeviceRoot(i)&&s.charCodeAt(1)===CHAR_COLON&&isPathSeparator$1(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,i;for(let c=0;c<s.length;++c){const d=s[c];validateString(d,"path"),d.length>0&&(e===void 0?e=i=d:e+=`\\${d}`)}if(e===void 0)return".";let o=!0,a=0;if(typeof i=="string"&&isPathSeparator$1(i.charCodeAt(0))){++a;const c=i.length;c>1&&isPathSeparator$1(i.charCodeAt(1))&&(++a,c>2&&(isPathSeparator$1(i.charCodeAt(2))?++a:o=!1))}if(o){for(;a<e.length&&isPathSeparator$1(e.charCodeAt(a));)a++;a>=2&&(e=`\\${e.slice(a)}`)}return win32.normalize(e)},relative(s,e){if(validateString(s,"from"),validateString(e,"to"),s===e)return"";const i=win32.resolve(s),o=win32.resolve(e);if(i===o||(s=i.toLowerCase(),e=o.toLowerCase(),s===e))return"";let a=0;for(;a<s.length&&s.charCodeAt(a)===CHAR_BACKWARD_SLASH;)a++;let c=s.length;for(;c-1>a&&s.charCodeAt(c-1)===CHAR_BACKWARD_SLASH;)c--;const d=c-a;let _=0;for(;_<e.length&&e.charCodeAt(_)===CHAR_BACKWARD_SLASH;)_++;let b=e.length;for(;b-1>_&&e.charCodeAt(b-1)===CHAR_BACKWARD_SLASH;)b--;const k=b-_,j=d<k?d:k;let _e=-1,et=0;for(;et<j;et++){const it=s.charCodeAt(a+et);if(it!==e.charCodeAt(_+et))break;it===CHAR_BACKWARD_SLASH&&(_e=et)}if(et!==j){if(_e===-1)return o}else{if(k>j){if(e.charCodeAt(_+et)===CHAR_BACKWARD_SLASH)return o.slice(_+et+1);if(et===2)return o.slice(_+et)}d>j&&(s.charCodeAt(a+et)===CHAR_BACKWARD_SLASH?_e=et:et===2&&(_e=3)),_e===-1&&(_e=0)}let tt="";for(et=a+_e+1;et<=c;++et)(et===c||s.charCodeAt(et)===CHAR_BACKWARD_SLASH)&&(tt+=tt.length===0?"..":"\\..");return _+=_e,tt.length>0?`${tt}${o.slice(_,b)}`:(o.charCodeAt(_)===CHAR_BACKWARD_SLASH&&++_,o.slice(_,b))},toNamespacedPath(s){if(typeof s!="string")return s;if(s.length===0)return"";const e=win32.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===CHAR_BACKWARD_SLASH){if(e.charCodeAt(1)===CHAR_BACKWARD_SLASH){const i=e.charCodeAt(2);if(i!==CHAR_QUESTION_MARK&&i!==CHAR_DOT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(isWindowsDeviceRoot(e.charCodeAt(0))&&e.charCodeAt(1)===CHAR_COLON&&e.charCodeAt(2)===CHAR_BACKWARD_SLASH)return`\\\\?\\${e}`;return s},dirname(s){validateString(s,"path");const e=s.length;if(e===0)return".";let i=-1,o=0;const a=s.charCodeAt(0);if(e===1)return isPathSeparator$1(a)?s:".";if(isPathSeparator$1(a)){if(i=o=1,isPathSeparator$1(s.charCodeAt(1))){let _=2,b=_;for(;_<e&&!isPathSeparator$1(s.charCodeAt(_));)_++;if(_<e&&_!==b){for(b=_;_<e&&isPathSeparator$1(s.charCodeAt(_));)_++;if(_<e&&_!==b){for(b=_;_<e&&!isPathSeparator$1(s.charCodeAt(_));)_++;if(_===e)return s;_!==b&&(i=o=_+1)}}}}else isWindowsDeviceRoot(a)&&s.charCodeAt(1)===CHAR_COLON&&(i=e>2&&isPathSeparator$1(s.charCodeAt(2))?3:2,o=i);let c=-1,d=!0;for(let _=e-1;_>=o;--_)if(isPathSeparator$1(s.charCodeAt(_))){if(!d){c=_;break}}else d=!1;if(c===-1){if(i===-1)return".";c=i}return s.slice(0,c)},basename(s,e){e!==void 0&&validateString(e,"ext"),validateString(s,"path");let i=0,o=-1,a=!0,c;if(s.length>=2&&isWindowsDeviceRoot(s.charCodeAt(0))&&s.charCodeAt(1)===CHAR_COLON&&(i=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let d=e.length-1,_=-1;for(c=s.length-1;c>=i;--c){const b=s.charCodeAt(c);if(isPathSeparator$1(b)){if(!a){i=c+1;break}}else _===-1&&(a=!1,_=c+1),d>=0&&(b===e.charCodeAt(d)?--d===-1&&(o=c):(d=-1,o=_))}return i===o?o=_:o===-1&&(o=s.length),s.slice(i,o)}for(c=s.length-1;c>=i;--c)if(isPathSeparator$1(s.charCodeAt(c))){if(!a){i=c+1;break}}else o===-1&&(a=!1,o=c+1);return o===-1?"":s.slice(i,o)},extname(s){validateString(s,"path");let e=0,i=-1,o=0,a=-1,c=!0,d=0;s.length>=2&&s.charCodeAt(1)===CHAR_COLON&&isWindowsDeviceRoot(s.charCodeAt(0))&&(e=o=2);for(let _=s.length-1;_>=e;--_){const b=s.charCodeAt(_);if(isPathSeparator$1(b)){if(!c){o=_+1;break}continue}a===-1&&(c=!1,a=_+1),b===CHAR_DOT?i===-1?i=_:d!==1&&(d=1):i!==-1&&(d=-1)}return i===-1||a===-1||d===0||d===1&&i===a-1&&i===o+1?"":s.slice(i,a)},format:_format.bind(null,"\\"),parse(s){validateString(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const i=s.length;let o=0,a=s.charCodeAt(0);if(i===1)return isPathSeparator$1(a)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(isPathSeparator$1(a)){if(o=1,isPathSeparator$1(s.charCodeAt(1))){let _e=2,et=_e;for(;_e<i&&!isPathSeparator$1(s.charCodeAt(_e));)_e++;if(_e<i&&_e!==et){for(et=_e;_e<i&&isPathSeparator$1(s.charCodeAt(_e));)_e++;if(_e<i&&_e!==et){for(et=_e;_e<i&&!isPathSeparator$1(s.charCodeAt(_e));)_e++;_e===i?o=_e:_e!==et&&(o=_e+1)}}}}else if(isWindowsDeviceRoot(a)&&s.charCodeAt(1)===CHAR_COLON){if(i<=2)return e.root=e.dir=s,e;if(o=2,isPathSeparator$1(s.charCodeAt(2))){if(i===3)return e.root=e.dir=s,e;o=3}}o>0&&(e.root=s.slice(0,o));let c=-1,d=o,_=-1,b=!0,k=s.length-1,j=0;for(;k>=o;--k){if(a=s.charCodeAt(k),isPathSeparator$1(a)){if(!b){d=k+1;break}continue}_===-1&&(b=!1,_=k+1),a===CHAR_DOT?c===-1?c=k:j!==1&&(j=1):c!==-1&&(j=-1)}return _!==-1&&(c===-1||j===0||j===1&&c===_-1&&c===d+1?e.base=e.name=s.slice(d,_):(e.name=s.slice(d,c),e.base=s.slice(d,_),e.ext=s.slice(c,_))),d>0&&d!==o?e.dir=s.slice(0,d-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},posix={resolve(...s){let e="",i=!1;for(let o=s.length-1;o>=-1&&!i;o--){const a=o>=0?s[o]:cwd();validateString(a,"path"),a.length!==0&&(e=`${a}/${e}`,i=a.charCodeAt(0)===CHAR_FORWARD_SLASH)}return e=normalizeString(e,!i,"/",isPosixPathSeparator),i?`/${e}`:e.length>0?e:"."},normalize(s){if(validateString(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===CHAR_FORWARD_SLASH,i=s.charCodeAt(s.length-1)===CHAR_FORWARD_SLASH;return s=normalizeString(s,!e,"/",isPosixPathSeparator),s.length===0?e?"/":i?"./":".":(i&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return validateString(s,"path"),s.length>0&&s.charCodeAt(0)===CHAR_FORWARD_SLASH},join(...s){if(s.length===0)return".";let e;for(let i=0;i<s.length;++i){const o=s[i];validateString(o,"path"),o.length>0&&(e===void 0?e=o:e+=`/${o}`)}return e===void 0?".":posix.normalize(e)},relative(s,e){if(validateString(s,"from"),validateString(e,"to"),s===e||(s=posix.resolve(s),e=posix.resolve(e),s===e))return"";const i=1,o=s.length,a=o-i,c=1,d=e.length-c,_=a<d?a:d;let b=-1,k=0;for(;k<_;k++){const _e=s.charCodeAt(i+k);if(_e!==e.charCodeAt(c+k))break;_e===CHAR_FORWARD_SLASH&&(b=k)}if(k===_)if(d>_){if(e.charCodeAt(c+k)===CHAR_FORWARD_SLASH)return e.slice(c+k+1);if(k===0)return e.slice(c+k)}else a>_&&(s.charCodeAt(i+k)===CHAR_FORWARD_SLASH?b=k:k===0&&(b=0));let j="";for(k=i+b+1;k<=o;++k)(k===o||s.charCodeAt(k)===CHAR_FORWARD_SLASH)&&(j+=j.length===0?"..":"/..");return`${j}${e.slice(c+b)}`},toNamespacedPath(s){return s},dirname(s){if(validateString(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===CHAR_FORWARD_SLASH;let i=-1,o=!0;for(let a=s.length-1;a>=1;--a)if(s.charCodeAt(a)===CHAR_FORWARD_SLASH){if(!o){i=a;break}}else o=!1;return i===-1?e?"/":".":e&&i===1?"//":s.slice(0,i)},basename(s,e){e!==void 0&&validateString(e,"ext"),validateString(s,"path");let i=0,o=-1,a=!0,c;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let d=e.length-1,_=-1;for(c=s.length-1;c>=0;--c){const b=s.charCodeAt(c);if(b===CHAR_FORWARD_SLASH){if(!a){i=c+1;break}}else _===-1&&(a=!1,_=c+1),d>=0&&(b===e.charCodeAt(d)?--d===-1&&(o=c):(d=-1,o=_))}return i===o?o=_:o===-1&&(o=s.length),s.slice(i,o)}for(c=s.length-1;c>=0;--c)if(s.charCodeAt(c)===CHAR_FORWARD_SLASH){if(!a){i=c+1;break}}else o===-1&&(a=!1,o=c+1);return o===-1?"":s.slice(i,o)},extname(s){validateString(s,"path");let e=-1,i=0,o=-1,a=!0,c=0;for(let d=s.length-1;d>=0;--d){const _=s.charCodeAt(d);if(_===CHAR_FORWARD_SLASH){if(!a){i=d+1;break}continue}o===-1&&(a=!1,o=d+1),_===CHAR_DOT?e===-1?e=d:c!==1&&(c=1):e!==-1&&(c=-1)}return e===-1||o===-1||c===0||c===1&&e===o-1&&e===i+1?"":s.slice(e,o)},format:_format.bind(null,"/"),parse(s){validateString(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const i=s.charCodeAt(0)===CHAR_FORWARD_SLASH;let o;i?(e.root="/",o=1):o=0;let a=-1,c=0,d=-1,_=!0,b=s.length-1,k=0;for(;b>=o;--b){const j=s.charCodeAt(b);if(j===CHAR_FORWARD_SLASH){if(!_){c=b+1;break}continue}d===-1&&(_=!1,d=b+1),j===CHAR_DOT?a===-1?a=b:k!==1&&(k=1):a!==-1&&(k=-1)}if(d!==-1){const j=c===0&&i?1:c;a===-1||k===0||k===1&&a===d-1&&a===c+1?e.base=e.name=s.slice(j,d):(e.name=s.slice(j,a),e.base=s.slice(j,d),e.ext=s.slice(a,d))}return c>0?e.dir=s.slice(0,c-1):i&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};posix.win32=win32.win32=win32;posix.posix=win32.posix=posix;const normalize=platform==="win32"?win32.normalize:posix.normalize,resolve=platform==="win32"?win32.resolve:posix.resolve,relative=platform==="win32"?win32.relative:posix.relative,dirname=platform==="win32"?win32.dirname:posix.dirname,basename$1=platform==="win32"?win32.basename:posix.basename,extname=platform==="win32"?win32.extname:posix.extname,sep=platform==="win32"?win32.sep:posix.sep,_schemePattern=/^\w[\w\d+.-]*$/,_singleSlashStart=/^\//,_doubleSlashStart=/^\/\//;function _validateUri(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!_schemePattern.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!_singleSlashStart.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_doubleSlashStart.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _schemeFix(s,e){return!s&&!e?"file":s}function _referenceResolution(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==_slash&&(e=_slash+e):e=_slash;break}return e}const _empty="",_slash="/",_regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class URI{constructor(e,i,o,a,c,d=!1){typeof e=="object"?(this.scheme=e.scheme||_empty,this.authority=e.authority||_empty,this.path=e.path||_empty,this.query=e.query||_empty,this.fragment=e.fragment||_empty):(this.scheme=_schemeFix(e,d),this.authority=i||_empty,this.path=_referenceResolution(this.scheme,o||_empty),this.query=a||_empty,this.fragment=c||_empty,_validateUri(this,d))}static isUri(e){return e instanceof URI?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return uriToFsPath(this,!1)}with(e){if(!e)return this;let{scheme:i,authority:o,path:a,query:c,fragment:d}=e;return i===void 0?i=this.scheme:i===null&&(i=_empty),o===void 0?o=this.authority:o===null&&(o=_empty),a===void 0?a=this.path:a===null&&(a=_empty),c===void 0?c=this.query:c===null&&(c=_empty),d===void 0?d=this.fragment:d===null&&(d=_empty),i===this.scheme&&o===this.authority&&a===this.path&&c===this.query&&d===this.fragment?this:new Uri$1(i,o,a,c,d)}static parse(e,i=!1){const o=_regexp.exec(e);return o?new Uri$1(o[2]||_empty,percentDecode(o[4]||_empty),percentDecode(o[5]||_empty),percentDecode(o[7]||_empty),percentDecode(o[9]||_empty),i):new Uri$1(_empty,_empty,_empty,_empty,_empty)}static file(e){let i=_empty;if(isWindows&&(e=e.replace(/\\/g,_slash)),e[0]===_slash&&e[1]===_slash){const o=e.indexOf(_slash,2);o===-1?(i=e.substring(2),e=_slash):(i=e.substring(2,o),e=e.substring(o)||_slash)}return new Uri$1("file",i,e,_empty,_empty)}static from(e){const i=new Uri$1(e.scheme,e.authority,e.path,e.query,e.fragment);return _validateUri(i,!0),i}static joinPath(e,...i){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let o;return isWindows&&e.scheme==="file"?o=URI.file(win32.join(uriToFsPath(e,!0),...i)).path:o=posix.join(e.path,...i),e.with({path:o})}toString(e=!1){return _asFormatted(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof URI)return e;{const i=new Uri$1(e);return i._formatted=e.external,i._fsPath=e._sep===_pathSepMarker?e.fsPath:null,i}}else return e}}const _pathSepMarker=isWindows?1:void 0;class Uri$1 extends URI{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath}toString(e=!1){return e?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=_pathSepMarker),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const encodeTable={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function encodeURIComponentFast(s,e){let i,o=-1;for(let a=0;a<s.length;a++){const c=s.charCodeAt(a);if(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c===45||c===46||c===95||c===126||e&&c===47)o!==-1&&(i+=encodeURIComponent(s.substring(o,a)),o=-1),i!==void 0&&(i+=s.charAt(a));else{i===void 0&&(i=s.substr(0,a));const d=encodeTable[c];d!==void 0?(o!==-1&&(i+=encodeURIComponent(s.substring(o,a)),o=-1),i+=d):o===-1&&(o=a)}}return o!==-1&&(i+=encodeURIComponent(s.substring(o))),i!==void 0?i:s}function encodeURIComponentMinimal(s){let e;for(let i=0;i<s.length;i++){const o=s.charCodeAt(i);o===35||o===63?(e===void 0&&(e=s.substr(0,i)),e+=encodeTable[o]):e!==void 0&&(e+=s[i])}return e!==void 0?e:s}function uriToFsPath(s,e){let i;return s.authority&&s.path.length>1&&s.scheme==="file"?i=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?i=s.path.substr(1):i=s.path[1].toLowerCase()+s.path.substr(2):i=s.path,isWindows&&(i=i.replace(/\//g,"\\")),i}function _asFormatted(s,e){const i=e?encodeURIComponentMinimal:encodeURIComponentFast;let o="",{scheme:a,authority:c,path:d,query:_,fragment:b}=s;if(a&&(o+=a,o+=":"),(c||a==="file")&&(o+=_slash,o+=_slash),c){let k=c.indexOf("@");if(k!==-1){const j=c.substr(0,k);c=c.substr(k+1),k=j.indexOf(":"),k===-1?o+=i(j,!1):(o+=i(j.substr(0,k),!1),o+=":",o+=i(j.substr(k+1),!1)),o+="@"}c=c.toLowerCase(),k=c.indexOf(":"),k===-1?o+=i(c,!1):(o+=i(c.substr(0,k),!1),o+=c.substr(k))}if(d){if(d.length>=3&&d.charCodeAt(0)===47&&d.charCodeAt(2)===58){const k=d.charCodeAt(1);k>=65&&k<=90&&(d=`/${String.fromCharCode(k+32)}:${d.substr(3)}`)}else if(d.length>=2&&d.charCodeAt(1)===58){const k=d.charCodeAt(0);k>=65&&k<=90&&(d=`${String.fromCharCode(k+32)}:${d.substr(2)}`)}o+=i(d,!0)}return _&&(o+="?",o+=i(_,!1)),b&&(o+="#",o+=e?b:encodeURIComponentFast(b,!1)),o}function decodeURIComponentGraceful(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+decodeURIComponentGraceful(s.substr(3)):s}}const _rEncodedAsHex=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(s){return s.match(_rEncodedAsHex)?s.replace(_rEncodedAsHex,e=>decodeURIComponentGraceful(e)):s}class Position$1{constructor(e,i){this.lineNumber=e,this.column=i}with(e=this.lineNumber,i=this.column){return e===this.lineNumber&&i===this.column?this:new Position$1(e,i)}delta(e=0,i=0){return this.with(this.lineNumber+e,this.column+i)}equals(e){return Position$1.equals(this,e)}static equals(e,i){return!e&&!i?!0:!!e&&!!i&&e.lineNumber===i.lineNumber&&e.column===i.column}isBefore(e){return Position$1.isBefore(this,e)}static isBefore(e,i){return e.lineNumber<i.lineNumber?!0:i.lineNumber<e.lineNumber?!1:e.column<i.column}isBeforeOrEqual(e){return Position$1.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,i){return e.lineNumber<i.lineNumber?!0:i.lineNumber<e.lineNumber?!1:e.column<=i.column}static compare(e,i){const o=e.lineNumber|0,a=i.lineNumber|0;if(o===a){const c=e.column|0,d=i.column|0;return c-d}return o-a}clone(){return new Position$1(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Position$1(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}}class Range$2{constructor(e,i,o,a){e>o||e===o&&i>a?(this.startLineNumber=o,this.startColumn=a,this.endLineNumber=e,this.endColumn=i):(this.startLineNumber=e,this.startColumn=i,this.endLineNumber=o,this.endColumn=a)}isEmpty(){return Range$2.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Range$2.containsPosition(this,e)}static containsPosition(e,i){return!(i.lineNumber<e.startLineNumber||i.lineNumber>e.endLineNumber||i.lineNumber===e.startLineNumber&&i.column<e.startColumn||i.lineNumber===e.endLineNumber&&i.column>e.endColumn)}static strictContainsPosition(e,i){return!(i.lineNumber<e.startLineNumber||i.lineNumber>e.endLineNumber||i.lineNumber===e.startLineNumber&&i.column<=e.startColumn||i.lineNumber===e.endLineNumber&&i.column>=e.endColumn)}containsRange(e){return Range$2.containsRange(this,e)}static containsRange(e,i){return!(i.startLineNumber<e.startLineNumber||i.endLineNumber<e.startLineNumber||i.startLineNumber>e.endLineNumber||i.endLineNumber>e.endLineNumber||i.startLineNumber===e.startLineNumber&&i.startColumn<e.startColumn||i.endLineNumber===e.endLineNumber&&i.endColumn>e.endColumn)}strictContainsRange(e){return Range$2.strictContainsRange(this,e)}static strictContainsRange(e,i){return!(i.startLineNumber<e.startLineNumber||i.endLineNumber<e.startLineNumber||i.startLineNumber>e.endLineNumber||i.endLineNumber>e.endLineNumber||i.startLineNumber===e.startLineNumber&&i.startColumn<=e.startColumn||i.endLineNumber===e.endLineNumber&&i.endColumn>=e.endColumn)}plusRange(e){return Range$2.plusRange(this,e)}static plusRange(e,i){let o,a,c,d;return i.startLineNumber<e.startLineNumber?(o=i.startLineNumber,a=i.startColumn):i.startLineNumber===e.startLineNumber?(o=i.startLineNumber,a=Math.min(i.startColumn,e.startColumn)):(o=e.startLineNumber,a=e.startColumn),i.endLineNumber>e.endLineNumber?(c=i.endLineNumber,d=i.endColumn):i.endLineNumber===e.endLineNumber?(c=i.endLineNumber,d=Math.max(i.endColumn,e.endColumn)):(c=e.endLineNumber,d=e.endColumn),new Range$2(o,a,c,d)}intersectRanges(e){return Range$2.intersectRanges(this,e)}static intersectRanges(e,i){let o=e.startLineNumber,a=e.startColumn,c=e.endLineNumber,d=e.endColumn;const _=i.startLineNumber,b=i.startColumn,k=i.endLineNumber,j=i.endColumn;return o<_?(o=_,a=b):o===_&&(a=Math.max(a,b)),c>k?(c=k,d=j):c===k&&(d=Math.min(d,j)),o>c||o===c&&a>d?null:new Range$2(o,a,c,d)}equalsRange(e){return Range$2.equalsRange(this,e)}static equalsRange(e,i){return!!e&&!!i&&e.startLineNumber===i.startLineNumber&&e.startColumn===i.startColumn&&e.endLineNumber===i.endLineNumber&&e.endColumn===i.endColumn}getEndPosition(){return Range$2.getEndPosition(this)}static getEndPosition(e){return new Position$1(e.endLineNumber,e.endColumn)}getStartPosition(){return Range$2.getStartPosition(this)}static getStartPosition(e){return new Position$1(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,i){return new Range$2(this.startLineNumber,this.startColumn,e,i)}setStartPosition(e,i){return new Range$2(e,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Range$2.collapseToStart(this)}static collapseToStart(e){return new Range$2(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,i=e){return new Range$2(e.lineNumber,e.column,i.lineNumber,i.column)}static lift(e){return e?new Range$2(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,i){return!(e.endLineNumber<i.startLineNumber||e.endLineNumber===i.startLineNumber&&e.endColumn<i.startColumn||i.endLineNumber<e.startLineNumber||i.endLineNumber===e.startLineNumber&&i.endColumn<e.startColumn)}static areIntersecting(e,i){return!(e.endLineNumber<i.startLineNumber||e.endLineNumber===i.startLineNumber&&e.endColumn<=i.startColumn||i.endLineNumber<e.startLineNumber||i.endLineNumber===e.startLineNumber&&i.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,i){if(e&&i){const c=e.startLineNumber|0,d=i.startLineNumber|0;if(c===d){const _=e.startColumn|0,b=i.startColumn|0;if(_===b){const k=e.endLineNumber|0,j=i.endLineNumber|0;if(k===j){const _e=e.endColumn|0,et=i.endColumn|0;return _e-et}return k-j}return _-b}return c-d}return(e?1:0)-(i?1:0)}static compareRangesUsingEnds(e,i){return e.endLineNumber===i.endLineNumber?e.endColumn===i.endColumn?e.startLineNumber===i.startLineNumber?e.startColumn-i.startColumn:e.startLineNumber-i.startLineNumber:e.endColumn-i.endColumn:e.endLineNumber-i.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}class Selection$1 extends Range$2{constructor(e,i,o,a){super(e,i,o,a),this.selectionStartLineNumber=e,this.selectionStartColumn=i,this.positionLineNumber=o,this.positionColumn=a}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Selection$1.selectionsEqual(this,e)}static selectionsEqual(e,i){return e.selectionStartLineNumber===i.selectionStartLineNumber&&e.selectionStartColumn===i.selectionStartColumn&&e.positionLineNumber===i.positionLineNumber&&e.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,i){return this.getDirection()===0?new Selection$1(this.startLineNumber,this.startColumn,e,i):new Selection$1(e,i,this.startLineNumber,this.startColumn)}getPosition(){return new Position$1(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Position$1(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,i){return this.getDirection()===0?new Selection$1(e,i,this.endLineNumber,this.endColumn):new Selection$1(this.endLineNumber,this.endColumn,e,i)}static fromPositions(e,i=e){return new Selection$1(e.lineNumber,e.column,i.lineNumber,i.column)}static fromRange(e,i){return i===0?new Selection$1(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Selection$1(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Selection$1(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,i){if(e&&!i||!e&&i)return!1;if(!e&&!i)return!0;if(e.length!==i.length)return!1;for(let o=0,a=e.length;o<a;o++)if(!this.selectionsEqual(e[o],i[o]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,i,o,a,c){return c===0?new Selection$1(e,i,o,a):new Selection$1(o,a,e,i)}}function getCodiconAriaLabel(s){return s?s.replace(/\$\((.*?)\)/g,(e,i)=>` ${i} `).trim():""}class Codicon{constructor(e,i,o){this.id=e,this.definition=i,this.description=o,Codicon._allCodicons.push(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}static getAll(){return Codicon._allCodicons}}Codicon._allCodicons=[];Codicon.add=new Codicon("add",{fontCharacter:"\\ea60"});Codicon.plus=new Codicon("plus",Codicon.add.definition);Codicon.gistNew=new Codicon("gist-new",Codicon.add.definition);Codicon.repoCreate=new Codicon("repo-create",Codicon.add.definition);Codicon.lightbulb=new Codicon("lightbulb",{fontCharacter:"\\ea61"});Codicon.lightBulb=new Codicon("light-bulb",{fontCharacter:"\\ea61"});Codicon.repo=new Codicon("repo",{fontCharacter:"\\ea62"});Codicon.repoDelete=new Codicon("repo-delete",{fontCharacter:"\\ea62"});Codicon.gistFork=new Codicon("gist-fork",{fontCharacter:"\\ea63"});Codicon.repoForked=new Codicon("repo-forked",{fontCharacter:"\\ea63"});Codicon.gitPullRequest=new Codicon("git-pull-request",{fontCharacter:"\\ea64"});Codicon.gitPullRequestAbandoned=new Codicon("git-pull-request-abandoned",{fontCharacter:"\\ea64"});Codicon.recordKeys=new Codicon("record-keys",{fontCharacter:"\\ea65"});Codicon.keyboard=new Codicon("keyboard",{fontCharacter:"\\ea65"});Codicon.tag=new Codicon("tag",{fontCharacter:"\\ea66"});Codicon.tagAdd=new Codicon("tag-add",{fontCharacter:"\\ea66"});Codicon.tagRemove=new Codicon("tag-remove",{fontCharacter:"\\ea66"});Codicon.person=new Codicon("person",{fontCharacter:"\\ea67"});Codicon.personFollow=new Codicon("person-follow",{fontCharacter:"\\ea67"});Codicon.personOutline=new Codicon("person-outline",{fontCharacter:"\\ea67"});Codicon.personFilled=new Codicon("person-filled",{fontCharacter:"\\ea67"});Codicon.gitBranch=new Codicon("git-branch",{fontCharacter:"\\ea68"});Codicon.gitBranchCreate=new Codicon("git-branch-create",{fontCharacter:"\\ea68"});Codicon.gitBranchDelete=new Codicon("git-branch-delete",{fontCharacter:"\\ea68"});Codicon.sourceControl=new Codicon("source-control",{fontCharacter:"\\ea68"});Codicon.mirror=new Codicon("mirror",{fontCharacter:"\\ea69"});Codicon.mirrorPublic=new Codicon("mirror-public",{fontCharacter:"\\ea69"});Codicon.star=new Codicon("star",{fontCharacter:"\\ea6a"});Codicon.starAdd=new Codicon("star-add",{fontCharacter:"\\ea6a"});Codicon.starDelete=new Codicon("star-delete",{fontCharacter:"\\ea6a"});Codicon.starEmpty=new Codicon("star-empty",{fontCharacter:"\\ea6a"});Codicon.comment=new Codicon("comment",{fontCharacter:"\\ea6b"});Codicon.commentAdd=new Codicon("comment-add",{fontCharacter:"\\ea6b"});Codicon.alert=new Codicon("alert",{fontCharacter:"\\ea6c"});Codicon.warning=new Codicon("warning",{fontCharacter:"\\ea6c"});Codicon.search=new Codicon("search",{fontCharacter:"\\ea6d"});Codicon.searchSave=new Codicon("search-save",{fontCharacter:"\\ea6d"});Codicon.logOut=new Codicon("log-out",{fontCharacter:"\\ea6e"});Codicon.signOut=new Codicon("sign-out",{fontCharacter:"\\ea6e"});Codicon.logIn=new Codicon("log-in",{fontCharacter:"\\ea6f"});Codicon.signIn=new Codicon("sign-in",{fontCharacter:"\\ea6f"});Codicon.eye=new Codicon("eye",{fontCharacter:"\\ea70"});Codicon.eyeUnwatch=new Codicon("eye-unwatch",{fontCharacter:"\\ea70"});Codicon.eyeWatch=new Codicon("eye-watch",{fontCharacter:"\\ea70"});Codicon.circleFilled=new Codicon("circle-filled",{fontCharacter:"\\ea71"});Codicon.primitiveDot=new Codicon("primitive-dot",{fontCharacter:"\\ea71"});Codicon.closeDirty=new Codicon("close-dirty",{fontCharacter:"\\ea71"});Codicon.debugBreakpoint=new Codicon("debug-breakpoint",{fontCharacter:"\\ea71"});Codicon.debugBreakpointDisabled=new Codicon("debug-breakpoint-disabled",{fontCharacter:"\\ea71"});Codicon.debugHint=new Codicon("debug-hint",{fontCharacter:"\\ea71"});Codicon.primitiveSquare=new Codicon("primitive-square",{fontCharacter:"\\ea72"});Codicon.edit=new Codicon("edit",{fontCharacter:"\\ea73"});Codicon.pencil=new Codicon("pencil",{fontCharacter:"\\ea73"});Codicon.info=new Codicon("info",{fontCharacter:"\\ea74"});Codicon.issueOpened=new Codicon("issue-opened",{fontCharacter:"\\ea74"});Codicon.gistPrivate=new Codicon("gist-private",{fontCharacter:"\\ea75"});Codicon.gitForkPrivate=new Codicon("git-fork-private",{fontCharacter:"\\ea75"});Codicon.lock=new Codicon("lock",{fontCharacter:"\\ea75"});Codicon.mirrorPrivate=new Codicon("mirror-private",{fontCharacter:"\\ea75"});Codicon.close=new Codicon("close",{fontCharacter:"\\ea76"});Codicon.removeClose=new Codicon("remove-close",{fontCharacter:"\\ea76"});Codicon.x=new Codicon("x",{fontCharacter:"\\ea76"});Codicon.repoSync=new Codicon("repo-sync",{fontCharacter:"\\ea77"});Codicon.sync=new Codicon("sync",{fontCharacter:"\\ea77"});Codicon.clone=new Codicon("clone",{fontCharacter:"\\ea78"});Codicon.desktopDownload=new Codicon("desktop-download",{fontCharacter:"\\ea78"});Codicon.beaker=new Codicon("beaker",{fontCharacter:"\\ea79"});Codicon.microscope=new Codicon("microscope",{fontCharacter:"\\ea79"});Codicon.vm=new Codicon("vm",{fontCharacter:"\\ea7a"});Codicon.deviceDesktop=new Codicon("device-desktop",{fontCharacter:"\\ea7a"});Codicon.file=new Codicon("file",{fontCharacter:"\\ea7b"});Codicon.fileText=new Codicon("file-text",{fontCharacter:"\\ea7b"});Codicon.more=new Codicon("more",{fontCharacter:"\\ea7c"});Codicon.ellipsis=new Codicon("ellipsis",{fontCharacter:"\\ea7c"});Codicon.kebabHorizontal=new Codicon("kebab-horizontal",{fontCharacter:"\\ea7c"});Codicon.mailReply=new Codicon("mail-reply",{fontCharacter:"\\ea7d"});Codicon.reply=new Codicon("reply",{fontCharacter:"\\ea7d"});Codicon.organization=new Codicon("organization",{fontCharacter:"\\ea7e"});Codicon.organizationFilled=new Codicon("organization-filled",{fontCharacter:"\\ea7e"});Codicon.organizationOutline=new Codicon("organization-outline",{fontCharacter:"\\ea7e"});Codicon.newFile=new Codicon("new-file",{fontCharacter:"\\ea7f"});Codicon.fileAdd=new Codicon("file-add",{fontCharacter:"\\ea7f"});Codicon.newFolder=new Codicon("new-folder",{fontCharacter:"\\ea80"});Codicon.fileDirectoryCreate=new Codicon("file-directory-create",{fontCharacter:"\\ea80"});Codicon.trash=new Codicon("trash",{fontCharacter:"\\ea81"});Codicon.trashcan=new Codicon("trashcan",{fontCharacter:"\\ea81"});Codicon.history=new Codicon("history",{fontCharacter:"\\ea82"});Codicon.clock=new Codicon("clock",{fontCharacter:"\\ea82"});Codicon.folder=new Codicon("folder",{fontCharacter:"\\ea83"});Codicon.fileDirectory=new Codicon("file-directory",{fontCharacter:"\\ea83"});Codicon.symbolFolder=new Codicon("symbol-folder",{fontCharacter:"\\ea83"});Codicon.logoGithub=new Codicon("logo-github",{fontCharacter:"\\ea84"});Codicon.markGithub=new Codicon("mark-github",{fontCharacter:"\\ea84"});Codicon.github=new Codicon("github",{fontCharacter:"\\ea84"});Codicon.terminal=new Codicon("terminal",{fontCharacter:"\\ea85"});Codicon.console=new Codicon("console",{fontCharacter:"\\ea85"});Codicon.repl=new Codicon("repl",{fontCharacter:"\\ea85"});Codicon.zap=new Codicon("zap",{fontCharacter:"\\ea86"});Codicon.symbolEvent=new Codicon("symbol-event",{fontCharacter:"\\ea86"});Codicon.error=new Codicon("error",{fontCharacter:"\\ea87"});Codicon.stop=new Codicon("stop",{fontCharacter:"\\ea87"});Codicon.variable=new Codicon("variable",{fontCharacter:"\\ea88"});Codicon.symbolVariable=new Codicon("symbol-variable",{fontCharacter:"\\ea88"});Codicon.array=new Codicon("array",{fontCharacter:"\\ea8a"});Codicon.symbolArray=new Codicon("symbol-array",{fontCharacter:"\\ea8a"});Codicon.symbolModule=new Codicon("symbol-module",{fontCharacter:"\\ea8b"});Codicon.symbolPackage=new Codicon("symbol-package",{fontCharacter:"\\ea8b"});Codicon.symbolNamespace=new Codicon("symbol-namespace",{fontCharacter:"\\ea8b"});Codicon.symbolObject=new Codicon("symbol-object",{fontCharacter:"\\ea8b"});Codicon.symbolMethod=new Codicon("symbol-method",{fontCharacter:"\\ea8c"});Codicon.symbolFunction=new Codicon("symbol-function",{fontCharacter:"\\ea8c"});Codicon.symbolConstructor=new Codicon("symbol-constructor",{fontCharacter:"\\ea8c"});Codicon.symbolBoolean=new Codicon("symbol-boolean",{fontCharacter:"\\ea8f"});Codicon.symbolNull=new Codicon("symbol-null",{fontCharacter:"\\ea8f"});Codicon.symbolNumeric=new Codicon("symbol-numeric",{fontCharacter:"\\ea90"});Codicon.symbolNumber=new Codicon("symbol-number",{fontCharacter:"\\ea90"});Codicon.symbolStructure=new Codicon("symbol-structure",{fontCharacter:"\\ea91"});Codicon.symbolStruct=new Codicon("symbol-struct",{fontCharacter:"\\ea91"});Codicon.symbolParameter=new Codicon("symbol-parameter",{fontCharacter:"\\ea92"});Codicon.symbolTypeParameter=new Codicon("symbol-type-parameter",{fontCharacter:"\\ea92"});Codicon.symbolKey=new Codicon("symbol-key",{fontCharacter:"\\ea93"});Codicon.symbolText=new Codicon("symbol-text",{fontCharacter:"\\ea93"});Codicon.symbolReference=new Codicon("symbol-reference",{fontCharacter:"\\ea94"});Codicon.goToFile=new Codicon("go-to-file",{fontCharacter:"\\ea94"});Codicon.symbolEnum=new Codicon("symbol-enum",{fontCharacter:"\\ea95"});Codicon.symbolValue=new Codicon("symbol-value",{fontCharacter:"\\ea95"});Codicon.symbolRuler=new Codicon("symbol-ruler",{fontCharacter:"\\ea96"});Codicon.symbolUnit=new Codicon("symbol-unit",{fontCharacter:"\\ea96"});Codicon.activateBreakpoints=new Codicon("activate-breakpoints",{fontCharacter:"\\ea97"});Codicon.archive=new Codicon("archive",{fontCharacter:"\\ea98"});Codicon.arrowBoth=new Codicon("arrow-both",{fontCharacter:"\\ea99"});Codicon.arrowDown=new Codicon("arrow-down",{fontCharacter:"\\ea9a"});Codicon.arrowLeft=new Codicon("arrow-left",{fontCharacter:"\\ea9b"});Codicon.arrowRight=new Codicon("arrow-right",{fontCharacter:"\\ea9c"});Codicon.arrowSmallDown=new Codicon("arrow-small-down",{fontCharacter:"\\ea9d"});Codicon.arrowSmallLeft=new Codicon("arrow-small-left",{fontCharacter:"\\ea9e"});Codicon.arrowSmallRight=new Codicon("arrow-small-right",{fontCharacter:"\\ea9f"});Codicon.arrowSmallUp=new Codicon("arrow-small-up",{fontCharacter:"\\eaa0"});Codicon.arrowUp=new Codicon("arrow-up",{fontCharacter:"\\eaa1"});Codicon.bell=new Codicon("bell",{fontCharacter:"\\eaa2"});Codicon.bold=new Codicon("bold",{fontCharacter:"\\eaa3"});Codicon.book=new Codicon("book",{fontCharacter:"\\eaa4"});Codicon.bookmark=new Codicon("bookmark",{fontCharacter:"\\eaa5"});Codicon.debugBreakpointConditionalUnverified=new Codicon("debug-breakpoint-conditional-unverified",{fontCharacter:"\\eaa6"});Codicon.debugBreakpointConditional=new Codicon("debug-breakpoint-conditional",{fontCharacter:"\\eaa7"});Codicon.debugBreakpointConditionalDisabled=new Codicon("debug-breakpoint-conditional-disabled",{fontCharacter:"\\eaa7"});Codicon.debugBreakpointDataUnverified=new Codicon("debug-breakpoint-data-unverified",{fontCharacter:"\\eaa8"});Codicon.debugBreakpointData=new Codicon("debug-breakpoint-data",{fontCharacter:"\\eaa9"});Codicon.debugBreakpointDataDisabled=new Codicon("debug-breakpoint-data-disabled",{fontCharacter:"\\eaa9"});Codicon.debugBreakpointLogUnverified=new Codicon("debug-breakpoint-log-unverified",{fontCharacter:"\\eaaa"});Codicon.debugBreakpointLog=new Codicon("debug-breakpoint-log",{fontCharacter:"\\eaab"});Codicon.debugBreakpointLogDisabled=new Codicon("debug-breakpoint-log-disabled",{fontCharacter:"\\eaab"});Codicon.briefcase=new Codicon("briefcase",{fontCharacter:"\\eaac"});Codicon.broadcast=new Codicon("broadcast",{fontCharacter:"\\eaad"});Codicon.browser=new Codicon("browser",{fontCharacter:"\\eaae"});Codicon.bug=new Codicon("bug",{fontCharacter:"\\eaaf"});Codicon.calendar=new Codicon("calendar",{fontCharacter:"\\eab0"});Codicon.caseSensitive=new Codicon("case-sensitive",{fontCharacter:"\\eab1"});Codicon.check=new Codicon("check",{fontCharacter:"\\eab2"});Codicon.checklist=new Codicon("checklist",{fontCharacter:"\\eab3"});Codicon.chevronDown=new Codicon("chevron-down",{fontCharacter:"\\eab4"});Codicon.dropDownButton=new Codicon("drop-down-button",Codicon.chevronDown.definition);Codicon.chevronLeft=new Codicon("chevron-left",{fontCharacter:"\\eab5"});Codicon.chevronRight=new Codicon("chevron-right",{fontCharacter:"\\eab6"});Codicon.chevronUp=new Codicon("chevron-up",{fontCharacter:"\\eab7"});Codicon.chromeClose=new Codicon("chrome-close",{fontCharacter:"\\eab8"});Codicon.chromeMaximize=new Codicon("chrome-maximize",{fontCharacter:"\\eab9"});Codicon.chromeMinimize=new Codicon("chrome-minimize",{fontCharacter:"\\eaba"});Codicon.chromeRestore=new Codicon("chrome-restore",{fontCharacter:"\\eabb"});Codicon.circleOutline=new Codicon("circle-outline",{fontCharacter:"\\eabc"});Codicon.debugBreakpointUnverified=new Codicon("debug-breakpoint-unverified",{fontCharacter:"\\eabc"});Codicon.circleSlash=new Codicon("circle-slash",{fontCharacter:"\\eabd"});Codicon.circuitBoard=new Codicon("circuit-board",{fontCharacter:"\\eabe"});Codicon.clearAll=new Codicon("clear-all",{fontCharacter:"\\eabf"});Codicon.clippy=new Codicon("clippy",{fontCharacter:"\\eac0"});Codicon.closeAll=new Codicon("close-all",{fontCharacter:"\\eac1"});Codicon.cloudDownload=new Codicon("cloud-download",{fontCharacter:"\\eac2"});Codicon.cloudUpload=new Codicon("cloud-upload",{fontCharacter:"\\eac3"});Codicon.code=new Codicon("code",{fontCharacter:"\\eac4"});Codicon.collapseAll=new Codicon("collapse-all",{fontCharacter:"\\eac5"});Codicon.colorMode=new Codicon("color-mode",{fontCharacter:"\\eac6"});Codicon.commentDiscussion=new Codicon("comment-discussion",{fontCharacter:"\\eac7"});Codicon.compareChanges=new Codicon("compare-changes",{fontCharacter:"\\eafd"});Codicon.creditCard=new Codicon("credit-card",{fontCharacter:"\\eac9"});Codicon.dash=new Codicon("dash",{fontCharacter:"\\eacc"});Codicon.dashboard=new Codicon("dashboard",{fontCharacter:"\\eacd"});Codicon.database=new Codicon("database",{fontCharacter:"\\eace"});Codicon.debugContinue=new Codicon("debug-continue",{fontCharacter:"\\eacf"});Codicon.debugDisconnect=new Codicon("debug-disconnect",{fontCharacter:"\\ead0"});Codicon.debugPause=new Codicon("debug-pause",{fontCharacter:"\\ead1"});Codicon.debugRestart=new Codicon("debug-restart",{fontCharacter:"\\ead2"});Codicon.debugStart=new Codicon("debug-start",{fontCharacter:"\\ead3"});Codicon.debugStepInto=new Codicon("debug-step-into",{fontCharacter:"\\ead4"});Codicon.debugStepOut=new Codicon("debug-step-out",{fontCharacter:"\\ead5"});Codicon.debugStepOver=new Codicon("debug-step-over",{fontCharacter:"\\ead6"});Codicon.debugStop=new Codicon("debug-stop",{fontCharacter:"\\ead7"});Codicon.debug=new Codicon("debug",{fontCharacter:"\\ead8"});Codicon.deviceCameraVideo=new Codicon("device-camera-video",{fontCharacter:"\\ead9"});Codicon.deviceCamera=new Codicon("device-camera",{fontCharacter:"\\eada"});Codicon.deviceMobile=new Codicon("device-mobile",{fontCharacter:"\\eadb"});Codicon.diffAdded=new Codicon("diff-added",{fontCharacter:"\\eadc"});Codicon.diffIgnored=new Codicon("diff-ignored",{fontCharacter:"\\eadd"});Codicon.diffModified=new Codicon("diff-modified",{fontCharacter:"\\eade"});Codicon.diffRemoved=new Codicon("diff-removed",{fontCharacter:"\\eadf"});Codicon.diffRenamed=new Codicon("diff-renamed",{fontCharacter:"\\eae0"});Codicon.diff=new Codicon("diff",{fontCharacter:"\\eae1"});Codicon.discard=new Codicon("discard",{fontCharacter:"\\eae2"});Codicon.editorLayout=new Codicon("editor-layout",{fontCharacter:"\\eae3"});Codicon.emptyWindow=new Codicon("empty-window",{fontCharacter:"\\eae4"});Codicon.exclude=new Codicon("exclude",{fontCharacter:"\\eae5"});Codicon.extensions=new Codicon("extensions",{fontCharacter:"\\eae6"});Codicon.eyeClosed=new Codicon("eye-closed",{fontCharacter:"\\eae7"});Codicon.fileBinary=new Codicon("file-binary",{fontCharacter:"\\eae8"});Codicon.fileCode=new Codicon("file-code",{fontCharacter:"\\eae9"});Codicon.fileMedia=new Codicon("file-media",{fontCharacter:"\\eaea"});Codicon.filePdf=new Codicon("file-pdf",{fontCharacter:"\\eaeb"});Codicon.fileSubmodule=new Codicon("file-submodule",{fontCharacter:"\\eaec"});Codicon.fileSymlinkDirectory=new Codicon("file-symlink-directory",{fontCharacter:"\\eaed"});Codicon.fileSymlinkFile=new Codicon("file-symlink-file",{fontCharacter:"\\eaee"});Codicon.fileZip=new Codicon("file-zip",{fontCharacter:"\\eaef"});Codicon.files=new Codicon("files",{fontCharacter:"\\eaf0"});Codicon.filter=new Codicon("filter",{fontCharacter:"\\eaf1"});Codicon.flame=new Codicon("flame",{fontCharacter:"\\eaf2"});Codicon.foldDown=new Codicon("fold-down",{fontCharacter:"\\eaf3"});Codicon.foldUp=new Codicon("fold-up",{fontCharacter:"\\eaf4"});Codicon.fold=new Codicon("fold",{fontCharacter:"\\eaf5"});Codicon.folderActive=new Codicon("folder-active",{fontCharacter:"\\eaf6"});Codicon.folderOpened=new Codicon("folder-opened",{fontCharacter:"\\eaf7"});Codicon.gear=new Codicon("gear",{fontCharacter:"\\eaf8"});Codicon.gift=new Codicon("gift",{fontCharacter:"\\eaf9"});Codicon.gistSecret=new Codicon("gist-secret",{fontCharacter:"\\eafa"});Codicon.gist=new Codicon("gist",{fontCharacter:"\\eafb"});Codicon.gitCommit=new Codicon("git-commit",{fontCharacter:"\\eafc"});Codicon.gitCompare=new Codicon("git-compare",{fontCharacter:"\\eafd"});Codicon.gitMerge=new Codicon("git-merge",{fontCharacter:"\\eafe"});Codicon.githubAction=new Codicon("github-action",{fontCharacter:"\\eaff"});Codicon.githubAlt=new Codicon("github-alt",{fontCharacter:"\\eb00"});Codicon.globe=new Codicon("globe",{fontCharacter:"\\eb01"});Codicon.grabber=new Codicon("grabber",{fontCharacter:"\\eb02"});Codicon.graph=new Codicon("graph",{fontCharacter:"\\eb03"});Codicon.gripper=new Codicon("gripper",{fontCharacter:"\\eb04"});Codicon.heart=new Codicon("heart",{fontCharacter:"\\eb05"});Codicon.home=new Codicon("home",{fontCharacter:"\\eb06"});Codicon.horizontalRule=new Codicon("horizontal-rule",{fontCharacter:"\\eb07"});Codicon.hubot=new Codicon("hubot",{fontCharacter:"\\eb08"});Codicon.inbox=new Codicon("inbox",{fontCharacter:"\\eb09"});Codicon.issueClosed=new Codicon("issue-closed",{fontCharacter:"\\eba4"});Codicon.issueReopened=new Codicon("issue-reopened",{fontCharacter:"\\eb0b"});Codicon.issues=new Codicon("issues",{fontCharacter:"\\eb0c"});Codicon.italic=new Codicon("italic",{fontCharacter:"\\eb0d"});Codicon.jersey=new Codicon("jersey",{fontCharacter:"\\eb0e"});Codicon.json=new Codicon("json",{fontCharacter:"\\eb0f"});Codicon.kebabVertical=new Codicon("kebab-vertical",{fontCharacter:"\\eb10"});Codicon.key=new Codicon("key",{fontCharacter:"\\eb11"});Codicon.law=new Codicon("law",{fontCharacter:"\\eb12"});Codicon.lightbulbAutofix=new Codicon("lightbulb-autofix",{fontCharacter:"\\eb13"});Codicon.linkExternal=new Codicon("link-external",{fontCharacter:"\\eb14"});Codicon.link=new Codicon("link",{fontCharacter:"\\eb15"});Codicon.listOrdered=new Codicon("list-ordered",{fontCharacter:"\\eb16"});Codicon.listUnordered=new Codicon("list-unordered",{fontCharacter:"\\eb17"});Codicon.liveShare=new Codicon("live-share",{fontCharacter:"\\eb18"});Codicon.loading=new Codicon("loading",{fontCharacter:"\\eb19"});Codicon.location=new Codicon("location",{fontCharacter:"\\eb1a"});Codicon.mailRead=new Codicon("mail-read",{fontCharacter:"\\eb1b"});Codicon.mail=new Codicon("mail",{fontCharacter:"\\eb1c"});Codicon.markdown=new Codicon("markdown",{fontCharacter:"\\eb1d"});Codicon.megaphone=new Codicon("megaphone",{fontCharacter:"\\eb1e"});Codicon.mention=new Codicon("mention",{fontCharacter:"\\eb1f"});Codicon.milestone=new Codicon("milestone",{fontCharacter:"\\eb20"});Codicon.mortarBoard=new Codicon("mortar-board",{fontCharacter:"\\eb21"});Codicon.move=new Codicon("move",{fontCharacter:"\\eb22"});Codicon.multipleWindows=new Codicon("multiple-windows",{fontCharacter:"\\eb23"});Codicon.mute=new Codicon("mute",{fontCharacter:"\\eb24"});Codicon.noNewline=new Codicon("no-newline",{fontCharacter:"\\eb25"});Codicon.note=new Codicon("note",{fontCharacter:"\\eb26"});Codicon.octoface=new Codicon("octoface",{fontCharacter:"\\eb27"});Codicon.openPreview=new Codicon("open-preview",{fontCharacter:"\\eb28"});Codicon.package_=new Codicon("package",{fontCharacter:"\\eb29"});Codicon.paintcan=new Codicon("paintcan",{fontCharacter:"\\eb2a"});Codicon.pin=new Codicon("pin",{fontCharacter:"\\eb2b"});Codicon.play=new Codicon("play",{fontCharacter:"\\eb2c"});Codicon.run=new Codicon("run",{fontCharacter:"\\eb2c"});Codicon.plug=new Codicon("plug",{fontCharacter:"\\eb2d"});Codicon.preserveCase=new Codicon("preserve-case",{fontCharacter:"\\eb2e"});Codicon.preview=new Codicon("preview",{fontCharacter:"\\eb2f"});Codicon.project=new Codicon("project",{fontCharacter:"\\eb30"});Codicon.pulse=new Codicon("pulse",{fontCharacter:"\\eb31"});Codicon.question=new Codicon("question",{fontCharacter:"\\eb32"});Codicon.quote=new Codicon("quote",{fontCharacter:"\\eb33"});Codicon.radioTower=new Codicon("radio-tower",{fontCharacter:"\\eb34"});Codicon.reactions=new Codicon("reactions",{fontCharacter:"\\eb35"});Codicon.references=new Codicon("references",{fontCharacter:"\\eb36"});Codicon.refresh=new Codicon("refresh",{fontCharacter:"\\eb37"});Codicon.regex=new Codicon("regex",{fontCharacter:"\\eb38"});Codicon.remoteExplorer=new Codicon("remote-explorer",{fontCharacter:"\\eb39"});Codicon.remote=new Codicon("remote",{fontCharacter:"\\eb3a"});Codicon.remove=new Codicon("remove",{fontCharacter:"\\eb3b"});Codicon.replaceAll=new Codicon("replace-all",{fontCharacter:"\\eb3c"});Codicon.replace=new Codicon("replace",{fontCharacter:"\\eb3d"});Codicon.repoClone=new Codicon("repo-clone",{fontCharacter:"\\eb3e"});Codicon.repoForcePush=new Codicon("repo-force-push",{fontCharacter:"\\eb3f"});Codicon.repoPull=new Codicon("repo-pull",{fontCharacter:"\\eb40"});Codicon.repoPush=new Codicon("repo-push",{fontCharacter:"\\eb41"});Codicon.report=new Codicon("report",{fontCharacter:"\\eb42"});Codicon.requestChanges=new Codicon("request-changes",{fontCharacter:"\\eb43"});Codicon.rocket=new Codicon("rocket",{fontCharacter:"\\eb44"});Codicon.rootFolderOpened=new Codicon("root-folder-opened",{fontCharacter:"\\eb45"});Codicon.rootFolder=new Codicon("root-folder",{fontCharacter:"\\eb46"});Codicon.rss=new Codicon("rss",{fontCharacter:"\\eb47"});Codicon.ruby=new Codicon("ruby",{fontCharacter:"\\eb48"});Codicon.saveAll=new Codicon("save-all",{fontCharacter:"\\eb49"});Codicon.saveAs=new Codicon("save-as",{fontCharacter:"\\eb4a"});Codicon.save=new Codicon("save",{fontCharacter:"\\eb4b"});Codicon.screenFull=new Codicon("screen-full",{fontCharacter:"\\eb4c"});Codicon.screenNormal=new Codicon("screen-normal",{fontCharacter:"\\eb4d"});Codicon.searchStop=new Codicon("search-stop",{fontCharacter:"\\eb4e"});Codicon.server=new Codicon("server",{fontCharacter:"\\eb50"});Codicon.settingsGear=new Codicon("settings-gear",{fontCharacter:"\\eb51"});Codicon.settings=new Codicon("settings",{fontCharacter:"\\eb52"});Codicon.shield=new Codicon("shield",{fontCharacter:"\\eb53"});Codicon.smiley=new Codicon("smiley",{fontCharacter:"\\eb54"});Codicon.sortPrecedence=new Codicon("sort-precedence",{fontCharacter:"\\eb55"});Codicon.splitHorizontal=new Codicon("split-horizontal",{fontCharacter:"\\eb56"});Codicon.splitVertical=new Codicon("split-vertical",{fontCharacter:"\\eb57"});Codicon.squirrel=new Codicon("squirrel",{fontCharacter:"\\eb58"});Codicon.starFull=new Codicon("star-full",{fontCharacter:"\\eb59"});Codicon.starHalf=new Codicon("star-half",{fontCharacter:"\\eb5a"});Codicon.symbolClass=new Codicon("symbol-class",{fontCharacter:"\\eb5b"});Codicon.symbolColor=new Codicon("symbol-color",{fontCharacter:"\\eb5c"});Codicon.symbolCustomColor=new Codicon("symbol-customcolor",{fontCharacter:"\\eb5c"});Codicon.symbolConstant=new Codicon("symbol-constant",{fontCharacter:"\\eb5d"});Codicon.symbolEnumMember=new Codicon("symbol-enum-member",{fontCharacter:"\\eb5e"});Codicon.symbolField=new Codicon("symbol-field",{fontCharacter:"\\eb5f"});Codicon.symbolFile=new Codicon("symbol-file",{fontCharacter:"\\eb60"});Codicon.symbolInterface=new Codicon("symbol-interface",{fontCharacter:"\\eb61"});Codicon.symbolKeyword=new Codicon("symbol-keyword",{fontCharacter:"\\eb62"});Codicon.symbolMisc=new Codicon("symbol-misc",{fontCharacter:"\\eb63"});Codicon.symbolOperator=new Codicon("symbol-operator",{fontCharacter:"\\eb64"});Codicon.symbolProperty=new Codicon("symbol-property",{fontCharacter:"\\eb65"});Codicon.wrench=new Codicon("wrench",{fontCharacter:"\\eb65"});Codicon.wrenchSubaction=new Codicon("wrench-subaction",{fontCharacter:"\\eb65"});Codicon.symbolSnippet=new Codicon("symbol-snippet",{fontCharacter:"\\eb66"});Codicon.tasklist=new Codicon("tasklist",{fontCharacter:"\\eb67"});Codicon.telescope=new Codicon("telescope",{fontCharacter:"\\eb68"});Codicon.textSize=new Codicon("text-size",{fontCharacter:"\\eb69"});Codicon.threeBars=new Codicon("three-bars",{fontCharacter:"\\eb6a"});Codicon.thumbsdown=new Codicon("thumbsdown",{fontCharacter:"\\eb6b"});Codicon.thumbsup=new Codicon("thumbsup",{fontCharacter:"\\eb6c"});Codicon.tools=new Codicon("tools",{fontCharacter:"\\eb6d"});Codicon.triangleDown=new Codicon("triangle-down",{fontCharacter:"\\eb6e"});Codicon.triangleLeft=new Codicon("triangle-left",{fontCharacter:"\\eb6f"});Codicon.triangleRight=new Codicon("triangle-right",{fontCharacter:"\\eb70"});Codicon.triangleUp=new Codicon("triangle-up",{fontCharacter:"\\eb71"});Codicon.twitter=new Codicon("twitter",{fontCharacter:"\\eb72"});Codicon.unfold=new Codicon("unfold",{fontCharacter:"\\eb73"});Codicon.unlock=new Codicon("unlock",{fontCharacter:"\\eb74"});Codicon.unmute=new Codicon("unmute",{fontCharacter:"\\eb75"});Codicon.unverified=new Codicon("unverified",{fontCharacter:"\\eb76"});Codicon.verified=new Codicon("verified",{fontCharacter:"\\eb77"});Codicon.versions=new Codicon("versions",{fontCharacter:"\\eb78"});Codicon.vmActive=new Codicon("vm-active",{fontCharacter:"\\eb79"});Codicon.vmOutline=new Codicon("vm-outline",{fontCharacter:"\\eb7a"});Codicon.vmRunning=new Codicon("vm-running",{fontCharacter:"\\eb7b"});Codicon.watch=new Codicon("watch",{fontCharacter:"\\eb7c"});Codicon.whitespace=new Codicon("whitespace",{fontCharacter:"\\eb7d"});Codicon.wholeWord=new Codicon("whole-word",{fontCharacter:"\\eb7e"});Codicon.window=new Codicon("window",{fontCharacter:"\\eb7f"});Codicon.wordWrap=new Codicon("word-wrap",{fontCharacter:"\\eb80"});Codicon.zoomIn=new Codicon("zoom-in",{fontCharacter:"\\eb81"});Codicon.zoomOut=new Codicon("zoom-out",{fontCharacter:"\\eb82"});Codicon.listFilter=new Codicon("list-filter",{fontCharacter:"\\eb83"});Codicon.listFlat=new Codicon("list-flat",{fontCharacter:"\\eb84"});Codicon.listSelection=new Codicon("list-selection",{fontCharacter:"\\eb85"});Codicon.selection=new Codicon("selection",{fontCharacter:"\\eb85"});Codicon.listTree=new Codicon("list-tree",{fontCharacter:"\\eb86"});Codicon.debugBreakpointFunctionUnverified=new Codicon("debug-breakpoint-function-unverified",{fontCharacter:"\\eb87"});Codicon.debugBreakpointFunction=new Codicon("debug-breakpoint-function",{fontCharacter:"\\eb88"});Codicon.debugBreakpointFunctionDisabled=new Codicon("debug-breakpoint-function-disabled",{fontCharacter:"\\eb88"});Codicon.debugStackframeActive=new Codicon("debug-stackframe-active",{fontCharacter:"\\eb89"});Codicon.circleSmallFilled=new Codicon("circle-small-filled",{fontCharacter:"\\eb8a"});Codicon.debugStackframeDot=new Codicon("debug-stackframe-dot",Codicon.circleSmallFilled.definition);Codicon.debugStackframe=new Codicon("debug-stackframe",{fontCharacter:"\\eb8b"});Codicon.debugStackframeFocused=new Codicon("debug-stackframe-focused",{fontCharacter:"\\eb8b"});Codicon.debugBreakpointUnsupported=new Codicon("debug-breakpoint-unsupported",{fontCharacter:"\\eb8c"});Codicon.symbolString=new Codicon("symbol-string",{fontCharacter:"\\eb8d"});Codicon.debugReverseContinue=new Codicon("debug-reverse-continue",{fontCharacter:"\\eb8e"});Codicon.debugStepBack=new Codicon("debug-step-back",{fontCharacter:"\\eb8f"});Codicon.debugRestartFrame=new Codicon("debug-restart-frame",{fontCharacter:"\\eb90"});Codicon.callIncoming=new Codicon("call-incoming",{fontCharacter:"\\eb92"});Codicon.callOutgoing=new Codicon("call-outgoing",{fontCharacter:"\\eb93"});Codicon.menu=new Codicon("menu",{fontCharacter:"\\eb94"});Codicon.expandAll=new Codicon("expand-all",{fontCharacter:"\\eb95"});Codicon.feedback=new Codicon("feedback",{fontCharacter:"\\eb96"});Codicon.groupByRefType=new Codicon("group-by-ref-type",{fontCharacter:"\\eb97"});Codicon.ungroupByRefType=new Codicon("ungroup-by-ref-type",{fontCharacter:"\\eb98"});Codicon.account=new Codicon("account",{fontCharacter:"\\eb99"});Codicon.bellDot=new Codicon("bell-dot",{fontCharacter:"\\eb9a"});Codicon.debugConsole=new Codicon("debug-console",{fontCharacter:"\\eb9b"});Codicon.library=new Codicon("library",{fontCharacter:"\\eb9c"});Codicon.output=new Codicon("output",{fontCharacter:"\\eb9d"});Codicon.runAll=new Codicon("run-all",{fontCharacter:"\\eb9e"});Codicon.syncIgnored=new Codicon("sync-ignored",{fontCharacter:"\\eb9f"});Codicon.pinned=new Codicon("pinned",{fontCharacter:"\\eba0"});Codicon.githubInverted=new Codicon("github-inverted",{fontCharacter:"\\eba1"});Codicon.debugAlt=new Codicon("debug-alt",{fontCharacter:"\\eb91"});Codicon.serverProcess=new Codicon("server-process",{fontCharacter:"\\eba2"});Codicon.serverEnvironment=new Codicon("server-environment",{fontCharacter:"\\eba3"});Codicon.pass=new Codicon("pass",{fontCharacter:"\\eba4"});Codicon.stopCircle=new Codicon("stop-circle",{fontCharacter:"\\eba5"});Codicon.playCircle=new Codicon("play-circle",{fontCharacter:"\\eba6"});Codicon.record=new Codicon("record",{fontCharacter:"\\eba7"});Codicon.debugAltSmall=new Codicon("debug-alt-small",{fontCharacter:"\\eba8"});Codicon.vmConnect=new Codicon("vm-connect",{fontCharacter:"\\eba9"});Codicon.cloud=new Codicon("cloud",{fontCharacter:"\\ebaa"});Codicon.merge=new Codicon("merge",{fontCharacter:"\\ebab"});Codicon.exportIcon=new Codicon("export",{fontCharacter:"\\ebac"});Codicon.graphLeft=new Codicon("graph-left",{fontCharacter:"\\ebad"});Codicon.magnet=new Codicon("magnet",{fontCharacter:"\\ebae"});Codicon.notebook=new Codicon("notebook",{fontCharacter:"\\ebaf"});Codicon.redo=new Codicon("redo",{fontCharacter:"\\ebb0"});Codicon.checkAll=new Codicon("check-all",{fontCharacter:"\\ebb1"});Codicon.pinnedDirty=new Codicon("pinned-dirty",{fontCharacter:"\\ebb2"});Codicon.passFilled=new Codicon("pass-filled",{fontCharacter:"\\ebb3"});Codicon.circleLargeFilled=new Codicon("circle-large-filled",{fontCharacter:"\\ebb4"});Codicon.circleLargeOutline=new Codicon("circle-large-outline",{fontCharacter:"\\ebb5"});Codicon.combine=new Codicon("combine",{fontCharacter:"\\ebb6"});Codicon.gather=new Codicon("gather",{fontCharacter:"\\ebb6"});Codicon.table=new Codicon("table",{fontCharacter:"\\ebb7"});Codicon.variableGroup=new Codicon("variable-group",{fontCharacter:"\\ebb8"});Codicon.typeHierarchy=new Codicon("type-hierarchy",{fontCharacter:"\\ebb9"});Codicon.typeHierarchySub=new Codicon("type-hierarchy-sub",{fontCharacter:"\\ebba"});Codicon.typeHierarchySuper=new Codicon("type-hierarchy-super",{fontCharacter:"\\ebbb"});Codicon.gitPullRequestCreate=new Codicon("git-pull-request-create",{fontCharacter:"\\ebbc"});Codicon.runAbove=new Codicon("run-above",{fontCharacter:"\\ebbd"});Codicon.runBelow=new Codicon("run-below",{fontCharacter:"\\ebbe"});Codicon.notebookTemplate=new Codicon("notebook-template",{fontCharacter:"\\ebbf"});Codicon.debugRerun=new Codicon("debug-rerun",{fontCharacter:"\\ebc0"});Codicon.workspaceTrusted=new Codicon("workspace-trusted",{fontCharacter:"\\ebc1"});Codicon.workspaceUntrusted=new Codicon("workspace-untrusted",{fontCharacter:"\\ebc2"});Codicon.workspaceUnspecified=new Codicon("workspace-unspecified",{fontCharacter:"\\ebc3"});Codicon.terminalCmd=new Codicon("terminal-cmd",{fontCharacter:"\\ebc4"});Codicon.terminalDebian=new Codicon("terminal-debian",{fontCharacter:"\\ebc5"});Codicon.terminalLinux=new Codicon("terminal-linux",{fontCharacter:"\\ebc6"});Codicon.terminalPowershell=new Codicon("terminal-powershell",{fontCharacter:"\\ebc7"});Codicon.terminalTmux=new Codicon("terminal-tmux",{fontCharacter:"\\ebc8"});Codicon.terminalUbuntu=new Codicon("terminal-ubuntu",{fontCharacter:"\\ebc9"});Codicon.terminalBash=new Codicon("terminal-bash",{fontCharacter:"\\ebca"});Codicon.arrowSwap=new Codicon("arrow-swap",{fontCharacter:"\\ebcb"});Codicon.copy=new Codicon("copy",{fontCharacter:"\\ebcc"});Codicon.personAdd=new Codicon("person-add",{fontCharacter:"\\ebcd"});Codicon.filterFilled=new Codicon("filter-filled",{fontCharacter:"\\ebce"});Codicon.wand=new Codicon("wand",{fontCharacter:"\\ebcf"});Codicon.debugLineByLine=new Codicon("debug-line-by-line",{fontCharacter:"\\ebd0"});Codicon.inspect=new Codicon("inspect",{fontCharacter:"\\ebd1"});Codicon.layers=new Codicon("layers",{fontCharacter:"\\ebd2"});Codicon.layersDot=new Codicon("layers-dot",{fontCharacter:"\\ebd3"});Codicon.layersActive=new Codicon("layers-active",{fontCharacter:"\\ebd4"});Codicon.compass=new Codicon("compass",{fontCharacter:"\\ebd5"});Codicon.compassDot=new Codicon("compass-dot",{fontCharacter:"\\ebd6"});Codicon.compassActive=new Codicon("compass-active",{fontCharacter:"\\ebd7"});Codicon.azure=new Codicon("azure",{fontCharacter:"\\ebd8"});Codicon.issueDraft=new Codicon("issue-draft",{fontCharacter:"\\ebd9"});Codicon.gitPullRequestClosed=new Codicon("git-pull-request-closed",{fontCharacter:"\\ebda"});Codicon.gitPullRequestDraft=new Codicon("git-pull-request-draft",{fontCharacter:"\\ebdb"});Codicon.debugAll=new Codicon("debug-all",{fontCharacter:"\\ebdc"});Codicon.debugCoverage=new Codicon("debug-coverage",{fontCharacter:"\\ebdd"});Codicon.runErrors=new Codicon("run-errors",{fontCharacter:"\\ebde"});Codicon.folderLibrary=new Codicon("folder-library",{fontCharacter:"\\ebdf"});Codicon.debugContinueSmall=new Codicon("debug-continue-small",{fontCharacter:"\\ebe0"});Codicon.beakerStop=new Codicon("beaker-stop",{fontCharacter:"\\ebe1"});Codicon.graphLine=new Codicon("graph-line",{fontCharacter:"\\ebe2"});Codicon.graphScatter=new Codicon("graph-scatter",{fontCharacter:"\\ebe3"});Codicon.pieChart=new Codicon("pie-chart",{fontCharacter:"\\ebe4"});Codicon.bracket=new Codicon("bracket",Codicon.json.definition);Codicon.bracketDot=new Codicon("bracket-dot",{fontCharacter:"\\ebe5"});Codicon.bracketError=new Codicon("bracket-error",{fontCharacter:"\\ebe6"});Codicon.lockSmall=new Codicon("lock-small",{fontCharacter:"\\ebe7"});Codicon.azureDevops=new Codicon("azure-devops",{fontCharacter:"\\ebe8"});Codicon.verifiedFilled=new Codicon("verified-filled",{fontCharacter:"\\ebe9"});Codicon.newLine=new Codicon("newline",{fontCharacter:"\\ebea"});Codicon.layout=new Codicon("layout",{fontCharacter:"\\ebeb"});Codicon.layoutActivitybarLeft=new Codicon("layout-activitybar-left",{fontCharacter:"\\ebec"});Codicon.layoutActivitybarRight=new Codicon("layout-activitybar-right",{fontCharacter:"\\ebed"});Codicon.layoutPanelLeft=new Codicon("layout-panel-left",{fontCharacter:"\\ebee"});Codicon.layoutPanelCenter=new Codicon("layout-panel-center",{fontCharacter:"\\ebef"});Codicon.layoutPanelJustify=new Codicon("layout-panel-justify",{fontCharacter:"\\ebf0"});Codicon.layoutPanelRight=new Codicon("layout-panel-right",{fontCharacter:"\\ebf1"});Codicon.layoutPanel=new Codicon("layout-panel",{fontCharacter:"\\ebf2"});Codicon.layoutSidebarLeft=new Codicon("layout-sidebar-left",{fontCharacter:"\\ebf3"});Codicon.layoutSidebarRight=new Codicon("layout-sidebar-right",{fontCharacter:"\\ebf4"});Codicon.layoutStatusbar=new Codicon("layout-statusbar",{fontCharacter:"\\ebf5"});Codicon.layoutMenubar=new Codicon("layout-menubar",{fontCharacter:"\\ebf6"});Codicon.layoutCentered=new Codicon("layout-centered",{fontCharacter:"\\ebf7"});Codicon.layoutSidebarRightOff=new Codicon("layout-sidebar-right-off",{fontCharacter:"\\ec00"});Codicon.layoutPanelOff=new Codicon("layout-panel-off",{fontCharacter:"\\ec01"});Codicon.layoutSidebarLeftOff=new Codicon("layout-sidebar-left-off",{fontCharacter:"\\ec02"});Codicon.target=new Codicon("target",{fontCharacter:"\\ebf8"});Codicon.indent=new Codicon("indent",{fontCharacter:"\\ebf9"});Codicon.recordSmall=new Codicon("record-small",{fontCharacter:"\\ebfa"});Codicon.errorSmall=new Codicon("error-small",{fontCharacter:"\\ebfb"});Codicon.arrowCircleDown=new Codicon("arrow-circle-down",{fontCharacter:"\\ebfc"});Codicon.arrowCircleLeft=new Codicon("arrow-circle-left",{fontCharacter:"\\ebfd"});Codicon.arrowCircleRight=new Codicon("arrow-circle-right",{fontCharacter:"\\ebfe"});Codicon.arrowCircleUp=new Codicon("arrow-circle-up",{fontCharacter:"\\ebff"});Codicon.heartFilled=new Codicon("heart-filled",{fontCharacter:"\\ec04"});Codicon.map=new Codicon("map",{fontCharacter:"\\ec05"});Codicon.mapFilled=new Codicon("map-filled",{fontCharacter:"\\ec06"});Codicon.circleSmall=new Codicon("circle-small",{fontCharacter:"\\ec07"});Codicon.bellSlash=new Codicon("bell-slash",{fontCharacter:"\\ec08"});Codicon.bellSlashDot=new Codicon("bell-slash-dot",{fontCharacter:"\\ec09"});Codicon.commentUnresolved=new Codicon("comment-unresolved",{fontCharacter:"\\ec0a"});Codicon.gitPullRequestGoToChanges=new Codicon("git-pull-request-go-to-changes",{fontCharacter:"\\ec0b"});Codicon.gitPullRequestNewChanges=new Codicon("git-pull-request-new-changes",{fontCharacter:"\\ec0c"});Codicon.dialogError=new Codicon("dialog-error",Codicon.error.definition);Codicon.dialogWarning=new Codicon("dialog-warning",Codicon.warning.definition);Codicon.dialogInfo=new Codicon("dialog-info",Codicon.info.definition);Codicon.dialogClose=new Codicon("dialog-close",Codicon.close.definition);Codicon.treeItemExpanded=new Codicon("tree-item-expanded",Codicon.chevronDown.definition);Codicon.treeFilterOnTypeOn=new Codicon("tree-filter-on-type-on",Codicon.listFilter.definition);Codicon.treeFilterOnTypeOff=new Codicon("tree-filter-on-type-off",Codicon.listSelection.definition);Codicon.treeFilterClear=new Codicon("tree-filter-clear",Codicon.close.definition);Codicon.treeItemLoading=new Codicon("tree-item-loading",Codicon.loading.definition);Codicon.menuSelection=new Codicon("menu-selection",Codicon.check.definition);Codicon.menuSubmenu=new Codicon("menu-submenu",Codicon.chevronRight.definition);Codicon.menuBarMore=new Codicon("menubar-more",Codicon.more.definition);Codicon.scrollbarButtonLeft=new Codicon("scrollbar-button-left",Codicon.triangleLeft.definition);Codicon.scrollbarButtonRight=new Codicon("scrollbar-button-right",Codicon.triangleRight.definition);Codicon.scrollbarButtonUp=new Codicon("scrollbar-button-up",Codicon.triangleUp.definition);Codicon.scrollbarButtonDown=new Codicon("scrollbar-button-down",Codicon.triangleDown.definition);Codicon.toolBarMore=new Codicon("toolbar-more",Codicon.more.definition);Codicon.quickInputBack=new Codicon("quick-input-back",Codicon.arrowLeft.definition);var CSSIcon;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function i(c){if(c instanceof Codicon)return["codicon","codicon-"+c.id];const d=e.exec(c.id);if(!d)return i(Codicon.error);const[,_,b]=d,k=["codicon","codicon-"+_];return b&&k.push("codicon-modifier-"+b.substr(1)),k}s.asClassNameArray=i;function o(c){return i(c).join(" ")}s.asClassName=o;function a(c){return"."+i(c).join(".")}s.asCSSSelector=a})(CSSIcon||(CSSIcon={}));var __awaiter$q=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class TokenizationRegistry$1{constructor(){this._map=new Map,this._factories=new Map,this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,i){return this._map.set(e,i),this.fire([e]),toDisposable(()=>{this._map.get(e)===i&&(this._map.delete(e),this.fire([e]))})}registerFactory(e,i){var o;(o=this._factories.get(e))===null||o===void 0||o.dispose();const a=new TokenizationSupportFactoryData(this,e,i);return this._factories.set(e,a),toDisposable(()=>{const c=this._factories.get(e);!c||c!==a||(this._factories.delete(e),c.dispose())})}getOrCreate(e){return __awaiter$q(this,void 0,void 0,function*(){const i=this.get(e);if(i)return i;const o=this._factories.get(e);return!o||o.isResolved?null:(yield o.resolve(),this.get(e))})}get(e){return this._map.get(e)||null}isResolved(e){if(this.get(e))return!0;const o=this._factories.get(e);return!!(!o||o.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class TokenizationSupportFactoryData extends Disposable{constructor(e,i,o){super(),this._registry=e,this._languageId=i,this._factory=o,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}resolve(){return __awaiter$q(this,void 0,void 0,function*(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise})}_create(){return __awaiter$q(this,void 0,void 0,function*(){const e=yield Promise.resolve(this._factory.createTokenizationSupport());this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))})}}class Token$2{constructor(e,i,o){this._tokenBrand=void 0,this.offset=e,this.type=i,this.language=o}toString(){return"("+this.offset+", "+this.type+")"}}class TokenizationResult{constructor(e,i){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=i}}class EncodedTokenizationResult{constructor(e,i){this._encodedTokenizationResultBrand=void 0,this.tokens=e,this.endState=i}}var CompletionItemKinds;(function(s){const e=new Map;e.set(0,Codicon.symbolMethod),e.set(1,Codicon.symbolFunction),e.set(2,Codicon.symbolConstructor),e.set(3,Codicon.symbolField),e.set(4,Codicon.symbolVariable),e.set(5,Codicon.symbolClass),e.set(6,Codicon.symbolStruct),e.set(7,Codicon.symbolInterface),e.set(8,Codicon.symbolModule),e.set(9,Codicon.symbolProperty),e.set(10,Codicon.symbolEvent),e.set(11,Codicon.symbolOperator),e.set(12,Codicon.symbolUnit),e.set(13,Codicon.symbolValue),e.set(15,Codicon.symbolEnum),e.set(14,Codicon.symbolConstant),e.set(15,Codicon.symbolEnum),e.set(16,Codicon.symbolEnumMember),e.set(17,Codicon.symbolKeyword),e.set(27,Codicon.symbolSnippet),e.set(18,Codicon.symbolText),e.set(19,Codicon.symbolColor),e.set(20,Codicon.symbolFile),e.set(21,Codicon.symbolReference),e.set(22,Codicon.symbolCustomColor),e.set(23,Codicon.symbolFolder),e.set(24,Codicon.symbolTypeParameter),e.set(25,Codicon.account),e.set(26,Codicon.issues);function i(c){let d=e.get(c);return d||(console.info("No codicon found for CompletionItemKind "+c),d=Codicon.symbolProperty),d}s.toIcon=i;const o=new Map;o.set("method",0),o.set("function",1),o.set("constructor",2),o.set("field",3),o.set("variable",4),o.set("class",5),o.set("struct",6),o.set("interface",7),o.set("module",8),o.set("property",9),o.set("event",10),o.set("operator",11),o.set("unit",12),o.set("value",13),o.set("constant",14),o.set("enum",15),o.set("enum-member",16),o.set("enumMember",16),o.set("keyword",17),o.set("snippet",27),o.set("text",18),o.set("color",19),o.set("file",20),o.set("reference",21),o.set("customcolor",22),o.set("folder",23),o.set("type-parameter",24),o.set("typeParameter",24),o.set("account",25),o.set("issue",26);function a(c,d){let _=o.get(c);return typeof _>"u"&&!d&&(_=9),_}s.fromString=a})(CompletionItemKinds||(CompletionItemKinds={}));var InlineCompletionTriggerKind$1;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(InlineCompletionTriggerKind$1||(InlineCompletionTriggerKind$1={}));var SignatureHelpTriggerKind$1;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(SignatureHelpTriggerKind$1||(SignatureHelpTriggerKind$1={}));var DocumentHighlightKind$1;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(DocumentHighlightKind$1||(DocumentHighlightKind$1={}));var SymbolKinds;(function(s){const e=new Map;e.set(0,Codicon.symbolFile),e.set(1,Codicon.symbolModule),e.set(2,Codicon.symbolNamespace),e.set(3,Codicon.symbolPackage),e.set(4,Codicon.symbolClass),e.set(5,Codicon.symbolMethod),e.set(6,Codicon.symbolProperty),e.set(7,Codicon.symbolField),e.set(8,Codicon.symbolConstructor),e.set(9,Codicon.symbolEnum),e.set(10,Codicon.symbolInterface),e.set(11,Codicon.symbolFunction),e.set(12,Codicon.symbolVariable),e.set(13,Codicon.symbolConstant),e.set(14,Codicon.symbolString),e.set(15,Codicon.symbolNumber),e.set(16,Codicon.symbolBoolean),e.set(17,Codicon.symbolArray),e.set(18,Codicon.symbolObject),e.set(19,Codicon.symbolKey),e.set(20,Codicon.symbolNull),e.set(21,Codicon.symbolEnumMember),e.set(22,Codicon.symbolStruct),e.set(23,Codicon.symbolEvent),e.set(24,Codicon.symbolOperator),e.set(25,Codicon.symbolTypeParameter);function i(o){let a=e.get(o);return a||(console.info("No codicon found for SymbolKind "+o),a=Codicon.symbolProperty),a}s.toIcon=i})(SymbolKinds||(SymbolKinds={}));class FoldingRangeKind{constructor(e){this.value=e}}FoldingRangeKind.Comment=new FoldingRangeKind("comment");FoldingRangeKind.Imports=new FoldingRangeKind("imports");FoldingRangeKind.Region=new FoldingRangeKind("region");var Command$1;(function(s){function e(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}s.is=e})(Command$1||(Command$1={}));var InlayHintKind$1;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(InlayHintKind$1||(InlayHintKind$1={}));const TokenizationRegistry=new TokenizationRegistry$1;var AccessibilitySupport;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(AccessibilitySupport||(AccessibilitySupport={}));var CodeActionTriggerType;(function(s){s[s.Invoke=1]="Invoke",s[s.Auto=2]="Auto"})(CodeActionTriggerType||(CodeActionTriggerType={}));var CompletionItemInsertTextRule;(function(s){s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(CompletionItemInsertTextRule||(CompletionItemInsertTextRule={}));var CompletionItemKind;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Snippet=27]="Snippet"})(CompletionItemKind||(CompletionItemKind={}));var CompletionItemTag;(function(s){s[s.Deprecated=1]="Deprecated"})(CompletionItemTag||(CompletionItemTag={}));var CompletionTriggerKind;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(CompletionTriggerKind||(CompletionTriggerKind={}));var ContentWidgetPositionPreference;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(ContentWidgetPositionPreference||(ContentWidgetPositionPreference={}));var CursorChangeReason;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(CursorChangeReason||(CursorChangeReason={}));var DefaultEndOfLine;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(DefaultEndOfLine||(DefaultEndOfLine={}));var DocumentHighlightKind;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(DocumentHighlightKind||(DocumentHighlightKind={}));var EditorAutoIndentStrategy;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(EditorAutoIndentStrategy||(EditorAutoIndentStrategy={}));var EditorOption;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.ariaLabel=4]="ariaLabel",s[s.autoClosingBrackets=5]="autoClosingBrackets",s[s.autoClosingDelete=6]="autoClosingDelete",s[s.autoClosingOvertype=7]="autoClosingOvertype",s[s.autoClosingQuotes=8]="autoClosingQuotes",s[s.autoIndent=9]="autoIndent",s[s.automaticLayout=10]="automaticLayout",s[s.autoSurround=11]="autoSurround",s[s.bracketPairColorization=12]="bracketPairColorization",s[s.guides=13]="guides",s[s.codeLens=14]="codeLens",s[s.codeLensFontFamily=15]="codeLensFontFamily",s[s.codeLensFontSize=16]="codeLensFontSize",s[s.colorDecorators=17]="colorDecorators",s[s.columnSelection=18]="columnSelection",s[s.comments=19]="comments",s[s.contextmenu=20]="contextmenu",s[s.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",s[s.cursorBlinking=22]="cursorBlinking",s[s.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",s[s.cursorStyle=24]="cursorStyle",s[s.cursorSurroundingLines=25]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",s[s.cursorWidth=27]="cursorWidth",s[s.disableLayerHinting=28]="disableLayerHinting",s[s.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",s[s.domReadOnly=30]="domReadOnly",s[s.dragAndDrop=31]="dragAndDrop",s[s.dropIntoEditor=32]="dropIntoEditor",s[s.emptySelectionClipboard=33]="emptySelectionClipboard",s[s.experimental=34]="experimental",s[s.extraEditorClassName=35]="extraEditorClassName",s[s.fastScrollSensitivity=36]="fastScrollSensitivity",s[s.find=37]="find",s[s.fixedOverflowWidgets=38]="fixedOverflowWidgets",s[s.folding=39]="folding",s[s.foldingStrategy=40]="foldingStrategy",s[s.foldingHighlight=41]="foldingHighlight",s[s.foldingImportsByDefault=42]="foldingImportsByDefault",s[s.foldingMaximumRegions=43]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=44]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=45]="fontFamily",s[s.fontInfo=46]="fontInfo",s[s.fontLigatures=47]="fontLigatures",s[s.fontSize=48]="fontSize",s[s.fontWeight=49]="fontWeight",s[s.formatOnPaste=50]="formatOnPaste",s[s.formatOnType=51]="formatOnType",s[s.glyphMargin=52]="glyphMargin",s[s.gotoLocation=53]="gotoLocation",s[s.hideCursorInOverviewRuler=54]="hideCursorInOverviewRuler",s[s.hover=55]="hover",s[s.inDiffEditor=56]="inDiffEditor",s[s.inlineSuggest=57]="inlineSuggest",s[s.letterSpacing=58]="letterSpacing",s[s.lightbulb=59]="lightbulb",s[s.lineDecorationsWidth=60]="lineDecorationsWidth",s[s.lineHeight=61]="lineHeight",s[s.lineNumbers=62]="lineNumbers",s[s.lineNumbersMinChars=63]="lineNumbersMinChars",s[s.linkedEditing=64]="linkedEditing",s[s.links=65]="links",s[s.matchBrackets=66]="matchBrackets",s[s.minimap=67]="minimap",s[s.mouseStyle=68]="mouseStyle",s[s.mouseWheelScrollSensitivity=69]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=70]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=71]="multiCursorMergeOverlapping",s[s.multiCursorModifier=72]="multiCursorModifier",s[s.multiCursorPaste=73]="multiCursorPaste",s[s.occurrencesHighlight=74]="occurrencesHighlight",s[s.overviewRulerBorder=75]="overviewRulerBorder",s[s.overviewRulerLanes=76]="overviewRulerLanes",s[s.padding=77]="padding",s[s.parameterHints=78]="parameterHints",s[s.peekWidgetDefaultFocus=79]="peekWidgetDefaultFocus",s[s.definitionLinkOpensInPeek=80]="definitionLinkOpensInPeek",s[s.quickSuggestions=81]="quickSuggestions",s[s.quickSuggestionsDelay=82]="quickSuggestionsDelay",s[s.readOnly=83]="readOnly",s[s.renameOnType=84]="renameOnType",s[s.renderControlCharacters=85]="renderControlCharacters",s[s.renderFinalNewline=86]="renderFinalNewline",s[s.renderLineHighlight=87]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=88]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=89]="renderValidationDecorations",s[s.renderWhitespace=90]="renderWhitespace",s[s.revealHorizontalRightPadding=91]="revealHorizontalRightPadding",s[s.roundedSelection=92]="roundedSelection",s[s.rulers=93]="rulers",s[s.scrollbar=94]="scrollbar",s[s.scrollBeyondLastColumn=95]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=96]="scrollBeyondLastLine",s[s.scrollPredominantAxis=97]="scrollPredominantAxis",s[s.selectionClipboard=98]="selectionClipboard",s[s.selectionHighlight=99]="selectionHighlight",s[s.selectOnLineNumbers=100]="selectOnLineNumbers",s[s.showFoldingControls=101]="showFoldingControls",s[s.showUnused=102]="showUnused",s[s.snippetSuggestions=103]="snippetSuggestions",s[s.smartSelect=104]="smartSelect",s[s.smoothScrolling=105]="smoothScrolling",s[s.stickyTabStops=106]="stickyTabStops",s[s.stopRenderingLineAfter=107]="stopRenderingLineAfter",s[s.suggest=108]="suggest",s[s.suggestFontSize=109]="suggestFontSize",s[s.suggestLineHeight=110]="suggestLineHeight",s[s.suggestOnTriggerCharacters=111]="suggestOnTriggerCharacters",s[s.suggestSelection=112]="suggestSelection",s[s.tabCompletion=113]="tabCompletion",s[s.tabIndex=114]="tabIndex",s[s.unicodeHighlighting=115]="unicodeHighlighting",s[s.unusualLineTerminators=116]="unusualLineTerminators",s[s.useShadowDOM=117]="useShadowDOM",s[s.useTabStops=118]="useTabStops",s[s.wordSeparators=119]="wordSeparators",s[s.wordWrap=120]="wordWrap",s[s.wordWrapBreakAfterCharacters=121]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=122]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=123]="wordWrapColumn",s[s.wordWrapOverride1=124]="wordWrapOverride1",s[s.wordWrapOverride2=125]="wordWrapOverride2",s[s.wrappingIndent=126]="wrappingIndent",s[s.wrappingStrategy=127]="wrappingStrategy",s[s.showDeprecated=128]="showDeprecated",s[s.inlayHints=129]="inlayHints",s[s.editorClassName=130]="editorClassName",s[s.pixelRatio=131]="pixelRatio",s[s.tabFocusMode=132]="tabFocusMode",s[s.layoutInfo=133]="layoutInfo",s[s.wrappingInfo=134]="wrappingInfo"})(EditorOption||(EditorOption={}));var EndOfLinePreference;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(EndOfLinePreference||(EndOfLinePreference={}));var EndOfLineSequence;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(EndOfLineSequence||(EndOfLineSequence={}));var IndentAction$1;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(IndentAction$1||(IndentAction$1={}));var InjectedTextCursorStops$1;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(InjectedTextCursorStops$1||(InjectedTextCursorStops$1={}));var InlayHintKind;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(InlayHintKind||(InlayHintKind={}));var InlineCompletionTriggerKind;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(InlineCompletionTriggerKind||(InlineCompletionTriggerKind={}));var KeyCode$1;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.NumLock=78]="NumLock",s[s.ScrollLock=79]="ScrollLock",s[s.Semicolon=80]="Semicolon",s[s.Equal=81]="Equal",s[s.Comma=82]="Comma",s[s.Minus=83]="Minus",s[s.Period=84]="Period",s[s.Slash=85]="Slash",s[s.Backquote=86]="Backquote",s[s.BracketLeft=87]="BracketLeft",s[s.Backslash=88]="Backslash",s[s.BracketRight=89]="BracketRight",s[s.Quote=90]="Quote",s[s.OEM_8=91]="OEM_8",s[s.IntlBackslash=92]="IntlBackslash",s[s.Numpad0=93]="Numpad0",s[s.Numpad1=94]="Numpad1",s[s.Numpad2=95]="Numpad2",s[s.Numpad3=96]="Numpad3",s[s.Numpad4=97]="Numpad4",s[s.Numpad5=98]="Numpad5",s[s.Numpad6=99]="Numpad6",s[s.Numpad7=100]="Numpad7",s[s.Numpad8=101]="Numpad8",s[s.Numpad9=102]="Numpad9",s[s.NumpadMultiply=103]="NumpadMultiply",s[s.NumpadAdd=104]="NumpadAdd",s[s.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=106]="NumpadSubtract",s[s.NumpadDecimal=107]="NumpadDecimal",s[s.NumpadDivide=108]="NumpadDivide",s[s.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",s[s.ABNT_C1=110]="ABNT_C1",s[s.ABNT_C2=111]="ABNT_C2",s[s.AudioVolumeMute=112]="AudioVolumeMute",s[s.AudioVolumeUp=113]="AudioVolumeUp",s[s.AudioVolumeDown=114]="AudioVolumeDown",s[s.BrowserSearch=115]="BrowserSearch",s[s.BrowserHome=116]="BrowserHome",s[s.BrowserBack=117]="BrowserBack",s[s.BrowserForward=118]="BrowserForward",s[s.MediaTrackNext=119]="MediaTrackNext",s[s.MediaTrackPrevious=120]="MediaTrackPrevious",s[s.MediaStop=121]="MediaStop",s[s.MediaPlayPause=122]="MediaPlayPause",s[s.LaunchMediaPlayer=123]="LaunchMediaPlayer",s[s.LaunchMail=124]="LaunchMail",s[s.LaunchApp2=125]="LaunchApp2",s[s.Clear=126]="Clear",s[s.MAX_VALUE=127]="MAX_VALUE"})(KeyCode$1||(KeyCode$1={}));var MarkerSeverity$2;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(MarkerSeverity$2||(MarkerSeverity$2={}));var MarkerTag$1;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})(MarkerTag$1||(MarkerTag$1={}));var MinimapPosition$1;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(MinimapPosition$1||(MinimapPosition$1={}));var MouseTargetType;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(MouseTargetType||(MouseTargetType={}));var OverlayWidgetPositionPreference;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(OverlayWidgetPositionPreference||(OverlayWidgetPositionPreference={}));var OverviewRulerLane$1;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(OverviewRulerLane$1||(OverviewRulerLane$1={}));var PositionAffinity;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None",s[s.LeftOfInjectedText=3]="LeftOfInjectedText",s[s.RightOfInjectedText=4]="RightOfInjectedText"})(PositionAffinity||(PositionAffinity={}));var RenderLineNumbersType;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(RenderLineNumbersType||(RenderLineNumbersType={}));var RenderMinimap;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(RenderMinimap||(RenderMinimap={}));var ScrollType;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(ScrollType||(ScrollType={}));var ScrollbarVisibility;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(ScrollbarVisibility||(ScrollbarVisibility={}));var SelectionDirection$1;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(SelectionDirection$1||(SelectionDirection$1={}));var SignatureHelpTriggerKind;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(SignatureHelpTriggerKind||(SignatureHelpTriggerKind={}));var SymbolKind;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(SymbolKind||(SymbolKind={}));var SymbolTag;(function(s){s[s.Deprecated=1]="Deprecated"})(SymbolTag||(SymbolTag={}));var TextEditorCursorBlinkingStyle;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(TextEditorCursorBlinkingStyle||(TextEditorCursorBlinkingStyle={}));var TextEditorCursorStyle;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(TextEditorCursorStyle||(TextEditorCursorStyle={}));var TrackedRangeStickiness;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(TrackedRangeStickiness||(TrackedRangeStickiness={}));var WrappingIndent;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(WrappingIndent||(WrappingIndent={}));class KeyMod$1{static chord(e,i){return KeyChord(e,i)}}KeyMod$1.CtrlCmd=2048;KeyMod$1.Shift=1024;KeyMod$1.Alt=512;KeyMod$1.WinCtrl=256;function createMonacoBaseAPI(){return{editor:void 0,languages:void 0,CancellationTokenSource:CancellationTokenSource$1,Emitter:Emitter$1,KeyCode:KeyCode$1,KeyMod:KeyMod$1,Position:Position$1,Range:Range$2,Selection:Selection$1,SelectionDirection:SelectionDirection$1,MarkerSeverity:MarkerSeverity$2,MarkerTag:MarkerTag$1,Uri:URI,Token:Token$2}}const standaloneTokens="";class LRUCachedFunction{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const i=JSON.stringify(e);return this.lastArgKey!==i&&(this.lastArgKey=i,this.lastCache=this.fn(e)),this.lastCache}}class CachedFunction{constructor(e){this.fn=e,this._map=new Map}get cachedValues(){return this._map}get(e){if(this._map.has(e))return this._map.get(e);const i=this.fn(e);return this._map.set(e,i),i}}class Lazy{constructor(e){this.executor=e,this._didRun=!1}hasValue(){return this._didRun}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var _a$8;function isFalsyOrWhitespace(s){return!s||typeof s!="string"?!0:s.trim().length===0}const _formatRegexp=/{(\d+)}/g;function format(s,...e){return e.length===0?s:s.replace(_formatRegexp,function(i,o){const a=parseInt(o,10);return isNaN(a)||a<0||a>=e.length?i:e[a]})}function escape(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function escapeRegExpCharacters(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ltrim(s,e){if(!s||!e)return s;const i=e.length;if(i===0||s.length===0)return s;let o=0;for(;s.indexOf(e,o)===o;)o=o+i;return s.substring(o)}function rtrim(s,e){if(!s||!e)return s;const i=e.length,o=s.length;if(i===0||o===0)return s;let a=o,c=-1;for(;c=s.lastIndexOf(e,a-1),!(c===-1||c+i!==a);){if(c===0)return"";a=c}return s.substring(0,a)}function convertSimple2RegExpPattern(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function createRegExp(s,e,i={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=escapeRegExpCharacters(s)),i.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let o="";return i.global&&(o+="g"),i.matchCase||(o+="i"),i.multiline&&(o+="m"),i.unicode&&(o+="u"),new RegExp(s,o)}function regExpLeadsToEndlessLoop(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}function regExpFlags(s){return(s.global?"g":"")+(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")}function splitLines(s){return s.split(/\r\n|\r|\n/)}function firstNonWhitespaceIndex(s){for(let e=0,i=s.length;e<i;e++){const o=s.charCodeAt(e);if(o!==32&&o!==9)return e}return-1}function getLeadingWhitespace(s,e=0,i=s.length){for(let o=e;o<i;o++){const a=s.charCodeAt(o);if(a!==32&&a!==9)return s.substring(e,o)}return s.substring(e,i)}function lastNonWhitespaceIndex(s,e=s.length-1){for(let i=e;i>=0;i--){const o=s.charCodeAt(i);if(o!==32&&o!==9)return i}return-1}function compare(s,e){return s<e?-1:s>e?1:0}function compareSubstring(s,e,i=0,o=s.length,a=0,c=e.length){for(;i<o&&a<c;i++,a++){const b=s.charCodeAt(i),k=e.charCodeAt(a);if(b<k)return-1;if(b>k)return 1}const d=o-i,_=c-a;return d<_?-1:d>_?1:0}function compareIgnoreCase(s,e){return compareSubstringIgnoreCase(s,e,0,s.length,0,e.length)}function compareSubstringIgnoreCase(s,e,i=0,o=s.length,a=0,c=e.length){for(;i<o&&a<c;i++,a++){let b=s.charCodeAt(i),k=e.charCodeAt(a);if(b===k)continue;if(b>=128||k>=128)return compareSubstring(s.toLowerCase(),e.toLowerCase(),i,o,a,c);isLowerAsciiLetter(b)&&(b-=32),isLowerAsciiLetter(k)&&(k-=32);const j=b-k;if(j!==0)return j}const d=o-i,_=c-a;return d<_?-1:d>_?1:0}function isAsciiDigit(s){return s>=48&&s<=57}function isLowerAsciiLetter(s){return s>=97&&s<=122}function isUpperAsciiLetter(s){return s>=65&&s<=90}function equalsIgnoreCase(s,e){return s.length===e.length&&compareSubstringIgnoreCase(s,e)===0}function startsWithIgnoreCase(s,e){const i=e.length;return e.length>s.length?!1:compareSubstringIgnoreCase(s,e,0,i)===0}function commonPrefixLength(s,e){const i=Math.min(s.length,e.length);let o;for(o=0;o<i;o++)if(s.charCodeAt(o)!==e.charCodeAt(o))return o;return i}function commonSuffixLength(s,e){const i=Math.min(s.length,e.length);let o;const a=s.length-1,c=e.length-1;for(o=0;o<i;o++)if(s.charCodeAt(a-o)!==e.charCodeAt(c-o))return o;return i}function isHighSurrogate(s){return 55296<=s&&s<=56319}function isLowSurrogate(s){return 56320<=s&&s<=57343}function computeCodePoint(s,e){return(s-55296<<10)+(e-56320)+65536}function getNextCodePoint(s,e,i){const o=s.charCodeAt(i);if(isHighSurrogate(o)&&i+1<e){const a=s.charCodeAt(i+1);if(isLowSurrogate(a))return computeCodePoint(o,a)}return o}function getPrevCodePoint(s,e){const i=s.charCodeAt(e-1);if(isLowSurrogate(i)&&e>1){const o=s.charCodeAt(e-2);if(isHighSurrogate(o))return computeCodePoint(o,i)}return i}class CodePointIterator{constructor(e,i=0){this._str=e,this._len=e.length,this._offset=i}get offset(){return this._offset}setOffset(e){this._offset=e}prevCodePoint(){const e=getPrevCodePoint(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=getNextCodePoint(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class GraphemeIterator{constructor(e,i=0){this._iterator=new CodePointIterator(e,i)}get offset(){return this._iterator.offset}nextGraphemeLength(){const e=GraphemeBreakTree.getInstance(),i=this._iterator,o=i.offset;let a=e.getGraphemeBreakType(i.nextCodePoint());for(;!i.eol();){const c=i.offset,d=e.getGraphemeBreakType(i.nextCodePoint());if(breakBetweenGraphemeBreakType(a,d)){i.setOffset(c);break}a=d}return i.offset-o}prevGraphemeLength(){const e=GraphemeBreakTree.getInstance(),i=this._iterator,o=i.offset;let a=e.getGraphemeBreakType(i.prevCodePoint());for(;i.offset>0;){const c=i.offset,d=e.getGraphemeBreakType(i.prevCodePoint());if(breakBetweenGraphemeBreakType(d,a)){i.setOffset(c);break}a=d}return o-i.offset}eol(){return this._iterator.eol()}}function nextCharLength(s,e){return new GraphemeIterator(s,e).nextGraphemeLength()}function prevCharLength(s,e){return new GraphemeIterator(s,e).prevGraphemeLength()}function getCharContainingOffset(s,e){e>0&&isLowSurrogate(s.charCodeAt(e))&&e--;const i=e+nextCharLength(s,e);return[i-prevCharLength(s,i),i]}const CONTAINS_RTL=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function containsRTL(s){return CONTAINS_RTL.test(s)}const IS_BASIC_ASCII=/^[\t\n\r\x20-\x7E]*$/;function isBasicASCII(s){return IS_BASIC_ASCII.test(s)}const UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function containsUnusualLineTerminators(s){return UNUSUAL_LINE_TERMINATORS.test(s)}function isFullWidthCharacter(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}function isEmojiImprecise(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}const UTF8_BOM_CHARACTER=String.fromCharCode(65279);function startsWithUTF8BOM(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}function singleLetterHash(s){return s=s%(2*26),s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}function breakBetweenGraphemeBreakType(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}class GraphemeBreakTree{constructor(){this._data=getGraphemeBreakRawData()}static getInstance(){return GraphemeBreakTree._INSTANCE||(GraphemeBreakTree._INSTANCE=new GraphemeBreakTree),GraphemeBreakTree._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const i=this._data,o=i.length/3;let a=1;for(;a<=o;)if(e<i[3*a])a=2*a;else if(e>i[3*a+1])a=2*a+1;else return i[3*a+2];return 0}}GraphemeBreakTree._INSTANCE=null;function getGraphemeBreakRawData(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function getLeftDeleteOffset(s,e){if(s===0)return 0;const i=getOffsetBeforeLastEmojiComponent(s,e);if(i!==void 0)return i;const o=new CodePointIterator(e,s);return o.prevCodePoint(),o.offset}function getOffsetBeforeLastEmojiComponent(s,e){const i=new CodePointIterator(e,s);let o=i.prevCodePoint();for(;isEmojiModifier(o)||o===65039||o===8419;){if(i.offset===0)return;o=i.prevCodePoint()}if(!isEmojiImprecise(o))return;let a=i.offset;return a>0&&i.prevCodePoint()===8205&&(a=i.offset),a}function isEmojiModifier(s){return 127995<=s&&s<=127999}class AmbiguousCharacters{constructor(e){this.confusableDictionary=e}static getInstance(e){return AmbiguousCharacters.cache.get(Array.from(e))}static getLocales(){return AmbiguousCharacters._locales.getValue()}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}_a$8=AmbiguousCharacters;AmbiguousCharacters.ambiguousCharacterData=new Lazy(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));AmbiguousCharacters.cache=new LRUCachedFunction(s=>{function e(k){const j=new Map;for(let _e=0;_e<k.length;_e+=2)j.set(k[_e],k[_e+1]);return j}function i(k,j){const _e=new Map(k);for(const[et,tt]of j)_e.set(et,tt);return _e}function o(k,j){if(!k)return j;const _e=new Map;for(const[et,tt]of k)j.has(et)&&_e.set(et,tt);return _e}const a=_a$8.ambiguousCharacterData.getValue();let c=s.filter(k=>!k.startsWith("_")&&k in a);c.length===0&&(c=["_default"]);let d;for(const k of c){const j=e(a[k]);d=o(d,j)}const _=e(a._common),b=i(_,d);return new AmbiguousCharacters(b)});AmbiguousCharacters._locales=new Lazy(()=>Object.keys(AmbiguousCharacters.ambiguousCharacterData.getValue()).filter(s=>!s.startsWith("_")));class InvisibleCharacters{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(InvisibleCharacters.getRawData())),this._data}static isInvisibleCharacter(e){return InvisibleCharacters.getData().has(e)}static get codePoints(){return InvisibleCharacters.getData()}}InvisibleCharacters._data=void 0;class WindowManager{constructor(){this._zoomFactor=1}getZoomFactor(){return this._zoomFactor}}WindowManager.INSTANCE=new WindowManager;class DevicePixelRatioMonitor extends Disposable{constructor(){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var i;(i=this._mediaQueryList)===null||i===void 0||i.removeEventListener("change",this._listener),this._mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class PixelRatioImpl extends Disposable{constructor(){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new DevicePixelRatioMonitor);this._register(e.onDidChange(()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)}))}get value(){return this._value}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d"),i=window.devicePixelRatio||1,o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/o}}class PixelRatioFacade{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=new PixelRatioImpl),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}}function addMatchMediaChangeListener(s,e){typeof s=="string"&&(s=window.matchMedia(s)),s.addEventListener("change",e)}const PixelRatio=new PixelRatioFacade;function getZoomFactor(){return WindowManager.INSTANCE.getZoomFactor()}const userAgent=navigator.userAgent,isFirefox=userAgent.indexOf("Firefox")>=0,isWebKit=userAgent.indexOf("AppleWebKit")>=0,isChrome=userAgent.indexOf("Chrome")>=0,isSafari=!isChrome&&userAgent.indexOf("Safari")>=0,isWebkitWebView=!isChrome&&!isSafari&&isWebKit,isElectron=userAgent.indexOf("Electron/")>=0,isAndroid=userAgent.indexOf("Android")>=0;let standalone=!1;if(window.matchMedia){const s=window.matchMedia("(display-mode: standalone)");standalone=s.matches,addMatchMediaChangeListener(s,({matches:e})=>{standalone=e})}function isStandalone(){return standalone}const browser=Object.freeze(Object.defineProperty({__proto__:null,addMatchMediaChangeListener,PixelRatio,getZoomFactor,isFirefox,isWebKit,isChrome,isSafari,isWebkitWebView,isElectron,isAndroid,isStandalone},Symbol.toStringTag,{value:"Module"}));class FastDomNode{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const i=numberAsPixels(e);this._maxWidth!==i&&(this._maxWidth=i,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const i=numberAsPixels(e);this._width!==i&&(this._width=i,this.domNode.style.width=this._width)}setHeight(e){const i=numberAsPixels(e);this._height!==i&&(this._height=i,this.domNode.style.height=this._height)}setTop(e){const i=numberAsPixels(e);this._top!==i&&(this._top=i,this.domNode.style.top=this._top)}setLeft(e){const i=numberAsPixels(e);this._left!==i&&(this._left=i,this.domNode.style.left=this._left)}setBottom(e){const i=numberAsPixels(e);this._bottom!==i&&(this._bottom=i,this.domNode.style.bottom=this._bottom)}setRight(e){const i=numberAsPixels(e);this._right!==i&&(this._right=i,this.domNode.style.right=this._right)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const i=numberAsPixels(e);this._fontSize!==i&&(this._fontSize=i,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const i=numberAsPixels(e);this._lineHeight!==i&&(this._lineHeight=i,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const i=numberAsPixels(e);this._letterSpacing!==i&&(this._letterSpacing=i,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,i){this.domNode.classList.toggle(e,i),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,i){this.domNode.setAttribute(e,i)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function numberAsPixels(s){return typeof s=="number"?`${s}px`:s}function createFastDomNode(s){return new FastDomNode(s)}function applyFontInfo(s,e){s instanceof FastDomNode?(s.setFontFamily(e.getMassagedFontFamily()),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}class CharWidthRequest{constructor(e,i){this.chr=e,this.type=i,this.width=0}fulfill(e){this.width=e}}class DomCharWidthReader{constructor(e,i){this._bareFontInfo=e,this._requests=i,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const i=document.createElement("div");applyFontInfo(i,this._bareFontInfo),e.appendChild(i);const o=document.createElement("div");applyFontInfo(o,this._bareFontInfo),o.style.fontWeight="bold",e.appendChild(o);const a=document.createElement("div");applyFontInfo(a,this._bareFontInfo),a.style.fontStyle="italic",e.appendChild(a);const c=[];for(const d of this._requests){let _;d.type===0&&(_=i),d.type===2&&(_=o),d.type===1&&(_=a),_.appendChild(document.createElement("br"));const b=document.createElement("span");DomCharWidthReader._render(b,d),_.appendChild(b),c.push(b)}this._container=e,this._testElements=c}static _render(e,i){if(i.chr===" "){let o="\xA0";for(let a=0;a<8;a++)o+=o;e.innerText=o}else{let o=i.chr;for(let a=0;a<8;a++)o+=o;e.textContent=o}}_readFromDomElements(){for(let e=0,i=this._requests.length;e<i;e++){const o=this._requests[e],a=this._testElements[e];o.fulfill(a.offsetWidth/256)}}}function readCharWidths(s,e){new DomCharWidthReader(s,e).read()}const EditorZoom=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new Emitter$1,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},GOLDEN_LINE_HEIGHT_RATIO=isMacintosh?1.5:1.35,MINIMUM_LINE_HEIGHT=8;class BareFontInfo{constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,i,o){const a=e.get(45),c=e.get(49),d=e.get(48),_=e.get(47),b=e.get(61),k=e.get(58);return BareFontInfo._create(a,c,d,_,b,k,i,o)}static _create(e,i,o,a,c,d,_,b){c===0?c=GOLDEN_LINE_HEIGHT_RATIO*o:c<MINIMUM_LINE_HEIGHT&&(c=c*o),c=Math.round(c),c<MINIMUM_LINE_HEIGHT&&(c=MINIMUM_LINE_HEIGHT);const k=1+(b?0:EditorZoom.getZoomLevel()*.1);return o*=k,c*=k,new BareFontInfo({pixelRatio:_,fontFamily:e,fontWeight:i,fontSize:o,fontFeatureSettings:a,lineHeight:c,letterSpacing:d})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=EDITOR_FONT_DEFAULTS.fontFamily,i=BareFontInfo._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${i}, ${e}`:i}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const SERIALIZED_FONT_INFO_VERSION=1;class FontInfo extends BareFontInfo{constructor(e,i){super(e),this._editorStylingBrand=void 0,this.version=SERIALIZED_FONT_INFO_VERSION,this.isTrusted=i,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class FontMeasurementsImpl extends Disposable{constructor(){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._cache=new FontMeasurementsCache,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new FontMeasurementsCache,this._onDidChange.fire()}_writeToCache(e,i){this._cache.put(e,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=window.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let i=!1;for(const o of e)o.isTrusted||(i=!0,this._cache.remove(o));i&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let i=this._actualReadFontInfo(e);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new FontInfo({pixelRatio:PixelRatio.value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,i)}return this._cache.get(e)}_createRequest(e,i,o,a){const c=new CharWidthRequest(e,i);return o.push(c),a==null||a.push(c),c}_actualReadFontInfo(e){const i=[],o=[],a=this._createRequest("n",0,i,o),c=this._createRequest("\uFF4D",0,i,null),d=this._createRequest(" ",0,i,o),_=this._createRequest("0",0,i,o),b=this._createRequest("1",0,i,o),k=this._createRequest("2",0,i,o),j=this._createRequest("3",0,i,o),_e=this._createRequest("4",0,i,o),et=this._createRequest("5",0,i,o),tt=this._createRequest("6",0,i,o),it=this._createRequest("7",0,i,o),st=this._createRequest("8",0,i,o),ot=this._createRequest("9",0,i,o),nt=this._createRequest("\u2192",0,i,o),rt=this._createRequest("\uFFEB",0,i,null),at=this._createRequest("\xB7",0,i,o),lt=this._createRequest(String.fromCharCode(11825),0,i,null),gt="|/-_ilm%";for(let dt=0,pt=gt.length;dt<pt;dt++)this._createRequest(gt.charAt(dt),0,i,o),this._createRequest(gt.charAt(dt),1,i,o),this._createRequest(gt.charAt(dt),2,i,o);readCharWidths(e,i);const ht=Math.max(_.width,b.width,k.width,j.width,_e.width,et.width,tt.width,it.width,st.width,ot.width);let ut=e.fontFeatureSettings===EditorFontLigatures.OFF;const ct=o[0].width;for(let dt=1,pt=o.length;ut&&dt<pt;dt++){const mt=ct-o[dt].width;if(mt<-.001||mt>.001){ut=!1;break}}let ft=!0;return ut&&rt.width!==ct&&(ft=!1),rt.width>nt.width&&(ft=!1),new FontInfo({pixelRatio:PixelRatio.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:ut,typicalHalfwidthCharacterWidth:a.width,typicalFullwidthCharacterWidth:c.width,canUseHalfwidthRightwardsArrow:ft,spaceWidth:d.width,middotWidth:at.width,wsmiddotWidth:lt.width,maxDigitWidth:ht},!0)}}class FontMeasurementsCache{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const i=e.getId();return!!this._values[i]}get(e){const i=e.getId();return this._values[i]}put(e,i){const o=e.getId();this._keys[o]=e,this._values[o]=i}remove(e){const i=e.getId();delete this._keys[i],delete this._values[i]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const FontMeasurements=new FontMeasurementsImpl;var _util;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(i){return i[s.DI_DEPENDENCIES]||[]}s.getServiceDependencies=e})(_util||(_util={}));const IInstantiationService=createDecorator("instantiationService");function storeServiceDependency(s,e,i){e[_util.DI_TARGET]===e?e[_util.DI_DEPENDENCIES].push({id:s,index:i}):(e[_util.DI_DEPENDENCIES]=[{id:s,index:i}],e[_util.DI_TARGET]=e)}function createDecorator(s){if(_util.serviceIds.has(s))return _util.serviceIds.get(s);const e=function(i,o,a){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");storeServiceDependency(e,i,a)};return e.toString=()=>s,_util.serviceIds.set(s,e),e}const ICodeEditorService=createDecorator("codeEditorService");function ok(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}const defaultOptions$1={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class DiffNavigator extends Disposable{constructor(e,i={}){super(),this._onDidUpdate=this._register(new Emitter$1),this._editor=e,this._options=mixin(i,defaultOptions$1,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(o=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(o=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(i=>{!this._options.ignoreCharChanges&&i.charChanges?i.charChanges.forEach(o=>{this.ranges.push({rhs:!0,range:new Range$2(o.modifiedStartLineNumber,o.modifiedStartColumn,o.modifiedEndLineNumber,o.modifiedEndColumn)})}):i.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new Range$2(i.modifiedStartLineNumber,1,i.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new Range$2(i.modifiedStartLineNumber,1,i.modifiedEndLineNumber+1,1)})}),this.ranges.sort((i,o)=>Range$2.compareRangesUsingStarts(i.range,o.range)),this._onDidUpdate.fire(this)}_initIdx(e){let i=!1;const o=this._editor.getPosition();if(!o){this.nextIdx=0;return}for(let a=0,c=this.ranges.length;a<c&&!i;a++){const d=this.ranges[a].range;o.isBeforeOrEqual(d.getStartPosition())&&(this.nextIdx=a+(e?0:-1),i=!0)}i||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,i){if(ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const o=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const a=o.range.getStartPosition();this._editor.setPosition(a),this._editor.revealRangeInCenter(o.range,i)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}const EditorType={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var OverviewRulerLane;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(OverviewRulerLane||(OverviewRulerLane={}));var MinimapPosition;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(MinimapPosition||(MinimapPosition={}));var InjectedTextCursorStops;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(InjectedTextCursorStops||(InjectedTextCursorStops={}));class TextModelResolvedOptions{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&equals(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class FindMatch{constructor(e,i){this._findMatchBrand=void 0,this.range=e,this.matches=i}}function isITextSnapshot(s){return s&&typeof s.read=="function"}class ValidAnnotatedEditOperation{constructor(e,i,o,a,c,d){this.identifier=e,this.range=i,this.text=o,this.forceMoveMarkers=a,this.isAutoWhitespaceEdit=c,this._isTracked=d}}class SearchData{constructor(e,i,o){this.regex=e,this.wordSeparators=i,this.simpleSearch=o}}class ApplyEditsResult{constructor(e,i,o){this.reverseEdits=e,this.changes=i,this.trimAutoWhitespaceLineNumbers=o}}function shouldSynchronizeModel(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}var IndentAction;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(IndentAction||(IndentAction={}));class StandardAutoClosingPairConditional{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let i=0,o=e.notIn.length;i<o;i++)switch(e.notIn[i]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,i){if(e.getTokenCount()===0)return!0;const o=e.findTokenIndexAtOffset(i-2),a=e.getStandardTokenType(o);return this.isOK(a)}_findNeutralCharacterInRange(e,i){for(let o=e;o<=i;o++){const a=String.fromCharCode(o);if(!this.open.includes(a)&&!this.close.includes(a))return a}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class AutoClosingPairs{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const i of e)appendEntry(this.autoClosingPairsOpenByStart,i.open.charAt(0),i),appendEntry(this.autoClosingPairsOpenByEnd,i.open.charAt(i.open.length-1),i),appendEntry(this.autoClosingPairsCloseByStart,i.close.charAt(0),i),appendEntry(this.autoClosingPairsCloseByEnd,i.close.charAt(i.close.length-1),i),i.close.length===1&&i.open.length===1&&appendEntry(this.autoClosingPairsCloseSingleChar,i.close,i)}}function appendEntry(s,e,i){s.has(e)?s.get(e).push(i):s.set(e,[i])}function createScopedLineTokens(s,e){const i=s.getCount(),o=s.findTokenIndexAtOffset(e),a=s.getLanguageId(o);let c=o;for(;c+1<i&&s.getLanguageId(c+1)===a;)c++;let d=o;for(;d>0&&s.getLanguageId(d-1)===a;)d--;return new ScopedLineTokens(s,a,d,c+1,s.getStartOffset(d),s.getEndOffset(c))}class ScopedLineTokens{constructor(e,i,o,a,c,d){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=i,this._firstTokenIndex=o,this._lastTokenIndex=a,this.firstCharOffset=c,this._lastCharOffset=d}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function ignoreBracketsInToken(s){return(s&3)!==0}class CharacterPairSupport{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(i=>new StandardAutoClosingPairConditional(i)):e.brackets?this._autoClosingPairs=e.brackets.map(i=>new StandardAutoClosingPairConditional({open:i[0],close:i[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const i=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new StandardAutoClosingPairConditional({open:i.open,close:i.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}}CharacterPairSupport.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;const hasBuffer=typeof Buffer<"u";let textDecoder;class VSBuffer{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return hasBuffer&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new VSBuffer(e)}toString(){return hasBuffer?this.buffer.toString():(textDecoder||(textDecoder=new TextDecoder),textDecoder.decode(this.buffer))}}function readUInt16LE(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}function writeUInt16LE(s,e,i){s[i+0]=e&255,e=e>>>8,s[i+1]=e&255}function readUInt32BE(s,e){return s[e]*Math.pow(2,24)+s[e+1]*Math.pow(2,16)+s[e+2]*Math.pow(2,8)+s[e+3]}function writeUInt32BE(s,e,i){s[i+3]=e,e=e>>>8,s[i+2]=e,e=e>>>8,s[i+1]=e,e=e>>>8,s[i]=e}function readUInt8(s,e){return s[e]}function writeUInt8(s,e,i){s[i]=e}let _utf16LE_TextDecoder;function getUTF16LE_TextDecoder(){return _utf16LE_TextDecoder||(_utf16LE_TextDecoder=new TextDecoder("UTF-16LE")),_utf16LE_TextDecoder}let _utf16BE_TextDecoder;function getUTF16BE_TextDecoder(){return _utf16BE_TextDecoder||(_utf16BE_TextDecoder=new TextDecoder("UTF-16BE")),_utf16BE_TextDecoder}let _platformTextDecoder;function getPlatformTextDecoder(){return _platformTextDecoder||(_platformTextDecoder=isLittleEndian()?getUTF16LE_TextDecoder():getUTF16BE_TextDecoder()),_platformTextDecoder}const hasTextDecoder=typeof TextDecoder<"u";let createStringBuilder,decodeUTF16LE;hasTextDecoder?(createStringBuilder=s=>new StringBuilder(s),decodeUTF16LE=standardDecodeUTF16LE):(createStringBuilder=s=>new CompatStringBuilder,decodeUTF16LE=compatDecodeUTF16LE);function standardDecodeUTF16LE(s,e,i){const o=new Uint16Array(s.buffer,e,i);return i>0&&(o[0]===65279||o[0]===65534)?compatDecodeUTF16LE(s,e,i):getUTF16LE_TextDecoder().decode(o)}function compatDecodeUTF16LE(s,e,i){const o=[];let a=0;for(let c=0;c<i;c++){const d=readUInt16LE(s,e);e+=2,o[a++]=String.fromCharCode(d)}return o.join("")}class StringBuilder{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return getPlatformTextDecoder().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const i=this._capacity-this._bufferLength;i<=1&&(i===0||isHighSurrogate(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const i=e.length;if(this._bufferLength+i>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let o=0;o<i;o++)this._buffer[this._bufferLength++]=e.charCodeAt(o)}}class CompatStringBuilder{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class RichEditBracket{constructor(e,i,o,a,c,d){this._richEditBracketBrand=void 0,this.languageId=e,this.index=i,this.open=o,this.close=a,this.forwardRegex=c,this.reversedRegex=d,this._openSet=RichEditBracket._toSet(this.open),this._closeSet=RichEditBracket._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const i=new Set;for(const o of e)i.add(o);return i}}function groupFuzzyBrackets(s){const e=s.length;s=s.map(d=>[d[0].toLowerCase(),d[1].toLowerCase()]);const i=[];for(let d=0;d<e;d++)i[d]=d;const o=(d,_)=>{const[b,k]=d,[j,_e]=_;return b===j||b===_e||k===j||k===_e},a=(d,_)=>{const b=Math.min(d,_),k=Math.max(d,_);for(let j=0;j<e;j++)i[j]===k&&(i[j]=b)};for(let d=0;d<e;d++){const _=s[d];for(let b=d+1;b<e;b++){const k=s[b];o(_,k)&&a(i[d],i[b])}}const c=[];for(let d=0;d<e;d++){const _=[],b=[];for(let k=0;k<e;k++)if(i[k]===d){const[j,_e]=s[k];_.push(j),b.push(_e)}_.length>0&&c.push({open:_,close:b})}return c}class RichEditBrackets{constructor(e,i){this._richEditBracketsBrand=void 0;const o=groupFuzzyBrackets(i);this.brackets=o.map((a,c)=>new RichEditBracket(e,c,a.open,a.close,getRegexForBracketPair(a.open,a.close,o,c),getReversedRegexForBracketPair(a.open,a.close,o,c))),this.forwardRegex=getRegexForBrackets(this.brackets),this.reversedRegex=getReversedRegexForBrackets(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const a of this.brackets){for(const c of a.open)this.textIsBracket[c]=a,this.textIsOpenBracket[c]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,c.length);for(const c of a.close)this.textIsBracket[c]=a,this.textIsOpenBracket[c]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,c.length)}}}function collectSuperstrings(s,e,i,o){for(let a=0,c=e.length;a<c;a++){if(a===i)continue;const d=e[a];for(const _ of d.open)_.indexOf(s)>=0&&o.push(_);for(const _ of d.close)_.indexOf(s)>=0&&o.push(_)}}function lengthcmp(s,e){return s.length-e.length}function unique(s){if(s.length<=1)return s;const e=[],i=new Set;for(const o of s)i.has(o)||(e.push(o),i.add(o));return e}function getRegexForBracketPair(s,e,i,o){let a=[];a=a.concat(s),a=a.concat(e);for(let c=0,d=a.length;c<d;c++)collectSuperstrings(a[c],i,o,a);return a=unique(a),a.sort(lengthcmp),a.reverse(),createBracketOrRegExp(a)}function getReversedRegexForBracketPair(s,e,i,o){let a=[];a=a.concat(s),a=a.concat(e);for(let c=0,d=a.length;c<d;c++)collectSuperstrings(a[c],i,o,a);return a=unique(a),a.sort(lengthcmp),a.reverse(),createBracketOrRegExp(a.map(toReversedString))}function getRegexForBrackets(s){let e=[];for(const i of s){for(const o of i.open)e.push(o);for(const o of i.close)e.push(o)}return e=unique(e),createBracketOrRegExp(e)}function getReversedRegexForBrackets(s){let e=[];for(const i of s){for(const o of i.open)e.push(o);for(const o of i.close)e.push(o)}return e=unique(e),createBracketOrRegExp(e.map(toReversedString))}function prepareBracketForRegExp$1(s){const e=/^[\w ]+$/.test(s);return s=escapeRegExpCharacters(s),e?`\\b${s}\\b`:s}function createBracketOrRegExp(s){const e=`(${s.map(prepareBracketForRegExp$1).join(")|(")})`;return createRegExp(e,!0)}const toReversedString=function(){function s(o){if(hasTextDecoder){const a=new Uint16Array(o.length);let c=0;for(let d=o.length-1;d>=0;d--)a[c++]=o.charCodeAt(d);return getPlatformTextDecoder().decode(a)}else{const a=[];let c=0;for(let d=o.length-1;d>=0;d--)a[c++]=o.charAt(d);return a.join("")}}let e=null,i=null;return function(a){return e!==a&&(e=a,i=s(e)),i}}();class BracketsUtils{static _findPrevBracketInText(e,i,o,a){const c=o.match(e);if(!c)return null;const d=o.length-(c.index||0),_=c[0].length,b=a+d;return new Range$2(i,b-_+1,i,b+1)}static findPrevBracketInRange(e,i,o,a,c){const _=toReversedString(o).substring(o.length-c,o.length-a);return this._findPrevBracketInText(e,i,_,a)}static findNextBracketInText(e,i,o,a){const c=o.match(e);if(!c)return null;const d=c.index||0,_=c[0].length;if(_===0)return null;const b=a+d;return new Range$2(i,b+1,i,b+1+_)}static findNextBracketInRange(e,i,o,a,c){const d=o.substring(a,c);return this.findNextBracketInText(e,i,d,a)}}class BracketElectricCharacterSupport{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const i of this._richEditBrackets.brackets)for(const o of i.close){const a=o.charAt(o.length-1);e.push(a)}return distinct(e)}onElectricCharacter(e,i,o){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const a=i.findTokenIndexAtOffset(o-1);if(ignoreBracketsInToken(i.getStandardTokenType(a)))return null;const c=this._richEditBrackets.reversedRegex,d=i.getLineContent().substring(0,o-1)+e,_=BracketsUtils.findPrevBracketInRange(c,1,d,0,d.length);if(!_)return null;const b=d.substring(_.startColumn-1,_.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[b])return null;const j=i.getActualLineContentBefore(_.startColumn-1);return/^\s*$/.test(j)?{matchOpenBracket:b}:null}}function resetGlobalRegex(s){return s.global&&(s.lastIndex=0),!0}class IndentRulesSupport{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&resetGlobalRegex(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&resetGlobalRegex(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&resetGlobalRegex(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&resetGlobalRegex(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let i=0;return this.shouldIncrease(e)&&(i+=1),this.shouldDecrease(e)&&(i+=2),this.shouldIndentNextLine(e)&&(i+=4),this.shouldIgnore(e)&&(i+=8),i}}class OnEnterSupport{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(i=>{const o=OnEnterSupport._createOpenBracketRegExp(i[0]),a=OnEnterSupport._createCloseBracketRegExp(i[1]);o&&a&&this._brackets.push({open:i[0],openRegExp:o,close:i[1],closeRegExp:a})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,i,o,a){if(e>=3)for(let c=0,d=this._regExpRules.length;c<d;c++){const _=this._regExpRules[c];if([{reg:_.beforeText,text:o},{reg:_.afterText,text:a},{reg:_.previousLineText,text:i}].every(k=>k.reg?(k.reg.lastIndex=0,k.reg.test(k.text)):!0))return _.action}if(e>=2&&o.length>0&&a.length>0)for(let c=0,d=this._brackets.length;c<d;c++){const _=this._brackets[c];if(_.openRegExp.test(o)&&_.closeRegExp.test(a))return{indentAction:IndentAction.IndentOutdent}}if(e>=2&&o.length>0){for(let c=0,d=this._brackets.length;c<d;c++)if(this._brackets[c].openRegExp.test(o))return{indentAction:IndentAction.Indent}}return null}static _createOpenBracketRegExp(e){let i=escapeRegExpCharacters(e);return/\B/.test(i.charAt(0))||(i="\\b"+i),i+="\\s*$",OnEnterSupport._safeRegExp(i)}static _createCloseBracketRegExp(e){let i=escapeRegExpCharacters(e);return/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"),i="^\\s*"+i,OnEnterSupport._safeRegExp(i)}static _safeRegExp(e){try{return new RegExp(e)}catch(i){return onUnexpectedError(i),null}}}const IConfigurationService=createDecorator("configurationService");function toValuesTree(s,e){const i=Object.create(null);for(const o in s)addToValueTree(i,o,s[o],e);return i}function addToValueTree(s,e,i,o){const a=e.split("."),c=a.pop();let d=s;for(let _=0;_<a.length;_++){const b=a[_];let k=d[b];switch(typeof k){case"undefined":k=d[b]=Object.create(null);break;case"object":break;default:o(`Ignoring ${e} as ${a.slice(0,_+1).join(".")} is ${JSON.stringify(k)}`);return}d=k}if(typeof d=="object"&&d!==null)try{d[c]=i}catch{o(`Ignoring ${e} as ${a.join(".")} is ${JSON.stringify(d)}`)}else o(`Ignoring ${e} as ${a.join(".")} is ${JSON.stringify(d)}`)}function removeFromValueTree(s,e){const i=e.split(".");doRemoveFromValueTree(s,i)}function doRemoveFromValueTree(s,e){const i=e.shift();if(e.length===0){delete s[i];return}if(Object.keys(s).indexOf(i)!==-1){const o=s[i];typeof o=="object"&&!Array.isArray(o)&&(doRemoveFromValueTree(o,e),Object.keys(o).length===0&&delete s[i])}}function getConfigurationValue(s,e,i){function o(d,_){let b=d;for(const k of _){if(typeof b!="object"||b===null)return;b=b[k]}return b}const a=e.split("."),c=o(s,a);return typeof c>"u"?i:c}function getLanguageTagSettingPlainKey(s){return s.replace(/[\[\]]/g,"")}const ILanguageService=createDecorator("languageService");class SyncDescriptor{constructor(e,i=[],o=!1){this.ctor=e,this.staticArguments=i,this.supportsDelayedInstantiation=o}}const _registry=[];function registerSingleton(s,e,i){e instanceof SyncDescriptor||(e=new SyncDescriptor(e,[],i)),_registry.push([s,e])}function getSingletonServiceDescriptors(){return _registry}class RegistryImpl{constructor(){this.data=new Map}add(e,i){ok(isString$1(e)),ok(isObject(i)),ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,i)}as(e){return this.data.get(e)||null}}const Registry=new RegistryImpl,Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),Extensions$8={JSONContribution:"base.contributions.json"};function normalizeId(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}class JSONContributionRegistry{constructor(){this._onDidChangeSchema=new Emitter$1,this.schemasById={}}registerSchema(e,i){this.schemasById[normalizeId(e)]=i,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const jsonContributionRegistry=new JSONContributionRegistry;Registry.add(Extensions$8.JSONContribution,jsonContributionRegistry);const Extensions$7={Configuration:"base.contributions.configuration"},resourceLanguageSettingsSchemaId="vscode://schemas/settings/resourceLanguage",contributionRegistry=Registry.as(Extensions$8.JSONContribution);class ConfigurationRegistry{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Emitter$1,this._onDidUpdateConfiguration=new Emitter$1,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:localize("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,i=!0){this.registerConfigurations([e],i)}registerConfigurations(e,i=!0){const o=this.doRegisterConfigurations(e,i);contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:o})}registerDefaultConfigurations(e){var i;const o=[],a=[];for(const{overrides:c,source:d}of e)for(const _ in c)if(o.push(_),OVERRIDE_PROPERTY_REGEX.test(_)){const b=this.configurationDefaultsOverrides.get(_),k=(i=b==null?void 0:b.valuesSources)!==null&&i!==void 0?i:new Map;if(d)for(const tt of Object.keys(c[_]))k.set(tt,d);const j=Object.assign(Object.assign({},(b==null?void 0:b.value)||{}),c[_]);this.configurationDefaultsOverrides.set(_,{source:d,value:j,valuesSources:k});const _e=getLanguageTagSettingPlainKey(_),et={type:"object",default:j,description:localize("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",_e),$ref:resourceLanguageSettingsSchemaId,defaultDefaultValue:j,source:isString$1(d)?void 0:d,defaultValueSource:d};a.push(...overrideIdentifiersFromKey(_)),this.configurationProperties[_]=et,this.defaultLanguageConfigurationOverridesNode.properties[_]=et}else{this.configurationDefaultsOverrides.set(_,{value:c[_],source:d});const b=this.configurationProperties[_];b&&(this.updatePropertyDefaultValue(_,b),this.updateSchema(_,b))}this.registerOverrideIdentifiers(a),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:o,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const i of e)this.overrideIdentifiers.add(i);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,i){const o=[];return e.forEach(a=>{o.push(...this.validateAndRegisterProperties(a,i,a.extensionInfo,a.restrictedProperties)),this.configurationContributors.push(a),this.registerJSONConfiguration(a)}),o}validateAndRegisterProperties(e,i=!0,o,a,c=3){var d;c=isUndefinedOrNull(e.scope)?c:e.scope;const _=[],b=e.properties;if(b)for(const j in b){const _e=b[j];if(i&&validateProperty(j,_e)){delete b[j];continue}if(_e.source=o,_e.defaultDefaultValue=b[j].default,this.updatePropertyDefaultValue(j,_e),OVERRIDE_PROPERTY_REGEX.test(j)?_e.scope=void 0:(_e.scope=isUndefinedOrNull(_e.scope)?c:_e.scope,_e.restricted=isUndefinedOrNull(_e.restricted)?!!(a!=null&&a.includes(j)):_e.restricted),b[j].hasOwnProperty("included")&&!b[j].included){this.excludedConfigurationProperties[j]=b[j],delete b[j];continue}else this.configurationProperties[j]=b[j],!((d=b[j].policy)===null||d===void 0)&&d.name&&this.policyConfigurations.set(b[j].policy.name,j);!b[j].deprecationMessage&&b[j].markdownDeprecationMessage&&(b[j].deprecationMessage=b[j].markdownDeprecationMessage),_.push(j)}const k=e.allOf;if(k)for(const j of k)_.push(...this.validateAndRegisterProperties(j,i,o,a,c));return _}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const i=o=>{const a=o.properties;if(a)for(const d in a)this.updateSchema(d,a[d]);const c=o.allOf;c==null||c.forEach(i)};i(e)}updateSchema(e,i){switch(i.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=i;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const i=`[${e}]`,o={type:"object",description:localize("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:localize("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:resourceLanguageSettingsSchemaId};this.updatePropertyDefaultValue(i,o)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){localize("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),localize("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,i){const o=this.configurationDefaultsOverrides.get(e);let a=o==null?void 0:o.value,c=o==null?void 0:o.source;isUndefined(a)&&(a=i.defaultDefaultValue,c=void 0),isUndefined(a)&&(a=getDefaultValue(i.type)),i.default=a,i.defaultValueSource=c}}const OVERRIDE_IDENTIFIER_PATTERN="\\[([^\\]]+)\\]",OVERRIDE_IDENTIFIER_REGEX=new RegExp(OVERRIDE_IDENTIFIER_PATTERN,"g"),OVERRIDE_PROPERTY_PATTERN=`^(${OVERRIDE_IDENTIFIER_PATTERN})+$`,OVERRIDE_PROPERTY_REGEX=new RegExp(OVERRIDE_PROPERTY_PATTERN);function overrideIdentifiersFromKey(s){const e=[];if(OVERRIDE_PROPERTY_REGEX.test(s)){let i=OVERRIDE_IDENTIFIER_REGEX.exec(s);for(;i!=null&&i.length;){const o=i[1].trim();o&&e.push(o),i=OVERRIDE_IDENTIFIER_REGEX.exec(s)}}return distinct(e)}function getDefaultValue(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const configurationRegistry$2=new ConfigurationRegistry;Registry.add(Extensions$7.Configuration,configurationRegistry$2);function validateProperty(s,e){var i,o,a,c;return s.trim()?OVERRIDE_PROPERTY_REGEX.test(s)?localize("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):configurationRegistry$2.getConfigurationProperties()[s]!==void 0?localize("config.property.duplicate","Cannot register '{0}'. This property is already registered.",s):((i=e.policy)===null||i===void 0?void 0:i.name)&&configurationRegistry$2.getPolicyConfigurations().get((o=e.policy)===null||o===void 0?void 0:o.name)!==void 0?localize("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",s,(a=e.policy)===null||a===void 0?void 0:a.name,configurationRegistry$2.getPolicyConfigurations().get((c=e.policy)===null||c===void 0?void 0:c.name)):null:localize("config.property.empty","Cannot register an empty property")}const Extensions$6={ModesRegistry:"editor.modesRegistry"};class EditorModesRegistry{constructor(){this._onDidChangeLanguages=new Emitter$1,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let i=0,o=this._languages.length;i<o;i++)if(this._languages[i]===e){this._languages.splice(i,1);return}}}}getLanguages(){return this._languages}}const ModesRegistry=new EditorModesRegistry;Registry.add(Extensions$6.ModesRegistry,ModesRegistry);const PLAINTEXT_LANGUAGE_ID="plaintext",PLAINTEXT_EXTENSION=".txt";ModesRegistry.registerLanguage({id:PLAINTEXT_LANGUAGE_ID,extensions:[PLAINTEXT_EXTENSION],aliases:[localize("plainText.alias","Plain Text"),"text"],mimetypes:[Mimes.text]});Registry.as(Extensions$7.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class LanguageBracketsConfiguration{constructor(e,i){this.languageId=e;let o;i.colorizedBracketPairs?o=filterValidBrackets(i.colorizedBracketPairs.map(d=>[d[0],d[1]])):i.brackets?o=filterValidBrackets(i.brackets.map(d=>[d[0],d[1]]).filter(d=>!(d[0]==="<"&&d[1]===">"))):o=[];const a=new CachedFunction(d=>{const _=new Set;return{info:new OpeningBracketKind(this,d,_),closing:_}}),c=new CachedFunction(d=>{const _=new Set;return{info:new ClosingBracketKind(this,d,_),opening:_}});for(const[d,_]of o){const b=a.get(d),k=c.get(_);b.closing.add(k.info),k.opening.add(b.info)}this._openingBrackets=new Map([...a.cachedValues].map(([d,_])=>[d,_.info])),this._closingBrackets=new Map([...c.cachedValues].map(([d,_])=>[d,_.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function filterValidBrackets(s){return s.filter(([e,i])=>e!==""&&i!=="")}class BracketKindBase{constructor(e,i){this.config=e,this.bracketText=i}get languageId(){return this.config.languageId}}class OpeningBracketKind extends BracketKindBase{constructor(e,i,o){super(e,i),this.openedBrackets=o,this.isOpeningBracket=!0}}class ClosingBracketKind extends BracketKindBase{constructor(e,i,o){super(e,i),this.closedBrackets=o,this.isOpeningBracket=!1}closes(e){if(e.languageId===this.languageId&&e.config!==this.config)throw new BugIndicatingError("Brackets from different language configuration cannot be used.");return this.closedBrackets.has(e)}getClosedBrackets(){return[...this.closedBrackets]}}var __decorate$B=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$v=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};class LanguageConfigurationServiceChangeEvent{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const ILanguageConfigurationService=createDecorator("languageConfigurationService");let LanguageConfigurationService=class extends Disposable{constructor(e,i){super(),this.configurationService=e,this.languageService=i,this._registry=this._register(new LanguageConfigurationRegistry),this.onDidChangeEmitter=this._register(new Emitter$1),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const o=new Set(Object.values(customizedLanguageConfigKeys));this._register(this.configurationService.onDidChangeConfiguration(a=>{const c=a.change.keys.some(_=>o.has(_)),d=a.change.overrides.filter(([_,b])=>b.some(k=>o.has(k))).map(([_])=>_);if(c)this.configurations.clear(),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(void 0));else for(const _ of d)this.languageService.isRegisteredLanguageId(_)&&(this.configurations.delete(_),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(_)))})),this._register(this._registry.onDidChange(a=>{this.configurations.delete(a.languageId),this.onDidChangeEmitter.fire(new LanguageConfigurationServiceChangeEvent(a.languageId))}))}register(e,i,o){return this._registry.register(e,i,o)}getLanguageConfiguration(e){let i=this.configurations.get(e);return i||(i=computeConfig(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,i)),i}};LanguageConfigurationService=__decorate$B([__param$v(0,IConfigurationService),__param$v(1,ILanguageService)],LanguageConfigurationService);function computeConfig(s,e,i,o){let a=e.getLanguageConfiguration(s);if(!a){if(!o.isRegisteredLanguageId(s))throw new Error(`Language id "${s}" is not configured nor known`);a=new ResolvedLanguageConfiguration(s,{})}const c=getCustomizedLanguageConfig(a.languageId,i),d=combineLanguageConfigurations([a.underlyingConfig,c]);return new ResolvedLanguageConfiguration(a.languageId,d)}const customizedLanguageConfigKeys={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function getCustomizedLanguageConfig(s,e){const i=e.getValue(customizedLanguageConfigKeys.brackets,{overrideIdentifier:s}),o=e.getValue(customizedLanguageConfigKeys.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:validateBracketPairs(i),colorizedBracketPairs:validateBracketPairs(o)}}function validateBracketPairs(s){if(!!Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function getIndentationAtPosition(s,e,i){const o=s.getLineContent(e);let a=getLeadingWhitespace(o);return a.length>i-1&&(a=a.substring(0,i-1)),a}function getScopedLineTokens(s,e,i){s.tokenization.forceTokenization(e);const o=s.tokenization.getLineTokens(e),a=typeof i>"u"?s.getLineMaxColumn(e)-1:i-1;return createScopedLineTokens(o,a)}class ComposedLanguageConfiguration{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,i){const o=new LanguageConfigurationContribution(e,i,++this._order);return this._entries.push(o),this._resolved=null,toDisposable(()=>{for(let a=0;a<this._entries.length;a++)if(this._entries[a]===o){this._entries.splice(a,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new ResolvedLanguageConfiguration(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(LanguageConfigurationContribution.cmp),combineLanguageConfigurations(this._entries.map(e=>e.configuration)))}}function combineLanguageConfigurations(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const i of s)e={comments:i.comments||e.comments,brackets:i.brackets||e.brackets,wordPattern:i.wordPattern||e.wordPattern,indentationRules:i.indentationRules||e.indentationRules,onEnterRules:i.onEnterRules||e.onEnterRules,autoClosingPairs:i.autoClosingPairs||e.autoClosingPairs,surroundingPairs:i.surroundingPairs||e.surroundingPairs,autoCloseBefore:i.autoCloseBefore||e.autoCloseBefore,folding:i.folding||e.folding,colorizedBracketPairs:i.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:i.__electricCharacterSupport||e.__electricCharacterSupport};return e}class LanguageConfigurationContribution{constructor(e,i,o){this.configuration=e,this.priority=i,this.order=o}static cmp(e,i){return e.priority===i.priority?e.order-i.order:e.priority-i.priority}}class LanguageConfigurationChangeEvent{constructor(e){this.languageId=e}}class LanguageConfigurationRegistry extends Disposable{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._register(this.register(PLAINTEXT_LANGUAGE_ID,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,i,o=0){let a=this._entries.get(e);a||(a=new ComposedLanguageConfiguration(e),this._entries.set(e,a));const c=a.register(i,o);return this._onDidChange.fire(new LanguageConfigurationChangeEvent(e)),toDisposable(()=>{c.dispose(),this._onDidChange.fire(new LanguageConfigurationChangeEvent(e))})}getLanguageConfiguration(e){const i=this._entries.get(e);return(i==null?void 0:i.getResolvedConfiguration())||null}}class ResolvedLanguageConfiguration{constructor(e,i){this.languageId=e,this.underlyingConfig=i,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new OnEnterSupport(this.underlyingConfig):null,this.comments=ResolvedLanguageConfiguration._handleComments(this.underlyingConfig),this.characterPair=new CharacterPairSupport(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||DEFAULT_WORD_REGEXP,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new IndentRulesSupport(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new LanguageBracketsConfiguration(e,this.underlyingConfig)}getWordDefinition(){return ensureValidWordDefinition(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new RichEditBrackets(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new BracketElectricCharacterSupport(this.brackets)),this._electricCharacter}onEnter(e,i,o,a){return this._onEnterSupport?this._onEnterSupport.onEnter(e,i,o,a):null}getAutoClosingPairs(){return new AutoClosingPairs(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(){return this.characterPair.getAutoCloseBeforeSet()}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const i=e.comments;if(!i)return null;const o={};if(i.lineComment&&(o.lineCommentToken=i.lineComment),i.blockComment){const[a,c]=i.blockComment;o.blockCommentStartToken=a,o.blockCommentEndToken=c}return o}}registerSingleton(ILanguageConfigurationService,LanguageConfigurationService);const NullState=new class{clone(){return this}equals(s){return this===s}};function nullTokenize(s,e){return new TokenizationResult([new Token$2(0,"",s)],e)}function nullTokenizeEncoded(s,e){const i=new Uint32Array(2);return i[0]=0,i[1]=(s<<0|0<<8|0<<11|1<<15|2<<24)>>>0,new EncodedTokenizationResult(i,e===null?NullState:e)}const IModelService=createDecorator("modelService");var __awaiter$p=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})},__asyncValues=globalThis&&globalThis.__asyncValues||function(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],i;return e?e.call(s):(s=typeof __values=="function"?__values(s):s[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(c){i[c]=s[c]&&function(d){return new Promise(function(_,b){d=s[c](d),a(_,b,d.done,d.value)})}}function a(c,d,_,b){Promise.resolve(b).then(function(k){c({value:k,done:_})},d)}};function isThenable$1(s){return!!s&&typeof s.then=="function"}function createCancelablePromise(s){const e=new CancellationTokenSource$1,i=s(e.token),o=new Promise((a,c)=>{const d=e.token.onCancellationRequested(()=>{d.dispose(),e.dispose(),c(new CancellationError)});Promise.resolve(i).then(_=>{d.dispose(),e.dispose(),a(_)},_=>{d.dispose(),e.dispose(),c(_)})});return new class{cancel(){e.cancel()}then(a,c){return o.then(a,c)}catch(a){return this.then(void 0,a)}finally(a){return o.finally(a)}}}class Throttler{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const i=()=>{this.queuedPromise=null;const o=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,o};this.queuedPromise=new Promise(o=>{this.activePromise.then(i,i).then(o)})}return new Promise((i,o)=>{this.queuedPromise.then(i,o)})}return this.activePromise=e(),new Promise((i,o)=>{this.activePromise.then(a=>{this.activePromise=null,i(a)},a=>{this.activePromise=null,o(a)})})}}const timeoutDeferred=(s,e)=>{let i=!0;const o=setTimeout(()=>{i=!1,e()},s);return{isTriggered:()=>i,dispose:()=>{clearTimeout(o),i=!1}}},microtaskDeferred=s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},MicrotaskDelay=Symbol("MicrotaskDelay");class Delayer{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,i=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((a,c)=>{this.doResolve=a,this.doReject=c}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const a=this.task;return this.task=null,a()}}));const o=()=>{var a;this.deferred=null,(a=this.doResolve)===null||a===void 0||a.call(this,null)};return this.deferred=i===MicrotaskDelay?microtaskDeferred(o):timeoutDeferred(i,o),this.completionPromise}isTriggered(){var e;return!!(!((e=this.deferred)===null||e===void 0)&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)===null||e===void 0||e.call(this,new CancellationError),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)===null||e===void 0||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class ThrottledDelayer{constructor(e){this.delayer=new Delayer(e),this.throttler=new Throttler}trigger(e,i){return this.delayer.trigger(()=>this.throttler.queue(e),i)}dispose(){this.delayer.dispose()}}function timeout(s,e){return e?new Promise((i,o)=>{const a=setTimeout(()=>{c.dispose(),i()},s),c=e.onCancellationRequested(()=>{clearTimeout(a),c.dispose(),o(new CancellationError)})}):createCancelablePromise(i=>timeout(s,i))}function disposableTimeout(s,e=0){const i=setTimeout(s,e);return toDisposable(()=>clearTimeout(i))}class TimeoutTimer{constructor(e,i){this._token=-1,typeof e=="function"&&typeof i=="number"&&this.setIfNotSet(e,i)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,i){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},i)}setIfNotSet(e,i){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},i))}}class IntervalTimer{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,i){this.cancel(),this._token=setInterval(()=>{e()},i)}}class RunOnceScheduler{constructor(e,i){this.timeoutToken=-1,this.runner=e,this.timeout=i,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)===null||e===void 0||e.call(this)}}let runWhenIdle;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?runWhenIdle=s=>{setTimeout0(()=>{if(e)return;const i=Date.now()+15;s(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:runWhenIdle=(s,e)=>{const i=requestIdleCallback(s,typeof e=="number"?{timeout:e}:void 0);let o=!1;return{dispose(){o||(o=!0,cancelIdleCallback(i))}}}})();class IdleValue{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class DeferredPromise{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,i)=>{this.completeCallback=e,this.errorCallback=i})}get isRejected(){return this.rejected}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(i=>{this.completeCallback(e),this.resolved=!0,i()})}cancel(){new Promise(e=>{this.errorCallback(new CancellationError),this.rejected=!0,e()})}}var Promises;(function(s){function e(o){return __awaiter$p(this,void 0,void 0,function*(){let a;const c=yield Promise.all(o.map(d=>d.then(_=>_,_=>{a||(a=_)})));if(typeof a<"u")throw a;return c})}s.settled=e;function i(o){return new Promise((a,c)=>__awaiter$p(this,void 0,void 0,function*(){try{yield o(a,c)}catch(d){c(d)}}))}s.withAsyncBody=i})(Promises||(Promises={}));class AsyncIterableObject{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new Emitter$1,queueMicrotask(()=>__awaiter$p(this,void 0,void 0,function*(){const i={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{yield Promise.resolve(e(i)),this.resolve()}catch(o){this.reject(o)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}}))}static fromArray(e){return new AsyncIterableObject(i=>{i.emitMany(e)})}static fromPromise(e){return new AsyncIterableObject(i=>__awaiter$p(this,void 0,void 0,function*(){i.emitMany(yield e)}))}static fromPromises(e){return new AsyncIterableObject(i=>__awaiter$p(this,void 0,void 0,function*(){yield Promise.all(e.map(o=>__awaiter$p(this,void 0,void 0,function*(){return i.emitOne(yield o)})))}))}static merge(e){return new AsyncIterableObject(i=>__awaiter$p(this,void 0,void 0,function*(){yield Promise.all(e.map(o=>{var a,c;return __awaiter$p(this,void 0,void 0,function*(){var d,_;try{for(a=__asyncValues(o);c=yield a.next(),!c.done;){const b=c.value;i.emitOne(b)}}catch(b){d={error:b}}finally{try{c&&!c.done&&(_=a.return)&&(yield _.call(a))}finally{if(d)throw d.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>__awaiter$p(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Event.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,i){return new AsyncIterableObject(o=>__awaiter$p(this,void 0,void 0,function*(){var a,c;try{for(var d=__asyncValues(e),_;_=yield d.next(),!_.done;){const b=_.value;o.emitOne(i(b))}}catch(b){a={error:b}}finally{try{_&&!_.done&&(c=d.return)&&(yield c.call(d))}finally{if(a)throw a.error}}}))}map(e){return AsyncIterableObject.map(this,e)}static filter(e,i){return new AsyncIterableObject(o=>__awaiter$p(this,void 0,void 0,function*(){var a,c;try{for(var d=__asyncValues(e),_;_=yield d.next(),!_.done;){const b=_.value;i(b)&&o.emitOne(b)}}catch(b){a={error:b}}finally{try{_&&!_.done&&(c=d.return)&&(yield c.call(d))}finally{if(a)throw a.error}}}))}filter(e){return AsyncIterableObject.filter(this,e)}static coalesce(e){return AsyncIterableObject.filter(e,i=>!!i)}coalesce(){return AsyncIterableObject.coalesce(this)}static toPromise(e){var i,o,a,c;return __awaiter$p(this,void 0,void 0,function*(){const d=[];try{for(i=__asyncValues(e);o=yield i.next(),!o.done;){const _=o.value;d.push(_)}}catch(_){a={error:_}}finally{try{o&&!o.done&&(c=i.return)&&(yield c.call(i))}finally{if(a)throw a.error}}return d})}toPromise(){return AsyncIterableObject.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}AsyncIterableObject.EMPTY=AsyncIterableObject.fromArray([]);const INITIALIZE="$initialize";let webWorkerWarningLogged=!1;function logOnceWebWorkerWarning(s){!isWeb||(webWorkerWarningLogged||(webWorkerWarningLogged=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}class RequestMessage{constructor(e,i,o,a){this.vsWorker=e,this.req=i,this.method=o,this.args=a,this.type=0}}class ReplyMessage{constructor(e,i,o,a){this.vsWorker=e,this.seq=i,this.res=o,this.err=a,this.type=1}}class SubscribeEventMessage{constructor(e,i,o,a){this.vsWorker=e,this.req=i,this.eventName=o,this.arg=a,this.type=2}}class EventMessage{constructor(e,i,o){this.vsWorker=e,this.req=i,this.event=o,this.type=3}}class UnsubscribeEventMessage{constructor(e,i){this.vsWorker=e,this.req=i,this.type=4}}class SimpleWorkerProtocol{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,i){const o=String(++this._lastSentReq);return new Promise((a,c)=>{this._pendingReplies[o]={resolve:a,reject:c},this._send(new RequestMessage(this._workerId,o,e,i))})}listen(e,i){let o=null;const a=new Emitter$1({onFirstListenerAdd:()=>{o=String(++this._lastSentReq),this._pendingEmitters.set(o,a),this._send(new SubscribeEventMessage(this._workerId,o,e,i))},onLastListenerRemove:()=>{this._pendingEmitters.delete(o),this._send(new UnsubscribeEventMessage(this._workerId,o)),o=null}});return a.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const i=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let o=e.err;e.err.$isError&&(o=new Error,o.name=e.err.name,o.message=e.err.message,o.stack=e.err.stack),i.reject(o);return}i.resolve(e.res)}_handleRequestMessage(e){const i=e.req;this._handler.handleMessage(e.method,e.args).then(a=>{this._send(new ReplyMessage(this._workerId,i,a,void 0))},a=>{a.detail instanceof Error&&(a.detail=transformErrorForSerialization(a.detail)),this._send(new ReplyMessage(this._workerId,i,void 0,transformErrorForSerialization(a)))})}_handleSubscribeEventMessage(e){const i=e.req,o=this._handler.handleEvent(e.eventName,e.arg)(a=>{this._send(new EventMessage(this._workerId,i,a))});this._pendingEvents.set(i,o)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const i=[];if(e.type===0)for(let o=0;o<e.args.length;o++)e.args[o]instanceof ArrayBuffer&&i.push(e.args[o]);else e.type===1&&e.res instanceof ArrayBuffer&&i.push(e.res);this._handler.sendMessage(e,i)}}class SimpleWorkerClient extends Disposable{constructor(e,i,o){super();let a=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",k=>{this._protocol.handleMessage(k)},k=>{a==null||a(k)})),this._protocol=new SimpleWorkerProtocol({sendMessage:(k,j)=>{this._worker.postMessage(k,j)},handleMessage:(k,j)=>{if(typeof o[k]!="function")return Promise.reject(new Error("Missing method "+k+" on main thread host."));try{return Promise.resolve(o[k].apply(o,j))}catch(_e){return Promise.reject(_e)}},handleEvent:(k,j)=>{if(propertyIsDynamicEvent(k)){const _e=o[k].call(o,j);if(typeof _e!="function")throw new Error(`Missing dynamic event ${k} on main thread host.`);return _e}if(propertyIsEvent(k)){const _e=o[k];if(typeof _e!="function")throw new Error(`Missing event ${k} on main thread host.`);return _e}throw new Error(`Malformed event name ${k}`)}}),this._protocol.setWorkerId(this._worker.getId());let c=null;typeof globals.require<"u"&&typeof globals.require.getConfig=="function"?c=globals.require.getConfig():typeof globals.requirejs<"u"&&(c=globals.requirejs.s.contexts._.config);const d=getAllMethodNames(o);this._onModuleLoaded=this._protocol.sendMessage(INITIALIZE,[this._worker.getId(),JSON.parse(JSON.stringify(c)),i,d]);const _=(k,j)=>this._request(k,j),b=(k,j)=>this._protocol.listen(k,j);this._lazyProxy=new Promise((k,j)=>{a=j,this._onModuleLoaded.then(_e=>{k(createProxyObject(_e,_,b))},_e=>{j(_e),this._onError("Worker failed to load "+i,_e)})})}getProxyObject(){return this._lazyProxy}_request(e,i){return new Promise((o,a)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,i).then(o,a)},a)})}_onError(e,i){console.error(e),console.info(i)}}function propertyIsEvent(s){return s[0]==="o"&&s[1]==="n"&&isUpperAsciiLetter(s.charCodeAt(2))}function propertyIsDynamicEvent(s){return/^onDynamic/.test(s)&&isUpperAsciiLetter(s.charCodeAt(9))}function createProxyObject(s,e,i){const o=d=>function(){const _=Array.prototype.slice.call(arguments,0);return e(d,_)},a=d=>function(_){return i(d,_)},c={};for(const d of s){if(propertyIsDynamicEvent(d)){c[d]=a(d);continue}if(propertyIsEvent(d)){c[d]=i(d,void 0);continue}c[d]=o(d)}return c}var _a$7;const ttPolicy$3=(_a$7=window.trustedTypes)===null||_a$7===void 0?void 0:_a$7.createPolicy("defaultWorkerFactory",{createScriptURL:s=>s});function getWorker(s){if(globals.MonacoEnvironment){if(typeof globals.MonacoEnvironment.getWorker=="function")return globals.MonacoEnvironment.getWorker("workerMain.js",s);if(typeof globals.MonacoEnvironment.getWorkerUrl=="function"){const e=globals.MonacoEnvironment.getWorkerUrl("workerMain.js",s);return new Worker(ttPolicy$3?ttPolicy$3.createScriptURL(e):e,{name:s})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function isPromiseLike(s){return typeof s.then=="function"}class WebWorker{constructor(e,i,o,a,c){this.id=i;const d=getWorker(o);isPromiseLike(d)?this.worker=d:this.worker=Promise.resolve(d),this.postMessage(e,[]),this.worker.then(_=>{_.onmessage=function(b){a(b.data)},_.onmessageerror=c,typeof _.addEventListener=="function"&&_.addEventListener("error",c)})}getId(){return this.id}postMessage(e,i){var o;(o=this.worker)===null||o===void 0||o.then(a=>a.postMessage(e,i))}dispose(){var e;(e=this.worker)===null||e===void 0||e.then(i=>i.terminate()),this.worker=null}}class DefaultWorkerFactory{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,i,o){const a=++DefaultWorkerFactory.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new WebWorker(e,a,this._label||"anonymous"+a,i,c=>{logOnceWebWorkerWarning(c),this._webWorkerFailedBeforeError=c,o(c)})}}DefaultWorkerFactory.LAST_WORKER_ID=0;class DiffChange{constructor(e,i,o,a){this.originalStart=e,this.originalLength=i,this.modifiedStart=o,this.modifiedLength=a}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}function doHash(s,e){switch(typeof s){case"object":return s===null?numberHash(349,e):Array.isArray(s)?arrayHash(s,e):objectHash(s,e);case"string":return stringHash(s,e);case"boolean":return booleanHash(s,e);case"number":return numberHash(s,e);case"undefined":return numberHash(937,e);default:return numberHash(617,e)}}function numberHash(s,e){return(e<<5)-e+s|0}function booleanHash(s,e){return numberHash(s?433:863,e)}function stringHash(s,e){e=numberHash(149417,e);for(let i=0,o=s.length;i<o;i++)e=numberHash(s.charCodeAt(i),e);return e}function arrayHash(s,e){return e=numberHash(104579,e),s.reduce((i,o)=>doHash(o,i),e)}function objectHash(s,e){return e=numberHash(181387,e),Object.keys(s).sort().reduce((i,o)=>(i=stringHash(o,i),doHash(s[o],i)),e)}function leftRotate$2(s,e,i=32){const o=i-e,a=~((1<<o)-1);return(s<<e|(a&s)>>>o)>>>0}function fill(s,e=0,i=s.byteLength,o=0){for(let a=0;a<i;a++)s[e+a]=o}function leftPad(s,e,i="0"){for(;s.length<e;)s=i+s;return s}function toHexString(s,e=32){return s instanceof ArrayBuffer?Array.from(new Uint8Array(s)).map(i=>i.toString(16).padStart(2,"0")).join(""):leftPad((s>>>0).toString(16),e/4)}class StringSHA1{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const i=e.length;if(i===0)return;const o=this._buff;let a=this._buffLen,c=this._leftoverHighSurrogate,d,_;for(c!==0?(d=c,_=-1,c=0):(d=e.charCodeAt(0),_=0);;){let b=d;if(isHighSurrogate(d))if(_+1<i){const k=e.charCodeAt(_+1);isLowSurrogate(k)?(_++,b=computeCodePoint(d,k)):b=65533}else{c=d;break}else isLowSurrogate(d)&&(b=65533);if(a=this._push(o,a,b),_++,_<i)d=e.charCodeAt(_);else break}this._buffLen=a,this._leftoverHighSurrogate=c}_push(e,i,o){return o<128?e[i++]=o:o<2048?(e[i++]=192|(o&1984)>>>6,e[i++]=128|(o&63)>>>0):o<65536?(e[i++]=224|(o&61440)>>>12,e[i++]=128|(o&4032)>>>6,e[i++]=128|(o&63)>>>0):(e[i++]=240|(o&1835008)>>>18,e[i++]=128|(o&258048)>>>12,e[i++]=128|(o&4032)>>>6,e[i++]=128|(o&63)>>>0),i>=64&&(this._step(),i-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),i}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),toHexString(this._h0)+toHexString(this._h1)+toHexString(this._h2)+toHexString(this._h3)+toHexString(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,fill(this._buff,this._buffLen),this._buffLen>56&&(this._step(),fill(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=StringSHA1._bigBlock32,i=this._buffDV;for(let _e=0;_e<64;_e+=4)e.setUint32(_e,i.getUint32(_e,!1),!1);for(let _e=64;_e<320;_e+=4)e.setUint32(_e,leftRotate$2(e.getUint32(_e-12,!1)^e.getUint32(_e-32,!1)^e.getUint32(_e-56,!1)^e.getUint32(_e-64,!1),1),!1);let o=this._h0,a=this._h1,c=this._h2,d=this._h3,_=this._h4,b,k,j;for(let _e=0;_e<80;_e++)_e<20?(b=a&c|~a&d,k=1518500249):_e<40?(b=a^c^d,k=1859775393):_e<60?(b=a&c|a&d|c&d,k=2400959708):(b=a^c^d,k=3395469782),j=leftRotate$2(o,5)+b+_+k+e.getUint32(_e*4,!1)&4294967295,_=d,d=c,c=leftRotate$2(a,30),a=o,o=j;this._h0=this._h0+o&4294967295,this._h1=this._h1+a&4294967295,this._h2=this._h2+c&4294967295,this._h3=this._h3+d&4294967295,this._h4=this._h4+_&4294967295}}StringSHA1._bigBlock32=new DataView(new ArrayBuffer(320));class StringDiffSequence{constructor(e){this.source=e}getElements(){const e=this.source,i=new Int32Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=e.charCodeAt(o);return i}}function stringDiff(s,e,i){return new LcsDiff(new StringDiffSequence(s),new StringDiffSequence(e)).ComputeDiff(i).changes}class Debug{static Assert(e,i){if(!e)throw new Error(i)}}class MyArray{static Copy(e,i,o,a,c){for(let d=0;d<c;d++)o[a+d]=e[i+d]}static Copy2(e,i,o,a,c){for(let d=0;d<c;d++)o[a+d]=e[i+d]}}class DiffChangeHelper{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,i){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,i),this.m_originalCount++}AddModifiedElement(e,i){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,i),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class LcsDiff{constructor(e,i,o=null){this.ContinueProcessingPredicate=o,this._originalSequence=e,this._modifiedSequence=i;const[a,c,d]=LcsDiff._getElements(e),[_,b,k]=LcsDiff._getElements(i);this._hasStrings=d&&k,this._originalStringElements=a,this._originalElementsOrHash=c,this._modifiedStringElements=_,this._modifiedElementsOrHash=b,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const i=e.getElements();if(LcsDiff._isStringArray(i)){const o=new Int32Array(i.length);for(let a=0,c=i.length;a<c;a++)o[a]=stringHash(i[a],0);return[i,o,!0]}return i instanceof Int32Array?[[],i,!1]:[[],new Int32Array(i),!1]}ElementsAreEqual(e,i){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[i]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[i]:!0}ElementsAreStrictEqual(e,i){if(!this.ElementsAreEqual(e,i))return!1;const o=LcsDiff._getStrictElement(this._originalSequence,e),a=LcsDiff._getStrictElement(this._modifiedSequence,i);return o===a}static _getStrictElement(e,i){return typeof e.getStrictElement=="function"?e.getStrictElement(i):null}OriginalElementsAreEqual(e,i){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[i]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[i]:!0}ModifiedElementsAreEqual(e,i){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[i]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[i]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,i,o,a,c){const d=[!1];let _=this.ComputeDiffRecursive(e,i,o,a,d);return c&&(_=this.PrettifyChanges(_)),{quitEarly:d[0],changes:_}}ComputeDiffRecursive(e,i,o,a,c){for(c[0]=!1;e<=i&&o<=a&&this.ElementsAreEqual(e,o);)e++,o++;for(;i>=e&&a>=o&&this.ElementsAreEqual(i,a);)i--,a--;if(e>i||o>a){let _e;return o<=a?(Debug.Assert(e===i+1,"originalStart should only be one more than originalEnd"),_e=[new DiffChange(e,0,o,a-o+1)]):e<=i?(Debug.Assert(o===a+1,"modifiedStart should only be one more than modifiedEnd"),_e=[new DiffChange(e,i-e+1,o,0)]):(Debug.Assert(e===i+1,"originalStart should only be one more than originalEnd"),Debug.Assert(o===a+1,"modifiedStart should only be one more than modifiedEnd"),_e=[]),_e}const d=[0],_=[0],b=this.ComputeRecursionPoint(e,i,o,a,d,_,c),k=d[0],j=_[0];if(b!==null)return b;if(!c[0]){const _e=this.ComputeDiffRecursive(e,k,o,j,c);let et=[];return c[0]?et=[new DiffChange(k+1,i-(k+1)+1,j+1,a-(j+1)+1)]:et=this.ComputeDiffRecursive(k+1,i,j+1,a,c),this.ConcatenateChanges(_e,et)}return[new DiffChange(e,i-e+1,o,a-o+1)]}WALKTRACE(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st,ot,nt,rt){let at=null,lt=null,gt=new DiffChangeHelper,ht=i,ut=o,ct=tt[0]-ot[0]-a,ft=-1073741824,dt=this.m_forwardHistory.length-1;do{const pt=ct+e;pt===ht||pt<ut&&k[pt-1]<k[pt+1]?(_e=k[pt+1],it=_e-ct-a,_e<ft&&gt.MarkNextChange(),ft=_e,gt.AddModifiedElement(_e+1,it),ct=pt+1-e):(_e=k[pt-1]+1,it=_e-ct-a,_e<ft&&gt.MarkNextChange(),ft=_e-1,gt.AddOriginalElement(_e,it+1),ct=pt-1-e),dt>=0&&(k=this.m_forwardHistory[dt],e=k[0],ht=1,ut=k.length-1)}while(--dt>=-1);if(at=gt.getReverseChanges(),rt[0]){let pt=tt[0]+1,mt=ot[0]+1;if(at!==null&&at.length>0){const _t=at[at.length-1];pt=Math.max(pt,_t.getOriginalEnd()),mt=Math.max(mt,_t.getModifiedEnd())}lt=[new DiffChange(pt,et-pt+1,mt,st-mt+1)]}else{gt=new DiffChangeHelper,ht=d,ut=_,ct=tt[0]-ot[0]-b,ft=1073741824,dt=nt?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const pt=ct+c;pt===ht||pt<ut&&j[pt-1]>=j[pt+1]?(_e=j[pt+1]-1,it=_e-ct-b,_e>ft&&gt.MarkNextChange(),ft=_e+1,gt.AddOriginalElement(_e+1,it+1),ct=pt+1-c):(_e=j[pt-1],it=_e-ct-b,_e>ft&&gt.MarkNextChange(),ft=_e,gt.AddModifiedElement(_e+1,it+1),ct=pt-1-c),dt>=0&&(j=this.m_reverseHistory[dt],c=j[0],ht=1,ut=j.length-1)}while(--dt>=-1);lt=gt.getChanges()}return this.ConcatenateChanges(at,lt)}ComputeRecursionPoint(e,i,o,a,c,d,_){let b=0,k=0,j=0,_e=0,et=0,tt=0;e--,o--,c[0]=0,d[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const it=i-e+(a-o),st=it+1,ot=new Int32Array(st),nt=new Int32Array(st),rt=a-o,at=i-e,lt=e-o,gt=i-a,ut=(at-rt)%2===0;ot[rt]=e,nt[at]=i,_[0]=!1;for(let ct=1;ct<=it/2+1;ct++){let ft=0,dt=0;j=this.ClipDiagonalBound(rt-ct,ct,rt,st),_e=this.ClipDiagonalBound(rt+ct,ct,rt,st);for(let mt=j;mt<=_e;mt+=2){mt===j||mt<_e&&ot[mt-1]<ot[mt+1]?b=ot[mt+1]:b=ot[mt-1]+1,k=b-(mt-rt)-lt;const _t=b;for(;b<i&&k<a&&this.ElementsAreEqual(b+1,k+1);)b++,k++;if(ot[mt]=b,b+k>ft+dt&&(ft=b,dt=k),!ut&&Math.abs(mt-at)<=ct-1&&b>=nt[mt])return c[0]=b,d[0]=k,_t<=nt[mt]&&1447>0&&ct<=1447+1?this.WALKTRACE(rt,j,_e,lt,at,et,tt,gt,ot,nt,b,i,c,k,a,d,ut,_):null}const pt=(ft-e+(dt-o)-ct)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(ft,pt))return _[0]=!0,c[0]=ft,d[0]=dt,pt>0&&1447>0&&ct<=1447+1?this.WALKTRACE(rt,j,_e,lt,at,et,tt,gt,ot,nt,b,i,c,k,a,d,ut,_):(e++,o++,[new DiffChange(e,i-e+1,o,a-o+1)]);et=this.ClipDiagonalBound(at-ct,ct,at,st),tt=this.ClipDiagonalBound(at+ct,ct,at,st);for(let mt=et;mt<=tt;mt+=2){mt===et||mt<tt&&nt[mt-1]>=nt[mt+1]?b=nt[mt+1]-1:b=nt[mt-1],k=b-(mt-at)-gt;const _t=b;for(;b>e&&k>o&&this.ElementsAreEqual(b,k);)b--,k--;if(nt[mt]=b,ut&&Math.abs(mt-rt)<=ct&&b<=ot[mt])return c[0]=b,d[0]=k,_t>=ot[mt]&&1447>0&&ct<=1447+1?this.WALKTRACE(rt,j,_e,lt,at,et,tt,gt,ot,nt,b,i,c,k,a,d,ut,_):null}if(ct<=1447){let mt=new Int32Array(_e-j+2);mt[0]=rt-j+1,MyArray.Copy2(ot,j,mt,1,_e-j+1),this.m_forwardHistory.push(mt),mt=new Int32Array(tt-et+2),mt[0]=at-et+1,MyArray.Copy2(nt,et,mt,1,tt-et+1),this.m_reverseHistory.push(mt)}}return this.WALKTRACE(rt,j,_e,lt,at,et,tt,gt,ot,nt,b,i,c,k,a,d,ut,_)}PrettifyChanges(e){for(let i=0;i<e.length;i++){const o=e[i],a=i<e.length-1?e[i+1].originalStart:this._originalElementsOrHash.length,c=i<e.length-1?e[i+1].modifiedStart:this._modifiedElementsOrHash.length,d=o.originalLength>0,_=o.modifiedLength>0;for(;o.originalStart+o.originalLength<a&&o.modifiedStart+o.modifiedLength<c&&(!d||this.OriginalElementsAreEqual(o.originalStart,o.originalStart+o.originalLength))&&(!_||this.ModifiedElementsAreEqual(o.modifiedStart,o.modifiedStart+o.modifiedLength));){const k=this.ElementsAreStrictEqual(o.originalStart,o.modifiedStart);if(this.ElementsAreStrictEqual(o.originalStart+o.originalLength,o.modifiedStart+o.modifiedLength)&&!k)break;o.originalStart++,o.modifiedStart++}const b=[null];if(i<e.length-1&&this.ChangesOverlap(e[i],e[i+1],b)){e[i]=b[0],e.splice(i+1,1),i--;continue}}for(let i=e.length-1;i>=0;i--){const o=e[i];let a=0,c=0;if(i>0){const _e=e[i-1];a=_e.originalStart+_e.originalLength,c=_e.modifiedStart+_e.modifiedLength}const d=o.originalLength>0,_=o.modifiedLength>0;let b=0,k=this._boundaryScore(o.originalStart,o.originalLength,o.modifiedStart,o.modifiedLength);for(let _e=1;;_e++){const et=o.originalStart-_e,tt=o.modifiedStart-_e;if(et<a||tt<c||d&&!this.OriginalElementsAreEqual(et,et+o.originalLength)||_&&!this.ModifiedElementsAreEqual(tt,tt+o.modifiedLength))break;const st=(et===a&&tt===c?5:0)+this._boundaryScore(et,o.originalLength,tt,o.modifiedLength);st>k&&(k=st,b=_e)}o.originalStart-=b,o.modifiedStart-=b;const j=[null];if(i>0&&this.ChangesOverlap(e[i-1],e[i],j)){e[i-1]=j[0],e.splice(i,1),i++;continue}}if(this._hasStrings)for(let i=1,o=e.length;i<o;i++){const a=e[i-1],c=e[i],d=c.originalStart-a.originalStart-a.originalLength,_=a.originalStart,b=c.originalStart+c.originalLength,k=b-_,j=a.modifiedStart,_e=c.modifiedStart+c.modifiedLength,et=_e-j;if(d<5&&k<20&&et<20){const tt=this._findBetterContiguousSequence(_,k,j,et,d);if(tt){const[it,st]=tt;(it!==a.originalStart+a.originalLength||st!==a.modifiedStart+a.modifiedLength)&&(a.originalLength=it-a.originalStart,a.modifiedLength=st-a.modifiedStart,c.originalStart=it+d,c.modifiedStart=st+d,c.originalLength=b-c.originalStart,c.modifiedLength=_e-c.modifiedStart)}}}return e}_findBetterContiguousSequence(e,i,o,a,c){if(i<c||a<c)return null;const d=e+i-c+1,_=o+a-c+1;let b=0,k=0,j=0;for(let _e=e;_e<d;_e++)for(let et=o;et<_;et++){const tt=this._contiguousSequenceScore(_e,et,c);tt>0&&tt>b&&(b=tt,k=_e,j=et)}return b>0?[k,j]:null}_contiguousSequenceScore(e,i,o){let a=0;for(let c=0;c<o;c++){if(!this.ElementsAreEqual(e+c,i+c))return 0;a+=this._originalStringElements[e+c].length}return a}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,i){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(i>0){const o=e+i;if(this._OriginalIsBoundary(o-1)||this._OriginalIsBoundary(o))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,i){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(i>0){const o=e+i;if(this._ModifiedIsBoundary(o-1)||this._ModifiedIsBoundary(o))return!0}return!1}_boundaryScore(e,i,o,a){const c=this._OriginalRegionIsBoundary(e,i)?1:0,d=this._ModifiedRegionIsBoundary(o,a)?1:0;return c+d}ConcatenateChanges(e,i){const o=[];if(e.length===0||i.length===0)return i.length>0?i:e;if(this.ChangesOverlap(e[e.length-1],i[0],o)){const a=new Array(e.length+i.length-1);return MyArray.Copy(e,0,a,0,e.length-1),a[e.length-1]=o[0],MyArray.Copy(i,1,a,e.length,i.length-1),a}else{const a=new Array(e.length+i.length);return MyArray.Copy(e,0,a,0,e.length),MyArray.Copy(i,0,a,e.length,i.length),a}}ChangesOverlap(e,i,o){if(Debug.Assert(e.originalStart<=i.originalStart,"Left change is not less than or equal to right change"),Debug.Assert(e.modifiedStart<=i.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=i.originalStart||e.modifiedStart+e.modifiedLength>=i.modifiedStart){const a=e.originalStart;let c=e.originalLength;const d=e.modifiedStart;let _=e.modifiedLength;return e.originalStart+e.originalLength>=i.originalStart&&(c=i.originalStart+i.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=i.modifiedStart&&(_=i.modifiedStart+i.modifiedLength-e.modifiedStart),o[0]=new DiffChange(a,c,d,_),!0}else return o[0]=null,!1}ClipDiagonalBound(e,i,o,a){if(e>=0&&e<a)return e;const c=o,d=a-o-1,_=i%2===0;if(e<0){const b=c%2===0;return _===b?0:1}else{const b=d%2===0;return _===b?a-1:a-2}}}const MINIMUM_MATCHING_CHARACTER_LENGTH=3;function computeDiff(s,e,i,o){return new LcsDiff(s,e,i).ComputeDiff(o)}class LineSequence{constructor(e){const i=[],o=[];for(let a=0,c=e.length;a<c;a++)i[a]=getFirstNonBlankColumn(e[a],1),o[a]=getLastNonBlankColumn(e[a],1);this.lines=e,this._startColumns=i,this._endColumns=o}getElements(){const e=[];for(let i=0,o=this.lines.length;i<o;i++)e[i]=this.lines[i].substring(this._startColumns[i]-1,this._endColumns[i]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,i,o){const a=[],c=[],d=[];let _=0;for(let b=i;b<=o;b++){const k=this.lines[b],j=e?this._startColumns[b]:1,_e=e?this._endColumns[b]:k.length+1;for(let et=j;et<_e;et++)a[_]=k.charCodeAt(et-1),c[_]=b+1,d[_]=et,_++;!e&&b<o&&(a[_]=10,c[_]=b+1,d[_]=k.length+1,_++)}return new CharSequence(a,c,d)}}class CharSequence{constructor(e,i,o){this._charCodes=e,this._lineNumbers=i,this._columns=o}toString(){return"["+this._charCodes.map((e,i)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[i]},${this._columns[i]})`).join(", ")+"]"}_assertIndex(e,i){if(e<0||e>=i.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class CharChange{constructor(e,i,o,a,c,d,_,b){this.originalStartLineNumber=e,this.originalStartColumn=i,this.originalEndLineNumber=o,this.originalEndColumn=a,this.modifiedStartLineNumber=c,this.modifiedStartColumn=d,this.modifiedEndLineNumber=_,this.modifiedEndColumn=b}static createFromDiffChange(e,i,o){const a=i.getStartLineNumber(e.originalStart),c=i.getStartColumn(e.originalStart),d=i.getEndLineNumber(e.originalStart+e.originalLength-1),_=i.getEndColumn(e.originalStart+e.originalLength-1),b=o.getStartLineNumber(e.modifiedStart),k=o.getStartColumn(e.modifiedStart),j=o.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),_e=o.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new CharChange(a,c,d,_,b,k,j,_e)}}function postProcessCharChanges(s){if(s.length<=1)return s;const e=[s[0]];let i=e[0];for(let o=1,a=s.length;o<a;o++){const c=s[o],d=c.originalStart-(i.originalStart+i.originalLength),_=c.modifiedStart-(i.modifiedStart+i.modifiedLength);Math.min(d,_)<MINIMUM_MATCHING_CHARACTER_LENGTH?(i.originalLength=c.originalStart+c.originalLength-i.originalStart,i.modifiedLength=c.modifiedStart+c.modifiedLength-i.modifiedStart):(e.push(c),i=c)}return e}class LineChange{constructor(e,i,o,a,c){this.originalStartLineNumber=e,this.originalEndLineNumber=i,this.modifiedStartLineNumber=o,this.modifiedEndLineNumber=a,this.charChanges=c}static createFromDiffResult(e,i,o,a,c,d,_){let b,k,j,_e,et;if(i.originalLength===0?(b=o.getStartLineNumber(i.originalStart)-1,k=0):(b=o.getStartLineNumber(i.originalStart),k=o.getEndLineNumber(i.originalStart+i.originalLength-1)),i.modifiedLength===0?(j=a.getStartLineNumber(i.modifiedStart)-1,_e=0):(j=a.getStartLineNumber(i.modifiedStart),_e=a.getEndLineNumber(i.modifiedStart+i.modifiedLength-1)),d&&i.originalLength>0&&i.originalLength<20&&i.modifiedLength>0&&i.modifiedLength<20&&c()){const tt=o.createCharSequence(e,i.originalStart,i.originalStart+i.originalLength-1),it=a.createCharSequence(e,i.modifiedStart,i.modifiedStart+i.modifiedLength-1);if(tt.getElements().length>0&&it.getElements().length>0){let st=computeDiff(tt,it,c,!0).changes;_&&(st=postProcessCharChanges(st)),et=[];for(let ot=0,nt=st.length;ot<nt;ot++)et.push(CharChange.createFromDiffChange(st[ot],tt,it))}}return new LineChange(b,k,j,_e,et)}}class DiffComputer{constructor(e,i,o){this.shouldComputeCharChanges=o.shouldComputeCharChanges,this.shouldPostProcessCharChanges=o.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=o.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=o.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=i,this.original=new LineSequence(e),this.modified=new LineSequence(i),this.continueLineDiff=createContinueProcessingPredicate(o.maxComputationTime),this.continueCharDiff=createContinueProcessingPredicate(o.maxComputationTime===0?0:Math.min(o.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=computeDiff(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),i=e.changes,o=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const _=[];for(let b=0,k=i.length;b<k;b++)_.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,i[b],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:o,changes:_}}const a=[];let c=0,d=0;for(let _=-1,b=i.length;_<b;_++){const k=_+1<b?i[_+1]:null,j=k?k.originalStart:this.originalLines.length,_e=k?k.modifiedStart:this.modifiedLines.length;for(;c<j&&d<_e;){const et=this.originalLines[c],tt=this.modifiedLines[d];if(et!==tt){{let it=getFirstNonBlankColumn(et,1),st=getFirstNonBlankColumn(tt,1);for(;it>1&&st>1;){const ot=et.charCodeAt(it-2),nt=tt.charCodeAt(st-2);if(ot!==nt)break;it--,st--}(it>1||st>1)&&this._pushTrimWhitespaceCharChange(a,c+1,1,it,d+1,1,st)}{let it=getLastNonBlankColumn(et,1),st=getLastNonBlankColumn(tt,1);const ot=et.length+1,nt=tt.length+1;for(;it<ot&&st<nt;){const rt=et.charCodeAt(it-1),at=et.charCodeAt(st-1);if(rt!==at)break;it++,st++}(it<ot||st<nt)&&this._pushTrimWhitespaceCharChange(a,c+1,it,ot,d+1,st,nt)}}c++,d++}k&&(a.push(LineChange.createFromDiffResult(this.shouldIgnoreTrimWhitespace,k,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),c+=k.originalLength,d+=k.modifiedLength)}return{quitEarly:o,changes:a}}_pushTrimWhitespaceCharChange(e,i,o,a,c,d,_){if(this._mergeTrimWhitespaceCharChange(e,i,o,a,c,d,_))return;let b;this.shouldComputeCharChanges&&(b=[new CharChange(i,o,i,a,c,d,c,_)]),e.push(new LineChange(i,i,c,c,b))}_mergeTrimWhitespaceCharChange(e,i,o,a,c,d,_){const b=e.length;if(b===0)return!1;const k=e[b-1];return k.originalEndLineNumber===0||k.modifiedEndLineNumber===0?!1:k.originalEndLineNumber+1===i&&k.modifiedEndLineNumber+1===c?(k.originalEndLineNumber=i,k.modifiedEndLineNumber=c,this.shouldComputeCharChanges&&k.charChanges&&k.charChanges.push(new CharChange(i,o,i,a,c,d,c,_)),!0):!1}}function getFirstNonBlankColumn(s,e){const i=firstNonWhitespaceIndex(s);return i===-1?e:i+1}function getLastNonBlankColumn(s,e){const i=lastNonWhitespaceIndex(s);return i===-1?e:i+2}function createContinueProcessingPredicate(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}function toUint8(s){return s<0?0:s>255?255:s|0}function toUint32(s){return s<0?0:s>4294967295?4294967295:s|0}class PrefixSumComputer{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,i){e=toUint32(e);const o=this.values,a=this.prefixSum,c=i.length;return c===0?!1:(this.values=new Uint32Array(o.length+c),this.values.set(o.subarray(0,e),0),this.values.set(o.subarray(e),e+c),this.values.set(i,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(a.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,i){return e=toUint32(e),i=toUint32(i),this.values[e]===i?!1:(this.values[e]=i,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,i){e=toUint32(e),i=toUint32(i);const o=this.values,a=this.prefixSum;if(e>=o.length)return!1;const c=o.length-e;return i>=c&&(i=c),i===0?!1:(this.values=new Uint32Array(o.length-i),this.values.set(o.subarray(0,e),0),this.values.set(o.subarray(e+i),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(a.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=toUint32(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let i=this.prefixSumValidIndex[0]+1;i===0&&(this.prefixSum[0]=this.values[0],i++),e>=this.values.length&&(e=this.values.length-1);for(let o=i;o<=e;o++)this.prefixSum[o]=this.prefixSum[o-1]+this.values[o];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let i=0,o=this.values.length-1,a=0,c=0,d=0;for(;i<=o;)if(a=i+(o-i)/2|0,c=this.prefixSum[a],d=c-this.values[a],e<d)o=a-1;else if(e>=c)i=a+1;else break;return new PrefixSumIndexOfResult(a,e-d)}}class ConstantTimePrefixSumComputer{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const i=this._indexBySum[e],o=i>0?this._prefixSum[i-1]:0;return new PrefixSumIndexOfResult(i,e-o)}removeValues(e,i){this._values.splice(e,i),this._invalidate(e)}insertValues(e,i){this._values=arrayInsert(this._values,e,i),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,i=this._values.length;e<i;e++){const o=this._values[e],a=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=a+o;for(let c=0;c<o;c++)this._indexBySum[a+c]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,i){this._values[e]!==i&&(this._values[e]=i,this._invalidate(e))}}class PrefixSumIndexOfResult{constructor(e,i){this.index=e,this.remainder=i,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=i}}class MirrorTextModel{constructor(e,i,o,a){this._uri=e,this._lines=i,this._eol=o,this._versionId=a,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const i=e.changes;for(const o of i)this._acceptDeleteRange(o.range),this._acceptInsertText(new Position$1(o.range.startLineNumber,o.range.startColumn),o.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,i=this._lines.length,o=new Uint32Array(i);for(let a=0;a<i;a++)o[a]=this._lines[a].length+e;this._lineStarts=new PrefixSumComputer(o)}}_setLineText(e,i){this._lines[e]=i,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,i){if(i.length===0)return;const o=splitLines(i);if(o.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+o[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}o[o.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+o[0]);const a=new Uint32Array(o.length-1);for(let c=1;c<o.length;c++)this._lines.splice(e.lineNumber+c-1,0,o[c]),a[c-1]=o[c].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,a)}}class CharacterClassifier{constructor(e){const i=toUint8(e);this._defaultValue=i,this._asciiMap=CharacterClassifier._createAsciiMap(i),this._map=new Map}static _createAsciiMap(e){const i=new Uint8Array(256);for(let o=0;o<256;o++)i[o]=e;return i}set(e,i){const o=toUint8(i);e>=0&&e<256?this._asciiMap[e]=o:this._map.set(e,o)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Uint8Matrix{constructor(e,i,o){const a=new Uint8Array(e*i);for(let c=0,d=e*i;c<d;c++)a[c]=o;this._data=a,this.rows=e,this.cols=i}get(e,i){return this._data[e*this.cols+i]}set(e,i,o){this._data[e*this.cols+i]=o}}class StateMachine{constructor(e){let i=0,o=0;for(let c=0,d=e.length;c<d;c++){const[_,b,k]=e[c];b>i&&(i=b),_>o&&(o=_),k>o&&(o=k)}i++,o++;const a=new Uint8Matrix(o,i,0);for(let c=0,d=e.length;c<d;c++){const[_,b,k]=e[c];a.set(_,b,k)}this._states=a,this._maxCharCode=i}nextState(e,i){return i<0||i>=this._maxCharCode?0:this._states.get(e,i)}}let _stateMachine=null;function getStateMachine(){return _stateMachine===null&&(_stateMachine=new StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),_stateMachine}let _classifier=null;function getClassifier(){if(_classifier===null){_classifier=new CharacterClassifier(0);const s=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<s.length;i++)_classifier.set(s.charCodeAt(i),1);const e=".,;:";for(let i=0;i<e.length;i++)_classifier.set(e.charCodeAt(i),2)}return _classifier}class LinkComputer{static _createLink(e,i,o,a,c){let d=c-1;do{const _=i.charCodeAt(d);if(e.get(_)!==2)break;d--}while(d>a);if(a>0){const _=i.charCodeAt(a-1),b=i.charCodeAt(d);(_===40&&b===41||_===91&&b===93||_===123&&b===125)&&d--}return{range:{startLineNumber:o,startColumn:a+1,endLineNumber:o,endColumn:d+2},url:i.substring(a,d+1)}}static computeLinks(e,i=getStateMachine()){const o=getClassifier(),a=[];for(let c=1,d=e.getLineCount();c<=d;c++){const _=e.getLineContent(c),b=_.length;let k=0,j=0,_e=0,et=1,tt=!1,it=!1,st=!1,ot=!1;for(;k<b;){let nt=!1;const rt=_.charCodeAt(k);if(et===13){let at;switch(rt){case 40:tt=!0,at=0;break;case 41:at=tt?0:1;break;case 91:st=!0,it=!0,at=0;break;case 93:st=!1,at=it?0:1;break;case 123:ot=!0,at=0;break;case 125:at=ot?0:1;break;case 39:at=_e===39?1:0;break;case 34:at=_e===34?1:0;break;case 96:at=_e===96?1:0;break;case 42:at=_e===42?1:0;break;case 124:at=_e===124?1:0;break;case 32:at=st?0:1;break;default:at=o.get(rt)}at===1&&(a.push(LinkComputer._createLink(o,_,c,j,k)),nt=!0)}else if(et===12){let at;rt===91?(it=!0,at=0):at=o.get(rt),at===1?nt=!0:et=13}else et=i.nextState(et,rt),et===0&&(nt=!0);nt&&(et=1,tt=!1,it=!1,ot=!1,j=k+1,_e=rt),k++}et===13&&a.push(LinkComputer._createLink(o,_,c,j,b))}return a}}function computeLinks(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:LinkComputer.computeLinks(s)}class BasicInplaceReplace{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,i,o,a,c){if(e&&i){const d=this.doNavigateValueSet(i,c);if(d)return{range:e,value:d}}if(o&&a){const d=this.doNavigateValueSet(a,c);if(d)return{range:o,value:d}}return null}doNavigateValueSet(e,i){const o=this.numberReplace(e,i);return o!==null?o:this.textReplace(e,i)}numberReplace(e,i){const o=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let a=Number(e);const c=parseFloat(e);return!isNaN(a)&&!isNaN(c)&&a===c?a===0&&!i?null:(a=Math.floor(a*o),a+=i?o:-o,String(a/o)):null}textReplace(e,i){return this.valueSetsReplace(this._defaultValueSet,e,i)}valueSetsReplace(e,i,o){let a=null;for(let c=0,d=e.length;a===null&&c<d;c++)a=this.valueSetReplace(e[c],i,o);return a}valueSetReplace(e,i,o){let a=e.indexOf(i);return a>=0?(a+=o?1:-1,a<0?a=e.length-1:a%=e.length,e[a]):null}}BasicInplaceReplace.INSTANCE=new BasicInplaceReplace;class WordCharacterClassifier extends CharacterClassifier{constructor(e){super(0);for(let i=0,o=e.length;i<o;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}}function once(s){const e={};return i=>(e.hasOwnProperty(i)||(e[i]=s(i)),e[i])}const getMapForWordSeparators=once(s=>new WordCharacterClassifier(s)),LIMIT_FIND_COUNT$1=999;class SearchParams{constructor(e,i,o,a){this.searchString=e,this.isRegex=i,this.matchCase=o,this.wordSeparators=a}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=isMultilineRegexSource(this.searchString):e=this.searchString.indexOf(`
`)>=0;let i=null;try{i=createRegExp(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!i)return null;let o=!this.isRegex&&!e;return o&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(o=this.matchCase),new SearchData(i,this.wordSeparators?getMapForWordSeparators(this.wordSeparators):null,o?this.searchString:null)}}function isMultilineRegexSource(s){if(!s||s.length===0)return!1;for(let e=0,i=s.length;e<i;e++){const o=s.charCodeAt(e);if(o===10)return!0;if(o===92){if(e++,e>=i)break;const a=s.charCodeAt(e);if(a===110||a===114||a===87)return!0}}return!1}function createFindMatch(s,e,i){if(!i)return new FindMatch(s,null);const o=[];for(let a=0,c=e.length;a<c;a++)o[a]=e[a];return new FindMatch(s,o)}class LineFeedCounter{constructor(e){const i=[];let o=0;for(let a=0,c=e.length;a<c;a++)e.charCodeAt(a)===10&&(i[o++]=a);this._lineFeedsOffsets=i}findLineFeedCountBeforeOffset(e){const i=this._lineFeedsOffsets;let o=0,a=i.length-1;if(a===-1||e<=i[0])return 0;for(;o<a;){const c=o+((a-o)/2>>0);i[c]>=e?a=c-1:i[c+1]>=e?(o=c,a=c):o=c+1}return o+1}}class TextModelSearch{static findMatches(e,i,o,a,c){const d=i.parseSearchRequest();return d?d.regex.multiline?this._doFindMatchesMultiline(e,o,new Searcher(d.wordSeparators,d.regex),a,c):this._doFindMatchesLineByLine(e,o,d,a,c):[]}static _getMultilineMatchRange(e,i,o,a,c,d){let _,b=0;a?(b=a.findLineFeedCountBeforeOffset(c),_=i+c+b):_=i+c;let k;if(a){const tt=a.findLineFeedCountBeforeOffset(c+d.length)-b;k=_+d.length+tt}else k=_+d.length;const j=e.getPositionAt(_),_e=e.getPositionAt(k);return new Range$2(j.lineNumber,j.column,_e.lineNumber,_e.column)}static _doFindMatchesMultiline(e,i,o,a,c){const d=e.getOffsetAt(i.getStartPosition()),_=e.getValueInRange(i,1),b=e.getEOL()===`\r
`?new LineFeedCounter(_):null,k=[];let j=0,_e;for(o.reset(0);_e=o.next(_);)if(k[j++]=createFindMatch(this._getMultilineMatchRange(e,d,_,b,_e.index,_e[0]),_e,a),j>=c)return k;return k}static _doFindMatchesLineByLine(e,i,o,a,c){const d=[];let _=0;if(i.startLineNumber===i.endLineNumber){const k=e.getLineContent(i.startLineNumber).substring(i.startColumn-1,i.endColumn-1);return _=this._findMatchesInLine(o,k,i.startLineNumber,i.startColumn-1,_,d,a,c),d}const b=e.getLineContent(i.startLineNumber).substring(i.startColumn-1);_=this._findMatchesInLine(o,b,i.startLineNumber,i.startColumn-1,_,d,a,c);for(let k=i.startLineNumber+1;k<i.endLineNumber&&_<c;k++)_=this._findMatchesInLine(o,e.getLineContent(k),k,0,_,d,a,c);if(_<c){const k=e.getLineContent(i.endLineNumber).substring(0,i.endColumn-1);_=this._findMatchesInLine(o,k,i.endLineNumber,0,_,d,a,c)}return d}static _findMatchesInLine(e,i,o,a,c,d,_,b){const k=e.wordSeparators;if(!_&&e.simpleSearch){const et=e.simpleSearch,tt=et.length,it=i.length;let st=-tt;for(;(st=i.indexOf(et,st+tt))!==-1;)if((!k||isValidMatch(k,i,it,st,tt))&&(d[c++]=new FindMatch(new Range$2(o,st+1+a,o,st+1+tt+a),null),c>=b))return c;return c}const j=new Searcher(e.wordSeparators,e.regex);let _e;j.reset(0);do if(_e=j.next(i),_e&&(d[c++]=createFindMatch(new Range$2(o,_e.index+1+a,o,_e.index+1+_e[0].length+a),_e,_),c>=b))return c;while(_e);return c}static findNextMatch(e,i,o,a){const c=i.parseSearchRequest();if(!c)return null;const d=new Searcher(c.wordSeparators,c.regex);return c.regex.multiline?this._doFindNextMatchMultiline(e,o,d,a):this._doFindNextMatchLineByLine(e,o,d,a)}static _doFindNextMatchMultiline(e,i,o,a){const c=new Position$1(i.lineNumber,1),d=e.getOffsetAt(c),_=e.getLineCount(),b=e.getValueInRange(new Range$2(c.lineNumber,c.column,_,e.getLineMaxColumn(_)),1),k=e.getEOL()===`\r
`?new LineFeedCounter(b):null;o.reset(i.column-1);const j=o.next(b);return j?createFindMatch(this._getMultilineMatchRange(e,d,b,k,j.index,j[0]),j,a):i.lineNumber!==1||i.column!==1?this._doFindNextMatchMultiline(e,new Position$1(1,1),o,a):null}static _doFindNextMatchLineByLine(e,i,o,a){const c=e.getLineCount(),d=i.lineNumber,_=e.getLineContent(d),b=this._findFirstMatchInLine(o,_,d,i.column,a);if(b)return b;for(let k=1;k<=c;k++){const j=(d+k-1)%c,_e=e.getLineContent(j+1),et=this._findFirstMatchInLine(o,_e,j+1,1,a);if(et)return et}return null}static _findFirstMatchInLine(e,i,o,a,c){e.reset(a-1);const d=e.next(i);return d?createFindMatch(new Range$2(o,d.index+1,o,d.index+1+d[0].length),d,c):null}static findPreviousMatch(e,i,o,a){const c=i.parseSearchRequest();if(!c)return null;const d=new Searcher(c.wordSeparators,c.regex);return c.regex.multiline?this._doFindPreviousMatchMultiline(e,o,d,a):this._doFindPreviousMatchLineByLine(e,o,d,a)}static _doFindPreviousMatchMultiline(e,i,o,a){const c=this._doFindMatchesMultiline(e,new Range$2(1,1,i.lineNumber,i.column),o,a,10*LIMIT_FIND_COUNT$1);if(c.length>0)return c[c.length-1];const d=e.getLineCount();return i.lineNumber!==d||i.column!==e.getLineMaxColumn(d)?this._doFindPreviousMatchMultiline(e,new Position$1(d,e.getLineMaxColumn(d)),o,a):null}static _doFindPreviousMatchLineByLine(e,i,o,a){const c=e.getLineCount(),d=i.lineNumber,_=e.getLineContent(d).substring(0,i.column-1),b=this._findLastMatchInLine(o,_,d,a);if(b)return b;for(let k=1;k<=c;k++){const j=(c+d-k-1)%c,_e=e.getLineContent(j+1),et=this._findLastMatchInLine(o,_e,j+1,a);if(et)return et}return null}static _findLastMatchInLine(e,i,o,a){let c=null,d;for(e.reset(0);d=e.next(i);)c=createFindMatch(new Range$2(o,d.index+1,o,d.index+1+d[0].length),d,a);return c}}function leftIsWordBounday(s,e,i,o,a){if(o===0)return!0;const c=e.charCodeAt(o-1);if(s.get(c)!==0||c===13||c===10)return!0;if(a>0){const d=e.charCodeAt(o);if(s.get(d)!==0)return!0}return!1}function rightIsWordBounday(s,e,i,o,a){if(o+a===i)return!0;const c=e.charCodeAt(o+a);if(s.get(c)!==0||c===13||c===10)return!0;if(a>0){const d=e.charCodeAt(o+a-1);if(s.get(d)!==0)return!0}return!1}function isValidMatch(s,e,i,o,a){return leftIsWordBounday(s,e,i,o,a)&&rightIsWordBounday(s,e,i,o,a)}class Searcher{constructor(e,i){this._wordSeparators=e,this._searchRegex=i,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const i=e.length;let o;do{if(this._prevMatchStartIndex+this._prevMatchLength===i||(o=this._searchRegex.exec(e),!o))return null;const a=o.index,c=o[0].length;if(a===this._prevMatchStartIndex&&c===this._prevMatchLength){if(c===0){getNextCodePoint(e,i,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=a,this._prevMatchLength=c,!this._wordSeparators||isValidMatch(this._wordSeparators,e,i,a,c))return o}while(o);return null}}class UnicodeTextModelHighlighter{static computeUnicodeHighlights(e,i,o){const a=o?o.startLineNumber:1,c=o?o.endLineNumber:e.getLineCount(),d=new CodePointHighlighter(i),_=d.getCandidateCodePoints();let b;_==="allNonBasicAscii"?b=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):b=new RegExp(`${buildRegExpCharClassExpr(Array.from(_))}`,"g");const k=new Searcher(null,b),j=[];let _e=!1,et,tt=0,it=0,st=0;e:for(let ot=a,nt=c;ot<=nt;ot++){const rt=e.getLineContent(ot),at=rt.length;k.reset(0);do if(et=k.next(rt),et){let lt=et.index,gt=et.index+et[0].length;if(lt>0){const ft=rt.charCodeAt(lt-1);isHighSurrogate(ft)&&lt--}if(gt+1<at){const ft=rt.charCodeAt(gt-1);isHighSurrogate(ft)&&gt++}const ht=rt.substring(lt,gt),ut=getWordAtText(lt+1,DEFAULT_WORD_REGEXP,rt,0),ct=d.shouldHighlightNonBasicASCII(ht,ut?ut.word:null);if(ct!==0){ct===3?tt++:ct===2?it++:ct===1?st++:assertNever();const ft=1e3;if(j.length>=ft){_e=!0;break e}j.push(new Range$2(ot,lt+1,ot,gt+1))}}while(et)}return{ranges:j,hasMore:_e,ambiguousCharacterCount:tt,invisibleCharacterCount:it,nonBasicAsciiCharacterCount:st}}static computeUnicodeHighlightReason(e,i){const o=new CodePointHighlighter(i);switch(o.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const c=e.codePointAt(0),d=o.ambiguousCharacters.getPrimaryConfusable(c),_=AmbiguousCharacters.getLocales().filter(b=>!AmbiguousCharacters.getInstance(new Set([...i.allowedLocales,b])).isAmbiguous(c));return{kind:0,confusableWith:String.fromCodePoint(d),notAmbiguousInLocales:_}}case 1:return{kind:2}}}}function buildRegExpCharClassExpr(s,e){return`[${escapeRegExpCharacters(s.map(o=>String.fromCodePoint(o)).join(""))}]`}class CodePointHighlighter{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=AmbiguousCharacters.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const i of InvisibleCharacters.codePoints)isAllowedInvisibleCharacter(String.fromCodePoint(i))||e.add(i);if(this.options.ambiguousCharacters)for(const i of this.ambiguousCharacters.getConfusableCodePoints())e.add(i);for(const i of this.allowedCodePoints)e.delete(i);return e}shouldHighlightNonBasicASCII(e,i){const o=e.codePointAt(0);if(this.allowedCodePoints.has(o))return 0;if(this.options.nonBasicASCII)return 1;let a=!1,c=!1;if(i)for(const d of i){const _=d.codePointAt(0),b=isBasicASCII(d);a=a||b,!b&&!this.ambiguousCharacters.isAmbiguous(_)&&!InvisibleCharacters.isInvisibleCharacter(_)&&(c=!0)}return!a&&c?0:this.options.invisibleCharacters&&!isAllowedInvisibleCharacter(e)&&InvisibleCharacters.isInvisibleCharacter(o)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(o)?3:0}}function isAllowedInvisibleCharacter(s){return s===" "||s===`
`||s==="	"}var __awaiter$o=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class MirrorModel extends MirrorTextModel{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,i){const o=getWordAtText(e.column,ensureValidWordDefinition(i),this._lines[e.lineNumber-1],0);return o?new Range$2(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn):null}words(e){const i=this._lines,o=this._wordenize.bind(this);let a=0,c="",d=0,_=[];return{*[Symbol.iterator](){for(;;)if(d<_.length){const b=c.substring(_[d].start,_[d].end);d+=1,yield b}else if(a<i.length)c=i[a],_=o(c,e),d=0,a+=1;else break}}}getLineWords(e,i){const o=this._lines[e-1],a=this._wordenize(o,i),c=[];for(const d of a)c.push({word:o.substring(d.start,d.end),startColumn:d.start+1,endColumn:d.end+1});return c}_wordenize(e,i){const o=[];let a;for(i.lastIndex=0;(a=i.exec(e))&&a[0].length!==0;)o.push({start:a.index,end:a.index+a[0].length});return o}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const i=this._eol,o=e.startLineNumber-1,a=e.endLineNumber-1,c=[];c.push(this._lines[o].substring(e.startColumn-1));for(let d=o+1;d<a;d++)c.push(this._lines[d]);return c.push(this._lines[a].substring(0,e.endColumn-1)),c.join(i)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const i=this._lineStarts.getIndexOf(e),o=this._lines[i.index].length;return{lineNumber:1+i.index,column:1+Math.min(i.remainder,o)}}_validateRange(e){const i=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),o=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return i.lineNumber!==e.startLineNumber||i.column!==e.startColumn||o.lineNumber!==e.endLineNumber||o.column!==e.endColumn?{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:o.lineNumber,endColumn:o.column}:e}_validatePosition(e){if(!Position$1.isIPosition(e))throw new Error("bad position");let{lineNumber:i,column:o}=e,a=!1;if(i<1)i=1,o=1,a=!0;else if(i>this._lines.length)i=this._lines.length,o=this._lines[i-1].length+1,a=!0;else{const c=this._lines[i-1].length+1;o<1?(o=1,a=!0):o>c&&(o=c,a=!0)}return a?{lineNumber:i,column:o}:e}}class EditorSimpleWorker{constructor(e,i){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=i,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach(i=>e.push(this._models[i])),e}acceptNewModel(e){this._models[e.url]=new MirrorModel(URI.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,i){if(!this._models[e])return;this._models[e].onEvents(i)}acceptRemovedModel(e){!this._models[e]||delete this._models[e]}computeUnicodeHighlights(e,i,o){return __awaiter$o(this,void 0,void 0,function*(){const a=this._getModel(e);return a?UnicodeTextModelHighlighter.computeUnicodeHighlights(a,i,o):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,i,o,a){return __awaiter$o(this,void 0,void 0,function*(){const c=this._getModel(e),d=this._getModel(i);return!c||!d?null:EditorSimpleWorker.computeDiff(c,d,o,a)})}static computeDiff(e,i,o,a){const c=e.getLinesContent(),d=i.getLinesContent(),b=new DiffComputer(c,d,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:o,shouldMakePrettyDiff:!0,maxComputationTime:a}).computeDiff(),k=b.changes.length>0?!1:this._modelsAreIdentical(e,i);return{quitEarly:b.quitEarly,identical:k,changes:b.changes}}static _modelsAreIdentical(e,i){const o=e.getLineCount(),a=i.getLineCount();if(o!==a)return!1;for(let c=1;c<=o;c++){const d=e.getLineContent(c),_=i.getLineContent(c);if(d!==_)return!1}return!0}computeMoreMinimalEdits(e,i){return __awaiter$o(this,void 0,void 0,function*(){const o=this._getModel(e);if(!o)return i;const a=[];let c;i=i.slice(0).sort((d,_)=>{if(d.range&&_.range)return Range$2.compareRangesUsingStarts(d.range,_.range);const b=d.range?0:1,k=_.range?0:1;return b-k});for(let{range:d,text:_,eol:b}of i){if(typeof b=="number"&&(c=b),Range$2.isEmpty(d)&&!_)continue;const k=o.getValueInRange(d);if(_=_.replace(/\r\n|\n|\r/g,o.eol),k===_)continue;if(Math.max(_.length,k.length)>EditorSimpleWorker._diffLimit){a.push({range:d,text:_});continue}const j=stringDiff(k,_,!1),_e=o.offsetAt(Range$2.lift(d).getStartPosition());for(const et of j){const tt=o.positionAt(_e+et.originalStart),it=o.positionAt(_e+et.originalStart+et.originalLength),st={text:_.substr(et.modifiedStart,et.modifiedLength),range:{startLineNumber:tt.lineNumber,startColumn:tt.column,endLineNumber:it.lineNumber,endColumn:it.column}};o.getValueInRange(st.range)!==st.text&&a.push(st)}}return typeof c=="number"&&a.push({eol:c,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),a})}computeLinks(e){return __awaiter$o(this,void 0,void 0,function*(){const i=this._getModel(e);return i?computeLinks(i):null})}textualSuggest(e,i,o,a){return __awaiter$o(this,void 0,void 0,function*(){const c=new StopWatch(!0),d=new RegExp(o,a),_=new Set;e:for(const b of e){const k=this._getModel(b);if(!!k){for(const j of k.words(d))if(!(j===i||!isNaN(Number(j)))&&(_.add(j),_.size>EditorSimpleWorker._suggestionsLimit))break e}}return{words:Array.from(_),duration:c.elapsed()}})}computeWordRanges(e,i,o,a){return __awaiter$o(this,void 0,void 0,function*(){const c=this._getModel(e);if(!c)return Object.create(null);const d=new RegExp(o,a),_=Object.create(null);for(let b=i.startLineNumber;b<i.endLineNumber;b++){const k=c.getLineWords(b,d);for(const j of k){if(!isNaN(Number(j.word)))continue;let _e=_[j.word];_e||(_e=[],_[j.word]=_e),_e.push({startLineNumber:b,startColumn:j.startColumn,endLineNumber:b,endColumn:j.endColumn})}}return _})}navigateValueSet(e,i,o,a,c){return __awaiter$o(this,void 0,void 0,function*(){const d=this._getModel(e);if(!d)return null;const _=new RegExp(a,c);i.startColumn===i.endColumn&&(i={startLineNumber:i.startLineNumber,startColumn:i.startColumn,endLineNumber:i.endLineNumber,endColumn:i.endColumn+1});const b=d.getValueInRange(i),k=d.getWordAtPosition({lineNumber:i.startLineNumber,column:i.startColumn},_);if(!k)return null;const j=d.getValueInRange(k);return BasicInplaceReplace.INSTANCE.navigateValueSet(i,b,k,j,o)})}loadForeignModule(e,i,o){const d={host:createProxyObject$1(o,(_,b)=>this._host.fhr(_,b)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(d,i),Promise.resolve(getAllMethodNames(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,i){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,i))}catch(o){return Promise.reject(o)}}}EditorSimpleWorker._diffLimit=1e5;EditorSimpleWorker._suggestionsLimit=1e4;typeof importScripts=="function"&&(globals.monaco=createMonacoBaseAPI());const ITextResourceConfigurationService=createDecorator("textResourceConfigurationService"),ITextResourcePropertiesService=createDecorator("textResourcePropertiesService"),ILogService=createDecorator("logService");var LogLevel;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Info=2]="Info",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.Off=6]="Off"})(LogLevel||(LogLevel={}));const DEFAULT_LOG_LEVEL=LogLevel.Info;class AbstractLogger extends Disposable{constructor(){super(...arguments),this.level=DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new Emitter$1)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class ConsoleLogger extends AbstractLogger{constructor(e=DEFAULT_LOG_LEVEL){super(),this.setLevel(e)}trace(e,...i){this.getLevel()<=LogLevel.Trace&&console.log("%cTRACE","color: #888",e,...i)}debug(e,...i){this.getLevel()<=LogLevel.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...i)}info(e,...i){this.getLevel()<=LogLevel.Info&&console.log("%c INFO","color: #33f",e,...i)}error(e,...i){this.getLevel()<=LogLevel.Error&&console.log("%c  ERR","color: #f33",e,...i)}dispose(){}}class LogService extends Disposable{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...i){this.logger.trace(e,...i)}debug(e,...i){this.logger.debug(e,...i)}info(e,...i){this.logger.info(e,...i)}error(e,...i){this.logger.error(e,...i)}}const ILanguageFeaturesService=createDecorator("ILanguageFeaturesService");var __decorate$A=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$u=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$n=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};const STOP_SYNC_MODEL_DELTA_TIME_MS=60*1e3,STOP_WORKER_DELTA_TIME_MS=5*60*1e3;function canSyncModel(s,e){const i=s.getModel(e);return!(!i||i.isTooLargeForSyncing())}let EditorWorkerService=class extends Disposable{constructor(e,i,o,a,c){super(),this._modelService=e,this._workerManager=this._register(new WorkerManager(this._modelService,a)),this._logService=o,this._register(c.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(d,_)=>canSyncModel(this._modelService,d.uri)?this._workerManager.withWorker().then(b=>b.computeLinks(d.uri)).then(b=>b&&{links:b}):Promise.resolve({links:[]})})),this._register(c.completionProvider.register("*",new WordBasedCompletionItemProvider(this._workerManager,i,this._modelService,a)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return canSyncModel(this._modelService,e)}computedUnicodeHighlights(e,i,o){return this._workerManager.withWorker().then(a=>a.computedUnicodeHighlights(e,i,o))}computeDiff(e,i,o,a){return this._workerManager.withWorker().then(c=>c.computeDiff(e,i,o,a))}computeMoreMinimalEdits(e,i){if(isNonEmptyArray(i)){if(!canSyncModel(this._modelService,e))return Promise.resolve(i);const o=StopWatch.create(!0),a=this._workerManager.withWorker().then(c=>c.computeMoreMinimalEdits(e,i));return a.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),o.elapsed())),Promise.race([a,timeout(1e3).then(()=>i)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return canSyncModel(this._modelService,e)}navigateValueSet(e,i,o){return this._workerManager.withWorker().then(a=>a.navigateValueSet(e,i,o))}canComputeWordRanges(e){return canSyncModel(this._modelService,e)}computeWordRanges(e,i){return this._workerManager.withWorker().then(o=>o.computeWordRanges(e,i))}};EditorWorkerService=__decorate$A([__param$u(0,IModelService),__param$u(1,ITextResourceConfigurationService),__param$u(2,ILogService),__param$u(3,ILanguageConfigurationService),__param$u(4,ILanguageFeaturesService)],EditorWorkerService);class WordBasedCompletionItemProvider{constructor(e,i,o,a){this.languageConfigurationService=a,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=i,this._modelService=o}provideCompletionItems(e,i){return __awaiter$n(this,void 0,void 0,function*(){const o=this._configurationService.getValue(e.uri,i,"editor");if(!o.wordBasedSuggestions)return;const a=[];if(o.wordBasedSuggestionsMode==="currentDocument")canSyncModel(this._modelService,e.uri)&&a.push(e.uri);else for(const _e of this._modelService.getModels())!canSyncModel(this._modelService,_e.uri)||(_e===e?a.unshift(_e.uri):(o.wordBasedSuggestionsMode==="allDocuments"||_e.getLanguageId()===e.getLanguageId())&&a.push(_e.uri));if(a.length===0)return;const c=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),d=e.getWordAtPosition(i),_=d?new Range$2(i.lineNumber,d.startColumn,i.lineNumber,d.endColumn):Range$2.fromPositions(i),b=_.setEndPosition(i.lineNumber,i.column),j=yield(yield this._workerManager.withWorker()).textualSuggest(a,d==null?void 0:d.word,c);if(!!j)return{duration:j.duration,suggestions:j.words.map(_e=>({kind:18,label:_e,insertText:_e,range:{insert:b,replace:_}}))}})}}class WorkerManager extends Disposable{constructor(e,i){super(),this.languageConfigurationService=i,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new IntervalTimer).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(STOP_WORKER_DELTA_TIME_MS/2)),this._register(this._modelService.onModelRemoved(a=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>STOP_WORKER_DELTA_TIME_MS&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new EditorWorkerClient(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class EditorModelManager extends Disposable{constructor(e,i,o){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=i,!o){const a=new IntervalTimer;a.cancelAndSet(()=>this._checkStopModelSync(),Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS/2)),this._register(a)}}dispose(){for(const e in this._syncedModels)dispose(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,i){for(const o of e){const a=o.toString();this._syncedModels[a]||this._beginModelSync(o,i),this._syncedModels[a]&&(this._syncedModelsLastUsedTime[a]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),i=[];for(const o in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[o]>STOP_SYNC_MODEL_DELTA_TIME_MS&&i.push(o);for(const o of i)this._stopModelSync(o)}_beginModelSync(e,i){const o=this._modelService.getModel(e);if(!o||!i&&o.isTooLargeForSyncing())return;const a=e.toString();this._proxy.acceptNewModel({url:o.uri.toString(),lines:o.getLinesContent(),EOL:o.getEOL(),versionId:o.getVersionId()});const c=new DisposableStore;c.add(o.onDidChangeContent(d=>{this._proxy.acceptModelChanged(a.toString(),d)})),c.add(o.onWillDispose(()=>{this._stopModelSync(a)})),c.add(toDisposable(()=>{this._proxy.acceptRemovedModel(a)})),this._syncedModels[a]=c}_stopModelSync(e){const i=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],dispose(i)}}class SynchronousWorkerClient{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class EditorWorkerHost{constructor(e){this._workerClient=e}fhr(e,i){return this._workerClient.fhr(e,i)}}class EditorWorkerClient extends Disposable{constructor(e,i,o,a){super(),this.languageConfigurationService=a,this._disposed=!1,this._modelService=e,this._keepIdleModels=i,this._workerFactory=new DefaultWorkerFactory(o),this._worker=null,this._modelManager=null}fhr(e,i){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new SimpleWorkerClient(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new EditorWorkerHost(this)))}catch(e){logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(logOnceWebWorkerWarning(e),this._worker=new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new EditorModelManager(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,i=!1){return __awaiter$n(this,void 0,void 0,function*(){return this._disposed?Promise.reject(canceled()):this._getProxy().then(o=>(this._getOrCreateModelManager(o).ensureSyncedResources(e,i),o))})}computedUnicodeHighlights(e,i,o){return this._withSyncedResources([e]).then(a=>a.computeUnicodeHighlights(e.toString(),i,o))}computeDiff(e,i,o,a){return this._withSyncedResources([e,i],!0).then(c=>c.computeDiff(e.toString(),i.toString(),o,a))}computeMoreMinimalEdits(e,i){return this._withSyncedResources([e]).then(o=>o.computeMoreMinimalEdits(e.toString(),i))}computeLinks(e){return this._withSyncedResources([e]).then(i=>i.computeLinks(e.toString()))}textualSuggest(e,i,o){return __awaiter$n(this,void 0,void 0,function*(){const a=yield this._withSyncedResources(e),c=o.source,d=regExpFlags(o);return a.textualSuggest(e.map(_=>_.toString()),i,c,d)})}computeWordRanges(e,i){return this._withSyncedResources([e]).then(o=>{const a=this._modelService.getModel(e);if(!a)return Promise.resolve(null);const c=this.languageConfigurationService.getLanguageConfiguration(a.getLanguageId()).getWordDefinition(),d=c.source,_=regExpFlags(c);return o.computeWordRanges(e.toString(),i,d,_)})}navigateValueSet(e,i,o){return this._withSyncedResources([e]).then(a=>{const c=this._modelService.getModel(e);if(!c)return null;const d=this.languageConfigurationService.getLanguageConfiguration(c.getLanguageId()).getWordDefinition(),_=d.source,b=regExpFlags(d);return a.navigateValueSet(e.toString(),i,o,_,b)})}dispose(){super.dispose(),this._disposed=!0}}function createWebWorker$1(s,e,i){return new MonacoWebWorkerImpl(s,e,i)}class MonacoWebWorkerImpl extends EditorWorkerClient{constructor(e,i,o){super(e,o.keepIdleModels||!1,o.label,i),this._foreignModuleId=o.moduleId,this._foreignModuleCreateData=o.createData||null,this._foreignModuleHost=o.host||null,this._foreignProxy=null}fhr(e,i){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,i))}catch(o){return Promise.reject(o)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const i=this._foreignModuleHost?getAllMethodNames(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,i).then(o=>{this._foreignModuleCreateData=null;const a=(_,b)=>e.fmr(_,b),c=(_,b)=>function(){const k=Array.prototype.slice.call(arguments,0);return b(_,k)},d={};for(const _ of o)d[_]=c(_,a);return d})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(i=>this.getProxy())}}class TokenMetadata{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let o="mtk"+this.getForeground(e);const a=this.getFontStyle(e);return a&1&&(o+=" mtki"),a&2&&(o+=" mtkb"),a&4&&(o+=" mtku"),a&8&&(o+=" mtks"),o}static getInlineStyleFromMetadata(e,i){const o=this.getForeground(e),a=this.getFontStyle(e);let c=`color: ${i[o]};`;a&1&&(c+="font-style: italic;"),a&2&&(c+="font-weight: bold;");let d="";return a&4&&(d+=" underline"),a&8&&(d+=" line-through"),d&&(c+=`text-decoration:${d};`),c}static getPresentationFromMetadata(e){const i=this.getForeground(e),o=this.getFontStyle(e);return{foreground:i,italic:Boolean(o&1),bold:Boolean(o&2),underline:Boolean(o&4),strikethrough:Boolean(o&8)}}}class LineTokens{constructor(e,i,o){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=i,this._languageIdCodec=o}static createEmpty(e,i){const o=LineTokens.defaultTokenMetadata,a=new Uint32Array(2);return a[0]=e.length,a[1]=o,new LineTokens(a,e,i)}equals(e){return e instanceof LineTokens?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,i,o){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const a=i<<1,c=a+(o<<1);for(let d=a;d<c;d++)if(this._tokens[d]!==e._tokens[d])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const i=this._tokens[(e<<1)+1],o=TokenMetadata.getLanguageId(i);return this._languageIdCodec.decodeLanguageId(o)}getStandardTokenType(e){const i=this._tokens[(e<<1)+1];return TokenMetadata.getTokenType(i)}getForeground(e){const i=this._tokens[(e<<1)+1];return TokenMetadata.getForeground(i)}getClassName(e){const i=this._tokens[(e<<1)+1];return TokenMetadata.getClassNameFromMetadata(i)}getInlineStyle(e,i){const o=this._tokens[(e<<1)+1];return TokenMetadata.getInlineStyleFromMetadata(o,i)}getPresentation(e){const i=this._tokens[(e<<1)+1];return TokenMetadata.getPresentationFromMetadata(i)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return LineTokens.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,i,o){return new SliceLineTokens(this,e,i,o)}static convertToEndOffset(e,i){const a=(e.length>>>1)-1;for(let c=0;c<a;c++)e[c<<1]=e[c+1<<1];e[a<<1]=i}static findIndexInTokensArray(e,i){if(e.length<=2)return 0;let o=0,a=(e.length>>>1)-1;for(;o<a;){const c=o+Math.floor((a-o)/2),d=e[c<<1];if(d===i)return c+1;d<i?o=c+1:d>i&&(a=c)}return o}withInserted(e){if(e.length===0)return this;let i=0,o=0,a="";const c=new Array;let d=0;for(;;){const _=i<this._tokensCount?this._tokens[i<<1]:-1,b=o<e.length?e[o]:null;if(_!==-1&&(b===null||_<=b.offset)){a+=this._text.substring(d,_);const k=this._tokens[(i<<1)+1];c.push(a.length,k),i++,d=_}else if(b){if(b.offset>d){a+=this._text.substring(d,b.offset);const k=this._tokens[(i<<1)+1];c.push(a.length,k),d=b.offset}a+=b.text,c.push(a.length,b.tokenMetadata),o++}else break}return new LineTokens(new Uint32Array(c),a,this._languageIdCodec)}}LineTokens.defaultTokenMetadata=(0<<11|1<<15|2<<24)>>>0;class SliceLineTokens{constructor(e,i,o,a){this._source=e,this._startOffset=i,this._endOffset=o,this._deltaOffset=a,this._firstTokenIndex=e.findTokenIndexAtOffset(i),this._tokensCount=0;for(let c=this._firstTokenIndex,d=e.getCount();c<d&&!(e.getStartOffset(c)>=o);c++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof SliceLineTokens?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const i=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,i)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,i){return this._source.getInlineStyle(this._firstTokenIndex+e,i)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class LineDecoration{constructor(e,i,o,a){this.startColumn=e,this.endColumn=i,this.className=o,this.type=a,this._lineDecorationBrand=void 0}static _equals(e,i){return e.startColumn===i.startColumn&&e.endColumn===i.endColumn&&e.className===i.className&&e.type===i.type}static equalsArr(e,i){const o=e.length,a=i.length;if(o!==a)return!1;for(let c=0;c<o;c++)if(!LineDecoration._equals(e[c],i[c]))return!1;return!0}static extractWrapped(e,i,o){if(e.length===0)return e;const a=i+1,c=o+1,d=o-i,_=[];let b=0;for(const k of e)k.endColumn<=a||k.startColumn>=c||(_[b++]=new LineDecoration(Math.max(1,k.startColumn-a+1),Math.min(d+1,k.endColumn-a+1),k.className,k.type));return _}static filter(e,i,o,a){if(e.length===0)return[];const c=[];let d=0;for(let _=0,b=e.length;_<b;_++){const k=e[_],j=k.range;if(j.endLineNumber<i||j.startLineNumber>i||j.isEmpty()&&(k.type===0||k.type===3))continue;const _e=j.startLineNumber===i?j.startColumn:o,et=j.endLineNumber===i?j.endColumn:a;c[d++]=new LineDecoration(_e,et,k.inlineClassName,k.type)}return c}static _typeCompare(e,i){const o=[2,0,1,3];return o[e]-o[i]}static compare(e,i){if(e.startColumn!==i.startColumn)return e.startColumn-i.startColumn;if(e.endColumn!==i.endColumn)return e.endColumn-i.endColumn;const o=LineDecoration._typeCompare(e.type,i.type);return o!==0?o:e.className!==i.className?e.className<i.className?-1:1:0}}class DecorationSegment{constructor(e,i,o,a){this.startOffset=e,this.endOffset=i,this.className=o,this.metadata=a}}class Stack{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let i=0;for(let o=0,a=e.length;o<a;o++)i|=e[o];return i}consumeLowerThan(e,i,o){for(;this.count>0&&this.stopOffsets[0]<e;){let a=0;for(;a+1<this.count&&this.stopOffsets[a]===this.stopOffsets[a+1];)a++;o.push(new DecorationSegment(i,this.stopOffsets[a],this.classNames.join(" "),Stack._metadata(this.metadata))),i=this.stopOffsets[a]+1,this.stopOffsets.splice(0,a+1),this.classNames.splice(0,a+1),this.metadata.splice(0,a+1),this.count-=a+1}return this.count>0&&i<e&&(o.push(new DecorationSegment(i,e-1,this.classNames.join(" "),Stack._metadata(this.metadata))),i=e),i}insert(e,i,o){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(i),this.metadata.push(o);else for(let a=0;a<this.count;a++)if(this.stopOffsets[a]>=e){this.stopOffsets.splice(a,0,e),this.classNames.splice(a,0,i),this.metadata.splice(a,0,o);break}this.count++}}class LineDecorationsNormalizer{static normalize(e,i){if(i.length===0)return[];const o=[],a=new Stack;let c=0;for(let d=0,_=i.length;d<_;d++){const b=i[d];let k=b.startColumn,j=b.endColumn;const _e=b.className,et=b.type===1?2:b.type===2?4:0;if(k>1){const st=e.charCodeAt(k-2);isHighSurrogate(st)&&k--}if(j>1){const st=e.charCodeAt(j-2);isHighSurrogate(st)&&j--}const tt=k-1,it=j-2;c=a.consumeLowerThan(tt,c,o),a.count===0&&(c=tt),a.insert(it,_e,et)}return a.consumeLowerThan(1073741824,c,o),o}}class LinePart{constructor(e,i,o,a){this.endIndex=e,this.type=i,this.metadata=o,this.containsRTL=a,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class LineRange{constructor(e,i){this.startOffset=e,this.endOffset=i}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class RenderLineInput{constructor(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st,ot,nt,rt,at){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=i,this.lineContent=o,this.continuesWithWrappedLine=a,this.isBasicASCII=c,this.containsRTL=d,this.fauxIndentLength=_,this.lineTokens=b,this.lineDecorations=k.sort(LineDecoration.compare),this.tabSize=j,this.startVisibleColumn=_e,this.spaceWidth=et,this.stopRenderingLineAfter=st,this.renderWhitespace=ot==="all"?4:ot==="boundary"?1:ot==="selection"?2:ot==="trailing"?3:0,this.renderControlCharacters=nt,this.fontLigatures=rt,this.selectionsOnLine=at&&at.sort((ht,ut)=>ht.startOffset<ut.startOffset?-1:1);const lt=Math.abs(it-et),gt=Math.abs(tt-et);lt<gt?(this.renderSpaceWidth=it,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=tt,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let i=0;i<this.selectionsOnLine.length;i++)if(!this.selectionsOnLine[i].equals(e[i]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&LineDecoration.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class DomPosition{constructor(e,i){this.partIndex=e,this.charIndex=i}}class CharacterMapping{constructor(e,i){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,i,o,a){const c=(i<<16|o<<0)>>>0;this._data[e-1]=c,this._horizontalOffset[e-1]=a}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const i=this.charOffsetToPartData(e-1),o=CharacterMapping.getPartIndex(i),a=CharacterMapping.getCharIndex(i);return new DomPosition(o,a)}getColumn(e,i){return this.partDataToCharOffset(e.partIndex,i,e.charIndex)+1}partDataToCharOffset(e,i,o){if(this.length===0)return 0;const a=(e<<16|o<<0)>>>0;let c=0,d=this.length-1;for(;c+1<d;){const st=c+d>>>1,ot=this._data[st];if(ot===a)return st;ot>a?d=st:c=st}if(c===d)return c;const _=this._data[c],b=this._data[d];if(_===a)return c;if(b===a)return d;const k=CharacterMapping.getPartIndex(_),j=CharacterMapping.getCharIndex(_),_e=CharacterMapping.getPartIndex(b);let et;k!==_e?et=i:et=CharacterMapping.getCharIndex(b);const tt=o-j,it=et-o;return tt<=it?c:d}}class RenderLineOutput{constructor(e,i,o){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=i,this.containsForeignElements=o}}function renderViewLine(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendASCIIString("<span>");let i=0,o=0,a=0;for(const d of s.lineDecorations)(d.type===1||d.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(d.className),e.appendASCIIString('"></span>'),d.type===1&&(a|=1,i++),d.type===2&&(a|=2,o++));e.appendASCIIString("</span>");const c=new CharacterMapping(1,i+o);return c.setColumnInfo(1,i,0,0),new RenderLineOutput(c,!1,a)}return e.appendASCIIString("<span><span></span></span>"),new RenderLineOutput(new CharacterMapping(0,0),!1,0)}return _renderLine(resolveRenderLineInput(s),e)}class RenderLineOutput2{constructor(e,i,o,a){this.characterMapping=e,this.html=i,this.containsRTL=o,this.containsForeignElements=a}}function renderViewLine2(s){const e=createStringBuilder(1e4),i=renderViewLine(s,e);return new RenderLineOutput2(i.characterMapping,e.build(),i.containsRTL,i.containsForeignElements)}class ResolvedRenderLineInput{constructor(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=i,this.lineContent=o,this.len=a,this.isOverflowing=c,this.parts=d,this.containsForeignElements=_,this.fauxIndentLength=b,this.tabSize=k,this.startVisibleColumn=j,this.containsRTL=_e,this.spaceWidth=et,this.renderSpaceCharCode=tt,this.renderWhitespace=it,this.renderControlCharacters=st}}function resolveRenderLineInput(s){const e=s.lineContent;let i,o;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(i=!0,o=s.stopRenderingLineAfter):(i=!1,o=e.length);let a=transformAndRemoveOverflowing(e,s.containsRTL,s.lineTokens,s.fauxIndentLength,o);s.renderControlCharacters&&!s.isBasicASCII&&(a=extractControlCharacters(e,a)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&!!s.selectionsOnLine||s.renderWhitespace===3)&&(a=_applyRenderWhitespace(s,e,o,a));let c=0;if(s.lineDecorations.length>0){for(let d=0,_=s.lineDecorations.length;d<_;d++){const b=s.lineDecorations[d];b.type===3||b.type===1?c|=1:b.type===2&&(c|=2)}a=_applyInlineDecorations(e,o,a,s.lineDecorations)}return s.containsRTL||(a=splitLargeTokens(e,a,!s.isBasicASCII||s.fontLigatures)),new ResolvedRenderLineInput(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,o,i,a,c,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.containsRTL,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}function transformAndRemoveOverflowing(s,e,i,o,a){const c=[];let d=0;o>0&&(c[d++]=new LinePart(o,"",0,!1));let _=o;for(let b=0,k=i.getCount();b<k;b++){const j=i.getEndOffset(b);if(j<=o)continue;const _e=i.getClassName(b);if(j>=a){const tt=e?containsRTL(s.substring(_,a)):!1;c[d++]=new LinePart(a,_e,0,tt);break}const et=e?containsRTL(s.substring(_,j)):!1;c[d++]=new LinePart(j,_e,0,et),_=j}return c}function splitLargeTokens(s,e,i){let o=0;const a=[];let c=0;if(i)for(let d=0,_=e.length;d<_;d++){const b=e[d],k=b.endIndex;if(o+50<k){const j=b.type,_e=b.metadata,et=b.containsRTL;let tt=-1,it=o;for(let st=o;st<k;st++)s.charCodeAt(st)===32&&(tt=st),tt!==-1&&st-it>=50&&(a[c++]=new LinePart(tt+1,j,_e,et),it=tt+1,tt=-1);it!==k&&(a[c++]=new LinePart(k,j,_e,et))}else a[c++]=b;o=k}else for(let d=0,_=e.length;d<_;d++){const b=e[d],k=b.endIndex,j=k-o;if(j>50){const _e=b.type,et=b.metadata,tt=b.containsRTL,it=Math.ceil(j/50);for(let st=1;st<it;st++){const ot=o+st*50;a[c++]=new LinePart(ot,_e,et,tt)}a[c++]=new LinePart(k,_e,et,tt)}else a[c++]=b;o=k}return a}function isControlCharacter(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}function extractControlCharacters(s,e){const i=[];let o=new LinePart(0,"",0,!1),a=0;for(const c of e){const d=c.endIndex;for(;a<d;a++){const _=s.charCodeAt(a);isControlCharacter(_)&&(a>o.endIndex&&(o=new LinePart(a,c.type,c.metadata,c.containsRTL),i.push(o)),o=new LinePart(a+1,"mtkcontrol",c.metadata,!1),i.push(o))}a>o.endIndex&&(o=new LinePart(d,c.type,c.metadata,c.containsRTL),i.push(o))}return i}function _applyRenderWhitespace(s,e,i,o){const a=s.continuesWithWrappedLine,c=s.fauxIndentLength,d=s.tabSize,_=s.startVisibleColumn,b=s.useMonospaceOptimizations,k=s.selectionsOnLine,j=s.renderWhitespace===1,_e=s.renderWhitespace===3,et=s.renderSpaceWidth!==s.spaceWidth,tt=[];let it=0,st=0,ot=o[st].type,nt=o[st].containsRTL,rt=o[st].endIndex;const at=o.length;let lt=!1,gt=firstNonWhitespaceIndex(e),ht;gt===-1?(lt=!0,gt=i,ht=i):ht=lastNonWhitespaceIndex(e);let ut=!1,ct=0,ft=k&&k[ct],dt=_%d;for(let mt=c;mt<i;mt++){const _t=e.charCodeAt(mt);ft&&mt>=ft.endOffset&&(ct++,ft=k&&k[ct]);let Ct;if(mt<gt||mt>ht)Ct=!0;else if(_t===9)Ct=!0;else if(_t===32)if(j)if(ut)Ct=!0;else{const bt=mt+1<i?e.charCodeAt(mt+1):0;Ct=bt===32||bt===9}else Ct=!0;else Ct=!1;if(Ct&&k&&(Ct=!!ft&&ft.startOffset<=mt&&ft.endOffset>mt),Ct&&_e&&(Ct=lt||mt>ht),Ct&&nt&&mt>=gt&&mt<=ht&&(Ct=!1),ut){if(!Ct||!b&&dt>=d){if(et){const bt=it>0?tt[it-1].endIndex:c;for(let yt=bt+1;yt<=mt;yt++)tt[it++]=new LinePart(yt,"mtkw",1,!1)}else tt[it++]=new LinePart(mt,"mtkw",1,!1);dt=dt%d}}else(mt===rt||Ct&&mt>c)&&(tt[it++]=new LinePart(mt,ot,0,nt),dt=dt%d);for(_t===9?dt=d:isFullWidthCharacter(_t)?dt+=2:dt++,ut=Ct;mt===rt&&(st++,st<at);)ot=o[st].type,nt=o[st].containsRTL,rt=o[st].endIndex}let pt=!1;if(ut)if(a&&j){const mt=i>0?e.charCodeAt(i-1):0,_t=i>1?e.charCodeAt(i-2):0;mt===32&&_t!==32&&_t!==9||(pt=!0)}else pt=!0;if(pt)if(et){const mt=it>0?tt[it-1].endIndex:c;for(let _t=mt+1;_t<=i;_t++)tt[it++]=new LinePart(_t,"mtkw",1,!1)}else tt[it++]=new LinePart(i,"mtkw",1,!1);else tt[it++]=new LinePart(i,ot,0,nt);return tt}function _applyInlineDecorations(s,e,i,o){o.sort(LineDecoration.compare);const a=LineDecorationsNormalizer.normalize(s,o),c=a.length;let d=0;const _=[];let b=0,k=0;for(let _e=0,et=i.length;_e<et;_e++){const tt=i[_e],it=tt.endIndex,st=tt.type,ot=tt.metadata,nt=tt.containsRTL;for(;d<c&&a[d].startOffset<it;){const rt=a[d];if(rt.startOffset>k&&(k=rt.startOffset,_[b++]=new LinePart(k,st,ot,nt)),rt.endOffset+1<=it)k=rt.endOffset+1,_[b++]=new LinePart(k,st+" "+rt.className,ot|rt.metadata,nt),d++;else{k=it,_[b++]=new LinePart(k,st+" "+rt.className,ot|rt.metadata,nt);break}}it>k&&(k=it,_[b++]=new LinePart(k,st,ot,nt))}const j=i[i.length-1].endIndex;if(d<c&&a[d].startOffset===j)for(;d<c&&a[d].startOffset===j;){const _e=a[d];_[b++]=new LinePart(k,_e.className,_e.metadata,!1),d++}return _}function _renderLine(s,e){const i=s.fontIsMonospace,o=s.canUseHalfwidthRightwardsArrow,a=s.containsForeignElements,c=s.lineContent,d=s.len,_=s.isOverflowing,b=s.parts,k=s.fauxIndentLength,j=s.tabSize,_e=s.startVisibleColumn,et=s.containsRTL,tt=s.spaceWidth,it=s.renderSpaceCharCode,st=s.renderWhitespace,ot=s.renderControlCharacters,nt=new CharacterMapping(d+1,b.length);let rt=!1,at=0,lt=_e,gt=0,ht=0,ut=0;et?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let ct=0,ft=b.length;ct<ft;ct++){const dt=b[ct],pt=dt.endIndex,mt=dt.type,_t=dt.containsRTL,Ct=st!==0&&dt.isWhitespace(),bt=Ct&&!i&&(mt==="mtkw"||!a),yt=at===pt&&dt.isPseudoAfter();if(gt=0,e.appendASCIIString("<span "),_t&&e.appendASCIIString('style="unicode-bidi:isolate" '),e.appendASCIIString('class="'),e.appendASCIIString(bt?"mtkz":mt),e.appendASCII(34),Ct){let wt=0;{let Tt=at,kt=lt;for(;Tt<pt;Tt++){const St=(c.charCodeAt(Tt)===9?j-kt%j:1)|0;wt+=St,Tt>=k&&(kt+=St)}}for(bt&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(tt*wt)),e.appendASCIIString('px"')),e.appendASCII(62);at<pt;at++){nt.setColumnInfo(at+1,ct-ut,gt,ht),ut=0;const Tt=c.charCodeAt(at);let kt,Rt;if(Tt===9){kt=j-lt%j|0,Rt=kt,!o||Rt>1?e.write1(8594):e.write1(65515);for(let St=2;St<=Rt;St++)e.write1(160)}else kt=2,Rt=1,e.write1(it),e.write1(8204);gt+=kt,ht+=Rt,at>=k&&(lt+=Rt)}}else for(e.appendASCII(62);at<pt;at++){nt.setColumnInfo(at+1,ct-ut,gt,ht),ut=0;const wt=c.charCodeAt(at);let Tt=1,kt=1;switch(wt){case 9:Tt=j-lt%j,kt=Tt;for(let Rt=1;Rt<=Tt;Rt++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:ot?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:isFullWidthCharacter(wt)&&kt++,ot&&wt<32?e.write1(9216+wt):ot&&wt===127?e.write1(9249):ot&&isControlCharacter(wt)?(e.appendASCIIString("[U+"),e.appendASCIIString(to4CharHex(wt)),e.appendASCIIString("]"),Tt=8,kt=Tt):e.write1(wt)}gt+=Tt,ht+=kt,at>=k&&(lt+=kt)}yt?ut++:ut=0,at>=d&&!rt&&dt.isPseudoAfter()&&(rt=!0,nt.setColumnInfo(at+1,ct,gt,ht)),e.appendASCIIString("</span>")}return rt||nt.setColumnInfo(d+1,b.length-1,gt,ht),_&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new RenderLineOutput(nt,et,a)}function to4CharHex(s){return s.toString(16).toUpperCase().padStart(4,"0")}class Viewport{constructor(e,i,o,a){this._viewportBrand=void 0,this.top=e|0,this.left=i|0,this.width=o|0,this.height=a|0}}class MinimapLinesRenderingData{constructor(e,i){this.tabSize=e,this.data=i}}class ViewLineData{constructor(e,i,o,a,c,d,_){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=i,this.minColumn=o,this.maxColumn=a,this.startVisibleColumn=c,this.tokens=d,this.inlineDecorations=_}}class ViewLineRenderingData{constructor(e,i,o,a,c,d,_,b,k,j){this.minColumn=e,this.maxColumn=i,this.content=o,this.continuesWithWrappedLine=a,this.isBasicASCII=ViewLineRenderingData.isBasicASCII(o,d),this.containsRTL=ViewLineRenderingData.containsRTL(o,this.isBasicASCII,c),this.tokens=_,this.inlineDecorations=b,this.tabSize=k,this.startVisibleColumn=j}static isBasicASCII(e,i){return i?isBasicASCII(e):!0}static containsRTL(e,i,o){return!i&&o?containsRTL(e):!1}}class InlineDecoration{constructor(e,i,o){this.range=e,this.inlineClassName=i,this.type=o}}class SingleLineInlineDecoration{constructor(e,i,o,a){this.startOffset=e,this.endOffset=i,this.inlineClassName=o,this.inlineClassNameAffectsLetterSpacing=a}toInlineDecoration(e){return new InlineDecoration(new Range$2(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class ViewModelDecoration{constructor(e,i){this._viewModelDecorationBrand=void 0,this.range=e,this.options=i}}class OverviewRulerDecorationsGroup{constructor(e,i,o){this.color=e,this.zIndex=i,this.data=o}static cmp(e,i){return e.zIndex===i.zIndex?e.color<i.color?-1:e.color>i.color?1:0:e.zIndex-i.zIndex}}function isFuzzyActionArr(s){return Array.isArray(s)}function isFuzzyAction(s){return!isFuzzyActionArr(s)}function isString(s){return typeof s=="string"}function isIAction(s){return!isString(s)}function empty(s){return!s}function fixCase(s,e){return s.ignoreCase&&e?e.toLowerCase():e}function sanitize(s){return s.replace(/[&<>'"_]/g,"-")}function log(s,e){console.log(`${s.languageId}: ${e}`)}function createError(s,e){return new Error(`${s.languageId}: ${e}`)}function substituteMatches(s,e,i,o,a){const c=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let d=null;return e.replace(c,function(_,b,k,j,_e,et,tt,it,st){return empty(k)?empty(j)?!empty(_e)&&_e<o.length?fixCase(s,o[_e]):!empty(tt)&&s&&typeof s[tt]=="string"?s[tt]:(d===null&&(d=a.split("."),d.unshift(a)),!empty(et)&&et<d.length?fixCase(s,d[et]):""):fixCase(s,i):"$"})}function findRules(s,e){let i=e;for(;i&&i.length>0;){const o=s.tokenizer[i];if(o)return o;const a=i.lastIndexOf(".");a<0?i=null:i=i.substr(0,a)}return null}function stateExists(s,e){let i=e;for(;i&&i.length>0;){if(s.stateNames[i])return!0;const a=i.lastIndexOf(".");a<0?i=null:i=i.substr(0,a)}return!1}var __decorate$z=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$t=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};const CACHE_STACK_DEPTH=5;class MonarchStackElementFactory{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,i){return this._INSTANCE.create(e,i)}create(e,i){if(e!==null&&e.depth>=this._maxCacheDepth)return new MonarchStackElement(e,i);let o=MonarchStackElement.getStackElementId(e);o.length>0&&(o+="|"),o+=i;let a=this._entries[o];return a||(a=new MonarchStackElement(e,i),this._entries[o]=a,a)}}MonarchStackElementFactory._INSTANCE=new MonarchStackElementFactory(CACHE_STACK_DEPTH);class MonarchStackElement{constructor(e,i){this.parent=e,this.state=i,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let i="";for(;e!==null;)i.length>0&&(i+="|"),i+=e.state,e=e.parent;return i}static _equals(e,i){for(;e!==null&&i!==null;){if(e===i)return!0;if(e.state!==i.state)return!1;e=e.parent,i=i.parent}return e===null&&i===null}equals(e){return MonarchStackElement._equals(this,e)}push(e){return MonarchStackElementFactory.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return MonarchStackElementFactory.create(this.parent,e)}}class EmbeddedLanguageData{constructor(e,i){this.languageId=e,this.state=i}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new EmbeddedLanguageData(this.languageId,this.state)}}class MonarchLineStateFactory{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,i){return this._INSTANCE.create(e,i)}create(e,i){if(i!==null)return new MonarchLineState(e,i);if(e!==null&&e.depth>=this._maxCacheDepth)return new MonarchLineState(e,i);const o=MonarchStackElement.getStackElementId(e);let a=this._entries[o];return a||(a=new MonarchLineState(e,null),this._entries[o]=a,a)}}MonarchLineStateFactory._INSTANCE=new MonarchLineStateFactory(CACHE_STACK_DEPTH);class MonarchLineState{constructor(e,i){this.stack=e,this.embeddedLanguageData=i}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:MonarchLineStateFactory.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof MonarchLineState)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class MonarchClassicTokensCollector{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,i){this._lastTokenType===i&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=i,this._lastTokenLanguage=this._languageId,this._tokens.push(new Token$2(e,i,this._languageId)))}nestedLanguageTokenize(e,i,o,a){const c=o.languageId,d=o.state,_=TokenizationRegistry.get(c);if(!_)return this.enterLanguage(c),this.emit(a,""),d;const b=_.tokenize(e,i,d);if(a!==0)for(const k of b.tokens)this._tokens.push(new Token$2(k.offset+a,k.type,k.language));else this._tokens=this._tokens.concat(b.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,b.endState}finalize(e){return new TokenizationResult(this._tokens,e)}}class MonarchModernTokensCollector{constructor(e,i){this._languageService=e,this._theme=i,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,i){const o=this._theme.match(this._currentLanguageId,i);this._lastTokenMetadata!==o&&(this._lastTokenMetadata=o,this._tokens.push(e),this._tokens.push(o))}static _merge(e,i,o){const a=e!==null?e.length:0,c=i.length,d=o!==null?o.length:0;if(a===0&&c===0&&d===0)return new Uint32Array(0);if(a===0&&c===0)return o;if(c===0&&d===0)return e;const _=new Uint32Array(a+c+d);e!==null&&_.set(e);for(let b=0;b<c;b++)_[a+b]=i[b];return o!==null&&_.set(o,a+c),_}nestedLanguageTokenize(e,i,o,a){const c=o.languageId,d=o.state,_=TokenizationRegistry.get(c);if(!_)return this.enterLanguage(c),this.emit(a,""),d;const b=_.tokenizeEncoded(e,i,d);if(a!==0)for(let k=0,j=b.tokens.length;k<j;k+=2)b.tokens[k]+=a;return this._prependTokens=MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,b.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,b.endState}finalize(e){return new EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens,this._tokens,null),e)}}let MonarchTokenizer=class Wn{constructor(e,i,o,a,c){this._configurationService=c,this._languageService=e,this._standaloneThemeService=i,this._languageId=o,this._lexer=a,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let d=!1;this._tokenizationRegistryListener=TokenizationRegistry.onDidChange(_=>{if(d)return;let b=!1;for(let k=0,j=_.changedLanguages.length;k<j;k++){const _e=_.changedLanguages[k];if(this._embeddedLanguages[_e]){b=!0;break}}b&&(d=!0,TokenizationRegistry.fire([this._languageId]),d=!1)}),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration(_=>{_.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const e=[];for(const i in this._embeddedLanguages){const o=TokenizationRegistry.get(i);if(o){if(o instanceof Wn){const a=o.getLoadStatus();a.loaded===!1&&e.push(a.promise)}continue}TokenizationRegistry.isResolved(i)||e.push(TokenizationRegistry.getOrCreate(i))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(i=>{})}}getInitialState(){const e=MonarchStackElementFactory.create(null,this._lexer.start);return MonarchLineStateFactory.create(e,null)}tokenize(e,i,o){if(e.length>=this._maxTokenizationLineLength)return nullTokenize(this._languageId,o);const a=new MonarchClassicTokensCollector,c=this._tokenize(e,i,o,a);return a.finalize(c)}tokenizeEncoded(e,i,o){if(e.length>=this._maxTokenizationLineLength)return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),o);const a=new MonarchModernTokensCollector(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),c=this._tokenize(e,i,o,a);return a.finalize(c)}_tokenize(e,i,o,a){return o.embeddedLanguageData?this._nestedTokenize(e,i,o,0,a):this._myTokenize(e,i,o,0,a)}_findLeavingNestedLanguageOffset(e,i){let o=this._lexer.tokenizer[i.stack.state];if(!o&&(o=findRules(this._lexer,i.stack.state),!o))throw createError(this._lexer,"tokenizer state is not defined: "+i.stack.state);let a=-1,c=!1;for(const d of o){if(!isIAction(d.action)||d.action.nextEmbedded!=="@pop")continue;c=!0;let _=d.regex;const b=d.regex.source;if(b.substr(0,4)==="^(?:"&&b.substr(b.length-1,1)===")"){const j=(_.ignoreCase?"i":"")+(_.unicode?"u":"");_=new RegExp(b.substr(4,b.length-5),j)}const k=e.search(_);k===-1||k!==0&&d.matchOnlyAtLineStart||(a===-1||k<a)&&(a=k)}if(!c)throw createError(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+i.stack.state);return a}_nestedTokenize(e,i,o,a,c){const d=this._findLeavingNestedLanguageOffset(e,o);if(d===-1){const k=c.nestedLanguageTokenize(e,i,o.embeddedLanguageData,a);return MonarchLineStateFactory.create(o.stack,new EmbeddedLanguageData(o.embeddedLanguageData.languageId,k))}const _=e.substring(0,d);_.length>0&&c.nestedLanguageTokenize(_,!1,o.embeddedLanguageData,a);const b=e.substring(d);return this._myTokenize(b,i,o,a+d,c)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,i,o,a,c){c.enterLanguage(this._languageId);const d=e.length,_=i&&this._lexer.includeLF?e+`
`:e,b=_.length;let k=o.embeddedLanguageData,j=o.stack,_e=0,et=null,tt=!0;for(;tt||_e<b;){const it=_e,st=j.depth,ot=et?et.groups.length:0,nt=j.state;let rt=null,at=null,lt=null,gt=null,ht=null;if(et){rt=et.matches;const ft=et.groups.shift();at=ft.matched,lt=ft.action,gt=et.rule,et.groups.length===0&&(et=null)}else{if(!tt&&_e>=b)break;tt=!1;let ft=this._lexer.tokenizer[nt];if(!ft&&(ft=findRules(this._lexer,nt),!ft))throw createError(this._lexer,"tokenizer state is not defined: "+nt);const dt=_.substr(_e);for(const pt of ft)if((_e===0||!pt.matchOnlyAtLineStart)&&(rt=dt.match(pt.regex),rt)){at=rt[0],lt=pt.action;break}}if(rt||(rt=[""],at=""),lt||(_e<b&&(rt=[_.charAt(_e)],at=rt[0]),lt=this._lexer.defaultToken),at===null)break;for(_e+=at.length;isFuzzyAction(lt)&&isIAction(lt)&&lt.test;)lt=lt.test(at,rt,nt,_e===b);let ut=null;if(typeof lt=="string"||Array.isArray(lt))ut=lt;else if(lt.group)ut=lt.group;else if(lt.token!==null&&lt.token!==void 0){if(lt.tokenSubst?ut=substituteMatches(this._lexer,lt.token,at,rt,nt):ut=lt.token,lt.nextEmbedded)if(lt.nextEmbedded==="@pop"){if(!k)throw createError(this._lexer,"cannot pop embedded language if not inside one");k=null}else{if(k)throw createError(this._lexer,"cannot enter embedded language from within an embedded language");ht=substituteMatches(this._lexer,lt.nextEmbedded,at,rt,nt)}if(lt.goBack&&(_e=Math.max(0,_e-lt.goBack)),lt.switchTo&&typeof lt.switchTo=="string"){let ft=substituteMatches(this._lexer,lt.switchTo,at,rt,nt);if(ft[0]==="@"&&(ft=ft.substr(1)),findRules(this._lexer,ft))j=j.switchTo(ft);else throw createError(this._lexer,"trying to switch to a state '"+ft+"' that is undefined in rule: "+this._safeRuleName(gt))}else{if(lt.transform&&typeof lt.transform=="function")throw createError(this._lexer,"action.transform not supported");if(lt.next)if(lt.next==="@push"){if(j.depth>=this._lexer.maxStack)throw createError(this._lexer,"maximum tokenizer stack size reached: ["+j.state+","+j.parent.state+",...]");j=j.push(nt)}else if(lt.next==="@pop"){if(j.depth<=1)throw createError(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(gt));j=j.pop()}else if(lt.next==="@popall")j=j.popall();else{let ft=substituteMatches(this._lexer,lt.next,at,rt,nt);if(ft[0]==="@"&&(ft=ft.substr(1)),findRules(this._lexer,ft))j=j.push(ft);else throw createError(this._lexer,"trying to set a next state '"+ft+"' that is undefined in rule: "+this._safeRuleName(gt))}}lt.log&&typeof lt.log=="string"&&log(this._lexer,this._lexer.languageId+": "+substituteMatches(this._lexer,lt.log,at,rt,nt))}if(ut===null)throw createError(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(gt));const ct=ft=>{const dt=this._languageService.getLanguageIdByLanguageName(ft)||this._languageService.getLanguageIdByMimeType(ft)||ft,pt=this._getNestedEmbeddedLanguageData(dt);if(_e<b){const mt=e.substr(_e);return this._nestedTokenize(mt,i,MonarchLineStateFactory.create(j,pt),a+_e,c)}else return MonarchLineStateFactory.create(j,pt)};if(Array.isArray(ut)){if(et&&et.groups.length>0)throw createError(this._lexer,"groups cannot be nested: "+this._safeRuleName(gt));if(rt.length!==ut.length+1)throw createError(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(gt));let ft=0;for(let dt=1;dt<rt.length;dt++)ft+=rt[dt].length;if(ft!==at.length)throw createError(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(gt));et={rule:gt,matches:rt,groups:[]};for(let dt=0;dt<ut.length;dt++)et.groups[dt]={action:ut[dt],matched:rt[dt+1]};_e-=at.length;continue}else{if(ut==="@rematch"&&(_e-=at.length,at="",rt=null,ut="",ht!==null))return ct(ht);if(at.length===0){if(b===0||st!==j.depth||nt!==j.state||(et?et.groups.length:0)!==ot)continue;throw createError(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(gt))}let ft=null;if(isString(ut)&&ut.indexOf("@brackets")===0){const dt=ut.substr(9),pt=findBracket(this._lexer,at);if(!pt)throw createError(this._lexer,"@brackets token returned but no bracket defined as: "+at);ft=sanitize(pt.token+dt)}else{const dt=ut===""?"":ut+this._lexer.tokenPostfix;ft=sanitize(dt)}it<d&&c.emit(it+a,ft)}if(ht!==null)return ct(ht)}return MonarchLineStateFactory.create(j,k)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new EmbeddedLanguageData(e,NullState);e!==this._languageId&&(TokenizationRegistry.getOrCreate(e),this._embeddedLanguages[e]=!0);const i=TokenizationRegistry.get(e);return i?new EmbeddedLanguageData(e,i.getInitialState()):new EmbeddedLanguageData(e,NullState)}};MonarchTokenizer=__decorate$z([__param$t(4,IConfigurationService)],MonarchTokenizer);function findBracket(s,e){if(!e)return null;e=fixCase(s,e);const i=s.brackets;for(const o of i){if(o.open===e)return{token:o.token,bracketType:1};if(o.close===e)return{token:o.token,bracketType:-1}}return null}var __awaiter$m=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})},_a$6;const ttPolicy$2=(_a$6=window.trustedTypes)===null||_a$6===void 0?void 0:_a$6.createPolicy("standaloneColorizer",{createHTML:s=>s});class Colorizer{static colorizeElement(e,i,o,a){a=a||{};const c=a.theme||"vs",d=a.mimeType||o.getAttribute("lang")||o.getAttribute("data-lang");if(!d)return console.error("Mode not detected"),Promise.resolve();const _=i.getLanguageIdByMimeType(d)||d;e.setTheme(c);const b=o.firstChild?o.firstChild.nodeValue:"";o.className+=" "+c;const k=j=>{var _e;const et=(_e=ttPolicy$2==null?void 0:ttPolicy$2.createHTML(j))!==null&&_e!==void 0?_e:j;o.innerHTML=et};return this.colorize(i,b||"",_,a).then(k,j=>console.error(j))}static colorize(e,i,o,a){return __awaiter$m(this,void 0,void 0,function*(){const c=e.languageIdCodec;let d=4;a&&typeof a.tabSize=="number"&&(d=a.tabSize),startsWithUTF8BOM(i)&&(i=i.substr(1));const _=splitLines(i);if(!e.isRegisteredLanguageId(o))return _fakeColorize(_,d,c);const b=yield TokenizationRegistry.getOrCreate(o);return b?_colorize(_,d,b,c):_fakeColorize(_,d,c)})}static colorizeLine(e,i,o,a,c=4){const d=ViewLineRenderingData.isBasicASCII(e,i),_=ViewLineRenderingData.containsRTL(e,d,o);return renderViewLine2(new RenderLineInput(!1,!0,e,!1,d,_,0,a,[],c,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,i,o=4){const a=e.getLineContent(i);e.tokenization.forceTokenization(i);const d=e.tokenization.getLineTokens(i).inflate();return this.colorizeLine(a,e.mightContainNonBasicASCII(),e.mightContainRTL(),d,o)}}function _colorize(s,e,i,o){return new Promise((a,c)=>{const d=()=>{const _=_actualColorize(s,e,i,o);if(i instanceof MonarchTokenizer){const b=i.getLoadStatus();if(b.loaded===!1){b.promise.then(d,c);return}}a(_)};d()})}function _fakeColorize(s,e,i){let o=[];const c=new Uint32Array(2);c[0]=0,c[1]=33587200;for(let d=0,_=s.length;d<_;d++){const b=s[d];c[0]=b.length;const k=new LineTokens(c,b,i),j=ViewLineRenderingData.isBasicASCII(b,!0),_e=ViewLineRenderingData.containsRTL(b,j,!0),et=renderViewLine2(new RenderLineInput(!1,!0,b,!1,j,_e,0,k,[],e,0,0,0,0,-1,"none",!1,!1,null));o=o.concat(et.html),o.push("<br/>")}return o.join("")}function _actualColorize(s,e,i,o){let a=[],c=i.getInitialState();for(let d=0,_=s.length;d<_;d++){const b=s[d],k=i.tokenizeEncoded(b,!0,c);LineTokens.convertToEndOffset(k.tokens,b.length);const j=new LineTokens(k.tokens,b,o),_e=ViewLineRenderingData.isBasicASCII(b,!0),et=ViewLineRenderingData.containsRTL(b,_e,!0),tt=renderViewLine2(new RenderLineInput(!1,!0,b,!1,_e,et,0,j.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));a=a.concat(tt.html),a.push("<br/>"),c=k.endState}return a.join("")}const BrowserFeatures={clipboard:{writeText:isNative||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:isNative||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>isNative||isStandalone()?0:navigator.keyboard||isSafari?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};function createKeybinding(s,e){if(s===0)return null;const i=(s&65535)>>>0,o=(s&4294901760)>>>16;return o!==0?new ChordKeybinding([createSimpleKeybinding(i,e),createSimpleKeybinding(o,e)]):new ChordKeybinding([createSimpleKeybinding(i,e)])}function createSimpleKeybinding(s,e){const i=!!(s&2048),o=!!(s&256),a=e===2?o:i,c=!!(s&1024),d=!!(s&512),_=e===2?i:o,b=s&255;return new SimpleKeybinding(a,c,d,_,b)}class SimpleKeybinding{constructor(e,i,o,a,c){this.ctrlKey=e,this.shiftKey=i,this.altKey=o,this.metaKey=a,this.keyCode=c}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new ChordKeybinding([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class ChordKeybinding{constructor(e){if(e.length===0)throw illegalArgument("parts");this.parts=e}}class ResolvedKeybindingPart{constructor(e,i,o,a,c,d){this.ctrlKey=e,this.shiftKey=i,this.altKey=o,this.metaKey=a,this.keyLabel=c,this.keyAriaLabel=d}}class ResolvedKeybinding{}function extractKeyCode(s){if(s.charCode){const i=String.fromCharCode(s.charCode).toUpperCase();return KeyCodeUtils.fromString(i)}const e=s.keyCode;if(e===3)return 7;if(isFirefox){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(isMacintosh&&e===224)return 57}else if(isWebKit){if(e===91)return 57;if(isMacintosh&&e===93)return 57;if(!isMacintosh&&e===92)return 57}return EVENT_KEY_CODE_MAP[e]||0}const ctrlKeyMod=isMacintosh?256:2048,altKeyMod=512,shiftKeyMod=1024,metaKeyMod=isMacintosh?2048:256;class StandardKeyboardEvent{constructor(e){this._standardKeyboardEventBrand=!0;const i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.keyCode=extractKeyCode(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let i=0;return this.ctrlKey&&(i|=ctrlKeyMod),this.altKey&&(i|=altKeyMod),this.shiftKey&&(i|=shiftKeyMod),this.metaKey&&(i|=metaKeyMod),i|=e,i}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new SimpleKeybinding(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let hasDifferentOriginAncestorFlag=!1,sameOriginWindowChainCache=null;function getParentWindowIfSameOrigin(s){if(!s.parent||s.parent===s)return null;try{const e=s.location,i=s.parent.location;if(e.origin!=="null"&&i.origin!=="null"&&e.origin!==i.origin)return hasDifferentOriginAncestorFlag=!0,null}catch{return hasDifferentOriginAncestorFlag=!0,null}return s.parent}class IframeUtils{static getSameOriginWindowChain(){if(!sameOriginWindowChainCache){sameOriginWindowChainCache=[];let e=window,i;do i=getParentWindowIfSameOrigin(e),i?sameOriginWindowChainCache.push({window:e,iframeElement:e.frameElement||null}):sameOriginWindowChainCache.push({window:e,iframeElement:null}),e=i;while(e)}return sameOriginWindowChainCache.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,i){if(!i||e===i)return{top:0,left:0};let o=0,a=0;const c=this.getSameOriginWindowChain();for(const d of c){if(o+=d.window.scrollY,a+=d.window.scrollX,d.window===i||!d.iframeElement)break;const _=d.iframeElement.getBoundingClientRect();o+=_.top,a+=_.left}return{top:o,left:a}}}class StandardMouseEvent{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);const i=IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class StandardWheelEvent{constructor(e,i=0,o=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=o,this.deltaX=i,e){const a=e,c=e;if(typeof a.wheelDeltaY<"u")this.deltaY=a.wheelDeltaY/120;else if(typeof c.VERTICAL_AXIS<"u"&&c.axis===c.VERTICAL_AXIS)this.deltaY=-c.detail/3;else if(e.type==="wheel"){const d=e;d.deltaMode===d.DOM_DELTA_LINE?isFirefox&&!isMacintosh?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof a.wheelDeltaX<"u")isSafari&&isWindows?this.deltaX=-(a.wheelDeltaX/120):this.deltaX=a.wheelDeltaX/120;else if(typeof c.HORIZONTAL_AXIS<"u"&&c.axis===c.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const d=e;d.deltaMode===d.DOM_DELTA_LINE?isFirefox&&!isMacintosh?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function _toConsumableArray(s){if(Array.isArray(s)){for(var e=0,i=Array(s.length);e<s.length;e++)i[e]=s[e];return i}else return Array.from(s)}var hasOwnProperty$2=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create$1=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply=_ref.apply,construct=_ref.construct;apply||(apply=function(e,i,o){return e.apply(i,o)});freeze||(freeze=function(e){return e});seal||(seal=function(e){return e});construct||(construct=function(e,i){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(i))))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(s){return function(e){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return apply(s,e,o)}}function unconstruct(s){return function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return construct(s,i)}}function addToSet(s,e){setPrototypeOf&&setPrototypeOf(s,null);for(var i=e.length;i--;){var o=e[i];if(typeof o=="string"){var a=stringToLowerCase(o);a!==o&&(isFrozen(e)||(e[i]=a),o=a)}s[o]=!0}return s}function clone(s){var e=create$1(null),i=void 0;for(i in s)apply(hasOwnProperty$2,s,[i])&&(e[i]=s[i]);return e}function lookupGetter(s,e){for(;s!==null;){var i=getOwnPropertyDescriptor(s,e);if(i){if(i.get)return unapply(i.get);if(typeof i.value=="function")return unapply(i.value)}s=getPrototypeOf(s)}function o(a){return console.warn("fallback value for",a),null}return o}var html=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html$1=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg$1=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl$1=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ERB_EXPR=seal(/<%[\s\S]*|[\s\S]*%>/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function _toConsumableArray$1(s){if(Array.isArray(s)){for(var e=0,i=Array(s.length);e<s.length;e++)i[e]=s[e];return i}else return Array.from(s)}var getGlobal=function(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function(e,i){if((typeof e>"u"?"undefined":_typeof(e))!=="object"||typeof e.createPolicy!="function")return null;var o=null,a="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(a)&&(o=i.currentScript.getAttribute(a));var c="dompurify"+(o?"#"+o:"");try{return e.createPolicy(c,{createHTML:function(_){return _}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function createDOMPurify(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),e=function(vt){return createDOMPurify(vt)};if(e.version="2.3.1",e.removed=[],!s||!s.document||s.document.nodeType!==9)return e.isSupported=!1,e;var i=s.document,o=s.document,a=s.DocumentFragment,c=s.HTMLTemplateElement,d=s.Node,_=s.Element,b=s.NodeFilter,k=s.NamedNodeMap,j=k===void 0?s.NamedNodeMap||s.MozNamedAttrMap:k,_e=s.Text,et=s.Comment,tt=s.DOMParser,it=s.trustedTypes,st=_.prototype,ot=lookupGetter(st,"cloneNode"),nt=lookupGetter(st,"nextSibling"),rt=lookupGetter(st,"childNodes"),at=lookupGetter(st,"parentNode");if(typeof c=="function"){var lt=o.createElement("template");lt.content&&lt.content.ownerDocument&&(o=lt.content.ownerDocument)}var gt=_createTrustedTypesPolicy(it,i),ht=gt&&rn?gt.createHTML(""):"",ut=o,ct=ut.implementation,ft=ut.createNodeIterator,dt=ut.createDocumentFragment,pt=ut.getElementsByTagName,mt=i.importNode,_t={};try{_t=clone(o).documentMode?o.documentMode:{}}catch{}var Ct={};e.isSupported=typeof at=="function"&&ct&&typeof ct.createHTMLDocument<"u"&&_t!==9;var bt=MUSTACHE_EXPR,yt=ERB_EXPR,wt=DATA_ATTR,Tt=ARIA_ATTR,kt=IS_SCRIPT_OR_DATA,Rt=ATTR_WHITESPACE,St=IS_ALLOWED_URI,Lt=null,It=addToSet({},[].concat(_toConsumableArray$1(html),_toConsumableArray$1(svg),_toConsumableArray$1(svgFilters),_toConsumableArray$1(mathMl),_toConsumableArray$1(text))),xt=null,Mt=addToSet({},[].concat(_toConsumableArray$1(html$1),_toConsumableArray$1(svg$1),_toConsumableArray$1(mathMl$1),_toConsumableArray$1(xml))),Pt=null,Ft=null,Bt=!0,Wt=!0,yn=!1,jt=!1,Yt=!1,on=!1,un=!1,Jt=!1,en=!1,hn=!0,rn=!1,Sn=!0,Ut=!0,Kt=!1,Gt={},qt=null,sn=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),fn=null,gn=addToSet({},["audio","video","img","source","image","track"]),an=null,pn=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ln="http://www.w3.org/1998/Math/MathML",Tn="http://www.w3.org/2000/svg",_i="http://www.w3.org/1999/xhtml",wn=_i,kn=!1,ln=null,Vn=o.createElement("form"),xn=function(vt){ln&&ln===vt||((!vt||(typeof vt>"u"?"undefined":_typeof(vt))!=="object")&&(vt={}),vt=clone(vt),Lt="ALLOWED_TAGS"in vt?addToSet({},vt.ALLOWED_TAGS):It,xt="ALLOWED_ATTR"in vt?addToSet({},vt.ALLOWED_ATTR):Mt,an="ADD_URI_SAFE_ATTR"in vt?addToSet(clone(pn),vt.ADD_URI_SAFE_ATTR):pn,fn="ADD_DATA_URI_TAGS"in vt?addToSet(clone(gn),vt.ADD_DATA_URI_TAGS):gn,qt="FORBID_CONTENTS"in vt?addToSet({},vt.FORBID_CONTENTS):sn,Pt="FORBID_TAGS"in vt?addToSet({},vt.FORBID_TAGS):{},Ft="FORBID_ATTR"in vt?addToSet({},vt.FORBID_ATTR):{},Gt="USE_PROFILES"in vt?vt.USE_PROFILES:!1,Bt=vt.ALLOW_ARIA_ATTR!==!1,Wt=vt.ALLOW_DATA_ATTR!==!1,yn=vt.ALLOW_UNKNOWN_PROTOCOLS||!1,jt=vt.SAFE_FOR_TEMPLATES||!1,Yt=vt.WHOLE_DOCUMENT||!1,Jt=vt.RETURN_DOM||!1,en=vt.RETURN_DOM_FRAGMENT||!1,hn=vt.RETURN_DOM_IMPORT!==!1,rn=vt.RETURN_TRUSTED_TYPE||!1,un=vt.FORCE_BODY||!1,Sn=vt.SANITIZE_DOM!==!1,Ut=vt.KEEP_CONTENT!==!1,Kt=vt.IN_PLACE||!1,St=vt.ALLOWED_URI_REGEXP||St,wn=vt.NAMESPACE||_i,jt&&(Wt=!1),en&&(Jt=!0),Gt&&(Lt=addToSet({},[].concat(_toConsumableArray$1(text))),xt=[],Gt.html===!0&&(addToSet(Lt,html),addToSet(xt,html$1)),Gt.svg===!0&&(addToSet(Lt,svg),addToSet(xt,svg$1),addToSet(xt,xml)),Gt.svgFilters===!0&&(addToSet(Lt,svgFilters),addToSet(xt,svg$1),addToSet(xt,xml)),Gt.mathMl===!0&&(addToSet(Lt,mathMl),addToSet(xt,mathMl$1),addToSet(xt,xml))),vt.ADD_TAGS&&(Lt===It&&(Lt=clone(Lt)),addToSet(Lt,vt.ADD_TAGS)),vt.ADD_ATTR&&(xt===Mt&&(xt=clone(xt)),addToSet(xt,vt.ADD_ATTR)),vt.ADD_URI_SAFE_ATTR&&addToSet(an,vt.ADD_URI_SAFE_ATTR),vt.FORBID_CONTENTS&&(qt===sn&&(qt=clone(qt)),addToSet(qt,vt.FORBID_CONTENTS)),Ut&&(Lt["#text"]=!0),Yt&&addToSet(Lt,["html","head","body"]),Lt.table&&(addToSet(Lt,["tbody"]),delete Pt.tbody),freeze&&freeze(vt),ln=vt)},Nn=addToSet({},["mi","mo","mn","ms","mtext"]),Mn=addToSet({},["foreignobject","desc","title","annotation-xml"]),En=addToSet({},svg);addToSet(En,svgFilters),addToSet(En,svgDisallowed);var In=addToSet({},mathMl);addToSet(In,mathMlDisallowed);var Hn=function(vt){var Et=at(vt);(!Et||!Et.tagName)&&(Et={namespaceURI:_i,tagName:"template"});var Dt=stringToLowerCase(vt.tagName),At=stringToLowerCase(Et.tagName);if(vt.namespaceURI===Tn)return Et.namespaceURI===_i?Dt==="svg":Et.namespaceURI===Ln?Dt==="svg"&&(At==="annotation-xml"||Nn[At]):Boolean(En[Dt]);if(vt.namespaceURI===Ln)return Et.namespaceURI===_i?Dt==="math":Et.namespaceURI===Tn?Dt==="math"&&Mn[At]:Boolean(In[Dt]);if(vt.namespaceURI===_i){if(Et.namespaceURI===Tn&&!Mn[At]||Et.namespaceURI===Ln&&!Nn[At])return!1;var zt=addToSet({},["title","style","font","a","script"]);return!In[Dt]&&(zt[Dt]||!En[Dt])}return!1},Xt=function(vt){arrayPush(e.removed,{element:vt});try{vt.parentNode.removeChild(vt)}catch{try{vt.outerHTML=ht}catch{vt.remove()}}},Rn=function(vt,Et){try{arrayPush(e.removed,{attribute:Et.getAttributeNode(vt),from:Et})}catch{arrayPush(e.removed,{attribute:null,from:Et})}if(Et.removeAttribute(vt),vt==="is"&&!xt[vt])if(Jt||en)try{Xt(Et)}catch{}else try{Et.setAttribute(vt,"")}catch{}},On=function(vt){var Et=void 0,Dt=void 0;if(un)vt="<remove></remove>"+vt;else{var At=stringMatch(vt,/^[\r\n\t ]+/);Dt=At&&At[0]}var zt=gt?gt.createHTML(vt):vt;if(wn===_i)try{Et=new tt().parseFromString(zt,"text/html")}catch{}if(!Et||!Et.documentElement){Et=ct.createDocument(wn,"template",null);try{Et.documentElement.innerHTML=kn?"":zt}catch{}}var Vt=Et.body||Et.documentElement;return vt&&Dt&&Vt.insertBefore(o.createTextNode(Dt),Vt.childNodes[0]||null),wn===_i?pt.call(Et,Yt?"html":"body")[0]:Yt?Et.documentElement:Vt},An=function(vt){return ft.call(vt.ownerDocument||vt,vt,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},Un=function(vt){return vt instanceof _e||vt instanceof et?!1:typeof vt.nodeName!="string"||typeof vt.textContent!="string"||typeof vt.removeChild!="function"||!(vt.attributes instanceof j)||typeof vt.removeAttribute!="function"||typeof vt.setAttribute!="function"||typeof vt.namespaceURI!="string"||typeof vt.insertBefore!="function"},mn=function(vt){return(typeof d>"u"?"undefined":_typeof(d))==="object"?vt instanceof d:vt&&(typeof vt>"u"?"undefined":_typeof(vt))==="object"&&typeof vt.nodeType=="number"&&typeof vt.nodeName=="string"},Zt=function(vt,Et,Dt){!Ct[vt]||arrayForEach(Ct[vt],function(At){At.call(e,Et,Dt,ln)})},Pn=function(vt){var Et=void 0;if(Zt("beforeSanitizeElements",vt,null),Un(vt)||stringMatch(vt.nodeName,/[\u0080-\uFFFF]/))return Xt(vt),!0;var Dt=stringToLowerCase(vt.nodeName);if(Zt("uponSanitizeElement",vt,{tagName:Dt,allowedTags:Lt}),!mn(vt.firstElementChild)&&(!mn(vt.content)||!mn(vt.content.firstElementChild))&&regExpTest(/<[/\w]/g,vt.innerHTML)&&regExpTest(/<[/\w]/g,vt.textContent)||Dt==="select"&&regExpTest(/<template/i,vt.innerHTML))return Xt(vt),!0;if(!Lt[Dt]||Pt[Dt]){if(Ut&&!qt[Dt]){var At=at(vt)||vt.parentNode,zt=rt(vt)||vt.childNodes;if(zt&&At)for(var Vt=zt.length,Ht=Vt-1;Ht>=0;--Ht)At.insertBefore(ot(zt[Ht],!0),nt(vt))}return Xt(vt),!0}return vt instanceof _&&!Hn(vt)||(Dt==="noscript"||Dt==="noembed")&&regExpTest(/<\/no(script|embed)/i,vt.innerHTML)?(Xt(vt),!0):(jt&&vt.nodeType===3&&(Et=vt.textContent,Et=stringReplace(Et,bt," "),Et=stringReplace(Et,yt," "),vt.textContent!==Et&&(arrayPush(e.removed,{element:vt.cloneNode()}),vt.textContent=Et)),Zt("afterSanitizeElements",vt,null),!1)},Fn=function(vt,Et,Dt){if(Sn&&(Et==="id"||Et==="name")&&(Dt in o||Dt in Vn))return!1;if(!(Wt&&!Ft[Et]&&regExpTest(wt,Et))){if(!(Bt&&regExpTest(Tt,Et))){if(!xt[Et]||Ft[Et])return!1;if(!an[Et]){if(!regExpTest(St,stringReplace(Dt,Rt,""))){if(!((Et==="src"||Et==="xlink:href"||Et==="href")&&vt!=="script"&&stringIndexOf(Dt,"data:")===0&&fn[vt])){if(!(yn&&!regExpTest(kt,stringReplace(Dt,Rt,"")))){if(Dt)return!1}}}}}}return!0},Bn=function(vt){var Et=void 0,Dt=void 0,At=void 0,zt=void 0;Zt("beforeSanitizeAttributes",vt,null);var Vt=vt.attributes;if(!!Vt){var Ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xt};for(zt=Vt.length;zt--;){Et=Vt[zt];var Qt=Et,_n=Qt.name,$n=Qt.namespaceURI;if(Dt=stringTrim(Et.value),At=stringToLowerCase(_n),Ht.attrName=At,Ht.attrValue=Dt,Ht.keepAttr=!0,Ht.forceKeepAttr=void 0,Zt("uponSanitizeAttribute",vt,Ht),Dt=Ht.attrValue,!Ht.forceKeepAttr&&(Rn(_n,vt),!!Ht.keepAttr)){if(regExpTest(/\/>/i,Dt)){Rn(_n,vt);continue}jt&&(Dt=stringReplace(Dt,bt," "),Dt=stringReplace(Dt,yt," "));var Kn=vt.nodeName.toLowerCase();if(!!Fn(Kn,At,Dt))try{$n?vt.setAttributeNS($n,_n,Dt):vt.setAttribute(_n,Dt),arrayPop(e.removed)}catch{}}}Zt("afterSanitizeAttributes",vt,null)}},jn=function Nt(vt){var Et=void 0,Dt=An(vt);for(Zt("beforeSanitizeShadowDOM",vt,null);Et=Dt.nextNode();)Zt("uponSanitizeShadowNode",Et,null),!Pn(Et)&&(Et.content instanceof a&&Nt(Et.content),Bn(Et));Zt("afterSanitizeShadowDOM",vt,null)};return e.sanitize=function(Nt,vt){var Et=void 0,Dt=void 0,At=void 0,zt=void 0,Vt=void 0;if(kn=!Nt,kn&&(Nt="<!-->"),typeof Nt!="string"&&!mn(Nt)){if(typeof Nt.toString!="function")throw typeErrorCreate("toString is not a function");if(Nt=Nt.toString(),typeof Nt!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!e.isSupported){if(_typeof(s.toStaticHTML)==="object"||typeof s.toStaticHTML=="function"){if(typeof Nt=="string")return s.toStaticHTML(Nt);if(mn(Nt))return s.toStaticHTML(Nt.outerHTML)}return Nt}if(on||xn(vt),e.removed=[],typeof Nt=="string"&&(Kt=!1),!Kt)if(Nt instanceof d)Et=On("<!---->"),Dt=Et.ownerDocument.importNode(Nt,!0),Dt.nodeType===1&&Dt.nodeName==="BODY"||Dt.nodeName==="HTML"?Et=Dt:Et.appendChild(Dt);else{if(!Jt&&!jt&&!Yt&&Nt.indexOf("<")===-1)return gt&&rn?gt.createHTML(Nt):Nt;if(Et=On(Nt),!Et)return Jt?null:ht}Et&&un&&Xt(Et.firstChild);for(var Ht=An(Kt?Nt:Et);At=Ht.nextNode();)At.nodeType===3&&At===zt||Pn(At)||(At.content instanceof a&&jn(At.content),Bn(At),zt=At);if(zt=null,Kt)return Nt;if(Jt){if(en)for(Vt=dt.call(Et.ownerDocument);Et.firstChild;)Vt.appendChild(Et.firstChild);else Vt=Et;return hn&&(Vt=mt.call(i,Vt,!0)),Vt}var Qt=Yt?Et.outerHTML:Et.innerHTML;return jt&&(Qt=stringReplace(Qt,bt," "),Qt=stringReplace(Qt,yt," ")),gt&&rn?gt.createHTML(Qt):Qt},e.setConfig=function(Nt){xn(Nt),on=!0},e.clearConfig=function(){ln=null,on=!1},e.isValidAttribute=function(Nt,vt,Et){ln||xn({});var Dt=stringToLowerCase(Nt),At=stringToLowerCase(vt);return Fn(Dt,At,Et)},e.addHook=function(Nt,vt){typeof vt=="function"&&(Ct[Nt]=Ct[Nt]||[],arrayPush(Ct[Nt],vt))},e.removeHook=function(Nt){Ct[Nt]&&arrayPop(Ct[Nt])},e.removeHooks=function(Nt){Ct[Nt]&&(Ct[Nt]=[])},e.removeAllHooks=function(){Ct={}},e}var purify=createDOMPurify();purify.version;purify.isSupported;purify.sanitize;purify.setConfig;purify.clearConfig;purify.isValidAttribute;purify.addHook;purify.removeHook;purify.removeHooks;purify.removeAllHooks;var Schemas;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.vscodeUserData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebook="vscode-notebook",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeInteractive="vscode-interactive",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls",s.vscodeSourceControl="vscode-scm"})(Schemas||(Schemas={}));const connectionTokenQueryName="tkn";class RemoteAuthoritiesImpl{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${Schemas.vscodeRemoteResource}`}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const i=e.authority;let o=this._hosts[i];o&&o.indexOf(":")!==-1&&(o=`[${o}]`);const a=this._ports[i],c=this._connectionTokens[i];let d=`path=${encodeURIComponent(e.path)}`;return typeof c=="string"&&(d+=`&${connectionTokenQueryName}=${encodeURIComponent(c)}`),URI.from({scheme:isWeb?this._preferredWebSchema:Schemas.vscodeRemoteResource,authority:`${o}:${a}`,path:this._remoteResourcesPath,query:d})}}const RemoteAuthorities=new RemoteAuthoritiesImpl;class FileAccessImpl{asBrowserUri(e,i){const o=this.toUri(e,i);return o.scheme===Schemas.vscodeRemote?RemoteAuthorities.rewrite(o):o.scheme===Schemas.file&&(isNative||isWebWorker&&globals.origin===`${Schemas.vscodeFileResource}://${FileAccessImpl.FALLBACK_AUTHORITY}`)?o.with({scheme:Schemas.vscodeFileResource,authority:o.authority||FileAccessImpl.FALLBACK_AUTHORITY,query:null,fragment:null}):o}toUri(e,i){return URI.isUri(e)?e:URI.parse(i.toUrl(e))}}FileAccessImpl.FALLBACK_AUTHORITY="vscode-app";const FileAccess=new FileAccessImpl;function clearNode(s){for(;s.firstChild;)s.firstChild.remove()}function isInDOM(s){var e;return(e=s==null?void 0:s.isConnected)!==null&&e!==void 0?e:!1}class DomListener{constructor(e,i,o,a){this._node=e,this._type=i,this._handler=o,this._options=a||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){!this._handler||(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function addDisposableListener(s,e,i,o){return new DomListener(s,e,i,o)}function _wrapAsStandardMouseEvent(s){return function(e){return s(new StandardMouseEvent(e))}}function _wrapAsStandardKeyboardEvent(s){return function(e){return s(new StandardKeyboardEvent(e))}}const addStandardDisposableListener=function(e,i,o,a){let c=o;return i==="click"||i==="mousedown"?c=_wrapAsStandardMouseEvent(o):(i==="keydown"||i==="keypress"||i==="keyup")&&(c=_wrapAsStandardKeyboardEvent(o)),addDisposableListener(e,i,c,a)};function createEventEmitter(s,e,i){let o=null;const a=b=>_.fire(b),c=()=>{o||(o=new DomListener(s,e,a,i))},d=()=>{o&&(o.dispose(),o=null)},_=new Emitter$1({onFirstListenerAdd:c,onLastListenerRemove:d});return _}let _animationFrame=null;function doRequestAnimationFrame(s){if(!_animationFrame){const e=i=>setTimeout(()=>i(new Date().getTime()),0);_animationFrame=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return _animationFrame.call(self,s)}let runAtThisOrScheduleAtNextAnimationFrame,scheduleAtNextAnimationFrame;class AnimationFrameQueueItem{constructor(e,i=0){this._runner=e,this.priority=i,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){onUnexpectedError(e)}}static sort(e,i){return i.priority-e.priority}}(function(){let s=[],e=null,i=!1,o=!1;const a=()=>{for(i=!1,e=s,s=[],o=!0;e.length>0;)e.sort(AnimationFrameQueueItem.sort),e.shift().execute();o=!1};scheduleAtNextAnimationFrame=(c,d=0)=>{const _=new AnimationFrameQueueItem(c,d);return s.push(_),i||(i=!0,doRequestAnimationFrame(a)),_},runAtThisOrScheduleAtNextAnimationFrame=(c,d)=>{if(o){const _=new AnimationFrameQueueItem(c,d);return e.push(_),_}else return scheduleAtNextAnimationFrame(c,d)}})();function getComputedStyle$1(s){return document.defaultView.getComputedStyle(s,null)}function getClientArea(s){if(s!==document.body)return new Dimension(s.clientWidth,s.clientHeight);if(isIOS&&window.visualViewport)return new Dimension(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new Dimension(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new Dimension(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new Dimension(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class SizeUtils{static convertToPixels(e,i){return parseFloat(i)||0}static getDimension(e,i,o){const a=getComputedStyle$1(e);let c="0";return a&&(a.getPropertyValue?c=a.getPropertyValue(i):c=a.getAttribute(o)),SizeUtils.convertToPixels(e,c)}static getBorderLeftWidth(e){return SizeUtils.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return SizeUtils.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return SizeUtils.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return SizeUtils.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return SizeUtils.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return SizeUtils.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return SizeUtils.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return SizeUtils.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return SizeUtils.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return SizeUtils.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return SizeUtils.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return SizeUtils.getDimension(e,"margin-bottom","marginBottom")}}class Dimension{constructor(e,i){this.width=e,this.height=i}with(e=this.width,i=this.height){return e!==this.width||i!==this.height?new Dimension(e,i):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Dimension?e:new Dimension(e.width,e.height)}static equals(e,i){return e===i?!0:!e||!i?!1:e.width===i.width&&e.height===i.height}}Dimension.None=new Dimension(0,0);function getTopLeftOffset(s){let e=s.offsetParent,i=s.offsetTop,o=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==document.body&&s!==document.documentElement;){i-=s.scrollTop;const a=isShadowRoot(s)?null:getComputedStyle$1(s);a&&(o-=a.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(o+=SizeUtils.getBorderLeftWidth(s),i+=SizeUtils.getBorderTopWidth(s),i+=s.offsetTop,o+=s.offsetLeft,e=s.offsetParent)}return{left:o,top:i}}function getDomNodePagePosition(s){const e=s.getBoundingClientRect();return{left:e.left+StandardWindow.scrollX,top:e.top+StandardWindow.scrollY,width:e.width,height:e.height}}function getDomNodeZoomLevel(s){let e=s,i=1;do{const o=getComputedStyle$1(e).zoom;o!=null&&o!=="1"&&(i*=o),e=e.parentElement}while(e!==null&&e!==document.documentElement);return i}const StandardWindow=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function getTotalWidth(s){const e=SizeUtils.getMarginLeft(s)+SizeUtils.getMarginRight(s);return s.offsetWidth+e}function getContentWidth(s){const e=SizeUtils.getBorderLeftWidth(s)+SizeUtils.getBorderRightWidth(s),i=SizeUtils.getPaddingLeft(s)+SizeUtils.getPaddingRight(s);return s.offsetWidth-e-i}function getContentHeight(s){const e=SizeUtils.getBorderTopWidth(s)+SizeUtils.getBorderBottomWidth(s),i=SizeUtils.getPaddingTop(s)+SizeUtils.getPaddingBottom(s);return s.offsetHeight-e-i}function getTotalHeight(s){const e=SizeUtils.getMarginTop(s)+SizeUtils.getMarginBottom(s);return s.offsetHeight+e}function isAncestor$1(s,e){for(;s;){if(s===e)return!0;s=s.parentNode}return!1}function findParentWithClass(s,e,i){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(i){if(typeof i=="string"){if(s.classList.contains(i))return null}else if(s===i)return null}s=s.parentNode}return null}function hasParentWithClass(s,e,i){return!!findParentWithClass(s,e,i)}function isShadowRoot(s){return s&&!!s.host&&!!s.mode}function isInShadowDOM(s){return!!getShadowRoot(s)}function getShadowRoot(s){for(;s.parentNode;){if(s===document.body)return null;s=s.parentNode}return isShadowRoot(s)?s:null}function getActiveElement(){let s=document.activeElement;for(;s!=null&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function createStyleSheet(s=document.getElementsByTagName("head")[0]){const e=document.createElement("style");return e.type="text/css",e.media="screen",s.appendChild(e),e}let _sharedStyleSheet=null;function getSharedStyleSheet(){return _sharedStyleSheet||(_sharedStyleSheet=createStyleSheet()),_sharedStyleSheet}function createCSSRule(s,e,i=getSharedStyleSheet()){!i||!e||i.sheet.insertRule(s+"{"+e+"}",0)}function isHTMLElement(s){return typeof HTMLElement=="object"?s instanceof HTMLElement:s&&typeof s=="object"&&s.nodeType===1&&typeof s.nodeName=="string"}const EventType$1={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:isWebKit?"webkitAnimationIteration":"animationiteration"},EventHelper={stop:function(s,e){s.preventDefault?s.preventDefault():s.returnValue=!1,e&&(s.stopPropagation?s.stopPropagation():s.cancelBubble=!0)}};function saveParentsScrollTop(s){const e=[];for(let i=0;s&&s.nodeType===s.ELEMENT_NODE;i++)e[i]=s.scrollTop,s=s.parentNode;return e}function restoreParentsScrollTop(s,e){for(let i=0;s&&s.nodeType===s.ELEMENT_NODE;i++)s.scrollTop!==e[i]&&(s.scrollTop=e[i]),s=s.parentNode}class FocusTracker extends Disposable{constructor(e){super(),this._onDidFocus=this._register(new Emitter$1),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Emitter$1),this.onDidBlur=this._onDidBlur.event;let i=FocusTracker.hasFocusWithin(e),o=!1;const a=()=>{o=!1,i||(i=!0,this._onDidFocus.fire())},c=()=>{i&&(o=!0,window.setTimeout(()=>{o&&(o=!1,i=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{FocusTracker.hasFocusWithin(e)!==i&&(i?c():a())},this._register(addDisposableListener(e,EventType$1.FOCUS,a,!0)),this._register(addDisposableListener(e,EventType$1.BLUR,c,!0)),this._register(addDisposableListener(e,EventType$1.FOCUS_IN,()=>this._refreshStateHandler())),this._register(addDisposableListener(e,EventType$1.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const i=getShadowRoot(e),o=i?i.activeElement:document.activeElement;return isAncestor$1(o,e)}}function trackFocus(s){return new FocusTracker(s)}function append$1(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function reset(s,...e){s.innerText="",append$1(s,...e)}const SELECTOR_REGEX=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Namespace;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(Namespace||(Namespace={}));function _$(s,e,i,...o){const a=SELECTOR_REGEX.exec(e);if(!a)throw new Error("Bad use of emmet");i=Object.assign({},i||{});const c=a[1]||"div";let d;return s!==Namespace.HTML?d=document.createElementNS(s,c):d=document.createElement(c),a[3]&&(d.id=a[3]),a[4]&&(d.className=a[4].replace(/\./g," ").trim()),Object.keys(i).forEach(_=>{const b=i[_];typeof b>"u"||(/^on\w+$/.test(_)?d[_]=b:_==="selected"?b&&d.setAttribute(_,"true"):d.setAttribute(_,b))}),d.append(...o),d}function $$5(s,e,...i){return _$(Namespace.HTML,s,e,...i)}$$5.SVG=function(s,e,...i){return _$(Namespace.SVG,s,e,...i)};function show(...s){for(const e of s)e.style.display="",e.removeAttribute("aria-hidden")}function hide(...s){for(const e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}function getElementsByTagName(s){return Array.prototype.slice.call(document.getElementsByTagName(s),0)}function computeScreenAwareSize(s){const e=window.devicePixelRatio*s;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function windowOpenNoOpener(s){window.open(s,"_blank","noopener")}function animate(s){const e=()=>{s(),i=scheduleAtNextAnimationFrame(e)};let i=scheduleAtNextAnimationFrame(e);return toDisposable(()=>i.dispose())}RemoteAuthorities.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function asCSSUrl(s){return s?`url('${FileAccess.asBrowserUri(s).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function asCSSPropertyValue(s){return`'${s.replace(/'/g,"%27")}'`}class ModifierKeyEmitter extends Emitter$1{constructor(){super(),this._subscriptions=new DisposableStore,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(addDisposableListener(window,"keydown",e=>{if(e.defaultPrevented)return;const i=new StandardKeyboardEvent(e);if(!(i.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(addDisposableListener(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(addDisposableListener(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(addDisposableListener(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(addDisposableListener(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(addDisposableListener(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return ModifierKeyEmitter.instance||(ModifierKeyEmitter.instance=new ModifierKeyEmitter),ModifierKeyEmitter.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class DragAndDropObserver extends Disposable{constructor(e,i){super(),this.element=e,this.callbacks=i,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this._register(addDisposableListener(this.element,EventType$1.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter(e)})),this._register(addDisposableListener(this.element,EventType$1.DRAG_OVER,e=>{var i,o;e.preventDefault(),(o=(i=this.callbacks).onDragOver)===null||o===void 0||o.call(i,e,e.timeStamp-this.dragStartTime)})),this._register(addDisposableListener(this.element,EventType$1.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave(e))})),this._register(addDisposableListener(this.element,EventType$1.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd(e)})),this._register(addDisposableListener(this.element,EventType$1.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop(e)}))}}const aria="",MAX_MESSAGE_LENGTH=2e4;let ariaContainer,alertContainer,alertContainer2,statusContainer,statusContainer2;function setARIAContainer(s){ariaContainer=document.createElement("div"),ariaContainer.className="monaco-aria-container";const e=()=>{const o=document.createElement("div");return o.className="monaco-alert",o.setAttribute("role","alert"),o.setAttribute("aria-atomic","true"),ariaContainer.appendChild(o),o};alertContainer=e(),alertContainer2=e();const i=()=>{const o=document.createElement("div");return o.className="monaco-status",o.setAttribute("role","complementary"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),ariaContainer.appendChild(o),o};statusContainer=i(),statusContainer2=i(),s.appendChild(ariaContainer)}function alert(s){!ariaContainer||(alertContainer.textContent!==s?(clearNode(alertContainer2),insertMessage(alertContainer,s)):(clearNode(alertContainer),insertMessage(alertContainer2,s)))}function status(s){!ariaContainer||(isMacintosh?alert(s):statusContainer.textContent!==s?(clearNode(statusContainer2),insertMessage(statusContainer,s)):(clearNode(statusContainer),insertMessage(statusContainer2,s)))}function insertMessage(s,e){clearNode(s),e.length>MAX_MESSAGE_LENGTH&&(e=e.substr(0,MAX_MESSAGE_LENGTH)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}const IMarkerDecorationsService=createDecorator("markerDecorationsService"),ITextModelService=createDecorator("textModelService");var __awaiter$l=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class Action extends Disposable{constructor(e,i="",o="",a=!0,c){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=i,this._cssClass=o,this._enabled=a,this._actionCallback=c}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,i){return __awaiter$l(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class ActionRunner extends Disposable{constructor(){super(...arguments),this._onBeforeRun=this._register(new Emitter$1),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new Emitter$1),this.onDidRun=this._onDidRun.event}run(e,i){return __awaiter$l(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let o;try{yield this.runAction(e,i)}catch(a){o=a}this._onDidRun.fire({action:e,error:o})})}runAction(e,i){return __awaiter$l(this,void 0,void 0,function*(){yield e.run(i)})}}class Separator extends Action{constructor(e){super(Separator.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Separator.ID="vs.actions.separator";class SubmenuAction{constructor(e,i,o,a){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=i,this.class=a,this._actions=o}get actions(){return this._actions}dispose(){}run(){return __awaiter$l(this,void 0,void 0,function*(){})}}class EmptySubmenuAction extends Action{constructor(){super(EmptySubmenuAction.ID,localize("submenu.empty","(empty)"),void 0,!1)}}EmptySubmenuAction.ID="vs.actions.empty";function toAction(s){var e,i;return{id:s.id,label:s.label,class:void 0,enabled:(e=s.enabled)!==null&&e!==void 0?e:!0,checked:(i=s.checked)!==null&&i!==void 0?i:!1,run:()=>__awaiter$l(this,void 0,void 0,function*(){return s.run()}),tooltip:s.label,dispose:()=>{}}}const ICommandService=createDecorator("commandService"),CommandsRegistry=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Emitter$1,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.description){const d=[];for(const b of s.description.args)d.push(b.constraint);const _=s.handler;s.handler=function(b,...k){return validateConstraints(k,d),_(b,...k)}}const{id:i}=s;let o=this._commands.get(i);o||(o=new LinkedList,this._commands.set(i,o));const a=o.unshift(s),c=toDisposable(()=>{a();const d=this._commands.get(i);d!=null&&d.isEmpty()&&this._commands.delete(i)});return this._onDidRegisterCommand.fire(i),c}registerCommandAlias(s,e){return CommandsRegistry.registerCommand(s,(i,...o)=>i.get(ICommandService).executeCommand(e,...o))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return Iterable.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const i=this.getCommand(e);i&&s.set(e,i)}return s}};CommandsRegistry.registerCommand("noop",()=>{});const CONSTANT_VALUES=new Map;CONSTANT_VALUES.set("false",!1);CONSTANT_VALUES.set("true",!0);CONSTANT_VALUES.set("isMac",isMacintosh);CONSTANT_VALUES.set("isLinux",isLinux);CONSTANT_VALUES.set("isWindows",isWindows);CONSTANT_VALUES.set("isWeb",isWeb);CONSTANT_VALUES.set("isMacNative",isMacintosh&&!isWeb);CONSTANT_VALUES.set("isEdge",isEdge);CONSTANT_VALUES.set("isFirefox",isFirefox$1);CONSTANT_VALUES.set("isChrome",isChrome$1);CONSTANT_VALUES.set("isSafari",isSafari$1);const hasOwnProperty$1=Object.prototype.hasOwnProperty;class ContextKeyExpr{static has(e){return ContextKeyDefinedExpr.create(e)}static equals(e,i){return ContextKeyEqualsExpr.create(e,i)}static regex(e,i){return ContextKeyRegexExpr.create(e,i)}static not(e){return ContextKeyNotExpr.create(e)}static and(...e){return ContextKeyAndExpr.create(e,null)}static or(...e){return ContextKeyOrExpr.create(e,null,!0)}static deserialize(e,i=!1){if(!!e)return this._deserializeOrExpression(e,i)}static _deserializeOrExpression(e,i){const o=e.split("||");return ContextKeyOrExpr.create(o.map(a=>this._deserializeAndExpression(a,i)),null,!0)}static _deserializeAndExpression(e,i){const o=e.split("&&");return ContextKeyAndExpr.create(o.map(a=>this._deserializeOne(a,i)),null)}static _deserializeOne(e,i){if(e=e.trim(),e.indexOf("!=")>=0){const o=e.split("!=");return ContextKeyNotEqualsExpr.create(o[0].trim(),this._deserializeValue(o[1],i))}if(e.indexOf("==")>=0){const o=e.split("==");return ContextKeyEqualsExpr.create(o[0].trim(),this._deserializeValue(o[1],i))}if(e.indexOf("=~")>=0){const o=e.split("=~");return ContextKeyRegexExpr.create(o[0].trim(),this._deserializeRegexValue(o[1],i))}if(e.indexOf(" not in ")>=0){const o=e.split(" not in ");return ContextKeyNotInExpr.create(o[0].trim(),o[1].trim())}if(e.indexOf(" in ")>=0){const o=e.split(" in ");return ContextKeyInExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const o=e.split(">=");return ContextKeyGreaterEqualsExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const o=e.split(">");return ContextKeyGreaterExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const o=e.split("<=");return ContextKeySmallerEqualsExpr.create(o[0].trim(),o[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const o=e.split("<");return ContextKeySmallerExpr.create(o[0].trim(),o[1].trim())}return/^\!\s*/.test(e)?ContextKeyNotExpr.create(e.substr(1).trim()):ContextKeyDefinedExpr.create(e)}static _deserializeValue(e,i){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const o=/^'([^']*)'$/.exec(e);return o?o[1].trim():e}static _deserializeRegexValue(e,i){if(isFalsyOrWhitespace(e)){if(i)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const o=e.indexOf("/"),a=e.lastIndexOf("/");if(o===a||o<0){if(i)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}const c=e.slice(o+1,a),d=e[a+1]==="i"?"i":"";try{return new RegExp(c,d)}catch(_){if(i)throw new Error(`bad regexp-value '${e}', parse error: ${_}`);return console.warn(`bad regexp-value '${e}', parse error: ${_}`),null}}}function expressionsAreEqualWithConstantSubstitution(s,e){const i=s?s.substituteConstants():void 0,o=e?e.substituteConstants():void 0;return!i&&!o?!0:!i||!o?!1:i.equals(o)}function cmp(s,e){return s.cmp(e)}class ContextKeyFalseExpr{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ContextKeyTrueExpr.INSTANCE}}ContextKeyFalseExpr.INSTANCE=new ContextKeyFalseExpr;class ContextKeyTrueExpr{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return ContextKeyFalseExpr.INSTANCE}}ContextKeyTrueExpr.INSTANCE=new ContextKeyTrueExpr;class ContextKeyDefinedExpr{constructor(e,i){this.key=e,this.negated=i,this.type=2}static create(e,i=null){const o=CONSTANT_VALUES.get(e);return typeof o=="boolean"?o?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyDefinedExpr(e,i)}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=CONSTANT_VALUES.get(this.key);return typeof e=="boolean"?e?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotExpr.create(this.key,this)),this.negated}}class ContextKeyEqualsExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=4}static create(e,i,o=null){if(typeof i=="boolean")return i?ContextKeyDefinedExpr.create(e,o):ContextKeyNotExpr.create(e,o);const a=CONSTANT_VALUES.get(e);return typeof a=="boolean"?i===(a?"true":"false")?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE:new ContextKeyEqualsExpr(e,i,o)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=CONSTANT_VALUES.get(this.key);if(typeof e=="boolean"){const i=e?"true":"false";return this.value===i?ContextKeyTrueExpr.INSTANCE:ContextKeyFalseExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyInExpr{constructor(e,i){this.key=e,this.valueKey=i,this.type=10,this.negated=null}static create(e,i){return new ContextKeyInExpr(e,i)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const i=e.getValue(this.valueKey),o=e.getValue(this.key);return Array.isArray(i)?i.includes(o):typeof o=="string"&&typeof i=="object"&&i!==null?hasOwnProperty$1.call(i,o):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=ContextKeyNotInExpr.create(this.key,this.valueKey)),this.negated}}class ContextKeyNotInExpr{constructor(e,i){this.key=e,this.valueKey=i,this.type=11,this._negated=ContextKeyInExpr.create(e,i)}static create(e,i){return new ContextKeyNotInExpr(e,i)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class ContextKeyNotEqualsExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=5}static create(e,i,o=null){if(typeof i=="boolean")return i?ContextKeyNotExpr.create(e,o):ContextKeyDefinedExpr.create(e,o);const a=CONSTANT_VALUES.get(e);return typeof a=="boolean"?i===(a?"true":"false")?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotEqualsExpr(e,i,o)}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=CONSTANT_VALUES.get(this.key);if(typeof e=="boolean"){const i=e?"true":"false";return this.value===i?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyNotExpr{constructor(e,i){this.key=e,this.negated=i,this.type=3}static create(e,i=null){const o=CONSTANT_VALUES.get(e);return typeof o=="boolean"?o?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:new ContextKeyNotExpr(e,i)}cmp(e){return e.type!==this.type?this.type-e.type:cmp1(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=CONSTANT_VALUES.get(this.key);return typeof e=="boolean"?e?ContextKeyFalseExpr.INSTANCE:ContextKeyTrueExpr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyDefinedExpr.create(this.key,this)),this.negated}}function withFloatOrStr(s,e){if(typeof s=="string"){const i=parseFloat(s);isNaN(i)||(s=i)}return typeof s=="string"||typeof s=="number"?e(s):ContextKeyFalseExpr.INSTANCE}class ContextKeyGreaterExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=12}static create(e,i,o=null){return withFloatOrStr(i,a=>new ContextKeyGreaterExpr(e,a,o))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyGreaterEqualsExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=13}static create(e,i,o=null){return withFloatOrStr(i,a=>new ContextKeyGreaterEqualsExpr(e,a,o))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeySmallerExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=14}static create(e,i,o=null){return withFloatOrStr(i,a=>new ContextKeySmallerExpr(e,a,o))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterEqualsExpr.create(this.key,this.value,this)),this.negated}}class ContextKeySmallerEqualsExpr{constructor(e,i,o){this.key=e,this.value=i,this.negated=o,this.type=15}static create(e,i,o=null){return withFloatOrStr(i,a=>new ContextKeySmallerEqualsExpr(e,a,o))}cmp(e){return e.type!==this.type?this.type-e.type:cmp2(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyGreaterExpr.create(this.key,this.value,this)),this.negated}}class ContextKeyRegexExpr{constructor(e,i){this.key=e,this.regexp=i,this.type=7,this.negated=null}static create(e,i){return new ContextKeyRegexExpr(e,i)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const i=this.regexp?this.regexp.source:"",o=e.regexp?e.regexp.source:"";return i<o?-1:i>o?1:0}equals(e){if(e.type===this.type){const i=this.regexp?this.regexp.source:"",o=e.regexp?e.regexp.source:"";return this.key===e.key&&i===o}return!1}substituteConstants(){return this}evaluate(e){const i=e.getValue(this.key);return this.regexp?this.regexp.test(i):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ContextKeyNotRegexExpr.create(this)),this.negated}}class ContextKeyNotRegexExpr{constructor(e){this._actual=e,this.type=8}static create(e){return new ContextKeyNotRegexExpr(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function eliminateConstantsInArray(s){let e=null;for(let i=0,o=s.length;i<o;i++){const a=s[i].substituteConstants();if(s[i]!==a&&e===null){e=[];for(let c=0;c<i;c++)e[c]=s[c]}e!==null&&(e[i]=a)}return e===null?s:e}class ContextKeyAndExpr{constructor(e,i){this.expr=e,this.negated=i,this.type=6}static create(e,i){return ContextKeyAndExpr._normalizeArr(e,i)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let i=0,o=this.expr.length;i<o;i++){const a=cmp(this.expr[i],e.expr[i]);if(a!==0)return a}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let i=0,o=this.expr.length;i<o;i++)if(!this.expr[i].equals(e.expr[i]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyAndExpr.create(e,this.negated)}evaluate(e){for(let i=0,o=this.expr.length;i<o;i++)if(!this.expr[i].evaluate(e))return!1;return!0}static _normalizeArr(e,i){const o=[];let a=!1;for(const c of e)if(!!c){if(c.type===1){a=!0;continue}if(c.type===0)return ContextKeyFalseExpr.INSTANCE;if(c.type===6){o.push(...c.expr);continue}o.push(c)}if(o.length===0&&a)return ContextKeyTrueExpr.INSTANCE;if(o.length!==0){if(o.length===1)return o[0];o.sort(cmp);for(let c=1;c<o.length;c++)o[c-1].equals(o[c])&&(o.splice(c,1),c--);if(o.length===1)return o[0];for(;o.length>1;){const c=o[o.length-1];if(c.type!==9)break;o.pop();const d=o.pop(),_=o.length===0,b=ContextKeyOrExpr.create(c.expr.map(k=>ContextKeyAndExpr.create([k,d],null)),null,_);b&&(o.push(b),o.sort(cmp))}return o.length===1?o[0]:new ContextKeyAndExpr(o,i)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const i of this.expr)e.push(...i.keys());return e}negate(){if(!this.negated){const e=[];for(const i of this.expr)e.push(i.negate());this.negated=ContextKeyOrExpr.create(e,this,!0)}return this.negated}}class ContextKeyOrExpr{constructor(e,i){this.expr=e,this.negated=i,this.type=9}static create(e,i,o){return ContextKeyOrExpr._normalizeArr(e,i,o)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let i=0,o=this.expr.length;i<o;i++){const a=cmp(this.expr[i],e.expr[i]);if(a!==0)return a}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let i=0,o=this.expr.length;i<o;i++)if(!this.expr[i].equals(e.expr[i]))return!1;return!0}return!1}substituteConstants(){const e=eliminateConstantsInArray(this.expr);return e===this.expr?this:ContextKeyOrExpr.create(e,this.negated,!1)}evaluate(e){for(let i=0,o=this.expr.length;i<o;i++)if(this.expr[i].evaluate(e))return!0;return!1}static _normalizeArr(e,i,o){let a=[],c=!1;if(e){for(let d=0,_=e.length;d<_;d++){const b=e[d];if(!!b){if(b.type===0){c=!0;continue}if(b.type===1)return ContextKeyTrueExpr.INSTANCE;if(b.type===9){a=a.concat(b.expr);continue}a.push(b)}}if(a.length===0&&c)return ContextKeyFalseExpr.INSTANCE;a.sort(cmp)}if(a.length!==0){if(a.length===1)return a[0];for(let d=1;d<a.length;d++)a[d-1].equals(a[d])&&(a.splice(d,1),d--);if(a.length===1)return a[0];if(o){for(let d=0;d<a.length;d++)for(let _=d+1;_<a.length;_++)implies(a[d],a[_])&&(a.splice(_,1),_--);if(a.length===1)return a[0]}return new ContextKeyOrExpr(a,i)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const i of this.expr)e.push(...i.keys());return e}negate(){if(!this.negated){const e=[];for(const i of this.expr)e.push(i.negate());for(;e.length>1;){const i=e.shift(),o=e.shift(),a=[];for(const d of getTerminals(i))for(const _ of getTerminals(o))a.push(ContextKeyAndExpr.create([d,_],null));const c=e.length===0;e.unshift(ContextKeyOrExpr.create(a,null,c))}this.negated=e[0]}return this.negated}}class RawContextKey extends ContextKeyDefinedExpr{constructor(e,i,o){super(e,null),this._defaultValue=i,typeof o=="object"?RawContextKey._info.push(Object.assign(Object.assign({},o),{key:e})):o!==!0&&RawContextKey._info.push({key:e,description:o,type:i!=null?typeof i:void 0})}static all(){return RawContextKey._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return ContextKeyEqualsExpr.create(this.key,e)}}RawContextKey._info=[];const IContextKeyService=createDecorator("contextKeyService"),SET_CONTEXT_COMMAND_ID="setContext";function cmp1(s,e){return s<e?-1:s>e?1:0}function cmp2(s,e,i,o){return s<i?-1:s>i?1:e<o?-1:e>o?1:0}function implies(s,e){if(e.type===6&&s.type!==9&&s.type!==6){for(const a of e.expr)if(s.equals(a))return!0}const i=s.negate(),o=getTerminals(i).concat(getTerminals(e));o.sort(cmp);for(let a=0;a<o.length;a++){const d=o[a].negate();for(let _=a+1;_<o.length;_++){const b=o[_];if(d.equals(b))return!0}}return!1}function getTerminals(s){return s.type===9?s.expr:[s]}var ColorScheme;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST_DARK="hcDark",s.HIGH_CONTRAST_LIGHT="hcLight"})(ColorScheme||(ColorScheme={}));function isHighContrast(s){return s===ColorScheme.HIGH_CONTRAST_DARK||s===ColorScheme.HIGH_CONTRAST_LIGHT}function isDark(s){return s===ColorScheme.DARK||s===ColorScheme.HIGH_CONTRAST_DARK}const IThemeService=createDecorator("themeService");var ThemeColor;(function(s){function e(i){return i&&typeof i=="object"&&typeof i.id=="string"}s.isThemeColor=e})(ThemeColor||(ThemeColor={}));function themeColorFromId(s){return{id:s}}var ThemeIcon;(function(s){function e(k){return k&&typeof k=="object"&&typeof k.id=="string"&&(typeof k.color>"u"||ThemeColor.isThemeColor(k.color))}s.isThemeIcon=e;const i=new RegExp(`^\\$\\((${CSSIcon.iconNameExpression}(?:${CSSIcon.iconModifierExpression})?)\\)$`);function o(k){const j=i.exec(k);if(!j)return;const[,_e]=j;return{id:_e}}s.fromString=o;function a(k){return{id:k}}s.fromId=a;function c(k,j){let _e=k.id;const et=_e.lastIndexOf("~");return et!==-1&&(_e=_e.substring(0,et)),j&&(_e=`${_e}~${j}`),{id:_e}}s.modify=c;function d(k){const j=k.id.lastIndexOf("~");if(j!==-1)return k.id.substring(j+1)}s.getModifier=d;function _(k,j){var _e,et;return k.id===j.id&&((_e=k.color)===null||_e===void 0?void 0:_e.id)===((et=j.color)===null||et===void 0?void 0:et.id)}s.isEqual=_;function b(k,j){return{id:k.id,color:j?themeColorFromId(j):void 0}}s.asThemeIcon=b,s.asClassNameArray=CSSIcon.asClassNameArray,s.asClassName=CSSIcon.asClassName,s.asCSSSelector=CSSIcon.asCSSSelector})(ThemeIcon||(ThemeIcon={}));function getThemeTypeSelector(s){switch(s){case ColorScheme.DARK:return"vs-dark";case ColorScheme.HIGH_CONTRAST_DARK:return"hc-black";case ColorScheme.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const Extensions$5={ThemingContribution:"base.contributions.theming"};class ThemingRegistry{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new Emitter$1}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),toDisposable(()=>{const i=this.themingParticipants.indexOf(e);this.themingParticipants.splice(i,1)})}getThemingParticipants(){return this.themingParticipants}}const themingRegistry$1=new ThemingRegistry;Registry.add(Extensions$5.ThemingContribution,themingRegistry$1);function registerThemingParticipant(s){return themingRegistry$1.onColorThemeChange(s)}class Themable extends Disposable{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(i=>this.onThemeChange(i)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var __decorate$y=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$s=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};function isIMenuItem(s){return s.command!==void 0}class MenuId{constructor(e){if(MenuId._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);MenuId._instances.set(e,this),this.id=e}}MenuId._instances=new Map;MenuId.CommandPalette=new MenuId("CommandPalette");MenuId.DebugBreakpointsContext=new MenuId("DebugBreakpointsContext");MenuId.DebugCallStackContext=new MenuId("DebugCallStackContext");MenuId.DebugConsoleContext=new MenuId("DebugConsoleContext");MenuId.DebugVariablesContext=new MenuId("DebugVariablesContext");MenuId.DebugWatchContext=new MenuId("DebugWatchContext");MenuId.DebugToolBar=new MenuId("DebugToolBar");MenuId.DebugToolBarStop=new MenuId("DebugToolBarStop");MenuId.EditorContext=new MenuId("EditorContext");MenuId.SimpleEditorContext=new MenuId("SimpleEditorContext");MenuId.EditorContextCopy=new MenuId("EditorContextCopy");MenuId.EditorContextPeek=new MenuId("EditorContextPeek");MenuId.EditorContextShare=new MenuId("EditorContextShare");MenuId.EditorTitle=new MenuId("EditorTitle");MenuId.EditorTitleRun=new MenuId("EditorTitleRun");MenuId.EditorTitleContext=new MenuId("EditorTitleContext");MenuId.EmptyEditorGroup=new MenuId("EmptyEditorGroup");MenuId.EmptyEditorGroupContext=new MenuId("EmptyEditorGroupContext");MenuId.ExplorerContext=new MenuId("ExplorerContext");MenuId.ExtensionContext=new MenuId("ExtensionContext");MenuId.GlobalActivity=new MenuId("GlobalActivity");MenuId.CommandCenter=new MenuId("CommandCenter");MenuId.LayoutControlMenuSubmenu=new MenuId("LayoutControlMenuSubmenu");MenuId.LayoutControlMenu=new MenuId("LayoutControlMenu");MenuId.MenubarMainMenu=new MenuId("MenubarMainMenu");MenuId.MenubarAppearanceMenu=new MenuId("MenubarAppearanceMenu");MenuId.MenubarDebugMenu=new MenuId("MenubarDebugMenu");MenuId.MenubarEditMenu=new MenuId("MenubarEditMenu");MenuId.MenubarCopy=new MenuId("MenubarCopy");MenuId.MenubarFileMenu=new MenuId("MenubarFileMenu");MenuId.MenubarGoMenu=new MenuId("MenubarGoMenu");MenuId.MenubarHelpMenu=new MenuId("MenubarHelpMenu");MenuId.MenubarLayoutMenu=new MenuId("MenubarLayoutMenu");MenuId.MenubarNewBreakpointMenu=new MenuId("MenubarNewBreakpointMenu");MenuId.MenubarPanelAlignmentMenu=new MenuId("MenubarPanelAlignmentMenu");MenuId.MenubarPanelPositionMenu=new MenuId("MenubarPanelPositionMenu");MenuId.MenubarPreferencesMenu=new MenuId("MenubarPreferencesMenu");MenuId.MenubarRecentMenu=new MenuId("MenubarRecentMenu");MenuId.MenubarSelectionMenu=new MenuId("MenubarSelectionMenu");MenuId.MenubarShare=new MenuId("MenubarShare");MenuId.MenubarSwitchEditorMenu=new MenuId("MenubarSwitchEditorMenu");MenuId.MenubarSwitchGroupMenu=new MenuId("MenubarSwitchGroupMenu");MenuId.MenubarTerminalMenu=new MenuId("MenubarTerminalMenu");MenuId.MenubarViewMenu=new MenuId("MenubarViewMenu");MenuId.MenubarHomeMenu=new MenuId("MenubarHomeMenu");MenuId.OpenEditorsContext=new MenuId("OpenEditorsContext");MenuId.ProblemsPanelContext=new MenuId("ProblemsPanelContext");MenuId.SCMChangeContext=new MenuId("SCMChangeContext");MenuId.SCMResourceContext=new MenuId("SCMResourceContext");MenuId.SCMResourceFolderContext=new MenuId("SCMResourceFolderContext");MenuId.SCMResourceGroupContext=new MenuId("SCMResourceGroupContext");MenuId.SCMSourceControl=new MenuId("SCMSourceControl");MenuId.SCMTitle=new MenuId("SCMTitle");MenuId.SearchContext=new MenuId("SearchContext");MenuId.StatusBarWindowIndicatorMenu=new MenuId("StatusBarWindowIndicatorMenu");MenuId.StatusBarRemoteIndicatorMenu=new MenuId("StatusBarRemoteIndicatorMenu");MenuId.TestItem=new MenuId("TestItem");MenuId.TestItemGutter=new MenuId("TestItemGutter");MenuId.TestPeekElement=new MenuId("TestPeekElement");MenuId.TestPeekTitle=new MenuId("TestPeekTitle");MenuId.TouchBarContext=new MenuId("TouchBarContext");MenuId.TitleBarContext=new MenuId("TitleBarContext");MenuId.TitleBarTitleContext=new MenuId("TitleBarTitleContext");MenuId.TunnelContext=new MenuId("TunnelContext");MenuId.TunnelPrivacy=new MenuId("TunnelPrivacy");MenuId.TunnelProtocol=new MenuId("TunnelProtocol");MenuId.TunnelPortInline=new MenuId("TunnelInline");MenuId.TunnelTitle=new MenuId("TunnelTitle");MenuId.TunnelLocalAddressInline=new MenuId("TunnelLocalAddressInline");MenuId.TunnelOriginInline=new MenuId("TunnelOriginInline");MenuId.ViewItemContext=new MenuId("ViewItemContext");MenuId.ViewContainerTitle=new MenuId("ViewContainerTitle");MenuId.ViewContainerTitleContext=new MenuId("ViewContainerTitleContext");MenuId.ViewTitle=new MenuId("ViewTitle");MenuId.ViewTitleContext=new MenuId("ViewTitleContext");MenuId.CommentThreadTitle=new MenuId("CommentThreadTitle");MenuId.CommentThreadActions=new MenuId("CommentThreadActions");MenuId.CommentTitle=new MenuId("CommentTitle");MenuId.CommentActions=new MenuId("CommentActions");MenuId.InteractiveToolbar=new MenuId("InteractiveToolbar");MenuId.InteractiveCellTitle=new MenuId("InteractiveCellTitle");MenuId.InteractiveCellDelete=new MenuId("InteractiveCellDelete");MenuId.InteractiveCellExecute=new MenuId("InteractiveCellExecute");MenuId.InteractiveInputExecute=new MenuId("InteractiveInputExecute");MenuId.NotebookToolbar=new MenuId("NotebookToolbar");MenuId.NotebookCellTitle=new MenuId("NotebookCellTitle");MenuId.NotebookCellDelete=new MenuId("NotebookCellDelete");MenuId.NotebookCellInsert=new MenuId("NotebookCellInsert");MenuId.NotebookCellBetween=new MenuId("NotebookCellBetween");MenuId.NotebookCellListTop=new MenuId("NotebookCellTop");MenuId.NotebookCellExecute=new MenuId("NotebookCellExecute");MenuId.NotebookCellExecutePrimary=new MenuId("NotebookCellExecutePrimary");MenuId.NotebookDiffCellInputTitle=new MenuId("NotebookDiffCellInputTitle");MenuId.NotebookDiffCellMetadataTitle=new MenuId("NotebookDiffCellMetadataTitle");MenuId.NotebookDiffCellOutputsTitle=new MenuId("NotebookDiffCellOutputsTitle");MenuId.NotebookOutputToolbar=new MenuId("NotebookOutputToolbar");MenuId.NotebookEditorLayoutConfigure=new MenuId("NotebookEditorLayoutConfigure");MenuId.NotebookKernelSource=new MenuId("NotebookKernelSource");MenuId.BulkEditTitle=new MenuId("BulkEditTitle");MenuId.BulkEditContext=new MenuId("BulkEditContext");MenuId.TimelineItemContext=new MenuId("TimelineItemContext");MenuId.TimelineTitle=new MenuId("TimelineTitle");MenuId.TimelineTitleContext=new MenuId("TimelineTitleContext");MenuId.TimelineFilterSubMenu=new MenuId("TimelineFilterSubMenu");MenuId.AccountsContext=new MenuId("AccountsContext");MenuId.PanelTitle=new MenuId("PanelTitle");MenuId.AuxiliaryBarTitle=new MenuId("AuxiliaryBarTitle");MenuId.TerminalInstanceContext=new MenuId("TerminalInstanceContext");MenuId.TerminalEditorInstanceContext=new MenuId("TerminalEditorInstanceContext");MenuId.TerminalNewDropdownContext=new MenuId("TerminalNewDropdownContext");MenuId.TerminalTabContext=new MenuId("TerminalTabContext");MenuId.TerminalTabEmptyAreaContext=new MenuId("TerminalTabEmptyAreaContext");MenuId.TerminalInlineTabContext=new MenuId("TerminalInlineTabContext");MenuId.WebviewContext=new MenuId("WebviewContext");MenuId.InlineCompletionsActions=new MenuId("InlineCompletionsActions");MenuId.NewFile=new MenuId("NewFile");MenuId.MergeToolbar=new MenuId("MergeToolbar");MenuId.MergeInput1Toolbar=new MenuId("MergeToolbar1Toolbar");MenuId.MergeInput2Toolbar=new MenuId("MergeToolbar2Toolbar");const IMenuService=createDecorator("menuService"),MenuRegistry=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Emitter$1,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:s=>s===MenuId.CommandPalette}}addCommand(s){return this.addCommands(Iterable.single(s))}addCommands(s){for(const e of s)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),toDisposable(()=>{let e=!1;for(const i of s)e=this._commands.delete(i.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,i)=>s.set(i,e)),s}appendMenuItem(s,e){return this.appendMenuItems(Iterable.single({id:s,item:e}))}appendMenuItems(s){const e=new Set,i=new LinkedList;for(const{id:o,item:a}of s){let c=this._menuItems.get(o);c||(c=new LinkedList,this._menuItems.set(o,c)),i.push(c.push(a)),e.add(o)}return this._onDidChangeMenu.fire(e),toDisposable(()=>{if(i.size>0){for(const o of i)o();this._onDidChangeMenu.fire(e),i.clear()}})}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===MenuId.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const i of s)isIMenuItem(i)&&(e.add(i.command.id),i.alt&&e.add(i.alt.id));this._commands.forEach((i,o)=>{e.has(o)||s.push({command:i})})}};class SubmenuItemAction extends SubmenuAction{constructor(e,i,o,a){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=i,this._contextKeyService=o,this._options=a}get actions(){const e=[],i=this._menuService.createMenu(this.item.submenu,this._contextKeyService),o=i.getActions(this._options);i.dispose();for(const[,a]of o)a.length>0&&(e.push(...a),e.push(new Separator));return e.length&&e.pop(),e}}let MenuItemAction=class zn{constructor(e,i,o,a,c,d){var _,b;if(this.hideActions=a,this._commandService=d,this.id=e.id,this.label=(o==null?void 0:o.renderShortTitle)&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(b=typeof e.tooltip=="string"?e.tooltip:(_=e.tooltip)===null||_===void 0?void 0:_.value)!==null&&b!==void 0?b:"",this.enabled=!e.precondition||c.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const k=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=c.contextMatchesRules(k.condition),this.checked&&k.tooltip&&(this.tooltip=typeof k.tooltip=="string"?k.tooltip:k.tooltip.value),k.title&&(this.label=typeof k.title=="string"?k.title:k.title.value)}this.item=e,this.alt=i?new zn(i,void 0,o,a,c,d):void 0,this._options=o,ThemeIcon.isThemeIcon(e.icon)&&(this.class=CSSIcon.asClassName(e.icon))}dispose(){}run(...e){var i,o;let a=[];return!((i=this._options)===null||i===void 0)&&i.arg&&(a=[...a,this._options.arg]),!((o=this._options)===null||o===void 0)&&o.shouldForwardArgs&&(a=[...a,...e]),this._commandService.executeCommand(this.id,...a)}};MenuItemAction=__decorate$y([__param$s(4,IContextKeyService),__param$s(5,ICommandService)],MenuItemAction);class KeybindingsRegistryImpl{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(OS===1){if(e&&e.win)return e.win}else if(OS===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const i=KeybindingsRegistryImpl.bindToCurrentPlatform(e);if(i&&i.primary){const o=createKeybinding(i.primary,OS);o&&this._registerDefaultKeybinding(o,e.id,e.args,e.weight,0,e.when)}if(i&&Array.isArray(i.secondary))for(let o=0,a=i.secondary.length;o<a;o++){const c=i.secondary[o],d=createKeybinding(c,OS);d&&this._registerDefaultKeybinding(d,e.id,e.args,e.weight,-o-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),CommandsRegistry.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,i){e.ctrlKey&&e.altKey&&!e.metaKey&&KeybindingsRegistryImpl._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",i)}_registerDefaultKeybinding(e,i,o,a,c,d){OS===1&&this._assertNoCtrlAlt(e.parts[0],i),this._coreKeybindings.push({keybinding:e.parts,command:i,commandArgs:o,when:d,weight1:a,weight2:c,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(sorter)),this._cachedMergedKeybindings.slice(0)}}const KeybindingsRegistry=new KeybindingsRegistryImpl,Extensions$4={EditorModes:"platform.keybindingsRegistry"};Registry.add(Extensions$4.EditorModes,KeybindingsRegistry);function sorter(s,e){if(s.weight1!==e.weight1)return s.weight1-e.weight1;if(s.command&&e.command){if(s.command<e.command)return-1;if(s.command>e.command)return 1}return s.weight2-e.weight2}const ITelemetryService=createDecorator("telemetryService");class Command{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const i of e){let o=i.kbExpr;this.precondition&&(o?o=ContextKeyExpr.and(o,this.precondition):o=this.precondition);const a={id:this.id,weight:i.weight,args:i.args,when:o,primary:i.primary,secondary:i.secondary,win:i.win,linux:i.linux,mac:i.mac};KeybindingsRegistry.registerKeybindingRule(a)}}CommandsRegistry.registerCommand({id:this.id,handler:(e,i)=>this.runCommand(e,i),description:this._description})}_registerMenuItem(e){MenuRegistry.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class MultiCommand extends Command{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,i,o){return this._implementations.push({priority:e,name:i,implementation:o}),this._implementations.sort((a,c)=>c.priority-a.priority),{dispose:()=>{for(let a=0;a<this._implementations.length;a++)if(this._implementations[a].implementation===o){this._implementations.splice(a,1);return}}}}runCommand(e,i){const o=e.get(ILogService);o.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const a of this._implementations){const c=a.implementation(e,i);if(c)return o.trace(`Command '${this.id}' was handled by '${a.name}'.`),typeof c=="boolean"?void 0:c}o.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class ProxyCommand extends Command{constructor(e,i){super(i),this.command=e}runCommand(e,i){return this.command.runCommand(e,i)}}class EditorCommand extends Command{static bindToContribution(e){return class extends EditorCommand{constructor(o){super(o),this._callback=o.handler}runEditorCommand(o,a,c){const d=e(a);d&&this._callback(d,c)}}}static runEditorCommand(e,i,o,a){const c=e.get(ICodeEditorService),d=c.getFocusedCodeEditor()||c.getActiveCodeEditor();if(!!d)return d.invokeWithinContext(_=>{if(!!_.get(IContextKeyService).contextMatchesRules(withNullAsUndefined(o)))return a(_,d,i)})}runCommand(e,i){return EditorCommand.runEditorCommand(e,i,this.precondition,(o,a,c)=>this.runEditorCommand(o,a,c))}}class EditorAction extends EditorCommand{constructor(e){super(EditorAction.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let i;Array.isArray(e.menuOpts)?i=e.menuOpts:e.menuOpts?i=[e.menuOpts]:i=[];function o(a){return a.menuId||(a.menuId=MenuId.EditorContext),a.title||(a.title=e.label),a.when=ContextKeyExpr.and(e.precondition,a.when),a}return Array.isArray(e.contextMenuOpts)?i.push(...e.contextMenuOpts.map(o)):e.contextMenuOpts&&i.push(o(e.contextMenuOpts)),e.menuOpts=i,e}runEditorCommand(e,i,o){return this.reportTelemetry(e,i),this.run(e,i,o||{})}reportTelemetry(e,i){e.get(ITelemetryService).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}function registerEditorCommand(s){return EditorContributionRegistry.INSTANCE.registerEditorCommand(s),s}function registerEditorAction(s){const e=new s;return EditorContributionRegistry.INSTANCE.registerEditorAction(e),e}function registerEditorContribution(s,e){EditorContributionRegistry.INSTANCE.registerEditorContribution(s,e)}var EditorExtensionsRegistry;(function(s){function e(d){return EditorContributionRegistry.INSTANCE.getEditorCommand(d)}s.getEditorCommand=e;function i(){return EditorContributionRegistry.INSTANCE.getEditorActions()}s.getEditorActions=i;function o(){return EditorContributionRegistry.INSTANCE.getEditorContributions()}s.getEditorContributions=o;function a(d){return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(_=>d.indexOf(_.id)>=0)}s.getSomeEditorContributions=a;function c(){return EditorContributionRegistry.INSTANCE.getDiffEditorContributions()}s.getDiffEditorContributions=c})(EditorExtensionsRegistry||(EditorExtensionsRegistry={}));const Extensions$3={EditorCommonContributions:"editor.contributions"};class EditorContributionRegistry{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,i){this.editorContributions.push({id:e,ctor:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}EditorContributionRegistry.INSTANCE=new EditorContributionRegistry;Registry.add(Extensions$3.EditorCommonContributions,EditorContributionRegistry.INSTANCE);function registerCommand$2(s){return s.register(),s}const UndoCommand=registerCommand$2(new MultiCommand({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:MenuId.MenubarEditMenu,group:"1_do",title:localize({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:MenuId.CommandPalette,group:"",title:localize("undo","Undo"),order:1}]}));registerCommand$2(new ProxyCommand(UndoCommand,{id:"default:undo",precondition:void 0}));const RedoCommand=registerCommand$2(new MultiCommand({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:MenuId.MenubarEditMenu,group:"1_do",title:localize({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:MenuId.CommandPalette,group:"",title:localize("redo","Redo"),order:1}]}));registerCommand$2(new ProxyCommand(RedoCommand,{id:"default:redo",precondition:void 0}));const SelectAllCommand=registerCommand$2(new MultiCommand({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:MenuId.MenubarSelectionMenu,group:"1_basic",title:localize({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:MenuId.CommandPalette,group:"",title:localize("selectAll","Select All"),order:1}]}));var __decorate$x=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$r=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let MarkerDecorationsContribution=class{constructor(e,i){}dispose(){}};MarkerDecorationsContribution.ID="editor.contrib.markerDecorations";MarkerDecorationsContribution=__decorate$x([__param$r(1,IMarkerDecorationsService)],MarkerDecorationsContribution);registerEditorContribution(MarkerDecorationsContribution.ID,MarkerDecorationsContribution);const editor$1="";class ElementSizeObserver extends Disposable{constructor(e,i){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,i)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){!this._resizeObserver&&this._referenceDomElement&&(this._resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this._resizeObserver.observe(this._referenceDomElement))}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,i){let o=0,a=0;i?(o=i.width,a=i.height):this._referenceDomElement&&(o=this._referenceDomElement.clientWidth,a=this._referenceDomElement.clientHeight),o=Math.max(5,o),a=Math.max(5,a),(this._width!==o||this._height!==a)&&(this._width=o,this._height=a,e&&this._onDidChange.fire())}}class EditorSettingMigration{constructor(e,i){this.key=e,this.migrate=i}apply(e){const i=EditorSettingMigration._read(e,this.key),o=c=>EditorSettingMigration._read(e,c),a=(c,d)=>EditorSettingMigration._write(e,c,d);this.migrate(i,o,a)}static _read(e,i){if(typeof e>"u")return;const o=i.indexOf(".");if(o>=0){const a=i.substring(0,o);return this._read(e[a],i.substring(o+1))}return e[i]}static _write(e,i,o){const a=i.indexOf(".");if(a>=0){const c=i.substring(0,a);e[c]=e[c]||{},this._write(e[c],i.substring(a+1),o);return}e[i]=o}}EditorSettingMigration.items=[];function registerEditorSettingMigration(s,e){EditorSettingMigration.items.push(new EditorSettingMigration(s,e))}function registerSimpleEditorSettingMigration(s,e){registerEditorSettingMigration(s,(i,o,a)=>{if(typeof i<"u"){for(const[c,d]of e)if(i===c){a(s,d);return}}})}function migrateOptions(s){EditorSettingMigration.items.forEach(e=>e.apply(s))}registerSimpleEditorSettingMigration("wordWrap",[[!0,"on"],[!1,"off"]]);registerSimpleEditorSettingMigration("lineNumbers",[[!0,"on"],[!1,"off"]]);registerSimpleEditorSettingMigration("cursorBlinking",[["visible","solid"]]);registerSimpleEditorSettingMigration("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);registerSimpleEditorSettingMigration("renderLineHighlight",[[!0,"line"],[!1,"none"]]);registerSimpleEditorSettingMigration("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);registerSimpleEditorSettingMigration("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);registerSimpleEditorSettingMigration("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);registerSimpleEditorSettingMigration("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);registerSimpleEditorSettingMigration("autoIndent",[[!1,"advanced"],[!0,"full"]]);registerSimpleEditorSettingMigration("matchBrackets",[[!0,"always"],[!1,"never"]]);registerEditorSettingMigration("autoClosingBrackets",(s,e,i)=>{s===!1&&(i("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&i("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&i("autoSurround","never"))});registerEditorSettingMigration("renderIndentGuides",(s,e,i)=>{typeof s<"u"&&(i("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&i("guides.indentation",!!s))});registerEditorSettingMigration("highlightActiveIndentGuide",(s,e,i)=>{typeof s<"u"&&(i("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&i("guides.highlightActiveIndentation",!!s))});const suggestFilteredTypesMapping={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};registerEditorSettingMigration("suggest.filteredTypes",(s,e,i)=>{if(s&&typeof s=="object"){for(const o of Object.entries(suggestFilteredTypesMapping))s[o[0]]===!1&&typeof e(`suggest.${o[1]}`)>"u"&&i(`suggest.${o[1]}`,!1);i("suggest.filteredTypes",void 0)}});registerEditorSettingMigration("quickSuggestions",(s,e,i)=>{if(typeof s=="boolean"){const o=s?"on":"off";i("quickSuggestions",{comments:o,strings:o,other:o})}});class TabFocusImpl{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new Emitter$1,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus!==e&&(this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus))}}const TabFocus=new TabFocusImpl,IAccessibilityService=createDecorator("accessibilityService"),CONTEXT_ACCESSIBILITY_MODE_ENABLED=new RawContextKey("accessibilityModeEnabled",!1);var __decorate$w=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$q=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let EditorConfiguration=class extends Disposable{constructor(e,i,o,a){super(),this._accessibilityService=a,this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new Emitter$1),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._computeOptionsMemory=new ComputeOptionsMemory,this.isSimpleWidget=e,this._containerObserver=this._register(new ElementSizeObserver(o,i.dimension)),this._rawOptions=deepCloneAndMigrateOptions(i),this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(10)&&this._containerObserver.startObserving(),this._register(EditorZoom.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(TabFocus.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(FontMeasurements.onDidChange(()=>this._recomputeOptions())),this._register(PixelRatio.onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),i=EditorOptionsUtil.checkEquals(this.options,e);i!==null&&(this.options=e,this._onDidChangeFast.fire(i),this._onDidChange.fire(i))}_computeOptions(){const e=this._readEnvConfiguration(),i=BareFontInfo.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),o=this._readFontInfo(i),a={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:o,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:TabFocus.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return EditorOptionsUtil.computeOptions(this._validatedOptions,a)}_readEnvConfiguration(){return{extraEditorClassName:getExtraEditorClassName(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:isWebKit||isFirefox,pixelRatio:PixelRatio.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return FontMeasurements.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const i=deepCloneAndMigrateOptions(e);!EditorOptionsUtil.applyUpdate(this._rawOptions,i)||(this._validatedOptions=EditorOptionsUtil.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const i=digitCount(e);this._lineNumbersDigitCount!==i&&(this._lineNumbersDigitCount=i,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}};EditorConfiguration=__decorate$w([__param$q(3,IAccessibilityService)],EditorConfiguration);function digitCount(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}function getExtraEditorClassName(){let s="";return!isSafari&&!isWebkitWebView&&(s+="no-user-select "),isSafari&&(s+="no-minimap-shadow ",s+="enable-user-select "),isMacintosh&&(s+="mac "),s}class ValidatedEditorOptions{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,i){this._values[e]=i}}class ComputedEditorOptions{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,i){this._values[e]=i}}class EditorOptionsUtil{static validateOptions(e){const i=new ValidatedEditorOptions;for(const o of editorOptionsRegistry){const a=o.name==="_never_"?void 0:e[o.name];i._write(o.id,o.validate(a))}return i}static computeOptions(e,i){const o=new ComputedEditorOptions;for(const a of editorOptionsRegistry)o._write(a.id,a.compute(i,o,e._read(a.id)));return o}static _deepEquals(e,i){if(typeof e!="object"||typeof i!="object"||!e||!i)return e===i;if(Array.isArray(e)||Array.isArray(i))return Array.isArray(e)&&Array.isArray(i)?equals$1(e,i):!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(!EditorOptionsUtil._deepEquals(e[o],i[o]))return!1;return!0}static checkEquals(e,i){const o=[];let a=!1;for(const c of editorOptionsRegistry){const d=!EditorOptionsUtil._deepEquals(e._read(c.id),i._read(c.id));o[c.id]=d,d&&(a=!0)}return a?new ConfigurationChangedEvent(o):null}static applyUpdate(e,i){let o=!1;for(const a of editorOptionsRegistry)if(i.hasOwnProperty(a.name)){const c=a.applyUpdate(e[a.name],i[a.name]);e[a.name]=c.newValue,o=o||c.didChange}return o}}function deepCloneAndMigrateOptions(s){const e=deepClone(s);return migrateOptions(e),e}function memoize(s,e,i){let o=null,a=null;if(typeof i.value=="function"?(o="value",a=i.value,a.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(o="get",a=i.get),!a)throw new Error("not supported");const c=`$memoize$${e}`;i[o]=function(...d){return this.hasOwnProperty(c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!1,value:a.apply(this,d)}),this[c]}}var __decorate$v=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},EventType;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(EventType||(EventType={}));class Gesture extends Disposable{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(addDisposableListener(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(addDisposableListener(document,"touchend",e=>this.onTouchEnd(e))),this._register(addDisposableListener(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Gesture.isTouchDevice()?(Gesture.INSTANCE||(Gesture.INSTANCE=new Gesture),Gesture.INSTANCE.targets.push(e),{dispose:()=>{Gesture.INSTANCE.targets=Gesture.INSTANCE.targets.filter(i=>i!==e)}}):Disposable.None}static ignoreTarget(e){return Gesture.isTouchDevice()?(Gesture.INSTANCE||(Gesture.INSTANCE=new Gesture),Gesture.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Gesture.INSTANCE.ignoreTargets=Gesture.INSTANCE.ignoreTargets.filter(i=>i!==e)}}):Disposable.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let o=0,a=e.targetTouches.length;o<a;o++){const c=e.targetTouches.item(o);this.activeTouches[c.identifier]={id:c.identifier,initialTarget:c.target,initialTimeStamp:i,initialPageX:c.pageX,initialPageY:c.pageY,rollingTimestamps:[i],rollingPageX:[c.pageX],rollingPageY:[c.pageY]};const d=this.newGestureEvent(EventType.Start,c.target);d.pageX=c.pageX,d.pageY=c.pageY,this.dispatchEvent(d)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){const i=Date.now(),o=Object.keys(this.activeTouches).length;for(let a=0,c=e.changedTouches.length;a<c;a++){const d=e.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(d.identifier))){console.warn("move of an UNKNOWN touch",d);continue}const _=this.activeTouches[d.identifier],b=Date.now()-_.initialTimeStamp;if(b<Gesture.HOLD_DELAY&&Math.abs(_.initialPageX-tail(_.rollingPageX))<30&&Math.abs(_.initialPageY-tail(_.rollingPageY))<30){const k=this.newGestureEvent(EventType.Tap,_.initialTarget);k.pageX=tail(_.rollingPageX),k.pageY=tail(_.rollingPageY),this.dispatchEvent(k)}else if(b>=Gesture.HOLD_DELAY&&Math.abs(_.initialPageX-tail(_.rollingPageX))<30&&Math.abs(_.initialPageY-tail(_.rollingPageY))<30){const k=this.newGestureEvent(EventType.Contextmenu,_.initialTarget);k.pageX=tail(_.rollingPageX),k.pageY=tail(_.rollingPageY),this.dispatchEvent(k)}else if(o===1){const k=tail(_.rollingPageX),j=tail(_.rollingPageY),_e=tail(_.rollingTimestamps)-_.rollingTimestamps[0],et=k-_.rollingPageX[0],tt=j-_.rollingPageY[0],it=this.targets.filter(st=>_.initialTarget instanceof Node&&st.contains(_.initialTarget));this.inertia(it,i,Math.abs(et)/_e,et>0?1:-1,k,Math.abs(tt)/_e,tt>0?1:-1,j)}this.dispatchEvent(this.newGestureEvent(EventType.End,_.initialTarget)),delete this.activeTouches[d.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,i){const o=document.createEvent("CustomEvent");return o.initEvent(e,!1,!0),o.initialTarget=i,o.tapCount=0,o}dispatchEvent(e){if(e.type===EventType.Tap){const i=new Date().getTime();let o=0;i-this._lastSetTapCountTime>Gesture.CLEAR_TAP_COUNT_TIME?o=1:o=2,this._lastSetTapCountTime=i,e.tapCount=o}else(e.type===EventType.Change||e.type===EventType.Contextmenu)&&(this._lastSetTapCountTime=0);for(let i=0;i<this.ignoreTargets.length;i++)if(e.initialTarget instanceof Node&&this.ignoreTargets[i].contains(e.initialTarget))return;this.targets.forEach(i=>{e.initialTarget instanceof Node&&i.contains(e.initialTarget)&&(i.dispatchEvent(e),this.dispatched=!0)})}inertia(e,i,o,a,c,d,_,b){this.handle=scheduleAtNextAnimationFrame(()=>{const k=Date.now(),j=k-i;let _e=0,et=0,tt=!0;o+=Gesture.SCROLL_FRICTION*j,d+=Gesture.SCROLL_FRICTION*j,o>0&&(tt=!1,_e=a*o*j),d>0&&(tt=!1,et=_*d*j);const it=this.newGestureEvent(EventType.Change);it.translationX=_e,it.translationY=et,e.forEach(st=>st.dispatchEvent(it)),tt||this.inertia(e,k,o,a,c+_e,d,_,b+et)})}onTouchMove(e){const i=Date.now();for(let o=0,a=e.changedTouches.length;o<a;o++){const c=e.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(c.identifier))){console.warn("end of an UNKNOWN touch",c);continue}const d=this.activeTouches[c.identifier],_=this.newGestureEvent(EventType.Change,d.initialTarget);_.translationX=c.pageX-tail(d.rollingPageX),_.translationY=c.pageY-tail(d.rollingPageY),_.pageX=c.pageX,_.pageY=c.pageY,this.dispatchEvent(_),d.rollingPageX.length>3&&(d.rollingPageX.shift(),d.rollingPageY.shift(),d.rollingTimestamps.shift()),d.rollingPageX.push(c.pageX),d.rollingPageY.push(c.pageY),d.rollingTimestamps.push(i)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Gesture.SCROLL_FRICTION=-.005;Gesture.HOLD_DELAY=700;Gesture.CLEAR_TAP_COUNT_TIME=400;__decorate$v([memoize],Gesture,"isTouchDevice",null);class GlobalPointerMoveMonitor{constructor(){this._hooks=new DisposableStore,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,i){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const o=this._onStopCallback;this._onStopCallback=null,e&&o&&o(i)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,i,o,a,c){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=a,this._onStopCallback=c;let d=e;try{e.setPointerCapture(i),this._hooks.add(toDisposable(()=>{e.releasePointerCapture(i)}))}catch{d=window}this._hooks.add(addDisposableListener(d,EventType$1.POINTER_MOVE,_=>{if(_.buttons!==o){this.stopMonitoring(!0);return}_.preventDefault(),this._pointerMoveCallback(_)})),this._hooks.add(addDisposableListener(d,EventType$1.POINTER_UP,_=>this.stopMonitoring(!0)))}}function roundFloat(s,e){const i=Math.pow(10,e);return Math.round(s*i)/i}class RGBA{constructor(e,i,o,a=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,i))|0,this.b=Math.min(255,Math.max(0,o))|0,this.a=roundFloat(Math.max(Math.min(1,a),0),3)}static equals(e,i){return e.r===i.r&&e.g===i.g&&e.b===i.b&&e.a===i.a}}class HSLA{constructor(e,i,o,a){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=roundFloat(Math.max(Math.min(1,i),0),3),this.l=roundFloat(Math.max(Math.min(1,o),0),3),this.a=roundFloat(Math.max(Math.min(1,a),0),3)}static equals(e,i){return e.h===i.h&&e.s===i.s&&e.l===i.l&&e.a===i.a}static fromRGBA(e){const i=e.r/255,o=e.g/255,a=e.b/255,c=e.a,d=Math.max(i,o,a),_=Math.min(i,o,a);let b=0,k=0;const j=(_+d)/2,_e=d-_;if(_e>0){switch(k=Math.min(j<=.5?_e/(2*j):_e/(2-2*j),1),d){case i:b=(o-a)/_e+(o<a?6:0);break;case o:b=(a-i)/_e+2;break;case a:b=(i-o)/_e+4;break}b*=60,b=Math.round(b)}return new HSLA(b,k,j,c)}static _hue2rgb(e,i,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?e+(i-e)*6*o:o<1/2?i:o<2/3?e+(i-e)*(2/3-o)*6:e}static toRGBA(e){const i=e.h/360,{s:o,l:a,a:c}=e;let d,_,b;if(o===0)d=_=b=a;else{const k=a<.5?a*(1+o):a+o-a*o,j=2*a-k;d=HSLA._hue2rgb(j,k,i+1/3),_=HSLA._hue2rgb(j,k,i),b=HSLA._hue2rgb(j,k,i-1/3)}return new RGBA(Math.round(d*255),Math.round(_*255),Math.round(b*255),c)}}class HSVA{constructor(e,i,o,a){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=roundFloat(Math.max(Math.min(1,i),0),3),this.v=roundFloat(Math.max(Math.min(1,o),0),3),this.a=roundFloat(Math.max(Math.min(1,a),0),3)}static equals(e,i){return e.h===i.h&&e.s===i.s&&e.v===i.v&&e.a===i.a}static fromRGBA(e){const i=e.r/255,o=e.g/255,a=e.b/255,c=Math.max(i,o,a),d=Math.min(i,o,a),_=c-d,b=c===0?0:_/c;let k;return _===0?k=0:c===i?k=((o-a)/_%6+6)%6:c===o?k=(a-i)/_+2:k=(i-o)/_+4,new HSVA(Math.round(k*60),b,c,e.a)}static toRGBA(e){const{h:i,s:o,v:a,a:c}=e,d=a*o,_=d*(1-Math.abs(i/60%2-1)),b=a-d;let[k,j,_e]=[0,0,0];return i<60?(k=d,j=_):i<120?(k=_,j=d):i<180?(j=d,_e=_):i<240?(j=_,_e=d):i<300?(k=_,_e=d):i<=360&&(k=d,_e=_),k=Math.round((k+b)*255),j=Math.round((j+b)*255),_e=Math.round((_e+b)*255),new RGBA(k,j,_e,c)}}class Color{constructor(e){if(e)if(e instanceof RGBA)this.rgba=e;else if(e instanceof HSLA)this._hsla=e,this.rgba=HSLA.toRGBA(e);else if(e instanceof HSVA)this._hsva=e,this.rgba=HSVA.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return Color.Format.CSS.parseHex(e)||Color.red}get hsla(){return this._hsla?this._hsla:HSLA.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:HSVA.fromRGBA(this.rgba)}equals(e){return!!e&&RGBA.equals(this.rgba,e.rgba)&&HSLA.equals(this.hsla,e.hsla)&&HSVA.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Color._relativeLuminanceForComponent(this.rgba.r),i=Color._relativeLuminanceForComponent(this.rgba.g),o=Color._relativeLuminanceForComponent(this.rgba.b),a=.2126*e+.7152*i+.0722*o;return roundFloat(a,4)}static _relativeLuminanceForComponent(e){const i=e/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const i=this.getRelativeLuminance(),o=e.getRelativeLuminance();return i>o}isDarkerThan(e){const i=this.getRelativeLuminance(),o=e.getRelativeLuminance();return i<o}lighten(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:i,g:o,b:a,a:c}=this.rgba;return new Color(new RGBA(i,o,a,c*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Color(new RGBA(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Color.Format.CSS.format(this)),this._toString}static getLighterColor(e,i,o){if(e.isLighterThan(i))return e;o=o||.5;const a=e.getRelativeLuminance(),c=i.getRelativeLuminance();return o=o*(c-a)/c,e.lighten(o)}static getDarkerColor(e,i,o){if(e.isDarkerThan(i))return e;o=o||.5;const a=e.getRelativeLuminance(),c=i.getRelativeLuminance();return o=o*(a-c)/a,e.darken(o)}}Color.white=new Color(new RGBA(255,255,255,1));Color.black=new Color(new RGBA(0,0,0,1));Color.red=new Color(new RGBA(255,0,0,1));Color.blue=new Color(new RGBA(0,0,255,1));Color.green=new Color(new RGBA(0,255,0,1));Color.cyan=new Color(new RGBA(0,255,255,1));Color.lightgrey=new Color(new RGBA(211,211,211,1));Color.transparent=new Color(new RGBA(0,0,0,0));(function(s){(function(e){(function(i){function o(tt){return tt.rgba.a===1?`rgb(${tt.rgba.r}, ${tt.rgba.g}, ${tt.rgba.b})`:s.Format.CSS.formatRGBA(tt)}i.formatRGB=o;function a(tt){return`rgba(${tt.rgba.r}, ${tt.rgba.g}, ${tt.rgba.b}, ${+tt.rgba.a.toFixed(2)})`}i.formatRGBA=a;function c(tt){return tt.hsla.a===1?`hsl(${tt.hsla.h}, ${(tt.hsla.s*100).toFixed(2)}%, ${(tt.hsla.l*100).toFixed(2)}%)`:s.Format.CSS.formatHSLA(tt)}i.formatHSL=c;function d(tt){return`hsla(${tt.hsla.h}, ${(tt.hsla.s*100).toFixed(2)}%, ${(tt.hsla.l*100).toFixed(2)}%, ${tt.hsla.a.toFixed(2)})`}i.formatHSLA=d;function _(tt){const it=tt.toString(16);return it.length!==2?"0"+it:it}function b(tt){return`#${_(tt.rgba.r)}${_(tt.rgba.g)}${_(tt.rgba.b)}`}i.formatHex=b;function k(tt,it=!1){return it&&tt.rgba.a===1?s.Format.CSS.formatHex(tt):`#${_(tt.rgba.r)}${_(tt.rgba.g)}${_(tt.rgba.b)}${_(Math.round(tt.rgba.a*255))}`}i.formatHexA=k;function j(tt){return tt.isOpaque()?s.Format.CSS.formatHex(tt):s.Format.CSS.formatRGBA(tt)}i.format=j;function _e(tt){const it=tt.length;if(it===0||tt.charCodeAt(0)!==35)return null;if(it===7){const st=16*et(tt.charCodeAt(1))+et(tt.charCodeAt(2)),ot=16*et(tt.charCodeAt(3))+et(tt.charCodeAt(4)),nt=16*et(tt.charCodeAt(5))+et(tt.charCodeAt(6));return new s(new RGBA(st,ot,nt,1))}if(it===9){const st=16*et(tt.charCodeAt(1))+et(tt.charCodeAt(2)),ot=16*et(tt.charCodeAt(3))+et(tt.charCodeAt(4)),nt=16*et(tt.charCodeAt(5))+et(tt.charCodeAt(6)),rt=16*et(tt.charCodeAt(7))+et(tt.charCodeAt(8));return new s(new RGBA(st,ot,nt,rt/255))}if(it===4){const st=et(tt.charCodeAt(1)),ot=et(tt.charCodeAt(2)),nt=et(tt.charCodeAt(3));return new s(new RGBA(16*st+st,16*ot+ot,16*nt+nt))}if(it===5){const st=et(tt.charCodeAt(1)),ot=et(tt.charCodeAt(2)),nt=et(tt.charCodeAt(3)),rt=et(tt.charCodeAt(4));return new s(new RGBA(16*st+st,16*ot+ot,16*nt+nt,(16*rt+rt)/255))}return null}i.parseHex=_e;function et(tt){switch(tt){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(Color||(Color={}));function asCssVariableName(s){return`--vscode-${s.replace(/\./g,"-")}`}const Extensions$2={ColorContribution:"base.contributions.colors"};class ColorRegistry{constructor(){this._onDidChangeSchema=new Emitter$1,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,i,o,a=!1,c){const d={id:e,description:o,defaults:i,needsTransparency:a,deprecationMessage:c};this.colorsById[e]=d;const _={type:"string",description:o,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return c&&(_.deprecationMessage=c),this.colorSchema.properties[e]=_,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(o),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,i){const o=this.colorsById[e];if(o&&o.defaults){const a=o.defaults[i.type];return resolveColorValue(a,i)}}getColorSchema(){return this.colorSchema}toString(){const e=(i,o)=>{const a=i.indexOf(".")===-1?0:1,c=o.indexOf(".")===-1?0:1;return a!==c?a-c:i.localeCompare(o)};return Object.keys(this.colorsById).sort(e).map(i=>`- \`${i}\`: ${this.colorsById[i].description}`).join(`
`)}}const colorRegistry$1=new ColorRegistry;Registry.add(Extensions$2.ColorContribution,colorRegistry$1);function migrateColorDefaults(s){return s===null||typeof s.hcLight>"u"&&(s.hcDark===null||typeof s.hcDark=="string"?s.hcLight=s.hcDark:s.hcLight=s.light),s}function registerColor(s,e,i,o,a){return colorRegistry$1.registerColor(s,migrateColorDefaults(e),i,o,a)}const foreground=registerColor("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},localize("foreground","Overall foreground color. This color is only used if not overridden by a component."));registerColor("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},localize("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));registerColor("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},localize("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));registerColor("descriptionForeground",{light:"#717171",dark:transparent(foreground,.7),hcDark:transparent(foreground,.7),hcLight:transparent(foreground,.7)},localize("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));registerColor("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},localize("iconForeground","The default color for icons in the workbench."));const focusBorder=registerColor("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#0F4A85"},localize("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),contrastBorder=registerColor("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},localize("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),activeContrastBorder=registerColor("contrastActiveBorder",{light:null,dark:null,hcDark:focusBorder,hcLight:focusBorder},localize("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));registerColor("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},localize("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));registerColor("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Color.black,hcLight:"#292929"},localize("textSeparatorForeground","Color for text separators."));registerColor("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},localize("textLinkForeground","Foreground color for links in text."));registerColor("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},localize("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));registerColor("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#D7BA7D",hcLight:"#292929"},localize("textPreformatForeground","Foreground color for preformatted text segments."));registerColor("textBlockQuote.background",{light:"#7f7f7f1a",dark:"#7f7f7f1a",hcDark:null,hcLight:"#F2F2F2"},localize("textBlockQuoteBackground","Background color for block quotes in text."));registerColor("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Color.white,hcLight:"#292929"},localize("textBlockQuoteBorder","Border color for block quotes in text."));registerColor("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Color.black,hcLight:"#F2F2F2"},localize("textCodeBlockBackground","Background color for code blocks in text."));const widgetShadow=registerColor("widget.shadow",{dark:transparent(Color.black,.36),light:transparent(Color.black,.16),hcDark:null,hcLight:null},localize("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),inputBackground=registerColor("input.background",{dark:"#3C3C3C",light:Color.white,hcDark:Color.black,hcLight:Color.white},localize("inputBoxBackground","Input box background.")),inputForeground=registerColor("input.foreground",{dark:foreground,light:foreground,hcDark:foreground,hcLight:foreground},localize("inputBoxForeground","Input box foreground.")),inputBorder=registerColor("input.border",{dark:null,light:null,hcDark:contrastBorder,hcLight:contrastBorder},localize("inputBoxBorder","Input box border.")),inputActiveOptionBorder=registerColor("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hcDark:contrastBorder,hcLight:contrastBorder},localize("inputBoxActiveOptionBorder","Border color of activated options in input fields."));registerColor("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},localize("inputOption.hoverBackground","Background color of activated options in input fields."));const inputActiveOptionBackground=registerColor("inputOption.activeBackground",{dark:transparent(focusBorder,.4),light:transparent(focusBorder,.2),hcDark:Color.transparent,hcLight:Color.transparent},localize("inputOption.activeBackground","Background hover color of options in input fields.")),inputActiveOptionForeground=registerColor("inputOption.activeForeground",{dark:Color.white,light:Color.black,hcDark:null,hcLight:foreground},localize("inputOption.activeForeground","Foreground color of activated options in input fields."));registerColor("input.placeholderForeground",{light:transparent(foreground,.5),dark:transparent(foreground,.5),hcDark:transparent(foreground,.7),hcLight:transparent(foreground,.7)},localize("inputPlaceholderForeground","Input box foreground color for placeholder text."));const inputValidationInfoBackground=registerColor("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Color.black,hcLight:Color.white},localize("inputValidationInfoBackground","Input validation background color for information severity.")),inputValidationInfoForeground=registerColor("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:foreground},localize("inputValidationInfoForeground","Input validation foreground color for information severity.")),inputValidationInfoBorder=registerColor("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:contrastBorder,hcLight:contrastBorder},localize("inputValidationInfoBorder","Input validation border color for information severity.")),inputValidationWarningBackground=registerColor("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Color.black,hcLight:Color.white},localize("inputValidationWarningBackground","Input validation background color for warning severity.")),inputValidationWarningForeground=registerColor("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:foreground},localize("inputValidationWarningForeground","Input validation foreground color for warning severity.")),inputValidationWarningBorder=registerColor("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:contrastBorder,hcLight:contrastBorder},localize("inputValidationWarningBorder","Input validation border color for warning severity.")),inputValidationErrorBackground=registerColor("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Color.black,hcLight:Color.white},localize("inputValidationErrorBackground","Input validation background color for error severity.")),inputValidationErrorForeground=registerColor("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:foreground},localize("inputValidationErrorForeground","Input validation foreground color for error severity.")),inputValidationErrorBorder=registerColor("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:contrastBorder,hcLight:contrastBorder},localize("inputValidationErrorBorder","Input validation border color for error severity.")),selectBackground=registerColor("dropdown.background",{dark:"#3C3C3C",light:Color.white,hcDark:Color.black,hcLight:Color.white},localize("dropdownBackground","Dropdown background."));registerColor("dropdown.listBackground",{dark:null,light:null,hcDark:Color.black,hcLight:Color.white},localize("dropdownListBackground","Dropdown list background."));const selectForeground=registerColor("dropdown.foreground",{dark:"#F0F0F0",light:null,hcDark:Color.white,hcLight:foreground},localize("dropdownForeground","Dropdown foreground.")),selectBorder=registerColor("dropdown.border",{dark:selectBackground,light:"#CECECE",hcDark:contrastBorder,hcLight:contrastBorder},localize("dropdownBorder","Dropdown border."));registerColor("checkbox.background",{dark:selectBackground,light:selectBackground,hcDark:selectBackground,hcLight:selectBackground},localize("checkbox.background","Background color of checkbox widget."));registerColor("checkbox.foreground",{dark:selectForeground,light:selectForeground,hcDark:selectForeground,hcLight:selectForeground},localize("checkbox.foreground","Foreground color of checkbox widget."));registerColor("checkbox.border",{dark:selectBorder,light:selectBorder,hcDark:selectBorder,hcLight:selectBorder},localize("checkbox.border","Border color of checkbox widget."));const buttonForeground=registerColor("button.foreground",{dark:Color.white,light:Color.white,hcDark:Color.white,hcLight:Color.white},localize("buttonForeground","Button foreground color."));registerColor("button.separator",{dark:transparent(buttonForeground,.4),light:transparent(buttonForeground,.4),hcDark:transparent(buttonForeground,.4),hcLight:transparent(buttonForeground,.4)},localize("buttonSeparator","Button separator color."));const buttonBackground=registerColor("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},localize("buttonBackground","Button background color.")),buttonHoverBackground=registerColor("button.hoverBackground",{dark:lighten(buttonBackground,.2),light:darken(buttonBackground,.2),hcDark:null,hcLight:null},localize("buttonHoverBackground","Button background color when hovering."));registerColor("button.border",{dark:contrastBorder,light:contrastBorder,hcDark:contrastBorder,hcLight:contrastBorder},localize("buttonBorder","Button border color."));registerColor("button.secondaryForeground",{dark:Color.white,light:Color.white,hcDark:Color.white,hcLight:foreground},localize("buttonSecondaryForeground","Secondary button foreground color."));const buttonSecondaryBackground=registerColor("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Color.white},localize("buttonSecondaryBackground","Secondary button background color."));registerColor("button.secondaryHoverBackground",{dark:lighten(buttonSecondaryBackground,.2),light:darken(buttonSecondaryBackground,.2),hcDark:null,hcLight:null},localize("buttonSecondaryHoverBackground","Secondary button background color when hovering."));const badgeBackground=registerColor("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Color.black,hcLight:"#0F4A85"},localize("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),badgeForeground=registerColor("badge.foreground",{dark:Color.white,light:"#333",hcDark:Color.white,hcLight:Color.white},localize("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),scrollbarShadow=registerColor("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},localize("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),scrollbarSliderBackground=registerColor("scrollbarSlider.background",{dark:Color.fromHex("#797979").transparent(.4),light:Color.fromHex("#646464").transparent(.4),hcDark:transparent(contrastBorder,.6),hcLight:transparent(contrastBorder,.4)},localize("scrollbarSliderBackground","Scrollbar slider background color.")),scrollbarSliderHoverBackground=registerColor("scrollbarSlider.hoverBackground",{dark:Color.fromHex("#646464").transparent(.7),light:Color.fromHex("#646464").transparent(.7),hcDark:transparent(contrastBorder,.8),hcLight:transparent(contrastBorder,.8)},localize("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),scrollbarSliderActiveBackground=registerColor("scrollbarSlider.activeBackground",{dark:Color.fromHex("#BFBFBF").transparent(.4),light:Color.fromHex("#000000").transparent(.6),hcDark:contrastBorder,hcLight:contrastBorder},localize("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),progressBarBackground=registerColor("progressBar.background",{dark:Color.fromHex("#0E70C0"),light:Color.fromHex("#0E70C0"),hcDark:contrastBorder,hcLight:contrastBorder},localize("progressBarBackground","Background color of the progress bar that can show for long running operations.")),editorErrorBackground=registerColor("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},localize("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),editorErrorForeground=registerColor("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},localize("editorError.foreground","Foreground color of error squigglies in the editor.")),editorErrorBorder=registerColor("editorError.border",{dark:null,light:null,hcDark:Color.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},localize("errorBorder","Border color of error boxes in the editor.")),editorWarningBackground=registerColor("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},localize("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),editorWarningForeground=registerColor("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD37",hcLight:"#895503"},localize("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),editorWarningBorder=registerColor("editorWarning.border",{dark:null,light:null,hcDark:Color.fromHex("#FFCC00").transparent(.8),hcLight:"#"},localize("warningBorder","Border color of warning boxes in the editor.")),editorInfoBackground=registerColor("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},localize("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),editorInfoForeground=registerColor("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},localize("editorInfo.foreground","Foreground color of info squigglies in the editor.")),editorInfoBorder=registerColor("editorInfo.border",{dark:null,light:null,hcDark:Color.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},localize("infoBorder","Border color of info boxes in the editor.")),editorHintForeground=registerColor("editorHint.foreground",{dark:Color.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},localize("editorHint.foreground","Foreground color of hint squigglies in the editor.")),editorHintBorder=registerColor("editorHint.border",{dark:null,light:null,hcDark:Color.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},localize("hintBorder","Border color of hint boxes in the editor."));registerColor("sash.hoverBorder",{dark:focusBorder,light:focusBorder,hcDark:focusBorder,hcLight:focusBorder},localize("sashActiveBorder","Border color of active sashes."));const editorBackground=registerColor("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Color.black,hcLight:Color.white},localize("editorBackground","Editor background color.")),editorForeground=registerColor("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Color.white,hcLight:foreground},localize("editorForeground","Editor default foreground color."));registerColor("editorStickyScroll.background",{light:editorBackground,dark:editorBackground,hcDark:editorBackground,hcLight:editorBackground},localize("editorStickyScrollBackground","Sticky scroll background color for the editor"));registerColor("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Color.fromHex("#0F4A85").transparent(.1)},localize("editorStickyScrollHoverBackground","Sticky scroll on hover background color for the editor"));const editorWidgetBackground=registerColor("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Color.white},localize("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),editorWidgetForeground=registerColor("editorWidget.foreground",{dark:foreground,light:foreground,hcDark:foreground,hcLight:foreground},localize("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),editorWidgetBorder=registerColor("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:contrastBorder,hcLight:contrastBorder},localize("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));registerColor("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},localize("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));const quickInputBackground=registerColor("quickInput.background",{dark:editorWidgetBackground,light:editorWidgetBackground,hcDark:editorWidgetBackground,hcLight:editorWidgetBackground},localize("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),quickInputForeground=registerColor("quickInput.foreground",{dark:editorWidgetForeground,light:editorWidgetForeground,hcDark:editorWidgetForeground,hcLight:editorWidgetForeground},localize("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),quickInputTitleBackground=registerColor("quickInputTitle.background",{dark:new Color(new RGBA(255,255,255,.105)),light:new Color(new RGBA(0,0,0,.06)),hcDark:"#000000",hcLight:Color.white},localize("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),pickerGroupForeground=registerColor("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Color.white,hcLight:"#0F4A85"},localize("pickerGroupForeground","Quick picker color for grouping labels.")),pickerGroupBorder=registerColor("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Color.white,hcLight:"#0F4A85"},localize("pickerGroupBorder","Quick picker color for grouping borders.")),keybindingLabelBackground=registerColor("keybindingLabel.background",{dark:new Color(new RGBA(128,128,128,.17)),light:new Color(new RGBA(221,221,221,.4)),hcDark:Color.transparent,hcLight:Color.transparent},localize("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),keybindingLabelForeground=registerColor("keybindingLabel.foreground",{dark:Color.fromHex("#CCCCCC"),light:Color.fromHex("#555555"),hcDark:Color.white,hcLight:foreground},localize("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),keybindingLabelBorder=registerColor("keybindingLabel.border",{dark:new Color(new RGBA(51,51,51,.6)),light:new Color(new RGBA(204,204,204,.4)),hcDark:new Color(new RGBA(111,195,223)),hcLight:contrastBorder},localize("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),keybindingLabelBottomBorder=registerColor("keybindingLabel.bottomBorder",{dark:new Color(new RGBA(68,68,68,.6)),light:new Color(new RGBA(187,187,187,.4)),hcDark:new Color(new RGBA(111,195,223)),hcLight:foreground},localize("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),editorSelectionBackground=registerColor("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},localize("editorSelectionBackground","Color of the editor selection.")),editorSelectionForeground=registerColor("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Color.white},localize("editorSelectionForeground","Color of the selected text for high contrast.")),editorInactiveSelection=registerColor("editor.inactiveSelectionBackground",{light:transparent(editorSelectionBackground,.5),dark:transparent(editorSelectionBackground,.5),hcDark:transparent(editorSelectionBackground,.7),hcLight:transparent(editorSelectionBackground,.5)},localize("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),editorSelectionHighlight=registerColor("editor.selectionHighlightBackground",{light:lessProminent(editorSelectionBackground,editorBackground,.3,.6),dark:lessProminent(editorSelectionBackground,editorBackground,.3,.6),hcDark:null,hcLight:null},localize("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));registerColor("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},localize("editorFindMatch","Color of the current search match."));const editorFindMatchHighlight=registerColor("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},localize("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},localize("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editor.findMatchBorder",{light:null,dark:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("editorFindMatchBorder","Border color of the current search match."));const editorFindMatchHighlightBorder=registerColor("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("findMatchHighlightBorder","Border color of the other search matches."));registerColor("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:transparent(activeContrastBorder,.4),hcLight:transparent(activeContrastBorder,.4)},localize("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("searchEditor.findMatchBackground",{light:transparent(editorFindMatchHighlight,.66),dark:transparent(editorFindMatchHighlight,.66),hcDark:editorFindMatchHighlight,hcLight:editorFindMatchHighlight},localize("searchEditor.queryMatch","Color of the Search Editor query matches."));registerColor("searchEditor.findMatchBorder",{light:transparent(editorFindMatchHighlightBorder,.66),dark:transparent(editorFindMatchHighlightBorder,.66),hcDark:editorFindMatchHighlightBorder,hcLight:editorFindMatchHighlightBorder},localize("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));registerColor("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},localize("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const editorHoverBackground=registerColor("editorHoverWidget.background",{light:editorWidgetBackground,dark:editorWidgetBackground,hcDark:editorWidgetBackground,hcLight:editorWidgetBackground},localize("hoverBackground","Background color of the editor hover."));registerColor("editorHoverWidget.foreground",{light:editorWidgetForeground,dark:editorWidgetForeground,hcDark:editorWidgetForeground,hcLight:editorWidgetForeground},localize("hoverForeground","Foreground color of the editor hover."));registerColor("editorHoverWidget.border",{light:editorWidgetBorder,dark:editorWidgetBorder,hcDark:editorWidgetBorder,hcLight:editorWidgetBorder},localize("hoverBorder","Border color of the editor hover."));registerColor("editorHoverWidget.statusBarBackground",{dark:lighten(editorHoverBackground,.2),light:darken(editorHoverBackground,.05),hcDark:editorWidgetBackground,hcLight:editorWidgetBackground},localize("statusBarBackground","Background color of the editor hover status bar."));registerColor("editorLink.activeForeground",{dark:"#4E94CE",light:Color.blue,hcDark:Color.cyan,hcLight:"#292929"},localize("activeLinkForeground","Color of active links."));const editorInlayHintForeground=registerColor("editorInlayHint.foreground",{dark:transparent(badgeForeground,.8),light:transparent(badgeForeground,.8),hcDark:badgeForeground,hcLight:badgeForeground},localize("editorInlayHintForeground","Foreground color of inline hints")),editorInlayHintBackground=registerColor("editorInlayHint.background",{dark:transparent(badgeBackground,.6),light:transparent(badgeBackground,.3),hcDark:badgeBackground,hcLight:badgeBackground},localize("editorInlayHintBackground","Background color of inline hints"));registerColor("editorInlayHint.typeForeground",{dark:editorInlayHintForeground,light:editorInlayHintForeground,hcDark:editorInlayHintForeground,hcLight:editorInlayHintForeground},localize("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));registerColor("editorInlayHint.typeBackground",{dark:editorInlayHintBackground,light:editorInlayHintBackground,hcDark:editorInlayHintBackground,hcLight:editorInlayHintBackground},localize("editorInlayHintBackgroundTypes","Background color of inline hints for types"));registerColor("editorInlayHint.parameterForeground",{dark:editorInlayHintForeground,light:editorInlayHintForeground,hcDark:editorInlayHintForeground,hcLight:editorInlayHintForeground},localize("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));registerColor("editorInlayHint.parameterBackground",{dark:editorInlayHintBackground,light:editorInlayHintBackground,hcDark:editorInlayHintBackground,hcLight:editorInlayHintBackground},localize("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));registerColor("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},localize("editorLightBulbForeground","The color used for the lightbulb actions icon."));registerColor("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},localize("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));const defaultInsertColor=new Color(new RGBA(155,185,85,.2)),defaultRemoveColor=new Color(new RGBA(255,0,0,.2)),diffInserted=registerColor("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c66",hcDark:null,hcLight:null},localize("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),diffRemoved=registerColor("diffEditor.removedTextBackground",{dark:"#ff000066",light:"#ff00004d",hcDark:null,hcLight:null},localize("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),diffInsertedLine=registerColor("diffEditor.insertedLineBackground",{dark:defaultInsertColor,light:defaultInsertColor,hcDark:null,hcLight:null},localize("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),diffRemovedLine=registerColor("diffEditor.removedLineBackground",{dark:defaultRemoveColor,light:defaultRemoveColor,hcDark:null,hcLight:null},localize("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),diffInsertedLineGutter=registerColor("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),diffRemovedLineGutter=registerColor("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),diffOverviewRulerInserted=registerColor("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),diffOverviewRulerRemoved=registerColor("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),diffInsertedOutline=registerColor("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},localize("diffEditorInsertedOutline","Outline color for the text that got inserted.")),diffRemovedOutline=registerColor("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},localize("diffEditorRemovedOutline","Outline color for text that got removed.")),diffBorder=registerColor("diffEditor.border",{dark:null,light:null,hcDark:contrastBorder,hcLight:contrastBorder},localize("diffEditorBorder","Border color between the two text editors.")),diffDiagonalFill=registerColor("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},localize("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),listFocusBackground=registerColor("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listFocusForeground=registerColor("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listFocusOutline=registerColor("list.focusOutline",{dark:focusBorder,light:focusBorder,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listFocusAndSelectionOutline=registerColor("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},localize("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),listActiveSelectionBackground=registerColor("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Color.fromHex("#0F4A85").transparent(.1)},localize("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listActiveSelectionForeground=registerColor("list.activeSelectionForeground",{dark:Color.white,light:Color.white,hcDark:null,hcLight:null},localize("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listActiveSelectionIconForeground=registerColor("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),listInactiveSelectionBackground=registerColor("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Color.fromHex("#0F4A85").transparent(.1)},localize("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),listInactiveSelectionForeground=registerColor("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),listInactiveSelectionIconForeground=registerColor("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),listInactiveFocusBackground=registerColor("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),listInactiveFocusOutline=registerColor("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},localize("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),listHoverBackground=registerColor("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Color.fromHex("#0F4A85").transparent(.1)},localize("listHoverBackground","List/Tree background when hovering over items using the mouse.")),listHoverForeground=registerColor("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},localize("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),listDropBackground=registerColor("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},localize("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),listHighlightForeground=registerColor("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:focusBorder,hcLight:focusBorder},localize("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));registerColor("list.focusHighlightForeground",{dark:listHighlightForeground,light:ifDefinedThenElse(listActiveSelectionBackground,listHighlightForeground,"#BBE7FF"),hcDark:listHighlightForeground,hcLight:listHighlightForeground},localize("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));registerColor("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},localize("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));registerColor("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},localize("listErrorForeground","Foreground color of list items containing errors."));registerColor("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},localize("listWarningForeground","Foreground color of list items containing warnings."));const listFilterWidgetBackground=registerColor("listFilterWidget.background",{light:darken(editorWidgetBackground,0),dark:lighten(editorWidgetBackground,0),hcDark:editorWidgetBackground,hcLight:editorWidgetBackground},localize("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),listFilterWidgetOutline=registerColor("listFilterWidget.outline",{dark:Color.transparent,light:Color.transparent,hcDark:"#f38518",hcLight:"#007ACC"},localize("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),listFilterWidgetNoMatchesOutline=registerColor("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:contrastBorder,hcLight:contrastBorder},localize("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),listFilterWidgetShadow=registerColor("listFilterWidget.shadow",{dark:widgetShadow,light:widgetShadow,hcDark:widgetShadow,hcLight:widgetShadow},localize("listFilterWidgetShadow","Shadown color of the type filter widget in lists and trees."));registerColor("list.filterMatchBackground",{dark:editorFindMatchHighlight,light:editorFindMatchHighlight,hcDark:null,hcLight:null},localize("listFilterMatchHighlight","Background color of the filtered match."));registerColor("list.filterMatchBorder",{dark:editorFindMatchHighlightBorder,light:editorFindMatchHighlightBorder,hcDark:contrastBorder,hcLight:activeContrastBorder},localize("listFilterMatchHighlightBorder","Border color of the filtered match."));const treeIndentGuidesStroke=registerColor("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},localize("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),tableColumnsBorder=registerColor("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},localize("tableColumnsBorder","Table border color between columns.")),tableOddRowsBackgroundColor=registerColor("tree.tableOddRowsBackground",{dark:transparent(foreground,.04),light:transparent(foreground,.04),hcDark:null,hcLight:null},localize("tableOddRowsBackgroundColor","Background color for odd table rows."));registerColor("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},localize("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. "));const _deprecatedQuickInputListFocusBackground=registerColor("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,localize("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),quickInputListFocusForeground=registerColor("quickInputList.focusForeground",{dark:listActiveSelectionForeground,light:listActiveSelectionForeground,hcDark:listActiveSelectionForeground,hcLight:listActiveSelectionForeground},localize("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),quickInputListFocusIconForeground=registerColor("quickInputList.focusIconForeground",{dark:listActiveSelectionIconForeground,light:listActiveSelectionIconForeground,hcDark:listActiveSelectionIconForeground,hcLight:listActiveSelectionIconForeground},localize("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),quickInputListFocusBackground=registerColor("quickInputList.focusBackground",{dark:oneOf(_deprecatedQuickInputListFocusBackground,listActiveSelectionBackground),light:oneOf(_deprecatedQuickInputListFocusBackground,listActiveSelectionBackground),hcDark:null,hcLight:null},localize("quickInput.listFocusBackground","Quick picker background color for the focused item.")),menuBorder=registerColor("menu.border",{dark:null,light:null,hcDark:contrastBorder,hcLight:contrastBorder},localize("menuBorder","Border color of menus.")),menuForeground=registerColor("menu.foreground",{dark:selectForeground,light:foreground,hcDark:selectForeground,hcLight:selectForeground},localize("menuForeground","Foreground color of menu items.")),menuBackground=registerColor("menu.background",{dark:selectBackground,light:selectBackground,hcDark:selectBackground,hcLight:selectBackground},localize("menuBackground","Background color of menu items.")),menuSelectionForeground=registerColor("menu.selectionForeground",{dark:listActiveSelectionForeground,light:listActiveSelectionForeground,hcDark:listActiveSelectionForeground,hcLight:listActiveSelectionForeground},localize("menuSelectionForeground","Foreground color of the selected menu item in menus.")),menuSelectionBackground=registerColor("menu.selectionBackground",{dark:listActiveSelectionBackground,light:listActiveSelectionBackground,hcDark:listActiveSelectionBackground,hcLight:listActiveSelectionBackground},localize("menuSelectionBackground","Background color of the selected menu item in menus.")),menuSelectionBorder=registerColor("menu.selectionBorder",{dark:null,light:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("menuSelectionBorder","Border color of the selected menu item in menus.")),menuSeparatorBackground=registerColor("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:contrastBorder,hcLight:contrastBorder},localize("menuSeparatorBackground","Color of a separator menu item in menus.")),toolbarHoverBackground=registerColor("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},localize("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));registerColor("toolbar.hoverOutline",{dark:null,light:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));registerColor("toolbar.activeBackground",{dark:lighten(toolbarHoverBackground,.1),light:darken(toolbarHoverBackground,.1),hcDark:null,hcLight:null},localize("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));registerColor("editor.snippetTabstopHighlightBackground",{dark:new Color(new RGBA(124,124,124,.3)),light:new Color(new RGBA(10,50,100,.2)),hcDark:new Color(new RGBA(124,124,124,.3)),hcLight:new Color(new RGBA(10,50,100,.2))},localize("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));registerColor("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},localize("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));registerColor("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));registerColor("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Color(new RGBA(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},localize("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));registerColor("breadcrumb.foreground",{light:transparent(foreground,.8),dark:transparent(foreground,.8),hcDark:transparent(foreground,.8),hcLight:transparent(foreground,.8)},localize("breadcrumbsFocusForeground","Color of focused breadcrumb items."));registerColor("breadcrumb.background",{light:editorBackground,dark:editorBackground,hcDark:editorBackground,hcLight:editorBackground},localize("breadcrumbsBackground","Background color of breadcrumb items."));registerColor("breadcrumb.focusForeground",{light:darken(foreground,.2),dark:lighten(foreground,.1),hcDark:lighten(foreground,.1),hcLight:lighten(foreground,.1)},localize("breadcrumbsFocusForeground","Color of focused breadcrumb items."));registerColor("breadcrumb.activeSelectionForeground",{light:darken(foreground,.2),dark:lighten(foreground,.1),hcDark:lighten(foreground,.1),hcLight:lighten(foreground,.1)},localize("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));registerColor("breadcrumbPicker.background",{light:editorWidgetBackground,dark:editorWidgetBackground,hcDark:editorWidgetBackground,hcLight:editorWidgetBackground},localize("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const headerTransparency=.5,currentBaseColor=Color.fromHex("#40C8AE").transparent(headerTransparency),incomingBaseColor=Color.fromHex("#40A6FF").transparent(headerTransparency),commonBaseColor=Color.fromHex("#606060").transparent(.4),contentTransparency=.4,rulerTransparency=1,mergeCurrentHeaderBackground=registerColor("merge.currentHeaderBackground",{dark:currentBaseColor,light:currentBaseColor,hcDark:null,hcLight:null},localize("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.currentContentBackground",{dark:transparent(mergeCurrentHeaderBackground,contentTransparency),light:transparent(mergeCurrentHeaderBackground,contentTransparency),hcDark:transparent(mergeCurrentHeaderBackground,contentTransparency),hcLight:transparent(mergeCurrentHeaderBackground,contentTransparency)},localize("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const mergeIncomingHeaderBackground=registerColor("merge.incomingHeaderBackground",{dark:incomingBaseColor,light:incomingBaseColor,hcDark:null,hcLight:null},localize("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.incomingContentBackground",{dark:transparent(mergeIncomingHeaderBackground,contentTransparency),light:transparent(mergeIncomingHeaderBackground,contentTransparency),hcDark:transparent(mergeIncomingHeaderBackground,contentTransparency),hcLight:transparent(mergeIncomingHeaderBackground,contentTransparency)},localize("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const mergeCommonHeaderBackground=registerColor("merge.commonHeaderBackground",{dark:commonBaseColor,light:commonBaseColor,hcDark:null,hcLight:null},localize("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("merge.commonContentBackground",{dark:transparent(mergeCommonHeaderBackground,contentTransparency),light:transparent(mergeCommonHeaderBackground,contentTransparency),hcDark:transparent(mergeCommonHeaderBackground,contentTransparency),hcLight:transparent(mergeCommonHeaderBackground,contentTransparency)},localize("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const mergeBorder=registerColor("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},localize("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));registerColor("editorOverviewRuler.currentContentForeground",{dark:transparent(mergeCurrentHeaderBackground,rulerTransparency),light:transparent(mergeCurrentHeaderBackground,rulerTransparency),hcDark:mergeBorder,hcLight:mergeBorder},localize("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));registerColor("editorOverviewRuler.incomingContentForeground",{dark:transparent(mergeIncomingHeaderBackground,rulerTransparency),light:transparent(mergeIncomingHeaderBackground,rulerTransparency),hcDark:mergeBorder,hcLight:mergeBorder},localize("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));registerColor("editorOverviewRuler.commonContentForeground",{dark:transparent(mergeCommonHeaderBackground,rulerTransparency),light:transparent(mergeCommonHeaderBackground,rulerTransparency),hcDark:mergeBorder,hcLight:mergeBorder},localize("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));registerColor("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},localize("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);registerColor("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},localize("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const minimapFindMatch=registerColor("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},localize("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);registerColor("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},localize("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const minimapSelection=registerColor("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},localize("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),minimapError=registerColor("minimap.errorHighlight",{dark:new Color(new RGBA(255,18,18,.7)),light:new Color(new RGBA(255,18,18,.7)),hcDark:new Color(new RGBA(255,50,50,1)),hcLight:"#B5200D"},localize("minimapError","Minimap marker color for errors.")),minimapWarning=registerColor("minimap.warningHighlight",{dark:editorWarningForeground,light:editorWarningForeground,hcDark:editorWarningBorder,hcLight:editorWarningBorder},localize("overviewRuleWarning","Minimap marker color for warnings.")),minimapBackground=registerColor("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},localize("minimapBackground","Minimap background color.")),minimapForegroundOpacity=registerColor("minimap.foregroundOpacity",{dark:Color.fromHex("#000f"),light:Color.fromHex("#000f"),hcDark:Color.fromHex("#000f"),hcLight:Color.fromHex("#000f")},localize("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),minimapSliderBackground=registerColor("minimapSlider.background",{light:transparent(scrollbarSliderBackground,.5),dark:transparent(scrollbarSliderBackground,.5),hcDark:transparent(scrollbarSliderBackground,.5),hcLight:transparent(scrollbarSliderBackground,.5)},localize("minimapSliderBackground","Minimap slider background color.")),minimapSliderHoverBackground=registerColor("minimapSlider.hoverBackground",{light:transparent(scrollbarSliderHoverBackground,.5),dark:transparent(scrollbarSliderHoverBackground,.5),hcDark:transparent(scrollbarSliderHoverBackground,.5),hcLight:transparent(scrollbarSliderHoverBackground,.5)},localize("minimapSliderHoverBackground","Minimap slider background color when hovering.")),minimapSliderActiveBackground=registerColor("minimapSlider.activeBackground",{light:transparent(scrollbarSliderActiveBackground,.5),dark:transparent(scrollbarSliderActiveBackground,.5),hcDark:transparent(scrollbarSliderActiveBackground,.5),hcLight:transparent(scrollbarSliderActiveBackground,.5)},localize("minimapSliderActiveBackground","Minimap slider background color when clicked on."));registerColor("problemsErrorIcon.foreground",{dark:editorErrorForeground,light:editorErrorForeground,hcDark:editorErrorForeground,hcLight:editorErrorForeground},localize("problemsErrorIconForeground","The color used for the problems error icon."));registerColor("problemsWarningIcon.foreground",{dark:editorWarningForeground,light:editorWarningForeground,hcDark:editorWarningForeground,hcLight:editorWarningForeground},localize("problemsWarningIconForeground","The color used for the problems warning icon."));registerColor("problemsInfoIcon.foreground",{dark:editorInfoForeground,light:editorInfoForeground,hcDark:editorInfoForeground,hcLight:editorInfoForeground},localize("problemsInfoIconForeground","The color used for the problems info icon."));registerColor("charts.foreground",{dark:foreground,light:foreground,hcDark:foreground,hcLight:foreground},localize("chartsForeground","The foreground color used in charts."));registerColor("charts.lines",{dark:transparent(foreground,.5),light:transparent(foreground,.5),hcDark:transparent(foreground,.5),hcLight:transparent(foreground,.5)},localize("chartsLines","The color used for horizontal lines in charts."));registerColor("charts.red",{dark:editorErrorForeground,light:editorErrorForeground,hcDark:editorErrorForeground,hcLight:editorErrorForeground},localize("chartsRed","The red color used in chart visualizations."));registerColor("charts.blue",{dark:editorInfoForeground,light:editorInfoForeground,hcDark:editorInfoForeground,hcLight:editorInfoForeground},localize("chartsBlue","The blue color used in chart visualizations."));registerColor("charts.yellow",{dark:editorWarningForeground,light:editorWarningForeground,hcDark:editorWarningForeground,hcLight:editorWarningForeground},localize("chartsYellow","The yellow color used in chart visualizations."));registerColor("charts.orange",{dark:minimapFindMatch,light:minimapFindMatch,hcDark:minimapFindMatch,hcLight:minimapFindMatch},localize("chartsOrange","The orange color used in chart visualizations."));registerColor("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},localize("chartsGreen","The green color used in chart visualizations."));registerColor("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},localize("chartsPurple","The purple color used in chart visualizations."));function executeTransform(s,e){var i,o,a;switch(s.op){case 0:return(i=resolveColorValue(s.value,e))===null||i===void 0?void 0:i.darken(s.factor);case 1:return(o=resolveColorValue(s.value,e))===null||o===void 0?void 0:o.lighten(s.factor);case 2:return(a=resolveColorValue(s.value,e))===null||a===void 0?void 0:a.transparent(s.factor);case 3:for(const c of s.values){const d=resolveColorValue(c,e);if(d)return d}return;case 5:return resolveColorValue(e.defines(s.if)?s.then:s.else,e);case 4:{const c=resolveColorValue(s.value,e);if(!c)return;const d=resolveColorValue(s.background,e);return d?c.isDarkerThan(d)?Color.getLighterColor(c,d,s.factor).transparent(s.transparency):Color.getDarkerColor(c,d,s.factor).transparent(s.transparency):c.transparent(s.factor*s.transparency)}default:throw assertNever()}}function darken(s,e){return{op:0,value:s,factor:e}}function lighten(s,e){return{op:1,value:s,factor:e}}function transparent(s,e){return{op:2,value:s,factor:e}}function oneOf(...s){return{op:3,values:s}}function ifDefinedThenElse(s,e,i){return{op:5,if:s,then:e,else:i}}function lessProminent(s,e,i,o){return{op:4,value:s,background:e,factor:i,transparency:o}}function resolveColorValue(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?Color.fromHex(s):e.getColor(s);if(s instanceof Color)return s;if(typeof s=="object")return executeTransform(s,e)}}const workbenchColorsSchemaId="vscode://schemas/workbench-colors",schemaRegistry$1=Registry.as(Extensions$8.JSONContribution);schemaRegistry$1.registerSchema(workbenchColorsSchemaId,colorRegistry$1.getColorSchema());const delayer$1=new RunOnceScheduler(()=>schemaRegistry$1.notifySchemaChanged(workbenchColorsSchemaId),200);colorRegistry$1.onDidChangeSchema(()=>{delayer$1.isScheduled()||delayer$1.schedule()});class PageCoordinates{constructor(e,i){this.x=e,this.y=i,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new ClientCoordinates(this.x-StandardWindow.scrollX,this.y-StandardWindow.scrollY)}}class ClientCoordinates{constructor(e,i){this.clientX=e,this.clientY=i,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new PageCoordinates(this.clientX+StandardWindow.scrollX,this.clientY+StandardWindow.scrollY)}}class EditorPagePosition{constructor(e,i,o,a){this.x=e,this.y=i,this.width=o,this.height=a,this._editorPagePositionBrand=void 0}}class CoordinatesRelativeToEditor{constructor(e,i){this.x=e,this.y=i,this._positionRelativeToEditorBrand=void 0}}function createEditorPagePosition(s){const e=getDomNodePagePosition(s);return new EditorPagePosition(e.left,e.top,e.width,e.height)}function createCoordinatesRelativeToEditor(s,e,i){const o=e.width/s.offsetWidth,a=e.height/s.offsetHeight,c=(i.x-e.x)/o,d=(i.y-e.y)/a;return new CoordinatesRelativeToEditor(c,d)}class EditorMouseEvent extends StandardMouseEvent{constructor(e,i,o){super(e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=i,this.pos=new PageCoordinates(this.posx,this.posy),this.editorPos=createEditorPagePosition(o),this.relativePos=createCoordinatesRelativeToEditor(o,this.editorPos,this.pos)}}class EditorMouseEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,!1,this._editorViewDomNode)}onContextMenu(e,i){return addDisposableListener(e,"contextmenu",o=>{i(this._create(o))})}onMouseUp(e,i){return addDisposableListener(e,"mouseup",o=>{i(this._create(o))})}onMouseDown(e,i){return addDisposableListener(e,EventType$1.MOUSE_DOWN,o=>{i(this._create(o))})}onPointerDown(e,i){return addDisposableListener(e,EventType$1.POINTER_DOWN,o=>{i(this._create(o),o.pointerId)})}onMouseLeave(e,i){return addDisposableListener(e,EventType$1.MOUSE_LEAVE,o=>{i(this._create(o))})}onMouseMove(e,i){return addDisposableListener(e,"mousemove",o=>i(this._create(o)))}}class EditorPointerEventFactory{constructor(e){this._editorViewDomNode=e}_create(e){return new EditorMouseEvent(e,!1,this._editorViewDomNode)}onPointerUp(e,i){return addDisposableListener(e,"pointerup",o=>{i(this._create(o))})}onPointerDown(e,i){return addDisposableListener(e,EventType$1.POINTER_DOWN,o=>{i(this._create(o),o.pointerId)})}onPointerLeave(e,i){return addDisposableListener(e,EventType$1.POINTER_LEAVE,o=>{i(this._create(o))})}onPointerMove(e,i){return addDisposableListener(e,"pointermove",o=>i(this._create(o)))}}class GlobalEditorPointerMoveMonitor extends Disposable{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new GlobalPointerMoveMonitor),this._keydownListener=null}startMonitoring(e,i,o,a,c){this._keydownListener=addStandardDisposableListener(document,"keydown",d=>{d.toKeybinding().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,d.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,i,o,d=>{a(new EditorMouseEvent(d,!0,this._editorViewDomNode))},d=>{this._keydownListener.dispose(),c(d)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class ViewEventHandler extends Disposable{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let i=!1;for(let o=0,a=e.length;o<a;o++){const c=e[o];switch(c.type){case 0:this.onCompositionStart(c)&&(i=!0);break;case 1:this.onCompositionEnd(c)&&(i=!0);break;case 2:this.onConfigurationChanged(c)&&(i=!0);break;case 3:this.onCursorStateChanged(c)&&(i=!0);break;case 4:this.onDecorationsChanged(c)&&(i=!0);break;case 5:this.onFlushed(c)&&(i=!0);break;case 6:this.onFocusChanged(c)&&(i=!0);break;case 7:this.onLanguageConfigurationChanged(c)&&(i=!0);break;case 8:this.onLineMappingChanged(c)&&(i=!0);break;case 9:this.onLinesChanged(c)&&(i=!0);break;case 10:this.onLinesDeleted(c)&&(i=!0);break;case 11:this.onLinesInserted(c)&&(i=!0);break;case 12:this.onRevealRangeRequest(c)&&(i=!0);break;case 13:this.onScrollChanged(c)&&(i=!0);break;case 15:this.onTokensChanged(c)&&(i=!0);break;case 14:this.onThemeChanged(c)&&(i=!0);break;case 16:this.onTokensColorsChanged(c)&&(i=!0);break;case 17:this.onZonesChanged(c)&&(i=!0);break;default:console.info("View received unknown event: "),console.info(c)}}i&&(this._shouldRender=!0)}}class ViewPart extends ViewEventHandler{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class PartFingerprints{static write(e,i){e.setAttribute("data-mprt",String(i))}static read(e){const i=e.getAttribute("data-mprt");return i===null?0:parseInt(i,10)}static collect(e,i){const o=[];let a=0;for(;e&&e!==document.body&&e!==i;)e.nodeType===e.ELEMENT_NODE&&(o[a++]=this.read(e)),e=e.parentElement;const c=new Uint8Array(a);for(let d=0;d<a;d++)c[d]=o[a-d-1];return c}}class RestrictedRenderingContext{constructor(e,i){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=i,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const o=this._viewLayout.getCurrentViewport();this.scrollTop=o.top,this.scrollLeft=o.left,this.viewportWidth=o.width,this.viewportHeight=o.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class RenderingContext extends RestrictedRenderingContext{constructor(e,i,o){super(e,i),this._renderingContextBrand=void 0,this._viewLines=o}linesVisibleRangesForRange(e,i){return this._viewLines.linesVisibleRangesForRange(e,i)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class LineVisibleRanges{constructor(e,i,o){this.outsideRenderedLine=e,this.lineNumber=i,this.ranges=o}}class HorizontalRange{constructor(e,i){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(i)}static from(e){const i=new Array(e.length);for(let o=0,a=e.length;o<a;o++){const c=e[o];i[o]=new HorizontalRange(c.left,c.width)}return i}toString(){return`[${this.left},${this.width}]`}}class FloatHorizontalRange{constructor(e,i){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=i}toString(){return`[${this.left},${this.width}]`}static compare(e,i){return e.left-i.left}}class HorizontalPosition{constructor(e,i){this.outsideRenderedLine=e,this.originalLeft=i,this.left=Math.round(this.originalLeft)}}class VisibleRanges{constructor(e,i){this.outsideRenderedLine=e,this.ranges=i}}class RangeUtil{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,i){e.selectNodeContents(i)}static _readClientRects(e,i,o,a,c){const d=this._createRange();try{return d.setStart(e,i),d.setEnd(o,a),d.getClientRects()}catch{return null}finally{this._detachRange(d,c)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(FloatHorizontalRange.compare);const i=[];let o=0,a=e[0];for(let c=1,d=e.length;c<d;c++){const _=e[c];a.left+a.width+.9>=_.left?a.width=Math.max(a.width,_.left+_.width-a.left):(i[o++]=a,a=_)}return i[o++]=a,i}static _createHorizontalRangesFromClientRects(e,i,o){if(!e||e.length===0)return null;const a=[];for(let c=0,d=e.length;c<d;c++){const _=e[c];a[c]=new FloatHorizontalRange(Math.max(0,(_.left-i)/o),_.width/o)}return this._mergeAdjacentRanges(a)}static readHorizontalRanges(e,i,o,a,c,d,_,b){const j=e.children.length-1;if(0>j)return null;if(i=Math.min(j,Math.max(0,i)),a=Math.min(j,Math.max(0,a)),i===a&&o===c&&o===0&&!e.children[i].firstChild){const it=e.children[i].getClientRects();return this._createHorizontalRangesFromClientRects(it,d,_)}i!==a&&a>0&&c===0&&(a--,c=1073741824);let _e=e.children[i].firstChild,et=e.children[a].firstChild;if((!_e||!et)&&(!_e&&o===0&&i>0&&(_e=e.children[i-1].firstChild,o=1073741824),!et&&c===0&&a>0&&(et=e.children[a-1].firstChild,c=1073741824)),!_e||!et)return null;o=Math.min(_e.textContent.length,Math.max(0,o)),c=Math.min(et.textContent.length,Math.max(0,c));const tt=this._readClientRects(_e,o,et,c,b);return this._createHorizontalRangesFromClientRects(tt,d,_)}}const canUseFastRenderedViewLine=function(){return isNative?!0:!(isLinux||isFirefox||isSafari)}();let monospaceAssumptionsAreValid=!0;class DomReadingContext{constructor(e,i){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1,this.endNode=i}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}}class ViewLineOptions{constructor(e,i){this.themeType=i;const o=e.options,a=o.get(46);this.renderWhitespace=o.get(90),this.renderControlCharacters=o.get(85),this.spaceWidth=a.spaceWidth,this.middotWidth=a.middotWidth,this.wsmiddotWidth=a.wsmiddotWidth,this.useMonospaceOptimizations=a.isMonospace&&!o.get(29),this.canUseHalfwidthRightwardsArrow=a.canUseHalfwidthRightwardsArrow,this.lineHeight=o.get(61),this.stopRenderingLineAfter=o.get(107),this.fontLigatures=o.get(47)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class ViewLine{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=createFastDomNode(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return isHighContrast(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,i,o,a){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const c=o.getViewLineRenderingData(e),d=this._options,_=LineDecoration.filter(c.inlineDecorations,e,c.minColumn,c.maxColumn);let b=null;if(isHighContrast(d.themeType)||this._options.renderWhitespace==="selection"){const et=o.selections;for(const tt of et){if(tt.endLineNumber<e||tt.startLineNumber>e)continue;const it=tt.startLineNumber===e?tt.startColumn:c.minColumn,st=tt.endLineNumber===e?tt.endColumn:c.maxColumn;it<st&&(isHighContrast(d.themeType)||this._options.renderWhitespace!=="selection"?_.push(new LineDecoration(it,st,"inline-selected-text",0)):(b||(b=[]),b.push(new LineRange(it-1,st-1))))}}const k=new RenderLineInput(d.useMonospaceOptimizations,d.canUseHalfwidthRightwardsArrow,c.content,c.continuesWithWrappedLine,c.isBasicASCII,c.containsRTL,c.minColumn-1,c.tokens,_,c.tabSize,c.startVisibleColumn,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,d.stopRenderingLineAfter,d.renderWhitespace,d.renderControlCharacters,d.fontLigatures!==EditorFontLigatures.OFF,b);if(this._renderedViewLine&&this._renderedViewLine.input.equals(k))return!1;a.appendASCIIString('<div style="top:'),a.appendASCIIString(String(i)),a.appendASCIIString("px;height:"),a.appendASCIIString(String(this._options.lineHeight)),a.appendASCIIString('px;" class="'),a.appendASCIIString(ViewLine.CLASS_NAME),a.appendASCIIString('">');const j=renderViewLine(k,a);a.appendASCIIString("</div>");let _e=null;return monospaceAssumptionsAreValid&&canUseFastRenderedViewLine&&c.isBasicASCII&&d.useMonospaceOptimizations&&j.containsForeignElements===0&&c.content.length<300&&k.lineTokens.getCount()<100&&(_e=new FastRenderedViewLine(this._renderedViewLine?this._renderedViewLine.domNode:null,k,j.characterMapping)),_e||(_e=createRenderedLine(this._renderedViewLine?this._renderedViewLine.domNode:null,k,j.characterMapping,j.containsRTL,j.containsForeignElements)),this._renderedViewLine=_e,!0}layoutLine(e,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(i),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof FastRenderedViewLine:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine?this._renderedViewLine.monospaceAssumptionsAreValid():monospaceAssumptionsAreValid}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof FastRenderedViewLine&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,i,o,a){if(!this._renderedViewLine)return null;i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i)),o=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,o));const c=this._renderedViewLine.input.stopRenderingLineAfter;let d=!1;c!==-1&&i>c+1&&o>c+1&&(d=!0),c!==-1&&i>c+1&&(i=c+1),c!==-1&&o>c+1&&(o=c+1);const _=this._renderedViewLine.getVisibleRangesForRange(e,i,o,a);return _&&_.length>0?new VisibleRanges(d,_):null}getColumnOfNodeOffset(e,i,o){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,i,o):1}}ViewLine.CLASS_NAME="view-line";class FastRenderedViewLine{constructor(e,i,o){this.domNode=e,this.input=i,this._characterMapping=o,this._charWidth=i.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return monospaceAssumptionsAreValid;const e=this.getWidth(),i=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-i)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),monospaceAssumptionsAreValid=!1),monospaceAssumptionsAreValid}toSlowRenderedLine(){return createRenderedLine(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,i,o,a){const c=this._getCharPosition(i),d=this._getCharPosition(o);return[new FloatHorizontalRange(c,d-c)]}_getCharPosition(e){const i=this._characterMapping.getHorizontalOffset(e);return this._charWidth*i}getColumnOfNodeOffset(e,i,o){const a=i.textContent.length;let c=-1;for(;i;)i=i.previousSibling,c++;return this._characterMapping.getColumn(new DomPosition(c,o),a)}}class RenderedViewLine{constructor(e,i,o,a,c){if(this.domNode=e,this.input=i,this._characterMapping=o,this._isWhitespaceOnly=/^\s*$/.test(i.lineContent),this._containsForeignElements=c,this._cachedWidth=-1,this._pixelOffsetCache=null,!a||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let d=0,_=this._characterMapping.length;d<=_;d++)this._pixelOffsetCache[d]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,i,o,a){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const c=this._readPixelOffset(this.domNode,e,i,a);if(c===-1)return null;const d=this._readPixelOffset(this.domNode,e,o,a);return d===-1?null:[new FloatHorizontalRange(c,d-c)]}return this._readVisibleRangesForRange(this.domNode,e,i,o,a)}_readVisibleRangesForRange(e,i,o,a,c){if(o===a){const d=this._readPixelOffset(e,i,o,c);return d===-1?null:[new FloatHorizontalRange(d,0)]}else return this._readRawVisibleRangesForRange(e,o,a,c)}_readPixelOffset(e,i,o,a){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const c=this._getReadingTarget(e);return c.firstChild?c.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const c=this._pixelOffsetCache[o];if(c!==-1)return c;const d=this._actualReadPixelOffset(e,i,o,a);return this._pixelOffsetCache[o]=d,d}return this._actualReadPixelOffset(e,i,o,a)}_actualReadPixelOffset(e,i,o,a){if(this._characterMapping.length===0){const b=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,a.clientRectDeltaLeft,a.clientRectScale,a.endNode);return!b||b.length===0?-1:b[0].left}if(o===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const c=this._characterMapping.getDomPosition(o),d=RangeUtil.readHorizontalRanges(this._getReadingTarget(e),c.partIndex,c.charIndex,c.partIndex,c.charIndex,a.clientRectDeltaLeft,a.clientRectScale,a.endNode);if(!d||d.length===0)return-1;const _=d[0].left;if(this.input.isBasicASCII){const b=this._characterMapping.getHorizontalOffset(o),k=Math.round(this.input.spaceWidth*b);if(Math.abs(k-_)<=1)return k}return _}_readRawVisibleRangesForRange(e,i,o,a){if(i===1&&o===this._characterMapping.length)return[new FloatHorizontalRange(0,this.getWidth())];const c=this._characterMapping.getDomPosition(i),d=this._characterMapping.getDomPosition(o);return RangeUtil.readHorizontalRanges(this._getReadingTarget(e),c.partIndex,c.charIndex,d.partIndex,d.charIndex,a.clientRectDeltaLeft,a.clientRectScale,a.endNode)}getColumnOfNodeOffset(e,i,o){const a=i.textContent.length;let c=-1;for(;i;)i=i.previousSibling,c++;return this._characterMapping.getColumn(new DomPosition(c,o),a)}}class WebKitRenderedViewLine extends RenderedViewLine{_readVisibleRangesForRange(e,i,o,a,c){const d=super._readVisibleRangesForRange(e,i,o,a,c);if(!d||d.length===0||o===a||o===1&&a===this._characterMapping.length)return d;if(!this.input.containsRTL){const _=this._readPixelOffset(e,i,a,c);if(_!==-1){const b=d[d.length-1];b.left<_&&(b.width=_-b.left)}}return d}}const createRenderedLine=function(){return isWebKit?createWebKitRenderedLine:createNormalRenderedLine}();function createWebKitRenderedLine(s,e,i,o,a){return new WebKitRenderedViewLine(s,e,i,o,a)}function createNormalRenderedLine(s,e,i,o,a){return new RenderedViewLine(s,e,i,o,a)}class CursorColumns{static _nextVisibleColumn(e,i,o){return e===9?CursorColumns.nextRenderTabStop(i,o):isFullWidthCharacter(e)||isEmojiImprecise(e)?i+2:i+1}static visibleColumnFromColumn(e,i,o){const a=Math.min(i-1,e.length),c=e.substring(0,a),d=new GraphemeIterator(c);let _=0;for(;!d.eol();){const b=getNextCodePoint(c,a,d.offset);d.nextGraphemeLength(),_=this._nextVisibleColumn(b,_,o)}return _}static columnFromVisibleColumn(e,i,o){if(i<=0)return 1;const a=e.length,c=new GraphemeIterator(e);let d=0,_=1;for(;!c.eol();){const b=getNextCodePoint(e,a,c.offset);c.nextGraphemeLength();const k=this._nextVisibleColumn(b,d,o),j=c.offset+1;if(k>=i){const _e=i-d;return k-i<_e?j:_}d=k,_=j}return a+1}static nextRenderTabStop(e,i){return e+i-e%i}static nextIndentTabStop(e,i){return e+i-e%i}static prevRenderTabStop(e,i){return Math.max(0,e-1-(e-1)%i)}static prevIndentTabStop(e,i){return Math.max(0,e-1-(e-1)%i)}}class AtomicTabMoveOperations{static whitespaceVisibleColumn(e,i,o){const a=e.length;let c=0,d=-1,_=-1;for(let b=0;b<a;b++){if(b===i)return[d,_,c];switch(c%o===0&&(d=b,_=c),e.charCodeAt(b)){case 32:c+=1;break;case 9:c=CursorColumns.nextRenderTabStop(c,o);break;default:return[-1,-1,-1]}}return i===a?[d,_,c]:[-1,-1,-1]}static atomicPosition(e,i,o,a){const c=e.length,[d,_,b]=AtomicTabMoveOperations.whitespaceVisibleColumn(e,i,o);if(b===-1)return-1;let k;switch(a){case 0:k=!0;break;case 1:k=!1;break;case 2:if(b%o===0)return i;k=b%o<=o/2;break}if(k){if(d===-1)return-1;let et=_;for(let tt=d;tt<c;++tt){if(et===_+o)return d;switch(e.charCodeAt(tt)){case 32:et+=1;break;case 9:et=CursorColumns.nextRenderTabStop(et,o);break;default:return-1}}return et===_+o?d:-1}const j=CursorColumns.nextRenderTabStop(b,o);let _e=b;for(let et=i;et<c;et++){if(_e===j)return et;switch(e.charCodeAt(et)){case 32:_e+=1;break;case 9:_e=CursorColumns.nextRenderTabStop(_e,o);break;default:return-1}}return _e===j?c:-1}}class UnknownHitTestResult{constructor(e=null){this.hitTarget=e,this.type=0}}class ContentHitTestResult{constructor(e,i,o){this.position=e,this.spanNode=i,this.injectedText=o,this.type=1}}var HitTestResult;(function(s){function e(i,o,a){const c=i.getPositionFromDOMInfo(o,a);return c?new ContentHitTestResult(c,o,null):new UnknownHitTestResult(o)}s.createFromDOMInfo=e})(HitTestResult||(HitTestResult={}));class PointerHandlerLastRenderData{constructor(e,i){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=i}}class MouseTarget{static _deduceRage(e,i=null){return!i&&e?new Range$2(e.lineNumber,e.column,e.lineNumber,e.column):i!=null?i:null}static createUnknown(e,i,o){return{type:0,element:e,mouseColumn:i,position:o,range:this._deduceRage(o)}}static createTextarea(e,i){return{type:1,element:e,mouseColumn:i,position:null,range:null}}static createMargin(e,i,o,a,c,d){return{type:e,element:i,mouseColumn:o,position:a,range:c,detail:d}}static createViewZone(e,i,o,a,c){return{type:e,element:i,mouseColumn:o,position:a,range:this._deduceRage(a),detail:c}}static createContentText(e,i,o,a,c){return{type:6,element:e,mouseColumn:i,position:o,range:this._deduceRage(o,a),detail:c}}static createContentEmpty(e,i,o,a){return{type:7,element:e,mouseColumn:i,position:o,range:this._deduceRage(o),detail:a}}static createContentWidget(e,i,o){return{type:9,element:e,mouseColumn:i,position:null,range:null,detail:o}}static createScrollbar(e,i,o){return{type:11,element:e,mouseColumn:i,position:o,range:this._deduceRage(o)}}static createOverlayWidget(e,i,o){return{type:12,element:e,mouseColumn:i,position:null,range:null,detail:o}}static createOutsideEditor(e,i){return{type:13,element:null,mouseColumn:e,position:i,range:this._deduceRage(i)}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class ElementPath{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class HitTestContext{constructor(e,i,o){this.viewModel=e.viewModel;const a=e.configuration.options;this.layoutInfo=a.get(133),this.viewDomNode=i.viewDomNode,this.lineHeight=a.get(61),this.stickyTabStops=a.get(106),this.typicalHalfwidthCharacterWidth=a.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=o,this._context=e,this._viewHelper=i}getZoneAtCoord(e){return HitTestContext.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,i){const o=e.viewLayout.getWhitespaceAtVerticalOffset(i);if(o){const a=o.verticalOffset+o.height/2,c=e.viewModel.getLineCount();let d=null,_,b=null;return o.afterLineNumber!==c&&(b=new Position$1(o.afterLineNumber+1,1)),o.afterLineNumber>0&&(d=new Position$1(o.afterLineNumber,e.viewModel.getLineMaxColumn(o.afterLineNumber))),b===null?_=d:d===null?_=b:i<a?_=d:_=b,{viewZoneId:o.id,afterLineNumber:o.afterLineNumber,positionBefore:d,positionAfter:b,position:_}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const a=this._context.viewModel.getLineCount(),c=this._context.viewModel.getLineMaxColumn(a);return{range:new Range$2(a,c,a,c),isAfterLines:!0}}const i=this._context.viewLayout.getLineNumberAtVerticalOffset(e),o=this._context.viewModel.getLineMaxColumn(i);return{range:new Range$2(i,1,i,o),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,i){return HitTestContext._findAttribute(e,i,this._viewHelper.viewDomNode)}static _findAttribute(e,i,o){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(i))return e.getAttribute(i);if(e===o)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,i){return this._viewHelper.visibleRangeForPosition(e,i)}getPositionFromDOMInfo(e,i){return this._viewHelper.getPositionFromDOMInfo(e,i)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class BareHitTestRequest{constructor(e,i,o,a){this.editorPos=i,this.pos=o,this.relativePos=a,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,MouseTargetFactory._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class HitTestRequest extends BareHitTestRequest{constructor(e,i,o,a,c){super(e,i,o,a),this._ctx=e,c?(this.target=c,this.targetPath=PartFingerprints.collect(c,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?CursorColumns.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return MouseTarget.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return MouseTarget.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,i,o,a){return MouseTarget.createMargin(e,this.target,this._getMouseColumn(i),i,o,a)}fulfillViewZone(e,i,o){return MouseTarget.createViewZone(e,this.target,this._getMouseColumn(i),i,o)}fulfillContentText(e,i,o){return MouseTarget.createContentText(this.target,this._getMouseColumn(e),e,i,o)}fulfillContentEmpty(e,i){return MouseTarget.createContentEmpty(this.target,this._getMouseColumn(e),e,i)}fulfillContentWidget(e){return MouseTarget.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return MouseTarget.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return MouseTarget.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new HitTestRequest(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const EMPTY_CONTENT_AFTER_LINES={isAfterLines:!0};function createEmptyContentDataInLines(s){return{isAfterLines:!1,horizontalDistanceToText:s}}class MouseTargetFactory{constructor(e,i){this._context=e,this._viewHelper=i}mouseTargetIsWidget(e){const i=e.target,o=PartFingerprints.collect(i,this._viewHelper.viewDomNode);return!!(ElementPath.isChildOfContentWidgets(o)||ElementPath.isChildOfOverflowingContentWidgets(o)||ElementPath.isChildOfOverlayWidgets(o))}createMouseTarget(e,i,o,a,c){const d=new HitTestContext(this._context,this._viewHelper,e),_=new HitTestRequest(d,i,o,a,c);try{return MouseTargetFactory._createMouseTarget(d,_,!1)}catch{return _.fulfillUnknown()}}static _createMouseTarget(e,i,o){if(i.target===null){if(o)return i.fulfillUnknown();const d=MouseTargetFactory._doHitTest(e,i);return d.type===1?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,i,d.spanNode,d.position,d.injectedText):this._createMouseTarget(e,i.withTarget(d.hitTarget),!0)}const a=i;let c=null;return c=c||MouseTargetFactory._hitTestContentWidget(e,a),c=c||MouseTargetFactory._hitTestOverlayWidget(e,a),c=c||MouseTargetFactory._hitTestMinimap(e,a),c=c||MouseTargetFactory._hitTestScrollbarSlider(e,a),c=c||MouseTargetFactory._hitTestViewZone(e,a),c=c||MouseTargetFactory._hitTestMargin(e,a),c=c||MouseTargetFactory._hitTestViewCursor(e,a),c=c||MouseTargetFactory._hitTestTextArea(e,a),c=c||MouseTargetFactory._hitTestViewLines(e,a,o),c=c||MouseTargetFactory._hitTestScrollbar(e,a),c||i.fulfillUnknown()}static _hitTestContentWidget(e,i){if(ElementPath.isChildOfContentWidgets(i.targetPath)||ElementPath.isChildOfOverflowingContentWidgets(i.targetPath)){const o=e.findAttribute(i.target,"widgetId");return o?i.fulfillContentWidget(o):i.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,i){if(ElementPath.isChildOfOverlayWidgets(i.targetPath)){const o=e.findAttribute(i.target,"widgetId");return o?i.fulfillOverlayWidget(o):i.fulfillUnknown()}return null}static _hitTestViewCursor(e,i){if(i.target){const o=e.lastRenderData.lastViewCursorsRenderData;for(const a of o)if(i.target===a.domNode)return i.fulfillContentText(a.position,null,{mightBeForeignElement:!1,injectedText:null})}if(i.isInContentArea){const o=e.lastRenderData.lastViewCursorsRenderData,a=i.mouseContentHorizontalOffset,c=i.mouseVerticalOffset;for(const d of o){if(a<d.contentLeft||a>d.contentLeft+d.width)continue;const _=e.getVerticalOffsetForLineNumber(d.position.lineNumber);if(_<=c&&c<=_+d.height)return i.fulfillContentText(d.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,i){const o=e.getZoneAtCoord(i.mouseVerticalOffset);if(o){const a=i.isInContentArea?8:5;return i.fulfillViewZone(a,o.position,o)}return null}static _hitTestTextArea(e,i){return ElementPath.isTextArea(i.targetPath)?e.lastRenderData.lastTextareaPosition?i.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):i.fulfillTextarea():null}static _hitTestMargin(e,i){if(i.isInMarginArea){const o=e.getFullLineRangeAtCoord(i.mouseVerticalOffset),a=o.range.getStartPosition();let c=Math.abs(i.relativePos.x);const d={isAfterLines:o.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:c};return c-=e.layoutInfo.glyphMarginLeft,c<=e.layoutInfo.glyphMarginWidth?i.fulfillMargin(2,a,o.range,d):(c-=e.layoutInfo.glyphMarginWidth,c<=e.layoutInfo.lineNumbersWidth?i.fulfillMargin(3,a,o.range,d):(c-=e.layoutInfo.lineNumbersWidth,i.fulfillMargin(4,a,o.range,d)))}return null}static _hitTestViewLines(e,i,o){if(!ElementPath.isChildOfViewLines(i.targetPath))return null;if(e.isInTopPadding(i.mouseVerticalOffset))return i.fulfillContentEmpty(new Position$1(1,1),EMPTY_CONTENT_AFTER_LINES);if(e.isAfterLines(i.mouseVerticalOffset)||e.isInBottomPadding(i.mouseVerticalOffset)){const c=e.viewModel.getLineCount(),d=e.viewModel.getLineMaxColumn(c);return i.fulfillContentEmpty(new Position$1(c,d),EMPTY_CONTENT_AFTER_LINES)}if(o){if(ElementPath.isStrictChildOfViewLines(i.targetPath)){const c=e.getLineNumberAtVerticalOffset(i.mouseVerticalOffset);if(e.viewModel.getLineLength(c)===0){const _=e.getLineWidth(c),b=createEmptyContentDataInLines(i.mouseContentHorizontalOffset-_);return i.fulfillContentEmpty(new Position$1(c,1),b)}const d=e.getLineWidth(c);if(i.mouseContentHorizontalOffset>=d){const _=createEmptyContentDataInLines(i.mouseContentHorizontalOffset-d),b=new Position$1(c,e.viewModel.getLineMaxColumn(c));return i.fulfillContentEmpty(b,_)}}return i.fulfillUnknown()}const a=MouseTargetFactory._doHitTest(e,i);return a.type===1?MouseTargetFactory.createMouseTargetFromHitTestPosition(e,i,a.spanNode,a.position,a.injectedText):this._createMouseTarget(e,i.withTarget(a.hitTarget),!0)}static _hitTestMinimap(e,i){if(ElementPath.isChildOfMinimap(i.targetPath)){const o=e.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),a=e.viewModel.getLineMaxColumn(o);return i.fulfillScrollbar(new Position$1(o,a))}return null}static _hitTestScrollbarSlider(e,i){if(ElementPath.isChildOfScrollableElement(i.targetPath)&&i.target&&i.target.nodeType===1){const o=i.target.className;if(o&&/\b(slider|scrollbar)\b/.test(o)){const a=e.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),c=e.viewModel.getLineMaxColumn(a);return i.fulfillScrollbar(new Position$1(a,c))}}return null}static _hitTestScrollbar(e,i){if(ElementPath.isChildOfScrollableElement(i.targetPath)){const o=e.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),a=e.viewModel.getLineMaxColumn(o);return i.fulfillScrollbar(new Position$1(o,a))}return null}getMouseColumn(e){const i=this._context.configuration.options,o=i.get(133),a=this._context.viewLayout.getCurrentScrollLeft()+e.x-o.contentLeft;return MouseTargetFactory._getMouseColumn(a,i.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,i){return e<0?1:Math.round(e/i)+1}static createMouseTargetFromHitTestPosition(e,i,o,a,c){const d=a.lineNumber,_=a.column,b=e.getLineWidth(d);if(i.mouseContentHorizontalOffset>b){const ot=createEmptyContentDataInLines(i.mouseContentHorizontalOffset-b);return i.fulfillContentEmpty(a,ot)}const k=e.visibleRangeForPosition(d,_);if(!k)return i.fulfillUnknown(a);const j=k.left;if(i.mouseContentHorizontalOffset===j)return i.fulfillContentText(a,null,{mightBeForeignElement:!!c,injectedText:c});const _e=[];if(_e.push({offset:k.left,column:_}),_>1){const ot=e.visibleRangeForPosition(d,_-1);ot&&_e.push({offset:ot.left,column:_-1})}const et=e.viewModel.getLineMaxColumn(d);if(_<et){const ot=e.visibleRangeForPosition(d,_+1);ot&&_e.push({offset:ot.left,column:_+1})}_e.sort((ot,nt)=>ot.offset-nt.offset);const tt=i.pos.toClientCoordinates(),it=o.getBoundingClientRect(),st=it.left<=tt.clientX&&tt.clientX<=it.right;for(let ot=1;ot<_e.length;ot++){const nt=_e[ot-1],rt=_e[ot];if(nt.offset<=i.mouseContentHorizontalOffset&&i.mouseContentHorizontalOffset<=rt.offset){const at=new Range$2(d,nt.column,d,rt.column),lt=Math.abs(nt.offset-i.mouseContentHorizontalOffset),gt=Math.abs(rt.offset-i.mouseContentHorizontalOffset),ht=lt<gt?new Position$1(d,nt.column):new Position$1(d,rt.column);return i.fulfillContentText(ht,at,{mightBeForeignElement:!st||!!c,injectedText:c})}}return i.fulfillContentText(a,null,{mightBeForeignElement:!st||!!c,injectedText:c})}static _doHitTestWithCaretRangeFromPoint(e,i){const o=e.getLineNumberAtVerticalOffset(i.mouseVerticalOffset),c=e.getVerticalOffsetForLineNumber(o)+Math.floor(e.lineHeight/2);let d=i.pos.y+(c-i.mouseVerticalOffset);d<=i.editorPos.y&&(d=i.editorPos.y+1),d>=i.editorPos.y+i.editorPos.height&&(d=i.editorPos.y+i.editorPos.height-1);const _=new PageCoordinates(i.pos.x,d),b=this._actualDoHitTestWithCaretRangeFromPoint(e,_.toClientCoordinates());return b.type===1?b:this._actualDoHitTestWithCaretRangeFromPoint(e,i.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,i){const o=getShadowRoot(e.viewDomNode);let a;if(o?typeof o.caretRangeFromPoint>"u"?a=shadowCaretRangeFromPoint(o,i.clientX,i.clientY):a=o.caretRangeFromPoint(i.clientX,i.clientY):a=document.caretRangeFromPoint(i.clientX,i.clientY),!a||!a.startContainer)return new UnknownHitTestResult;const c=a.startContainer;if(c.nodeType===c.TEXT_NODE){const d=c.parentNode,_=d?d.parentNode:null,b=_?_.parentNode:null;return(b&&b.nodeType===b.ELEMENT_NODE?b.className:null)===ViewLine.CLASS_NAME?HitTestResult.createFromDOMInfo(e,d,a.startOffset):new UnknownHitTestResult(c.parentNode)}else if(c.nodeType===c.ELEMENT_NODE){const d=c.parentNode,_=d?d.parentNode:null;return(_&&_.nodeType===_.ELEMENT_NODE?_.className:null)===ViewLine.CLASS_NAME?HitTestResult.createFromDOMInfo(e,c,c.textContent.length):new UnknownHitTestResult(c)}return new UnknownHitTestResult}static _doHitTestWithCaretPositionFromPoint(e,i){const o=document.caretPositionFromPoint(i.clientX,i.clientY);if(o.offsetNode.nodeType===o.offsetNode.TEXT_NODE){const a=o.offsetNode.parentNode,c=a?a.parentNode:null,d=c?c.parentNode:null;return(d&&d.nodeType===d.ELEMENT_NODE?d.className:null)===ViewLine.CLASS_NAME?HitTestResult.createFromDOMInfo(e,o.offsetNode.parentNode,o.offset):new UnknownHitTestResult(o.offsetNode.parentNode)}if(o.offsetNode.nodeType===o.offsetNode.ELEMENT_NODE){const a=o.offsetNode.parentNode,c=a&&a.nodeType===a.ELEMENT_NODE?a.className:null,d=a?a.parentNode:null,_=d&&d.nodeType===d.ELEMENT_NODE?d.className:null;if(c===ViewLine.CLASS_NAME){const b=o.offsetNode.childNodes[Math.min(o.offset,o.offsetNode.childNodes.length-1)];if(b)return HitTestResult.createFromDOMInfo(e,b,0)}else if(_===ViewLine.CLASS_NAME)return HitTestResult.createFromDOMInfo(e,o.offsetNode,0)}return new UnknownHitTestResult(o.offsetNode)}static _snapToSoftTabBoundary(e,i){const o=i.getLineContent(e.lineNumber),{tabSize:a}=i.model.getOptions(),c=AtomicTabMoveOperations.atomicPosition(o,e.column-1,a,2);return c!==-1?new Position$1(e.lineNumber,c+1):e}static _doHitTest(e,i){let o=new UnknownHitTestResult;if(typeof document.caretRangeFromPoint=="function"?o=this._doHitTestWithCaretRangeFromPoint(e,i):document.caretPositionFromPoint&&(o=this._doHitTestWithCaretPositionFromPoint(e,i.pos.toClientCoordinates())),o.type===1){const a=e.viewModel.getInjectedTextAt(o.position),c=e.viewModel.normalizePosition(o.position,2);(a||!c.equals(o.position))&&(o=new ContentHitTestResult(c,o.spanNode,a))}return o.type===1&&e.stickyTabStops&&(o=new ContentHitTestResult(this._snapToSoftTabBoundary(o.position,e.viewModel),o.spanNode,o.injectedText)),o}}function shadowCaretRangeFromPoint(s,e,i){const o=document.createRange();let a=s.elementFromPoint(e,i);if(a!==null){for(;a&&a.firstChild&&a.firstChild.nodeType!==a.firstChild.TEXT_NODE&&a.lastChild&&a.lastChild.firstChild;)a=a.lastChild;const c=a.getBoundingClientRect(),d=window.getComputedStyle(a,null).getPropertyValue("font"),_=a.innerText;let b=c.left,k=0,j;if(e>c.left+c.width)k=_.length;else{const _e=CharWidthReader.getInstance();for(let et=0;et<_.length+1;et++){if(j=_e.getCharWidth(_.charAt(et),d)/2,b+=j,e<b){k=et;break}b+=j}}o.setStart(a.firstChild,k),o.setEnd(a.firstChild,k)}return o}class CharWidthReader{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return CharWidthReader._INSTANCE||(CharWidthReader._INSTANCE=new CharWidthReader),CharWidthReader._INSTANCE}getCharWidth(e,i){const o=e+i;if(this._cache[o])return this._cache[o];const a=this._canvas.getContext("2d");a.font=i;const d=a.measureText(e).width;return this._cache[o]=d,d}}CharWidthReader._INSTANCE=null;class MouseHandler extends ViewEventHandler{constructor(e,i,o){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=i,this.viewHelper=o,this.mouseTargetFactory=new MouseTargetFactory(this._context,o),this._mouseDownOperation=this._register(new MouseDownOperation(this._context,this.viewController,this.viewHelper,(_,b)=>this._createMouseTarget(_,b),_=>this._getMouseColumn(_))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(133).height;const a=new EditorMouseEventFactory(this.viewHelper.viewDomNode);this._register(a.onContextMenu(this.viewHelper.viewDomNode,_=>this._onContextMenu(_,!0))),this._register(a.onMouseMove(this.viewHelper.viewDomNode,_=>{this._onMouseMove(_),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=addDisposableListener(document,"mousemove",b=>{this.viewHelper.viewDomNode.contains(b.target)||this._onMouseLeave(new EditorMouseEvent(b,!1,this.viewHelper.viewDomNode))}))})),this._register(a.onMouseUp(this.viewHelper.viewDomNode,_=>this._onMouseUp(_))),this._register(a.onMouseLeave(this.viewHelper.viewDomNode,_=>this._onMouseLeave(_)));let c=0;this._register(a.onPointerDown(this.viewHelper.viewDomNode,(_,b)=>{c=b})),this._register(addDisposableListener(this.viewHelper.viewDomNode,EventType$1.POINTER_UP,_=>{this._mouseDownOperation.onPointerUp()})),this._register(a.onMouseDown(this.viewHelper.viewDomNode,_=>this._onMouseDown(_,c)));const d=_=>{if(this.viewController.emitMouseWheel(_),!this._context.configuration.options.get(70))return;const b=new StandardWheelEvent(_);if(isMacintosh?(_.metaKey||_.ctrlKey)&&!_.shiftKey&&!_.altKey:_.ctrlKey&&!_.metaKey&&!_.shiftKey&&!_.altKey){const j=EditorZoom.getZoomLevel(),_e=b.deltaY>0?1:-1;EditorZoom.setZoomLevel(j+_e),b.preventDefault(),b.stopPropagation()}};this._register(addDisposableListener(this.viewHelper.viewDomNode,EventType$1.MOUSE_WHEEL,d,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(133)){const i=this._context.configuration.options.get(133).height;this._height!==i&&(this._height=i,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,i){const a=new ClientCoordinates(e,i).toPageCoordinates(),c=createEditorPagePosition(this.viewHelper.viewDomNode);if(a.y<c.y||a.y>c.y+c.height||a.x<c.x||a.x>c.x+c.width)return null;const d=createCoordinatesRelativeToEditor(this.viewHelper.viewDomNode,c,a);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),c,a,d,null)}_createMouseTarget(e,i){let o=e.target;if(!this.viewHelper.viewDomNode.contains(o)){const a=getShadowRoot(this.viewHelper.viewDomNode);a&&(o=a.elementsFromPoint(e.posx,e.posy).find(c=>this.viewHelper.viewDomNode.contains(c)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,i?o:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,i){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,i)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,i){const o=this._createMouseTarget(e,!0),a=o.type===6||o.type===7,c=o.type===2||o.type===3||o.type===4,d=o.type===3,_=this._context.configuration.options.get(100),b=o.type===8||o.type===5,k=o.type===9;let j=e.leftButton||e.middleButton;isMacintosh&&e.leftButton&&e.ctrlKey&&(j=!1);const _e=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(j&&(a||d&&_))_e(),this._mouseDownOperation.start(o.type,e,i);else if(c)e.preventDefault();else if(b){const et=o.detail;j&&this.viewHelper.shouldSuppressMouseDownOnViewZone(et.viewZoneId)&&(_e(),this._mouseDownOperation.start(o.type,e,i),e.preventDefault())}else k&&this.viewHelper.shouldSuppressMouseDownOnWidget(o.detail)&&(_e(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:o})}}class MouseDownOperation extends Disposable{constructor(e,i,o,a,c){super(),this._context=e,this._viewController=i,this._viewHelper=o,this._createMouseTarget=a,this._getMouseColumn=c,this._mouseMoveMonitor=this._register(new GlobalEditorPointerMoveMonitor(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new TimeoutTimer),this._mouseState=new MouseDownState,this._currentSelection=new Selection$1(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const i=this._findMousePosition(e,!1);!i||(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:i}):this._dispatchMouse(i,!0))}start(e,i,o){this._lastMouseEvent=i,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(i),this._mouseState.setModifiers(i);const a=this._findMousePosition(i,!0);if(!a||!a.position)return;this._mouseState.trySetCount(i.detail,a.position),i.detail=this._mouseState.count;const c=this._context.configuration.options;if(!c.get(83)&&c.get(31)&&!c.get(18)&&!this._mouseState.altKey&&i.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&a.type===6&&a.position&&this._currentSelection.containsPosition(a.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,o,i.buttons,d=>this._onMouseDownThenMove(d),d=>{const _=this._findMousePosition(this._lastMouseEvent,!1);d&&d instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:_?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(a,i.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,o,i.buttons,d=>this._onMouseDownThenMove(d),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){!this._isActive||this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);!e||this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0)},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const i=e.editorPos,o=this._context.viewModel,a=this._context.viewLayout,c=this._getMouseColumn(e);if(e.posy<i.y){const _=Math.max(a.getCurrentScrollTop()-(i.y-e.posy),0),b=HitTestContext.getZoneAtCoord(this._context,_);if(b){const j=this._helpPositionJumpOverViewZone(b);if(j)return MouseTarget.createOutsideEditor(c,j)}const k=a.getLineNumberAtVerticalOffset(_);return MouseTarget.createOutsideEditor(c,new Position$1(k,1))}if(e.posy>i.y+i.height){const _=a.getCurrentScrollTop()+e.relativePos.y,b=HitTestContext.getZoneAtCoord(this._context,_);if(b){const j=this._helpPositionJumpOverViewZone(b);if(j)return MouseTarget.createOutsideEditor(c,j)}const k=a.getLineNumberAtVerticalOffset(_);return MouseTarget.createOutsideEditor(c,new Position$1(k,o.getLineMaxColumn(k)))}const d=a.getLineNumberAtVerticalOffset(a.getCurrentScrollTop()+e.relativePos.y);return e.posx<i.x?MouseTarget.createOutsideEditor(c,new Position$1(d,1)):e.posx>i.x+i.width?MouseTarget.createOutsideEditor(c,new Position$1(d,o.getLineMaxColumn(d))):null}_findMousePosition(e,i){const o=this._getPositionOutsideEditor(e);if(o)return o;const a=this._createMouseTarget(e,i);if(!a.position)return null;if(a.type===8||a.type===5){const d=this._helpPositionJumpOverViewZone(a.detail);if(d)return MouseTarget.createViewZone(a.type,a.element,a.mouseColumn,d,a.detail)}return a}_helpPositionJumpOverViewZone(e){const i=new Position$1(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),o=e.positionBefore,a=e.positionAfter;return o&&a?o.isBefore(i)?o:a:null}_dispatchMouse(e,i){!e.position||this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:i,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class MouseDownState{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,i){const o=new Date().getTime();o-this._lastSetMouseDownCountTime>MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=o,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(i)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=i,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class TextAreaState{constructor(e,i,o,a,c){this.value=e,this.selectionStart=i,this.selectionEnd=o,this.selectionStartPosition=a,this.selectionEndPosition=c}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e){return new TextAreaState(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new TextAreaState(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,i,o){i.setValue(e,this.value),o&&i.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const a=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,a,-1)}if(e>=this.selectionEnd){const a=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,a,1)}const i=this.value.substring(this.selectionStart,e);if(i.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,i,1);const o=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,o,-1)}_finishDeduceEditorPosition(e,i,o){let a=0,c=-1;for(;(c=i.indexOf(`
`,c+1))!==-1;)a++;return[e,o*i.length,a]}static deduceInput(e,i,o){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const a=Math.min(commonPrefixLength(e.value,i.value),e.selectionStart,i.selectionStart),c=Math.min(commonSuffixLength(e.value,i.value),e.value.length-e.selectionEnd,i.value.length-i.selectionEnd);e.value.substring(a,e.value.length-c);const d=i.value.substring(a,i.value.length-c),_=e.selectionStart-a,b=e.selectionEnd-a,k=i.selectionStart-a,j=i.selectionEnd-a;if(k===j){const et=e.selectionStart-a;return{text:d,replacePrevCharCnt:et,replaceNextCharCnt:0,positionDelta:0}}const _e=b-_;return{text:d,replacePrevCharCnt:_e,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===i.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:i.selectionEnd-e.selectionEnd};const o=Math.min(commonPrefixLength(e.value,i.value),e.selectionEnd),a=Math.min(commonSuffixLength(e.value,i.value),e.value.length-e.selectionEnd),c=e.value.substring(o,e.value.length-a),d=i.value.substring(o,i.value.length-a);e.selectionStart-o;const _=e.selectionEnd-o;i.selectionStart-o;const b=i.selectionEnd-o;return{text:d,replacePrevCharCnt:_,replaceNextCharCnt:c.length-_,positionDelta:b-d.length}}}TextAreaState.EMPTY=new TextAreaState("",0,0,null,null);class PagedScreenReaderStrategy{static _getPageOfLine(e,i){return Math.floor((e-1)/i)}static _getRangeForPage(e,i){const o=e*i,a=o+1,c=o+i;return new Range$2(a,1,c+1,1)}static fromEditorSelection(e,i,o,a,c){const d=PagedScreenReaderStrategy._getPageOfLine(o.startLineNumber,a),_=PagedScreenReaderStrategy._getRangeForPage(d,a),b=PagedScreenReaderStrategy._getPageOfLine(o.endLineNumber,a),k=PagedScreenReaderStrategy._getRangeForPage(b,a),j=_.intersectRanges(new Range$2(1,1,o.startLineNumber,o.startColumn));let _e=i.getValueInRange(j,1);const et=i.getLineCount(),tt=i.getLineMaxColumn(et),it=k.intersectRanges(new Range$2(o.endLineNumber,o.endColumn,et,tt));let st=i.getValueInRange(it,1),ot;if(d===b||d+1===b)ot=i.getValueInRange(o,1);else{const nt=_.intersectRanges(o),rt=k.intersectRanges(o);ot=i.getValueInRange(nt,1)+String.fromCharCode(8230)+i.getValueInRange(rt,1)}return c&&(_e.length>500&&(_e=_e.substring(_e.length-500,_e.length)),st.length>500&&(st=st.substring(0,500)),ot.length>2*500&&(ot=ot.substring(0,500)+String.fromCharCode(8230)+ot.substring(ot.length-500,ot.length))),new TextAreaState(_e+ot+st,_e.length,_e.length+ot.length,new Position$1(o.startLineNumber,o.startColumn),new Position$1(o.endLineNumber,o.endColumn))}}var TextAreaSyntethicEvents;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(TextAreaSyntethicEvents||(TextAreaSyntethicEvents={}));class InMemoryClipboardMetadataManager{constructor(){this._lastState=null}set(e,i){this._lastState={lastCopiedValue:e,data:i}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}InMemoryClipboardMetadataManager.INSTANCE=new InMemoryClipboardMetadataManager;class CompositionContext{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const i={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,i}}class TextAreaInput extends Disposable{constructor(e,i,o,a){super(),this._host=e,this._textArea=i,this._OS=o,this._browser=a,this._onFocus=this._register(new Emitter$1),this.onFocus=this._onFocus.event,this._onBlur=this._register(new Emitter$1),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new Emitter$1),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new Emitter$1),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new Emitter$1),this.onCut=this._onCut.event,this._onPaste=this._register(new Emitter$1),this.onPaste=this._onPaste.event,this._onType=this._register(new Emitter$1),this.onType=this._onType.event,this._onCompositionStart=this._register(new Emitter$1),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new Emitter$1),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new Emitter$1),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new Emitter$1),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new RunOnceScheduler(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new RunOnceScheduler(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=TextAreaState.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let c=null;this._register(this._textArea.onKeyDown(d=>{const _=new StandardKeyboardEvent(d);(_.keyCode===109||this._currentComposition&&_.keyCode===1)&&_.stopPropagation(),_.equals(9)&&_.preventDefault(),c=_,this._onKeyDown.fire(_)})),this._register(this._textArea.onKeyUp(d=>{const _=new StandardKeyboardEvent(d);this._onKeyUp.fire(_)})),this._register(this._textArea.onCompositionStart(d=>{const _=new CompositionContext;if(this._currentComposition){this._currentComposition=_;return}if(this._currentComposition=_,this._OS===2&&c&&c.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===d.data&&(c.code==="ArrowRight"||c.code==="ArrowLeft")){_.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:d.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:d.data});return}this._onCompositionStart.fire({data:d.data})})),this._register(this._textArea.onCompositionUpdate(d=>{const _=this._currentComposition;if(!_)return;if(this._browser.isAndroid){const k=TextAreaState.readFromTextArea(this._textArea),j=TextAreaState.deduceAndroidCompositionInput(this._textAreaState,k);this._textAreaState=k,this._onType.fire(j),this._onCompositionUpdate.fire(d);return}const b=_.handleCompositionUpdate(d.data);this._textAreaState=TextAreaState.readFromTextArea(this._textArea),this._onType.fire(b),this._onCompositionUpdate.fire(d)})),this._register(this._textArea.onCompositionEnd(d=>{const _=this._currentComposition;if(!_)return;if(this._currentComposition=null,this._browser.isAndroid){const k=TextAreaState.readFromTextArea(this._textArea),j=TextAreaState.deduceAndroidCompositionInput(this._textAreaState,k);this._textAreaState=k,this._onType.fire(j),this._onCompositionEnd.fire();return}const b=_.handleCompositionUpdate(d.data);this._textAreaState=TextAreaState.readFromTextArea(this._textArea),this._onType.fire(b),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(d=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const _=TextAreaState.readFromTextArea(this._textArea),b=TextAreaState.deduceInput(this._textAreaState,_,this._OS===2);b.replacePrevCharCnt===0&&b.text.length===1&&isHighSurrogate(b.text.charCodeAt(0))||(this._textAreaState=_,(b.text!==""||b.replacePrevCharCnt!==0||b.replaceNextCharCnt!==0||b.positionDelta!==0)&&this._onType.fire(b))})),this._register(this._textArea.onCut(d=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(d),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(d=>{this._ensureClipboardGetsEditorSelection(d)})),this._register(this._textArea.onPaste(d=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),d.preventDefault(),!d.clipboardData)return;let[_,b]=ClipboardEventUtils.getTextData(d.clipboardData);!_||(b=b||InMemoryClipboardMetadataManager.INSTANCE.get(_),this._onPaste.fire({text:_,metadata:b}))})),this._register(this._textArea.onFocus(()=>{const d=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!d&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return addDisposableListener(document,"selectionchange",i=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const o=Date.now(),a=o-e;if(e=o,a<5)return;const c=o-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),c<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const d=this._textArea.getValue();if(this._textAreaState.value!==d)return;const _=this._textArea.getSelectionStart(),b=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===_&&this._textAreaState.selectionEnd===b)return;const k=this._textAreaState.deduceEditorPosition(_),j=this._host.deduceModelPosition(k[0],k[1],k[2]),_e=this._textAreaState.deduceEditorPosition(b),et=this._host.deduceModelPosition(_e[0],_e[1],_e[2]),tt=new Selection$1(j.lineNumber,j.column,et.lineNumber,et.column);this._onSelectionChangeRequest.fire(tt)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,i){this._hasFocus||(i=i.collapseSelection()),i.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=i}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const i=this._host.getDataToCopy(),o={version:1,isFromEmptySelection:i.isFromEmptySelection,multicursorText:i.multicursorText,mode:i.mode};InMemoryClipboardMetadataManager.INSTANCE.set(this._browser.isFirefox?i.text.replace(/\r\n/g,`
`):i.text,o),e.preventDefault(),e.clipboardData&&ClipboardEventUtils.setTextData(e.clipboardData,i.text,i.html,o)}}class ClipboardEventUtils{static getTextData(e){const i=e.getData(Mimes.text);let o=null;const a=e.getData("vscode-editor-data");if(typeof a=="string")try{o=JSON.parse(a),o.version!==1&&(o=null)}catch{}return i.length===0&&o===null&&e.files.length>0?[Array.prototype.slice.call(e.files,0).map(d=>d.name).join(`
`),null]:[i,o]}static setTextData(e,i,o,a){e.setData(Mimes.text,i),typeof o=="string"&&e.setData("text/html",o),e.setData("vscode-editor-data",JSON.stringify(a))}}class TextAreaWrapper extends Disposable{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(createEventEmitter(this._actual,"keydown")).event,this.onKeyUp=this._register(createEventEmitter(this._actual,"keyup")).event,this.onCompositionStart=this._register(createEventEmitter(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(createEventEmitter(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(createEventEmitter(this._actual,"compositionend")).event,this.onInput=this._register(createEventEmitter(this._actual,"input")).event,this.onCut=this._register(createEventEmitter(this._actual,"cut")).event,this.onCopy=this._register(createEventEmitter(this._actual,"copy")).event,this.onPaste=this._register(createEventEmitter(this._actual,"paste")).event,this.onFocus=this._register(createEventEmitter(this._actual,"focus")).event,this.onBlur=this._register(createEventEmitter(this._actual,"blur")).event,this._onSyntheticTap=this._register(new Emitter$1),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(addDisposableListener(this._actual,TextAreaSyntethicEvents.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=getShadowRoot(this._actual);return e?e.activeElement===this._actual:isInDOM(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,i){const o=this._actual;o.value!==i&&(this.setIgnoreSelectionChangeTime("setValue"),o.value=i)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,i,o){const a=this._actual;let c=null;const d=getShadowRoot(a);d?c=d.activeElement:c=document.activeElement;const _=c===a,b=a.selectionStart,k=a.selectionEnd;if(_&&b===i&&k===o){isFirefox&&window.parent!==window&&a.focus();return}if(_){this.setIgnoreSelectionChangeTime("setSelectionRange"),a.setSelectionRange(i,o),isFirefox&&window.parent!==window&&a.focus();return}try{const j=saveParentsScrollTop(a);this.setIgnoreSelectionChangeTime("setSelectionRange"),a.focus(),a.setSelectionRange(i,o),restoreParentsScrollTop(a,j)}catch{}}}class PointerEventHandler extends MouseHandler{constructor(e,i,o){super(e,i,o),this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode)),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Tap,c=>this.onTap(c))),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Change,c=>this.onChange(c))),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Contextmenu,c=>this._onContextMenu(new EditorMouseEvent(c,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(addDisposableListener(this.viewHelper.linesContentDomNode,"pointerdown",c=>{const d=c.pointerType;if(d==="mouse"){this._lastPointerType="mouse";return}else d==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const a=new EditorPointerEventFactory(this.viewHelper.viewDomNode);this._register(a.onPointerMove(this.viewHelper.viewDomNode,c=>this._onMouseMove(c))),this._register(a.onPointerUp(this.viewHelper.viewDomNode,c=>this._onMouseUp(c))),this._register(a.onPointerLeave(this.viewHelper.viewDomNode,c=>this._onMouseLeave(c))),this._register(a.onPointerDown(this.viewHelper.viewDomNode,(c,d)=>this._onMouseDown(c,d)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const i=this._createMouseTarget(new EditorMouseEvent(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,i){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,i)}}class TouchHandler extends MouseHandler{constructor(e,i,o){super(e,i,o),this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode)),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Tap,a=>this.onTap(a))),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Change,a=>this.onChange(a))),this._register(addDisposableListener(this.viewHelper.linesContentDomNode,EventType.Contextmenu,a=>this._onContextMenu(new EditorMouseEvent(a,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const i=this._createMouseTarget(new EditorMouseEvent(e,!1,this.viewHelper.viewDomNode),!1);if(i.position){const o=document.createEvent("CustomEvent");o.initEvent(TextAreaSyntethicEvents.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(o),this.viewController.moveTo(i.position)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class PointerHandler extends Disposable{constructor(e,i,o){super(),isIOS&&BrowserFeatures.pointerEvents?this.handler=this._register(new PointerEventHandler(e,i,o)):window.TouchEvent?this.handler=this._register(new TouchHandler(e,i,o)):this.handler=this._register(new MouseHandler(e,i,o))}getTargetAtClientPoint(e,i){return this.handler.getTargetAtClientPoint(e,i)}}const textAreaHandler="",lineNumbers="";class DynamicViewOverlay extends ViewEventHandler{}const editorLineHighlight=registerColor("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},localize("lineHighlight","Background color for the highlight of line at the cursor position.")),editorLineHighlightBorder=registerColor("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:contrastBorder},localize("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),editorRangeHighlight=registerColor("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},localize("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),editorRangeHighlightBorder=registerColor("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),editorSymbolHighlight=registerColor("editor.symbolHighlightBackground",{dark:editorFindMatchHighlight,light:editorFindMatchHighlight,hcDark:null,hcLight:null},localize("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),editorSymbolHighlightBorder=registerColor("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),editorCursorForeground=registerColor("editorCursor.foreground",{dark:"#AEAFAD",light:Color.black,hcDark:Color.white,hcLight:"#0F4A85"},localize("caret","Color of the editor cursor.")),editorCursorBackground=registerColor("editorCursor.background",null,localize("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),editorWhitespaces=registerColor("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},localize("editorWhitespaces","Color of whitespace characters in the editor.")),editorIndentGuides=registerColor("editorIndentGuide.background",{dark:editorWhitespaces,light:editorWhitespaces,hcDark:editorWhitespaces,hcLight:editorWhitespaces},localize("editorIndentGuides","Color of the editor indentation guides.")),editorActiveIndentGuides=registerColor("editorIndentGuide.activeBackground",{dark:editorWhitespaces,light:editorWhitespaces,hcDark:editorWhitespaces,hcLight:editorWhitespaces},localize("editorActiveIndentGuide","Color of the active editor indentation guides.")),editorLineNumbers=registerColor("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Color.white,hcLight:"#292929"},localize("editorLineNumbers","Color of editor line numbers.")),deprecatedEditorActiveLineNumber=registerColor("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:activeContrastBorder,hcLight:activeContrastBorder},localize("editorActiveLineNumber","Color of editor active line number"),!1,localize("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),editorActiveLineNumber=registerColor("editorLineNumber.activeForeground",{dark:deprecatedEditorActiveLineNumber,light:deprecatedEditorActiveLineNumber,hcDark:deprecatedEditorActiveLineNumber,hcLight:deprecatedEditorActiveLineNumber},localize("editorActiveLineNumber","Color of editor active line number")),editorRuler=registerColor("editorRuler.foreground",{dark:"#5A5A5A",light:Color.lightgrey,hcDark:Color.white,hcLight:"#292929"},localize("editorRuler","Color of the editor rulers."));registerColor("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},localize("editorCodeLensForeground","Foreground color of editor CodeLens"));registerColor("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},localize("editorBracketMatchBackground","Background color behind matching brackets"));registerColor("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:contrastBorder,hcLight:contrastBorder},localize("editorBracketMatchBorder","Color for matching brackets boxes"));const editorOverviewRulerBorder=registerColor("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},localize("editorOverviewRulerBorder","Color of the overview ruler border.")),editorOverviewRulerBackground=registerColor("editorOverviewRuler.background",null,localize("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),editorGutter=registerColor("editorGutter.background",{dark:editorBackground,light:editorBackground,hcDark:editorBackground,hcLight:editorBackground},localize("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),editorUnnecessaryCodeBorder=registerColor("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Color.fromHex("#fff").transparent(.8),hcLight:contrastBorder},localize("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),editorUnnecessaryCodeOpacity=registerColor("editorUnnecessaryCode.opacity",{dark:Color.fromHex("#000a"),light:Color.fromHex("#0007"),hcDark:null,hcLight:null},localize("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));registerColor("editorGhostText.border",{dark:null,light:null,hcDark:Color.fromHex("#fff").transparent(.8),hcLight:Color.fromHex("#292929").transparent(.8)},localize("editorGhostTextBorder","Border color of ghost text in the editor."));registerColor("editorGhostText.foreground",{dark:Color.fromHex("#ffffff56"),light:Color.fromHex("#0007"),hcDark:null,hcLight:null},localize("editorGhostTextForeground","Foreground color of the ghost text in the editor."));registerColor("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},localize("editorGhostTextBackground","Background color of the ghost text in the editor."));const rulerRangeDefault=new Color(new RGBA(0,122,204,.6));registerColor("editorOverviewRuler.rangeHighlightForeground",{dark:rulerRangeDefault,light:rulerRangeDefault,hcDark:rulerRangeDefault,hcLight:rulerRangeDefault},localize("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const overviewRulerError=registerColor("editorOverviewRuler.errorForeground",{dark:new Color(new RGBA(255,18,18,.7)),light:new Color(new RGBA(255,18,18,.7)),hcDark:new Color(new RGBA(255,50,50,1)),hcLight:"#B5200D"},localize("overviewRuleError","Overview ruler marker color for errors.")),overviewRulerWarning=registerColor("editorOverviewRuler.warningForeground",{dark:editorWarningForeground,light:editorWarningForeground,hcDark:editorWarningBorder,hcLight:editorWarningBorder},localize("overviewRuleWarning","Overview ruler marker color for warnings.")),overviewRulerInfo=registerColor("editorOverviewRuler.infoForeground",{dark:editorInfoForeground,light:editorInfoForeground,hcDark:editorInfoBorder,hcLight:editorInfoBorder},localize("overviewRuleInfo","Overview ruler marker color for infos.")),editorBracketHighlightingForeground1=registerColor("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},localize("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),editorBracketHighlightingForeground2=registerColor("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},localize("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),editorBracketHighlightingForeground3=registerColor("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},localize("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),editorBracketHighlightingForeground4=registerColor("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),editorBracketHighlightingForeground5=registerColor("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),editorBracketHighlightingForeground6=registerColor("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),editorBracketHighlightingUnexpectedBracketForeground=registerColor("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Color(new RGBA(255,18,18,.8)),light:new Color(new RGBA(255,18,18,.8)),hcDark:new Color(new RGBA(255,50,50,1)),hcLight:""},localize("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),editorBracketPairGuideBackground1=registerColor("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),editorBracketPairGuideBackground2=registerColor("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),editorBracketPairGuideBackground3=registerColor("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),editorBracketPairGuideBackground4=registerColor("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),editorBracketPairGuideBackground5=registerColor("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),editorBracketPairGuideBackground6=registerColor("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground1=registerColor("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground2=registerColor("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground3=registerColor("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground4=registerColor("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground5=registerColor("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),editorBracketPairGuideActiveBackground6=registerColor("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},localize("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));registerColor("editorUnicodeHighlight.border",{dark:"#BD9B03",light:"#CEA33D",hcDark:"#ff0000",hcLight:""},localize("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));registerColor("editorUnicodeHighlight.background",{dark:"#bd9b0326",light:"#cea33d14",hcDark:"#00000000",hcLight:""},localize("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));registerThemingParticipant((s,e)=>{const i=s.getColor(editorBackground);i&&e.addRule(`.monaco-editor, .monaco-editor-background { background-color: ${i}; }`);const o=s.getColor(editorLineHighlight),a=o&&!o.isTransparent()?o:i;a&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${a}; }`);const c=s.getColor(editorForeground);c&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${c}; }`);const d=s.getColor(editorGutter);d&&e.addRule(`.monaco-editor .margin { background-color: ${d}; }`);const _=s.getColor(editorRangeHighlight);_&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${_}; }`);const b=s.getColor(editorRangeHighlightBorder);b&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${isHighContrast(s.type)?"dotted":"solid"} ${b}; }`);const k=s.getColor(editorSymbolHighlight);k&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${k}; }`);const j=s.getColor(editorSymbolHighlightBorder);j&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${isHighContrast(s.type)?"dotted":"solid"} ${j}; }`);const _e=s.getColor(editorWhitespaces);_e&&(e.addRule(`.monaco-editor .mtkw { color: ${_e} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${_e} !important; }`))});class LineNumbersOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Position$1(1,1),this._lastCursorViewPosition=new Position$1(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(61);const i=e.get(62);this._renderLineNumbers=i.renderType,this._renderCustomLineNumbers=i.renderFn,this._renderFinalNewline=e.get(86);const o=e.get(133);this._lineNumbersLeft=o.lineNumbersLeft,this._lineNumbersWidth=o.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const i=e.selections[0].getPosition();this._lastCursorViewPosition=i,this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i);let o=!1;return this._activeLineNumber!==i.lineNumber&&(this._activeLineNumber=i.lineNumber,o=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(o=!0),o}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const i=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(e,1));if(i.column!==1)return"";const o=i.lineNumber;return this._renderCustomLineNumbers?this._renderCustomLineNumbers(o):this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===o||o%10===0?String(o):"":String(o)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const i=isLinux?this._lineHeight%2===0?" lh-even":" lh-odd":"",o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,c='<div class="'+LineNumbersOverlay.CLASS_NAME+i+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">';let d=null;if(this._renderLineNumbers===2){d=new Array(a-o+1),this._lastCursorViewPosition.lineNumber>=o&&this._lastCursorViewPosition.lineNumber<=a&&(d[this._lastCursorViewPosition.lineNumber-o]=this._lastCursorModelPosition.lineNumber);{let k=0;for(let j=this._lastCursorViewPosition.lineNumber+1;j<=a;j++){const et=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(j,1)).column!==1;et||k++,j>=o&&(d[j-o]=et?0:k)}}{let k=0;for(let j=this._lastCursorViewPosition.lineNumber-1;j>=o;j--){const et=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(j,1)).column!==1;et||k++,j<=a&&(d[j-o]=et?0:k)}}}const _=this._context.viewModel.getLineCount(),b=[];for(let k=o;k<=a;k++){const j=k-o;if(!this._renderFinalNewline&&k===_&&this._context.viewModel.getLineLength(k)===0){b[j]="";continue}let _e;if(d){const et=d[j];this._lastCursorViewPosition.lineNumber===k?_e=`<span class="relative-current-line-number">${et}</span>`:et?_e=String(et):_e=""}else _e=this._getLineRenderLineNumber(k);_e?k===this._activeLineNumber?b[j]='<div class="active-line-number '+LineNumbersOverlay.CLASS_NAME+i+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+_e+"</div>":b[j]=c+_e+"</div>":b[j]=""}this._renderResult=b}render(e,i){if(!this._renderResult)return"";const o=i-e;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}LineNumbersOverlay.CLASS_NAME="line-numbers";registerThemingParticipant((s,e)=>{const i=s.getColor(editorLineNumbers);i&&e.addRule(`.monaco-editor .line-numbers { color: ${i}; }`);const o=s.getColor(editorActiveLineNumber);o&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${o}; }`)});class Margin extends ViewPart{constructor(e){super(e);const i=this._context.configuration.options,o=i.get(133);this._canUseLayerHinting=!i.get(28),this._contentLeft=o.contentLeft,this._glyphMarginLeft=o.glyphMarginLeft,this._glyphMarginWidth=o.glyphMarginWidth,this._domNode=createFastDomNode(document.createElement("div")),this._domNode.setClassName(Margin.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=createFastDomNode(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Margin.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(133);return this._canUseLayerHinting=!i.get(28),this._contentLeft=o.contentLeft,this._glyphMarginLeft=o.glyphMarginLeft,this._glyphMarginWidth=o.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const i=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-i);const o=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(o),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(o)}}Margin.CLASS_NAME="glyph-margin";Margin.OUTER_CLASS_NAME="margin";const mouseCursor="",MOUSE_CURSOR_TEXT_CSS_CLASS_NAME="monaco-mouse-cursor-text";class VisibleTextAreaData{constructor(e,i,o,a,c){this._context=e,this.modelLineNumber=i,this.distanceToModelLineStart=o,this.widthOfHiddenLineTextBefore=a,this.distanceToModelLineEnd=c,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const i=new Position$1(this.modelLineNumber,this.distanceToModelLineStart+1),o=new Position$1(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const canUseZeroSizeTextarea=isFirefox;class TextAreaHandler extends ViewPart{constructor(e,i,o){super(e),this._primaryCursorPosition=new Position$1(1,1),this._primaryCursorVisibleRange=null,this._viewController=i,this._visibleRangeProvider=o,this._scrollLeft=0,this._scrollTop=0;const a=this._context.configuration.options,c=a.get(133);this._setAccessibilityOptions(a),this._contentLeft=c.contentLeft,this._contentWidth=c.contentWidth,this._contentHeight=c.height,this._fontInfo=a.get(46),this._lineHeight=a.get(61),this._emptySelectionClipboard=a.get(33),this._copyWithSyntaxHighlighting=a.get(21),this._visibleTextArea=null,this._selections=[new Selection$1(1,1,1,1)],this._modelSelections=[new Selection$1(1,1,1,1)],this._lastRenderPosition=null,this.textArea=createFastDomNode(document.createElement("textarea")),PartFingerprints.write(this.textArea,6),this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(a)),this.textArea.setAttribute("tabindex",String(a.get(114))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",localize("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),a.get(30)&&a.get(83)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=createFastDomNode(document.createElement("div")),this.textAreaCover.setPosition("absolute");const d={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:k=>this._context.viewModel.getLineMaxColumn(k),getValueInRange:(k,j)=>this._context.viewModel.getValueInRange(k,j)},_={getDataToCopy:()=>{const k=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,isWindows),j=this._context.viewModel.model.getEOL(),_e=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),et=Array.isArray(k)?k:null,tt=Array.isArray(k)?k.join(j):k;let it,st=null;if(this._copyWithSyntaxHighlighting&&tt.length<65536){const ot=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);ot&&(it=ot.html,st=ot.mode)}return{isFromEmptySelection:_e,multicursorText:et,text:tt,html:it,mode:st}},getScreenReaderContent:k=>{if(this._accessibilitySupport===1){const j=this._selections[0];if(isMacintosh&&j.isEmpty()){const _e=j.getStartPosition();let et=this._getWordBeforePosition(_e);if(et.length===0&&(et=this._getCharacterBeforePosition(_e)),et.length>0)return new TextAreaState(et,et.length,et.length,_e,_e)}if(isSafari&&!j.isEmpty()){const _e="vscode-placeholder";return new TextAreaState(_e,0,_e.length,null,null)}return TextAreaState.EMPTY}if(isAndroid){const j=this._selections[0];if(j.isEmpty()){const _e=j.getStartPosition(),[et,tt]=this._getAndroidWordAtPosition(_e);if(et.length>0)return new TextAreaState(et,tt,tt,_e,_e)}return TextAreaState.EMPTY}return PagedScreenReaderStrategy.fromEditorSelection(k,d,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(k,j,_e)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(k,j,_e)},b=this._register(new TextAreaWrapper(this.textArea.domNode));this._textAreaInput=this._register(new TextAreaInput(_,b,OS,browser)),this._register(this._textAreaInput.onKeyDown(k=>{this._viewController.emitKeyDown(k)})),this._register(this._textAreaInput.onKeyUp(k=>{this._viewController.emitKeyUp(k)})),this._register(this._textAreaInput.onPaste(k=>{let j=!1,_e=null,et=null;k.metadata&&(j=this._emptySelectionClipboard&&!!k.metadata.isFromEmptySelection,_e=typeof k.metadata.multicursorText<"u"?k.metadata.multicursorText:null,et=k.metadata.mode),this._viewController.paste(k.text,j,_e,et)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(k=>{k.replacePrevCharCnt||k.replaceNextCharCnt||k.positionDelta?this._viewController.compositionType(k.text,k.replacePrevCharCnt,k.replaceNextCharCnt,k.positionDelta):this._viewController.type(k.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(k=>{this._viewController.setSelection(k)})),this._register(this._textAreaInput.onCompositionStart(k=>{const j=this.textArea.domNode,_e=this._modelSelections[0],{distanceToModelLineStart:et,widthOfHiddenTextBefore:tt}=(()=>{const st=j.value.substring(0,Math.min(j.selectionStart,j.selectionEnd)),ot=st.lastIndexOf(`
`),nt=st.substring(ot+1),rt=nt.lastIndexOf("	"),at=nt.length-rt-1,lt=_e.getStartPosition(),gt=Math.min(lt.column-1,at),ht=lt.column-1-gt,ut=nt.substring(0,nt.length-gt),ct=measureText(ut,this._fontInfo);return{distanceToModelLineStart:ht,widthOfHiddenTextBefore:ct}})(),{distanceToModelLineEnd:it}=(()=>{const st=j.value.substring(Math.max(j.selectionStart,j.selectionEnd)),ot=st.indexOf(`
`),nt=ot===-1?st:st.substring(0,ot),rt=nt.indexOf("	"),at=rt===-1?nt.length:nt.length-rt-1,lt=_e.getEndPosition(),gt=Math.min(this._context.viewModel.model.getLineMaxColumn(lt.lineNumber)-lt.column,at);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(lt.lineNumber)-lt.column-gt}})();this._context.viewModel.revealRange("keyboard",!0,Range$2.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new VisibleTextAreaData(this._context,_e.startLineNumber,et,tt,it),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(k=>{!this._visibleTextArea||(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const i='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',o=this._context.viewModel.getLineContent(e.lineNumber),a=getMapForWordSeparators(i);let c=!0,d=e.column,_=!0,b=e.column,k=0;for(;k<50&&(c||_);){if(c&&d<=1&&(c=!1),c){const j=o.charCodeAt(d-2);a.get(j)!==0?c=!1:d--}if(_&&b>o.length&&(_=!1),_){const j=o.charCodeAt(b-1);a.get(j)!==0?_=!1:b++}k++}return[o.substring(d-1,b-1),e.column-d]}_getWordBeforePosition(e){const i=this._context.viewModel.getLineContent(e.lineNumber),o=getMapForWordSeparators(this._context.configuration.options.get(119));let a=e.column,c=0;for(;a>1;){const d=i.charCodeAt(a-2);if(o.get(d)!==0||c>50)return i.substring(a-1,e.column-1);c++,a--}return i.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const o=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!isHighSurrogate(o.charCodeAt(0)))return o}return""}_getAriaLabel(e){return e.get(2)===1?localize("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",isLinux?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const i=e.get(3);this._accessibilitySupport===2&&i===EditorOptions.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=i}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(133);return this._setAccessibilityOptions(i),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=i.get(46),this._lineHeight=i.get(61),this._emptySelectionClipboard=i.get(33),this._copyWithSyntaxHighlighting=i.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(i)),this.textArea.setAttribute("tabindex",String(i.get(114))),(e.hasChanged(30)||e.hasChanged(83))&&(i.get(30)&&i.get(83)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){var i;this._primaryCursorPosition=new Position$1(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(i=this._visibleTextArea)===null||i===void 0||i.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){const o=this._visibleTextArea.visibleTextareaStart,a=this._visibleTextArea.visibleTextareaEnd,c=this._visibleTextArea.startPosition,d=this._visibleTextArea.endPosition;if(c&&d&&o&&a&&a.left>=this._scrollLeft&&o.left<=this._scrollLeft+this._contentWidth){const _=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,b=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let k=this._visibleTextArea.widthOfHiddenLineTextBefore,j=this._contentLeft+o.left-this._scrollLeft,_e=a.left-o.left+1;if(j<this._contentLeft){const nt=this._contentLeft-j;j+=nt,k+=nt,_e-=nt}_e>this._contentWidth&&(_e=this._contentWidth);const et=this._context.viewModel.getViewLineData(c.lineNumber),tt=et.tokens.findTokenIndexAtOffset(c.column-1),it=et.tokens.findTokenIndexAtOffset(d.column-1),st=tt===it,ot=this._visibleTextArea.definePresentation(st?et.tokens.getPresentation(tt):null);this.textArea.domNode.scrollTop=b*this._lineHeight,this.textArea.domNode.scrollLeft=k,this._doRender({lastRenderPosition:null,top:_,left:j,width:_e,height:this._lineHeight,useCover:!1,color:(TokenizationRegistry.getColorMap()||[])[ot.foreground],italic:ot.italic,bold:ot.bold,underline:ot.underline,strikethrough:ot.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight){this._renderAtTopLeft();return}if(isMacintosh){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:e,width:canUseZeroSizeTextarea?0:1,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const o=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=o*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:e,width:canUseZeroSizeTextarea?0:1,height:canUseZeroSizeTextarea?0:1,useCover:!1})}_newlinecount(e){let i=0,o=-1;do{if(o=e.indexOf(`
`,o+1),o===-1)break;i++}while(!0);return i}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:canUseZeroSizeTextarea?0:1,height:canUseZeroSizeTextarea?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const i=this.textArea,o=this.textAreaCover;applyFontInfo(i,this._fontInfo),i.setTop(e.top),i.setLeft(e.left),i.setWidth(e.width),i.setHeight(e.height),i.setColor(e.color?Color.Format.CSS.formatHex(e.color):""),i.setFontStyle(e.italic?"italic":""),e.bold&&i.setFontWeight("bold"),i.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),o.setTop(e.useCover?e.top:0),o.setLeft(e.useCover?e.left:0),o.setWidth(e.useCover?e.width:0),o.setHeight(e.useCover?e.height:0);const a=this._context.configuration.options;a.get(52)?o.setClassName("monaco-editor-background textAreaCover "+Margin.OUTER_CLASS_NAME):a.get(62).renderType!==0?o.setClassName("monaco-editor-background textAreaCover "+LineNumbersOverlay.CLASS_NAME):o.setClassName("monaco-editor-background textAreaCover")}}function measureText(s,e){if(s.length===0)return 0;const i=document.createElement("div");i.style.position="absolute",i.style.top="-50000px",i.style.width="50000px";const o=document.createElement("span");applyFontInfo(o,e),o.style.whiteSpace="pre",o.append(s),i.appendChild(o),document.body.appendChild(i);const a=o.offsetWidth;return document.body.removeChild(i),a}function _normalizeIndentationFromWhitespace(s,e,i){let o=0;for(let c=0;c<s.length;c++)s.charAt(c)==="	"?o=CursorColumns.nextIndentTabStop(o,e):o++;let a="";if(!i){const c=Math.floor(o/e);o=o%e;for(let d=0;d<c;d++)a+="	"}for(let c=0;c<o;c++)a+=" ";return a}function normalizeIndentation(s,e,i){let o=firstNonWhitespaceIndex(s);return o===-1&&(o=s.length),_normalizeIndentationFromWhitespace(s.substring(0,o),e,i)+s.substring(o)}const autoCloseAlways=()=>!0,autoCloseNever=()=>!1,autoCloseBeforeWhitespace=s=>s===" "||s==="	";class CursorConfiguration{constructor(e,i,o,a){this.languageConfigurationService=a,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const c=o.options,d=c.get(133);this.readOnly=c.get(83),this.tabSize=i.tabSize,this.indentSize=i.indentSize,this.insertSpaces=i.insertSpaces,this.stickyTabStops=c.get(106),this.lineHeight=c.get(61),this.pageSize=Math.max(1,Math.floor(d.height/this.lineHeight)-2),this.useTabStops=c.get(118),this.wordSeparators=c.get(119),this.emptySelectionClipboard=c.get(33),this.copyWithSyntaxHighlighting=c.get(21),this.multiCursorMergeOverlapping=c.get(71),this.multiCursorPaste=c.get(73),this.autoClosingBrackets=c.get(5),this.autoClosingQuotes=c.get(8),this.autoClosingDelete=c.get(6),this.autoClosingOvertype=c.get(7),this.autoSurround=c.get(11),this.autoIndent=c.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const _=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(_)for(const b of _)this.surroundingPairs[b.open]=b.close}static shouldRecreate(e){return e.hasChanged(133)||e.hasChanged(119)||e.hasChanged(33)||e.hasChanged(71)||e.hasChanged(73)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(118)||e.hasChanged(61)||e.hasChanged(83)}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const i=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||e===void 0?void 0:e.getElectricCharacters();if(i)for(const o of i)this._electricChars[o]=!0}return this._electricChars}onElectricCharacter(e,i,o){const a=createScopedLineTokens(i,o-1),c=this.languageConfigurationService.getLanguageConfiguration(a.languageId).electricCharacter;return c?c.onElectricCharacter(e,a,o-a.firstCharOffset):null}normalizeIndentation(e){return normalizeIndentation(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,i){switch(i){case"beforeWhitespace":return autoCloseBeforeWhitespace;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e);case"always":return autoCloseAlways;case"never":return autoCloseNever}}_getLanguageDefinedShouldAutoClose(e){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet();return o=>i.indexOf(o)!==-1}visibleColumnFromColumn(e,i){return CursorColumns.visibleColumnFromColumn(e.getLineContent(i.lineNumber),i.column,this.tabSize)}columnFromVisibleColumn(e,i,o){const a=CursorColumns.columnFromVisibleColumn(e.getLineContent(i),o,this.tabSize),c=e.getLineMinColumn(i);if(a<c)return c;const d=e.getLineMaxColumn(i);return a>d?d:a}}class CursorState{constructor(e,i){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=i}static fromModelState(e){return new PartialModelCursorState(e)}static fromViewState(e){return new PartialViewCursorState(e)}static fromModelSelection(e){const i=Selection$1.liftSelection(e),o=new SingleCursorState(Range$2.fromPositions(i.getSelectionStart()),0,i.getPosition(),0);return CursorState.fromModelState(o)}static fromModelSelections(e){const i=[];for(let o=0,a=e.length;o<a;o++)i[o]=this.fromModelSelection(e[o]);return i}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class PartialModelCursorState{constructor(e){this.modelState=e,this.viewState=null}}class PartialViewCursorState{constructor(e){this.modelState=null,this.viewState=e}}class SingleCursorState{constructor(e,i,o,a){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=i,this.position=o,this.leftoverVisibleColumns=a,this.selection=SingleCursorState._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,i,o,a){return e?new SingleCursorState(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Position$1(i,o),a):new SingleCursorState(new Range$2(i,o,i,o),a,new Position$1(i,o),a)}static _computeSelection(e,i){return e.isEmpty()||!i.isBeforeOrEqual(e.getStartPosition())?Selection$1.fromPositions(e.getStartPosition(),i):Selection$1.fromPositions(e.getEndPosition(),i)}}class EditOperationResult{constructor(e,i,o){this._editOperationResultBrand=void 0,this.type=e,this.commands=i,this.shouldPushStackElementBefore=o.shouldPushStackElementBefore,this.shouldPushStackElementAfter=o.shouldPushStackElementAfter}}function isQuote(s){return s==="'"||s==='"'||s==="`"}class ColumnSelection{static columnSelect(e,i,o,a,c,d){const _=Math.abs(c-o)+1,b=o>c,k=a>d,j=a<d,_e=[];for(let et=0;et<_;et++){const tt=o+(b?-et:et),it=e.columnFromVisibleColumn(i,tt,a),st=e.columnFromVisibleColumn(i,tt,d),ot=e.visibleColumnFromColumn(i,new Position$1(tt,it)),nt=e.visibleColumnFromColumn(i,new Position$1(tt,st));j&&(ot>d||nt<a)||k&&(nt>a||ot<d)||_e.push(new SingleCursorState(new Range$2(tt,it,tt,it),0,new Position$1(tt,st),0))}if(_e.length===0)for(let et=0;et<_;et++){const tt=o+(b?-et:et),it=i.getLineMaxColumn(tt);_e.push(new SingleCursorState(new Range$2(tt,it,tt,it),0,new Position$1(tt,it),0))}return{viewStates:_e,reversed:b,fromLineNumber:o,fromVisualColumn:a,toLineNumber:c,toVisualColumn:d}}static columnSelectLeft(e,i,o){let a=o.toViewVisualColumn;return a>0&&a--,ColumnSelection.columnSelect(e,i,o.fromViewLineNumber,o.fromViewVisualColumn,o.toViewLineNumber,a)}static columnSelectRight(e,i,o){let a=0;const c=Math.min(o.fromViewLineNumber,o.toViewLineNumber),d=Math.max(o.fromViewLineNumber,o.toViewLineNumber);for(let b=c;b<=d;b++){const k=i.getLineMaxColumn(b),j=e.visibleColumnFromColumn(i,new Position$1(b,k));a=Math.max(a,j)}let _=o.toViewVisualColumn;return _<a&&_++,this.columnSelect(e,i,o.fromViewLineNumber,o.fromViewVisualColumn,o.toViewLineNumber,_)}static columnSelectUp(e,i,o,a){const c=a?e.pageSize:1,d=Math.max(1,o.toViewLineNumber-c);return this.columnSelect(e,i,o.fromViewLineNumber,o.fromViewVisualColumn,d,o.toViewVisualColumn)}static columnSelectDown(e,i,o,a){const c=a?e.pageSize:1,d=Math.min(i.getLineCount(),o.toViewLineNumber+c);return this.columnSelect(e,i,o.fromViewLineNumber,o.fromViewVisualColumn,d,o.toViewVisualColumn)}}class ReplaceCommand{constructor(e,i,o=!1){this._range=e,this._text=i,this.insertsAutoWhitespace=o}getEditOperations(e,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,i){const a=i.getInverseEditOperations()[0].range;return Selection$1.fromPositions(a.getEndPosition())}}class ReplaceCommandWithoutChangingPosition{constructor(e,i,o=!1){this._range=e,this._text=i,this.insertsAutoWhitespace=o}getEditOperations(e,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,i){const a=i.getInverseEditOperations()[0].range;return Selection$1.fromPositions(a.getStartPosition())}}class ReplaceCommandWithOffsetCursorState{constructor(e,i,o,a,c=!1){this._range=e,this._text=i,this._columnDeltaOffset=a,this._lineNumberDeltaOffset=o,this.insertsAutoWhitespace=c}getEditOperations(e,i){i.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,i){const a=i.getInverseEditOperations()[0].range;return Selection$1.fromPositions(a.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class ReplaceCommandThatPreservesSelection{constructor(e,i,o,a=!1){this._range=e,this._text=i,this._initialSelection=o,this._forceMoveMarkers=a,this._selectionId=null}getEditOperations(e,i){i.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=i.trackSelection(this._initialSelection)}computeCursorState(e,i){return i.getTrackedSelection(this._selectionId)}}class CursorPosition{constructor(e,i,o){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=i,this.leftoverVisibleColumns=o}}class MoveOperations{static leftPosition(e,i){if(i.column>e.getLineMinColumn(i.lineNumber))return i.delta(void 0,-prevCharLength(e.getLineContent(i.lineNumber),i.column-1));if(i.lineNumber>1){const o=i.lineNumber-1;return new Position$1(o,e.getLineMaxColumn(o))}else return i}static leftPositionAtomicSoftTabs(e,i,o){if(i.column<=e.getLineIndentColumn(i.lineNumber)){const a=e.getLineMinColumn(i.lineNumber),c=e.getLineContent(i.lineNumber),d=AtomicTabMoveOperations.atomicPosition(c,i.column-1,o,0);if(d!==-1&&d+1>=a)return new Position$1(i.lineNumber,d+1)}return this.leftPosition(e,i)}static left(e,i,o){const a=e.stickyTabStops?MoveOperations.leftPositionAtomicSoftTabs(i,o,e.tabSize):MoveOperations.leftPosition(i,o);return new CursorPosition(a.lineNumber,a.column,0)}static moveLeft(e,i,o,a,c){let d,_;if(o.hasSelection()&&!a)d=o.selection.startLineNumber,_=o.selection.startColumn;else{const b=o.position.delta(void 0,-(c-1)),k=i.normalizePosition(MoveOperations.clipPositionColumn(b,i),0),j=MoveOperations.left(e,i,k);d=j.lineNumber,_=j.column}return o.move(a,d,_,0)}static clipPositionColumn(e,i){return new Position$1(e.lineNumber,MoveOperations.clipRange(e.column,i.getLineMinColumn(e.lineNumber),i.getLineMaxColumn(e.lineNumber)))}static clipRange(e,i,o){return e<i?i:e>o?o:e}static rightPosition(e,i,o){return o<e.getLineMaxColumn(i)?o=o+nextCharLength(e.getLineContent(i),o-1):i<e.getLineCount()&&(i=i+1,o=e.getLineMinColumn(i)),new Position$1(i,o)}static rightPositionAtomicSoftTabs(e,i,o,a,c){if(o<e.getLineIndentColumn(i)){const d=e.getLineContent(i),_=AtomicTabMoveOperations.atomicPosition(d,o-1,a,1);if(_!==-1)return new Position$1(i,_+1)}return this.rightPosition(e,i,o)}static right(e,i,o){const a=e.stickyTabStops?MoveOperations.rightPositionAtomicSoftTabs(i,o.lineNumber,o.column,e.tabSize,e.indentSize):MoveOperations.rightPosition(i,o.lineNumber,o.column);return new CursorPosition(a.lineNumber,a.column,0)}static moveRight(e,i,o,a,c){let d,_;if(o.hasSelection()&&!a)d=o.selection.endLineNumber,_=o.selection.endColumn;else{const b=o.position.delta(void 0,c-1),k=i.normalizePosition(MoveOperations.clipPositionColumn(b,i),1),j=MoveOperations.right(e,i,k);d=j.lineNumber,_=j.column}return o.move(a,d,_,0)}static vertical(e,i,o,a,c,d,_,b){const k=CursorColumns.visibleColumnFromColumn(i.getLineContent(o),a,e.tabSize)+c,j=i.getLineCount(),_e=o===1&&a===1,et=o===j&&a===i.getLineMaxColumn(o),tt=d<o?_e:et;if(o=d,o<1?(o=1,_?a=i.getLineMinColumn(o):a=Math.min(i.getLineMaxColumn(o),a)):o>j?(o=j,_?a=i.getLineMaxColumn(o):a=Math.min(i.getLineMaxColumn(o),a)):a=e.columnFromVisibleColumn(i,o,k),tt?c=0:c=k-CursorColumns.visibleColumnFromColumn(i.getLineContent(o),a,e.tabSize),b!==void 0){const it=new Position$1(o,a),st=i.normalizePosition(it,b);c=c+(a-st.column),o=st.lineNumber,a=st.column}return new CursorPosition(o,a,c)}static down(e,i,o,a,c,d,_){return this.vertical(e,i,o,a,c,o+d,_,4)}static moveDown(e,i,o,a,c){let d,_;o.hasSelection()&&!a?(d=o.selection.endLineNumber,_=o.selection.endColumn):(d=o.position.lineNumber,_=o.position.column);const b=MoveOperations.down(e,i,d,_,o.leftoverVisibleColumns,c,!0);return o.move(a,b.lineNumber,b.column,b.leftoverVisibleColumns)}static translateDown(e,i,o){const a=o.selection,c=MoveOperations.down(e,i,a.selectionStartLineNumber,a.selectionStartColumn,o.selectionStartLeftoverVisibleColumns,1,!1),d=MoveOperations.down(e,i,a.positionLineNumber,a.positionColumn,o.leftoverVisibleColumns,1,!1);return new SingleCursorState(new Range$2(c.lineNumber,c.column,c.lineNumber,c.column),c.leftoverVisibleColumns,new Position$1(d.lineNumber,d.column),d.leftoverVisibleColumns)}static up(e,i,o,a,c,d,_){return this.vertical(e,i,o,a,c,o-d,_,3)}static moveUp(e,i,o,a,c){let d,_;o.hasSelection()&&!a?(d=o.selection.startLineNumber,_=o.selection.startColumn):(d=o.position.lineNumber,_=o.position.column);const b=MoveOperations.up(e,i,d,_,o.leftoverVisibleColumns,c,!0);return o.move(a,b.lineNumber,b.column,b.leftoverVisibleColumns)}static translateUp(e,i,o){const a=o.selection,c=MoveOperations.up(e,i,a.selectionStartLineNumber,a.selectionStartColumn,o.selectionStartLeftoverVisibleColumns,1,!1),d=MoveOperations.up(e,i,a.positionLineNumber,a.positionColumn,o.leftoverVisibleColumns,1,!1);return new SingleCursorState(new Range$2(c.lineNumber,c.column,c.lineNumber,c.column),c.leftoverVisibleColumns,new Position$1(d.lineNumber,d.column),d.leftoverVisibleColumns)}static _isBlankLine(e,i){return e.getLineFirstNonWhitespaceColumn(i)===0}static moveToPrevBlankLine(e,i,o,a){let c=o.position.lineNumber;for(;c>1&&this._isBlankLine(i,c);)c--;for(;c>1&&!this._isBlankLine(i,c);)c--;return o.move(a,c,i.getLineMinColumn(c),0)}static moveToNextBlankLine(e,i,o,a){const c=i.getLineCount();let d=o.position.lineNumber;for(;d<c&&this._isBlankLine(i,d);)d++;for(;d<c&&!this._isBlankLine(i,d);)d++;return o.move(a,d,i.getLineMinColumn(d),0)}static moveToBeginningOfLine(e,i,o,a){const c=o.position.lineNumber,d=i.getLineMinColumn(c),_=i.getLineFirstNonWhitespaceColumn(c)||d;let b;return o.position.column===_?b=d:b=_,o.move(a,c,b,0)}static moveToEndOfLine(e,i,o,a,c){const d=o.position.lineNumber,_=i.getLineMaxColumn(d);return o.move(a,d,_,c?1073741824-_:0)}static moveToBeginningOfBuffer(e,i,o,a){return o.move(a,1,1,0)}static moveToEndOfBuffer(e,i,o,a){const c=i.getLineCount(),d=i.getLineMaxColumn(c);return o.move(a,c,d,0)}}class DeleteOperations{static deleteRight(e,i,o,a){const c=[];let d=e!==3;for(let _=0,b=a.length;_<b;_++){const k=a[_];let j=k;if(j.isEmpty()){const _e=k.getPosition(),et=MoveOperations.right(i,o,_e);j=new Range$2(et.lineNumber,et.column,_e.lineNumber,_e.column)}if(j.isEmpty()){c[_]=null;continue}j.startLineNumber!==j.endLineNumber&&(d=!0),c[_]=new ReplaceCommand(j,"")}return[d,c]}static isAutoClosingPairDelete(e,i,o,a,c,d,_){if(i==="never"&&o==="never"||e==="never")return!1;for(let b=0,k=d.length;b<k;b++){const j=d[b],_e=j.getPosition();if(!j.isEmpty())return!1;const et=c.getLineContent(_e.lineNumber);if(_e.column<2||_e.column>=et.length+1)return!1;const tt=et.charAt(_e.column-2),it=a.get(tt);if(!it)return!1;if(isQuote(tt)){if(o==="never")return!1}else if(i==="never")return!1;const st=et.charAt(_e.column-1);let ot=!1;for(const nt of it)nt.open===tt&&nt.close===st&&(ot=!0);if(!ot)return!1;if(e==="auto"){let nt=!1;for(let rt=0,at=_.length;rt<at;rt++){const lt=_[rt];if(_e.lineNumber===lt.startLineNumber&&_e.column===lt.startColumn){nt=!0;break}}if(!nt)return!1}}return!0}static _runAutoClosingPairDelete(e,i,o){const a=[];for(let c=0,d=o.length;c<d;c++){const _=o[c].getPosition(),b=new Range$2(_.lineNumber,_.column-1,_.lineNumber,_.column+1);a[c]=new ReplaceCommand(b,"")}return[!0,a]}static deleteLeft(e,i,o,a,c){if(this.isAutoClosingPairDelete(i.autoClosingDelete,i.autoClosingBrackets,i.autoClosingQuotes,i.autoClosingPairs.autoClosingPairsOpenByEnd,o,a,c))return this._runAutoClosingPairDelete(i,o,a);const d=[];let _=e!==2;for(let b=0,k=a.length;b<k;b++){const j=DeleteOperations.getDeleteRange(a[b],o,i);if(j.isEmpty()){d[b]=null;continue}j.startLineNumber!==j.endLineNumber&&(_=!0),d[b]=new ReplaceCommand(j,"")}return[_,d]}static getDeleteRange(e,i,o){if(!e.isEmpty())return e;const a=e.getPosition();if(o.useTabStops&&a.column>1){const c=i.getLineContent(a.lineNumber),d=firstNonWhitespaceIndex(c),_=d===-1?c.length+1:d+1;if(a.column<=_){const b=o.visibleColumnFromColumn(i,a),k=CursorColumns.prevIndentTabStop(b,o.indentSize),j=o.columnFromVisibleColumn(i,a.lineNumber,k);return new Range$2(a.lineNumber,j,a.lineNumber,a.column)}}return Range$2.fromPositions(DeleteOperations.getPositionAfterDeleteLeft(a,i),a)}static getPositionAfterDeleteLeft(e,i){if(e.column>1){const o=getLeftDeleteOffset(e.column-1,i.getLineContent(e.lineNumber));return e.with(void 0,o+1)}else if(e.lineNumber>1){const o=e.lineNumber-1;return new Position$1(o,i.getLineMaxColumn(o))}else return e}static cut(e,i,o){const a=[];let c=null;o.sort((d,_)=>Position$1.compare(d.getStartPosition(),_.getEndPosition()));for(let d=0,_=o.length;d<_;d++){const b=o[d];if(b.isEmpty())if(e.emptySelectionClipboard){const k=b.getPosition();let j,_e,et,tt;k.lineNumber<i.getLineCount()?(j=k.lineNumber,_e=1,et=k.lineNumber+1,tt=1):k.lineNumber>1&&(c==null?void 0:c.endLineNumber)!==k.lineNumber?(j=k.lineNumber-1,_e=i.getLineMaxColumn(k.lineNumber-1),et=k.lineNumber,tt=i.getLineMaxColumn(k.lineNumber)):(j=k.lineNumber,_e=1,et=k.lineNumber,tt=i.getLineMaxColumn(k.lineNumber));const it=new Range$2(j,_e,et,tt);c=it,it.isEmpty()?a[d]=null:a[d]=new ReplaceCommand(it,"")}else a[d]=null;else a[d]=new ReplaceCommand(b,"")}return new EditOperationResult(0,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class WordOperations{static _createWord(e,i,o,a,c){return{start:a,end:c,wordType:i,nextCharClass:o}}static _findPreviousWordOnLine(e,i,o){const a=i.getLineContent(o.lineNumber);return this._doFindPreviousWordOnLine(a,e,o)}static _doFindPreviousWordOnLine(e,i,o){let a=0;for(let c=o.column-2;c>=0;c--){const d=e.charCodeAt(c),_=i.get(d);if(_===0){if(a===2)return this._createWord(e,a,_,c+1,this._findEndOfWord(e,i,a,c+1));a=1}else if(_===2){if(a===1)return this._createWord(e,a,_,c+1,this._findEndOfWord(e,i,a,c+1));a=2}else if(_===1&&a!==0)return this._createWord(e,a,_,c+1,this._findEndOfWord(e,i,a,c+1))}return a!==0?this._createWord(e,a,1,0,this._findEndOfWord(e,i,a,0)):null}static _findEndOfWord(e,i,o,a){const c=e.length;for(let d=a;d<c;d++){const _=e.charCodeAt(d),b=i.get(_);if(b===1||o===1&&b===2||o===2&&b===0)return d}return c}static _findNextWordOnLine(e,i,o){const a=i.getLineContent(o.lineNumber);return this._doFindNextWordOnLine(a,e,o)}static _doFindNextWordOnLine(e,i,o){let a=0;const c=e.length;for(let d=o.column-1;d<c;d++){const _=e.charCodeAt(d),b=i.get(_);if(b===0){if(a===2)return this._createWord(e,a,b,this._findStartOfWord(e,i,a,d-1),d);a=1}else if(b===2){if(a===1)return this._createWord(e,a,b,this._findStartOfWord(e,i,a,d-1),d);a=2}else if(b===1&&a!==0)return this._createWord(e,a,b,this._findStartOfWord(e,i,a,d-1),d)}return a!==0?this._createWord(e,a,1,this._findStartOfWord(e,i,a,c-1),c):null}static _findStartOfWord(e,i,o,a){for(let c=a;c>=0;c--){const d=e.charCodeAt(c),_=i.get(d);if(_===1||o===1&&_===2||o===2&&_===0)return c+1}return 0}static moveWordLeft(e,i,o,a){let c=o.lineNumber,d=o.column;d===1&&c>1&&(c=c-1,d=i.getLineMaxColumn(c));let _=WordOperations._findPreviousWordOnLine(e,i,new Position$1(c,d));if(a===0)return new Position$1(c,_?_.start+1:1);if(a===1)return _&&_.wordType===2&&_.end-_.start===1&&_.nextCharClass===0&&(_=WordOperations._findPreviousWordOnLine(e,i,new Position$1(c,_.start+1))),new Position$1(c,_?_.start+1:1);if(a===3){for(;_&&_.wordType===2;)_=WordOperations._findPreviousWordOnLine(e,i,new Position$1(c,_.start+1));return new Position$1(c,_?_.start+1:1)}return _&&d<=_.end+1&&(_=WordOperations._findPreviousWordOnLine(e,i,new Position$1(c,_.start+1))),new Position$1(c,_?_.end+1:1)}static _moveWordPartLeft(e,i){const o=i.lineNumber,a=e.getLineMaxColumn(o);if(i.column===1)return o>1?new Position$1(o-1,e.getLineMaxColumn(o-1)):i;const c=e.getLineContent(o);for(let d=i.column-1;d>1;d--){const _=c.charCodeAt(d-2),b=c.charCodeAt(d-1);if(_===95&&b!==95)return new Position$1(o,d);if((isLowerAsciiLetter(_)||isAsciiDigit(_))&&isUpperAsciiLetter(b))return new Position$1(o,d);if(isUpperAsciiLetter(_)&&isUpperAsciiLetter(b)&&d+1<a){const k=c.charCodeAt(d);if(isLowerAsciiLetter(k)||isAsciiDigit(k))return new Position$1(o,d)}}return new Position$1(o,1)}static moveWordRight(e,i,o,a){let c=o.lineNumber,d=o.column,_=!1;d===i.getLineMaxColumn(c)&&c<i.getLineCount()&&(_=!0,c=c+1,d=1);let b=WordOperations._findNextWordOnLine(e,i,new Position$1(c,d));if(a===2)b&&b.wordType===2&&b.end-b.start===1&&b.nextCharClass===0&&(b=WordOperations._findNextWordOnLine(e,i,new Position$1(c,b.end+1))),b?d=b.end+1:d=i.getLineMaxColumn(c);else if(a===3){for(_&&(d=0);b&&(b.wordType===2||b.start+1<=d);)b=WordOperations._findNextWordOnLine(e,i,new Position$1(c,b.end+1));b?d=b.start+1:d=i.getLineMaxColumn(c)}else b&&!_&&d>=b.start+1&&(b=WordOperations._findNextWordOnLine(e,i,new Position$1(c,b.end+1))),b?d=b.start+1:d=i.getLineMaxColumn(c);return new Position$1(c,d)}static _moveWordPartRight(e,i){const o=i.lineNumber,a=e.getLineMaxColumn(o);if(i.column===a)return o<e.getLineCount()?new Position$1(o+1,1):i;const c=e.getLineContent(o);for(let d=i.column+1;d<a;d++){const _=c.charCodeAt(d-2),b=c.charCodeAt(d-1);if(_!==95&&b===95)return new Position$1(o,d);if((isLowerAsciiLetter(_)||isAsciiDigit(_))&&isUpperAsciiLetter(b))return new Position$1(o,d);if(isUpperAsciiLetter(_)&&isUpperAsciiLetter(b)&&d+1<a){const k=c.charCodeAt(d);if(isLowerAsciiLetter(k)||isAsciiDigit(k))return new Position$1(o,d)}}return new Position$1(o,a)}static _deleteWordLeftWhitespace(e,i){const o=e.getLineContent(i.lineNumber),a=i.column-2,c=lastNonWhitespaceIndex(o,a);return c+1<a?new Range$2(i.lineNumber,c+2,i.lineNumber,i.column):null}static deleteWordLeft(e,i){const o=e.wordSeparators,a=e.model,c=e.selection,d=e.whitespaceHeuristics;if(!c.isEmpty())return c;if(DeleteOperations.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const _e=e.selection.getPosition();return new Range$2(_e.lineNumber,_e.column-1,_e.lineNumber,_e.column+1)}const _=new Position$1(c.positionLineNumber,c.positionColumn);let b=_.lineNumber,k=_.column;if(b===1&&k===1)return null;if(d){const _e=this._deleteWordLeftWhitespace(a,_);if(_e)return _e}let j=WordOperations._findPreviousWordOnLine(o,a,_);return i===0?j?k=j.start+1:k>1?k=1:(b--,k=a.getLineMaxColumn(b)):(j&&k<=j.end+1&&(j=WordOperations._findPreviousWordOnLine(o,a,new Position$1(b,j.start+1))),j?k=j.end+1:k>1?k=1:(b--,k=a.getLineMaxColumn(b))),new Range$2(b,k,_.lineNumber,_.column)}static deleteInsideWord(e,i,o){if(!o.isEmpty())return o;const a=new Position$1(o.positionLineNumber,o.positionColumn),c=this._deleteInsideWordWhitespace(i,a);return c||this._deleteInsideWordDetermineDeleteRange(e,i,a)}static _charAtIsWhitespace(e,i){const o=e.charCodeAt(i);return o===32||o===9}static _deleteInsideWordWhitespace(e,i){const o=e.getLineContent(i.lineNumber),a=o.length;if(a===0)return null;let c=Math.max(i.column-2,0);if(!this._charAtIsWhitespace(o,c))return null;let d=Math.min(i.column-1,a-1);if(!this._charAtIsWhitespace(o,d))return null;for(;c>0&&this._charAtIsWhitespace(o,c-1);)c--;for(;d+1<a&&this._charAtIsWhitespace(o,d+1);)d++;return new Range$2(i.lineNumber,c+1,i.lineNumber,d+2)}static _deleteInsideWordDetermineDeleteRange(e,i,o){const a=i.getLineContent(o.lineNumber),c=a.length;if(c===0)return o.lineNumber>1?new Range$2(o.lineNumber-1,i.getLineMaxColumn(o.lineNumber-1),o.lineNumber,1):o.lineNumber<i.getLineCount()?new Range$2(o.lineNumber,1,o.lineNumber+1,1):new Range$2(o.lineNumber,1,o.lineNumber,1);const d=_e=>_e.start+1<=o.column&&o.column<=_e.end+1,_=(_e,et)=>(_e=Math.min(_e,o.column),et=Math.max(et,o.column),new Range$2(o.lineNumber,_e,o.lineNumber,et)),b=_e=>{let et=_e.start+1,tt=_e.end+1,it=!1;for(;tt-1<c&&this._charAtIsWhitespace(a,tt-1);)it=!0,tt++;if(!it)for(;et>1&&this._charAtIsWhitespace(a,et-2);)et--;return _(et,tt)},k=WordOperations._findPreviousWordOnLine(e,i,o);if(k&&d(k))return b(k);const j=WordOperations._findNextWordOnLine(e,i,o);return j&&d(j)?b(j):k&&j?_(k.end+1,j.start+1):k?_(k.start+1,k.end+1):j?_(j.start+1,j.end+1):_(1,c+1)}static _deleteWordPartLeft(e,i){if(!i.isEmpty())return i;const o=i.getPosition(),a=WordOperations._moveWordPartLeft(e,o);return new Range$2(o.lineNumber,o.column,a.lineNumber,a.column)}static _findFirstNonWhitespaceChar(e,i){const o=e.length;for(let a=i;a<o;a++){const c=e.charAt(a);if(c!==" "&&c!=="	")return a}return o}static _deleteWordRightWhitespace(e,i){const o=e.getLineContent(i.lineNumber),a=i.column-1,c=this._findFirstNonWhitespaceChar(o,a);return a+1<c?new Range$2(i.lineNumber,i.column,i.lineNumber,c+1):null}static deleteWordRight(e,i){const o=e.wordSeparators,a=e.model,c=e.selection,d=e.whitespaceHeuristics;if(!c.isEmpty())return c;const _=new Position$1(c.positionLineNumber,c.positionColumn);let b=_.lineNumber,k=_.column;const j=a.getLineCount(),_e=a.getLineMaxColumn(b);if(b===j&&k===_e)return null;if(d){const tt=this._deleteWordRightWhitespace(a,_);if(tt)return tt}let et=WordOperations._findNextWordOnLine(o,a,_);return i===2?et?k=et.end+1:k<_e||b===j?k=_e:(b++,et=WordOperations._findNextWordOnLine(o,a,new Position$1(b,1)),et?k=et.start+1:k=a.getLineMaxColumn(b)):(et&&k>=et.start+1&&(et=WordOperations._findNextWordOnLine(o,a,new Position$1(b,et.end+1))),et?k=et.start+1:k<_e||b===j?k=_e:(b++,et=WordOperations._findNextWordOnLine(o,a,new Position$1(b,1)),et?k=et.start+1:k=a.getLineMaxColumn(b))),new Range$2(b,k,_.lineNumber,_.column)}static _deleteWordPartRight(e,i){if(!i.isEmpty())return i;const o=i.getPosition(),a=WordOperations._moveWordPartRight(e,o);return new Range$2(o.lineNumber,o.column,a.lineNumber,a.column)}static _createWordAtPosition(e,i,o){const a=new Range$2(i,o.start+1,i,o.end+1);return{word:e.getValueInRange(a),startColumn:a.startColumn,endColumn:a.endColumn}}static getWordAtPosition(e,i,o){const a=getMapForWordSeparators(i),c=WordOperations._findPreviousWordOnLine(a,e,o);if(c&&c.wordType===1&&c.start<=o.column-1&&o.column-1<=c.end)return WordOperations._createWordAtPosition(e,o.lineNumber,c);const d=WordOperations._findNextWordOnLine(a,e,o);return d&&d.wordType===1&&d.start<=o.column-1&&o.column-1<=d.end?WordOperations._createWordAtPosition(e,o.lineNumber,d):null}static word(e,i,o,a,c){const d=getMapForWordSeparators(e.wordSeparators),_=WordOperations._findPreviousWordOnLine(d,i,c),b=WordOperations._findNextWordOnLine(d,i,c);if(!a){let tt,it;return _&&_.wordType===1&&_.start<=c.column-1&&c.column-1<=_.end?(tt=_.start+1,it=_.end+1):b&&b.wordType===1&&b.start<=c.column-1&&c.column-1<=b.end?(tt=b.start+1,it=b.end+1):(_?tt=_.end+1:tt=1,b?it=b.start+1:it=i.getLineMaxColumn(c.lineNumber)),new SingleCursorState(new Range$2(c.lineNumber,tt,c.lineNumber,it),0,new Position$1(c.lineNumber,it),0)}let k,j;_&&_.wordType===1&&_.start<c.column-1&&c.column-1<_.end?(k=_.start+1,j=_.end+1):b&&b.wordType===1&&b.start<c.column-1&&c.column-1<b.end?(k=b.start+1,j=b.end+1):(k=c.column,j=c.column);const _e=c.lineNumber;let et;if(o.selectionStart.containsPosition(c))et=o.selectionStart.endColumn;else if(c.isBeforeOrEqual(o.selectionStart.getStartPosition())){et=k;const tt=new Position$1(_e,et);o.selectionStart.containsPosition(tt)&&(et=o.selectionStart.endColumn)}else{et=j;const tt=new Position$1(_e,et);o.selectionStart.containsPosition(tt)&&(et=o.selectionStart.startColumn)}return o.move(!0,_e,et,0)}}class CursorMoveCommands{static addCursorDown(e,i,o){const a=[];let c=0;for(let d=0,_=i.length;d<_;d++){const b=i[d];a[c++]=new CursorState(b.modelState,b.viewState),o?a[c++]=CursorState.fromModelState(MoveOperations.translateDown(e.cursorConfig,e.model,b.modelState)):a[c++]=CursorState.fromViewState(MoveOperations.translateDown(e.cursorConfig,e,b.viewState))}return a}static addCursorUp(e,i,o){const a=[];let c=0;for(let d=0,_=i.length;d<_;d++){const b=i[d];a[c++]=new CursorState(b.modelState,b.viewState),o?a[c++]=CursorState.fromModelState(MoveOperations.translateUp(e.cursorConfig,e.model,b.modelState)):a[c++]=CursorState.fromViewState(MoveOperations.translateUp(e.cursorConfig,e,b.viewState))}return a}static moveToBeginningOfLine(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c];a[c]=this._moveToLineStart(e,_,o)}return a}static _moveToLineStart(e,i,o){const a=i.viewState.position.column,c=i.modelState.position.column,d=a===c,_=i.viewState.position.lineNumber,b=e.getLineFirstNonWhitespaceColumn(_);return!d&&!(a===b)?this._moveToLineStartByView(e,i,o):this._moveToLineStartByModel(e,i,o)}static _moveToLineStartByView(e,i,o){return CursorState.fromViewState(MoveOperations.moveToBeginningOfLine(e.cursorConfig,e,i.viewState,o))}static _moveToLineStartByModel(e,i,o){return CursorState.fromModelState(MoveOperations.moveToBeginningOfLine(e.cursorConfig,e.model,i.modelState,o))}static moveToEndOfLine(e,i,o,a){const c=[];for(let d=0,_=i.length;d<_;d++){const b=i[d];c[d]=this._moveToLineEnd(e,b,o,a)}return c}static _moveToLineEnd(e,i,o,a){const c=i.viewState.position,d=e.getLineMaxColumn(c.lineNumber),_=c.column===d,b=i.modelState.position,k=e.model.getLineMaxColumn(b.lineNumber),j=d-c.column===k-b.column;return _||j?this._moveToLineEndByModel(e,i,o,a):this._moveToLineEndByView(e,i,o,a)}static _moveToLineEndByView(e,i,o,a){return CursorState.fromViewState(MoveOperations.moveToEndOfLine(e.cursorConfig,e,i.viewState,o,a))}static _moveToLineEndByModel(e,i,o,a){return CursorState.fromModelState(MoveOperations.moveToEndOfLine(e.cursorConfig,e.model,i.modelState,o,a))}static expandLineSelection(e,i){const o=[];for(let a=0,c=i.length;a<c;a++){const d=i[a],_=d.modelState.selection.startLineNumber,b=e.model.getLineCount();let k=d.modelState.selection.endLineNumber,j;k===b?j=e.model.getLineMaxColumn(b):(k++,j=1),o[a]=CursorState.fromModelState(new SingleCursorState(new Range$2(_,1,_,1),0,new Position$1(k,j),0))}return o}static moveToBeginningOfBuffer(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c];a[c]=CursorState.fromModelState(MoveOperations.moveToBeginningOfBuffer(e.cursorConfig,e.model,_.modelState,o))}return a}static moveToEndOfBuffer(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c];a[c]=CursorState.fromModelState(MoveOperations.moveToEndOfBuffer(e.cursorConfig,e.model,_.modelState,o))}return a}static selectAll(e,i){const o=e.model.getLineCount(),a=e.model.getLineMaxColumn(o);return CursorState.fromModelState(new SingleCursorState(new Range$2(1,1,1,1),0,new Position$1(o,a),0))}static line(e,i,o,a,c){const d=e.model.validatePosition(a),_=c?e.coordinatesConverter.validateViewPosition(new Position$1(c.lineNumber,c.column),d):e.coordinatesConverter.convertModelPositionToViewPosition(d);if(!o||!i.modelState.hasSelection()){const k=e.model.getLineCount();let j=d.lineNumber+1,_e=1;return j>k&&(j=k,_e=e.model.getLineMaxColumn(j)),CursorState.fromModelState(new SingleCursorState(new Range$2(d.lineNumber,1,j,_e),0,new Position$1(j,_e),0))}const b=i.modelState.selectionStart.getStartPosition().lineNumber;if(d.lineNumber<b)return CursorState.fromViewState(i.viewState.move(i.modelState.hasSelection(),_.lineNumber,1,0));if(d.lineNumber>b){const k=e.getLineCount();let j=_.lineNumber+1,_e=1;return j>k&&(j=k,_e=e.getLineMaxColumn(j)),CursorState.fromViewState(i.viewState.move(i.modelState.hasSelection(),j,_e,0))}else{const k=i.modelState.selectionStart.getEndPosition();return CursorState.fromModelState(i.modelState.move(i.modelState.hasSelection(),k.lineNumber,k.column,0))}}static word(e,i,o,a){const c=e.model.validatePosition(a);return CursorState.fromModelState(WordOperations.word(e.cursorConfig,e.model,i.modelState,o,c))}static cancelSelection(e,i){if(!i.modelState.hasSelection())return new CursorState(i.modelState,i.viewState);const o=i.viewState.position.lineNumber,a=i.viewState.position.column;return CursorState.fromViewState(new SingleCursorState(new Range$2(o,a,o,a),0,new Position$1(o,a),0))}static moveTo(e,i,o,a,c){const d=e.model.validatePosition(a),_=c?e.coordinatesConverter.validateViewPosition(new Position$1(c.lineNumber,c.column),d):e.coordinatesConverter.convertModelPositionToViewPosition(d);return CursorState.fromViewState(i.viewState.move(o,_.lineNumber,_.column,0))}static simpleMove(e,i,o,a,c,d){switch(o){case 0:return d===4?this._moveHalfLineLeft(e,i,a):this._moveLeft(e,i,a,c);case 1:return d===4?this._moveHalfLineRight(e,i,a):this._moveRight(e,i,a,c);case 2:return d===2?this._moveUpByViewLines(e,i,a,c):this._moveUpByModelLines(e,i,a,c);case 3:return d===2?this._moveDownByViewLines(e,i,a,c):this._moveDownByModelLines(e,i,a,c);case 4:return d===2?i.map(_=>CursorState.fromViewState(MoveOperations.moveToPrevBlankLine(e.cursorConfig,e,_.viewState,a))):i.map(_=>CursorState.fromModelState(MoveOperations.moveToPrevBlankLine(e.cursorConfig,e.model,_.modelState,a)));case 5:return d===2?i.map(_=>CursorState.fromViewState(MoveOperations.moveToNextBlankLine(e.cursorConfig,e,_.viewState,a))):i.map(_=>CursorState.fromModelState(MoveOperations.moveToNextBlankLine(e.cursorConfig,e.model,_.modelState,a)));case 6:return this._moveToViewMinColumn(e,i,a);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,i,a);case 8:return this._moveToViewCenterColumn(e,i,a);case 9:return this._moveToViewMaxColumn(e,i,a);case 10:return this._moveToViewLastNonWhitespaceColumn(e,i,a);default:return null}}static viewportMove(e,i,o,a,c){const d=e.getCompletelyVisibleViewRange(),_=e.coordinatesConverter.convertViewRangeToModelRange(d);switch(o){case 11:{const b=this._firstLineNumberInRange(e.model,_,c),k=e.model.getLineFirstNonWhitespaceColumn(b);return[this._moveToModelPosition(e,i[0],a,b,k)]}case 13:{const b=this._lastLineNumberInRange(e.model,_,c),k=e.model.getLineFirstNonWhitespaceColumn(b);return[this._moveToModelPosition(e,i[0],a,b,k)]}case 12:{const b=Math.round((_.startLineNumber+_.endLineNumber)/2),k=e.model.getLineFirstNonWhitespaceColumn(b);return[this._moveToModelPosition(e,i[0],a,b,k)]}case 14:{const b=[];for(let k=0,j=i.length;k<j;k++){const _e=i[k];b[k]=this.findPositionInViewportIfOutside(e,_e,d,a)}return b}default:return null}}static findPositionInViewportIfOutside(e,i,o,a){const c=i.viewState.position.lineNumber;if(o.startLineNumber<=c&&c<=o.endLineNumber-1)return new CursorState(i.modelState,i.viewState);{let d;c>o.endLineNumber-1?d=o.endLineNumber-1:c<o.startLineNumber?d=o.startLineNumber:d=c;const _=MoveOperations.vertical(e.cursorConfig,e,c,i.viewState.position.column,i.viewState.leftoverVisibleColumns,d,!1);return CursorState.fromViewState(i.viewState.move(a,_.lineNumber,_.column,_.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,i,o){let a=i.startLineNumber;return i.startColumn!==e.getLineMinColumn(a)&&a++,Math.min(i.endLineNumber,a+o-1)}static _lastLineNumberInRange(e,i,o){let a=i.startLineNumber;return i.startColumn!==e.getLineMinColumn(a)&&a++,Math.max(a,i.endLineNumber-o+1)}static _moveLeft(e,i,o,a){return i.map(c=>CursorState.fromViewState(MoveOperations.moveLeft(e.cursorConfig,e,c.viewState,o,a)))}static _moveHalfLineLeft(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=Math.round(e.getLineContent(b).length/2);a[c]=CursorState.fromViewState(MoveOperations.moveLeft(e.cursorConfig,e,_.viewState,o,k))}return a}static _moveRight(e,i,o,a){return i.map(c=>CursorState.fromViewState(MoveOperations.moveRight(e.cursorConfig,e,c.viewState,o,a)))}static _moveHalfLineRight(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=Math.round(e.getLineContent(b).length/2);a[c]=CursorState.fromViewState(MoveOperations.moveRight(e.cursorConfig,e,_.viewState,o,k))}return a}static _moveDownByViewLines(e,i,o,a){const c=[];for(let d=0,_=i.length;d<_;d++){const b=i[d];c[d]=CursorState.fromViewState(MoveOperations.moveDown(e.cursorConfig,e,b.viewState,o,a))}return c}static _moveDownByModelLines(e,i,o,a){const c=[];for(let d=0,_=i.length;d<_;d++){const b=i[d];c[d]=CursorState.fromModelState(MoveOperations.moveDown(e.cursorConfig,e.model,b.modelState,o,a))}return c}static _moveUpByViewLines(e,i,o,a){const c=[];for(let d=0,_=i.length;d<_;d++){const b=i[d];c[d]=CursorState.fromViewState(MoveOperations.moveUp(e.cursorConfig,e,b.viewState,o,a))}return c}static _moveUpByModelLines(e,i,o,a){const c=[];for(let d=0,_=i.length;d<_;d++){const b=i[d];c[d]=CursorState.fromModelState(MoveOperations.moveUp(e.cursorConfig,e.model,b.modelState,o,a))}return c}static _moveToViewPosition(e,i,o,a,c){return CursorState.fromViewState(i.viewState.move(o,a,c,0))}static _moveToModelPosition(e,i,o,a,c){return CursorState.fromModelState(i.modelState.move(o,a,c,0))}static _moveToViewMinColumn(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=e.getLineMinColumn(b);a[c]=this._moveToViewPosition(e,_,o,b,k)}return a}static _moveToViewFirstNonWhitespaceColumn(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=e.getLineFirstNonWhitespaceColumn(b);a[c]=this._moveToViewPosition(e,_,o,b,k)}return a}static _moveToViewCenterColumn(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=Math.round((e.getLineMaxColumn(b)+e.getLineMinColumn(b))/2);a[c]=this._moveToViewPosition(e,_,o,b,k)}return a}static _moveToViewMaxColumn(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=e.getLineMaxColumn(b);a[c]=this._moveToViewPosition(e,_,o,b,k)}return a}static _moveToViewLastNonWhitespaceColumn(e,i,o){const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.viewState.position.lineNumber,k=e.getLineLastNonWhitespaceColumn(b);a[c]=this._moveToViewPosition(e,_,o,b,k)}return a}}var CursorMove;(function(s){const e=function(o){if(!isObject(o))return!1;const a=o;return!(!isString$1(a.to)||!isUndefined(a.select)&&!isBoolean(a.select)||!isUndefined(a.by)&&!isString$1(a.by)||!isUndefined(a.value)&&!isNumber$1(a.value))};s.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function i(o){if(!o.to)return null;let a;switch(o.to){case s.RawDirection.Left:a=0;break;case s.RawDirection.Right:a=1;break;case s.RawDirection.Up:a=2;break;case s.RawDirection.Down:a=3;break;case s.RawDirection.PrevBlankLine:a=4;break;case s.RawDirection.NextBlankLine:a=5;break;case s.RawDirection.WrappedLineStart:a=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:a=7;break;case s.RawDirection.WrappedLineColumnCenter:a=8;break;case s.RawDirection.WrappedLineEnd:a=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:a=10;break;case s.RawDirection.ViewPortTop:a=11;break;case s.RawDirection.ViewPortBottom:a=13;break;case s.RawDirection.ViewPortCenter:a=12;break;case s.RawDirection.ViewPortIfOutside:a=14;break;default:return null}let c=0;switch(o.by){case s.RawUnit.Line:c=1;break;case s.RawUnit.WrappedLine:c=2;break;case s.RawUnit.Character:c=3;break;case s.RawUnit.HalfLine:c=4;break}return{direction:a,unit:c,select:!!o.select,value:o.value||1}}s.parse=i})(CursorMove||(CursorMove={}));function getEnterAction(s,e,i,o){const a=getScopedLineTokens(e,i.startLineNumber,i.startColumn),c=o.getLanguageConfiguration(a.languageId);if(!c)return null;const d=a.getLineContent(),_=d.substr(0,i.startColumn-1-a.firstCharOffset);let b;i.isEmpty()?b=d.substr(i.startColumn-1-a.firstCharOffset):b=getScopedLineTokens(e,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-a.firstCharOffset);let k="";if(i.startLineNumber>1&&a.firstCharOffset===0){const st=getScopedLineTokens(e,i.startLineNumber-1);st.languageId===a.languageId&&(k=st.getLineContent())}const j=c.onEnter(s,k,_,b);if(!j)return null;const _e=j.indentAction;let et=j.appendText;const tt=j.removeText||0;et?_e===IndentAction.Indent&&(et="	"+et):_e===IndentAction.Indent||_e===IndentAction.IndentOutdent?et="	":et="";let it=getIndentationAtPosition(e,i.startLineNumber,i.startColumn);return tt&&(it=it.substring(0,it.length-tt)),{indentAction:_e,appendText:et,removeText:tt,indentation:it}}var __decorate$u=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$p=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};const repeatCache=Object.create(null);function cachedStringRepeat(s,e){if(e<=0)return"";repeatCache[s]||(repeatCache[s]=["",s]);const i=repeatCache[s];for(let o=i.length;o<=e;o++)i[o]=i[o-1]+s;return i[e]}let ShiftCommand=class Dn{constructor(e,i,o){this._languageConfigurationService=o,this._opts=i,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,i,o,a,c){const d=CursorColumns.visibleColumnFromColumn(e,i,o);if(c){const _=cachedStringRepeat(" ",a),k=CursorColumns.prevIndentTabStop(d,a)/a;return cachedStringRepeat(_,k)}else{const _="	",k=CursorColumns.prevRenderTabStop(d,o)/o;return cachedStringRepeat(_,k)}}static shiftIndent(e,i,o,a,c){const d=CursorColumns.visibleColumnFromColumn(e,i,o);if(c){const _=cachedStringRepeat(" ",a),k=CursorColumns.nextIndentTabStop(d,a)/a;return cachedStringRepeat(_,k)}else{const _="	",k=CursorColumns.nextRenderTabStop(d,o)/o;return cachedStringRepeat(_,k)}}_addEditOperation(e,i,o){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(i,o):e.addEditOperation(i,o)}getEditOperations(e,i){const o=this._selection.startLineNumber;let a=this._selection.endLineNumber;this._selection.endColumn===1&&o!==a&&(a=a-1);const{tabSize:c,indentSize:d,insertSpaces:_}=this._opts,b=o===a;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(o))&&(this._useLastEditRangeForCursorEndPosition=!0);let k=0,j=0;for(let _e=o;_e<=a;_e++,k=j){j=0;const et=e.getLineContent(_e);let tt=firstNonWhitespaceIndex(et);if(this._opts.isUnshift&&(et.length===0||tt===0)||!b&&!this._opts.isUnshift&&et.length===0)continue;if(tt===-1&&(tt=et.length),_e>1&&CursorColumns.visibleColumnFromColumn(et,tt+1,c)%d!==0&&e.tokenization.isCheapToTokenize(_e-1)){const ot=getEnterAction(this._opts.autoIndent,e,new Range$2(_e-1,e.getLineMaxColumn(_e-1),_e-1,e.getLineMaxColumn(_e-1)),this._languageConfigurationService);if(ot){if(j=k,ot.appendText)for(let nt=0,rt=ot.appendText.length;nt<rt&&j<d&&ot.appendText.charCodeAt(nt)===32;nt++)j++;ot.removeText&&(j=Math.max(0,j-ot.removeText));for(let nt=0;nt<j&&!(tt===0||et.charCodeAt(tt-1)!==32);nt++)tt--}}if(this._opts.isUnshift&&tt===0)continue;let it;this._opts.isUnshift?it=Dn.unshiftIndent(et,tt+1,c,d,_):it=Dn.shiftIndent(et,tt+1,c,d,_),this._addEditOperation(i,new Range$2(_e,1,_e,tt+1),it),_e===o&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=tt+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(o)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const k=_?cachedStringRepeat(" ",d):"	";for(let j=o;j<=a;j++){const _e=e.getLineContent(j);let et=firstNonWhitespaceIndex(_e);if(!(this._opts.isUnshift&&(_e.length===0||et===0))&&!(!b&&!this._opts.isUnshift&&_e.length===0)&&(et===-1&&(et=_e.length),!(this._opts.isUnshift&&et===0)))if(this._opts.isUnshift){et=Math.min(et,d);for(let tt=0;tt<et;tt++)if(_e.charCodeAt(tt)===9){et=tt+1;break}this._addEditOperation(i,new Range$2(j,1,j,et+1),"")}else this._addEditOperation(i,new Range$2(j,1,j,1),k),j===o&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=i.trackSelection(this._selection)}computeCursorState(e,i){if(this._useLastEditRangeForCursorEndPosition){const a=i.getInverseEditOperations()[0];return new Selection$1(a.range.endLineNumber,a.range.endColumn,a.range.endLineNumber,a.range.endColumn)}const o=i.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const a=this._selection.startColumn;return o.startColumn<=a?o:o.getDirection()===0?new Selection$1(o.startLineNumber,a,o.endLineNumber,o.endColumn):new Selection$1(o.endLineNumber,o.endColumn,o.startLineNumber,a)}return o}};ShiftCommand=__decorate$u([__param$p(2,ILanguageConfigurationService)],ShiftCommand);class SurroundSelectionCommand{constructor(e,i,o){this._range=e,this._charBeforeSelection=i,this._charAfterSelection=o}getEditOperations(e,i){i.addTrackedEditOperation(new Range$2(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),i.addTrackedEditOperation(new Range$2(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,i){const o=i.getInverseEditOperations(),a=o[0].range,c=o[1].range;return new Selection$1(a.endLineNumber,a.endColumn,c.endLineNumber,c.endColumn-this._charAfterSelection.length)}}class CompositionSurroundSelectionCommand{constructor(e,i,o){this._position=e,this._text=i,this._charAfter=o}getEditOperations(e,i){i.addTrackedEditOperation(new Range$2(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,i){const a=i.getInverseEditOperations()[0].range;return new Selection$1(a.endLineNumber,a.startColumn,a.endLineNumber,a.endColumn-this._charAfter.length)}}function getPrecedingValidLine(s,e,i){const o=s.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let a,c=-1;for(a=e-1;a>=1;a--){if(s.tokenization.getLanguageIdAtPosition(a,0)!==o)return c;const d=s.getLineContent(a);if(i.shouldIgnore(d)||/^\s+$/.test(d)||d===""){c=a;continue}return a}}return-1}function getInheritIndentForLine(s,e,i,o=!0,a){if(s<4)return null;const c=a.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!c)return null;if(i<=1)return{indentation:"",action:null};const d=getPrecedingValidLine(e,i,c);if(d<0)return null;if(d<1)return{indentation:"",action:null};const _=e.getLineContent(d);if(c.shouldIncrease(_)||c.shouldIndentNextLine(_))return{indentation:getLeadingWhitespace(_),action:IndentAction.Indent,line:d};if(c.shouldDecrease(_))return{indentation:getLeadingWhitespace(_),action:null,line:d};{if(d===1)return{indentation:getLeadingWhitespace(e.getLineContent(d)),action:null,line:d};const b=d-1,k=c.getIndentMetadata(e.getLineContent(b));if(!(k&3)&&k&4){let j=0;for(let _e=b-1;_e>0;_e--)if(!c.shouldIndentNextLine(e.getLineContent(_e))){j=_e;break}return{indentation:getLeadingWhitespace(e.getLineContent(j+1)),action:null,line:j+1}}if(o)return{indentation:getLeadingWhitespace(e.getLineContent(d)),action:null,line:d};for(let j=d;j>0;j--){const _e=e.getLineContent(j);if(c.shouldIncrease(_e))return{indentation:getLeadingWhitespace(_e),action:IndentAction.Indent,line:j};if(c.shouldIndentNextLine(_e)){let et=0;for(let tt=j-1;tt>0;tt--)if(!c.shouldIndentNextLine(e.getLineContent(j))){et=tt;break}return{indentation:getLeadingWhitespace(e.getLineContent(et+1)),action:null,line:et+1}}else if(c.shouldDecrease(_e))return{indentation:getLeadingWhitespace(_e),action:null,line:j}}return{indentation:getLeadingWhitespace(e.getLineContent(1)),action:null,line:1}}}function getIndentForEnter(s,e,i,o,a){if(s<4)return null;e.tokenization.forceTokenization(i.startLineNumber);const c=e.tokenization.getLineTokens(i.startLineNumber),d=createScopedLineTokens(c,i.startColumn-1),_=d.getLineContent();let b=!1,k;d.firstCharOffset>0&&c.getLanguageId(0)!==d.languageId?(b=!0,k=_.substr(0,i.startColumn-1-d.firstCharOffset)):k=c.getLineContent().substring(0,i.startColumn-1);let j;i.isEmpty()?j=_.substr(i.startColumn-1-d.firstCharOffset):j=getScopedLineTokens(e,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-d.firstCharOffset);const _e=a.getLanguageConfiguration(d.languageId).indentRulesSupport;if(!_e)return null;const et=k,tt=getLeadingWhitespace(k),it={tokenization:{getLineTokens:rt=>e.tokenization.getLineTokens(rt),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(rt,at)=>e.getLanguageIdAtPosition(rt,at)},getLineContent:rt=>rt===i.startLineNumber?et:e.getLineContent(rt)},st=getLeadingWhitespace(c.getLineContent()),ot=getInheritIndentForLine(s,it,i.startLineNumber+1,void 0,a);if(!ot){const rt=b?st:tt;return{beforeEnter:rt,afterEnter:rt}}let nt=b?st:ot.indentation;return ot.action===IndentAction.Indent&&(nt=o.shiftIndent(nt)),_e.shouldDecrease(j)&&(nt=o.unshiftIndent(nt)),{beforeEnter:b?st:tt,afterEnter:nt}}function getIndentActionForType(s,e,i,o,a,c){if(s<4)return null;const d=getScopedLineTokens(e,i.startLineNumber,i.startColumn);if(d.firstCharOffset)return null;const _=c.getLanguageConfiguration(d.languageId).indentRulesSupport;if(!_)return null;const b=d.getLineContent(),k=b.substr(0,i.startColumn-1-d.firstCharOffset);let j;if(i.isEmpty()?j=b.substr(i.startColumn-1-d.firstCharOffset):j=getScopedLineTokens(e,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-d.firstCharOffset),!_.shouldDecrease(k+j)&&_.shouldDecrease(k+o+j)){const _e=getInheritIndentForLine(s,e,i.startLineNumber,!1,c);if(!_e)return null;let et=_e.indentation;return _e.action!==IndentAction.Indent&&(et=a.unshiftIndent(et)),et}return null}class TypeOperations{static indent(e,i,o){if(i===null||o===null)return[];const a=[];for(let c=0,d=o.length;c<d;c++)a[c]=new ShiftCommand(o[c],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return a}static outdent(e,i,o){const a=[];for(let c=0,d=o.length;c<d;c++)a[c]=new ShiftCommand(o[c],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return a}static shiftIndent(e,i,o){return o=o||1,ShiftCommand.shiftIndent(i,i.length+o,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,i,o){return o=o||1,ShiftCommand.unshiftIndent(i,i.length+o,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,i,o,a){const c=[];for(let d=0,_=o.length;d<_;d++)c[d]=new ReplaceCommand(o[d],a[d]);return new EditOperationResult(0,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,i,o,a,c){const d=[];for(let _=0,b=o.length;_<b;_++){const k=o[_],j=k.getPosition();if(c&&!k.isEmpty()&&(c=!1),c&&a.indexOf(`
`)!==a.length-1&&(c=!1),c){const _e=new Range$2(j.lineNumber,1,j.lineNumber,1);d[_]=new ReplaceCommandThatPreservesSelection(_e,a,k,!0)}else d[_]=new ReplaceCommand(k,a)}return new EditOperationResult(0,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,i,o,a,c){if(a||i.length===1)return null;if(c&&c.length===i.length)return c;if(e.multiCursorPaste==="spread"){o.charCodeAt(o.length-1)===10&&(o=o.substr(0,o.length-1)),o.charCodeAt(o.length-1)===13&&(o=o.substr(0,o.length-1));const d=splitLines(o);if(d.length===i.length)return d}return null}static paste(e,i,o,a,c,d){const _=this._distributePasteToCursors(e,o,a,c,d);return _?(o=o.sort(Range$2.compareRangesUsingStarts),this._distributedPaste(e,i,o,_)):this._simplePaste(e,i,o,a,c)}static _goodIndentForLine(e,i,o){let a=null,c="";const d=getInheritIndentForLine(e.autoIndent,i,o,!1,e.languageConfigurationService);if(d)a=d.action,c=d.indentation;else if(o>1){let _;for(_=o-1;_>=1;_--){const j=i.getLineContent(_);if(lastNonWhitespaceIndex(j)>=0)break}if(_<1)return null;const b=i.getLineMaxColumn(_),k=getEnterAction(e.autoIndent,i,new Range$2(_,b,_,b),e.languageConfigurationService);k&&(c=k.indentation+k.appendText)}return a&&(a===IndentAction.Indent&&(c=TypeOperations.shiftIndent(e,c)),a===IndentAction.Outdent&&(c=TypeOperations.unshiftIndent(e,c)),c=e.normalizeIndentation(c)),c||null}static _replaceJumpToNextIndent(e,i,o,a){let c="";const d=o.getStartPosition();if(e.insertSpaces){const _=e.visibleColumnFromColumn(i,d),b=e.indentSize,k=b-_%b;for(let j=0;j<k;j++)c+=" "}else c="	";return new ReplaceCommand(o,c,a)}static tab(e,i,o){const a=[];for(let c=0,d=o.length;c<d;c++){const _=o[c];if(_.isEmpty()){const b=i.getLineContent(_.startLineNumber);if(/^\s*$/.test(b)&&i.tokenization.isCheapToTokenize(_.startLineNumber)){let k=this._goodIndentForLine(e,i,_.startLineNumber);k=k||"	";const j=e.normalizeIndentation(k);if(!b.startsWith(j)){a[c]=new ReplaceCommand(new Range$2(_.startLineNumber,1,_.startLineNumber,b.length+1),j,!0);continue}}a[c]=this._replaceJumpToNextIndent(e,i,_,!0)}else{if(_.startLineNumber===_.endLineNumber){const b=i.getLineMaxColumn(_.startLineNumber);if(_.startColumn!==1||_.endColumn!==b){a[c]=this._replaceJumpToNextIndent(e,i,_,!1);continue}}a[c]=new ShiftCommand(_,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return a}static compositionType(e,i,o,a,c,d,_,b){const k=a.map(j=>this._compositionType(o,j,c,d,_,b));return new EditOperationResult(4,k,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,i,o,a,c,d){if(!i.isEmpty())return null;const _=i.getPosition(),b=Math.max(1,_.column-a),k=Math.min(e.getLineMaxColumn(_.lineNumber),_.column+c),j=new Range$2(_.lineNumber,b,_.lineNumber,k);return e.getValueInRange(j)===o&&d===0?null:new ReplaceCommandWithOffsetCursorState(j,o,0,d)}static _typeCommand(e,i,o){return o?new ReplaceCommandWithoutChangingPosition(e,i,!0):new ReplaceCommand(e,i,!0)}static _enter(e,i,o,a){if(e.autoIndent===0)return TypeOperations._typeCommand(a,`
`,o);if(!i.tokenization.isCheapToTokenize(a.getStartPosition().lineNumber)||e.autoIndent===1){const b=i.getLineContent(a.startLineNumber),k=getLeadingWhitespace(b).substring(0,a.startColumn-1);return TypeOperations._typeCommand(a,`
`+e.normalizeIndentation(k),o)}const c=getEnterAction(e.autoIndent,i,a,e.languageConfigurationService);if(c){if(c.indentAction===IndentAction.None)return TypeOperations._typeCommand(a,`
`+e.normalizeIndentation(c.indentation+c.appendText),o);if(c.indentAction===IndentAction.Indent)return TypeOperations._typeCommand(a,`
`+e.normalizeIndentation(c.indentation+c.appendText),o);if(c.indentAction===IndentAction.IndentOutdent){const b=e.normalizeIndentation(c.indentation),k=e.normalizeIndentation(c.indentation+c.appendText),j=`
`+k+`
`+b;return o?new ReplaceCommandWithoutChangingPosition(a,j,!0):new ReplaceCommandWithOffsetCursorState(a,j,-1,k.length-b.length,!0)}else if(c.indentAction===IndentAction.Outdent){const b=TypeOperations.unshiftIndent(e,c.indentation);return TypeOperations._typeCommand(a,`
`+e.normalizeIndentation(b+c.appendText),o)}}const d=i.getLineContent(a.startLineNumber),_=getLeadingWhitespace(d).substring(0,a.startColumn-1);if(e.autoIndent>=4){const b=getIndentForEnter(e.autoIndent,i,a,{unshiftIndent:k=>TypeOperations.unshiftIndent(e,k),shiftIndent:k=>TypeOperations.shiftIndent(e,k),normalizeIndentation:k=>e.normalizeIndentation(k)},e.languageConfigurationService);if(b){let k=e.visibleColumnFromColumn(i,a.getEndPosition());const j=a.endColumn,_e=i.getLineContent(a.endLineNumber),et=firstNonWhitespaceIndex(_e);if(et>=0?a=a.setEndPosition(a.endLineNumber,Math.max(a.endColumn,et+1)):a=a.setEndPosition(a.endLineNumber,i.getLineMaxColumn(a.endLineNumber)),o)return new ReplaceCommandWithoutChangingPosition(a,`
`+e.normalizeIndentation(b.afterEnter),!0);{let tt=0;return j<=et+1&&(e.insertSpaces||(k=Math.ceil(k/e.indentSize)),tt=Math.min(k+1-e.normalizeIndentation(b.afterEnter).length-1,0)),new ReplaceCommandWithOffsetCursorState(a,`
`+e.normalizeIndentation(b.afterEnter),0,tt,!0)}}}return TypeOperations._typeCommand(a,`
`+e.normalizeIndentation(_),o)}static _isAutoIndentType(e,i,o){if(e.autoIndent<4)return!1;for(let a=0,c=o.length;a<c;a++)if(!i.tokenization.isCheapToTokenize(o[a].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,i,o,a){const c=getIndentationAtPosition(i,o.startLineNumber,o.startColumn),d=getIndentActionForType(e.autoIndent,i,o,a,{shiftIndent:_=>TypeOperations.shiftIndent(e,_),unshiftIndent:_=>TypeOperations.unshiftIndent(e,_)},e.languageConfigurationService);if(d===null)return null;if(d!==e.normalizeIndentation(c)){const _=i.getLineFirstNonWhitespaceColumn(o.startLineNumber);return _===0?TypeOperations._typeCommand(new Range$2(o.startLineNumber,1,o.endLineNumber,o.endColumn),e.normalizeIndentation(d)+a,!1):TypeOperations._typeCommand(new Range$2(o.startLineNumber,1,o.endLineNumber,o.endColumn),e.normalizeIndentation(d)+i.getLineContent(o.startLineNumber).substring(_-1,o.startColumn-1)+a,!1)}return null}static _isAutoClosingOvertype(e,i,o,a,c){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(c))return!1;for(let d=0,_=o.length;d<_;d++){const b=o[d];if(!b.isEmpty())return!1;const k=b.getPosition(),j=i.getLineContent(k.lineNumber);if(j.charAt(k.column-1)!==c)return!1;const et=isQuote(c);if((k.column>2?j.charCodeAt(k.column-2):0)===92&&et)return!1;if(e.autoClosingOvertype==="auto"){let it=!1;for(let st=0,ot=a.length;st<ot;st++){const nt=a[st];if(k.lineNumber===nt.startLineNumber&&k.column===nt.startColumn){it=!0;break}}if(!it)return!1}}return!0}static _runAutoClosingOvertype(e,i,o,a,c){const d=[];for(let _=0,b=a.length;_<b;_++){const j=a[_].getPosition(),_e=new Range$2(j.lineNumber,j.column,j.lineNumber,j.column+1);d[_]=new ReplaceCommand(_e,c)}return new EditOperationResult(4,d,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,i){const o=i.charAt(0),a=e.autoClosingPairs.autoClosingPairsOpenByStart.get(o)||[],c=e.autoClosingPairs.autoClosingPairsCloseByStart.get(o)||[],d=a.some(b=>i.startsWith(b.open)),_=c.some(b=>i.startsWith(b.close));return!d&&_}static _findAutoClosingPairOpen(e,i,o,a){const c=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(a);if(!c)return null;let d=null;for(const _ of c)if(d===null||_.open.length>d.open.length){let b=!0;for(const k of o)if(i.getValueInRange(new Range$2(k.lineNumber,k.column-_.open.length+1,k.lineNumber,k.column))+a!==_.open){b=!1;break}b&&(d=_)}return d}static _findContainedAutoClosingPair(e,i){if(i.open.length<=1)return null;const o=i.close.charAt(i.close.length-1),a=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(o)||[];let c=null;for(const d of a)d.open!==i.open&&i.open.includes(d.open)&&i.close.endsWith(d.close)&&(!c||d.open.length>c.open.length)&&(c=d);return c}static _getAutoClosingPairClose(e,i,o,a,c){const d=isQuote(a),_=d?e.autoClosingQuotes:e.autoClosingBrackets,b=d?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(_==="never")return null;for(const it of o)if(!it.isEmpty())return null;const k=o.map(it=>{const st=it.getPosition();return c?{lineNumber:st.lineNumber,beforeColumn:st.column-a.length,afterColumn:st.column}:{lineNumber:st.lineNumber,beforeColumn:st.column,afterColumn:st.column}}),j=this._findAutoClosingPairOpen(e,i,k.map(it=>new Position$1(it.lineNumber,it.beforeColumn)),a);if(!j)return null;const _e=this._findContainedAutoClosingPair(e,j),et=_e?_e.close:"";let tt=!0;for(const it of k){const{lineNumber:st,beforeColumn:ot,afterColumn:nt}=it,rt=i.getLineContent(st),at=rt.substring(0,ot-1),lt=rt.substring(nt-1);if(lt.startsWith(et)||(tt=!1),lt.length>0){const ct=lt.charAt(0);if(!TypeOperations._isBeforeClosingBrace(e,lt)&&!b(ct))return null}if(j.open.length===1&&(a==="'"||a==='"')&&_!=="always"){const ct=getMapForWordSeparators(e.wordSeparators);if(at.length>0){const ft=at.charCodeAt(at.length-1);if(ct.get(ft)===0)return null}}if(!i.tokenization.isCheapToTokenize(st))return null;i.tokenization.forceTokenization(st);const gt=i.tokenization.getLineTokens(st),ht=createScopedLineTokens(gt,ot-1);if(!j.shouldAutoClose(ht,ot-ht.firstCharOffset))return null;const ut=j.findNeutralCharacter();if(ut){const ct=i.tokenization.getTokenTypeIfInsertingCharacter(st,ot,ut);if(!j.isOK(ct))return null}}return tt?j.close.substring(0,j.close.length-et.length):j.close}static _runAutoClosingOpenCharType(e,i,o,a,c,d,_){const b=[];for(let k=0,j=a.length;k<j;k++){const _e=a[k];b[k]=new TypeWithAutoClosingCommand(_e,c,!d,_)}return new EditOperationResult(4,b,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,i){return isQuote(i)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,i,o,a){if(!TypeOperations._shouldSurroundChar(e,a)||!e.surroundingPairs.hasOwnProperty(a))return!1;const c=isQuote(a);for(const d of o){if(d.isEmpty())return!1;let _=!0;for(let b=d.startLineNumber;b<=d.endLineNumber;b++){const k=i.getLineContent(b),j=b===d.startLineNumber?d.startColumn-1:0,_e=b===d.endLineNumber?d.endColumn-1:k.length,et=k.substring(j,_e);if(/[^ \t]/.test(et)){_=!1;break}}if(_)return!1;if(c&&d.startLineNumber===d.endLineNumber&&d.startColumn+1===d.endColumn){const b=i.getValueInRange(d);if(isQuote(b))return!1}}return!0}static _runSurroundSelectionType(e,i,o,a,c){const d=[];for(let _=0,b=a.length;_<b;_++){const k=a[_],j=i.surroundingPairs[c];d[_]=new SurroundSelectionCommand(k,c,j)}return new EditOperationResult(0,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,i,o){return!!(o.length===1&&i.tokenization.isCheapToTokenize(o[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,i,o,a,c){if(!i.electricChars.hasOwnProperty(c)||!a.isEmpty())return null;const d=a.getPosition();o.tokenization.forceTokenization(d.lineNumber);const _=o.tokenization.getLineTokens(d.lineNumber);let b;try{b=i.onElectricCharacter(c,_,d.column)}catch(k){return onUnexpectedError(k),null}if(!b)return null;if(b.matchOpenBracket){const k=(_.getLineContent()+c).lastIndexOf(b.matchOpenBracket)+1,j=o.bracketPairs.findMatchingBracketUp(b.matchOpenBracket,{lineNumber:d.lineNumber,column:k},500);if(j){if(j.startLineNumber===d.lineNumber)return null;const _e=o.getLineContent(j.startLineNumber),et=getLeadingWhitespace(_e),tt=i.normalizeIndentation(et),it=o.getLineContent(d.lineNumber),st=o.getLineFirstNonWhitespaceColumn(d.lineNumber)||d.column,ot=it.substring(st-1,d.column-1),nt=tt+ot+c,rt=new Range$2(d.lineNumber,1,d.lineNumber,d.column),at=new ReplaceCommand(rt,nt);return new EditOperationResult(getTypingOperation(nt,e),[at],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,i,o,a,c,d){if(!a)return null;let _=null;for(const _e of a)if(_===null)_=_e.insertedText;else if(_!==_e.insertedText)return null;if(!_||_.length!==1)return null;const b=_;let k=!1;for(const _e of a)if(_e.deletedText.length!==0){k=!0;break}if(k){if(!TypeOperations._shouldSurroundChar(i,b)||!i.surroundingPairs.hasOwnProperty(b))return null;const _e=isQuote(b);for(const it of a)if(it.deletedSelectionStart!==0||it.deletedSelectionEnd!==it.deletedText.length||/^[ \t]+$/.test(it.deletedText)||_e&&isQuote(it.deletedText))return null;const et=[];for(const it of c){if(!it.isEmpty())return null;et.push(it.getPosition())}if(et.length!==a.length)return null;const tt=[];for(let it=0,st=et.length;it<st;it++)tt.push(new CompositionSurroundSelectionCommand(et[it],a[it].deletedText,b));return new EditOperationResult(4,tt,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,o,c,d,b)){const _e=c.map(et=>new ReplaceCommand(new Range$2(et.positionLineNumber,et.positionColumn,et.positionLineNumber,et.positionColumn+1),"",!1));return new EditOperationResult(4,_e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const j=this._getAutoClosingPairClose(i,o,c,b,!0);return j!==null?this._runAutoClosingOpenCharType(e,i,o,c,b,!0,j):null}static typeWithInterceptors(e,i,o,a,c,d,_){if(!e&&_===`
`){const j=[];for(let _e=0,et=c.length;_e<et;_e++)j[_e]=TypeOperations._enter(o,a,!1,c[_e]);return new EditOperationResult(4,j,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(o,a,c)){const j=[];let _e=!1;for(let et=0,tt=c.length;et<tt;et++)if(j[et]=this._runAutoIndentType(o,a,c[et],_),!j[et]){_e=!0;break}if(!_e)return new EditOperationResult(4,j,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(o,a,c,d,_))return this._runAutoClosingOvertype(i,o,a,c,_);if(!e){const j=this._getAutoClosingPairClose(o,a,c,_,!1);if(j)return this._runAutoClosingOpenCharType(i,o,a,c,_,!1,j)}if(!e&&this._isSurroundSelectionType(o,a,c,_))return this._runSurroundSelectionType(i,o,a,c,_);if(!e&&this._isTypeInterceptorElectricChar(o,a,c)){const j=this._typeInterceptorElectricChar(i,o,a,c[0],_);if(j)return j}const b=[];for(let j=0,_e=c.length;j<_e;j++)b[j]=new ReplaceCommand(c[j],_);const k=getTypingOperation(_,i);return new EditOperationResult(k,b,{shouldPushStackElementBefore:shouldPushStackElementBetween(i,k),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,i,o,a,c){const d=[];for(let b=0,k=a.length;b<k;b++)d[b]=new ReplaceCommand(a[b],c);const _=getTypingOperation(c,e);return new EditOperationResult(_,d,{shouldPushStackElementBefore:shouldPushStackElementBetween(e,_),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,i,o){if(i===null||o===null)return[];const a=[];for(let c=0,d=o.length;c<d;c++){let _=o[c].positionLineNumber;if(_===1)a[c]=new ReplaceCommandWithoutChangingPosition(new Range$2(1,1,1,1),`
`);else{_--;const b=i.getLineMaxColumn(_);a[c]=this._enter(e,i,!1,new Range$2(_,b,_,b))}}return a}static lineInsertAfter(e,i,o){if(i===null||o===null)return[];const a=[];for(let c=0,d=o.length;c<d;c++){const _=o[c].positionLineNumber,b=i.getLineMaxColumn(_);a[c]=this._enter(e,i,!1,new Range$2(_,b,_,b))}return a}static lineBreakInsert(e,i,o){const a=[];for(let c=0,d=o.length;c<d;c++)a[c]=this._enter(e,i,!0,o[c]);return a}}class TypeWithAutoClosingCommand extends ReplaceCommandWithOffsetCursorState{constructor(e,i,o,a){super(e,(o?i:"")+a,0,-a.length),this._openCharacter=i,this._closeCharacter=a,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,i){const a=i.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Range$2(a.startLineNumber,a.endColumn-this._closeCharacter.length,a.endLineNumber,a.endColumn),this.enclosingRange=new Range$2(a.startLineNumber,a.endColumn-this._openCharacter.length-this._closeCharacter.length,a.endLineNumber,a.endColumn),super.computeCursorState(e,i)}}class CompositionOutcome{constructor(e,i,o,a,c,d){this.deletedText=e,this.deletedSelectionStart=i,this.deletedSelectionEnd=o,this.insertedText=a,this.insertedSelectionStart=c,this.insertedSelectionEnd=d}}function getTypingOperation(s,e){return s===" "?e===5||e===6?6:5:4}function shouldPushStackElementBetween(s,e){return isTypingOperation(s)&&!isTypingOperation(e)?!0:s===5?!1:normalizeOperationType(s)!==normalizeOperationType(e)}function normalizeOperationType(s){return s===6||s===5?"space":s}function isTypingOperation(s){return s===4||s===5||s===6}var EditorContextKeys;(function(s){s.editorSimpleInput=new RawContextKey("editorSimpleInput",!1,!0),s.editorTextFocus=new RawContextKey("editorTextFocus",!1,localize("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),s.focus=new RawContextKey("editorFocus",!1,localize("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new RawContextKey("textInputFocus",!1,localize("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new RawContextKey("editorReadonly",!1,localize("editorReadonly","Whether the editor is read only")),s.inDiffEditor=new RawContextKey("inDiffEditor",!1,localize("inDiffEditor","Whether the context is a diff editor")),s.columnSelection=new RawContextKey("editorColumnSelection",!1,localize("editorColumnSelection","Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new RawContextKey("editorHasSelection",!1,localize("editorHasSelection","Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new RawContextKey("editorHasMultipleSelections",!1,localize("editorHasMultipleSelections","Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new RawContextKey("editorTabMovesFocus",!1,localize("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInWalkThroughSnippet=new RawContextKey("isInEmbeddedEditor",!1,!0),s.canUndo=new RawContextKey("canUndo",!1,!0),s.canRedo=new RawContextKey("canRedo",!1,!0),s.hoverVisible=new RawContextKey("editorHoverVisible",!1,localize("editorHoverVisible","Whether the editor hover is visible")),s.inCompositeEditor=new RawContextKey("inCompositeEditor",void 0,localize("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new RawContextKey("editorLangId","",localize("editorLangId","The language identifier of the editor")),s.hasCompletionItemProvider=new RawContextKey("editorHasCompletionItemProvider",!1,localize("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new RawContextKey("editorHasCodeActionsProvider",!1,localize("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),s.hasCodeLensProvider=new RawContextKey("editorHasCodeLensProvider",!1,localize("editorHasCodeLensProvider","Whether the editor has a code lens provider")),s.hasDefinitionProvider=new RawContextKey("editorHasDefinitionProvider",!1,localize("editorHasDefinitionProvider","Whether the editor has a definition provider")),s.hasDeclarationProvider=new RawContextKey("editorHasDeclarationProvider",!1,localize("editorHasDeclarationProvider","Whether the editor has a declaration provider")),s.hasImplementationProvider=new RawContextKey("editorHasImplementationProvider",!1,localize("editorHasImplementationProvider","Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new RawContextKey("editorHasTypeDefinitionProvider",!1,localize("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),s.hasHoverProvider=new RawContextKey("editorHasHoverProvider",!1,localize("editorHasHoverProvider","Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new RawContextKey("editorHasDocumentHighlightProvider",!1,localize("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new RawContextKey("editorHasDocumentSymbolProvider",!1,localize("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),s.hasReferenceProvider=new RawContextKey("editorHasReferenceProvider",!1,localize("editorHasReferenceProvider","Whether the editor has a reference provider")),s.hasRenameProvider=new RawContextKey("editorHasRenameProvider",!1,localize("editorHasRenameProvider","Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new RawContextKey("editorHasSignatureHelpProvider",!1,localize("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new RawContextKey("editorHasInlayHintsProvider",!1,localize("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new RawContextKey("editorHasDocumentFormattingProvider",!1,localize("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new RawContextKey("editorHasDocumentSelectionFormattingProvider",!1,localize("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new RawContextKey("editorHasMultipleDocumentFormattingProvider",!1,localize("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new RawContextKey("editorHasMultipleDocumentSelectionFormattingProvider",!1,localize("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(EditorContextKeys||(EditorContextKeys={}));const CORE_WEIGHT=0;class CoreEditorCommand extends EditorCommand{runEditorCommand(e,i,o){const a=i._getViewModel();!a||this.runCoreEditorCommand(a,o||{})}}var EditorScroll_;(function(s){const e=function(o){if(!isObject(o))return!1;const a=o;return!(!isString$1(a.to)||!isUndefined(a.by)&&!isString$1(a.by)||!isUndefined(a.value)&&!isNumber$1(a.value)||!isUndefined(a.revealCursor)&&!isBoolean(a.revealCursor))};s.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Down:"down"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor"};function i(o){let a;switch(o.to){case s.RawDirection.Up:a=1;break;case s.RawDirection.Down:a=2;break;default:return null}let c;switch(o.by){case s.RawUnit.Line:c=1;break;case s.RawUnit.WrappedLine:c=2;break;case s.RawUnit.Page:c=3;break;case s.RawUnit.HalfPage:c=4;break;case s.RawUnit.Editor:c=5;break;default:c=2}const d=Math.floor(o.value||1),_=!!o.revealCursor;return{direction:a,unit:c,value:d,revealCursor:_,select:!!o.select}}s.parse=i})(EditorScroll_||(EditorScroll_={}));var RevealLine_;(function(s){const e=function(i){if(!isObject(i))return!1;const o=i;return!(!isNumber$1(o.lineNumber)&&!isString$1(o.lineNumber)||!isUndefined(o.at)&&!isString$1(o.at))};s.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(RevealLine_||(RevealLine_={}));class EditorOrNativeTextInputCommand{constructor(e){e.addImplementation(1e4,"code-editor",(i,o)=>{const a=i.get(ICodeEditorService).getFocusedCodeEditor();return a&&a.hasTextFocus()?this._runEditorCommand(i,a,o):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(i,o)=>{const a=document.activeElement;return a&&["input","textarea"].indexOf(a.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(i,o)=>{const a=i.get(ICodeEditorService).getActiveCodeEditor();return a?(a.focus(),this._runEditorCommand(i,a,o)):!1})}_runEditorCommand(e,i,o){const a=this.runEditorCommand(e,i,o);return a||!0}}var CoreNavigationCommands;(function(s){class e extends CoreEditorCommand{constructor(rt){super(rt),this._minimalReveal=rt.minimalReveal,this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,[CursorMoveCommands.moveTo(rt,rt.getPrimaryCursorState(),this._inSelectionMode,at.position,at.viewPosition)])&&rt.revealPrimaryCursor(at.source,!0,this._minimalReveal)}}s.MoveTo=registerEditorCommand(new e({id:"_moveTo",minimalReveal:!0,inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=registerEditorCommand(new e({id:"_moveToSelect",minimalReveal:!1,inSelectionMode:!0,precondition:void 0}));class i extends CoreEditorCommand{runCoreEditorCommand(rt,at){rt.model.pushStackElement();const lt=this._getColumnSelectResult(rt,rt.getPrimaryCursorState(),rt.getCursorColumnSelectData(),at);rt.setCursorStates(at.source,3,lt.viewStates.map(gt=>CursorState.fromViewState(gt))),rt.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:lt.fromLineNumber,fromViewVisualColumn:lt.fromVisualColumn,toViewLineNumber:lt.toLineNumber,toViewVisualColumn:lt.toVisualColumn}),lt.reversed?rt.revealTopMostCursor(at.source):rt.revealBottomMostCursor(at.source)}}s.ColumnSelect=registerEditorCommand(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(nt,rt,at,lt){const gt=nt.model.validatePosition(lt.position),ht=nt.coordinatesConverter.validateViewPosition(new Position$1(lt.viewPosition.lineNumber,lt.viewPosition.column),gt),ut=lt.doColumnSelect?at.fromViewLineNumber:ht.lineNumber,ct=lt.doColumnSelect?at.fromViewVisualColumn:lt.mouseColumn-1;return ColumnSelection.columnSelect(nt.cursorConfig,nt,ut,ct,ht.lineNumber,lt.mouseColumn-1)}}),s.CursorColumnSelectLeft=registerEditorCommand(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(nt,rt,at,lt){return ColumnSelection.columnSelectLeft(nt.cursorConfig,nt,at)}}),s.CursorColumnSelectRight=registerEditorCommand(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(nt,rt,at,lt){return ColumnSelection.columnSelectRight(nt.cursorConfig,nt,at)}});class o extends i{constructor(rt){super(rt),this._isPaged=rt.isPaged}_getColumnSelectResult(rt,at,lt,gt){return ColumnSelection.columnSelectUp(rt.cursorConfig,rt,lt,this._isPaged)}}s.CursorColumnSelectUp=registerEditorCommand(new o({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=registerEditorCommand(new o({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3595,linux:{primary:0}}}));class a extends i{constructor(rt){super(rt),this._isPaged=rt.isPaged}_getColumnSelectResult(rt,at,lt,gt){return ColumnSelection.columnSelectDown(rt.cursorConfig,rt,lt,this._isPaged)}}s.CursorColumnSelectDown=registerEditorCommand(new a({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=registerEditorCommand(new a({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3596,linux:{primary:0}}}));class c extends CoreEditorCommand{constructor(){super({id:"cursorMove",precondition:void 0,description:CursorMove.description})}runCoreEditorCommand(rt,at){const lt=CursorMove.parse(at);!lt||this._runCursorMove(rt,at.source,lt)}_runCursorMove(rt,at,lt){rt.model.pushStackElement(),rt.setCursorStates(at,3,c._move(rt,rt.getCursorStates(),lt)),rt.revealPrimaryCursor(at,!0)}static _move(rt,at,lt){const gt=lt.select,ht=lt.value;switch(lt.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return CursorMoveCommands.simpleMove(rt,at,lt.direction,gt,ht,lt.unit);case 11:case 13:case 12:case 14:return CursorMoveCommands.viewportMove(rt,at,lt.direction,gt,ht);default:return null}}}s.CursorMoveImpl=c,s.CursorMove=registerEditorCommand(new c);class d extends CoreEditorCommand{constructor(rt){super(rt),this._staticArgs=rt.args}runCoreEditorCommand(rt,at){let lt=this._staticArgs;this._staticArgs.value===-1&&(lt={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:at.pageSize||rt.cursorConfig.pageSize}),rt.model.pushStackElement(),rt.setCursorStates(at.source,3,CursorMoveCommands.simpleMove(rt,rt.getCursorStates(),lt.direction,lt.select,lt.value,lt.unit)),rt.revealPrimaryCursor(at.source,!0)}}s.CursorLeft=registerEditorCommand(new d({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=registerEditorCommand(new d({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1039}})),s.CursorRight=registerEditorCommand(new d({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=registerEditorCommand(new d({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1041}})),s.CursorUp=registerEditorCommand(new d({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=registerEditorCommand(new d({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=registerEditorCommand(new d({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:11}})),s.CursorPageUpSelect=registerEditorCommand(new d({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1035}})),s.CursorDown=registerEditorCommand(new d({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=registerEditorCommand(new d({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=registerEditorCommand(new d({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:12}})),s.CursorPageDownSelect=registerEditorCommand(new d({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1036}})),s.CreateCursor=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(nt,rt){let at;rt.wholeLine?at=CursorMoveCommands.line(nt,nt.getPrimaryCursorState(),!1,rt.position,rt.viewPosition):at=CursorMoveCommands.moveTo(nt,nt.getPrimaryCursorState(),!1,rt.position,rt.viewPosition);const lt=nt.getCursorStates();if(lt.length>1){const gt=at.modelState?at.modelState.position:null,ht=at.viewState?at.viewState.position:null;for(let ut=0,ct=lt.length;ut<ct;ut++){const ft=lt[ut];if(!(gt&&!ft.modelState.selection.containsPosition(gt))&&!(ht&&!ft.viewState.selection.containsPosition(ht))){lt.splice(ut,1),nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,lt);return}}}lt.push(at),nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,lt)}}),s.LastCursorMoveToSelect=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(nt,rt){const at=nt.getLastAddedCursorIndex(),lt=nt.getCursorStates(),gt=lt.slice(0);gt[at]=CursorMoveCommands.moveTo(nt,lt[at],!0,rt.position,rt.viewPosition),nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,gt)}});class _ extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,CursorMoveCommands.moveToBeginningOfLine(rt,rt.getCursorStates(),this._inSelectionMode)),rt.revealPrimaryCursor(at.source,!0)}}s.CursorHome=registerEditorCommand(new _({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=registerEditorCommand(new _({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class b extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,this._exec(rt.getCursorStates())),rt.revealPrimaryCursor(at.source,!0)}_exec(rt){const at=[];for(let lt=0,gt=rt.length;lt<gt;lt++){const ht=rt[lt],ut=ht.modelState.position.lineNumber;at[lt]=CursorState.fromModelState(ht.modelState.move(this._inSelectionMode,ut,1,0))}return at}}s.CursorLineStart=registerEditorCommand(new b({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=registerEditorCommand(new b({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:0,mac:{primary:1311}}}));class k extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,CursorMoveCommands.moveToEndOfLine(rt,rt.getCursorStates(),this._inSelectionMode,at.sticky||!1)),rt.revealPrimaryCursor(at.source,!0)}}s.CursorEnd=registerEditorCommand(new k({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:localize("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=registerEditorCommand(new k({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:localize("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class j extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,this._exec(rt,rt.getCursorStates())),rt.revealPrimaryCursor(at.source,!0)}_exec(rt,at){const lt=[];for(let gt=0,ht=at.length;gt<ht;gt++){const ut=at[gt],ct=ut.modelState.position.lineNumber,ft=rt.model.getLineMaxColumn(ct);lt[gt]=CursorState.fromModelState(ut.modelState.move(this._inSelectionMode,ct,ft,0))}return lt}}s.CursorLineEnd=registerEditorCommand(new j({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=registerEditorCommand(new j({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:0,mac:{primary:1315}}}));class _e extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,CursorMoveCommands.moveToBeginningOfBuffer(rt,rt.getCursorStates(),this._inSelectionMode)),rt.revealPrimaryCursor(at.source,!0)}}s.CursorTop=registerEditorCommand(new _e({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=registerEditorCommand(new _e({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3086,mac:{primary:3088}}}));class et extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,CursorMoveCommands.moveToEndOfBuffer(rt,rt.getCursorStates(),this._inSelectionMode)),rt.revealPrimaryCursor(at.source,!0)}}s.CursorBottom=registerEditorCommand(new et({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=registerEditorCommand(new et({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:3085,mac:{primary:3090}}}));class tt extends CoreEditorCommand{constructor(){super({id:"editorScroll",precondition:void 0,description:EditorScroll_.description})}runCoreEditorCommand(rt,at){const lt=EditorScroll_.parse(at);!lt||this._runEditorScroll(rt,at.source,lt)}_runEditorScroll(rt,at,lt){const gt=this._computeDesiredScrollTop(rt,lt);if(lt.revealCursor){const ht=rt.getCompletelyVisibleViewRangeAtScrollTop(gt);rt.setCursorStates(at,3,[CursorMoveCommands.findPositionInViewportIfOutside(rt,rt.getPrimaryCursorState(),ht,lt.select)])}rt.viewLayout.setScrollPosition({scrollTop:gt},0)}_computeDesiredScrollTop(rt,at){if(at.unit===1){const ht=rt.getCompletelyVisibleViewRange(),ut=rt.coordinatesConverter.convertViewRangeToModelRange(ht);let ct;at.direction===1?ct=Math.max(1,ut.startLineNumber-at.value):ct=Math.min(rt.model.getLineCount(),ut.startLineNumber+at.value);const ft=rt.coordinatesConverter.convertModelPositionToViewPosition(new Position$1(ct,1));return rt.viewLayout.getVerticalOffsetForLineNumber(ft.lineNumber)}if(at.unit===5){let ht=0;return at.direction===2&&(ht=rt.model.getLineCount()-rt.cursorConfig.pageSize),rt.viewLayout.getVerticalOffsetForLineNumber(ht)}let lt;at.unit===3?lt=rt.cursorConfig.pageSize*at.value:at.unit===4?lt=Math.round(rt.cursorConfig.pageSize/2)*at.value:lt=at.value;const gt=(at.direction===1?-1:1)*lt;return rt.viewLayout.getCurrentScrollTop()+gt*rt.cursorConfig.lineHeight}}s.EditorScrollImpl=tt,s.EditorScroll=registerEditorCommand(new tt),s.ScrollLineUp=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageUp=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),s.ScrollEditorTop=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:1,unit:5,value:1,revealCursor:!1,select:!1})}}),s.ScrollLineDown=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),s.ScrollPageDown=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}}),s.ScrollEditorBottom=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus}})}runCoreEditorCommand(nt,rt){s.EditorScroll._runEditorScroll(nt,rt.source,{direction:2,unit:5,value:1,revealCursor:!1,select:!1})}});class it extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,[CursorMoveCommands.word(rt,rt.getPrimaryCursorState(),this._inSelectionMode,at.position)]),rt.revealPrimaryCursor(at.source,!0)}}s.WordSelect=registerEditorCommand(new it({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=registerEditorCommand(new it({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(nt,rt){const at=nt.getLastAddedCursorIndex(),lt=nt.getCursorStates(),gt=lt.slice(0),ht=lt[at];gt[at]=CursorMoveCommands.word(nt,ht,ht.modelState.hasSelection(),rt.position),nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,gt)}});class st extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){rt.model.pushStackElement(),rt.setCursorStates(at.source,3,[CursorMoveCommands.line(rt,rt.getPrimaryCursorState(),this._inSelectionMode,at.position,at.viewPosition)]),rt.revealPrimaryCursor(at.source,!1)}}s.LineSelect=registerEditorCommand(new st({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=registerEditorCommand(new st({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class ot extends CoreEditorCommand{constructor(rt){super(rt),this._inSelectionMode=rt.inSelectionMode}runCoreEditorCommand(rt,at){const lt=rt.getLastAddedCursorIndex(),gt=rt.getCursorStates(),ht=gt.slice(0);ht[lt]=CursorMoveCommands.line(rt,gt[lt],this._inSelectionMode,at.position,at.viewPosition),rt.model.pushStackElement(),rt.setCursorStates(at.source,3,ht)}}s.LastCursorLineSelect=registerEditorCommand(new ot({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=registerEditorCommand(new ot({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"cancelSelection",precondition:EditorContextKeys.hasNonEmptySelection,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(nt,rt){nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,[CursorMoveCommands.cancelSelection(nt,nt.getPrimaryCursorState())]),nt.revealPrimaryCursor(rt.source,!0)}}),s.RemoveSecondaryCursors=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"removeSecondaryCursors",precondition:EditorContextKeys.hasMultipleSelections,kbOpts:{weight:CORE_WEIGHT+1,kbExpr:EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(nt,rt){nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,[nt.getPrimaryCursorState()]),nt.revealPrimaryCursor(rt.source,!0),status(localize("removedCursor","Removed secondary cursors"))}}),s.RevealLine=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"revealLine",precondition:void 0,description:RevealLine_.description})}runCoreEditorCommand(nt,rt){const at=rt,lt=at.lineNumber||0;let gt=typeof lt=="number"?lt+1:parseInt(lt)+1;gt<1&&(gt=1);const ht=nt.model.getLineCount();gt>ht&&(gt=ht);const ut=new Range$2(gt,1,gt,nt.model.getLineMaxColumn(gt));let ct=0;if(at.at)switch(at.at){case RevealLine_.RawAtArgument.Top:ct=3;break;case RevealLine_.RawAtArgument.Center:ct=1;break;case RevealLine_.RawAtArgument.Bottom:ct=4;break}const ft=nt.coordinatesConverter.convertModelRangeToViewRange(ut);nt.revealRange(rt.source,!1,ft,ct,0)}}),s.SelectAll=new class extends EditorOrNativeTextInputCommand{constructor(){super(SelectAllCommand)}runDOMCommand(){isFirefox&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(nt,rt,at){const lt=rt._getViewModel();!lt||this.runCoreEditorCommand(lt,at)}runCoreEditorCommand(nt,rt){nt.model.pushStackElement(),nt.setCursorStates("keyboard",3,[CursorMoveCommands.selectAll(nt,nt.getPrimaryCursorState())])}},s.SetSelection=registerEditorCommand(new class extends CoreEditorCommand{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(nt,rt){nt.model.pushStackElement(),nt.setCursorStates(rt.source,3,[CursorState.fromModelSelection(rt.selection)])}})})(CoreNavigationCommands||(CoreNavigationCommands={}));const columnSelectionCondition=ContextKeyExpr.and(EditorContextKeys.textInputFocus,EditorContextKeys.columnSelection);function registerColumnSelection(s,e){KeybindingsRegistry.registerKeybindingRule({id:s,primary:e,when:columnSelectionCondition,weight:CORE_WEIGHT+1})}registerColumnSelection(CoreNavigationCommands.CursorColumnSelectLeft.id,1039);registerColumnSelection(CoreNavigationCommands.CursorColumnSelectRight.id,1041);registerColumnSelection(CoreNavigationCommands.CursorColumnSelectUp.id,1040);registerColumnSelection(CoreNavigationCommands.CursorColumnSelectPageUp.id,1035);registerColumnSelection(CoreNavigationCommands.CursorColumnSelectDown.id,1042);registerColumnSelection(CoreNavigationCommands.CursorColumnSelectPageDown.id,1036);function registerCommand$1(s){return s.register(),s}var CoreEditingCommands;(function(s){class e extends EditorCommand{runEditorCommand(o,a,c){const d=a._getViewModel();!d||this.runCoreEditingCommand(a,d,c||{})}}s.CoreEditingCommand=e,s.LineBreakInsert=registerEditorCommand(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:EditorContextKeys.writable,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(i,o,a){i.pushUndoStop(),i.executeCommands(this.id,TypeOperations.lineBreakInsert(o.cursorConfig,o.model,o.getCursorStates().map(c=>c.modelState.selection)))}}),s.Outdent=registerEditorCommand(new class extends e{constructor(){super({id:"outdent",precondition:EditorContextKeys.writable,kbOpts:{weight:CORE_WEIGHT,kbExpr:ContextKeyExpr.and(EditorContextKeys.editorTextFocus,EditorContextKeys.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(i,o,a){i.pushUndoStop(),i.executeCommands(this.id,TypeOperations.outdent(o.cursorConfig,o.model,o.getCursorStates().map(c=>c.modelState.selection))),i.pushUndoStop()}}),s.Tab=registerEditorCommand(new class extends e{constructor(){super({id:"tab",precondition:EditorContextKeys.writable,kbOpts:{weight:CORE_WEIGHT,kbExpr:ContextKeyExpr.and(EditorContextKeys.editorTextFocus,EditorContextKeys.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(i,o,a){i.pushUndoStop(),i.executeCommands(this.id,TypeOperations.tab(o.cursorConfig,o.model,o.getCursorStates().map(c=>c.modelState.selection))),i.pushUndoStop()}}),s.DeleteLeft=registerEditorCommand(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(i,o,a){const[c,d]=DeleteOperations.deleteLeft(o.getPrevEditOperationType(),o.cursorConfig,o.model,o.getCursorStates().map(_=>_.modelState.selection),o.getCursorAutoClosedCharacters());c&&i.pushUndoStop(),i.executeCommands(this.id,d),o.setPrevEditOperationType(2)}}),s.DeleteRight=registerEditorCommand(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:CORE_WEIGHT,kbExpr:EditorContextKeys.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(i,o,a){const[c,d]=DeleteOperations.deleteRight(o.getPrevEditOperationType(),o.cursorConfig,o.model,o.getCursorStates().map(_=>_.modelState.selection));c&&i.pushUndoStop(),i.executeCommands(this.id,d),o.setPrevEditOperationType(3)}}),s.Undo=new class extends EditorOrNativeTextInputCommand{constructor(){super(UndoCommand)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(i,o,a){if(!(!o.hasModel()||o.getOption(83)===!0))return o.getModel().undo()}},s.Redo=new class extends EditorOrNativeTextInputCommand{constructor(){super(RedoCommand)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(i,o,a){if(!(!o.hasModel()||o.getOption(83)===!0))return o.getModel().redo()}}})(CoreEditingCommands||(CoreEditingCommands={}));class EditorHandlerCommand extends Command{constructor(e,i,o){super({id:e,precondition:void 0,description:o}),this._handlerId=i}runCommand(e,i){const o=e.get(ICodeEditorService).getFocusedCodeEditor();!o||o.trigger("keyboard",this._handlerId,i)}}function registerOverwritableCommand(s,e){registerCommand$1(new EditorHandlerCommand("default:"+s,s)),registerCommand$1(new EditorHandlerCommand(s,s,e))}registerOverwritableCommand("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});registerOverwritableCommand("replacePreviousChar");registerOverwritableCommand("compositionType");registerOverwritableCommand("compositionStart");registerOverwritableCommand("compositionEnd");registerOverwritableCommand("paste");registerOverwritableCommand("cut");class ViewController{constructor(e,i,o,a){this.configuration=e,this.viewModel=i,this.userInputEvents=o,this.commandDelegate=a}paste(e,i,o,a){this.commandDelegate.paste(e,i,o,a)}type(e){this.commandDelegate.type(e)}compositionType(e,i,o,a){this.commandDelegate.compositionType(e,i,o,a)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const i=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<i?new Position$1(e.lineNumber,i):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(72)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const i=this.configuration.options,o=isLinux&&i.get(98),a=i.get(18);e.middleButton&&!o?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):a?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,i,o){e=this._validateViewColumn(e),CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:i,doColumnSelect:o})}_createCursor(e,i){e=this._validateViewColumn(e),CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:i})}_lastCursorMoveToSelect(e){CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class ViewUserInputEvents{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var i;(i=this.onKeyDown)===null||i===void 0||i.call(this,e)}emitKeyUp(e){var i;(i=this.onKeyUp)===null||i===void 0||i.call(this,e)}emitContextMenu(e){var i;(i=this.onContextMenu)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var i;(i=this.onMouseMove)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var i;(i=this.onMouseLeave)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var i;(i=this.onMouseDown)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var i;(i=this.onMouseUp)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var i;(i=this.onMouseDrag)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var i;(i=this.onMouseDrop)===null||i===void 0||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)===null||e===void 0||e.call(this)}emitMouseWheel(e){var i;(i=this.onMouseWheel)===null||i===void 0||i.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return ViewUserInputEvents.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,i){const o=Object.assign({},e);return o.position&&(o.position=i.convertViewPositionToModelPosition(o.position)),o.range&&(o.range=i.convertViewRangeToModelRange(o.range)),o}}var _a$5;class RenderedLinesCollection{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,i){this._lines=i,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const i=e-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[i]}onLinesDeleted(e,i){if(this.getCount()===0)return null;const o=this.getStartLineNumber(),a=this.getEndLineNumber();if(i<o){const b=i-e+1;return this._rendLineNumberStart-=b,null}if(e>a)return null;let c=0,d=0;for(let b=o;b<=a;b++){const k=b-this._rendLineNumberStart;e<=b&&b<=i&&(d===0?(c=k,d=1):d++)}if(e<o){let b=0;i<o?b=i-e+1:b=o-e,this._rendLineNumberStart-=b}return this._lines.splice(c,d)}onLinesChanged(e,i){const o=e+i-1;if(this.getCount()===0)return!1;const a=this.getStartLineNumber(),c=this.getEndLineNumber();let d=!1;for(let _=e;_<=o;_++)_>=a&&_<=c&&(this._lines[_-this._rendLineNumberStart].onContentChanged(),d=!0);return d}onLinesInserted(e,i){if(this.getCount()===0)return null;const o=i-e+1,a=this.getStartLineNumber(),c=this.getEndLineNumber();if(e<=a)return this._rendLineNumberStart+=o,null;if(e>c)return null;if(o+e>c)return this._lines.splice(e-this._rendLineNumberStart,c-e+1);const d=[];for(let _e=0;_e<o;_e++)d[_e]=this._createLine();const _=e-this._rendLineNumberStart,b=this._lines.slice(0,_),k=this._lines.slice(_,this._lines.length-o),j=this._lines.slice(this._lines.length-o,this._lines.length);return this._lines=b.concat(d).concat(k),j}onTokensChanged(e){if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),o=this.getEndLineNumber();let a=!1;for(let c=0,d=e.length;c<d;c++){const _=e[c];if(_.toLineNumber<i||_.fromLineNumber>o)continue;const b=Math.max(i,_.fromLineNumber),k=Math.min(o,_.toLineNumber);for(let j=b;j<=k;j++){const _e=j-this._rendLineNumberStart;this._lines[_e].onTokensChanged(),a=!0}}return a}}class VisibleLinesCollection{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new RenderedLinesCollection(()=>this._host.createVisibleLine())}_createDomNode(){const e=createFastDomNode(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(133)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const i=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(i)for(let o=0,a=i.length;o<a;o++){const c=i[o].getDomNode();c&&this.domNode.domNode.removeChild(c)}return!0}onLinesInserted(e){const i=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(i)for(let o=0,a=i.length;o<a;o++){const c=i[o].getDomNode();c&&this.domNode.domNode.removeChild(c)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const i=this._linesCollection._get(),o=new ViewLayerRenderer(this.domNode.domNode,this._host,e),a={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},c=o.render(a,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(c.rendLineNumberStart,c.lines)}}class ViewLayerRenderer{constructor(e,i,o){this.domNode=e,this.host=i,this.viewportData=o}render(e,i,o,a){const c={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(c.rendLineNumberStart+c.linesLength-1<i||o<c.rendLineNumberStart){c.rendLineNumberStart=i,c.linesLength=o-i+1,c.lines=[];for(let d=i;d<=o;d++)c.lines[d-i]=this.host.createVisibleLine();return this._finishRendering(c,!0,a),c}if(this._renderUntouchedLines(c,Math.max(i-c.rendLineNumberStart,0),Math.min(o-c.rendLineNumberStart,c.linesLength-1),a,i),c.rendLineNumberStart>i){const d=i,_=Math.min(o,c.rendLineNumberStart-1);d<=_&&(this._insertLinesBefore(c,d,_,a,i),c.linesLength+=_-d+1)}else if(c.rendLineNumberStart<i){const d=Math.min(c.linesLength,i-c.rendLineNumberStart);d>0&&(this._removeLinesBefore(c,d),c.linesLength-=d)}if(c.rendLineNumberStart=i,c.rendLineNumberStart+c.linesLength-1<o){const d=c.rendLineNumberStart+c.linesLength,_=o;d<=_&&(this._insertLinesAfter(c,d,_,a,i),c.linesLength+=_-d+1)}else if(c.rendLineNumberStart+c.linesLength-1>o){const d=Math.max(0,o-c.rendLineNumberStart+1),b=c.linesLength-1-d+1;b>0&&(this._removeLinesAfter(c,b),c.linesLength-=b)}return this._finishRendering(c,!1,a),c}_renderUntouchedLines(e,i,o,a,c){const d=e.rendLineNumberStart,_=e.lines;for(let b=i;b<=o;b++){const k=d+b;_[b].layoutLine(k,a[k-c])}}_insertLinesBefore(e,i,o,a,c){const d=[];let _=0;for(let b=i;b<=o;b++)d[_++]=this.host.createVisibleLine();e.lines=d.concat(e.lines)}_removeLinesBefore(e,i){for(let o=0;o<i;o++){const a=e.lines[o].getDomNode();a&&this.domNode.removeChild(a)}e.lines.splice(0,i)}_insertLinesAfter(e,i,o,a,c){const d=[];let _=0;for(let b=i;b<=o;b++)d[_++]=this.host.createVisibleLine();e.lines=e.lines.concat(d)}_removeLinesAfter(e,i){const o=e.linesLength-i;for(let a=0;a<i;a++){const c=e.lines[o+a].getDomNode();c&&this.domNode.removeChild(c)}e.lines.splice(o,i)}_finishRenderingNewLines(e,i,o,a){ViewLayerRenderer._ttPolicy&&(o=ViewLayerRenderer._ttPolicy.createHTML(o));const c=this.domNode.lastChild;i||!c?this.domNode.innerHTML=o:c.insertAdjacentHTML("afterend",o);let d=this.domNode.lastChild;for(let _=e.linesLength-1;_>=0;_--){const b=e.lines[_];a[_]&&(b.setDomNode(d),d=d.previousSibling)}}_finishRenderingInvalidLines(e,i,o){const a=document.createElement("div");ViewLayerRenderer._ttPolicy&&(i=ViewLayerRenderer._ttPolicy.createHTML(i)),a.innerHTML=i;for(let c=0;c<e.linesLength;c++){const d=e.lines[c];if(o[c]){const _=a.firstChild,b=d.getDomNode();b.parentNode.replaceChild(_,b),d.setDomNode(_)}}}_finishRendering(e,i,o){const a=ViewLayerRenderer._sb,c=e.linesLength,d=e.lines,_=e.rendLineNumberStart,b=[];{a.reset();let k=!1;for(let j=0;j<c;j++){const _e=d[j];b[j]=!1,!(_e.getDomNode()||!_e.renderLine(j+_,o[j],this.viewportData,a))&&(b[j]=!0,k=!0)}k&&this._finishRenderingNewLines(e,i,a.build(),b)}{a.reset();let k=!1;const j=[];for(let _e=0;_e<c;_e++){const et=d[_e];j[_e]=!1,!(b[_e]||!et.renderLine(_e+_,o[_e],this.viewportData,a))&&(j[_e]=!0,k=!0)}k&&this._finishRenderingInvalidLines(e,a.build(),j)}}}ViewLayerRenderer._ttPolicy=(_a$5=window.trustedTypes)===null||_a$5===void 0?void 0:_a$5.createPolicy("editorViewLayer",{createHTML:s=>s});ViewLayerRenderer._sb=createStringBuilder(1e5);class ViewOverlays extends ViewPart{constructor(e){super(e),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,i=this._dynamicOverlays.length;e<i;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,i=this._dynamicOverlays.length;e<i;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new ViewOverlayLine(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let a=i;a<=o;a++)this._visibleLines.getVisibleLine(a).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const i=this._dynamicOverlays.filter(o=>o.shouldRender());for(let o=0,a=i.length;o<a;o++){const c=i[o];c.prepareRender(e),c.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class ViewOverlayLine{constructor(e,i){this._configuration=e,this._lineHeight=this._configuration.options.get(61),this._dynamicOverlays=i,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=createFastDomNode(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(61)}renderLine(e,i,o,a){let c="";for(let d=0,_=this._dynamicOverlays.length;d<_;d++){const b=this._dynamicOverlays[d];c+=b.render(o.startLineNumber,e)}return this._renderedContent===c?!1:(this._renderedContent=c,a.appendASCIIString('<div style="position:absolute;top:'),a.appendASCIIString(String(i)),a.appendASCIIString("px;width:100%;height:"),a.appendASCIIString(String(this._lineHeight)),a.appendASCIIString('px;">'),a.appendASCIIString(c),a.appendASCIIString("</div>"),!0)}layoutLine(e,i){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(this._lineHeight))}}class ContentViewOverlays extends ViewOverlays{constructor(e){super(e);const o=this._context.configuration.options.get(133);this._contentWidth=o.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const o=this._context.configuration.options.get(133);return this._contentWidth=o.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class MarginViewOverlays extends ViewOverlays{constructor(e){super(e);const i=this._context.configuration.options,o=i.get(133);this._contentLeft=o.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),applyFontInfo(this.domNode,i.get(46))}onConfigurationChanged(e){const i=this._context.configuration.options;applyFontInfo(this.domNode,i.get(46));const o=i.get(133);return this._contentLeft=o.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const i=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}class Coordinate{constructor(e,i){this._coordinateBrand=void 0,this.top=e,this.left=i}}class ViewContentWidgets extends ViewPart{constructor(e,i){super(e),this._viewDomNode=i,this._widgets={},this.domNode=createFastDomNode(document.createElement("div")),PartFingerprints.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=createFastDomNode(document.createElement("div")),PartFingerprints.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const i=Object.keys(this._widgets);for(const o of i)this._widgets[o].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const i=Object.keys(this._widgets);for(const o of i)this._widgets[o].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const i=new Widget$1(this._context,this._viewDomNode,e);this._widgets[i.id]=i,i.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(i.domNode):this.domNode.appendChild(i.domNode),this.setShouldRender()}setWidgetPosition(e,i,o,a){this._widgets[e.getId()].setPosition(i,o,a),this.setShouldRender()}removeWidget(e){const i=e.getId();if(this._widgets.hasOwnProperty(i)){const o=this._widgets[i];delete this._widgets[i];const a=o.domNode.domNode;a.parentNode.removeChild(a),a.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const i=Object.keys(this._widgets);for(const o of i)this._widgets[o].onBeforeRender(e)}prepareRender(e){const i=Object.keys(this._widgets);for(const o of i)this._widgets[o].prepareRender(e)}render(e){const i=Object.keys(this._widgets);for(const o of i)this._widgets[o].render(e)}}class Widget$1{constructor(e,i,o){this._context=e,this._viewDomNode=i,this._actual=o,this.domNode=createFastDomNode(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const a=this._context.configuration.options,c=a.get(133);this._fixedOverflowWidgets=a.get(38),this._contentWidth=c.contentWidth,this._contentLeft=c.contentLeft,this._lineHeight=a.get(61),this._range=null,this._viewRange=null,this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const i=this._context.configuration.options;if(this._lineHeight=i.get(61),e.hasChanged(133)){const o=i.get(133);this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range,this._affinity)}_setPosition(e,i){var o;if(this._range=e,this._viewRange=null,this._affinity=i,this._range){const a=this._context.viewModel.model.validateRange(this._range);(this._context.viewModel.coordinatesConverter.modelPositionIsVisible(a.getStartPosition())||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(a.getEndPosition()))&&(this._viewRange=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(a,(o=this._affinity)!==null&&o!==void 0?o:void 0))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.offsetWidth||document.body.offsetWidth:this._contentWidth}setPosition(e,i,o){this._setPosition(e,o),this._preference=i,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,i,o,a,c){const d=e.top,_=d,b=i.top+this._lineHeight,k=c.viewportHeight-b,j=d-a,_e=_>=a,et=b,tt=k>=a;let it=e.left,st=i.left;return it+o>c.scrollLeft+c.viewportWidth&&(it=c.scrollLeft+c.viewportWidth-o),st+o>c.scrollLeft+c.viewportWidth&&(st=c.scrollLeft+c.viewportWidth-o),it<c.scrollLeft&&(it=c.scrollLeft),st<c.scrollLeft&&(st=c.scrollLeft),{fitsAbove:_e,aboveTop:j,aboveLeft:it,fitsBelow:tt,belowTop:et,belowLeft:st}}_layoutHorizontalSegmentInPage(e,i,o,a){const c=Math.max(0,i.left-a),d=Math.min(i.left+i.width+a,e.width);let _=i.left+o-StandardWindow.scrollX;if(_+a>d){const b=_-(d-a);_-=b,o-=b}if(_<c){const b=_-c;_-=b,o-=b}return[o,_]}_layoutBoxInPage(e,i,o,a,c){const d=e.top-a,_=i.top+this._lineHeight,b=getDomNodePagePosition(this._viewDomNode.domNode),k=b.top+d-StandardWindow.scrollY,j=b.top+_-StandardWindow.scrollY,_e=getClientArea(document.body),[et,tt]=this._layoutHorizontalSegmentInPage(_e,b,e.left-c.scrollLeft+this._contentLeft,o),[it,st]=this._layoutHorizontalSegmentInPage(_e,b,i.left-c.scrollLeft+this._contentLeft,o),ot=22,nt=22,rt=k>=ot,at=j+a<=_e.height-nt;return this._fixedOverflowWidgets?{fitsAbove:rt,aboveTop:Math.max(k,ot),aboveLeft:tt,fitsBelow:at,belowTop:j,belowLeft:st}:{fitsAbove:rt,aboveTop:d,aboveLeft:et,fitsBelow:at,belowTop:_,belowLeft:it}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Coordinate(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const i=e.linesVisibleRangesForRange(this._viewRange,!1);if(!i||i.length===0)return[null,null];let o=i[0],a=i[0];for(const _e of i)_e.lineNumber<o.lineNumber&&(o=_e),_e.lineNumber>a.lineNumber&&(a=_e);let c=1073741824;for(const _e of o.ranges)_e.left<c&&(c=_e.left);let d=1073741824;for(const _e of a.ranges)_e.left<d&&(d=_e.left);const _=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.scrollTop,b=new Coordinate(_,c),k=e.getVerticalOffsetForLineNumber(a.lineNumber)-e.scrollTop,j=new Coordinate(k,d);return[b,j]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[i,o]=this._getTopAndBottomLeft(e);if(!i||!o)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let c=null;if(typeof this._actual.beforeRender=="function"&&(c=safeInvoke(this._actual.beforeRender,this._actual)),c)this._cachedDomNodeOffsetWidth=c.width,this._cachedDomNodeOffsetHeight=c.height;else{const _=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(_.width),this._cachedDomNodeOffsetHeight=Math.round(_.height)}}let a;this.allowEditorOverflow?a=this._layoutBoxInPage(i,o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):a=this._layoutBoxInViewport(i,o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let c=1;c<=2;c++)for(const d of this._preference)if(d===1){if(!a)return null;if(c===2||a.fitsAbove)return{coordinate:new Coordinate(a.aboveTop,a.aboveLeft),position:1}}else if(d===2){if(!a)return null;if(c===2||a.fitsBelow)return{coordinate:new Coordinate(a.belowTop,a.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(i),position:0}:{coordinate:i,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&safeInvoke(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&safeInvoke(this._actual.afterRender,this._actual,this._renderData.position)}}function safeInvoke(s,e,...i){try{return s.call(e,...i)}catch{return null}}const currentLineHighlight="";class AbstractLineHighlightOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;const i=this._context.configuration.options,o=i.get(133);this._lineHeight=i.get(61),this._renderLineHighlight=i.get(87),this._renderLineHighlightOnlyWhenFocus=i.get(88),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Selection$1(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const i=this._selections.map(a=>a.positionLineNumber);i.sort((a,c)=>a-c),equals$1(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const o=this._selections.every(a=>a.isEmpty());return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(133);return this._lineHeight=i.get(61),this._renderLineHighlight=i.get(87),this._renderLineHighlightOnlyWhenFocus=i.get(88),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const i=this._renderOne(e),o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,c=this._cursorLineNumbers.length;let d=0;const _=[];for(let b=o;b<=a;b++){const k=b-o;for(;d<c&&this._cursorLineNumbers[d]<b;)d++;d<c&&this._cursorLineNumbers[d]===b?_[k]=i:_[k]=""}this._renderData=_}render(e,i){if(!this._renderData)return"";const o=i-e;return o>=this._renderData.length?"":this._renderData[o]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class CurrentLineHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class CurrentLineMarginHighlightOverlay extends AbstractLineHighlightOverlay{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}registerThemingParticipant((s,e)=>{const i=s.getColor(editorLineHighlight);if(i&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||s.defines(editorLineHighlightBorder)){const o=s.getColor(editorLineHighlightBorder);o&&(e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${o}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${o}; }`),isHighContrast(s.type)&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});const decorations="";class DecorationsOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e;const i=this._context.configuration.options;this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options;return this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const i=e.getDecorationsInViewport();let o=[],a=0;for(let b=0,k=i.length;b<k;b++){const j=i[b];j.options.className&&(o[a++]=j)}o=o.sort((b,k)=>{if(b.options.zIndex<k.options.zIndex)return-1;if(b.options.zIndex>k.options.zIndex)return 1;const j=b.options.className,_e=k.options.className;return j<_e?-1:j>_e?1:Range$2.compareRangesUsingStarts(b.range,k.range)});const c=e.visibleRange.startLineNumber,d=e.visibleRange.endLineNumber,_=[];for(let b=c;b<=d;b++){const k=b-c;_[k]=""}this._renderWholeLineDecorations(e,o,_),this._renderNormalDecorations(e,o,_),this._renderResult=_}_renderWholeLineDecorations(e,i,o){const a=String(this._lineHeight),c=e.visibleRange.startLineNumber,d=e.visibleRange.endLineNumber;for(let _=0,b=i.length;_<b;_++){const k=i[_];if(!k.options.isWholeLine)continue;const j='<div class="cdr '+k.options.className+'" style="left:0;width:100%;height:'+a+'px;"></div>',_e=Math.max(k.range.startLineNumber,c),et=Math.min(k.range.endLineNumber,d);for(let tt=_e;tt<=et;tt++){const it=tt-c;o[it]+=j}}}_renderNormalDecorations(e,i,o){const a=String(this._lineHeight),c=e.visibleRange.startLineNumber;let d=null,_=!1,b=null;for(let k=0,j=i.length;k<j;k++){const _e=i[k];if(_e.options.isWholeLine)continue;const et=_e.options.className,tt=Boolean(_e.options.showIfCollapsed);let it=_e.range;if(tt&&it.endColumn===1&&it.endLineNumber!==it.startLineNumber&&(it=new Range$2(it.startLineNumber,it.startColumn,it.endLineNumber-1,this._context.viewModel.getLineMaxColumn(it.endLineNumber-1))),d===et&&_===tt&&Range$2.areIntersectingOrTouching(b,it)){b=Range$2.plusRange(b,it);continue}d!==null&&this._renderNormalDecoration(e,b,d,_,a,c,o),d=et,_=tt,b=it}d!==null&&this._renderNormalDecoration(e,b,d,_,a,c,o)}_renderNormalDecoration(e,i,o,a,c,d,_){const b=e.linesVisibleRangesForRange(i,o==="findMatch");if(!!b)for(let k=0,j=b.length;k<j;k++){const _e=b[k];if(_e.outsideRenderedLine)continue;const et=_e.lineNumber-d;if(a&&_e.ranges.length===1){const tt=_e.ranges[0];if(tt.width<this._typicalHalfwidthCharacterWidth){const it=Math.round(tt.left+tt.width/2),st=Math.max(0,Math.round(it-this._typicalHalfwidthCharacterWidth/2));_e.ranges[0]=new HorizontalRange(st,this._typicalHalfwidthCharacterWidth)}}for(let tt=0,it=_e.ranges.length;tt<it;tt++){const st=_e.ranges[tt],ot='<div class="cdr '+o+'" style="left:'+String(st.left)+"px;width:"+String(st.width)+"px;height:"+c+'px;"></div>';_[et]+=ot}}}render(e,i){if(!this._renderResult)return"";const o=i-e;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}class Widget extends Disposable{onclick(e,i){this._register(addDisposableListener(e,EventType$1.CLICK,o=>i(new StandardMouseEvent(o))))}onmousedown(e,i){this._register(addDisposableListener(e,EventType$1.MOUSE_DOWN,o=>i(new StandardMouseEvent(o))))}onmouseover(e,i){this._register(addDisposableListener(e,EventType$1.MOUSE_OVER,o=>i(new StandardMouseEvent(o))))}onmouseleave(e,i){this._register(addDisposableListener(e,EventType$1.MOUSE_LEAVE,o=>i(new StandardMouseEvent(o))))}onkeydown(e,i){this._register(addDisposableListener(e,EventType$1.KEY_DOWN,o=>i(new StandardKeyboardEvent(o))))}onkeyup(e,i){this._register(addDisposableListener(e,EventType$1.KEY_UP,o=>i(new StandardKeyboardEvent(o))))}oninput(e,i){this._register(addDisposableListener(e,EventType$1.INPUT,i))}onblur(e,i){this._register(addDisposableListener(e,EventType$1.BLUR,i))}onfocus(e,i){this._register(addDisposableListener(e,EventType$1.FOCUS,i))}ignoreGesture(e){Gesture.ignoreTarget(e)}}const ARROW_IMG_SIZE=11;class ScrollbarArrow extends Widget{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=ARROW_IMG_SIZE+"px",this.domNode.style.height=ARROW_IMG_SIZE+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new GlobalPointerMoveMonitor),this._register(addStandardDisposableListener(this.bgDomNode,EventType$1.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._register(addStandardDisposableListener(this.domNode,EventType$1.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._pointerdownRepeatTimer=this._register(new IntervalTimer),this._pointerdownScheduleRepeatTimer=this._register(new TimeoutTimer)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const i=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24)};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(i,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class ScrollbarVisibilityController extends Disposable{constructor(e,i,o){super(),this._visibility=e,this._visibleClassName=i,this._invisibleClassName=o,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new TimeoutTimer)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)===null||e===void 0||e.setClassName(this._visibleClassName)},0))}_hide(e){var i;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(i=this._domNode)===null||i===void 0||i.setClassName(this._invisibleClassName+(e?" fade":"")))}}const POINTER_DRAG_RESET_DISTANCE$1=140;class AbstractScrollbar extends Widget{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ScrollbarVisibilityController(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new GlobalPointerMoveMonitor),this._shouldRender=!0,this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(addDisposableListener(this.domNode.domNode,EventType$1.POINTER_DOWN,i=>this._domNodePointerDown(i)))}_createArrow(e){const i=this._register(new ScrollbarArrow(e));this.domNode.domNode.appendChild(i.bgDomNode),this.domNode.domNode.appendChild(i.domNode)}_createSlider(e,i,o,a){this.slider=createFastDomNode(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(i),typeof o=="number"&&this.slider.setWidth(o),typeof a=="number"&&this.slider.setHeight(a),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(addDisposableListener(this.slider.domNode,EventType$1.POINTER_DOWN,c=>{c.button===0&&(c.preventDefault(),this._sliderPointerDown(c))})),this.onclick(this.slider.domNode,c=>{c.leftButton&&c.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){!this._shouldRender||(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const i=this.domNode.domNode.getClientRects()[0].top,o=i+this._scrollbarState.getSliderPosition(),a=i+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),c=this._sliderPointerPosition(e);o<=c&&c<=a?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let i,o;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")i=e.offsetX,o=e.offsetY;else{const c=getDomNodePagePosition(this.domNode.domNode);i=e.pageX-c.left,o=e.pageY-c.top}const a=this._pointerDownRelativePosition(i,o);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(a):this._scrollbarState.getDesiredScrollPositionFromOffset(a)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const i=this._sliderPointerPosition(e),o=this._sliderOrthogonalPointerPosition(e),a=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,c=>{const d=this._sliderOrthogonalPointerPosition(c),_=Math.abs(d-o);if(isWindows&&_>POINTER_DRAG_RESET_DISTANCE$1){this._setDesiredScrollPositionNow(a.getScrollPosition());return}const k=this._sliderPointerPosition(c)-i;this._setDesiredScrollPositionNow(a.getDesiredScrollPositionFromDelta(k))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const i={};this.writeScrollPosition(i,e),this._scrollable.setScrollPositionNow(i)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const MINIMUM_SLIDER_SIZE=20;class ScrollbarState{constructor(e,i,o,a,c,d){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(o),this._arrowSize=Math.round(e),this._visibleSize=a,this._scrollSize=c,this._scrollPosition=d,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ScrollbarState(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const i=Math.round(e);return this._visibleSize!==i?(this._visibleSize=i,this._refreshComputedValues(),!0):!1}setScrollSize(e){const i=Math.round(e);return this._scrollSize!==i?(this._scrollSize=i,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const i=Math.round(e);return this._scrollPosition!==i?(this._scrollPosition=i,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,i,o,a,c){const d=Math.max(0,o-e),_=Math.max(0,d-2*i),b=a>0&&a>o;if(!b)return{computedAvailableSize:Math.round(d),computedIsNeeded:b,computedSliderSize:Math.round(_),computedSliderRatio:0,computedSliderPosition:0};const k=Math.round(Math.max(MINIMUM_SLIDER_SIZE,Math.floor(o*_/a))),j=(_-k)/(a-o),_e=c*j;return{computedAvailableSize:Math.round(d),computedIsNeeded:b,computedSliderSize:Math.round(k),computedSliderRatio:j,computedSliderPosition:Math.round(_e)}}_refreshComputedValues(){const e=ScrollbarState._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const i=e-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const i=e-this._arrowSize;let o=this._scrollPosition;return i<this._computedSliderPosition?o-=this._visibleSize:o+=this._visibleSize,o}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const i=this._computedSliderPosition+e;return Math.round(i/this._computedSliderRatio)}}class HorizontalScrollbar extends AbstractScrollbar{constructor(e,i,o){const a=e.getScrollDimensions(),c=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:o,scrollbarState:new ScrollbarState(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,a.width,a.scrollWidth,c.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:i.scrollByPage}),i.horizontalHasArrows){const d=(i.arrowSize-ARROW_IMG_SIZE)/2,_=(i.horizontalScrollbarSize-ARROW_IMG_SIZE)/2;this._createArrow({className:"scra",icon:Codicon.scrollbarButtonLeft,top:_,left:d,bottom:void 0,right:void 0,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new StandardWheelEvent(null,1,0))}),this._createArrow({className:"scra",icon:Codicon.scrollbarButtonRight,top:_,left:void 0,bottom:void 0,right:d,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new StandardWheelEvent(null,-1,0))})}this._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize)}_updateSlider(e,i){this.slider.setWidth(e),this.slider.setLeft(i)}_renderDomNode(e,i){this.domNode.setWidth(e),this.domNode.setHeight(i),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,i){e.scrollLeft=i}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class VerticalScrollbar extends AbstractScrollbar{constructor(e,i,o){const a=e.getScrollDimensions(),c=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:o,scrollbarState:new ScrollbarState(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,a.height,a.scrollHeight,c.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:i.scrollByPage}),i.verticalHasArrows){const d=(i.arrowSize-ARROW_IMG_SIZE)/2,_=(i.verticalScrollbarSize-ARROW_IMG_SIZE)/2;this._createArrow({className:"scra",icon:Codicon.scrollbarButtonUp,top:d,left:_,bottom:void 0,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:()=>this._host.onMouseWheel(new StandardWheelEvent(null,0,1))}),this._createArrow({className:"scra",icon:Codicon.scrollbarButtonDown,top:void 0,left:_,bottom:d,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:()=>this._host.onMouseWheel(new StandardWheelEvent(null,0,-1))})}this._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0)}_updateSlider(e,i){this.slider.setHeight(e),this.slider.setTop(i)}_renderDomNode(e,i){this.domNode.setWidth(i),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return i}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,i){e.scrollTop=i}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class ScrollState{constructor(e,i,o,a,c,d,_){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,o=o|0,a=a|0,c=c|0,d=d|0,_=_|0),this.rawScrollLeft=a,this.rawScrollTop=_,i<0&&(i=0),a+i>o&&(a=o-i),a<0&&(a=0),c<0&&(c=0),_+c>d&&(_=d-c),_<0&&(_=0),this.width=i,this.scrollWidth=o,this.scrollLeft=a,this.height=c,this.scrollHeight=d,this.scrollTop=_}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,i){return new ScrollState(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new ScrollState(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,i){const o=this.width!==e.width,a=this.scrollWidth!==e.scrollWidth,c=this.scrollLeft!==e.scrollLeft,d=this.height!==e.height,_=this.scrollHeight!==e.scrollHeight,b=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:i,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:o,scrollWidthChanged:a,scrollLeftChanged:c,heightChanged:d,scrollHeightChanged:_,scrollTopChanged:b}}}class Scrollable extends Disposable{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Emitter$1),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new ScrollState(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,i){var o;const a=this._state.withScrollDimensions(e,i);this._setState(a,Boolean(this._smoothScrolling)),(o=this._smoothScrolling)===null||o===void 0||o.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const i=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(e,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const o=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===o.scrollLeft&&this._smoothScrolling.to.scrollTop===o.scrollTop)return;let a;i?a=new SmoothScrollingOperation(this._smoothScrolling.from,o,this._smoothScrolling.startTime,this._smoothScrolling.duration):a=this._smoothScrolling.combine(this._state,o,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=a}else{const o=this._state.withScrollPosition(e);this._smoothScrolling=SmoothScrollingOperation.start(this._state,o,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),i=this._state.withScrollPosition(e);if(this._setState(i,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{!this._smoothScrolling||(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,i){const o=this._state;o.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(o,i)))}}class SmoothScrollingUpdate{constructor(e,i,o){this.scrollLeft=e,this.scrollTop=i,this.isDone=o}}function createEaseOutCubic(s,e){const i=e-s;return function(o){return s+i*easeOutCubic(o)}}function createComposed(s,e,i){return function(o){return o<i?s(o/i):e((o-i)/(1-i))}}class SmoothScrollingOperation{constructor(e,i,o,a){this.from=e,this.to=i,this.duration=a,this.startTime=o,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,i,o){if(Math.abs(e-i)>2.5*o){let c,d;return e<i?(c=e+.75*o,d=i-.75*o):(c=e-.75*o,d=i+.75*o),createComposed(createEaseOutCubic(e,c),createEaseOutCubic(d,i),.33)}return createEaseOutCubic(e,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const i=(e-this.startTime)/this.duration;if(i<1){const o=this.scrollLeft(i),a=this.scrollTop(i);return new SmoothScrollingUpdate(o,a,!1)}return new SmoothScrollingUpdate(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,i,o){return SmoothScrollingOperation.start(e,i,o)}static start(e,i,o){o=o+10;const a=Date.now()-10;return new SmoothScrollingOperation(e,i,a,o)}}function easeInCubic(s){return Math.pow(s,3)}function easeOutCubic(s){return 1-easeInCubic(1-s)}const scrollbars="",HIDE_TIMEOUT=500,SCROLL_WHEEL_SENSITIVITY=50;class MouseWheelClassifierItem{constructor(e,i,o){this.timestamp=e,this.deltaX=i,this.deltaY=o,this.score=0}}class MouseWheelClassifier{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,i=0,o=1,a=this._rear;do{const c=a===this._front?e:Math.pow(2,-o);if(e-=c,i+=this._memory[a].score*c,a===this._front)break;a=(this._capacity+a-1)%this._capacity,o++}while(!0);return i<=.5}accept(e,i,o){const a=new MouseWheelClassifierItem(e,i,o);a.score=this._computeScore(a),this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}MouseWheelClassifier.INSTANCE=new MouseWheelClassifier;class AbstractScrollableElement extends Widget{constructor(e,i,o){super(),this._onScroll=this._register(new Emitter$1),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Emitter$1),e.style.overflow="hidden",this._options=resolveOptions(i),this._scrollable=o,this._register(this._scrollable.onScroll(c=>{this._onWillScroll.fire(c),this._onDidScroll(c),this._onScroll.fire(c)}));const a={onMouseWheel:c=>this._onMouseWheel(c),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new VerticalScrollbar(this._scrollable,this._options,a)),this._horizontalScrollbar=this._register(new HorizontalScrollbar(this._scrollable,this._options,a)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=createFastDomNode(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=createFastDomNode(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=createFastDomNode(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,c=>this._onMouseOver(c)),this.onmouseleave(this._listenOnDomNode,c=>this._onMouseLeave(c)),this._hideTimeout=this._register(new TimeoutTimer),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=dispose(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,isMacintosh&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=dispose(this._mouseWheelToDispose),e)){const o=a=>{this._onMouseWheel(new StandardWheelEvent(a))};this._mouseWheelToDispose.push(addDisposableListener(this._listenOnDomNode,EventType$1.MOUSE_WHEEL,o,{passive:!1}))}}_onMouseWheel(e){const i=MouseWheelClassifier.INSTANCE;{const c=window.devicePixelRatio/getZoomFactor();isWindows||isLinux?i.accept(Date.now(),e.deltaX/c,e.deltaY/c):i.accept(Date.now(),e.deltaX,e.deltaY)}let o=!1;if(e.deltaY||e.deltaX){let c=e.deltaY*this._options.mouseWheelScrollSensitivity,d=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(c)>=Math.abs(d)?d=0:c=0),this._options.flipAxes&&([c,d]=[d,c]);const _=!isMacintosh&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||_)&&!d&&(d=c,c=0),e.browserEvent&&e.browserEvent.altKey&&(d=d*this._options.fastScrollSensitivity,c=c*this._options.fastScrollSensitivity);const b=this._scrollable.getFutureScrollPosition();let k={};if(c){const j=SCROLL_WHEEL_SENSITIVITY*c,_e=b.scrollTop-(j<0?Math.floor(j):Math.ceil(j));this._verticalScrollbar.writeScrollPosition(k,_e)}if(d){const j=SCROLL_WHEEL_SENSITIVITY*d,_e=b.scrollLeft-(j<0?Math.floor(j):Math.ceil(j));this._horizontalScrollbar.writeScrollPosition(k,_e)}k=this._scrollable.validateScrollPosition(k),(b.scrollLeft!==k.scrollLeft||b.scrollTop!==k.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(k):this._scrollable.setScrollPositionNow(k),o=!0)}let a=o;!a&&this._options.alwaysConsumeMouseWheel&&(a=!0),!a&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(a=!0),a&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(!!this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),i=e.scrollTop>0,o=e.scrollLeft>0,a=o?" left":"",c=i?" top":"",d=o||i?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${a}`),this._topShadowDomNode.setClassName(`shadow${c}`),this._topLeftShadowDomNode.setClassName(`shadow${d}${c}${a}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),HIDE_TIMEOUT)}}class ScrollableElement extends AbstractScrollableElement{constructor(e,i){i=i||{},i.mouseWheelSmoothScroll=!1;const o=new Scrollable({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:a=>scheduleAtNextAnimationFrame(a)});super(e,i,o),this._register(o)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class SmoothScrollableElement extends AbstractScrollableElement{constructor(e,i,o){super(e,i,o)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class DomScrollableElement extends AbstractScrollableElement{constructor(e,i){i=i||{},i.mouseWheelSmoothScroll=!1;const o=new Scrollable({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:a=>scheduleAtNextAnimationFrame(a)});super(e,i,o),this._register(o),this._element=e,this.onScroll(a=>{a.scrollTopChanged&&(this._element.scrollTop=a.scrollTop),a.scrollLeftChanged&&(this._element.scrollLeft=a.scrollLeft)}),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function resolveOptions(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,isMacintosh&&(e.className+=" mac"),e}class EditorScrollbar extends ViewPart{constructor(e,i,o,a){super(e);const c=this._context.configuration.options,d=c.get(94),_=c.get(69),b=c.get(36),k=c.get(97),j={listenOnDomNode:o.domNode,className:"editor-scrollable "+getThemeTypeSelector(e.theme.type),useShadows:!1,lazyRender:!0,vertical:d.vertical,horizontal:d.horizontal,verticalHasArrows:d.verticalHasArrows,horizontalHasArrows:d.horizontalHasArrows,verticalScrollbarSize:d.verticalScrollbarSize,verticalSliderSize:d.verticalSliderSize,horizontalScrollbarSize:d.horizontalScrollbarSize,horizontalSliderSize:d.horizontalSliderSize,handleMouseWheel:d.handleMouseWheel,alwaysConsumeMouseWheel:d.alwaysConsumeMouseWheel,arrowSize:d.arrowSize,mouseWheelScrollSensitivity:_,fastScrollSensitivity:b,scrollPredominantAxis:k,scrollByPage:d.scrollByPage};this.scrollbar=this._register(new SmoothScrollableElement(i.domNode,j,this._context.viewLayout.getScrollable())),PartFingerprints.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=createFastDomNode(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const _e=(et,tt,it)=>{const st={};if(tt){const ot=et.scrollTop;ot&&(st.scrollTop=this._context.viewLayout.getCurrentScrollTop()+ot,et.scrollTop=0)}if(it){const ot=et.scrollLeft;ot&&(st.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+ot,et.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(st,1)};this._register(addDisposableListener(o.domNode,"scroll",et=>_e(o.domNode,!0,!0))),this._register(addDisposableListener(i.domNode,"scroll",et=>_e(i.domNode,!0,!1))),this._register(addDisposableListener(a.domNode,"scroll",et=>_e(a.domNode,!0,!1))),this._register(addDisposableListener(this.scrollbarDomNode.domNode,"scroll",et=>_e(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,i=e.get(133);this.scrollbarDomNode.setLeft(i.contentLeft),e.get(67).side==="right"?this.scrollbarDomNode.setWidth(i.contentWidth+i.minimap.minimapWidth):this.scrollbarDomNode.setWidth(i.contentWidth),this.scrollbarDomNode.setHeight(i.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}onConfigurationChanged(e){if(e.hasChanged(94)||e.hasChanged(69)||e.hasChanged(36)){const i=this._context.configuration.options,o=i.get(94),a=i.get(69),c=i.get(36),d=i.get(97),_={vertical:o.vertical,horizontal:o.horizontal,verticalScrollbarSize:o.verticalScrollbarSize,horizontalScrollbarSize:o.horizontalScrollbarSize,scrollByPage:o.scrollByPage,handleMouseWheel:o.handleMouseWheel,mouseWheelScrollSensitivity:a,fastScrollSensitivity:c,scrollPredominantAxis:d};this.scrollbar.updateOptions(_)}return e.hasChanged(133)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+getThemeTypeSelector(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}registerThemingParticipant((s,e)=>{const i=s.getColor(scrollbarShadow);i&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${i} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${i} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${i} 6px 6px 6px -6px inset;
			}
		`);const o=s.getColor(scrollbarSliderBackground);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${o};
			}
		`);const a=s.getColor(scrollbarSliderHoverBackground);a&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${a};
			}
		`);const c=s.getColor(scrollbarSliderActiveBackground);c&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${c};
			}
		`)});const glyphMargin="";class DecorationToRender{constructor(e,i,o){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+i,this.className=String(o)}}class DedupOverlay extends DynamicViewOverlay{_render(e,i,o){const a=[];for(let _=e;_<=i;_++){const b=_-e;a[b]=[]}if(o.length===0)return a;o.sort((_,b)=>_.className===b.className?_.startLineNumber===b.startLineNumber?_.endLineNumber-b.endLineNumber:_.startLineNumber-b.startLineNumber:_.className<b.className?-1:1);let c=null,d=0;for(let _=0,b=o.length;_<b;_++){const k=o[_],j=k.className;let _e=Math.max(k.startLineNumber,e)-e;const et=Math.min(k.endLineNumber,i)-e;c===j?(_e=Math.max(d+1,_e),d=Math.max(d,et)):(c=j,d=et);for(let tt=_e;tt<=d;tt++)a[tt].push(c)}return a}}class GlyphMarginOverlay extends DedupOverlay{constructor(e){super(),this._context=e;const i=this._context.configuration.options,o=i.get(133);this._lineHeight=i.get(61),this._glyphMargin=i.get(52),this._glyphMarginLeft=o.glyphMarginLeft,this._glyphMarginWidth=o.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(133);return this._lineHeight=i.get(61),this._glyphMargin=i.get(52),this._glyphMarginLeft=o.glyphMarginLeft,this._glyphMarginWidth=o.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const i=e.getDecorationsInViewport(),o=[];let a=0;for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.options.glyphMarginClassName;b&&(o[a++]=new DecorationToRender(_.range.startLineNumber,_.range.endLineNumber,b))}return o}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=this._render(i,o,this._getDecorations(e)),c=this._lineHeight.toString(),d=this._glyphMarginLeft.toString(),_=this._glyphMarginWidth.toString(),b='" style="left:'+d+"px;width:"+_+"px;height:"+c+'px;"></div>',k=[];for(let j=i;j<=o;j++){const _e=j-i,et=a[_e];et.length===0?k[_e]="":k[_e]='<div class="cgmr codicon '+et.join(" ")+b}this._renderResult=k}render(e,i){if(!this._renderResult)return"";const o=i-e;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}const indentGuides="";class TextModelPart extends Disposable{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function computeIndentLevel(s,e){let i=0,o=0;const a=s.length;for(;o<a;){const c=s.charCodeAt(o);if(c===32)i++;else if(c===9)i=i-i%e+e;else break;o++}return o===a?-1:i}var HorizontalGuidesState;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})(HorizontalGuidesState||(HorizontalGuidesState={}));class IndentGuide{constructor(e,i,o,a,c,d){if(this.visibleColumn=e,this.column=i,this.className=o,this.horizontalLine=a,this.forWrappedLinesAfterColumn=c,this.forWrappedLinesBeforeOrAtColumn=d,e!==-1==(i!==-1))throw new Error}}class IndentGuideHorizontalLine{constructor(e,i){this.top=e,this.endColumn=i}}class GuidesTextModelPart extends TextModelPart{constructor(e,i){super(),this.textModel=e,this.languageConfigurationService=i}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return computeIndentLevel(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,i,o){this.assertNotDisposed();const a=this.textModel.getLineCount();if(e<1||e>a)throw new Error("Illegal value for lineNumber");const c=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,d=Boolean(c&&c.offSide);let _=-2,b=-1,k=-2,j=-1;const _e=ut=>{if(_!==-1&&(_===-2||_>ut-1)){_=-1,b=-1;for(let ct=ut-2;ct>=0;ct--){const ft=this._computeIndentLevel(ct);if(ft>=0){_=ct,b=ft;break}}}if(k===-2){k=-1,j=-1;for(let ct=ut;ct<a;ct++){const ft=this._computeIndentLevel(ct);if(ft>=0){k=ct,j=ft;break}}}};let et=-2,tt=-1,it=-2,st=-1;const ot=ut=>{if(et===-2){et=-1,tt=-1;for(let ct=ut-2;ct>=0;ct--){const ft=this._computeIndentLevel(ct);if(ft>=0){et=ct,tt=ft;break}}}if(it!==-1&&(it===-2||it<ut-1)){it=-1,st=-1;for(let ct=ut;ct<a;ct++){const ft=this._computeIndentLevel(ct);if(ft>=0){it=ct,st=ft;break}}}};let nt=0,rt=!0,at=0,lt=!0,gt=0,ht=0;for(let ut=0;rt||lt;ut++){const ct=e-ut,ft=e+ut;ut>1&&(ct<1||ct<i)&&(rt=!1),ut>1&&(ft>a||ft>o)&&(lt=!1),ut>5e4&&(rt=!1,lt=!1);let dt=-1;if(rt&&ct>=1){const mt=this._computeIndentLevel(ct-1);mt>=0?(k=ct-1,j=mt,dt=Math.ceil(mt/this.textModel.getOptions().indentSize)):(_e(ct),dt=this._getIndentLevelForWhitespaceLine(d,b,j))}let pt=-1;if(lt&&ft<=a){const mt=this._computeIndentLevel(ft-1);mt>=0?(et=ft-1,tt=mt,pt=Math.ceil(mt/this.textModel.getOptions().indentSize)):(ot(ft),pt=this._getIndentLevelForWhitespaceLine(d,tt,st))}if(ut===0){ht=dt;continue}if(ut===1){if(ft<=a&&pt>=0&&ht+1===pt){rt=!1,nt=ft,at=ft,gt=pt;continue}if(ct>=1&&dt>=0&&dt-1===ht){lt=!1,nt=ct,at=ct,gt=dt;continue}if(nt=e,at=e,gt=ht,gt===0)return{startLineNumber:nt,endLineNumber:at,indent:gt}}rt&&(dt>=gt?nt=ct:rt=!1),lt&&(pt>=gt?at=ft:lt=!1)}return{startLineNumber:nt,endLineNumber:at,indent:gt}}getLinesBracketGuides(e,i,o,a){var c;const d=[];for(let et=e;et<=i;et++)d.push([]);const _=!0,b=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new Range$2(e,1,i,this.textModel.getLineMaxColumn(i)));let k;if(o&&b.length>0){const et=(e<=o.lineNumber&&o.lineNumber<=i?b:this.textModel.bracketPairs.getBracketPairsInRange(Range$2.fromPositions(o))).filter(tt=>Range$2.strictContainsPosition(tt.range,o));k=(c=findLast(et,tt=>_))===null||c===void 0?void 0:c.range}const j=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,_e=new BracketPairGuidesClassNames;for(const et of b){if(!et.closingBracketRange)continue;const tt=k&&et.range.equalsRange(k);if(!tt&&!a.includeInactive)continue;const it=_e.getInlineClassName(et.nestingLevel,et.nestingLevelOfEqualBracketType,j)+(a.highlightActive&&tt?" "+_e.activeClassName:""),st=et.openingBracketRange.getStartPosition(),ot=et.closingBracketRange.getStartPosition(),nt=a.horizontalGuides===HorizontalGuidesState.Enabled||a.horizontalGuides===HorizontalGuidesState.EnabledForActive&&tt;if(et.range.startLineNumber===et.range.endLineNumber){nt&&d[et.range.startLineNumber-e].push(new IndentGuide(-1,et.openingBracketRange.getEndPosition().column,it,new IndentGuideHorizontalLine(!1,ot.column),-1,-1));continue}const rt=this.getVisibleColumnFromPosition(ot),at=this.getVisibleColumnFromPosition(et.openingBracketRange.getStartPosition()),lt=Math.min(at,rt,et.minVisibleColumnIndentation+1);let gt=!1;firstNonWhitespaceIndex(this.textModel.getLineContent(et.closingBracketRange.startLineNumber))<et.closingBracketRange.startColumn-1&&(gt=!0);const ct=Math.max(st.lineNumber,e),ft=Math.min(ot.lineNumber,i),dt=gt?1:0;for(let pt=ct;pt<ft+dt;pt++)d[pt-e].push(new IndentGuide(lt,-1,it,null,pt===st.lineNumber?st.column:-1,pt===ot.lineNumber?ot.column:-1));nt&&(st.lineNumber>=e&&at>lt&&d[st.lineNumber-e].push(new IndentGuide(lt,-1,it,new IndentGuideHorizontalLine(!1,st.column),-1,-1)),ot.lineNumber<=i&&rt>lt&&d[ot.lineNumber-e].push(new IndentGuide(lt,-1,it,new IndentGuideHorizontalLine(!gt,ot.column),-1,-1)))}for(const et of d)et.sort((tt,it)=>tt.visibleColumn-it.visibleColumn);return d}getVisibleColumnFromPosition(e){return CursorColumns.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,i){this.assertNotDisposed();const o=this.textModel.getLineCount();if(e<1||e>o)throw new Error("Illegal value for startLineNumber");if(i<1||i>o)throw new Error("Illegal value for endLineNumber");const a=this.textModel.getOptions(),c=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,d=Boolean(c&&c.offSide),_=new Array(i-e+1);let b=-2,k=-1,j=-2,_e=-1;for(let et=e;et<=i;et++){const tt=et-e,it=this._computeIndentLevel(et-1);if(it>=0){b=et-1,k=it,_[tt]=Math.ceil(it/a.indentSize);continue}if(b===-2){b=-1,k=-1;for(let st=et-2;st>=0;st--){const ot=this._computeIndentLevel(st);if(ot>=0){b=st,k=ot;break}}}if(j!==-1&&(j===-2||j<et-1)){j=-1,_e=-1;for(let st=et;st<o;st++){const ot=this._computeIndentLevel(st);if(ot>=0){j=st,_e=ot;break}}}_[tt]=this._getIndentLevelForWhitespaceLine(d,k,_e)}return _}_getIndentLevelForWhitespaceLine(e,i,o){const a=this.textModel.getOptions();return i===-1||o===-1?0:i<o?1+Math.floor(i/a.indentSize):i===o||e?Math.ceil(o/a.indentSize):1+Math.floor(o/a.indentSize)}}class BracketPairGuidesClassNames{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,i,o){return this.getInlineClassNameOfLevel(o?i:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class IndentGuidesOverlay extends DynamicViewOverlay{constructor(e){super(),this._context=e,this._primaryPosition=null;const i=this._context.configuration.options,o=i.get(134),a=i.get(46);this._lineHeight=i.get(61),this._spaceWidth=a.spaceWidth,this._maxIndentLeft=o.wrappingColumn===-1?-1:o.wrappingColumn*a.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(134),a=i.get(46);return this._lineHeight=i.get(61),this._spaceWidth=a.spaceWidth,this._maxIndentLeft=o.wrappingColumn===-1?-1:o.wrappingColumn*a.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(13),!0}onCursorStateChanged(e){var i;const a=e.selections[0].getPosition();return!((i=this._primaryPosition)===null||i===void 0)&&i.equals(a)?!1:(this._primaryPosition=a,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var i,o,a,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const d=e.visibleRange.startLineNumber,_=e.visibleRange.endLineNumber,b=e.scrollWidth,k=this._lineHeight,j=this._primaryPosition,_e=this.getGuidesByLine(d,_,j),et=[];for(let tt=d;tt<=_;tt++){const it=tt-d,st=_e[it];let ot="";const nt=(o=(i=e.visibleRangeForPosition(new Position$1(tt,1)))===null||i===void 0?void 0:i.left)!==null&&o!==void 0?o:0;for(const rt of st){const at=rt.column===-1?nt+(rt.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Position$1(tt,rt.column)).left;if(at>b||this._maxIndentLeft>0&&at>this._maxIndentLeft)break;const lt=rt.horizontalLine?rt.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",gt=rt.horizontalLine?((c=(a=e.visibleRangeForPosition(new Position$1(tt,rt.horizontalLine.endColumn)))===null||a===void 0?void 0:a.left)!==null&&c!==void 0?c:at+this._spaceWidth)-at:this._spaceWidth;ot+=`<div class="core-guide ${rt.className} ${lt}" style="left:${at}px;height:${k}px;width:${gt}px"></div>`}et[it]=ot}this._renderResult=et}getGuidesByLine(e,i,o){const a=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,i,o,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?HorizontalGuidesState.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?HorizontalGuidesState.EnabledForActive:HorizontalGuidesState.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,c=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,i):null;let d=0,_=0,b=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&o){const _e=this._context.viewModel.getActiveIndentGuide(o.lineNumber,e,i);d=_e.startLineNumber,_=_e.endLineNumber,b=_e.indent}const{indentSize:k}=this._context.viewModel.model.getOptions(),j=[];for(let _e=e;_e<=i;_e++){const et=new Array;j.push(et);const tt=a?a[_e-e]:[],it=new ArrayQueue(tt),st=c?c[_e-e]:[];for(let ot=1;ot<=st;ot++){const nt=(ot-1)*k+1,rt=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||tt.length===0)&&d<=_e&&_e<=_&&ot===b;et.push(...it.takeWhile(lt=>lt.visibleColumn<nt)||[]);const at=it.peek();(!at||at.visibleColumn!==nt||at.horizontalLine)&&et.push(new IndentGuide(nt,-1,rt?"core-guide-indent-active":"core-guide-indent",null,-1,-1))}et.push(...it.takeWhile(ot=>!0)||[])}return j}render(e,i){if(!this._renderResult)return"";const o=i-e;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}function transparentToUndefined(s){if(!(s&&s.isTransparent()))return s}registerThemingParticipant((s,e)=>{const i=s.getColor(editorIndentGuides);i&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${i} inset; }`);const o=s.getColor(editorActiveIndentGuides)||i;o&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${o} inset; }`);const a=[{bracketColor:editorBracketHighlightingForeground1,guideColor:editorBracketPairGuideBackground1,guideColorActive:editorBracketPairGuideActiveBackground1},{bracketColor:editorBracketHighlightingForeground2,guideColor:editorBracketPairGuideBackground2,guideColorActive:editorBracketPairGuideActiveBackground2},{bracketColor:editorBracketHighlightingForeground3,guideColor:editorBracketPairGuideBackground3,guideColorActive:editorBracketPairGuideActiveBackground3},{bracketColor:editorBracketHighlightingForeground4,guideColor:editorBracketPairGuideBackground4,guideColorActive:editorBracketPairGuideActiveBackground4},{bracketColor:editorBracketHighlightingForeground5,guideColor:editorBracketPairGuideBackground5,guideColorActive:editorBracketPairGuideActiveBackground5},{bracketColor:editorBracketHighlightingForeground6,guideColor:editorBracketPairGuideBackground6,guideColorActive:editorBracketPairGuideActiveBackground6}],c=new BracketPairGuidesClassNames,d=a.map(_=>{var b,k;const j=s.getColor(_.bracketColor),_e=s.getColor(_.guideColor),et=s.getColor(_.guideColorActive),tt=transparentToUndefined((b=transparentToUndefined(_e))!==null&&b!==void 0?b:j==null?void 0:j.transparent(.3)),it=transparentToUndefined((k=transparentToUndefined(et))!==null&&k!==void 0?k:j);if(!(!tt||!it))return{guideColor:tt,guideColorActive:it}}).filter(isDefined);if(d.length>0){for(let _=0;_<30;_++){const b=d[_%d.length];e.addRule(`.monaco-editor .${c.getInlineClassNameOfLevel(_).replace(/ /g,".")} { --guide-color: ${b.guideColor}; --guide-color-active: ${b.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${c.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${c.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${c.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});const viewLines="";class LastRenderedData{constructor(){this._currentVisibleRange=new Range$2(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class HorizontalRevealRangeRequest{constructor(e,i,o,a,c,d,_){this.minimalReveal=e,this.lineNumber=i,this.startColumn=o,this.endColumn=a,this.startScrollTop=c,this.stopScrollTop=d,this.scrollType=_,this.type="range",this.minLineNumber=i,this.maxLineNumber=i}}class HorizontalRevealSelectionsRequest{constructor(e,i,o,a,c){this.minimalReveal=e,this.selections=i,this.startScrollTop=o,this.stopScrollTop=a,this.scrollType=c,this.type="selections";let d=i[0].startLineNumber,_=i[0].endLineNumber;for(let b=1,k=i.length;b<k;b++){const j=i[b];d=Math.min(d,j.startLineNumber),_=Math.max(_,j.endLineNumber)}this.minLineNumber=d,this.maxLineNumber=_}}class ViewLines extends ViewPart{constructor(e,i){super(e),this._linesContent=i,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;const o=this._context.configuration,a=this._context.configuration.options,c=a.get(46),d=a.get(134),_=a.get(133);this._lineHeight=a.get(61),this._typicalHalfwidthCharacterWidth=c.typicalHalfwidthCharacterWidth,this._isViewportWrapping=d.isViewportWrapping,this._revealHorizontalRightPadding=a.get(91),this._horizontalScrollbarHeight=_.horizontalScrollbarHeight,this._cursorSurroundingLines=a.get(25),this._cursorSurroundingLinesStyle=a.get(26),this._canUseLayerHinting=!a.get(28),this._viewLineOptions=new ViewLineOptions(o,this._context.theme.type),PartFingerprints.write(this.domNode,7),this.domNode.setClassName(`view-lines ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),applyFontInfo(this.domNode,c),this._maxLineWidth=0,this._asyncUpdateLineWidths=new RunOnceScheduler(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new RunOnceScheduler(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new LastRenderedData,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new ViewLine(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(134)&&(this._maxLineWidth=0);const i=this._context.configuration.options,o=i.get(46),a=i.get(134),c=i.get(133);return this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=a.isViewportWrapping,this._revealHorizontalRightPadding=i.get(91),this._horizontalScrollbarHeight=c.horizontalScrollbarHeight,this._cursorSurroundingLines=i.get(25),this._cursorSurroundingLinesStyle=i.get(26),this._canUseLayerHinting=!i.get(28),applyFontInfo(this.domNode,o),this._onOptionsMaybeChanged(),e.hasChanged(133)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,i=new ViewLineOptions(e,this._context.theme.type);if(!this._viewLineOptions.equals(i)){this._viewLineOptions=i;const o=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();for(let c=o;c<=a;c++)this._visibleLines.getVisibleLine(c).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();let a=!1;for(let c=i;c<=o;c++)a=this._visibleLines.getVisibleLine(c).onSelectionChanged()||a;return a}onDecorationsChanged(e){{const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let a=i;a<=o;a++)this._visibleLines.getVisibleLine(a).onDecorationsChanged()}return!0}onFlushed(e){const i=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,i}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const i=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(i===-1)return!1;let o=this._context.viewLayout.validateScrollPosition({scrollTop:i});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?o={scrollTop:o.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new HorizontalRevealRangeRequest(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),o.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new HorizontalRevealSelectionsRequest(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),o.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const c=Math.abs(this._context.viewLayout.getCurrentScrollTop()-o.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(o,c),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const i=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),o=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<i||e.scrollTop>o)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,i){const o=this._getViewLineDomNode(e);if(o===null)return null;const a=this._getLineNumberFor(o);if(a===-1||a<1||a>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(a)===1)return new Position$1(a,1);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();if(a<c||a>d)return null;let _=this._visibleLines.getVisibleLine(a).getColumnOfNodeOffset(a,e,i);const b=this._context.viewModel.getLineMinColumn(a);return _<b&&(_=b),new Position$1(a,_)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ViewLine.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();for(let a=i;a<=o;a++){const c=this._visibleLines.getVisibleLine(a);if(e===c.getDomNode())return a}return-1}getLineWidth(e){const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();return e<i||e>o?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,i){if(this.shouldRender())return null;const o=e.endLineNumber,a=Range$2.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!a)return null;const c=[];let d=0;const _=new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot);let b=0;i&&(b=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(a.startLineNumber,1)).lineNumber);const k=this._visibleLines.getStartLineNumber(),j=this._visibleLines.getEndLineNumber();for(let _e=a.startLineNumber;_e<=a.endLineNumber;_e++){if(_e<k||_e>j)continue;const et=_e===a.startLineNumber?a.startColumn:1,tt=_e===a.endLineNumber?a.endColumn:this._context.viewModel.getLineMaxColumn(_e),it=this._visibleLines.getVisibleLine(_e).getVisibleRangesForRange(_e,et,tt,_);if(!!it){if(i&&_e<o){const st=b;b=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(_e+1,1)).lineNumber,st!==b&&(it.ranges[it.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}c[d++]=new LineVisibleRanges(it.outsideRenderedLine,_e,HorizontalRange.from(it.ranges))}}return d===0?null:c}_visibleRangesForLineRange(e,i,o){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,i,o,new DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const i=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return i?new HorizontalPosition(i.outsideRenderedLine,i.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const i=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();let a=1,c=!0;for(let d=i;d<=o;d++){const _=this._visibleLines.getVisibleLine(d);if(e&&!_.getWidthIsFast()){c=!1;continue}a=Math.max(a,_.getWidth())}return c&&i===1&&o===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(a),c}_checkMonospaceFontAssumptions(){let e=-1,i=-1;const o=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();for(let c=o;c<=a;c++){const d=this._visibleLines.getVisibleLine(c);if(d.needsMonospaceFontCheck()){const _=d.getWidth();_>i&&(i=_,e=c)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let c=o;c<=a;c++)this._visibleLines.getVisibleLine(c).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const o=this._horizontalRevealRequest;if(e.startLineNumber<=o.minLineNumber&&o.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const a=this._computeScrollLeftToReveal(o);a&&(this._isViewportWrapping||this._ensureMaxLineWidth(a.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:a.scrollLeft},o.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),isLinux&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const o=this._visibleLines.getStartLineNumber(),a=this._visibleLines.getEndLineNumber();for(let c=o;c<=a;c++)if(this._visibleLines.getVisibleLine(c).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const i=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-i),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const i=Math.ceil(e);this._maxLineWidth<i&&(this._maxLineWidth=i,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,i,o,a,c,d){const _=e.top,b=e.height,k=_+b;let j,_e,et;if(c&&c.length>0){let st=c[0].startLineNumber,ot=c[0].endLineNumber;for(let nt=1,rt=c.length;nt<rt;nt++){const at=c[nt];st=Math.min(st,at.startLineNumber),ot=Math.max(ot,at.endLineNumber)}j=!1,_e=this._context.viewLayout.getVerticalOffsetForLineNumber(st),et=this._context.viewLayout.getVerticalOffsetForLineNumber(ot)+this._lineHeight}else if(a)j=!0,_e=this._context.viewLayout.getVerticalOffsetForLineNumber(a.startLineNumber),et=this._context.viewLayout.getVerticalOffsetForLineNumber(a.endLineNumber)+this._lineHeight;else return-1;if((i==="mouse"||o)&&this._cursorSurroundingLinesStyle==="default")o||(_e-=this._lineHeight);else{const st=Math.min(b/this._lineHeight/2,this._cursorSurroundingLines);_e-=st*this._lineHeight,et+=Math.max(0,st-1)*this._lineHeight}(d===0||d===4)&&(et+=o?this._horizontalScrollbarHeight:this._lineHeight);let it;if(et-_e>b){if(!j)return-1;it=_e}else if(d===5||d===6)if(d===6&&_<=_e&&et<=k)it=_;else{const st=Math.max(5*this._lineHeight,b*.2),ot=_e-st,nt=et-b;it=Math.max(nt,ot)}else if(d===1||d===2)if(d===2&&_<=_e&&et<=k)it=_;else{const st=(_e+et)/2;it=Math.max(0,st-b/2)}else it=this._computeMinimumScrolling(_,k,_e,et,d===3,d===4);return it}_computeScrollLeftToReveal(e){const i=this._context.viewLayout.getCurrentViewport(),o=i.left,a=o+i.width;let c=1073741824,d=0;if(e.type==="range"){const b=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!b)return null;for(const k of b.ranges)c=Math.min(c,Math.round(k.left)),d=Math.max(d,Math.round(k.left+k.width))}else for(const b of e.selections){if(b.startLineNumber!==b.endLineNumber)return null;const k=this._visibleRangesForLineRange(b.startLineNumber,b.startColumn,b.endColumn);if(!k)return null;for(const j of k.ranges)c=Math.min(c,Math.round(j.left)),d=Math.max(d,Math.round(j.left+j.width))}return e.minimalReveal||(c=Math.max(0,c-ViewLines.HORIZONTAL_EXTRA_PX),d+=this._revealHorizontalRightPadding),e.type==="selections"&&d-c>i.width?null:{scrollLeft:this._computeMinimumScrolling(o,a,c,d),maxHorizontalOffset:d}}_computeMinimumScrolling(e,i,o,a,c,d){e=e|0,i=i|0,o=o|0,a=a|0,c=!!c,d=!!d;const _=i-e;if(a-o<_){if(c)return o;if(d)return Math.max(0,a-_);if(o<e)return o;if(a>i)return Math.max(0,a-_)}else return o;return e}}ViewLines.HORIZONTAL_EXTRA_PX=30;const linesDecorations="";class LinesDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e;const o=this._context.configuration.options.get(133);this._decorationsLeft=o.decorationsLeft,this._decorationsWidth=o.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const o=this._context.configuration.options.get(133);return this._decorationsLeft=o.decorationsLeft,this._decorationsWidth=o.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const i=e.getDecorationsInViewport(),o=[];let a=0;for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.options.linesDecorationsClassName;b&&(o[a++]=new DecorationToRender(_.range.startLineNumber,_.range.endLineNumber,b));const k=_.options.firstLineDecorationClassName;k&&(o[a++]=new DecorationToRender(_.range.startLineNumber,_.range.startLineNumber,k))}return o}prepareRender(e){const i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=this._render(i,o,this._getDecorations(e)),c=this._decorationsLeft.toString(),d=this._decorationsWidth.toString(),_='" style="left:'+c+"px;width:"+d+'px;"></div>',b=[];for(let k=i;k<=o;k++){const j=k-i,_e=a[j];let et="";for(let tt=0,it=_e.length;tt<it;tt++)et+='<div class="cldr '+_e[tt]+_;b[j]=et}this._renderResult=b}render(e,i){return this._renderResult?this._renderResult[i-e]:""}}const marginDecorations="";class MarginViewLineDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const i=e.getDecorationsInViewport(),o=[];let a=0;for(let c=0,d=i.length;c<d;c++){const _=i[c],b=_.options.marginClassName;b&&(o[a++]=new DecorationToRender(_.range.startLineNumber,_.range.endLineNumber,b))}return o}prepareRender(e){const i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=this._render(i,o,this._getDecorations(e)),c=[];for(let d=i;d<=o;d++){const _=d-i,b=a[_];let k="";for(let j=0,_e=b.length;j<_e;j++)k+='<div class="cmdr '+b[j]+'" style=""></div>';c[_]=k}this._renderResult=c}render(e,i){return this._renderResult?this._renderResult[i-e]:""}}const minimap="";class RGBA8{constructor(e,i,o,a){this._rgba8Brand=void 0,this.r=RGBA8._clamp(e),this.g=RGBA8._clamp(i),this.b=RGBA8._clamp(o),this.a=RGBA8._clamp(a)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}RGBA8.Empty=new RGBA8(0,0,0,0);class MinimapTokensColorTracker extends Disposable{constructor(){super(),this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(TokenizationRegistry.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new MinimapTokensColorTracker),this._INSTANCE}_updateColorMap(){const e=TokenizationRegistry.getColorMap();if(!e){this._colors=[RGBA8.Empty],this._backgroundIsLight=!0;return}this._colors=[RGBA8.Empty];for(let o=1;o<e.length;o++){const a=e[o].rgba;this._colors[o]=new RGBA8(a.r,a.g,a.b,Math.round(a.a*255))}const i=e[2].getRelativeLuminance();this._backgroundIsLight=i>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}MinimapTokensColorTracker._INSTANCE=null;const allCharCodes=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),getCharIndex=(s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:96-1:s);class MinimapCharRenderer{constructor(e,i){this.scale=i,this._minimapCharRendererBrand=void 0,this.charDataNormal=MinimapCharRenderer.soften(e,12/15),this.charDataLight=MinimapCharRenderer.soften(e,50/60)}static soften(e,i){const o=new Uint8ClampedArray(e.length);for(let a=0,c=e.length;a<c;a++)o[a]=toUint8(e[a]*i);return o}renderChar(e,i,o,a,c,d,_,b,k,j,_e){const et=1*this.scale,tt=2*this.scale,it=_e?1:tt;if(i+et>e.width||o+it>e.height){console.warn("bad render request outside image data");return}const st=j?this.charDataLight:this.charDataNormal,ot=getCharIndex(a,k),nt=e.width*4,rt=_.r,at=_.g,lt=_.b,gt=c.r-rt,ht=c.g-at,ut=c.b-lt,ct=Math.max(d,b),ft=e.data;let dt=ot*et*tt,pt=o*nt+i*4;for(let mt=0;mt<it;mt++){let _t=pt;for(let Ct=0;Ct<et;Ct++){const bt=st[dt++]/255*(d/255);ft[_t++]=rt+gt*bt,ft[_t++]=at+ht*bt,ft[_t++]=lt+ut*bt,ft[_t++]=ct}pt+=nt}}blockRenderChar(e,i,o,a,c,d,_,b){const k=1*this.scale,j=2*this.scale,_e=b?1:j;if(i+k>e.width||o+_e>e.height){console.warn("bad render request outside image data");return}const et=e.width*4,tt=.5*(c/255),it=d.r,st=d.g,ot=d.b,nt=a.r-it,rt=a.g-st,at=a.b-ot,lt=it+nt*tt,gt=st+rt*tt,ht=ot+at*tt,ut=Math.max(c,_),ct=e.data;let ft=o*et+i*4;for(let dt=0;dt<_e;dt++){let pt=ft;for(let mt=0;mt<k;mt++)ct[pt++]=lt,ct[pt++]=gt,ct[pt++]=ht,ct[pt++]=ut;ft+=et}}}const charTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},decodeData=s=>{const e=new Uint8ClampedArray(s.length/2);for(let i=0;i<s.length;i+=2)e[i>>1]=charTable[s[i]]<<4|charTable[s[i+1]]&15;return e},prebakedMiniMaps={1:once$1(()=>decodeData("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:once$1(()=>decodeData("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class MinimapCharRendererFactory{static create(e,i){if(this.lastCreated&&e===this.lastCreated.scale&&i===this.lastFontFamily)return this.lastCreated;let o;return prebakedMiniMaps[e]?o=new MinimapCharRenderer(prebakedMiniMaps[e](),e):o=MinimapCharRendererFactory.createFromSampleData(MinimapCharRendererFactory.createSampleData(i).data,e),this.lastFontFamily=i,this.lastCreated=o,o}static createSampleData(e){const i=document.createElement("canvas"),o=i.getContext("2d");i.style.height=`${16}px`,i.height=16,i.width=96*10,i.style.width=96*10+"px",o.fillStyle="#ffffff",o.font=`bold ${16}px ${e}`,o.textBaseline="middle";let a=0;for(const c of allCharCodes)o.fillText(String.fromCharCode(c),a,16/2),a+=10;return o.getImageData(0,0,96*10,16)}static createFromSampleData(e,i){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const a=MinimapCharRendererFactory._downsample(e,i);return new MinimapCharRenderer(a,i)}static _downsampleChar(e,i,o,a,c){const d=1*c,_=2*c;let b=a,k=0;for(let j=0;j<_;j++){const _e=j/_*16,et=(j+1)/_*16;for(let tt=0;tt<d;tt++){const it=tt/d*10,st=(tt+1)/d*10;let ot=0,nt=0;for(let at=_e;at<et;at++){const lt=i+Math.floor(at)*3840,gt=1-(at-Math.floor(at));for(let ht=it;ht<st;ht++){const ut=1-(ht-Math.floor(ht)),ct=lt+Math.floor(ht)*4,ft=ut*gt;nt+=ft,ot+=e[ct]*e[ct+3]/255*ft}}const rt=ot/nt;k=Math.max(k,rt),o[b++]=toUint8(rt)}}return k}static _downsample(e,i){const o=2*i*1*i,a=o*96,c=new Uint8ClampedArray(a);let d=0,_=0,b=0;for(let k=0;k<96;k++)b=Math.max(b,this._downsampleChar(e,_,c,d,i)),d+=o,_+=10*4;if(b>0){const k=255/b;for(let j=0;j<a;j++)c[j]*=k}return c}}const POINTER_DRAG_RESET_DISTANCE=140,GUTTER_DECORATION_WIDTH=2;class MinimapOptions{constructor(e,i,o){const a=e.options,c=a.get(131),d=a.get(133),_=d.minimap,b=a.get(46),k=a.get(67);this.renderMinimap=_.renderMinimap,this.size=k.size,this.minimapHeightIsEditorHeight=_.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=a.get(96),this.showSlider=k.showSlider,this.autohide=k.autohide,this.pixelRatio=c,this.typicalHalfwidthCharacterWidth=b.typicalHalfwidthCharacterWidth,this.lineHeight=a.get(61),this.minimapLeft=_.minimapLeft,this.minimapWidth=_.minimapWidth,this.minimapHeight=d.height,this.canvasInnerWidth=_.minimapCanvasInnerWidth,this.canvasInnerHeight=_.minimapCanvasInnerHeight,this.canvasOuterWidth=_.minimapCanvasOuterWidth,this.canvasOuterHeight=_.minimapCanvasOuterHeight,this.isSampling=_.minimapIsSampling,this.editorHeight=d.height,this.fontScale=_.minimapScale,this.minimapLineHeight=_.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=once$1(()=>MinimapCharRendererFactory.create(this.fontScale,b.fontFamily)),this.defaultBackgroundColor=o.getColor(2),this.backgroundColor=MinimapOptions._getMinimapBackground(i,this.defaultBackgroundColor),this.foregroundAlpha=MinimapOptions._getMinimapForegroundOpacity(i)}static _getMinimapBackground(e,i){const o=e.getColor(minimapBackground);return o?new RGBA8(o.rgba.r,o.rgba.g,o.rgba.b,Math.round(255*o.rgba.a)):i}static _getMinimapForegroundOpacity(e){const i=e.getColor(minimapForegroundOpacity);return i?RGBA8._clamp(Math.round(255*i.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class MinimapLayout{constructor(e,i,o,a,c,d,_,b){this.scrollTop=e,this.scrollHeight=i,this.sliderNeeded=o,this._computedSliderRatio=a,this.sliderTop=c,this.sliderHeight=d,this.startLineNumber=_,this.endLineNumber=b}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,i,o,a,c,d,_,b,k,j,_e){const et=e.pixelRatio,tt=e.minimapLineHeight,it=Math.floor(e.canvasInnerHeight/tt),st=e.lineHeight;if(e.minimapHeightIsEditorHeight){const gt=b*e.lineHeight+(e.scrollBeyondLastLine?c-e.lineHeight:0),ht=Math.max(1,Math.floor(c*c/gt)),ut=Math.max(0,e.minimapHeight-ht),ct=ut/(j-c),ft=k*ct,dt=ut>0,pt=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new MinimapLayout(k,j,dt,ct,ft,ht,1,Math.min(_,pt))}let ot;if(d&&o!==_){const gt=o-i+1;ot=Math.floor(gt*tt/et)}else{const gt=c/st;ot=Math.floor(gt*tt/et)}let nt;e.scrollBeyondLastLine?nt=(_-1)*tt/et:nt=Math.max(0,_*tt/et-ot),nt=Math.min(e.minimapHeight-ot,nt);const rt=nt/(j-c),at=k*rt;let lt=0;if(e.scrollBeyondLastLine&&(lt=c/st-1),it>=_+lt){const ht=_,ut=nt>0;return new MinimapLayout(k,j,ut,rt,at,ot,1,ht)}else{let gt=Math.max(1,Math.floor(i-at*et/tt));_e&&_e.scrollHeight===j&&(_e.scrollTop>k&&(gt=Math.min(gt,_e.startLineNumber)),_e.scrollTop<k&&(gt=Math.max(gt,_e.startLineNumber)));const ht=Math.min(_,gt+it-1),ut=(k-a)/st,ct=(i-gt+ut)*tt/et;return new MinimapLayout(k,j,!0,rt,ct,ot,gt,ht)}}}class MinimapLine{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}MinimapLine.INVALID=new MinimapLine(-1);class RenderData{constructor(e,i,o){this.renderedLayout=e,this._imageData=i,this._renderedLines=new RenderedLinesCollection(()=>MinimapLine.INVALID),this._renderedLines._set(e.startLineNumber,o)}linesEquals(e){if(!this.scrollEquals(e))return!1;const o=this._renderedLines._get().lines;for(let a=0,c=o.length;a<c;a++)if(o[a].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,i){return this._renderedLines.onLinesChanged(e,i)}onLinesDeleted(e,i){this._renderedLines.onLinesDeleted(e,i)}onLinesInserted(e,i){this._renderedLines.onLinesInserted(e,i)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class MinimapBuffers{constructor(e,i,o,a){this._backgroundFillData=MinimapBuffers._createBackgroundFillData(i,o,a),this._buffers=[e.createImageData(i,o),e.createImageData(i,o)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,i,o){const a=o.r,c=o.g,d=o.b,_=o.a,b=new Uint8ClampedArray(e*i*4);let k=0;for(let j=0;j<i;j++)for(let _e=0;_e<e;_e++)b[k]=a,b[k+1]=c,b[k+2]=d,b[k+3]=_,k+=4;return b}}class MinimapSamplingState{constructor(e,i){this.samplingRatio=e,this.minimapLines=i}static compute(e,i,o){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const a=e.pixelRatio,c=e.lineHeight,d=e.scrollBeyondLastLine,{minimapLineCount:_}=EditorLayoutInfoComputer.computeContainedMinimapLineCount({viewLineCount:i,scrollBeyondLastLine:d,height:e.editorHeight,lineHeight:c,pixelRatio:a}),b=i/_,k=b/2;if(!o||o.minimapLines.length===0){const at=[];if(at[0]=1,_>1){for(let lt=0,gt=_-1;lt<gt;lt++)at[lt]=Math.round(lt*b+k);at[_-1]=i}return[new MinimapSamplingState(b,at),[]]}const j=o.minimapLines,_e=j.length,et=[];let tt=0,it=0,st=1;const ot=10;let nt=[],rt=null;for(let at=0;at<_;at++){const lt=Math.max(st,Math.round(at*b)),gt=Math.max(lt,Math.round((at+1)*b));for(;tt<_e&&j[tt]<lt;){if(nt.length<ot){const ut=tt+1+it;rt&&rt.type==="deleted"&&rt._oldIndex===tt-1?rt.deleteToLineNumber++:(rt={type:"deleted",_oldIndex:tt,deleteFromLineNumber:ut,deleteToLineNumber:ut},nt.push(rt)),it--}tt++}let ht;if(tt<_e&&j[tt]<=gt)ht=j[tt],tt++;else if(at===0?ht=1:at+1===_?ht=i:ht=Math.round(at*b+k),nt.length<ot){const ut=tt+1+it;rt&&rt.type==="inserted"&&rt._i===at-1?rt.insertToLineNumber++:(rt={type:"inserted",_i:at,insertFromLineNumber:ut,insertToLineNumber:ut},nt.push(rt)),it++}et[at]=ht,st=ht}if(nt.length<ot)for(;tt<_e;){const at=tt+1+it;rt&&rt.type==="deleted"&&rt._oldIndex===tt-1?rt.deleteToLineNumber++:(rt={type:"deleted",_oldIndex:tt,deleteFromLineNumber:at,deleteToLineNumber:at},nt.push(rt)),it--,tt++}else nt=[{type:"flush"}];return[new MinimapSamplingState(b,et),nt]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,i){let o=this.modelLineToMinimapLine(e)-1;for(;o>0&&this.minimapLines[o-1]>=e;)o--;let a=this.modelLineToMinimapLine(i)-1;for(;a+1<this.minimapLines.length&&this.minimapLines[a+1]<=i;)a++;if(o===a){const c=this.minimapLines[o];if(c<e||c>i)return null}return[o+1,a+1]}decorationLineRangeToMinimapLineRange(e,i){let o=this.modelLineToMinimapLine(e),a=this.modelLineToMinimapLine(i);return e!==i&&a===o&&(a===this.minimapLines.length?o>1&&o--:a++),[o,a]}onLinesDeleted(e){const i=e.toLineNumber-e.fromLineNumber+1;let o=this.minimapLines.length,a=0;for(let c=this.minimapLines.length-1;c>=0&&!(this.minimapLines[c]<e.fromLineNumber);c--)this.minimapLines[c]<=e.toLineNumber?(this.minimapLines[c]=Math.max(1,e.fromLineNumber-1),o=Math.min(o,c),a=Math.max(a,c)):this.minimapLines[c]-=i;return[o,a]}onLinesInserted(e){const i=e.toLineNumber-e.fromLineNumber+1;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]+=i}}class Minimap extends ViewPart{constructor(e){super(e),this.tokensColorTracker=MinimapTokensColorTracker.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);const[i]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=i,this._shouldCheckSampling=!1,this._actual=new InnerMinimap(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new MinimapOptions(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const i=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return i?this._actual.onLinesChanged(i[0],i[1]-i[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[i,o]=this._samplingState.onLinesDeleted(e);return i<=o&&this._actual.onLinesChanged(i+1,o-i+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const i=[];for(const o of e.ranges){const a=this._samplingState.modelLineRangeToMinimapLineRange(o.fromLineNumber,o.toLineNumber);a&&i.push({fromLineNumber:a[0],toLineNumber:a[1]})}return i.length?this._actual.onTokensChanged(i):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;this._samplingState&&(i=this._samplingState.modelLineToMinimapLine(i),o=this._samplingState.modelLineToMinimapLine(o));const a={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:i,viewportEndLineNumber:o,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(i),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(a)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[i,o]=MinimapSamplingState.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=i,e&&this._samplingState)for(const a of o)switch(a.type){case"deleted":this._actual.onLinesDeleted(a.deleteFromLineNumber,a.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(a.insertFromLineNumber,a.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,i,o){if(this._samplingState){const a=[];for(let c=0,d=i-e+1;c<d;c++)o[c]?a[c]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+c-1]):a[c]=null;return a}return this._context.viewModel.getMinimapLinesRenderingData(e,i,o).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[i,o]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Selection$1(i,e.startColumn,o,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,i){let o;if(this._samplingState){const c=this._samplingState.minimapLines[e-1],d=this._samplingState.minimapLines[i-1];o=new Range$2(c,1,d,this._context.viewModel.getLineMaxColumn(d))}else o=new Range$2(e,1,i,this._context.viewModel.getLineMaxColumn(i));const a=this._context.viewModel.getDecorationsInViewport(o);if(this._samplingState){const c=[];for(const d of a){if(!d.options.minimap)continue;const _=d.range,b=this._samplingState.modelLineToMinimapLine(_.startLineNumber),k=this._samplingState.modelLineToMinimapLine(_.endLineNumber);c.push(new ViewModelDecoration(new Range$2(b,_.startColumn,k,_.endColumn),d.options))}return c}return a}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new Range$2(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class InnerMinimap extends Disposable{constructor(e,i){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=i,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(minimapSelection),this._domNode=createFastDomNode(document.createElement("div")),PartFingerprints.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=createFastDomNode(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=createFastDomNode(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=createFastDomNode(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=createFastDomNode(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=createFastDomNode(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=addStandardDisposableListener(this._domNode.domNode,EventType$1.POINTER_DOWN,o=>{if(o.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(o.button===0&&this._lastRenderData){const k=getDomNodePagePosition(this._slider.domNode),j=k.top+k.height/2;this._startSliderDragging(o,j,this._lastRenderData.renderedLayout)}return}const c=this._model.options.minimapLineHeight,d=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*o.offsetY;let b=Math.floor(d/c)+this._lastRenderData.renderedLayout.startLineNumber;b=Math.min(b,this._model.getLineCount()),this._model.revealLineNumber(b)}),this._sliderPointerMoveMonitor=new GlobalPointerMoveMonitor,this._sliderPointerDownListener=addStandardDisposableListener(this._slider.domNode,EventType$1.POINTER_DOWN,o=>{o.preventDefault(),o.stopPropagation(),o.button===0&&this._lastRenderData&&this._startSliderDragging(o,o.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Gesture.addTarget(this._domNode.domNode),this._sliderTouchStartListener=addDisposableListener(this._domNode.domNode,EventType.Start,o=>{o.preventDefault(),o.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(o))},{passive:!1}),this._sliderTouchMoveListener=addDisposableListener(this._domNode.domNode,EventType.Change,o=>{o.preventDefault(),o.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(o)},{passive:!1}),this._sliderTouchEndListener=addStandardDisposableListener(this._domNode.domNode,EventType.End,o=>{o.preventDefault(),o.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,i,o){if(!e.target||!(e.target instanceof Element))return;const a=e.pageX;this._slider.toggleClassName("active",!0);const c=(d,_)=>{const b=Math.abs(_-a);if(isWindows&&b>POINTER_DRAG_RESET_DISTANCE){this._model.setScrollTop(o.scrollTop);return}const k=d-i;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(k))};e.pageY!==i&&c(e.pageY,a),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,d=>c(d.pageY,d.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const i=this._domNode.domNode.getBoundingClientRect().top,o=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-i);this._model.setScrollTop(o)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new MinimapBuffers(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,i){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,i):!1}onLinesDeleted(e,i){var o;return(o=this._lastRenderData)===null||o===void 0||o.onLinesDeleted(e,i),!0}onLinesInserted(e,i){var o;return(o=this._lastRenderData)===null||o===void 0||o.onLinesInserted(e,i),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(minimapSelection),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const o=MinimapLayout.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(o.sliderNeeded?"block":"none"),this._slider.setTop(o.sliderTop),this._slider.setHeight(o.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(o.sliderHeight),this.renderDecorations(o),this._lastRenderData=this.renderLines(o)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const i=this._model.getSelections();i.sort(Range$2.compareRangesUsingStarts);const o=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);o.sort((et,tt)=>(et.options.zIndex||0)-(tt.options.zIndex||0));const{canvasInnerWidth:a,canvasInnerHeight:c}=this._model.options,d=this._model.options.minimapLineHeight,_=this._model.options.minimapCharWidth,b=this._model.getOptions().tabSize,k=this._decorationsCanvas.domNode.getContext("2d");k.clearRect(0,0,a,c);const j=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(k,i,j,e,d),this._renderDecorationsLineHighlights(k,o,j,e,d);const _e=new ContiguousLineMap(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(k,i,_e,e,d,b,_,a),this._renderDecorationsHighlights(k,o,_e,e,d,b,_,a)}}_renderSelectionLineHighlights(e,i,o,a,c){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let d=0,_=0;for(const b of i){const k=Math.max(a.startLineNumber,b.startLineNumber),j=Math.min(a.endLineNumber,b.endLineNumber);if(k>j)continue;for(let tt=k;tt<=j;tt++)o.set(tt,!0);const _e=(k-a.startLineNumber)*c,et=(j-a.startLineNumber)*c+c;_>=_e||(_>d&&e.fillRect(MINIMAP_GUTTER_WIDTH,d,e.canvas.width,_-d),d=_e),_=et}_>d&&e.fillRect(MINIMAP_GUTTER_WIDTH,d,e.canvas.width,_-d)}_renderDecorationsLineHighlights(e,i,o,a,c){const d=new Map;for(let _=i.length-1;_>=0;_--){const b=i[_],k=b.options.minimap;if(!k||k.position!==MinimapPosition.Inline)continue;const j=Math.max(a.startLineNumber,b.range.startLineNumber),_e=Math.min(a.endLineNumber,b.range.endLineNumber);if(j>_e)continue;const et=k.getColor(this._theme.value);if(!et||et.isTransparent())continue;let tt=d.get(et.toString());tt||(tt=et.transparent(.5).toString(),d.set(et.toString(),tt)),e.fillStyle=tt;for(let it=j;it<=_e;it++){if(o.has(it))continue;o.set(it,!0);const st=(j-a.startLineNumber)*c;e.fillRect(MINIMAP_GUTTER_WIDTH,st,e.canvas.width,c)}}}_renderSelectionsHighlights(e,i,o,a,c,d,_,b){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const k of i){const j=Math.max(a.startLineNumber,k.startLineNumber),_e=Math.min(a.endLineNumber,k.endLineNumber);if(!(j>_e))for(let et=j;et<=_e;et++)this.renderDecorationOnLine(e,o,k,this._selectionColor,a,et,c,c,d,_,b)}}_renderDecorationsHighlights(e,i,o,a,c,d,_,b){for(const k of i){const j=k.options.minimap;if(!j)continue;const _e=Math.max(a.startLineNumber,k.range.startLineNumber),et=Math.min(a.endLineNumber,k.range.endLineNumber);if(_e>et)continue;const tt=j.getColor(this._theme.value);if(!(!tt||tt.isTransparent()))for(let it=_e;it<=et;it++)switch(j.position){case MinimapPosition.Inline:this.renderDecorationOnLine(e,o,k.range,tt,a,it,c,c,d,_,b);continue;case MinimapPosition.Gutter:{const st=(it-a.startLineNumber)*c,ot=2;this.renderDecoration(e,tt,ot,st,GUTTER_DECORATION_WIDTH,c);continue}}}}renderDecorationOnLine(e,i,o,a,c,d,_,b,k,j,_e){const et=(d-c.startLineNumber)*b;if(et+_<0||et>this._model.options.canvasInnerHeight)return;const{startLineNumber:tt,endLineNumber:it}=o,st=tt===d?o.startColumn:1,ot=it===d?o.endColumn:this._model.getLineMaxColumn(d),nt=this.getXOffsetForPosition(i,d,st,k,j,_e),rt=this.getXOffsetForPosition(i,d,ot,k,j,_e);this.renderDecoration(e,a,nt,et,rt-nt,_)}getXOffsetForPosition(e,i,o,a,c,d){if(o===1)return MINIMAP_GUTTER_WIDTH;if((o-1)*c>=d)return d;let b=e.get(i);if(!b){const k=this._model.getLineContent(i);b=[MINIMAP_GUTTER_WIDTH];let j=MINIMAP_GUTTER_WIDTH;for(let _e=1;_e<k.length+1;_e++){const et=k.charCodeAt(_e-1),tt=et===9?a*c:isFullWidthCharacter(et)?2*c:c,it=j+tt;if(it>=d){b[_e]=d;break}b[_e]=it,j=it}e.set(i,b)}return o-1<b.length?b[o-1]:d}renderDecoration(e,i,o,a,c,d){e.fillStyle=i&&i.toString()||"",e.fillRect(o,a,c,d)}renderLines(e){const i=e.startLineNumber,o=e.endLineNumber,a=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const bt=this._lastRenderData._get();return new RenderData(e,bt.imageData,bt.lines)}const c=this._getBuffer();if(!c)return null;const[d,_,b]=InnerMinimap._renderUntouchedLines(c,i,o,a,this._lastRenderData),k=this._model.getMinimapLinesRenderingData(i,o,b),j=this._model.getOptions().tabSize,_e=this._model.options.defaultBackgroundColor,et=this._model.options.backgroundColor,tt=this._model.options.foregroundAlpha,it=this._model.tokensColorTracker,st=it.backgroundIsLight(),ot=this._model.options.renderMinimap,nt=this._model.options.charRenderer(),rt=this._model.options.fontScale,at=this._model.options.minimapCharWidth,gt=(ot===1?2:2+1)*rt,ht=a>gt?Math.floor((a-gt)/2):0,ut=et.a/255,ct=new RGBA8(Math.round((et.r-_e.r)*ut+_e.r),Math.round((et.g-_e.g)*ut+_e.g),Math.round((et.b-_e.b)*ut+_e.b),255);let ft=0;const dt=[];for(let bt=0,yt=o-i+1;bt<yt;bt++)b[bt]&&InnerMinimap._renderLine(c,ct,et.a,st,ot,at,it,tt,nt,ft,ht,j,k[bt],rt,a),dt[bt]=new MinimapLine(ft),ft+=a;const pt=d===-1?0:d,_t=(_===-1?c.height:_)-pt;return this._canvas.domNode.getContext("2d").putImageData(c,0,0,0,pt,c.width,_t),new RenderData(e,c,dt)}static _renderUntouchedLines(e,i,o,a,c){const d=[];if(!c){for(let ct=0,ft=o-i+1;ct<ft;ct++)d[ct]=!0;return[-1,-1,d]}const _=c._get(),b=_.imageData.data,k=_.rendLineNumberStart,j=_.lines,_e=j.length,et=e.width,tt=e.data,it=(o-i+1)*a*et*4;let st=-1,ot=-1,nt=-1,rt=-1,at=-1,lt=-1,gt=0;for(let ct=i;ct<=o;ct++){const ft=ct-i,dt=ct-k,pt=dt>=0&&dt<_e?j[dt].dy:-1;if(pt===-1){d[ft]=!0,gt+=a;continue}const mt=pt*et*4,_t=(pt+a)*et*4,Ct=gt*et*4,bt=(gt+a)*et*4;rt===mt&&lt===Ct?(rt=_t,lt=bt):(nt!==-1&&(tt.set(b.subarray(nt,rt),at),st===-1&&nt===0&&nt===at&&(st=rt),ot===-1&&rt===it&&nt===at&&(ot=nt)),nt=mt,rt=_t,at=Ct,lt=bt),d[ft]=!1,gt+=a}nt!==-1&&(tt.set(b.subarray(nt,rt),at),st===-1&&nt===0&&nt===at&&(st=rt),ot===-1&&rt===it&&nt===at&&(ot=nt));const ht=st===-1?-1:st/(et*4),ut=ot===-1?-1:ot/(et*4);return[ht,ut,d]}static _renderLine(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st){const ot=tt.content,nt=tt.tokens,rt=e.width-d,at=st===1;let lt=MINIMAP_GUTTER_WIDTH,gt=0,ht=0;for(let ut=0,ct=nt.getCount();ut<ct;ut++){const ft=nt.getEndOffset(ut),dt=nt.getForeground(ut),pt=_.getColor(dt);for(;gt<ft;gt++){if(lt>rt)return;const mt=ot.charCodeAt(gt);if(mt===9){const _t=et-(gt+ht)%et;ht+=_t-1,lt+=_t*d}else if(mt===32)lt+=d;else{const _t=isFullWidthCharacter(mt)?2:1;for(let Ct=0;Ct<_t;Ct++)if(c===2?k.blockRenderChar(e,lt,j+_e,pt,b,i,o,at):k.renderChar(e,lt,j+_e,mt,pt,b,i,o,it,a,at),lt+=d,lt>rt)return}}}}}class ContiguousLineMap{constructor(e,i,o){this._startLineNumber=e,this._endLineNumber=i,this._defaultValue=o,this._values=[];for(let a=0,c=this._endLineNumber-this._startLineNumber+1;a<c;a++)this._values[a]=o}has(e){return this.get(e)!==this._defaultValue}set(e,i){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=i)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}registerThemingParticipant((s,e)=>{const i=s.getColor(minimapSliderBackground);i&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${i}; }`);const o=s.getColor(minimapSliderHoverBackground);o&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${o}; }`);const a=s.getColor(minimapSliderActiveBackground);a&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${a}; }`);const c=s.getColor(scrollbarShadow);c&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${c} -6px 0 6px -6px inset; }`)});const overlayWidgets="";class ViewOverlayWidgets extends ViewPart{constructor(e){super(e);const o=this._context.configuration.options.get(133);this._widgets={},this._verticalScrollbarWidth=o.verticalScrollbarWidth,this._minimapWidth=o.minimap.minimapWidth,this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._editorHeight=o.height,this._editorWidth=o.width,this._domNode=createFastDomNode(document.createElement("div")),PartFingerprints.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const o=this._context.configuration.options.get(133);return this._verticalScrollbarWidth=o.verticalScrollbarWidth,this._minimapWidth=o.minimap.minimapWidth,this._horizontalScrollbarHeight=o.horizontalScrollbarHeight,this._editorHeight=o.height,this._editorWidth=o.width,!0}addWidget(e){const i=createFastDomNode(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:i},i.setPosition("absolute"),i.setAttribute("widgetId",e.getId()),this._domNode.appendChild(i),this.setShouldRender()}setWidgetPosition(e,i){const o=this._widgets[e.getId()];return o.preference===i?!1:(o.preference=i,this.setShouldRender(),!0)}removeWidget(e){const i=e.getId();if(this._widgets.hasOwnProperty(i)){const a=this._widgets[i].domNode.domNode;delete this._widgets[i],a.parentNode.removeChild(a),this.setShouldRender()}}_renderWidget(e){const i=e.domNode;if(e.preference===null){i.setTop("");return}if(e.preference===0)i.setTop(0),i.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const o=i.domNode.clientHeight;i.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight),i.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(i.setTop(0),i.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const i=Object.keys(this._widgets);for(let o=0,a=i.length;o<a;o++){const c=i[o];this._renderWidget(this._widgets[c])}}}class Settings{constructor(e,i){const o=e.options;this.lineHeight=o.get(61),this.pixelRatio=o.get(131),this.overviewRulerLanes=o.get(76),this.renderBorder=o.get(75);const a=i.getColor(editorOverviewRulerBorder);this.borderColor=a?a.toString():null,this.hideCursor=o.get(54);const c=i.getColor(editorCursorForeground);this.cursorColor=c?c.transparent(.7).toString():null,this.themeType=i.type;const d=o.get(67),_=d.enabled,b=d.side,k=i.getColor(editorOverviewRulerBackground),j=TokenizationRegistry.getDefaultBackground();let _e=null;k!==void 0?_e=k:_&&(_e=j),_e===null||b==="left"?this.backgroundColor=null:this.backgroundColor=Color.Format.CSS.formatHex(_e);const tt=o.get(133).overviewRuler;this.top=tt.top,this.right=tt.right,this.domWidth=tt.width,this.domHeight=tt.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[it,st]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=it,this.w=st}_initLanes(e,i,o){const a=i-e;if(o>=3){const c=Math.floor(a/3),d=Math.floor(a/3),_=a-c-d,b=e,k=b+c,j=b+c+_;return[[0,b,k,b,j,b,k,b],[0,c,_,c+_,d,c+_+d,_+d,c+_+d]]}else if(o===2){const c=Math.floor(a/2),d=a-c,_=e,b=_+c;return[[0,_,_,_,b,_,_,_],[0,c,c,c,d,c+d,c+d,c+d]]}else{const c=e,d=a;return[[0,c,c,c,c,c,c,c],[0,d,d,d,d,d,d,d]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class DecorationsOverviewRuler extends ViewPart{constructor(e){super(e),this._domNode=createFastDomNode(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=TokenizationRegistry.onDidChange(i=>{i.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const i=new Settings(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(i)?!1:(this._settings=i,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let i=0,o=e.selections.length;i<o;i++)this._cursorPositions[i]=e.selections[i].getPosition();return this._cursorPositions.sort(Position$1.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:""),this._domNode.setDisplay("none");return}this._domNode.setDisplay("block");const e=this._settings.canvasWidth,i=this._settings.canvasHeight,o=this._settings.lineHeight,a=this._context.viewLayout,c=this._context.viewLayout.getScrollHeight(),d=i/c,_=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme),b=6*this._settings.pixelRatio|0,k=b/2|0,j=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?j.clearRect(0,0,e,i):(j.fillStyle=this._settings.backgroundColor,j.fillRect(0,0,e,i));const _e=this._settings.x,et=this._settings.w;_.sort(OverviewRulerDecorationsGroup.cmp);for(const tt of _){const it=tt.color,st=tt.data;j.fillStyle=it;let ot=0,nt=0,rt=0;for(let at=0,lt=st.length/3;at<lt;at++){const gt=st[3*at],ht=st[3*at+1],ut=st[3*at+2];let ct=a.getVerticalOffsetForLineNumber(ht)*d|0,ft=(a.getVerticalOffsetForLineNumber(ut)+o)*d|0;if(ft-ct<b){let pt=(ct+ft)/2|0;pt<k?pt=k:pt+k>i&&(pt=i-k),ct=pt-k,ft=pt+k}ct>rt+1||gt!==ot?(at!==0&&j.fillRect(_e[ot],nt,et[ot],rt-nt),ot=gt,nt=ct,rt=ft):ft>rt&&(rt=ft)}j.fillRect(_e[ot],nt,et[ot],rt-nt)}if(!this._settings.hideCursor&&this._settings.cursorColor){const tt=2*this._settings.pixelRatio|0,it=tt/2|0,st=this._settings.x[7],ot=this._settings.w[7];j.fillStyle=this._settings.cursorColor;let nt=-100,rt=-100;for(let at=0,lt=this._cursorPositions.length;at<lt;at++){const gt=this._cursorPositions[at];let ht=a.getVerticalOffsetForLineNumber(gt.lineNumber)*d|0;ht<it?ht=it:ht+it>i&&(ht=i-it);const ut=ht-it,ct=ut+tt;ut>rt+1?(at!==0&&j.fillRect(st,nt,ot,rt-nt),nt=ut,rt=ct):ct>rt&&(rt=ct)}j.fillRect(st,nt,ot,rt-nt)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(j.beginPath(),j.lineWidth=1,j.strokeStyle=this._settings.borderColor,j.moveTo(0,0),j.lineTo(0,i),j.stroke(),j.moveTo(0,0),j.lineTo(e,0),j.stroke())}}class ColorZone{constructor(e,i,o){this._colorZoneBrand=void 0,this.from=e|0,this.to=i|0,this.colorId=o|0}static compare(e,i){return e.colorId===i.colorId?e.from===i.from?e.to-i.to:e.from-i.from:e.colorId-i.colorId}}class OverviewRulerZone{constructor(e,i,o,a){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=i,this.heightInLines=o,this.color=a,this._colorZone=null}static compare(e,i){return e.color===i.color?e.startLineNumber===i.startLineNumber?e.heightInLines===i.heightInLines?e.endLineNumber-i.endLineNumber:e.heightInLines-i.heightInLines:e.startLineNumber-i.startLineNumber:e.color<i.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class OverviewZoneManager{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(OverviewRulerZone.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,i=Math.floor(this._lineHeight),o=Math.floor(this.getCanvasHeight()),a=Math.floor(this._outerHeight),c=o/a,d=Math.floor(4*this._pixelRatio/2),_=[];for(let b=0,k=this._zones.length;b<k;b++){const j=this._zones[b];if(!e){const lt=j.getColorZones();if(lt){_.push(lt);continue}}const _e=this._getVerticalOffsetForLine(j.startLineNumber),et=j.heightInLines===0?this._getVerticalOffsetForLine(j.endLineNumber)+i:_e+j.heightInLines*i,tt=Math.floor(c*_e),it=Math.floor(c*et);let st=Math.floor((tt+it)/2),ot=it-st;ot<d&&(ot=d),st-ot<0&&(st=ot),st+ot>o&&(st=o-ot);const nt=j.color;let rt=this._color2Id[nt];rt||(rt=++this._lastAssignedId,this._color2Id[nt]=rt,this._id2Color[rt]=nt);const at=new ColorZone(st-ot,st+ot,rt);j.setColorZone(at),_.push(at)}return this._colorZonesInvalid=!1,_.sort(ColorZone.compare),_}}class OverviewRuler extends ViewEventHandler{constructor(e,i){super(),this._context=e;const o=this._context.configuration.options;this._domNode=createFastDomNode(document.createElement("canvas")),this._domNode.setClassName(i),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new OverviewZoneManager(a=>this._context.viewLayout.getVerticalOffsetForLineNumber(a)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(o.get(61)),this._zoneManager.setPixelRatio(o.get(131)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options;return e.hasChanged(61)&&(this._zoneManager.setLineHeight(i.get(61)),this._render()),e.hasChanged(131)&&(this._zoneManager.setPixelRatio(i.get(131)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let i=!1;i=this._zoneManager.setDOMWidth(e.width)||i,i=this._zoneManager.setDOMHeight(e.height)||i,i&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),i=this._zoneManager.getCanvasHeight(),o=this._zoneManager.resolveColorZones(),a=this._zoneManager.getId2Color(),c=this._domNode.domNode.getContext("2d");return c.clearRect(0,0,e,i),o.length>0&&this._renderOneLane(c,o,a,e),!0}_renderOneLane(e,i,o,a){let c=0,d=0,_=0;for(const b of i){const k=b.colorId,j=b.from,_e=b.to;k!==c?(e.fillRect(0,d,a,_-d),c=k,e.fillStyle=o[c],d=j,_=_e):_>=j?_=Math.max(_,_e):(e.fillRect(0,d,a,_-d),d=j,_=_e)}e.fillRect(0,d,a,_-d)}}const rulers="";class Rulers extends ViewPart{constructor(e){super(e),this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const i=this._context.configuration.options;this._rulers=i.get(93),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options;return this._rulers=i.get(93),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,i=this._rulers.length;if(e===i)return;if(e<i){const{tabSize:a}=this._context.viewModel.model.getOptions(),c=a;let d=i-e;for(;d>0;){const _=createFastDomNode(document.createElement("div"));_.setClassName("view-ruler"),_.setWidth(c),this.domNode.appendChild(_),this._renderedRulers.push(_),d--}return}let o=e-i;for(;o>0;){const a=this._renderedRulers.pop();this.domNode.removeChild(a),o--}}render(e){this._ensureRulersCount();for(let i=0,o=this._rulers.length;i<o;i++){const a=this._renderedRulers[i],c=this._rulers[i];a.setBoxShadow(c.color?`1px 0 0 0 ${c.color} inset`:""),a.setHeight(Math.min(e.scrollHeight,1e6)),a.setLeft(c.column*this._typicalHalfwidthCharacterWidth)}}}registerThemingParticipant((s,e)=>{const i=s.getColor(editorRuler);i&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${i} inset; }`)});const scrollDecoration="";class ScrollDecorationViewPart extends ViewPart{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const o=this._context.configuration.options.get(94);this._useShadows=o.useShadows,this._domNode=createFastDomNode(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const i=this._context.configuration.options.get(133);i.minimap.renderMinimap===0||i.minimap.minimapWidth>0&&i.minimap.minimapLeft===0?this._width=i.width:this._width=i.width-i.verticalScrollbarWidth}onConfigurationChanged(e){const o=this._context.configuration.options.get(94);return this._useShadows=o.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}registerThemingParticipant((s,e)=>{const i=s.getColor(scrollbarShadow);i&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${i} 0 6px 6px -6px inset; }`)});const selections="";class HorizontalRangeWithStyle{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class LineVisibleRangesWithStyle{constructor(e,i){this.lineNumber=e,this.ranges=i}}function toStyledRange(s){return new HorizontalRangeWithStyle(s)}function toStyled(s){return new LineVisibleRangesWithStyle(s.lineNumber,s.ranges.map(toStyledRange))}class SelectionsOverlay extends DynamicViewOverlay{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const i=this._context.configuration.options;this._lineHeight=i.get(61),this._roundedSelection=i.get(92),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options;return this._lineHeight=i.get(61),this._roundedSelection=i.get(92),this._typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let i=0,o=e.length;i<o;i++)if(e[i].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,i,o){const a=this._typicalHalfwidthCharacterWidth/4;let c=null,d=null;if(o&&o.length>0&&i.length>0){const _=i[0].lineNumber;if(_===e.startLineNumber)for(let k=0;!c&&k<o.length;k++)o[k].lineNumber===_&&(c=o[k].ranges[0]);const b=i[i.length-1].lineNumber;if(b===e.endLineNumber)for(let k=o.length-1;!d&&k>=0;k--)o[k].lineNumber===b&&(d=o[k].ranges[0]);c&&!c.startStyle&&(c=null),d&&!d.startStyle&&(d=null)}for(let _=0,b=i.length;_<b;_++){const k=i[_].ranges[0],j=k.left,_e=k.left+k.width,et={top:0,bottom:0},tt={top:0,bottom:0};if(_>0){const it=i[_-1].ranges[0].left,st=i[_-1].ranges[0].left+i[_-1].ranges[0].width;abs(j-it)<a?et.top=2:j>it&&(et.top=1),abs(_e-st)<a?tt.top=2:it<_e&&_e<st&&(tt.top=1)}else c&&(et.top=c.startStyle.top,tt.top=c.endStyle.top);if(_+1<b){const it=i[_+1].ranges[0].left,st=i[_+1].ranges[0].left+i[_+1].ranges[0].width;abs(j-it)<a?et.bottom=2:it<j&&j<st&&(et.bottom=1),abs(_e-st)<a?tt.bottom=2:_e<st&&(tt.bottom=1)}else d&&(et.bottom=d.startStyle.bottom,tt.bottom=d.endStyle.bottom);k.startStyle=et,k.endStyle=tt}}_getVisibleRangesWithStyle(e,i,o){const c=(i.linesVisibleRangesForRange(e,!0)||[]).map(toStyled);return!this._visibleRangesHaveGaps(c)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(i.visibleRange,c,o),c}_createSelectionPiece(e,i,o,a,c){return'<div class="cslr '+o+'" style="top:'+e.toString()+"px;left:"+a.toString()+"px;width:"+c.toString()+"px;height:"+i+'px;"></div>'}_actualRenderOneSelection(e,i,o,a){if(a.length===0)return;const c=!!a[0].ranges[0].startStyle,d=this._lineHeight.toString(),_=(this._lineHeight-1).toString(),b=a[0].lineNumber,k=a[a.length-1].lineNumber;for(let j=0,_e=a.length;j<_e;j++){const et=a[j],tt=et.lineNumber,it=tt-i,st=o&&(tt===k||tt===b)?_:d,ot=o&&tt===b?1:0;let nt="",rt="";for(let at=0,lt=et.ranges.length;at<lt;at++){const gt=et.ranges[at];if(c){const ut=gt.startStyle,ct=gt.endStyle;if(ut.top===1||ut.bottom===1){nt+=this._createSelectionPiece(ot,st,SelectionsOverlay.SELECTION_CLASS_NAME,gt.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let ft=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;ut.top===1&&(ft+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),ut.bottom===1&&(ft+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT),nt+=this._createSelectionPiece(ot,st,ft,gt.left-SelectionsOverlay.ROUNDED_PIECE_WIDTH,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}if(ct.top===1||ct.bottom===1){nt+=this._createSelectionPiece(ot,st,SelectionsOverlay.SELECTION_CLASS_NAME,gt.left+gt.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH);let ft=SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME;ct.top===1&&(ft+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),ct.bottom===1&&(ft+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),nt+=this._createSelectionPiece(ot,st,ft,gt.left+gt.width,SelectionsOverlay.ROUNDED_PIECE_WIDTH)}}let ht=SelectionsOverlay.SELECTION_CLASS_NAME;if(c){const ut=gt.startStyle,ct=gt.endStyle;ut.top===0&&(ht+=" "+SelectionsOverlay.SELECTION_TOP_LEFT),ut.bottom===0&&(ht+=" "+SelectionsOverlay.SELECTION_BOTTOM_LEFT),ct.top===0&&(ht+=" "+SelectionsOverlay.SELECTION_TOP_RIGHT),ct.bottom===0&&(ht+=" "+SelectionsOverlay.SELECTION_BOTTOM_RIGHT)}rt+=this._createSelectionPiece(ot,st,ht,gt.left,gt.width)}e[it][0]+=nt,e[it][1]+=rt}}prepareRender(e){const i=[],o=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber;for(let d=o;d<=a;d++){const _=d-o;i[_]=["",""]}const c=[];for(let d=0,_=this._selections.length;d<_;d++){const b=this._selections[d];if(b.isEmpty()){c[d]=null;continue}const k=this._getVisibleRangesWithStyle(b,e,this._previousFrameVisibleRangesWithStyle[d]);c[d]=k,this._actualRenderOneSelection(i,o,this._selections.length>1,k)}this._previousFrameVisibleRangesWithStyle=c,this._renderResult=i.map(([d,_])=>d+_)}render(e,i){if(!this._renderResult)return"";const o=i-e;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}SelectionsOverlay.SELECTION_CLASS_NAME="selected-text";SelectionsOverlay.SELECTION_TOP_LEFT="top-left-radius";SelectionsOverlay.SELECTION_BOTTOM_LEFT="bottom-left-radius";SelectionsOverlay.SELECTION_TOP_RIGHT="top-right-radius";SelectionsOverlay.SELECTION_BOTTOM_RIGHT="bottom-right-radius";SelectionsOverlay.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";SelectionsOverlay.ROUNDED_PIECE_WIDTH=10;registerThemingParticipant((s,e)=>{const i=s.getColor(editorSelectionBackground);i&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${i}; }`);const o=s.getColor(editorInactiveSelection);o&&e.addRule(`.monaco-editor .selected-text { background-color: ${o}; }`);const a=s.getColor(editorSelectionForeground);a&&!a.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${a}; }`)});function abs(s){return s<0?-s:s}const viewCursors="";class ViewCursorRenderData{constructor(e,i,o,a,c,d){this.top=e,this.left=i,this.width=o,this.height=a,this.textContent=c,this.textContentClassName=d}}class ViewCursor{constructor(e){this._context=e;const i=this._context.configuration.options,o=i.get(46);this._cursorStyle=i.get(24),this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=createFastDomNode(document.createElement("div")),this._domNode.setClassName(`cursor ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),applyFontInfo(this._domNode,o),this._domNode.setDisplay("none"),this._position=new Position$1(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(46);return this._cursorStyle=i.get(24),this._lineHeight=i.get(61),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(27),this._typicalHalfwidthCharacterWidth),applyFontInfo(this._domNode,o),!0}onCursorPositionChanged(e){return this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:i}=this._position,o=this._context.viewModel.getLineContent(e),[a,c]=getCharContainingOffset(o,i-1);return[new Position$1(e,a+1),o.substring(a,c)]}_prepareRender(e){let i="";const[o,a]=this._getGraphemeAwarePosition();if(this._cursorStyle===TextEditorCursorStyle$1.Line||this._cursorStyle===TextEditorCursorStyle$1.LineThin){const et=e.visibleRangeForPosition(o);if(!et||et.outsideRenderedLine)return null;let tt;this._cursorStyle===TextEditorCursorStyle$1.Line?(tt=computeScreenAwareSize(this._lineCursorWidth>0?this._lineCursorWidth:2),tt>2&&(i=a)):tt=computeScreenAwareSize(1);let it=et.left;tt>=2&&it>=1&&(it-=1);const st=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta;return new ViewCursorRenderData(st,it,tt,this._lineHeight,i,"")}const c=e.linesVisibleRangesForRange(new Range$2(o.lineNumber,o.column,o.lineNumber,o.column+a.length),!1);if(!c||c.length===0)return null;const d=c[0];if(d.outsideRenderedLine||d.ranges.length===0)return null;const _=d.ranges[0],b=a==="	"?this._typicalHalfwidthCharacterWidth:_.width<1?this._typicalHalfwidthCharacterWidth:_.width;let k="";if(this._cursorStyle===TextEditorCursorStyle$1.Block){const et=this._context.viewModel.getViewLineData(o.lineNumber);i=a;const tt=et.tokens.findTokenIndexAtOffset(o.column-1);k=et.tokens.getClassName(tt)}let j=e.getVerticalOffsetForLineNumber(o.lineNumber)-e.bigNumbersDelta,_e=this._lineHeight;return(this._cursorStyle===TextEditorCursorStyle$1.Underline||this._cursorStyle===TextEditorCursorStyle$1.UnderlineThin)&&(j+=this._lineHeight-2,_e=2),new ViewCursorRenderData(j,_.left,b,_e,i,k)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class ViewCursors extends ViewPart{constructor(e){super(e);const i=this._context.configuration.options;this._readOnly=i.get(83),this._cursorBlinking=i.get(22),this._cursorStyle=i.get(24),this._cursorSmoothCaretAnimation=i.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new ViewCursor(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=createFastDomNode(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new TimeoutTimer,this._cursorFlatBlinkInterval=new IntervalTimer,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const i=this._context.configuration.options;this._readOnly=i.get(83),this._cursorBlinking=i.get(22),this._cursorStyle=i.get(24),this._cursorSmoothCaretAnimation=i.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let o=0,a=this._secondaryCursors.length;o<a;o++)this._secondaryCursors[o].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,i){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<i.length){const o=i.length-this._secondaryCursors.length;for(let a=0;a<o;a++){const c=new ViewCursor(this._context);this._domNode.domNode.insertBefore(c.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(c)}}else if(this._secondaryCursors.length>i.length){const o=this._secondaryCursors.length-i.length;for(let a=0;a<o;a++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<i.length;o++)this._secondaryCursors[o].onCursorPositionChanged(i[o])}onCursorStateChanged(e){const i=[];for(let a=0,c=e.selections.length;a<c;a++)i[a]=e.selections[a].getPosition();this._onCursorPositionChanged(i[0],i.slice(1));const o=e.selections[0].isEmpty();return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const i=o=>{for(let a=0,c=e.ranges.length;a<c;a++)if(e.ranges[a].fromLineNumber<=o.lineNumber&&o.lineNumber<=e.ranges[a].toLineNumber)return!0;return!1};if(i(this._primaryCursor.getPosition()))return!0;for(const o of this._secondaryCursors)if(i(o.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),i=e===0,o=e===5;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!i&&!o&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},ViewCursors.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},ViewCursors.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case TextEditorCursorStyle$1.Line:e+=" cursor-line-style";break;case TextEditorCursorStyle$1.Block:e+=" cursor-block-style";break;case TextEditorCursorStyle$1.Underline:e+=" cursor-underline-style";break;case TextEditorCursorStyle$1.LineThin:e+=" cursor-line-thin-style";break;case TextEditorCursorStyle$1.BlockOutline:e+=" cursor-block-outline-style";break;case TextEditorCursorStyle$1.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,i=this._secondaryCursors.length;e<i;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,i=this._secondaryCursors.length;e<i;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let i=0,o=this._secondaryCursors.length;i<o;i++)this._secondaryCursors[i].prepareRender(e)}render(e){const i=[];let o=0;const a=this._primaryCursor.render(e);a&&(i[o++]=a);for(let c=0,d=this._secondaryCursors.length;c<d;c++){const _=this._secondaryCursors[c].render(e);_&&(i[o++]=_)}this._renderData=i}getLastRenderData(){return this._renderData}}ViewCursors.BLINK_INTERVAL=500;registerThemingParticipant((s,e)=>{const i=s.getColor(editorCursorForeground);if(i){let o=s.getColor(editorCursorBackground);o||(o=i.opposite()),e.addRule(`.monaco-editor .inputarea.ime-input { caret-color: ${i}; }`),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${i}; border-color: ${i}; color: ${o}; }`),isHighContrast(s.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}});const invalidFunc$1=()=>{throw new Error("Invalid change accessor")};class ViewZones extends ViewPart{constructor(e){super(e);const i=this._context.configuration.options,o=i.get(133);this._lineHeight=i.get(61),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=createFastDomNode(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),i=new Map;for(const a of e)i.set(a.id,a);let o=!1;return this._context.viewModel.changeWhitespace(a=>{const c=Object.keys(this._zones);for(let d=0,_=c.length;d<_;d++){const b=c[d],k=this._zones[b],j=this._computeWhitespaceProps(k.delegate);k.isInHiddenArea=j.isInHiddenArea;const _e=i.get(b);_e&&(_e.afterLineNumber!==j.afterViewLineNumber||_e.height!==j.heightInPx)&&(a.changeOneWhitespace(b,j.afterViewLineNumber,j.heightInPx),this._safeCallOnComputedHeight(k.delegate,j.heightInPx),o=!0)}}),o}onConfigurationChanged(e){const i=this._context.configuration.options,o=i.get(133);return this._lineHeight=i.get(61),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,e.hasChanged(61)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let i;if(typeof e.afterColumn<"u")i=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const d=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;i=new Position$1(d,this._context.viewModel.model.getLineMaxColumn(d))}let o;i.column===this._context.viewModel.model.getLineMaxColumn(i.lineNumber)?o=this._context.viewModel.model.validatePosition({lineNumber:i.lineNumber+1,column:1}):o=this._context.viewModel.model.validatePosition({lineNumber:i.lineNumber,column:i.column+1});const a=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i,e.afterColumnAffinity),c=this._context.viewModel.coordinatesConverter.modelPositionIsVisible(o);return{isInHiddenArea:!c,afterViewLineNumber:a.lineNumber,heightInPx:c?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let i=!1;return this._context.viewModel.changeWhitespace(o=>{const a={addZone:c=>(i=!0,this._addZone(o,c)),removeZone:c=>{!c||(i=this._removeZone(o,c)||i)},layoutZone:c=>{!c||(i=this._layoutZone(o,c)||i)}};safeInvoke1Arg(e,a),a.addZone=invalidFunc$1,a.removeZone=invalidFunc$1,a.layoutZone=invalidFunc$1}),i}_addZone(e,i){const o=this._computeWhitespaceProps(i),c={whitespaceId:e.insertWhitespace(o.afterViewLineNumber,this._getZoneOrdinal(i),o.heightInPx,o.minWidthInPx),delegate:i,isInHiddenArea:o.isInHiddenArea,isVisible:!1,domNode:createFastDomNode(i.domNode),marginDomNode:i.marginDomNode?createFastDomNode(i.marginDomNode):null};return this._safeCallOnComputedHeight(c.delegate,o.heightInPx),c.domNode.setPosition("absolute"),c.domNode.domNode.style.width="100%",c.domNode.setDisplay("none"),c.domNode.setAttribute("monaco-view-zone",c.whitespaceId),this.domNode.appendChild(c.domNode),c.marginDomNode&&(c.marginDomNode.setPosition("absolute"),c.marginDomNode.domNode.style.width="100%",c.marginDomNode.setDisplay("none"),c.marginDomNode.setAttribute("monaco-view-zone",c.whitespaceId),this.marginDomNode.appendChild(c.marginDomNode)),this._zones[c.whitespaceId]=c,this.setShouldRender(),c.whitespaceId}_removeZone(e,i){if(this._zones.hasOwnProperty(i)){const o=this._zones[i];return delete this._zones[i],e.removeWhitespace(o.whitespaceId),o.domNode.removeAttribute("monaco-visible-view-zone"),o.domNode.removeAttribute("monaco-view-zone"),o.domNode.domNode.parentNode.removeChild(o.domNode.domNode),o.marginDomNode&&(o.marginDomNode.removeAttribute("monaco-visible-view-zone"),o.marginDomNode.removeAttribute("monaco-view-zone"),o.marginDomNode.domNode.parentNode.removeChild(o.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,i){if(this._zones.hasOwnProperty(i)){const o=this._zones[i],a=this._computeWhitespaceProps(o.delegate);return o.isInHiddenArea=a.isInHiddenArea,e.changeOneWhitespace(o.whitespaceId,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(o.delegate,a.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const i=this._zones[e];return Boolean(i.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,i){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(i)}catch(o){onUnexpectedError(o)}}_safeCallOnDomNodeTop(e,i){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(i)}catch(o){onUnexpectedError(o)}}prepareRender(e){}render(e){const i=e.viewportData.whitespaceViewportData,o={};let a=!1;for(const d of i)this._zones[d.id].isInHiddenArea||(o[d.id]=d,a=!0);const c=Object.keys(this._zones);for(let d=0,_=c.length;d<_;d++){const b=c[d],k=this._zones[b];let j=0,_e=0,et="none";o.hasOwnProperty(b)?(j=o[b].verticalOffset-e.bigNumbersDelta,_e=o[b].height,et="block",k.isVisible||(k.domNode.setAttribute("monaco-visible-view-zone","true"),k.isVisible=!0),this._safeCallOnDomNodeTop(k.delegate,e.getScrolledTopFromAbsoluteTop(o[b].verticalOffset))):(k.isVisible&&(k.domNode.removeAttribute("monaco-visible-view-zone"),k.isVisible=!1),this._safeCallOnDomNodeTop(k.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),k.domNode.setTop(j),k.domNode.setHeight(_e),k.domNode.setDisplay(et),k.marginDomNode&&(k.marginDomNode.setTop(j),k.marginDomNode.setHeight(_e),k.marginDomNode.setDisplay(et))}a&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function safeInvoke1Arg(s,e){try{return s(e)}catch(i){onUnexpectedError(i)}}class EditorTheme{constructor(e){this._theme=e}get type(){return this._theme.type}get value(){return this._theme}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class ViewContext{constructor(e,i,o){this.configuration=e,this.theme=new EditorTheme(i),this.viewModel=o,this.viewLayout=o.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}class ViewportData{constructor(e,i,o,a){this.selections=e,this.startLineNumber=i.startLineNumber|0,this.endLineNumber=i.endLineNumber|0,this.relativeVerticalOffset=i.relativeVerticalOffset,this.bigNumbersDelta=i.bigNumbersDelta|0,this.whitespaceViewportData=o,this._model=a,this.visibleRange=new Range$2(i.startLineNumber,this._model.getLineMinColumn(i.startLineNumber),i.endLineNumber,this._model.getLineMaxColumn(i.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}const blockDecorations="";class BlockDecorations extends ViewPart{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const o=this._context.configuration.options.get(133),a=o.contentWidth-o.verticalScrollbarWidth;return this.contentWidth!==a&&(this.contentWidth=a,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let i=0;const o=e.getDecorationsInViewport();for(const a of o){if(!a.options.blockClassName)continue;let c=this.blocks[i];c||(c=this.blocks[i]=createFastDomNode(document.createElement("div")),this.domNode.appendChild(c));const d=e.getVerticalOffsetForLineNumber(a.range.startLineNumber),_=e.getVerticalOffsetForLineNumber(a.range.endLineNumber+1);c.setClassName("blockDecorations-block "+a.options.blockClassName),c.setLeft(e.scrollLeft),c.setWidth(this.contentWidth),c.setTop(d),c.setHeight(_-d),i++}for(let a=i;a<this.blocks.length;a++)this.blocks[a].domNode.remove();this.blocks.length=i}}class View extends ViewEventHandler{constructor(e,i,o,a,c,d){super(),this._selections=[new Selection$1(1,1,1,1)],this._renderAnimationFrame=null;const _=new ViewController(i,a,c,e);this._context=new ViewContext(i,o,a),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=new TextAreaHandler(this._context,_,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=createFastDomNode(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=createFastDomNode(document.createElement("div")),PartFingerprints.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new EditorScrollbar(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new ViewLines(this._context,this._linesContent),this._viewZones=new ViewZones(this._context),this._viewParts.push(this._viewZones);const b=new DecorationsOverviewRuler(this._context);this._viewParts.push(b);const k=new ScrollDecorationViewPart(this._context);this._viewParts.push(k);const j=new ContentViewOverlays(this._context);this._viewParts.push(j),j.addDynamicOverlay(new CurrentLineHighlightOverlay(this._context)),j.addDynamicOverlay(new SelectionsOverlay(this._context)),j.addDynamicOverlay(new IndentGuidesOverlay(this._context)),j.addDynamicOverlay(new DecorationsOverlay(this._context));const _e=new MarginViewOverlays(this._context);this._viewParts.push(_e),_e.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(this._context)),_e.addDynamicOverlay(new GlyphMarginOverlay(this._context)),_e.addDynamicOverlay(new MarginViewLineDecorationsOverlay(this._context)),_e.addDynamicOverlay(new LinesDecorationsOverlay(this._context)),_e.addDynamicOverlay(new LineNumbersOverlay(this._context));const et=new Margin(this._context);et.getDomNode().appendChild(this._viewZones.marginDomNode),et.getDomNode().appendChild(_e.getDomNode()),this._viewParts.push(et),this._contentWidgets=new ViewContentWidgets(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new ViewCursors(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new ViewOverlayWidgets(this._context),this._viewParts.push(this._overlayWidgets);const tt=new Rulers(this._context);this._viewParts.push(tt);const it=new BlockDecorations(this._context);this._viewParts.push(it);const st=new Minimap(this._context);if(this._viewParts.push(st),b){const ot=this._scrollbar.getOverviewRulerLayoutInfo();ot.parent.insertBefore(b.getDomNode(),ot.insertBefore)}this._linesContent.appendChild(j.getDomNode()),this._linesContent.appendChild(tt.domNode),this._linesContent.appendChild(it.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(et.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(k.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(st.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),d?d.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new PointerHandler(this._context,_,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],i=this._textAreaHandler.getLastRenderData();return new PointerHandlerLastRenderData(e,i)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,i)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,i)),visibleRangeForPosition:(e,i)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Position$1(e,i))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const i=this._context.configuration.options.get(133);this.domNode.setWidth(i.width),this.domNode.setHeight(i.height),this._overflowGuardContainer.setWidth(i.width),this._overflowGuardContainer.setHeight(i.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(130)+" "+getThemeTypeSelector(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){safeInvokeNoArg(()=>this._actualRender())}_getViewPartsToRender(){const e=[];let i=0;for(const o of this._viewParts)o.shouldRender()&&(e[i++]=o);return e}_actualRender(){if(!isInDOM(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const i=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(i.startLineNumber,i.endLineNumber,i.centeredLineNumber);const o=new ViewportData(this._selections,i,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(o),this._viewLines.shouldRender()&&(this._viewLines.renderText(o),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const a=new RenderingContext(this._context.viewLayout,o,this._viewLines);for(const c of e)c.prepareRender(a);for(const c of e)c.render(a),c.onDidRender()}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop},1),this._context.viewModel.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,i){const o=this._context.viewModel.model.validatePosition({lineNumber:e,column:i}),a=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);this._flushAccumulatedAndRenderNow();const c=this._viewLines.visibleRangeForPosition(new Position$1(a.lineNumber,a.column));return c?c.left:-1}getTargetAtClientPoint(e,i){const o=this._pointerHandler.getTargetAtClientPoint(e,i);return o?ViewUserInputEvents.convertViewToModelMouseTarget(o,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new OverviewRuler(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,i){if(i){this._viewLines.forceShouldRender();for(const o of this._viewParts)o.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var i,o;let a=e.position&&e.position.range||null;if(a===null){const d=e.position?e.position.position:null;d!==null&&(a=new Range$2(d.lineNumber,d.column,d.lineNumber,d.column))}const c=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,a,c,(o=(i=e.position)===null||i===void 0?void 0:i.positionAffinity)!==null&&o!==void 0?o:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const i=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,i)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function safeInvokeNoArg(s){try{return s()}catch(e){onUnexpectedError(e)}}class Cursor{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new SingleCursorState(new Range$2(1,1,1,1),0,new Position$1(1,1),0),new SingleCursorState(new Range$2(1,1,1,1),0,new Position$1(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){!this._trackSelection||(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new CursorState(this.modelState,this.viewState)}readSelectionFromMarkers(e){const i=e.model._getTrackedRange(this._selTrackedRange);return Selection$1.fromRange(i,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,i,o){this._setState(e,i,o)}static _validatePositionWithCache(e,i,o,a){return i.equals(o)?a:e.normalizePosition(i,2)}static _validateViewState(e,i){const o=i.position,a=i.selectionStart.getStartPosition(),c=i.selectionStart.getEndPosition(),d=e.normalizePosition(o,2),_=this._validatePositionWithCache(e,a,o,d),b=this._validatePositionWithCache(e,c,a,_);return o.equals(d)&&a.equals(_)&&c.equals(b)?i:new SingleCursorState(Range$2.fromPositions(_,b),i.selectionStartLeftoverVisibleColumns+a.column-_.column,d,i.leftoverVisibleColumns+o.column-d.column)}_setState(e,i,o){if(o&&(o=Cursor._validateViewState(e.viewModel,o)),i){const a=e.model.validateRange(i.selectionStart),c=i.selectionStart.equalsRange(a)?i.selectionStartLeftoverVisibleColumns:0,d=e.model.validatePosition(i.position),_=i.position.equals(d)?i.leftoverVisibleColumns:0;i=new SingleCursorState(a,c,d,_)}else{if(!o)return;const a=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(o.selectionStart)),c=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(o.position));i=new SingleCursorState(a,o.selectionStartLeftoverVisibleColumns,c,o.leftoverVisibleColumns)}if(o){const a=e.coordinatesConverter.validateViewRange(o.selectionStart,i.selectionStart),c=e.coordinatesConverter.validateViewPosition(o.position,i.position);o=new SingleCursorState(a,i.selectionStartLeftoverVisibleColumns,c,i.leftoverVisibleColumns)}else{const a=e.coordinatesConverter.convertModelPositionToViewPosition(new Position$1(i.selectionStart.startLineNumber,i.selectionStart.startColumn)),c=e.coordinatesConverter.convertModelPositionToViewPosition(new Position$1(i.selectionStart.endLineNumber,i.selectionStart.endColumn)),d=new Range$2(a.lineNumber,a.column,c.lineNumber,c.column),_=e.coordinatesConverter.convertModelPositionToViewPosition(i.position);o=new SingleCursorState(d,i.selectionStartLeftoverVisibleColumns,_,i.leftoverVisibleColumns)}this.modelState=i,this.viewState=o,this._updateTrackedRange(e)}}class CursorCollection{constructor(e){this.context=e,this.cursors=[new Cursor(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return findMinBy(this.cursors,compareBy(e=>e.viewState.position,Position$1.compare)).viewState.position}getBottomMostViewPosition(){return findLastMaxBy(this.cursors,compareBy(e=>e.viewState.position,Position$1.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(CursorState.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const i=this.cursors.length-1,o=e.length;if(i<o){const a=o-i;for(let c=0;c<a;c++)this._addSecondaryCursor()}else if(i>o){const a=i-o;for(let c=0;c<a;c++)this._removeSecondaryCursor(this.cursors.length-2)}for(let a=0;a<o;a++)this.cursors[a+1].setState(this.context,e[a].modelState,e[a].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new Cursor(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),i=[];for(let o=0,a=e.length;o<a;o++)i.push({index:o,selection:e[o].modelState.selection});i.sort(compareBy(o=>o.selection,Range$2.compareRangesUsingStarts));for(let o=0;o<i.length-1;o++){const a=i[o],c=i[o+1],d=a.selection,_=c.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let b;if(_.isEmpty()||d.isEmpty()?b=_.getStartPosition().isBeforeOrEqual(d.getEndPosition()):b=_.getStartPosition().isBefore(d.getEndPosition()),b){const k=a.index<c.index?o:o+1,j=a.index<c.index?o+1:o,_e=i[j].index,et=i[k].index,tt=i[j].selection,it=i[k].selection;if(!tt.equalsSelection(it)){const st=tt.plusRange(it),ot=tt.selectionStartLineNumber===tt.startLineNumber&&tt.selectionStartColumn===tt.startColumn,nt=it.selectionStartLineNumber===it.startLineNumber&&it.selectionStartColumn===it.startColumn;let rt;_e===this.lastAddedCursorIndex?(rt=ot,this.lastAddedCursorIndex=et):rt=nt;let at;rt?at=new Selection$1(st.startLineNumber,st.startColumn,st.endLineNumber,st.endColumn):at=new Selection$1(st.endLineNumber,st.endColumn,st.startLineNumber,st.startColumn),i[k].selection=at;const lt=CursorState.fromModelSelection(at);e[et].setState(this.context,lt.modelState,lt.viewState)}for(const st of i)st.index>_e&&st.index--;e.splice(_e,1),i.splice(j,1),this._removeSecondaryCursor(_e-1),o--}}}}class CursorContext{constructor(e,i,o,a){this._cursorContextBrand=void 0,this.model=e,this.viewModel=i,this.coordinatesConverter=o,this.cursorConfig=a}}class ModelRawFlush{constructor(){this.changeType=1}}class LineInjectedText{constructor(e,i,o,a,c){this.ownerId=e,this.lineNumber=i,this.column=o,this.options=a,this.order=c}static applyInjectedText(e,i){if(!i||i.length===0)return e;let o="",a=0;for(const c of i)o+=e.substring(a,c.column-1),a=c.column-1,o+=c.options.content;return o+=e.substring(a),o}static fromDecorations(e){const i=[];for(const o of e)o.options.before&&o.options.before.content.length>0&&i.push(new LineInjectedText(o.ownerId,o.range.startLineNumber,o.range.startColumn,o.options.before,0)),o.options.after&&o.options.after.content.length>0&&i.push(new LineInjectedText(o.ownerId,o.range.endLineNumber,o.range.endColumn,o.options.after,1));return i.sort((o,a)=>o.lineNumber===a.lineNumber?o.column===a.column?o.order-a.order:o.column-a.column:o.lineNumber-a.lineNumber),i}}class ModelRawLineChanged{constructor(e,i,o){this.changeType=2,this.lineNumber=e,this.detail=i,this.injectedText=o}}class ModelRawLinesDeleted{constructor(e,i){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=i}}class ModelRawLinesInserted{constructor(e,i,o,a){this.changeType=4,this.injectedTexts=a,this.fromLineNumber=e,this.toLineNumber=i,this.detail=o}}class ModelRawEOLChanged{constructor(){this.changeType=5}}class ModelRawContentChangedEvent{constructor(e,i,o,a){this.changes=e,this.versionId=i,this.isUndoing=o,this.isRedoing=a,this.resultingSelection=null}containsEvent(e){for(let i=0,o=this.changes.length;i<o;i++)if(this.changes[i].changeType===e)return!0;return!1}static merge(e,i){const o=[].concat(e.changes).concat(i.changes),a=i.versionId,c=e.isUndoing||i.isUndoing,d=e.isRedoing||i.isRedoing;return new ModelRawContentChangedEvent(o,a,c,d)}}class ModelInjectedTextChangedEvent{constructor(e){this.changes=e}}class InternalModelContentChangeEvent{constructor(e,i){this.rawContentChangedEvent=e,this.contentChangedEvent=i}merge(e){const i=ModelRawContentChangedEvent.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),o=InternalModelContentChangeEvent._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new InternalModelContentChangeEvent(i,o)}static _mergeChangeEvents(e,i){const o=[].concat(e.changes).concat(i.changes),a=i.eol,c=i.versionId,d=e.isUndoing||i.isUndoing,_=e.isRedoing||i.isRedoing,b=e.isFlush||i.isFlush;return{changes:o,eol:a,versionId:c,isUndoing:d,isRedoing:_,isFlush:b}}}class ViewCompositionStartEvent{constructor(){this.type=0}}class ViewCompositionEndEvent{constructor(){this.type=1}}class ViewConfigurationChangedEvent{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class ViewCursorStateChangedEvent{constructor(e,i){this.type=3,this.selections=e,this.modelSelections=i}}class ViewDecorationsChangedEvent{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class ViewFlushedEvent{constructor(){this.type=5}}class ViewFocusChangedEvent{constructor(e){this.type=6,this.isFocused=e}}class ViewLanguageConfigurationEvent{constructor(){this.type=7}}class ViewLineMappingChangedEvent{constructor(){this.type=8}}class ViewLinesChangedEvent{constructor(e,i){this.fromLineNumber=e,this.count=i,this.type=9}}class ViewLinesDeletedEvent{constructor(e,i){this.type=10,this.fromLineNumber=e,this.toLineNumber=i}}class ViewLinesInsertedEvent{constructor(e,i){this.type=11,this.fromLineNumber=e,this.toLineNumber=i}}class ViewRevealRangeRequestEvent{constructor(e,i,o,a,c,d,_){this.source=e,this.minimalReveal=i,this.range=o,this.selections=a,this.verticalType=c,this.revealHorizontal=d,this.scrollType=_,this.type=12}}class ViewScrollChangedEvent{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class ViewThemeChangedEvent{constructor(e){this.theme=e,this.type=14}}class ViewTokensChangedEvent{constructor(e){this.type=15,this.ranges=e}}class ViewTokensColorsChangedEvent{constructor(){this.type=16}}class ViewZonesChangedEvent$1{constructor(){this.type=17}}class ViewModelEventDispatcher extends Disposable{constructor(){super(),this._onEvent=this._register(new Emitter$1),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let i=0,o=this._outgoingEvents.length;i<o;i++){const a=this._outgoingEvents[i].kind===e.kind?this._outgoingEvents[i].attemptToMerge(e):null;if(a){this._outgoingEvents[i]=a;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let i=0,o=this._eventHandlers.length;i<o;i++)this._eventHandlers[i]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let i=0;i<this._eventHandlers.length;i++)if(this._eventHandlers[i]===e){this._eventHandlers.splice(i,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new ViewModelEventsCollector),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,i=this._collector.viewEvents;this._collector=null;for(const o of e)this._addOutgoingEvent(o);i.length>0&&this._emitMany(i)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const i=this._eventHandlers.slice(0);for(const o of i)o.handleEvents(e)}}}class ViewModelEventsCollector{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class ContentSizeChangedEvent{constructor(e,i,o,a){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=i,this.contentWidth=o,this.contentHeight=a,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new ContentSizeChangedEvent(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class FocusChangedEvent{constructor(e,i){this.kind=1,this.oldHasFocus=e,this.hasFocus=i}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new FocusChangedEvent(this.oldHasFocus,e.hasFocus)}}class ScrollChangedEvent{constructor(e,i,o,a,c,d,_,b){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=i,this._oldScrollHeight=o,this._oldScrollTop=a,this.scrollWidth=c,this.scrollLeft=d,this.scrollHeight=_,this.scrollTop=b,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new ScrollChangedEvent(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class ViewZonesChangedEvent{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class HiddenAreasChangedEvent{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class CursorStateChangedEvent{constructor(e,i,o,a,c,d,_){this.kind=6,this.oldSelections=e,this.selections=i,this.oldModelVersionId=o,this.modelVersionId=a,this.source=c,this.reason=d,this.reachedMaxCursorCount=_}static _selectionsAreEqual(e,i){if(!e&&!i)return!0;if(!e||!i)return!1;const o=e.length,a=i.length;if(o!==a)return!1;for(let c=0;c<o;c++)if(!e[c].equalsSelection(i[c]))return!1;return!0}isNoOp(){return CursorStateChangedEvent._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new CursorStateChangedEvent(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class ReadOnlyEditAttemptEvent{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class ModelDecorationsChangedEvent{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class ModelLanguageChangedEvent{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class ModelLanguageConfigurationChangedEvent{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class ModelContentChangedEvent{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class ModelOptionsChangedEvent{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class ModelTokensChangedEvent{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class CursorsController extends Disposable{constructor(e,i,o,a){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=i,this._coordinatesConverter=o,this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,a),this._cursors=new CursorCollection(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=dispose(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new CursorContext(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let i=0;i<this._autoClosedActions.length;i++){const o=this._autoClosedActions[i];o.isValid(e)||(o.dispose(),this._autoClosedActions.splice(i,1),i--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,i,o,a){let c=!1;a!==null&&a.length>CursorsController.MAX_CURSOR_COUNT&&(a=a.slice(0,CursorsController.MAX_CURSOR_COUNT),c=!0);const d=CursorModelState.from(this._model,this);return this._cursors.setStates(a),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,i,o,d,c)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,i,o,a,c,d){const _=this._cursors.getViewPositions();let b=null,k=null;_.length>1?k=this._cursors.getViewSelections():b=Range$2.fromPositions(_[0],_[0]),e.emitViewEvent(new ViewRevealRangeRequestEvent(i,o,b,k,a,c,d))}saveState(){const e=[],i=this._cursors.getSelections();for(let o=0,a=i.length;o<a;o++){const c=i[o];e.push({inSelectionMode:!c.isEmpty(),selectionStart:{lineNumber:c.selectionStartLineNumber,column:c.selectionStartColumn},position:{lineNumber:c.positionLineNumber,column:c.positionColumn}})}return e}restoreState(e,i){const o=[];for(let a=0,c=i.length;a<c;a++){const d=i[a];let _=1,b=1;d.position&&d.position.lineNumber&&(_=d.position.lineNumber),d.position&&d.position.column&&(b=d.position.column);let k=_,j=b;d.selectionStart&&d.selectionStart.lineNumber&&(k=d.selectionStart.lineNumber),d.selectionStart&&d.selectionStart.column&&(j=d.selectionStart.column),o.push({selectionStartLineNumber:k,selectionStartColumn:j,positionLineNumber:_,positionColumn:b})}this.setStates(e,"restoreState",0,CursorState.fromModelSelections(o)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,i){if(i instanceof ModelInjectedTextChangedEvent){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const o=i.rawContentChangedEvent;if(this._knownModelVersionId=o.versionId,this._isHandling)return;const a=o.containsEvent(1);if(this._prevEditOperationType=0,a)this._cursors.dispose(),this._cursors=new CursorCollection(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&o.resultingSelection&&o.resultingSelection.length>0){const c=CursorState.fromModelSelections(o.resultingSelection);this.setStates(e,"modelChange",o.isUndoing?5:o.isRedoing?6:2,c)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const c=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,CursorState.fromModelSelections(c))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),i=e.viewState.selectionStart.getStartPosition(),o=e.viewState.position;return{isReal:!1,fromViewLineNumber:i.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i),toViewLineNumber:o.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,o)}}getSelections(){return this._cursors.getSelections()}setSelections(e,i,o,a){this.setStates(e,i,a,CursorState.fromModelSelections(o))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,i){const o=[],a=[];for(let _=0,b=e.length;_<b;_++)o.push({range:e[_],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),a.push({range:i[_],options:{description:"auto-closed-enclosing",stickiness:1}});const c=this._model.deltaDecorations([],o),d=this._model.deltaDecorations([],a);this._autoClosedActions.push(new AutoClosedAction(this._model,c,d))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const i=CommandExecutor.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(i){this._interpretCommandResult(i);const o=[],a=[];for(let c=0;c<e.commands.length;c++){const d=e.commands[c];d instanceof TypeWithAutoClosingCommand&&d.enclosingRange&&d.closeCharacterRange&&(o.push(d.closeCharacterRange),a.push(d.enclosingRange))}o.length>0&&this._pushAutoClosedAction(o,a),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,i,o,a,c){const d=CursorModelState.from(this._model,this);if(d.equals(a))return!1;const _=this._cursors.getSelections(),b=this._cursors.getViewSelections();if(e.emitViewEvent(new ViewCursorStateChangedEvent(b,_)),!a||a.cursorState.length!==d.cursorState.length||d.cursorState.some((k,j)=>!k.modelState.equals(a.cursorState[j].modelState))){const k=a?a.cursorState.map(_e=>_e.modelState.selection):null,j=a?a.modelVersionId:0;e.emitOutgoingEvent(new CursorStateChangedEvent(k,_,j,d.modelVersionId,i||"keyboard",o,c))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const i=[];for(let o=0,a=e.length;o<a;o++){const c=e[o];if(!c.text||c.text.indexOf(`
`)>=0)return null;const d=c.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!d)return null;const _=d[1],b=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(_);if(!b||b.length!==1)return null;const k=b[0].open,j=c.text.length-d[2].length-1,_e=c.text.lastIndexOf(k,j-1);if(_e===-1)return null;i.push([_e,j])}return i}executeEdits(e,i,o,a){let c=null;i==="snippet"&&(c=this._findAutoClosingPairs(o)),c&&(o[0]._isTracked=!0);const d=[],_=[],b=this._model.pushEditOperations(this.getSelections(),o,k=>{if(c)for(let _e=0,et=c.length;_e<et;_e++){const[tt,it]=c[_e],st=k[_e],ot=st.range.startLineNumber,nt=st.range.startColumn-1+tt,rt=st.range.startColumn-1+it;d.push(new Range$2(ot,rt+1,ot,rt+2)),_.push(new Range$2(ot,nt+1,ot,rt+2))}const j=a(k);return j&&(this._isHandling=!0),j});b&&(this._isHandling=!1,this.setSelections(e,i,b,0)),d.length>0&&this._pushAutoClosedAction(d,_)}_executeEdit(e,i,o,a=0){if(this.context.cursorConfig.readOnly)return;const c=CursorModelState.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(d){onUnexpectedError(d)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(i,o,a,c,!1)&&this.revealPrimary(i,o,!1,0,!0,0)}getAutoClosedCharacters(){return AutoClosedAction.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new CompositionState(this._model,this.getSelections())}endComposition(e,i){const o=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{i==="keyboard"&&this._executeEditOperation(TypeOperations.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,o,this.getSelections(),this.getAutoClosedCharacters()))},e,i)}type(e,i,o){this._executeEdit(()=>{if(o==="keyboard"){const a=i.length;let c=0;for(;c<a;){const d=nextCharLength(i,c),_=i.substr(c,d);this._executeEditOperation(TypeOperations.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),_)),c+=d}}else this._executeEditOperation(TypeOperations.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),i))},e,o)}compositionType(e,i,o,a,c,d){if(i.length===0&&o===0&&a===0){if(c!==0){const _=this.getSelections().map(b=>{const k=b.getPosition();return new Selection$1(k.lineNumber,k.column+c,k.lineNumber,k.column+c)});this.setSelections(e,d,_,0)}return}this._executeEdit(()=>{this._executeEditOperation(TypeOperations.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),i,o,a,c))},e,d)}paste(e,i,o,a,c){this._executeEdit(()=>{this._executeEditOperation(TypeOperations.paste(this.context.cursorConfig,this._model,this.getSelections(),i,o,a||[]))},e,c,4)}cut(e,i){this._executeEdit(()=>{this._executeEditOperation(DeleteOperations.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,i)}executeCommand(e,i,o){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new EditOperationResult(0,[i],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,o)}executeCommands(e,i,o){this._executeEdit(()=>{this._executeEditOperation(new EditOperationResult(0,i,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,o)}}CursorsController.MAX_CURSOR_COUNT=1e4;class CursorModelState{constructor(e,i){this.modelVersionId=e,this.cursorState=i}static from(e,i){return new CursorModelState(e.getVersionId(),i.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let i=0,o=this.cursorState.length;i<o;i++)if(!this.cursorState[i].equals(e.cursorState[i]))return!1;return!0}}class AutoClosedAction{constructor(e,i,o){this._model=e,this._autoClosedCharactersDecorations=i,this._autoClosedEnclosingDecorations=o}static getAllAutoClosedCharacters(e){let i=[];for(const o of e)i=i.concat(o.getAutoClosedCharactersRanges());return i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let i=0;i<this._autoClosedCharactersDecorations.length;i++){const o=this._model.getDecorationRange(this._autoClosedCharactersDecorations[i]);o&&e.push(o)}return e}isValid(e){const i=[];for(let o=0;o<this._autoClosedEnclosingDecorations.length;o++){const a=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[o]);if(a&&(i.push(a),a.startLineNumber!==a.endLineNumber))return!1}i.sort(Range$2.compareRangesUsingStarts),e.sort(Range$2.compareRangesUsingStarts);for(let o=0;o<e.length;o++)if(o>=i.length||!i[o].strictContainsRange(e[o]))return!1;return!0}}class CommandExecutor{static executeCommands(e,i,o){const a={model:e,selectionsBefore:i,trackedRanges:[],trackedRangesDirection:[]},c=this._innerExecuteCommands(a,o);for(let d=0,_=a.trackedRanges.length;d<_;d++)a.model._setTrackedRange(a.trackedRanges[d],null,0);return c}static _innerExecuteCommands(e,i){if(this._arrayIsEmpty(i))return null;const o=this._getEditOperations(e,i);if(o.operations.length===0)return null;const a=o.operations,c=this._getLoserCursorMap(a);if(c.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const d=[];for(let k=0,j=a.length;k<j;k++)c.hasOwnProperty(a[k].identifier.major.toString())||d.push(a[k]);o.hadTrackedEditOperation&&d.length>0&&(d[0]._isTracked=!0);let _=e.model.pushEditOperations(e.selectionsBefore,d,k=>{const j=[];for(let tt=0;tt<e.selectionsBefore.length;tt++)j[tt]=[];for(const tt of k)!tt.identifier||j[tt.identifier.major].push(tt);const _e=(tt,it)=>tt.identifier.minor-it.identifier.minor,et=[];for(let tt=0;tt<e.selectionsBefore.length;tt++)j[tt].length>0?(j[tt].sort(_e),et[tt]=i[tt].computeCursorState(e.model,{getInverseEditOperations:()=>j[tt],getTrackedSelection:it=>{const st=parseInt(it,10),ot=e.model._getTrackedRange(e.trackedRanges[st]);return e.trackedRangesDirection[st]===0?new Selection$1(ot.startLineNumber,ot.startColumn,ot.endLineNumber,ot.endColumn):new Selection$1(ot.endLineNumber,ot.endColumn,ot.startLineNumber,ot.startColumn)}})):et[tt]=e.selectionsBefore[tt];return et});_||(_=e.selectionsBefore);const b=[];for(const k in c)c.hasOwnProperty(k)&&b.push(parseInt(k,10));b.sort((k,j)=>j-k);for(const k of b)_.splice(k,1);return _}static _arrayIsEmpty(e){for(let i=0,o=e.length;i<o;i++)if(e[i])return!1;return!0}static _getEditOperations(e,i){let o=[],a=!1;for(let c=0,d=i.length;c<d;c++){const _=i[c];if(_){const b=this._getEditOperationsFromCommand(e,c,_);o=o.concat(b.operations),a=a||b.hadTrackedEditOperation}}return{operations:o,hadTrackedEditOperation:a}}static _getEditOperationsFromCommand(e,i,o){const a=[];let c=0;const d=(_e,et,tt=!1)=>{Range$2.isEmpty(_e)&&et===""||a.push({identifier:{major:i,minor:c++},range:_e,text:et,forceMoveMarkers:tt,isAutoWhitespaceEdit:o.insertsAutoWhitespace})};let _=!1;const j={addEditOperation:d,addTrackedEditOperation:(_e,et,tt)=>{_=!0,d(_e,et,tt)},trackSelection:(_e,et)=>{const tt=Selection$1.liftSelection(_e);let it;if(tt.isEmpty())if(typeof et=="boolean")et?it=2:it=3;else{const nt=e.model.getLineMaxColumn(tt.startLineNumber);tt.startColumn===nt?it=2:it=3}else it=1;const st=e.trackedRanges.length,ot=e.model._setTrackedRange(null,tt,it);return e.trackedRanges[st]=ot,e.trackedRangesDirection[st]=tt.getDirection(),st.toString()}};try{o.getEditOperations(e.model,j)}catch(_e){return onUnexpectedError(_e),{operations:[],hadTrackedEditOperation:!1}}return{operations:a,hadTrackedEditOperation:_}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((o,a)=>-Range$2.compareRangesUsingEnds(o.range,a.range));const i={};for(let o=1;o<e.length;o++){const a=e[o-1],c=e[o];if(Range$2.getStartPosition(a.range).isBefore(Range$2.getEndPosition(c.range))){let d;a.identifier.major>c.identifier.major?d=a.identifier.major:d=c.identifier.major,i[d.toString()]=!0;for(let _=0;_<e.length;_++)e[_].identifier.major===d&&(e.splice(_,1),_<o&&o--,_--);o>0&&o--}}return i}}class CompositionLineState{constructor(e,i,o){this.text=e,this.startSelection=i,this.endSelection=o}}class CompositionState{constructor(e,i){this._original=CompositionState._capture(e,i)}static _capture(e,i){const o=[];for(const a of i){if(a.startLineNumber!==a.endLineNumber)return null;o.push(new CompositionLineState(e.getLineContent(a.startLineNumber),a.startColumn-1,a.endColumn-1))}return o}deduceOutcome(e,i){if(!this._original)return null;const o=CompositionState._capture(e,i);if(!o||this._original.length!==o.length)return null;const a=[];for(let c=0,d=this._original.length;c<d;c++)a.push(CompositionState._deduceOutcome(this._original[c],o[c]));return a}static _deduceOutcome(e,i){const o=Math.min(e.startSelection,i.startSelection,commonPrefixLength(e.text,i.text)),a=Math.min(e.text.length-e.endSelection,i.text.length-i.endSelection,commonSuffixLength(e.text,i.text)),c=e.text.substring(o,e.text.length-a),d=i.text.substring(o,i.text.length-a);return new CompositionOutcome(c,e.startSelection-o,e.endSelection-o,d,i.startSelection-o,i.endSelection-o)}}class InternalEditorAction{constructor(e,i,o,a,c,d){this.id=e,this.label=i,this.alias=o,this._precondition=a,this._run=c,this._contextKeyService=d}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}function countEOL(s){let e=0,i=0,o=0,a=0;for(let c=0,d=s.length;c<d;c++){const _=s.charCodeAt(c);_===13?(e===0&&(i=c),e++,c+1<d&&s.charCodeAt(c+1)===10?(a|=2,c++):a|=3,o=c+1):_===10&&(a|=1,e===0&&(i=c),e++,o=c+1)}return e===0&&(i=s.length),[e,i,s.length-o,a]}class BracketInfo{constructor(e,i,o,a){this.range=e,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=o,this.isInvalid=a}}class BracketPairInfo{constructor(e,i,o,a,c,d){this.range=e,this.openingBracketRange=i,this.closingBracketRange=o,this.nestingLevel=a,this.nestingLevelOfEqualBracketType=c,this.bracketPairNode=d}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class BracketPairWithMinIndentationInfo extends BracketPairInfo{constructor(e,i,o,a,c,d,_){super(e,i,o,a,c,d),this.minVisibleColumnIndentation=_}}class LengthObj{constructor(e,i){this.lineCount=e,this.columnCount=i}toString(){return`${this.lineCount},${this.columnCount}`}}LengthObj.zero=new LengthObj(0,0);function lengthDiff(s,e,i,o){return s!==i?toLength(i-s,o):toLength(0,o-e)}const lengthZero=0;function lengthIsZero(s){return s===0}const factor=Math.pow(2,26);function toLength(s,e){return s*factor+e}function lengthToObj(s){const e=s,i=Math.floor(e/factor),o=e-i*factor;return new LengthObj(i,o)}function lengthGetLineCount(s){return Math.floor(s/factor)}function lengthGetColumnCountIfZeroLineCount(s){return s}function lengthAdd(s,e){return e<factor?s+e:s-s%factor+e}function lengthDiffNonNegative(s,e){const i=s,o=e;if(o-i<=0)return lengthZero;const c=Math.floor(i/factor),d=Math.floor(o/factor),_=o-d*factor;if(c===d){const b=i-c*factor;return toLength(0,_-b)}else return toLength(d-c,_)}function lengthLessThan(s,e){return s<e}function lengthLessThanEqual(s,e){return s<=e}function lengthGreaterThanEqual(s,e){return s>=e}function positionToLength(s){return toLength(s.lineNumber-1,s.column-1)}function lengthsToRange(s,e){const i=s,o=Math.floor(i/factor),a=i-o*factor,c=e,d=Math.floor(c/factor),_=c-d*factor;return new Range$2(o+1,a+1,d+1,_+1)}function lengthOfString(s){const e=splitLines(s);return toLength(e.length-1,e[e.length-1].length)}class TextEditInfo{constructor(e,i,o){this.startOffset=e,this.endOffset=i,this.newLength=o}}class BeforeEditPositionMapper{constructor(e,i){this.documentLength=i,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(o=>TextEditInfoCache.from(o))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const i=this.edits[this.nextEditIdx],o=i?this.translateOldToCur(i.offsetObj):this.documentLength;return lengthDiffNonNegative(e,o)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?toLength(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):toLength(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const i=lengthToObj(e);return i.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?toLength(i.lineCount-this.deltaOldToNewLineCount,i.columnCount-this.deltaOldToNewColumnCount):toLength(i.lineCount-this.deltaOldToNewLineCount,i.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const i=this.edits[this.nextEditIdx],o=this.translateOldToCur(i.endOffsetAfterObj);if(lengthLessThanEqual(o,e)){this.nextEditIdx++;const a=lengthToObj(o),c=lengthToObj(this.translateOldToCur(i.endOffsetBeforeObj)),d=a.lineCount-c.lineCount;this.deltaOldToNewLineCount+=d;const _=this.deltaLineIdxInOld===i.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,b=a.columnCount-c.columnCount;this.deltaOldToNewColumnCount=_+b,this.deltaLineIdxInOld=i.endOffsetBeforeObj.lineCount}else break}}}class TextEditInfoCache{constructor(e,i,o){this.endOffsetBeforeObj=lengthToObj(i),this.endOffsetAfterObj=lengthToObj(lengthAdd(e,o)),this.offsetObj=lengthToObj(e)}static from(e){return new TextEditInfoCache(e.startOffset,e.endOffset,e.newLength)}}const emptyArr=new Array;class SmallImmutableSet{constructor(e,i){this.items=e,this.additionalItems=i}static create(e,i){if(e<=128&&i.length===0){let o=SmallImmutableSet.cache[e];return o||(o=new SmallImmutableSet(e,i),SmallImmutableSet.cache[e]=o),o}return new SmallImmutableSet(e,i)}static getEmpty(){return this.empty}add(e,i){const o=i.getKey(e);let a=o>>5;if(a===0){const d=1<<o|this.items;return d===this.items?this:SmallImmutableSet.create(d,this.additionalItems)}a--;const c=this.additionalItems.slice(0);for(;c.length<a;)c.push(0);return c[a]|=1<<(o&31),SmallImmutableSet.create(this.items,c)}merge(e){const i=this.items|e.items;if(this.additionalItems===emptyArr&&e.additionalItems===emptyArr)return i===this.items?this:i===e.items?e:SmallImmutableSet.create(i,emptyArr);const o=new Array;for(let a=0;a<Math.max(this.additionalItems.length,e.additionalItems.length);a++){const c=this.additionalItems[a]||0,d=e.additionalItems[a]||0;o.push(c|d)}return SmallImmutableSet.create(i,o)}intersects(e){if((this.items&e.items)!==0)return!0;for(let i=0;i<Math.min(this.additionalItems.length,e.additionalItems.length);i++)if((this.additionalItems[i]&e.additionalItems[i])!==0)return!0;return!1}}SmallImmutableSet.cache=new Array(129);SmallImmutableSet.empty=SmallImmutableSet.create(0,emptyArr);const identityKeyProvider={getKey(s){return s}};class DenseKeyProvider{constructor(){this.items=new Map}getKey(e){let i=this.items.get(e);return i===void 0&&(i=this.items.size,this.items.set(e,i)),i}}class BaseAstNode{constructor(e){this._length=e}get length(){return this._length}}class PairAstNode extends BaseAstNode{constructor(e,i,o,a,c){super(e),this.openingBracket=i,this.child=o,this.closingBracket=a,this.missingOpeningBracketIds=c}static create(e,i,o){let a=e.length;return i&&(a=lengthAdd(a,i.length)),o&&(a=lengthAdd(a,o.length)),new PairAstNode(a,e,i,o,i?i.missingOpeningBracketIds:SmallImmutableSet.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new PairAstNode(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,i){return this.child?this.child.computeMinIndentation(lengthAdd(e,this.openingBracket.length),i):Number.MAX_SAFE_INTEGER}}class ListAstNode extends BaseAstNode{constructor(e,i,o){super(e),this.listHeight=i,this._missingOpeningBracketIds=o,this.cachedMinIndentation=-1}static create23(e,i,o,a=!1){let c=e.length,d=e.missingOpeningBracketIds;if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");if(c=lengthAdd(c,i.length),d=d.merge(i.missingOpeningBracketIds),o){if(e.listHeight!==o.listHeight)throw new Error("Invalid list heights");c=lengthAdd(c,o.length),d=d.merge(o.missingOpeningBracketIds)}return a?new Immutable23ListAstNode(c,e.listHeight+1,e,i,o,d):new TwoThreeListAstNode(c,e.listHeight+1,e,i,o,d)}static getEmpty(){return new ImmutableArrayListAstNode(lengthZero,0,[],SmallImmutableSet.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const i=this.getChild(e-1),o=i.kind===4?i.toMutable():i;return i!==o&&this.setChild(e-1,o),o}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const i=this.getChild(0),o=i.kind===4?i.toMutable():i;return i!==o&&this.setChild(0,o),o}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let i=this,o;for(;i.kind===4&&(o=i.childrenLength)>0;)i=i.getChild(o-1);return i.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let i=this.getChild(0).length,o=this.getChild(0).missingOpeningBracketIds;for(let a=1;a<e;a++){const c=this.getChild(a);i=lengthAdd(i,c.length),o=o.merge(c.missingOpeningBracketIds)}this._length=i,this._missingOpeningBracketIds=o,this.cachedMinIndentation=-1}computeMinIndentation(e,i){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let o=Number.MAX_SAFE_INTEGER,a=e;for(let c=0;c<this.childrenLength;c++){const d=this.getChild(c);d&&(o=Math.min(o,d.computeMinIndentation(a,i)),a=lengthAdd(a,d.length))}return this.cachedMinIndentation=o,o}}class TwoThreeListAstNode extends ListAstNode{constructor(e,i,o,a,c,d){super(e,i,d),this._item1=o,this._item2=a,this._item3=c}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,i){switch(e){case 0:this._item1=i;return;case 1:this._item2=i;return;case 2:this._item3=i;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new TwoThreeListAstNode(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Immutable23ListAstNode extends TwoThreeListAstNode{toMutable(){return new TwoThreeListAstNode(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class ArrayListAstNode extends ListAstNode{constructor(e,i,o,a){super(e,i,a),this._children=o}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,i){this._children[e]=i}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let i=0;i<this._children.length;i++)e[i]=this._children[i].deepClone();return new ArrayListAstNode(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ImmutableArrayListAstNode extends ArrayListAstNode{toMutable(){return new ArrayListAstNode(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const emptyArray=[];class ImmutableLeafAstNode extends BaseAstNode{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return emptyArray}deepClone(){return this}}class TextAstNode extends ImmutableLeafAstNode{get kind(){return 0}get missingOpeningBracketIds(){return SmallImmutableSet.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,i){const o=lengthToObj(e),a=(o.columnCount===0?o.lineCount:o.lineCount+1)+1,c=lengthGetLineCount(lengthAdd(e,this.length))+1;let d=Number.MAX_SAFE_INTEGER;for(let _=a;_<=c;_++){const b=i.getLineFirstNonWhitespaceColumn(_),k=i.getLineContent(_);if(b===0)continue;const j=CursorColumns.visibleColumnFromColumn(k,b,i.getOptions().tabSize);d=Math.min(d,j)}return d}}class BracketAstNode extends ImmutableLeafAstNode{constructor(e,i,o){super(e),this.bracketInfo=i,this.bracketIds=o}static create(e,i,o){return new BracketAstNode(e,i,o)}get kind(){return 1}get missingOpeningBracketIds(){return SmallImmutableSet.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,i){return Number.MAX_SAFE_INTEGER}}class InvalidBracketAstNode extends ImmutableLeafAstNode{constructor(e,i){super(i),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,i){return Number.MAX_SAFE_INTEGER}}class Token$1{constructor(e,i,o,a,c){this.length=e,this.kind=i,this.bracketId=o,this.bracketIds=a,this.astNode=c}}class TextBufferTokenizer{constructor(e,i){this.textModel=e,this.bracketTokens=i,this.reader=new NonPeekableTextBufferTokenizer(this.textModel,this.bracketTokens),this._offset=lengthZero,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return toLength(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=lengthAdd(this._offset,e);const i=lengthToObj(this._offset);this.reader.setPosition(i.lineCount,i.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=lengthAdd(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class NonPeekableTextBufferTokenizer{constructor(e,i){this.textModel=e,this.bracketTokens=i,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,i){e===this.lineIdx?(this.lineCharOffset=i,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=i,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const c=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=c.length,c}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,i=this.lineCharOffset;let o=0;for(;;){const c=this.lineTokens,d=c.getCount();let _=null;if(this.lineTokenOffset<d){const b=c.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<d&&b===c.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const k=TokenMetadata.getTokenType(b)===0,j=TokenMetadata.containsBalancedBrackets(b),_e=c.getEndOffset(this.lineTokenOffset);if(j&&k&&this.lineCharOffset<_e){const et=c.getLanguageId(this.lineTokenOffset),tt=this.line.substring(this.lineCharOffset,_e),it=this.bracketTokens.getSingleLanguageBracketTokens(et),st=it.regExpGlobal;if(st){st.lastIndex=0;const ot=st.exec(tt);ot&&(_=it.getToken(ot[0]),_&&(this.lineCharOffset+=ot.index))}}if(o+=_e-this.lineCharOffset,_)if(e!==this.lineIdx||i!==this.lineCharOffset){this.peekedToken=_;break}else return this.lineCharOffset+=_.length,_;else this.lineTokenOffset++,this.lineCharOffset=_e}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,o+=33,o>1e3))break;if(o>1500)break}const a=lengthDiff(e,i,this.lineIdx,this.lineCharOffset);return new Token$1(a,0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(a))}}class FastTokenizer{constructor(e,i){this.text=e,this._offset=lengthZero,this.idx=0;const o=i.getRegExpStr(),a=o?new RegExp(o+`|
`,"gi"):null,c=[];let d,_=0,b=0,k=0,j=0;const _e=new Array;for(let it=0;it<60;it++)_e.push(new Token$1(toLength(0,it),0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(toLength(0,it))));const et=new Array;for(let it=0;it<60;it++)et.push(new Token$1(toLength(1,it),0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(toLength(1,it))));if(a)for(a.lastIndex=0;(d=a.exec(e))!==null;){const it=d.index,st=d[0];if(st===`
`)_++,b=it+1;else{if(k!==it){let ot;if(j===_){const nt=it-k;if(nt<_e.length)ot=_e[nt];else{const rt=toLength(0,nt);ot=new Token$1(rt,0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(rt))}}else{const nt=_-j,rt=it-b;if(nt===1&&rt<et.length)ot=et[rt];else{const at=toLength(nt,rt);ot=new Token$1(at,0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(at))}}c.push(ot)}c.push(i.getToken(st)),k=it+st.length,j=_}}const tt=e.length;if(k!==tt){const it=j===_?toLength(0,tt-k):toLength(_-j,tt-b);c.push(new Token$1(it,0,-1,SmallImmutableSet.getEmpty(),new TextAstNode(it)))}this.length=toLength(_,tt-b),this.tokens=c}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new NotSupportedError}}class BracketTokens{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,i){function o(c){return i.getKey(`${c.languageId}:::${c.bracketText}`)}const a=new Map;for(const c of e.bracketsNew.openingBrackets){const d=toLength(0,c.bracketText.length),_=o(c),b=SmallImmutableSet.getEmpty().add(_,identityKeyProvider);a.set(c.bracketText,new Token$1(d,1,_,b,BracketAstNode.create(d,c,b)))}for(const c of e.bracketsNew.closingBrackets){const d=toLength(0,c.bracketText.length);let _=SmallImmutableSet.getEmpty();const b=c.getClosedBrackets();for(const k of b)_=_.add(o(k),identityKeyProvider);a.set(c.bracketText,new Token$1(d,2,o(b[0]),_,BracketAstNode.create(d,c,_)))}return new BracketTokens(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(i=>prepareBracketForRegExp(i)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[i,o]of this.map)if(o.kind===2&&o.bracketIds.intersects(e))return i}get isEmpty(){return this.map.size===0}}function prepareBracketForRegExp(s){let e=escapeRegExpCharacters(s);return/^[\w ]+/.test(s)&&(e=`\\b${e}`),/[\w ]+$/.test(s)&&(e=`${e}\\b`),e}class LanguageAgnosticBracketTokens{constructor(e,i){this.denseKeyProvider=e,this.getLanguageConfiguration=i,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let i=this.languageIdToBracketTokens.get(e);return i||(i=BracketTokens.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,i)),i}}function concat23Trees(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function i(){if(e>=s.length)return null;const d=e,_=s[d].listHeight;for(e++;e<s.length&&s[e].listHeight===_;)e++;return e-d>=2?concat23TreesOfSameHeight(d===0&&e===s.length?s:s.slice(d,e),!1):s[d]}let o=i(),a=i();if(!a)return o;for(let d=i();d;d=i())heightDiff(o,a)<=heightDiff(a,d)?(o=concat$1(o,a),a=d):a=concat$1(a,d);return concat$1(o,a)}function concat23TreesOfSameHeight(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let i=s.length;for(;i>3;){const o=i>>1;for(let a=0;a<o;a++){const c=a<<1;s[a]=ListAstNode.create23(s[c],s[c+1],c+3===i?s[c+2]:null,e)}i=o}return ListAstNode.create23(s[0],s[1],i>=3?s[2]:null,e)}function heightDiff(s,e){return Math.abs(s.listHeight-e.listHeight)}function concat$1(s,e){return s.listHeight===e.listHeight?ListAstNode.create23(s,e,null,!1):s.listHeight>e.listHeight?append(s,e):prepend(e,s)}function append(s,e){s=s.toMutable();let i=s;const o=new Array;let a;for(;;){if(e.listHeight===i.listHeight){a=e;break}if(i.kind!==4)throw new Error("unexpected");o.push(i),i=i.makeLastElementMutable()}for(let c=o.length-1;c>=0;c--){const d=o[c];a?d.childrenLength>=3?a=ListAstNode.create23(d.unappendChild(),a,null,!1):(d.appendChildOfSameHeight(a),a=void 0):d.handleChildrenChanged()}return a?ListAstNode.create23(s,a,null,!1):s}function prepend(s,e){s=s.toMutable();let i=s;const o=new Array;for(;e.listHeight!==i.listHeight;){if(i.kind!==4)throw new Error("unexpected");o.push(i),i=i.makeFirstElementMutable()}let a=e;for(let c=o.length-1;c>=0;c--){const d=o[c];a?d.childrenLength>=3?a=ListAstNode.create23(a,d.unprependChild(),null,!1):(d.prependChildOfSameHeight(a),a=void 0):d.handleChildrenChanged()}return a?ListAstNode.create23(a,s,null,!1):s}class NodeReader{constructor(e){this.lastOffset=lengthZero,this.nextNodes=[e],this.offsets=[lengthZero],this.idxs=[]}readLongestNodeAt(e,i){if(lengthLessThan(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const o=lastOrUndefined(this.nextNodes);if(!o)return;const a=lastOrUndefined(this.offsets);if(lengthLessThan(e,a))return;if(lengthLessThan(a,e))if(lengthAdd(a,o.length)<=e)this.nextNodeAfterCurrent();else{const c=getNextChildIdx(o);c!==-1?(this.nextNodes.push(o.getChild(c)),this.offsets.push(a),this.idxs.push(c)):this.nextNodeAfterCurrent()}else{if(i(o))return this.nextNodeAfterCurrent(),o;{const c=getNextChildIdx(o);if(c===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(o.getChild(c)),this.offsets.push(a),this.idxs.push(c)}}}}nextNodeAfterCurrent(){for(;;){const e=lastOrUndefined(this.offsets),i=lastOrUndefined(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const o=lastOrUndefined(this.nextNodes),a=getNextChildIdx(o,this.idxs[this.idxs.length-1]);if(a!==-1){this.nextNodes.push(o.getChild(a)),this.offsets.push(lengthAdd(e,i.length)),this.idxs[this.idxs.length-1]=a;break}else this.idxs.pop()}}}function getNextChildIdx(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}function lastOrUndefined(s){return s.length>0?s[s.length-1]:void 0}function parseDocument(s,e,i,o){return new Parser(s,e,i,o).parseDocument()}class Parser{constructor(e,i,o,a){if(this.tokenizer=e,this.createImmutableLists=a,this._itemsConstructed=0,this._itemsFromCache=0,o&&a)throw new Error("Not supported");this.oldNodeReader=o?new NodeReader(o):void 0,this.positionMapper=new BeforeEditPositionMapper(i,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(SmallImmutableSet.getEmpty());return e||(e=ListAstNode.getEmpty()),e}parseList(e){const i=new Array;for(;;){const a=this.tokenizer.peek();if(!a||a.kind===2&&a.bracketIds.intersects(e))break;const c=this.parseChild(e);c.kind===4&&c.childrenLength===0||i.push(c)}return this.oldNodeReader?concat23Trees(i):concat23TreesOfSameHeight(i,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const o=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!lengthIsZero(o)){const a=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),c=>lengthLessThan(c.length,o)?c.canBeReused(e):!1);if(a)return this._itemsFromCache++,this.tokenizer.skip(a.length),a}}this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new InvalidBracketAstNode(i.bracketIds,i.length);case 0:return i.astNode;case 1:{const o=e.merge(i.bracketIds),a=this.parseList(o),c=this.tokenizer.peek();return c&&c.kind===2&&(c.bracketId===i.bracketId||c.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),PairAstNode.create(i.astNode,a,c.astNode)):PairAstNode.create(i.astNode,a,null)}default:throw new Error("unexpected")}}}class BracketPairsTree extends Disposable{constructor(e,i){if(super(),this.textModel=e,this.getLanguageConfiguration=i,this.didChangeEmitter=new Emitter$1,this.denseKeyProvider=new DenseKeyProvider,this.brackets=new LanguageAgnosticBracketTokens(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,e.tokenization.backgroundTokenizationState===0){const o=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),a=new FastTokenizer(this.textModel.getValue(),o);this.initialAstWithoutTokens=parseDocument(a,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.tokenization.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const i=e.map(o=>new TextEditInfo(toLength(o.fromLineNumber-1,0),toLength(o.toLineNumber,0),toLength(o.toLineNumber-o.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(i,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const i=e.changes.map(o=>{const a=Range$2.lift(o.range);return new TextEditInfo(positionToLength(a.getStartPosition()),positionToLength(a.getEndPosition()),lengthOfString(o.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(i,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(i,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,i,o){const a=i,c=new TextBufferTokenizer(this.textModel,this.brackets);return parseDocument(c,e,a,o)}getBracketsInRange(e){const i=toLength(e.startLineNumber-1,e.startColumn-1),o=toLength(e.endLineNumber-1,e.endColumn-1),a=new Array,c=this.initialAstWithoutTokens||this.astWithTokens;return collectBrackets(c,lengthZero,c.length,i,o,a,0,new Map),a}getBracketPairsInRange(e,i){const o=new Array,a=positionToLength(e.getStartPosition()),c=positionToLength(e.getEndPosition()),d=this.initialAstWithoutTokens||this.astWithTokens,_=new CollectBracketPairsContext(o,i,this.textModel);return collectBracketPairs(d,lengthZero,d.length,a,c,_,0,new Map),o}getFirstBracketAfter(e){const i=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketAfter(i,lengthZero,i.length,positionToLength(e))}getFirstBracketBefore(e){const i=this.initialAstWithoutTokens||this.astWithTokens;return getFirstBracketBefore(i,lengthZero,i.length,positionToLength(e))}}function getFirstBracketBefore(s,e,i,o){if(s.kind===4||s.kind===2){const a=[];for(const c of s.children)i=lengthAdd(e,c.length),a.push({nodeOffsetStart:e,nodeOffsetEnd:i}),e=i;for(let c=a.length-1;c>=0;c--){const{nodeOffsetStart:d,nodeOffsetEnd:_}=a[c];if(lengthLessThan(d,o)){const b=getFirstBracketBefore(s.children[c],d,_,o);if(b)return b}}return null}else{if(s.kind===3)return null;if(s.kind===1){const a=lengthsToRange(e,i);return{bracketInfo:s.bracketInfo,range:a}}}return null}function getFirstBracketAfter(s,e,i,o){if(s.kind===4||s.kind===2){for(const a of s.children){if(i=lengthAdd(e,a.length),lengthLessThan(o,i)){const c=getFirstBracketAfter(a,e,i,o);if(c)return c}e=i}return null}else{if(s.kind===3)return null;if(s.kind===1){const a=lengthsToRange(e,i);return{bracketInfo:s.bracketInfo,range:a}}}return null}function collectBrackets(s,e,i,o,a,c,d,_){if(!(d>200)){if(s.kind===4)for(const b of s.children)i=lengthAdd(e,b.length),lengthLessThanEqual(e,a)&&lengthGreaterThanEqual(i,o)&&collectBrackets(b,e,i,o,a,c,d,_),e=i;else if(s.kind===2){let b=0;if(_){let k=_.get(s.openingBracket.text);k===void 0&&(k=0),b=k,k++,_.set(s.openingBracket.text,k)}{const k=s.openingBracket;if(i=lengthAdd(e,k.length),lengthLessThanEqual(e,a)&&lengthGreaterThanEqual(i,o)){const j=lengthsToRange(e,i);c.push(new BracketInfo(j,d,b,!s.closingBracket))}e=i}if(s.child){const k=s.child;i=lengthAdd(e,k.length),lengthLessThanEqual(e,a)&&lengthGreaterThanEqual(i,o)&&collectBrackets(k,e,i,o,a,c,d+1,_),e=i}if(s.closingBracket){const k=s.closingBracket;if(i=lengthAdd(e,k.length),lengthLessThanEqual(e,a)&&lengthGreaterThanEqual(i,o)){const j=lengthsToRange(e,i);c.push(new BracketInfo(j,d,b,!1))}e=i}_==null||_.set(s.openingBracket.text,b)}else if(s.kind===3){const b=lengthsToRange(e,i);c.push(new BracketInfo(b,d-1,0,!0))}else if(s.kind===1){const b=lengthsToRange(e,i);c.push(new BracketInfo(b,d-1,0,!1))}}}class CollectBracketPairsContext{constructor(e,i,o){this.result=e,this.includeMinIndentation=i,this.textModel=o}}function collectBracketPairs(s,e,i,o,a,c,d,_){var b;if(!(d>200))if(s.kind===2){let k=0;if(_){let et=_.get(s.openingBracket.text);et===void 0&&(et=0),k=et,et++,_.set(s.openingBracket.text,et)}const j=lengthAdd(e,s.openingBracket.length);let _e=-1;if(c.includeMinIndentation&&(_e=s.computeMinIndentation(e,c.textModel)),c.result.push(new BracketPairWithMinIndentationInfo(lengthsToRange(e,i),lengthsToRange(e,j),s.closingBracket?lengthsToRange(lengthAdd(j,((b=s.child)===null||b===void 0?void 0:b.length)||lengthZero),i):void 0,d,k,s,_e)),e=j,s.child){const et=s.child;i=lengthAdd(e,et.length),lengthLessThanEqual(e,a)&&lengthGreaterThanEqual(i,o)&&collectBracketPairs(et,e,i,o,a,c,d+1,_)}_==null||_.set(s.openingBracket.text,k)}else{let k=e;for(const j of s.children){const _e=k;k=lengthAdd(k,j.length),lengthLessThanEqual(_e,a)&&lengthLessThanEqual(o,k)&&collectBracketPairs(j,_e,k,o,a,c,d,_)}}}class BracketPairsTextModelPart extends Disposable{constructor(e,i){super(),this.textModel=e,this.languageConfigurationService=i,this.bracketPairsTree=this._register(new MutableDisposable),this.onDidChangeEmitter=new Emitter$1,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange(o=>{var a;(!o.languageId||((a=this.bracketPairsTree.value)===null||a===void 0?void 0:a.object.didLanguageChange(o.languageId)))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var i;(i=this.bracketPairsTree.value)===null||i===void 0||i.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)===null||e===void 0||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var i;(i=this.bracketPairsTree.value)===null||i===void 0||i.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new DisposableStore;this.bracketPairsTree.value=createDisposableRef(e.add(new BracketPairsTree(this.textModel,i=>this.languageConfigurationService.getLanguageConfiguration(i))),e),e.add(this.bracketPairsTree.value.object.onDidChange(i=>this.onDidChangeEmitter.fire(i))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,i,o){const a=this.textModel.validatePosition(i),c=this.textModel.getLanguageIdAtPosition(a.lineNumber,a.column);if(this.canBuildAST){const d=this.languageConfigurationService.getLanguageConfiguration(c).bracketsNew.getClosingBracketInfo(e);if(!d)return null;const _=findLast(this.getBracketPairsInRange(Range$2.fromPositions(i,i))||[],b=>d.closes(b.openingBracketInfo));return _?_.openingBracketRange:null}else{const d=e.toLowerCase(),_=this.languageConfigurationService.getLanguageConfiguration(c).brackets;if(!_)return null;const b=_.textIsBracket[d];return b?stripBracketSearchCanceled(this._findMatchingBracketUp(b,a,createTimeBasedContinueBracketSearchPredicate(o))):null}}matchBracket(e,i){if(this.canBuildAST){const o=findLastMaxBy(this.getBracketPairsInRange(Range$2.fromPositions(e,e)).filter(a=>a.closingBracketRange!==void 0&&(a.openingBracketRange.containsPosition(e)||a.closingBracketRange.containsPosition(e))),compareBy(a=>a.openingBracketRange.containsPosition(e)?a.openingBracketRange:a.closingBracketRange,Range$2.compareRangesUsingStarts));return o?[o.openingBracketRange,o.closingBracketRange]:null}else{const o=createTimeBasedContinueBracketSearchPredicate(i);return this._matchBracket(this.textModel.validatePosition(e),o)}}_establishBracketSearchOffsets(e,i,o,a){const c=i.getCount(),d=i.getLanguageId(a);let _=Math.max(0,e.column-1-o.maxBracketLength);for(let k=a-1;k>=0;k--){const j=i.getEndOffset(k);if(j<=_)break;if(ignoreBracketsInToken(i.getStandardTokenType(k))||i.getLanguageId(k)!==d){_=j;break}}let b=Math.min(i.getLineContent().length,e.column-1+o.maxBracketLength);for(let k=a+1;k<c;k++){const j=i.getStartOffset(k);if(j>=b)break;if(ignoreBracketsInToken(i.getStandardTokenType(k))||i.getLanguageId(k)!==d){b=j;break}}return{searchStartOffset:_,searchEndOffset:b}}_matchBracket(e,i){const o=e.lineNumber,a=this.textModel.tokenization.getLineTokens(o),c=this.textModel.getLineContent(o),d=a.findTokenIndexAtOffset(e.column-1);if(d<0)return null;const _=this.languageConfigurationService.getLanguageConfiguration(a.getLanguageId(d)).brackets;if(_&&!ignoreBracketsInToken(a.getStandardTokenType(d))){let{searchStartOffset:b,searchEndOffset:k}=this._establishBracketSearchOffsets(e,a,_,d),j=null;for(;;){const _e=BracketsUtils.findNextBracketInRange(_.forwardRegex,o,c,b,k);if(!_e)break;if(_e.startColumn<=e.column&&e.column<=_e.endColumn){const et=c.substring(_e.startColumn-1,_e.endColumn-1).toLowerCase(),tt=this._matchFoundBracket(_e,_.textIsBracket[et],_.textIsOpenBracket[et],i);if(tt){if(tt instanceof BracketSearchCanceled)return null;j=tt}}b=_e.endColumn-1}if(j)return j}if(d>0&&a.getStartOffset(d)===e.column-1){const b=d-1,k=this.languageConfigurationService.getLanguageConfiguration(a.getLanguageId(b)).brackets;if(k&&!ignoreBracketsInToken(a.getStandardTokenType(b))){const{searchStartOffset:j,searchEndOffset:_e}=this._establishBracketSearchOffsets(e,a,k,b),et=BracketsUtils.findPrevBracketInRange(k.reversedRegex,o,c,j,_e);if(et&&et.startColumn<=e.column&&e.column<=et.endColumn){const tt=c.substring(et.startColumn-1,et.endColumn-1).toLowerCase(),it=this._matchFoundBracket(et,k.textIsBracket[tt],k.textIsOpenBracket[tt],i);if(it)return it instanceof BracketSearchCanceled?null:it}}}return null}_matchFoundBracket(e,i,o,a){if(!i)return null;const c=o?this._findMatchingBracketDown(i,e.getEndPosition(),a):this._findMatchingBracketUp(i,e.getStartPosition(),a);return c?c instanceof BracketSearchCanceled?c:[e,c]:null}_findMatchingBracketUp(e,i,o){const a=e.languageId,c=e.reversedRegex;let d=-1,_=0;const b=(k,j,_e,et)=>{for(;;){if(o&&++_%100===0&&!o())return BracketSearchCanceled.INSTANCE;const tt=BracketsUtils.findPrevBracketInRange(c,k,j,_e,et);if(!tt)break;const it=j.substring(tt.startColumn-1,tt.endColumn-1).toLowerCase();if(e.isOpen(it)?d++:e.isClose(it)&&d--,d===0)return tt;et=tt.startColumn-1}return null};for(let k=i.lineNumber;k>=1;k--){const j=this.textModel.tokenization.getLineTokens(k),_e=j.getCount(),et=this.textModel.getLineContent(k);let tt=_e-1,it=et.length,st=et.length;k===i.lineNumber&&(tt=j.findTokenIndexAtOffset(i.column-1),it=i.column-1,st=i.column-1);let ot=!0;for(;tt>=0;tt--){const nt=j.getLanguageId(tt)===a&&!ignoreBracketsInToken(j.getStandardTokenType(tt));if(nt)ot?it=j.getStartOffset(tt):(it=j.getStartOffset(tt),st=j.getEndOffset(tt));else if(ot&&it!==st){const rt=b(k,et,it,st);if(rt)return rt}ot=nt}if(ot&&it!==st){const nt=b(k,et,it,st);if(nt)return nt}}return null}_findMatchingBracketDown(e,i,o){const a=e.languageId,c=e.forwardRegex;let d=1,_=0;const b=(j,_e,et,tt)=>{for(;;){if(o&&++_%100===0&&!o())return BracketSearchCanceled.INSTANCE;const it=BracketsUtils.findNextBracketInRange(c,j,_e,et,tt);if(!it)break;const st=_e.substring(it.startColumn-1,it.endColumn-1).toLowerCase();if(e.isOpen(st)?d++:e.isClose(st)&&d--,d===0)return it;et=it.endColumn-1}return null},k=this.textModel.getLineCount();for(let j=i.lineNumber;j<=k;j++){const _e=this.textModel.tokenization.getLineTokens(j),et=_e.getCount(),tt=this.textModel.getLineContent(j);let it=0,st=0,ot=0;j===i.lineNumber&&(it=_e.findTokenIndexAtOffset(i.column-1),st=i.column-1,ot=i.column-1);let nt=!0;for(;it<et;it++){const rt=_e.getLanguageId(it)===a&&!ignoreBracketsInToken(_e.getStandardTokenType(it));if(rt)nt||(st=_e.getStartOffset(it)),ot=_e.getEndOffset(it);else if(nt&&st!==ot){const at=b(j,tt,st,ot);if(at)return at}nt=rt}if(nt&&st!==ot){const rt=b(j,tt,st,ot);if(rt)return rt}}return null}findPrevBracket(e){var i;const o=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getFirstBracketBefore(o))||null;let a=null,c=null,d=null;for(let _=o.lineNumber;_>=1;_--){const b=this.textModel.tokenization.getLineTokens(_),k=b.getCount(),j=this.textModel.getLineContent(_);let _e=k-1,et=j.length,tt=j.length;if(_===o.lineNumber){_e=b.findTokenIndexAtOffset(o.column-1),et=o.column-1,tt=o.column-1;const st=b.getLanguageId(_e);a!==st&&(a=st,c=this.languageConfigurationService.getLanguageConfiguration(a).brackets,d=this.languageConfigurationService.getLanguageConfiguration(a).bracketsNew)}let it=!0;for(;_e>=0;_e--){const st=b.getLanguageId(_e);if(a!==st){if(c&&d&&it&&et!==tt){const nt=BracketsUtils.findPrevBracketInRange(c.reversedRegex,_,j,et,tt);if(nt)return this._toFoundBracket(d,nt);it=!1}a=st,c=this.languageConfigurationService.getLanguageConfiguration(a).brackets,d=this.languageConfigurationService.getLanguageConfiguration(a).bracketsNew}const ot=!!c&&!ignoreBracketsInToken(b.getStandardTokenType(_e));if(ot)it?et=b.getStartOffset(_e):(et=b.getStartOffset(_e),tt=b.getEndOffset(_e));else if(d&&c&&it&&et!==tt){const nt=BracketsUtils.findPrevBracketInRange(c.reversedRegex,_,j,et,tt);if(nt)return this._toFoundBracket(d,nt)}it=ot}if(d&&c&&it&&et!==tt){const st=BracketsUtils.findPrevBracketInRange(c.reversedRegex,_,j,et,tt);if(st)return this._toFoundBracket(d,st)}}return null}findNextBracket(e){var i;const o=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getFirstBracketAfter(o))||null;const a=this.textModel.getLineCount();let c=null,d=null,_=null;for(let b=o.lineNumber;b<=a;b++){const k=this.textModel.tokenization.getLineTokens(b),j=k.getCount(),_e=this.textModel.getLineContent(b);let et=0,tt=0,it=0;if(b===o.lineNumber){et=k.findTokenIndexAtOffset(o.column-1),tt=o.column-1,it=o.column-1;const ot=k.getLanguageId(et);c!==ot&&(c=ot,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,_=this.languageConfigurationService.getLanguageConfiguration(c).bracketsNew)}let st=!0;for(;et<j;et++){const ot=k.getLanguageId(et);if(c!==ot){if(_&&d&&st&&tt!==it){const rt=BracketsUtils.findNextBracketInRange(d.forwardRegex,b,_e,tt,it);if(rt)return this._toFoundBracket(_,rt);st=!1}c=ot,d=this.languageConfigurationService.getLanguageConfiguration(c).brackets,_=this.languageConfigurationService.getLanguageConfiguration(c).bracketsNew}const nt=!!d&&!ignoreBracketsInToken(k.getStandardTokenType(et));if(nt)st||(tt=k.getStartOffset(et)),it=k.getEndOffset(et);else if(_&&d&&st&&tt!==it){const rt=BracketsUtils.findNextBracketInRange(d.forwardRegex,b,_e,tt,it);if(rt)return this._toFoundBracket(_,rt)}st=nt}if(_&&d&&st&&tt!==it){const ot=BracketsUtils.findNextBracketInRange(d.forwardRegex,b,_e,tt,it);if(ot)return this._toFoundBracket(_,ot)}}return null}findEnclosingBrackets(e,i){const o=this.textModel.validatePosition(e);if(this.canBuildAST){const tt=Range$2.fromPositions(o),it=findLast(this.getBracketPairsInRange(Range$2.fromPositions(o,o)),st=>st.closingBracketRange!==void 0&&st.range.strictContainsRange(tt));return it?[it.openingBracketRange,it.closingBracketRange]:null}const a=createTimeBasedContinueBracketSearchPredicate(i),c=this.textModel.getLineCount(),d=new Map;let _=[];const b=(tt,it)=>{if(!d.has(tt)){const st=[];for(let ot=0,nt=it?it.brackets.length:0;ot<nt;ot++)st[ot]=0;d.set(tt,st)}_=d.get(tt)};let k=0;const j=(tt,it,st,ot,nt)=>{for(;;){if(a&&++k%100===0&&!a())return BracketSearchCanceled.INSTANCE;const rt=BracketsUtils.findNextBracketInRange(tt.forwardRegex,it,st,ot,nt);if(!rt)break;const at=st.substring(rt.startColumn-1,rt.endColumn-1).toLowerCase(),lt=tt.textIsBracket[at];if(lt&&(lt.isOpen(at)?_[lt.index]++:lt.isClose(at)&&_[lt.index]--,_[lt.index]===-1))return this._matchFoundBracket(rt,lt,!1,a);ot=rt.endColumn-1}return null};let _e=null,et=null;for(let tt=o.lineNumber;tt<=c;tt++){const it=this.textModel.tokenization.getLineTokens(tt),st=it.getCount(),ot=this.textModel.getLineContent(tt);let nt=0,rt=0,at=0;if(tt===o.lineNumber){nt=it.findTokenIndexAtOffset(o.column-1),rt=o.column-1,at=o.column-1;const gt=it.getLanguageId(nt);_e!==gt&&(_e=gt,et=this.languageConfigurationService.getLanguageConfiguration(_e).brackets,b(_e,et))}let lt=!0;for(;nt<st;nt++){const gt=it.getLanguageId(nt);if(_e!==gt){if(et&&lt&&rt!==at){const ut=j(et,tt,ot,rt,at);if(ut)return stripBracketSearchCanceled(ut);lt=!1}_e=gt,et=this.languageConfigurationService.getLanguageConfiguration(_e).brackets,b(_e,et)}const ht=!!et&&!ignoreBracketsInToken(it.getStandardTokenType(nt));if(ht)lt||(rt=it.getStartOffset(nt)),at=it.getEndOffset(nt);else if(et&&lt&&rt!==at){const ut=j(et,tt,ot,rt,at);if(ut)return stripBracketSearchCanceled(ut)}lt=ht}if(et&&lt&&rt!==at){const gt=j(et,tt,ot,rt,at);if(gt)return stripBracketSearchCanceled(gt)}}return null}_toFoundBracket(e,i){if(!i)return null;let o=this.textModel.getValueInRange(i);o=o.toLowerCase();const a=e.getBracketInfo(o);return a?{range:i,bracketInfo:a}:null}}function createDisposableRef(s,e){return{object:s,dispose:()=>e==null?void 0:e.dispose()}}function createTimeBasedContinueBracketSearchPredicate(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}class BracketSearchCanceled{constructor(){this._searchCanceledBrand=void 0}}BracketSearchCanceled.INSTANCE=new BracketSearchCanceled;function stripBracketSearchCanceled(s){return s instanceof BracketSearchCanceled?null:s}class ColorizedBracketPairsDecorationProvider extends Disposable{constructor(e){super(),this.textModel=e,this.colorProvider=new ColorProvider,this.onDidChangeEmitter=new Emitter$1,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(i=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,i,o){if(i===void 0)return[];if(!this.colorizationOptions.enabled)return[];const a=new Array,c=this.textModel.bracketPairs.getBracketsInRange(e);for(const d of c)a.push({id:`bracket${d.range.toString()}-${d.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(d,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:d.range});return a}getAllDecorations(e,i){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Range$2(1,1,this.textModel.getLineCount(),1),e,i):[]}}class ColorProvider{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,i){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(i?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}registerThemingParticipant((s,e)=>{const i=[editorBracketHighlightingForeground1,editorBracketHighlightingForeground2,editorBracketHighlightingForeground3,editorBracketHighlightingForeground4,editorBracketHighlightingForeground5,editorBracketHighlightingForeground6],o=new ColorProvider;e.addRule(`.monaco-editor .${o.unexpectedClosingBracketClassName} { color: ${s.getColor(editorBracketHighlightingUnexpectedBracketForeground)}; }`);const a=i.map(c=>s.getColor(c)).filter(c=>!!c).filter(c=>!c.isTransparent());for(let c=0;c<30;c++){const d=a[c%a.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(c)} { color: ${d}; }`)}});function escapeNewLine(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class TextChange{constructor(e,i,o,a){this.oldPosition=e,this.oldText=i,this.newPosition=o,this.newText=a}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${escapeNewLine(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${escapeNewLine(this.oldText)}")`:`(replace@${this.oldPosition} "${escapeNewLine(this.oldText)}" with "${escapeNewLine(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,i,o){const a=i.length;writeUInt32BE(e,a,o),o+=4;for(let c=0;c<a;c++)writeUInt16LE(e,i.charCodeAt(c),o),o+=2;return o}static _readString(e,i){const o=readUInt32BE(e,i);return i+=4,decodeUTF16LE(e,i,o)}writeSize(){return 4+4+TextChange._writeStringSize(this.oldText)+TextChange._writeStringSize(this.newText)}write(e,i){return writeUInt32BE(e,this.oldPosition,i),i+=4,writeUInt32BE(e,this.newPosition,i),i+=4,i=TextChange._writeString(e,this.oldText,i),i=TextChange._writeString(e,this.newText,i),i}static read(e,i,o){const a=readUInt32BE(e,i);i+=4;const c=readUInt32BE(e,i);i+=4;const d=TextChange._readString(e,i);i+=TextChange._writeStringSize(d);const _=TextChange._readString(e,i);return i+=TextChange._writeStringSize(_),o.push(new TextChange(a,d,c,_)),i}}function compressConsecutiveTextChanges(s,e){return s===null||s.length===0?e:new TextChangeCompressor(s,e).compress()}class TextChangeCompressor{constructor(e,i){this._prevEdits=e,this._currEdits=i,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,i=0,o=this._getPrev(e),a=this._getCurr(i);for(;e<this._prevLen||i<this._currLen;){if(o===null){this._acceptCurr(a),a=this._getCurr(++i);continue}if(a===null){this._acceptPrev(o),o=this._getPrev(++e);continue}if(a.oldEnd<=o.newPosition){this._acceptCurr(a),a=this._getCurr(++i);continue}if(o.newEnd<=a.oldPosition){this._acceptPrev(o),o=this._getPrev(++e);continue}if(a.oldPosition<o.newPosition){const[k,j]=TextChangeCompressor._splitCurr(a,o.newPosition-a.oldPosition);this._acceptCurr(k),a=j;continue}if(o.newPosition<a.oldPosition){const[k,j]=TextChangeCompressor._splitPrev(o,a.oldPosition-o.newPosition);this._acceptPrev(k),o=j;continue}let _,b;if(a.oldEnd===o.newEnd)_=o,b=a,o=this._getPrev(++e),a=this._getCurr(++i);else if(a.oldEnd<o.newEnd){const[k,j]=TextChangeCompressor._splitPrev(o,a.oldLength);_=k,b=a,o=j,a=this._getCurr(++i)}else{const[k,j]=TextChangeCompressor._splitCurr(a,o.newLength);_=o,b=k,o=this._getPrev(++e),a=j}this._result[this._resultLen++]=new TextChange(_.oldPosition,_.oldText,b.newPosition,b.newText),this._prevDeltaOffset+=_.newLength-_.oldLength,this._currDeltaOffset+=b.newLength-b.oldLength}const c=TextChangeCompressor._merge(this._result);return TextChangeCompressor._removeNoOps(c)}_acceptCurr(e){this._result[this._resultLen++]=TextChangeCompressor._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=TextChangeCompressor._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,i){return new TextChange(i.oldPosition-e,i.oldText,i.newPosition,i.newText)}static _rebasePrev(e,i){return new TextChange(i.oldPosition,i.oldText,i.newPosition+e,i.newText)}static _splitPrev(e,i){const o=e.newText.substr(0,i),a=e.newText.substr(i);return[new TextChange(e.oldPosition,e.oldText,e.newPosition,o),new TextChange(e.oldEnd,"",e.newPosition+i,a)]}static _splitCurr(e,i){const o=e.oldText.substr(0,i),a=e.oldText.substr(i);return[new TextChange(e.oldPosition,o,e.newPosition,e.newText),new TextChange(e.oldPosition+i,a,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const i=[];let o=0,a=e[0];for(let c=1;c<e.length;c++){const d=e[c];a.oldEnd===d.oldPosition?a=new TextChange(a.oldPosition,a.oldText+d.oldText,a.newPosition,a.newText+d.newText):(i[o++]=a,a=d)}return i[o++]=a,i}static _removeNoOps(e){if(e.length===0)return e;const i=[];let o=0;for(let a=0;a<e.length;a++){const c=e[a];c.oldText!==c.newText&&(i[o++]=c)}return i}}function isPathSeparator(s){return s===47||s===92}function toSlashes(s){return s.replace(/[\\/]/g,posix.sep)}function toPosixPath(s){return s.indexOf("/")===-1&&(s=toSlashes(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function getRoot(s,e=posix.sep){if(!s)return"";const i=s.length,o=s.charCodeAt(0);if(isPathSeparator(o)){if(isPathSeparator(s.charCodeAt(1))&&!isPathSeparator(s.charCodeAt(2))){let c=3;const d=c;for(;c<i&&!isPathSeparator(s.charCodeAt(c));c++);if(d!==c&&!isPathSeparator(s.charCodeAt(c+1))){for(c+=1;c<i;c++)if(isPathSeparator(s.charCodeAt(c)))return s.slice(0,c+1).replace(/[\\/]/g,e)}}return e}else if(isWindowsDriveLetter(o)&&s.charCodeAt(1)===58)return isPathSeparator(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let a=s.indexOf("://");if(a!==-1){for(a+=3;a<i;a++)if(isPathSeparator(s.charCodeAt(a)))return s.slice(0,a+1)}return""}function isEqualOrParent(s,e,i,o=sep){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(i){if(!startsWithIgnoreCase(s,e))return!1;if(e.length===s.length)return!0;let c=e.length;return e.charAt(e.length-1)===o&&c--,s.charAt(c)===o}return e.charAt(e.length-1)!==o&&(e+=o),s.indexOf(e)===0}function isWindowsDriveLetter(s){return s>=65&&s<=90||s>=97&&s<=122}function originalFSPath(s){return uriToFsPath(s,!0)}class ExtUri{constructor(e){this._ignorePathCasing=e}compare(e,i,o=!1){return e===i?0:compare(this.getComparisonKey(e,o),this.getComparisonKey(i,o))}isEqual(e,i,o=!1){return e===i?!0:!e||!i?!1:this.getComparisonKey(e,o)===this.getComparisonKey(i,o)}getComparisonKey(e,i=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:i?null:void 0}).toString()}isEqualOrParent(e,i,o=!1){if(e.scheme===i.scheme){if(e.scheme===Schemas.file)return isEqualOrParent(originalFSPath(e),originalFSPath(i),this._ignorePathCasing(e))&&e.query===i.query&&(o||e.fragment===i.fragment);if(isEqualAuthority(e.authority,i.authority))return isEqualOrParent(e.path,i.path,this._ignorePathCasing(e),"/")&&e.query===i.query&&(o||e.fragment===i.fragment)}return!1}joinPath(e,...i){return URI.joinPath(e,...i)}basenameOrAuthority(e){return basename(e)||e.authority}basename(e){return posix.basename(e.path)}extname(e){return posix.extname(e.path)}dirname(e){if(e.path.length===0)return e;let i;return e.scheme===Schemas.file?i=URI.file(dirname(originalFSPath(e))).path:(i=posix.dirname(e.path),e.authority&&i.length&&i.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),i="/")),e.with({path:i})}normalizePath(e){if(!e.path.length)return e;let i;return e.scheme===Schemas.file?i=URI.file(normalize(originalFSPath(e))).path:i=posix.normalize(e.path),e.with({path:i})}relativePath(e,i){if(e.scheme!==i.scheme||!isEqualAuthority(e.authority,i.authority))return;if(e.scheme===Schemas.file){const c=relative(originalFSPath(e),originalFSPath(i));return isWindows?toSlashes(c):c}let o=e.path||"/";const a=i.path||"/";if(this._ignorePathCasing(e)){let c=0;for(const d=Math.min(o.length,a.length);c<d&&!(o.charCodeAt(c)!==a.charCodeAt(c)&&o.charAt(c).toLowerCase()!==a.charAt(c).toLowerCase());c++);o=a.substr(0,c)+o.substr(c)}return posix.relative(o,a)}resolvePath(e,i){if(e.scheme===Schemas.file){const o=URI.file(resolve(originalFSPath(e),i));return e.with({authority:o.authority,path:o.path})}return i=toPosixPath(i),e.with({path:posix.resolve(e.path,i)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,i){return e===i||e!==void 0&&i!==void 0&&equalsIgnoreCase(e,i)}hasTrailingPathSeparator(e,i=sep){if(e.scheme===Schemas.file){const o=originalFSPath(e);return o.length>getRoot(o).length&&o[o.length-1]===i}else{const o=e.path;return o.length>1&&o.charCodeAt(o.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,i=sep){return hasTrailingPathSeparator(e,i)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,i=sep){let o=!1;if(e.scheme===Schemas.file){const a=originalFSPath(e);o=a!==void 0&&a.length===getRoot(a).length&&a[a.length-1]===i}else{i="/";const a=e.path;o=a.length===1&&a.charCodeAt(a.length-1)===47}return!o&&!hasTrailingPathSeparator(e,i)?e.with({path:e.path+"/"}):e}}const extUri=new ExtUri(()=>!1);new ExtUri(s=>s.scheme===Schemas.file?!isLinux:!0);new ExtUri(s=>!0);extUri.isEqual.bind(extUri);extUri.isEqualOrParent.bind(extUri);extUri.getComparisonKey.bind(extUri);extUri.basenameOrAuthority.bind(extUri);const basename=extUri.basename.bind(extUri);extUri.extname.bind(extUri);extUri.dirname.bind(extUri);extUri.joinPath.bind(extUri);const normalizePath=extUri.normalizePath.bind(extUri);extUri.relativePath.bind(extUri);extUri.resolvePath.bind(extUri);extUri.isAbsolutePath.bind(extUri);const isEqualAuthority=extUri.isEqualAuthority.bind(extUri),hasTrailingPathSeparator=extUri.hasTrailingPathSeparator.bind(extUri);extUri.removeTrailingPathSeparator.bind(extUri);extUri.addTrailingPathSeparator.bind(extUri);var DataUri;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(i){const o=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(d=>{const[_,b]=d.split(":");_&&b&&o.set(_,b)});const c=i.path.substring(0,i.path.indexOf(";"));return c&&o.set(s.META_DATA_MIME,c),o}s.parseMetaData=e})(DataUri||(DataUri={}));function uriGetComparisonKey(s){return s.toString()}class SingleModelEditStackData{constructor(e,i,o,a,c,d,_){this.beforeVersionId=e,this.afterVersionId=i,this.beforeEOL=o,this.afterEOL=a,this.beforeCursorState=c,this.afterCursorState=d,this.changes=_}static create(e,i){const o=e.getAlternativeVersionId(),a=getModelEOL(e);return new SingleModelEditStackData(o,o,a,a,i,i,[])}append(e,i,o,a,c){i.length>0&&(this.changes=compressConsecutiveTextChanges(this.changes,i)),this.afterEOL=o,this.afterVersionId=a,this.afterCursorState=c}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,i,o){if(writeUInt32BE(e,i?i.length:0,o),o+=4,i)for(const a of i)writeUInt32BE(e,a.selectionStartLineNumber,o),o+=4,writeUInt32BE(e,a.selectionStartColumn,o),o+=4,writeUInt32BE(e,a.positionLineNumber,o),o+=4,writeUInt32BE(e,a.positionColumn,o),o+=4;return o}static _readSelections(e,i,o){const a=readUInt32BE(e,i);i+=4;for(let c=0;c<a;c++){const d=readUInt32BE(e,i);i+=4;const _=readUInt32BE(e,i);i+=4;const b=readUInt32BE(e,i);i+=4;const k=readUInt32BE(e,i);i+=4,o.push(new Selection$1(d,_,b,k))}return i}serialize(){let e=10+SingleModelEditStackData._writeSelectionsSize(this.beforeCursorState)+SingleModelEditStackData._writeSelectionsSize(this.afterCursorState)+4;for(const a of this.changes)e+=a.writeSize();const i=new Uint8Array(e);let o=0;writeUInt32BE(i,this.beforeVersionId,o),o+=4,writeUInt32BE(i,this.afterVersionId,o),o+=4,writeUInt8(i,this.beforeEOL,o),o+=1,writeUInt8(i,this.afterEOL,o),o+=1,o=SingleModelEditStackData._writeSelections(i,this.beforeCursorState,o),o=SingleModelEditStackData._writeSelections(i,this.afterCursorState,o),writeUInt32BE(i,this.changes.length,o),o+=4;for(const a of this.changes)o=a.write(i,o);return i.buffer}static deserialize(e){const i=new Uint8Array(e);let o=0;const a=readUInt32BE(i,o);o+=4;const c=readUInt32BE(i,o);o+=4;const d=readUInt8(i,o);o+=1;const _=readUInt8(i,o);o+=1;const b=[];o=SingleModelEditStackData._readSelections(i,o,b);const k=[];o=SingleModelEditStackData._readSelections(i,o,k);const j=readUInt32BE(i,o);o+=4;const _e=[];for(let et=0;et<j;et++)o=TextChange.read(i,o,_e);return new SingleModelEditStackData(a,c,d,_,b,k,_e)}}class SingleModelEditStackElement{constructor(e,i,o,a){this.label=e,this.code=i,this.model=o,this._data=SingleModelEditStackData.create(o,a)}get type(){return 0}get resource(){return URI.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof SingleModelEditStackData?this._data:SingleModelEditStackData.deserialize(this._data)).changes.map(i=>i.toString()).join(", ")}matchesResource(e){return(URI.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof SingleModelEditStackData}append(e,i,o,a,c){this._data instanceof SingleModelEditStackData&&this._data.append(e,i,o,a,c)}close(){this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize())}open(){this._data instanceof SingleModelEditStackData||(this._data=SingleModelEditStackData.deserialize(this._data))}undo(){if(URI.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(URI.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize());const e=SingleModelEditStackData.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof SingleModelEditStackData&&(this._data=this._data.serialize()),this._data.byteLength+168}}class MultiModelEditStackElement{constructor(e,i,o){this.label=e,this.code=i,this.type=1,this._isOpen=!0,this._editStackElementsArr=o.slice(0),this._editStackElementsMap=new Map;for(const a of this._editStackElementsArr){const c=uriGetComparisonKey(a.resource);this._editStackElementsMap.set(c,a)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const i=uriGetComparisonKey(e);return this._editStackElementsMap.has(i)}setModel(e){const i=uriGetComparisonKey(URI.isUri(e)?e:e.uri);this._editStackElementsMap.has(i)&&this._editStackElementsMap.get(i).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const i=uriGetComparisonKey(e.uri);return this._editStackElementsMap.has(i)?this._editStackElementsMap.get(i).canAppend(e):!1}append(e,i,o,a,c){const d=uriGetComparisonKey(e.uri);this._editStackElementsMap.get(d).append(e,i,o,a,c)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const i=uriGetComparisonKey(e);return this._editStackElementsMap.has(i)?this._editStackElementsMap.get(i).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const i of this._editStackElementsArr)e.push(`${basename(i.resource)}: ${i}`);return`{${e.join(", ")}}`}}function getModelEOL(s){return s.getEOL()===`
`?0:1}function isEditStackElement(s){return s?s instanceof SingleModelEditStackElement||s instanceof MultiModelEditStackElement:!1}class EditStack{constructor(e,i){this._model=e,this._undoRedoService=i}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);isEditStackElement(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const i=this._undoRedoService.getLastElement(this._model.uri);if(isEditStackElement(i)&&i.canAppend(this._model))return i;const o=new SingleModelEditStackElement(localize("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(o),o}pushEOL(e){const i=this._getOrCreateEditStackElement(null);this._model.setEOL(e),i.append(this._model,[],getModelEOL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,i,o){const a=this._getOrCreateEditStackElement(e),c=this._model.applyEdits(i,!0),d=EditStack._computeCursorState(o,c),_=c.map((b,k)=>({index:k,textChange:b.textChange}));return _.sort((b,k)=>b.textChange.oldPosition===k.textChange.oldPosition?b.index-k.index:b.textChange.oldPosition-k.textChange.oldPosition),a.append(this._model,_.map(b=>b.textChange),getModelEOL(this._model),this._model.getAlternativeVersionId(),d),d}static _computeCursorState(e,i){try{return e?e(i):null}catch(o){return onUnexpectedError(o),null}}}class SpacesDiffResult{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function spacesDiff(s,e,i,o,a){a.spacesDiff=0,a.looksLikeAlignment=!1;let c;for(c=0;c<e&&c<o;c++){const et=s.charCodeAt(c),tt=i.charCodeAt(c);if(et!==tt)break}let d=0,_=0;for(let et=c;et<e;et++)s.charCodeAt(et)===32?d++:_++;let b=0,k=0;for(let et=c;et<o;et++)i.charCodeAt(et)===32?b++:k++;if(d>0&&_>0||b>0&&k>0)return;const j=Math.abs(_-k),_e=Math.abs(d-b);if(j===0){a.spacesDiff=_e,_e>0&&0<=b-1&&b-1<s.length&&b<i.length&&i.charCodeAt(b)!==32&&s.charCodeAt(b-1)===32&&s.charCodeAt(s.length-1)===44&&(a.looksLikeAlignment=!0);return}if(_e%j===0){a.spacesDiff=_e/j;return}}function guessIndentation(s,e,i){const o=Math.min(s.getLineCount(),1e4);let a=0,c=0,d="",_=0;const b=[2,4,6,8,3,5,7],k=8,j=[0,0,0,0,0,0,0,0,0],_e=new SpacesDiffResult;for(let it=1;it<=o;it++){const st=s.getLineLength(it),ot=s.getLineContent(it),nt=st<=65536;let rt=!1,at=0,lt=0,gt=0;for(let ut=0,ct=st;ut<ct;ut++){const ft=nt?ot.charCodeAt(ut):s.getLineCharCode(it,ut);if(ft===9)gt++;else if(ft===32)lt++;else{rt=!0,at=ut;break}}if(!rt||(gt>0?a++:lt>1&&c++,spacesDiff(d,_,ot,at,_e),_e.looksLikeAlignment&&!(i&&e===_e.spacesDiff)))continue;const ht=_e.spacesDiff;ht<=k&&j[ht]++,d=ot,_=at}let et=i;a!==c&&(et=a<c);let tt=e;if(et){let it=et?0:.1*o;b.forEach(st=>{const ot=j[st];ot>it&&(it=ot,tt=st)}),tt===4&&j[4]>0&&j[2]>0&&j[2]>=j[4]/2&&(tt=2)}return{insertSpaces:et,tabSize:tt}}function getNodeColor(s){return(s.metadata&1)>>>0}function setNodeColor(s,e){s.metadata=s.metadata&254|e<<0}function getNodeIsVisited(s){return(s.metadata&2)>>>1===1}function setNodeIsVisited(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}function getNodeIsForValidation(s){return(s.metadata&4)>>>2===1}function setNodeIsForValidation(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}function getNodeStickiness(s){return(s.metadata&24)>>>3}function _setNodeStickiness(s,e){s.metadata=s.metadata&231|e<<3}function getCollapseOnReplaceEdit(s){return(s.metadata&32)>>>5===1}function setCollapseOnReplaceEdit(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}class IntervalNode{constructor(e,i,o){this.metadata=0,this.parent=this,this.left=this,this.right=this,setNodeColor(this,1),this.start=i,this.end=o,this.delta=0,this.maxEnd=o,this.id=e,this.ownerId=0,this.options=null,setNodeIsForValidation(this,!1),_setNodeStickiness(this,1),setCollapseOnReplaceEdit(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=i,this.cachedAbsoluteEnd=o,this.range=null,setNodeIsVisited(this,!1)}reset(e,i,o,a){this.start=i,this.end=o,this.maxEnd=o,this.cachedVersionId=e,this.cachedAbsoluteStart=i,this.cachedAbsoluteEnd=o,this.range=a}setOptions(e){this.options=e;const i=this.options.className;setNodeIsForValidation(this,i==="squiggly-error"||i==="squiggly-warning"||i==="squiggly-info"),_setNodeStickiness(this,this.options.stickiness),setCollapseOnReplaceEdit(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,i,o){this.cachedVersionId!==o&&(this.range=null),this.cachedVersionId=o,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=i}detach(){this.parent=null,this.left=null,this.right=null}}const SENTINEL$1=new IntervalNode(null,0,0);SENTINEL$1.parent=SENTINEL$1;SENTINEL$1.left=SENTINEL$1;SENTINEL$1.right=SENTINEL$1;setNodeColor(SENTINEL$1,0);class IntervalTree{constructor(){this.root=SENTINEL$1,this.requestNormalizeDelta=!1}intervalSearch(e,i,o,a,c){return this.root===SENTINEL$1?[]:intervalSearch(this,e,i,o,a,c)}search(e,i,o){return this.root===SENTINEL$1?[]:search(this,e,i,o)}collectNodesFromOwner(e){return collectNodesFromOwner(this,e)}collectNodesPostOrder(){return collectNodesPostOrder(this)}insert(e){rbTreeInsert(this,e),this._normalizeDeltaIfNecessary()}delete(e){rbTreeDelete(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,i){const o=e;let a=0;for(;e!==this.root;)e===e.parent.right&&(a+=e.parent.delta),e=e.parent;const c=o.start+a,d=o.end+a;o.setCachedOffsets(c,d,i)}acceptReplace(e,i,o,a){const c=searchForEditing(this,e,e+i);for(let d=0,_=c.length;d<_;d++){const b=c[d];rbTreeDelete(this,b)}this._normalizeDeltaIfNecessary(),noOverlapReplace(this,e,e+i,o),this._normalizeDeltaIfNecessary();for(let d=0,_=c.length;d<_;d++){const b=c[d];b.start=b.cachedAbsoluteStart,b.end=b.cachedAbsoluteEnd,nodeAcceptEdit(b,e,e+i,o,a),b.maxEnd=b.end,rbTreeInsert(this,b)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){!this.requestNormalizeDelta||(this.requestNormalizeDelta=!1,normalizeDelta(this))}}function normalizeDelta(s){let e=s.root,i=0;for(;e!==SENTINEL$1;){if(e.left!==SENTINEL$1&&!getNodeIsVisited(e.left)){e=e.left;continue}if(e.right!==SENTINEL$1&&!getNodeIsVisited(e.right)){i+=e.delta,e=e.right;continue}e.start=i+e.start,e.end=i+e.end,e.delta=0,recomputeMaxEnd(e),setNodeIsVisited(e,!0),setNodeIsVisited(e.left,!1),setNodeIsVisited(e.right,!1),e===e.parent.right&&(i-=e.parent.delta),e=e.parent}setNodeIsVisited(s.root,!1)}function adjustMarkerBeforeColumn(s,e,i,o){return s<i?!0:s>i||o===1?!1:o===2?!0:e}function nodeAcceptEdit(s,e,i,o,a){const c=getNodeStickiness(s),d=c===0||c===2,_=c===1||c===2,b=i-e,k=o,j=Math.min(b,k),_e=s.start;let et=!1;const tt=s.end;let it=!1;e<=_e&&tt<=i&&getCollapseOnReplaceEdit(s)&&(s.start=e,et=!0,s.end=e,it=!0);{const ot=a?1:b>0?2:0;!et&&adjustMarkerBeforeColumn(_e,d,e,ot)&&(et=!0),!it&&adjustMarkerBeforeColumn(tt,_,e,ot)&&(it=!0)}if(j>0&&!a){const ot=b>k?2:0;!et&&adjustMarkerBeforeColumn(_e,d,e+j,ot)&&(et=!0),!it&&adjustMarkerBeforeColumn(tt,_,e+j,ot)&&(it=!0)}{const ot=a?1:0;!et&&adjustMarkerBeforeColumn(_e,d,i,ot)&&(s.start=e+k,et=!0),!it&&adjustMarkerBeforeColumn(tt,_,i,ot)&&(s.end=e+k,it=!0)}const st=k-b;et||(s.start=Math.max(0,_e+st)),it||(s.end=Math.max(0,tt+st)),s.start>s.end&&(s.end=s.start)}function searchForEditing(s,e,i){let o=s.root,a=0,c=0,d=0,_=0;const b=[];let k=0;for(;o!==SENTINEL$1;){if(getNodeIsVisited(o)){setNodeIsVisited(o.left,!1),setNodeIsVisited(o.right,!1),o===o.parent.right&&(a-=o.parent.delta),o=o.parent;continue}if(!getNodeIsVisited(o.left)){if(c=a+o.maxEnd,c<e){setNodeIsVisited(o,!0);continue}if(o.left!==SENTINEL$1){o=o.left;continue}}if(d=a+o.start,d>i){setNodeIsVisited(o,!0);continue}if(_=a+o.end,_>=e&&(o.setCachedOffsets(d,_,0),b[k++]=o),setNodeIsVisited(o,!0),o.right!==SENTINEL$1&&!getNodeIsVisited(o.right)){a+=o.delta,o=o.right;continue}}return setNodeIsVisited(s.root,!1),b}function noOverlapReplace(s,e,i,o){let a=s.root,c=0,d=0,_=0;const b=o-(i-e);for(;a!==SENTINEL$1;){if(getNodeIsVisited(a)){setNodeIsVisited(a.left,!1),setNodeIsVisited(a.right,!1),a===a.parent.right&&(c-=a.parent.delta),recomputeMaxEnd(a),a=a.parent;continue}if(!getNodeIsVisited(a.left)){if(d=c+a.maxEnd,d<e){setNodeIsVisited(a,!0);continue}if(a.left!==SENTINEL$1){a=a.left;continue}}if(_=c+a.start,_>i){a.start+=b,a.end+=b,a.delta+=b,(a.delta<-1073741824||a.delta>1073741824)&&(s.requestNormalizeDelta=!0),setNodeIsVisited(a,!0);continue}if(setNodeIsVisited(a,!0),a.right!==SENTINEL$1&&!getNodeIsVisited(a.right)){c+=a.delta,a=a.right;continue}}setNodeIsVisited(s.root,!1)}function collectNodesFromOwner(s,e){let i=s.root;const o=[];let a=0;for(;i!==SENTINEL$1;){if(getNodeIsVisited(i)){setNodeIsVisited(i.left,!1),setNodeIsVisited(i.right,!1),i=i.parent;continue}if(i.left!==SENTINEL$1&&!getNodeIsVisited(i.left)){i=i.left;continue}if(i.ownerId===e&&(o[a++]=i),setNodeIsVisited(i,!0),i.right!==SENTINEL$1&&!getNodeIsVisited(i.right)){i=i.right;continue}}return setNodeIsVisited(s.root,!1),o}function collectNodesPostOrder(s){let e=s.root;const i=[];let o=0;for(;e!==SENTINEL$1;){if(getNodeIsVisited(e)){setNodeIsVisited(e.left,!1),setNodeIsVisited(e.right,!1),e=e.parent;continue}if(e.left!==SENTINEL$1&&!getNodeIsVisited(e.left)){e=e.left;continue}if(e.right!==SENTINEL$1&&!getNodeIsVisited(e.right)){e=e.right;continue}i[o++]=e,setNodeIsVisited(e,!0)}return setNodeIsVisited(s.root,!1),i}function search(s,e,i,o){let a=s.root,c=0,d=0,_=0;const b=[];let k=0;for(;a!==SENTINEL$1;){if(getNodeIsVisited(a)){setNodeIsVisited(a.left,!1),setNodeIsVisited(a.right,!1),a===a.parent.right&&(c-=a.parent.delta),a=a.parent;continue}if(a.left!==SENTINEL$1&&!getNodeIsVisited(a.left)){a=a.left;continue}d=c+a.start,_=c+a.end,a.setCachedOffsets(d,_,o);let j=!0;if(e&&a.ownerId&&a.ownerId!==e&&(j=!1),i&&getNodeIsForValidation(a)&&(j=!1),j&&(b[k++]=a),setNodeIsVisited(a,!0),a.right!==SENTINEL$1&&!getNodeIsVisited(a.right)){c+=a.delta,a=a.right;continue}}return setNodeIsVisited(s.root,!1),b}function intervalSearch(s,e,i,o,a,c){let d=s.root,_=0,b=0,k=0,j=0;const _e=[];let et=0;for(;d!==SENTINEL$1;){if(getNodeIsVisited(d)){setNodeIsVisited(d.left,!1),setNodeIsVisited(d.right,!1),d===d.parent.right&&(_-=d.parent.delta),d=d.parent;continue}if(!getNodeIsVisited(d.left)){if(b=_+d.maxEnd,b<e){setNodeIsVisited(d,!0);continue}if(d.left!==SENTINEL$1){d=d.left;continue}}if(k=_+d.start,k>i){setNodeIsVisited(d,!0);continue}if(j=_+d.end,j>=e){d.setCachedOffsets(k,j,c);let tt=!0;o&&d.ownerId&&d.ownerId!==o&&(tt=!1),a&&getNodeIsForValidation(d)&&(tt=!1),tt&&(_e[et++]=d)}if(setNodeIsVisited(d,!0),d.right!==SENTINEL$1&&!getNodeIsVisited(d.right)){_+=d.delta,d=d.right;continue}}return setNodeIsVisited(s.root,!1),_e}function rbTreeInsert(s,e){if(s.root===SENTINEL$1)return e.parent=SENTINEL$1,e.left=SENTINEL$1,e.right=SENTINEL$1,setNodeColor(e,0),s.root=e,s.root;treeInsert(s,e),recomputeMaxEndWalkToRoot(e.parent);let i=e;for(;i!==s.root&&getNodeColor(i.parent)===1;)if(i.parent===i.parent.parent.left){const o=i.parent.parent.right;getNodeColor(o)===1?(setNodeColor(i.parent,0),setNodeColor(o,0),setNodeColor(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,leftRotate$1(s,i)),setNodeColor(i.parent,0),setNodeColor(i.parent.parent,1),rightRotate$1(s,i.parent.parent))}else{const o=i.parent.parent.left;getNodeColor(o)===1?(setNodeColor(i.parent,0),setNodeColor(o,0),setNodeColor(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,rightRotate$1(s,i)),setNodeColor(i.parent,0),setNodeColor(i.parent.parent,1),leftRotate$1(s,i.parent.parent))}return setNodeColor(s.root,0),e}function treeInsert(s,e){let i=0,o=s.root;const a=e.start,c=e.end;for(;;)if(intervalCompare(a,c,o.start+i,o.end+i)<0)if(o.left===SENTINEL$1){e.start-=i,e.end-=i,e.maxEnd-=i,o.left=e;break}else o=o.left;else if(o.right===SENTINEL$1){e.start-=i+o.delta,e.end-=i+o.delta,e.maxEnd-=i+o.delta,o.right=e;break}else i+=o.delta,o=o.right;e.parent=o,e.left=SENTINEL$1,e.right=SENTINEL$1,setNodeColor(e,1)}function rbTreeDelete(s,e){let i,o;if(e.left===SENTINEL$1?(i=e.right,o=e,i.delta+=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta):e.right===SENTINEL$1?(i=e.left,o=e):(o=leftest$1(e.right),i=o.right,i.start+=o.delta,i.end+=o.delta,i.delta+=o.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0),o.start+=e.delta,o.end+=e.delta,o.delta=e.delta,(o.delta<-1073741824||o.delta>1073741824)&&(s.requestNormalizeDelta=!0)),o===s.root){s.root=i,setNodeColor(i,0),e.detach(),resetSentinel$1(),recomputeMaxEnd(i),s.root.parent=SENTINEL$1;return}const a=getNodeColor(o)===1;if(o===o.parent.left?o.parent.left=i:o.parent.right=i,o===e?i.parent=o.parent:(o.parent===e?i.parent=o:i.parent=o.parent,o.left=e.left,o.right=e.right,o.parent=e.parent,setNodeColor(o,getNodeColor(e)),e===s.root?s.root=o:e===e.parent.left?e.parent.left=o:e.parent.right=o,o.left!==SENTINEL$1&&(o.left.parent=o),o.right!==SENTINEL$1&&(o.right.parent=o)),e.detach(),a){recomputeMaxEndWalkToRoot(i.parent),o!==e&&(recomputeMaxEndWalkToRoot(o),recomputeMaxEndWalkToRoot(o.parent)),resetSentinel$1();return}recomputeMaxEndWalkToRoot(i),recomputeMaxEndWalkToRoot(i.parent),o!==e&&(recomputeMaxEndWalkToRoot(o),recomputeMaxEndWalkToRoot(o.parent));let c;for(;i!==s.root&&getNodeColor(i)===0;)i===i.parent.left?(c=i.parent.right,getNodeColor(c)===1&&(setNodeColor(c,0),setNodeColor(i.parent,1),leftRotate$1(s,i.parent),c=i.parent.right),getNodeColor(c.left)===0&&getNodeColor(c.right)===0?(setNodeColor(c,1),i=i.parent):(getNodeColor(c.right)===0&&(setNodeColor(c.left,0),setNodeColor(c,1),rightRotate$1(s,c),c=i.parent.right),setNodeColor(c,getNodeColor(i.parent)),setNodeColor(i.parent,0),setNodeColor(c.right,0),leftRotate$1(s,i.parent),i=s.root)):(c=i.parent.left,getNodeColor(c)===1&&(setNodeColor(c,0),setNodeColor(i.parent,1),rightRotate$1(s,i.parent),c=i.parent.left),getNodeColor(c.left)===0&&getNodeColor(c.right)===0?(setNodeColor(c,1),i=i.parent):(getNodeColor(c.left)===0&&(setNodeColor(c.right,0),setNodeColor(c,1),leftRotate$1(s,c),c=i.parent.left),setNodeColor(c,getNodeColor(i.parent)),setNodeColor(i.parent,0),setNodeColor(c.left,0),rightRotate$1(s,i.parent),i=s.root));setNodeColor(i,0),resetSentinel$1()}function leftest$1(s){for(;s.left!==SENTINEL$1;)s=s.left;return s}function resetSentinel$1(){SENTINEL$1.parent=SENTINEL$1,SENTINEL$1.delta=0,SENTINEL$1.start=0,SENTINEL$1.end=0}function leftRotate$1(s,e){const i=e.right;i.delta+=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,e.right=i.left,i.left!==SENTINEL$1&&(i.left.parent=e),i.parent=e.parent,e.parent===SENTINEL$1?s.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left=e,e.parent=i,recomputeMaxEnd(e),recomputeMaxEnd(i)}function rightRotate$1(s,e){const i=e.left;e.delta-=i.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=i.delta,e.end-=i.delta,e.left=i.right,i.right!==SENTINEL$1&&(i.right.parent=e),i.parent=e.parent,e.parent===SENTINEL$1?s.root=i:e===e.parent.right?e.parent.right=i:e.parent.left=i,i.right=e,e.parent=i,recomputeMaxEnd(e),recomputeMaxEnd(i)}function computeMaxEnd(s){let e=s.end;if(s.left!==SENTINEL$1){const i=s.left.maxEnd;i>e&&(e=i)}if(s.right!==SENTINEL$1){const i=s.right.maxEnd+s.delta;i>e&&(e=i)}return e}function recomputeMaxEnd(s){s.maxEnd=computeMaxEnd(s)}function recomputeMaxEndWalkToRoot(s){for(;s!==SENTINEL$1;){const e=computeMaxEnd(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}function intervalCompare(s,e,i,o){return s===i?e-o:s-i}class TreeNode{constructor(e,i){this.piece=e,this.color=i,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==SENTINEL)return leftest(this.right);let e=this;for(;e.parent!==SENTINEL&&e.parent.left!==e;)e=e.parent;return e.parent===SENTINEL?SENTINEL:e.parent}prev(){if(this.left!==SENTINEL)return righttest(this.left);let e=this;for(;e.parent!==SENTINEL&&e.parent.right!==e;)e=e.parent;return e.parent===SENTINEL?SENTINEL:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const SENTINEL=new TreeNode(null,0);SENTINEL.parent=SENTINEL;SENTINEL.left=SENTINEL;SENTINEL.right=SENTINEL;SENTINEL.color=0;function leftest(s){for(;s.left!==SENTINEL;)s=s.left;return s}function righttest(s){for(;s.right!==SENTINEL;)s=s.right;return s}function calculateSize(s){return s===SENTINEL?0:s.size_left+s.piece.length+calculateSize(s.right)}function calculateLF(s){return s===SENTINEL?0:s.lf_left+s.piece.lineFeedCnt+calculateLF(s.right)}function resetSentinel(){SENTINEL.parent=SENTINEL}function leftRotate(s,e){const i=e.right;i.size_left+=e.size_left+(e.piece?e.piece.length:0),i.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=i.left,i.left!==SENTINEL&&(i.left.parent=e),i.parent=e.parent,e.parent===SENTINEL?s.root=i:e.parent.left===e?e.parent.left=i:e.parent.right=i,i.left=e,e.parent=i}function rightRotate(s,e){const i=e.left;e.left=i.right,i.right!==SENTINEL&&(i.right.parent=e),i.parent=e.parent,e.size_left-=i.size_left+(i.piece?i.piece.length:0),e.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),e.parent===SENTINEL?s.root=i:e===e.parent.right?e.parent.right=i:e.parent.left=i,i.right=e,e.parent=i}function rbDelete(s,e){let i,o;if(e.left===SENTINEL?(o=e,i=o.right):e.right===SENTINEL?(o=e,i=o.left):(o=leftest(e.right),i=o.right),o===s.root){s.root=i,i.color=0,e.detach(),resetSentinel(),s.root.parent=SENTINEL;return}const a=o.color===1;if(o===o.parent.left?o.parent.left=i:o.parent.right=i,o===e?(i.parent=o.parent,recomputeTreeMetadata(s,i)):(o.parent===e?i.parent=o:i.parent=o.parent,recomputeTreeMetadata(s,i),o.left=e.left,o.right=e.right,o.parent=e.parent,o.color=e.color,e===s.root?s.root=o:e===e.parent.left?e.parent.left=o:e.parent.right=o,o.left!==SENTINEL&&(o.left.parent=o),o.right!==SENTINEL&&(o.right.parent=o),o.size_left=e.size_left,o.lf_left=e.lf_left,recomputeTreeMetadata(s,o)),e.detach(),i.parent.left===i){const d=calculateSize(i),_=calculateLF(i);if(d!==i.parent.size_left||_!==i.parent.lf_left){const b=d-i.parent.size_left,k=_-i.parent.lf_left;i.parent.size_left=d,i.parent.lf_left=_,updateTreeMetadata(s,i.parent,b,k)}}if(recomputeTreeMetadata(s,i.parent),a){resetSentinel();return}let c;for(;i!==s.root&&i.color===0;)i===i.parent.left?(c=i.parent.right,c.color===1&&(c.color=0,i.parent.color=1,leftRotate(s,i.parent),c=i.parent.right),c.left.color===0&&c.right.color===0?(c.color=1,i=i.parent):(c.right.color===0&&(c.left.color=0,c.color=1,rightRotate(s,c),c=i.parent.right),c.color=i.parent.color,i.parent.color=0,c.right.color=0,leftRotate(s,i.parent),i=s.root)):(c=i.parent.left,c.color===1&&(c.color=0,i.parent.color=1,rightRotate(s,i.parent),c=i.parent.left),c.left.color===0&&c.right.color===0?(c.color=1,i=i.parent):(c.left.color===0&&(c.right.color=0,c.color=1,leftRotate(s,c),c=i.parent.left),c.color=i.parent.color,i.parent.color=0,c.left.color=0,rightRotate(s,i.parent),i=s.root));i.color=0,resetSentinel()}function fixInsert(s,e){for(recomputeTreeMetadata(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const i=e.parent.parent.right;i.color===1?(e.parent.color=0,i.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,leftRotate(s,e)),e.parent.color=0,e.parent.parent.color=1,rightRotate(s,e.parent.parent))}else{const i=e.parent.parent.left;i.color===1?(e.parent.color=0,i.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,rightRotate(s,e)),e.parent.color=0,e.parent.parent.color=1,leftRotate(s,e.parent.parent))}s.root.color=0}function updateTreeMetadata(s,e,i,o){for(;e!==s.root&&e!==SENTINEL;)e.parent.left===e&&(e.parent.size_left+=i,e.parent.lf_left+=o),e=e.parent}function recomputeTreeMetadata(s,e){let i=0,o=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,i=calculateSize(e.left)-e.size_left,o=calculateLF(e.left)-e.lf_left,e.size_left+=i,e.lf_left+=o;e!==s.root&&(i!==0||o!==0);)e.parent.left===e&&(e.parent.size_left+=i,e.parent.lf_left+=o),e=e.parent}}const AverageBufferSize=65535;function createUintArray(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}class LineStarts{constructor(e,i,o,a,c){this.lineStarts=e,this.cr=i,this.lf=o,this.crlf=a,this.isBasicASCII=c}}function createLineStartsFast(s,e=!0){const i=[0];let o=1;for(let a=0,c=s.length;a<c;a++){const d=s.charCodeAt(a);d===13?a+1<c&&s.charCodeAt(a+1)===10?(i[o++]=a+2,a++):i[o++]=a+1:d===10&&(i[o++]=a+1)}return e?createUintArray(i):i}function createLineStarts(s,e){s.length=0,s[0]=0;let i=1,o=0,a=0,c=0,d=!0;for(let b=0,k=e.length;b<k;b++){const j=e.charCodeAt(b);j===13?b+1<k&&e.charCodeAt(b+1)===10?(c++,s[i++]=b+2,b++):(o++,s[i++]=b+1):j===10?(a++,s[i++]=b+1):d&&j!==9&&(j<32||j>126)&&(d=!1)}const _=new LineStarts(createUintArray(s),o,a,c,d);return s.length=0,_}class Piece{constructor(e,i,o,a,c){this.bufferIndex=e,this.start=i,this.end=o,this.lineFeedCnt=a,this.length=c}}class StringBuffer{constructor(e,i){this.buffer=e,this.lineStarts=i}}class PieceTreeSnapshot{constructor(e,i){this._pieces=[],this._tree=e,this._BOM=i,this._index=0,e.root!==SENTINEL&&e.iterate(e.root,o=>(o!==SENTINEL&&this._pieces.push(o.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class PieceTreeSearchCache{constructor(e){this._limit=e,this._cache=[]}get(e){for(let i=this._cache.length-1;i>=0;i--){const o=this._cache[i];if(o.nodeStartOffset<=e&&o.nodeStartOffset+o.node.piece.length>=e)return o}return null}get2(e){for(let i=this._cache.length-1;i>=0;i--){const o=this._cache[i];if(o.nodeStartLineNumber&&o.nodeStartLineNumber<e&&o.nodeStartLineNumber+o.node.piece.lineFeedCnt>=e)return o}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let i=!1;const o=this._cache;for(let a=0;a<o.length;a++){const c=o[a];if(c.node.parent===null||c.nodeStartOffset>=e){o[a]=null,i=!0;continue}}if(i){const a=[];for(const c of o)c!==null&&a.push(c);this._cache=a}}}class PieceTreeBase{constructor(e,i,o){this.create(e,i,o)}create(e,i,o){this._buffers=[new StringBuffer("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=SENTINEL,this._lineCnt=1,this._length=0,this._EOL=i,this._EOLLength=i.length,this._EOLNormalized=o;let a=null;for(let c=0,d=e.length;c<d;c++)if(e[c].buffer.length>0){e[c].lineStarts||(e[c].lineStarts=createLineStartsFast(e[c].buffer));const _=new Piece(c+1,{line:0,column:0},{line:e[c].lineStarts.length-1,column:e[c].buffer.length-e[c].lineStarts[e[c].lineStarts.length-1]},e[c].lineStarts.length-1,e[c].buffer.length);this._buffers.push(e[c]),a=this.rbInsertRight(a,_)}this._searchCache=new PieceTreeSearchCache(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const i=AverageBufferSize,o=i-Math.floor(i/3),a=o*2;let c="",d=0;const _=[];if(this.iterate(this.root,b=>{const k=this.getNodeContent(b),j=k.length;if(d<=o||d+j<a)return c+=k,d+=j,!0;const _e=c.replace(/\r\n|\r|\n/g,e);return _.push(new StringBuffer(_e,createLineStartsFast(_e))),c=k,d=j,!0}),d>0){const b=c.replace(/\r\n|\r|\n/g,e);_.push(new StringBuffer(b,createLineStartsFast(b)))}this.create(_,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new PieceTreeSnapshot(this,e)}getOffsetAt(e,i){let o=0,a=this.root;for(;a!==SENTINEL;)if(a.left!==SENTINEL&&a.lf_left+1>=e)a=a.left;else if(a.lf_left+a.piece.lineFeedCnt+1>=e){o+=a.size_left;const c=this.getAccumulatedValue(a,e-a.lf_left-2);return o+=c+i-1}else e-=a.lf_left+a.piece.lineFeedCnt,o+=a.size_left+a.piece.length,a=a.right;return o}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let i=this.root,o=0;const a=e;for(;i!==SENTINEL;)if(i.size_left!==0&&i.size_left>=e)i=i.left;else if(i.size_left+i.piece.length>=e){const c=this.getIndexOf(i,e-i.size_left);if(o+=i.lf_left+c.index,c.index===0){const d=this.getOffsetAt(o+1,1),_=a-d;return new Position$1(o+1,_+1)}return new Position$1(o+1,c.remainder+1)}else if(e-=i.size_left+i.piece.length,o+=i.lf_left+i.piece.lineFeedCnt,i.right===SENTINEL){const c=this.getOffsetAt(o+1,1),d=a-e-c;return new Position$1(o+1,d+1)}else i=i.right;return new Position$1(1,1)}getValueInRange(e,i){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const o=this.nodeAt2(e.startLineNumber,e.startColumn),a=this.nodeAt2(e.endLineNumber,e.endColumn),c=this.getValueInRange2(o,a);return i?i!==this._EOL||!this._EOLNormalized?c.replace(/\r\n|\r|\n/g,i):i===this.getEOL()&&this._EOLNormalized?c:c.replace(/\r\n|\r|\n/g,i):c}getValueInRange2(e,i){if(e.node===i.node){const _=e.node,b=this._buffers[_.piece.bufferIndex].buffer,k=this.offsetInBuffer(_.piece.bufferIndex,_.piece.start);return b.substring(k+e.remainder,k+i.remainder)}let o=e.node;const a=this._buffers[o.piece.bufferIndex].buffer,c=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);let d=a.substring(c+e.remainder,c+o.piece.length);for(o=o.next();o!==SENTINEL;){const _=this._buffers[o.piece.bufferIndex].buffer,b=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);if(o===i.node){d+=_.substring(b,b+i.remainder);break}else d+=_.substr(b,o.piece.length);o=o.next()}return d}getLinesContent(){const e=[];let i=0,o="",a=!1;return this.iterate(this.root,c=>{if(c===SENTINEL)return!0;const d=c.piece;let _=d.length;if(_===0)return!0;const b=this._buffers[d.bufferIndex].buffer,k=this._buffers[d.bufferIndex].lineStarts,j=d.start.line,_e=d.end.line;let et=k[j]+d.start.column;if(a&&(b.charCodeAt(et)===10&&(et++,_--),e[i++]=o,o="",a=!1,_===0))return!0;if(j===_e)return!this._EOLNormalized&&b.charCodeAt(et+_-1)===13?(a=!0,o+=b.substr(et,_-1)):o+=b.substr(et,_),!0;o+=this._EOLNormalized?b.substring(et,Math.max(et,k[j+1]-this._EOLLength)):b.substring(et,k[j+1]).replace(/(\r\n|\r|\n)$/,""),e[i++]=o;for(let tt=j+1;tt<_e;tt++)o=this._EOLNormalized?b.substring(k[tt],k[tt+1]-this._EOLLength):b.substring(k[tt],k[tt+1]).replace(/(\r\n|\r|\n)$/,""),e[i++]=o;return!this._EOLNormalized&&b.charCodeAt(k[_e]+d.end.column-1)===13?(a=!0,d.end.column===0?i--:o=b.substr(k[_e],d.end.column-1)):o=b.substr(k[_e],d.end.column),!0}),a&&(e[i++]=o,o=""),e[i++]=o,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const i=e.node.next();if(!i)return 0;const o=this._buffers[i.piece.bufferIndex],a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o.buffer.charCodeAt(a)}else{const i=this._buffers[e.node.piece.bufferIndex],a=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return i.buffer.charCodeAt(a)}}getLineCharCode(e,i){const o=this.nodeAt2(e,i+1);return this._getCharCode(o)}getLineLength(e){if(e===this.getLineCount()){const i=this.getOffsetAt(e,1);return this.getLength()-i}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,i,o,a,c,d,_,b,k,j,_e){const et=this._buffers[e.piece.bufferIndex],tt=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),it=this.offsetInBuffer(e.piece.bufferIndex,c),st=this.offsetInBuffer(e.piece.bufferIndex,d);let ot;const nt={line:0,column:0};let rt,at;i._wordSeparators?(rt=et.buffer.substring(it,st),at=lt=>lt+it,i.reset(0)):(rt=et.buffer,at=lt=>lt,i.reset(it));do if(ot=i.next(rt),ot){if(at(ot.index)>=st)return j;this.positionInBuffer(e,at(ot.index)-tt,nt);const lt=this.getLineFeedCnt(e.piece.bufferIndex,c,nt),gt=nt.line===c.line?nt.column-c.column+a:nt.column+1,ht=gt+ot[0].length;if(_e[j++]=createFindMatch(new Range$2(o+lt,gt,o+lt,ht),ot,b),at(ot.index)+ot[0].length>=st||j>=k)return j}while(ot);return j}findMatchesLineByLine(e,i,o,a){const c=[];let d=0;const _=new Searcher(i.wordSeparators,i.regex);let b=this.nodeAt2(e.startLineNumber,e.startColumn);if(b===null)return[];const k=this.nodeAt2(e.endLineNumber,e.endColumn);if(k===null)return[];let j=this.positionInBuffer(b.node,b.remainder);const _e=this.positionInBuffer(k.node,k.remainder);if(b.node===k.node)return this.findMatchesInNode(b.node,_,e.startLineNumber,e.startColumn,j,_e,i,o,a,d,c),c;let et=e.startLineNumber,tt=b.node;for(;tt!==k.node;){const st=this.getLineFeedCnt(tt.piece.bufferIndex,j,tt.piece.end);if(st>=1){const nt=this._buffers[tt.piece.bufferIndex].lineStarts,rt=this.offsetInBuffer(tt.piece.bufferIndex,tt.piece.start),at=nt[j.line+st],lt=et===e.startLineNumber?e.startColumn:1;if(d=this.findMatchesInNode(tt,_,et,lt,j,this.positionInBuffer(tt,at-rt),i,o,a,d,c),d>=a)return c;et+=st}const ot=et===e.startLineNumber?e.startColumn-1:0;if(et===e.endLineNumber){const nt=this.getLineContent(et).substring(ot,e.endColumn-1);return d=this._findMatchesInLine(i,_,nt,e.endLineNumber,ot,d,c,o,a),c}if(d=this._findMatchesInLine(i,_,this.getLineContent(et).substr(ot),et,ot,d,c,o,a),d>=a)return c;et++,b=this.nodeAt2(et,1),tt=b.node,j=this.positionInBuffer(b.node,b.remainder)}if(et===e.endLineNumber){const st=et===e.startLineNumber?e.startColumn-1:0,ot=this.getLineContent(et).substring(st,e.endColumn-1);return d=this._findMatchesInLine(i,_,ot,e.endLineNumber,st,d,c,o,a),c}const it=et===e.startLineNumber?e.startColumn:1;return d=this.findMatchesInNode(k.node,_,et,it,j,_e,i,o,a,d,c),c}_findMatchesInLine(e,i,o,a,c,d,_,b,k){const j=e.wordSeparators;if(!b&&e.simpleSearch){const et=e.simpleSearch,tt=et.length,it=o.length;let st=-tt;for(;(st=o.indexOf(et,st+tt))!==-1;)if((!j||isValidMatch(j,o,it,st,tt))&&(_[d++]=new FindMatch(new Range$2(a,st+1+c,a,st+1+tt+c),null),d>=k))return d;return d}let _e;i.reset(0);do if(_e=i.next(o),_e&&(_[d++]=createFindMatch(new Range$2(a,_e.index+1+c,a,_e.index+1+_e[0].length+c),_e,b),d>=k))return d;while(_e);return d}insert(e,i,o=!1){if(this._EOLNormalized=this._EOLNormalized&&o,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==SENTINEL){const{node:a,remainder:c,nodeStartOffset:d}=this.nodeAt(e),_=a.piece,b=_.bufferIndex,k=this.positionInBuffer(a,c);if(a.piece.bufferIndex===0&&_.end.line===this._lastChangeBufferPos.line&&_.end.column===this._lastChangeBufferPos.column&&d+_.length===e&&i.length<AverageBufferSize){this.appendToNode(a,i),this.computeBufferMetadata();return}if(d===e)this.insertContentToNodeLeft(i,a),this._searchCache.validate(e);else if(d+a.piece.length>e){const j=[];let _e=new Piece(_.bufferIndex,k,_.end,this.getLineFeedCnt(_.bufferIndex,k,_.end),this.offsetInBuffer(b,_.end)-this.offsetInBuffer(b,k));if(this.shouldCheckCRLF()&&this.endWithCR(i)&&this.nodeCharCodeAt(a,c)===10){const st={line:_e.start.line+1,column:0};_e=new Piece(_e.bufferIndex,st,_e.end,this.getLineFeedCnt(_e.bufferIndex,st,_e.end),_e.length-1),i+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(i))if(this.nodeCharCodeAt(a,c-1)===13){const st=this.positionInBuffer(a,c-1);this.deleteNodeTail(a,st),i="\r"+i,a.piece.length===0&&j.push(a)}else this.deleteNodeTail(a,k);else this.deleteNodeTail(a,k);const et=this.createNewPieces(i);_e.length>0&&this.rbInsertRight(a,_e);let tt=a;for(let it=0;it<et.length;it++)tt=this.rbInsertRight(tt,et[it]);this.deleteNodes(j)}else this.insertContentToNodeRight(i,a)}else{const a=this.createNewPieces(i);let c=this.rbInsertLeft(null,a[0]);for(let d=1;d<a.length;d++)c=this.rbInsertRight(c,a[d])}this.computeBufferMetadata()}delete(e,i){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",i<=0||this.root===SENTINEL)return;const o=this.nodeAt(e),a=this.nodeAt(e+i),c=o.node,d=a.node;if(c===d){const et=this.positionInBuffer(c,o.remainder),tt=this.positionInBuffer(c,a.remainder);if(o.nodeStartOffset===e){if(i===c.piece.length){const it=c.next();rbDelete(this,c),this.validateCRLFWithPrevNode(it),this.computeBufferMetadata();return}this.deleteNodeHead(c,tt),this._searchCache.validate(e),this.validateCRLFWithPrevNode(c),this.computeBufferMetadata();return}if(o.nodeStartOffset+c.piece.length===e+i){this.deleteNodeTail(c,et),this.validateCRLFWithNextNode(c),this.computeBufferMetadata();return}this.shrinkNode(c,et,tt),this.computeBufferMetadata();return}const _=[],b=this.positionInBuffer(c,o.remainder);this.deleteNodeTail(c,b),this._searchCache.validate(e),c.piece.length===0&&_.push(c);const k=this.positionInBuffer(d,a.remainder);this.deleteNodeHead(d,k),d.piece.length===0&&_.push(d);const j=c.next();for(let et=j;et!==SENTINEL&&et!==d;et=et.next())_.push(et);const _e=c.piece.length===0?c.prev():c;this.deleteNodes(_),this.validateCRLFWithNextNode(_e),this.computeBufferMetadata()}insertContentToNodeLeft(e,i){const o=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(i)){const d=i.piece,_={line:d.start.line+1,column:0},b=new Piece(d.bufferIndex,_,d.end,this.getLineFeedCnt(d.bufferIndex,_,d.end),d.length-1);i.piece=b,e+=`
`,updateTreeMetadata(this,i,-1,-1),i.piece.length===0&&o.push(i)}const a=this.createNewPieces(e);let c=this.rbInsertLeft(i,a[a.length-1]);for(let d=a.length-2;d>=0;d--)c=this.rbInsertLeft(c,a[d]);this.validateCRLFWithPrevNode(c),this.deleteNodes(o)}insertContentToNodeRight(e,i){this.adjustCarriageReturnFromNext(e,i)&&(e+=`
`);const o=this.createNewPieces(e),a=this.rbInsertRight(i,o[0]);let c=a;for(let d=1;d<o.length;d++)c=this.rbInsertRight(c,o[d]);this.validateCRLFWithPrevNode(a)}positionInBuffer(e,i,o){const a=e.piece,c=e.piece.bufferIndex,d=this._buffers[c].lineStarts,b=d[a.start.line]+a.start.column+i;let k=a.start.line,j=a.end.line,_e=0,et=0,tt=0;for(;k<=j&&(_e=k+(j-k)/2|0,tt=d[_e],_e!==j);)if(et=d[_e+1],b<tt)j=_e-1;else if(b>=et)k=_e+1;else break;return o?(o.line=_e,o.column=b-tt,null):{line:_e,column:b-tt}}getLineFeedCnt(e,i,o){if(o.column===0)return o.line-i.line;const a=this._buffers[e].lineStarts;if(o.line===a.length-1)return o.line-i.line;const c=a[o.line+1],d=a[o.line]+o.column;if(c>d+1)return o.line-i.line;const _=d-1;return this._buffers[e].buffer.charCodeAt(_)===13?o.line-i.line+1:o.line-i.line}offsetInBuffer(e,i){return this._buffers[e].lineStarts[i.line]+i.column}deleteNodes(e){for(let i=0;i<e.length;i++)rbDelete(this,e[i])}createNewPieces(e){if(e.length>AverageBufferSize){const j=[];for(;e.length>AverageBufferSize;){const et=e.charCodeAt(AverageBufferSize-1);let tt;et===13||et>=55296&&et<=56319?(tt=e.substring(0,AverageBufferSize-1),e=e.substring(AverageBufferSize-1)):(tt=e.substring(0,AverageBufferSize),e=e.substring(AverageBufferSize));const it=createLineStartsFast(tt);j.push(new Piece(this._buffers.length,{line:0,column:0},{line:it.length-1,column:tt.length-it[it.length-1]},it.length-1,tt.length)),this._buffers.push(new StringBuffer(tt,it))}const _e=createLineStartsFast(e);return j.push(new Piece(this._buffers.length,{line:0,column:0},{line:_e.length-1,column:e.length-_e[_e.length-1]},_e.length-1,e.length)),this._buffers.push(new StringBuffer(e,_e)),j}let i=this._buffers[0].buffer.length;const o=createLineStartsFast(e,!1);let a=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===i&&i!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},a=this._lastChangeBufferPos;for(let j=0;j<o.length;j++)o[j]+=i+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1)),this._buffers[0].buffer+="_"+e,i+=1}else{if(i!==0)for(let j=0;j<o.length;j++)o[j]+=i;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1)),this._buffers[0].buffer+=e}const c=this._buffers[0].buffer.length,d=this._buffers[0].lineStarts.length-1,_=c-this._buffers[0].lineStarts[d],b={line:d,column:_},k=new Piece(0,a,b,this.getLineFeedCnt(0,a,b),c-i);return this._lastChangeBufferPos=b,[k]}getLineRawContent(e,i=0){let o=this.root,a="";const c=this._searchCache.get2(e);if(c){o=c.node;const d=this.getAccumulatedValue(o,e-c.nodeStartLineNumber-1),_=this._buffers[o.piece.bufferIndex].buffer,b=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);if(c.nodeStartLineNumber+o.piece.lineFeedCnt===e)a=_.substring(b+d,b+o.piece.length);else{const k=this.getAccumulatedValue(o,e-c.nodeStartLineNumber);return _.substring(b+d,b+k-i)}}else{let d=0;const _=e;for(;o!==SENTINEL;)if(o.left!==SENTINEL&&o.lf_left>=e-1)o=o.left;else if(o.lf_left+o.piece.lineFeedCnt>e-1){const b=this.getAccumulatedValue(o,e-o.lf_left-2),k=this.getAccumulatedValue(o,e-o.lf_left-1),j=this._buffers[o.piece.bufferIndex].buffer,_e=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);return d+=o.size_left,this._searchCache.set({node:o,nodeStartOffset:d,nodeStartLineNumber:_-(e-1-o.lf_left)}),j.substring(_e+b,_e+k-i)}else if(o.lf_left+o.piece.lineFeedCnt===e-1){const b=this.getAccumulatedValue(o,e-o.lf_left-2),k=this._buffers[o.piece.bufferIndex].buffer,j=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);a=k.substring(j+b,j+o.piece.length);break}else e-=o.lf_left+o.piece.lineFeedCnt,d+=o.size_left+o.piece.length,o=o.right}for(o=o.next();o!==SENTINEL;){const d=this._buffers[o.piece.bufferIndex].buffer;if(o.piece.lineFeedCnt>0){const _=this.getAccumulatedValue(o,0),b=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);return a+=d.substring(b,b+_-i),a}else{const _=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);a+=d.substr(_,o.piece.length)}o=o.next()}return a}computeBufferMetadata(){let e=this.root,i=1,o=0;for(;e!==SENTINEL;)i+=e.lf_left+e.piece.lineFeedCnt,o+=e.size_left+e.piece.length,e=e.right;this._lineCnt=i,this._length=o,this._searchCache.validate(this._length)}getIndexOf(e,i){const o=e.piece,a=this.positionInBuffer(e,i),c=a.line-o.start.line;if(this.offsetInBuffer(o.bufferIndex,o.end)-this.offsetInBuffer(o.bufferIndex,o.start)===i){const d=this.getLineFeedCnt(e.piece.bufferIndex,o.start,a);if(d!==c)return{index:d,remainder:0}}return{index:c,remainder:a.column}}getAccumulatedValue(e,i){if(i<0)return 0;const o=e.piece,a=this._buffers[o.bufferIndex].lineStarts,c=o.start.line+i+1;return c>o.end.line?a[o.end.line]+o.end.column-a[o.start.line]-o.start.column:a[c]-a[o.start.line]-o.start.column}deleteNodeTail(e,i){const o=e.piece,a=o.lineFeedCnt,c=this.offsetInBuffer(o.bufferIndex,o.end),d=i,_=this.offsetInBuffer(o.bufferIndex,d),b=this.getLineFeedCnt(o.bufferIndex,o.start,d),k=b-a,j=_-c,_e=o.length+j;e.piece=new Piece(o.bufferIndex,o.start,d,b,_e),updateTreeMetadata(this,e,j,k)}deleteNodeHead(e,i){const o=e.piece,a=o.lineFeedCnt,c=this.offsetInBuffer(o.bufferIndex,o.start),d=i,_=this.getLineFeedCnt(o.bufferIndex,d,o.end),b=this.offsetInBuffer(o.bufferIndex,d),k=_-a,j=c-b,_e=o.length+j;e.piece=new Piece(o.bufferIndex,d,o.end,_,_e),updateTreeMetadata(this,e,j,k)}shrinkNode(e,i,o){const a=e.piece,c=a.start,d=a.end,_=a.length,b=a.lineFeedCnt,k=i,j=this.getLineFeedCnt(a.bufferIndex,a.start,k),_e=this.offsetInBuffer(a.bufferIndex,i)-this.offsetInBuffer(a.bufferIndex,c);e.piece=new Piece(a.bufferIndex,a.start,k,j,_e),updateTreeMetadata(this,e,_e-_,j-b);const et=new Piece(a.bufferIndex,o,d,this.getLineFeedCnt(a.bufferIndex,o,d),this.offsetInBuffer(a.bufferIndex,d)-this.offsetInBuffer(a.bufferIndex,o)),tt=this.rbInsertRight(e,et);this.validateCRLFWithPrevNode(tt)}appendToNode(e,i){this.adjustCarriageReturnFromNext(i,e)&&(i+=`
`);const o=this.shouldCheckCRLF()&&this.startWithLF(i)&&this.endWithCR(e),a=this._buffers[0].buffer.length;this._buffers[0].buffer+=i;const c=createLineStartsFast(i,!1);for(let tt=0;tt<c.length;tt++)c[tt]+=a;if(o){const tt=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:a-tt}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(c.slice(1));const d=this._buffers[0].lineStarts.length-1,_=this._buffers[0].buffer.length-this._buffers[0].lineStarts[d],b={line:d,column:_},k=e.piece.length+i.length,j=e.piece.lineFeedCnt,_e=this.getLineFeedCnt(0,e.piece.start,b),et=_e-j;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,b,_e,k),this._lastChangeBufferPos=b,updateTreeMetadata(this,e,i.length,et)}nodeAt(e){let i=this.root;const o=this._searchCache.get(e);if(o)return{node:o.node,nodeStartOffset:o.nodeStartOffset,remainder:e-o.nodeStartOffset};let a=0;for(;i!==SENTINEL;)if(i.size_left>e)i=i.left;else if(i.size_left+i.piece.length>=e){a+=i.size_left;const c={node:i,remainder:e-i.size_left,nodeStartOffset:a};return this._searchCache.set(c),c}else e-=i.size_left+i.piece.length,a+=i.size_left+i.piece.length,i=i.right;return null}nodeAt2(e,i){let o=this.root,a=0;for(;o!==SENTINEL;)if(o.left!==SENTINEL&&o.lf_left>=e-1)o=o.left;else if(o.lf_left+o.piece.lineFeedCnt>e-1){const c=this.getAccumulatedValue(o,e-o.lf_left-2),d=this.getAccumulatedValue(o,e-o.lf_left-1);return a+=o.size_left,{node:o,remainder:Math.min(c+i-1,d),nodeStartOffset:a}}else if(o.lf_left+o.piece.lineFeedCnt===e-1){const c=this.getAccumulatedValue(o,e-o.lf_left-2);if(c+i-1<=o.piece.length)return{node:o,remainder:c+i-1,nodeStartOffset:a};i-=o.piece.length-c;break}else e-=o.lf_left+o.piece.lineFeedCnt,a+=o.size_left+o.piece.length,o=o.right;for(o=o.next();o!==SENTINEL;){if(o.piece.lineFeedCnt>0){const c=this.getAccumulatedValue(o,0),d=this.offsetOfNode(o);return{node:o,remainder:Math.min(i-1,c),nodeStartOffset:d}}else if(o.piece.length>=i-1){const c=this.offsetOfNode(o);return{node:o,remainder:i-1,nodeStartOffset:c}}else i-=o.piece.length;o=o.next()}return null}nodeCharCodeAt(e,i){if(e.piece.lineFeedCnt<1)return-1;const o=this._buffers[e.piece.bufferIndex],a=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+i;return o.buffer.charCodeAt(a)}offsetOfNode(e){if(!e)return 0;let i=e.size_left;for(;e!==this.root;)e.parent.right===e&&(i+=e.parent.size_left+e.parent.piece.length),e=e.parent;return i}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===SENTINEL||e.piece.lineFeedCnt===0)return!1;const i=e.piece,o=this._buffers[i.bufferIndex].lineStarts,a=i.start.line,c=o[a]+i.start.column;return a===o.length-1||o[a+1]>c+1?!1:this._buffers[i.bufferIndex].buffer.charCodeAt(c)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===SENTINEL||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const i=e.prev();this.endWithCR(i)&&this.fixCRLF(i,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=e.next();this.startWithLF(i)&&this.fixCRLF(e,i)}}fixCRLF(e,i){const o=[],a=this._buffers[e.piece.bufferIndex].lineStarts;let c;e.piece.end.column===0?c={line:e.piece.end.line-1,column:a[e.piece.end.line]-a[e.piece.end.line-1]-1}:c={line:e.piece.end.line,column:e.piece.end.column-1};const d=e.piece.length-1,_=e.piece.lineFeedCnt-1;e.piece=new Piece(e.piece.bufferIndex,e.piece.start,c,_,d),updateTreeMetadata(this,e,-1,-1),e.piece.length===0&&o.push(e);const b={line:i.piece.start.line+1,column:0},k=i.piece.length-1,j=this.getLineFeedCnt(i.piece.bufferIndex,b,i.piece.end);i.piece=new Piece(i.piece.bufferIndex,b,i.piece.end,j,k),updateTreeMetadata(this,i,-1,-1),i.piece.length===0&&o.push(i);const _e=this.createNewPieces(`\r
`);this.rbInsertRight(e,_e[0]);for(let et=0;et<o.length;et++)rbDelete(this,o[et])}adjustCarriageReturnFromNext(e,i){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const o=i.next();if(this.startWithLF(o)){if(e+=`
`,o.piece.length===1)rbDelete(this,o);else{const a=o.piece,c={line:a.start.line+1,column:0},d=a.length-1,_=this.getLineFeedCnt(a.bufferIndex,c,a.end);o.piece=new Piece(a.bufferIndex,c,a.end,_,d),updateTreeMetadata(this,o,-1,-1)}return!0}}return!1}iterate(e,i){if(e===SENTINEL)return i(SENTINEL);const o=this.iterate(e.left,i);return o&&i(e)&&this.iterate(e.right,i)}getNodeContent(e){if(e===SENTINEL)return"";const i=this._buffers[e.piece.bufferIndex],o=e.piece,a=this.offsetInBuffer(o.bufferIndex,o.start),c=this.offsetInBuffer(o.bufferIndex,o.end);return i.buffer.substring(a,c)}getPieceContent(e){const i=this._buffers[e.bufferIndex],o=this.offsetInBuffer(e.bufferIndex,e.start),a=this.offsetInBuffer(e.bufferIndex,e.end);return i.buffer.substring(o,a)}rbInsertRight(e,i){const o=new TreeNode(i,1);if(o.left=SENTINEL,o.right=SENTINEL,o.parent=SENTINEL,o.size_left=0,o.lf_left=0,this.root===SENTINEL)this.root=o,o.color=0;else if(e.right===SENTINEL)e.right=o,o.parent=e;else{const c=leftest(e.right);c.left=o,o.parent=c}return fixInsert(this,o),o}rbInsertLeft(e,i){const o=new TreeNode(i,1);if(o.left=SENTINEL,o.right=SENTINEL,o.parent=SENTINEL,o.size_left=0,o.lf_left=0,this.root===SENTINEL)this.root=o,o.color=0;else if(e.left===SENTINEL)e.left=o,o.parent=e;else{const a=righttest(e.left);a.right=o,o.parent=a}return fixInsert(this,o),o}}class PieceTreeTextBuffer extends Disposable{constructor(e,i,o,a,c,d,_){super(),this._onDidChangeContent=this._register(new Emitter$1),this._BOM=i,this._mightContainNonBasicASCII=!d,this._mightContainRTL=a,this._mightContainUnusualLineTerminators=c,this._pieceTree=new PieceTreeBase(e,o,_)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,i){return this._pieceTree.getOffsetAt(e,i)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,i){const o=e+i,a=this.getPositionAt(e),c=this.getPositionAt(o);return new Range$2(a.lineNumber,a.column,c.lineNumber,c.column)}getValueInRange(e,i=0){if(e.isEmpty())return"";const o=this._getEndOfLine(i);return this._pieceTree.getValueInRange(e,o)}getValueLengthInRange(e,i=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const o=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-o}getCharacterCountInRange(e,i=0){if(this._mightContainNonBasicASCII){let o=0;const a=e.startLineNumber,c=e.endLineNumber;for(let d=a;d<=c;d++){const _=this.getLineContent(d),b=d===a?e.startColumn-1:0,k=d===c?e.endColumn-1:_.length;for(let j=b;j<k;j++)isHighSurrogate(_.charCodeAt(j))?(o=o+1,j=j+1):o=o+1}return o+=this._getEndOfLine(i).length*(c-a),o}return this.getValueLengthInRange(e,i)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,i){return this._pieceTree.getLineCharCode(e,i)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const i=firstNonWhitespaceIndex(this.getLineContent(e));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(e){const i=lastNonWhitespaceIndex(this.getLineContent(e));return i===-1?0:i+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,i,o){let a=this._mightContainRTL,c=this._mightContainUnusualLineTerminators,d=this._mightContainNonBasicASCII,_=!0,b=[];for(let st=0;st<e.length;st++){const ot=e[st];_&&ot._isTracked&&(_=!1);const nt=ot.range;if(ot.text){let ht=!0;d||(ht=!isBasicASCII(ot.text),d=ht),!a&&ht&&(a=containsRTL(ot.text)),!c&&ht&&(c=containsUnusualLineTerminators(ot.text))}let rt="",at=0,lt=0,gt=0;if(ot.text){let ht;[at,lt,gt,ht]=countEOL(ot.text);const ut=this.getEOL();ht===0||ht===(ut===`\r
`?2:1)?rt=ot.text:rt=ot.text.replace(/\r\n|\r|\n/g,ut)}b[st]={sortIndex:st,identifier:ot.identifier||null,range:nt,rangeOffset:this.getOffsetAt(nt.startLineNumber,nt.startColumn),rangeLength:this.getValueLengthInRange(nt),text:rt,eolCount:at,firstLineLength:lt,lastLineLength:gt,forceMoveMarkers:Boolean(ot.forceMoveMarkers),isAutoWhitespaceEdit:ot.isAutoWhitespaceEdit||!1}}b.sort(PieceTreeTextBuffer._sortOpsAscending);let k=!1;for(let st=0,ot=b.length-1;st<ot;st++){const nt=b[st].range.getEndPosition(),rt=b[st+1].range.getStartPosition();if(rt.isBeforeOrEqual(nt)){if(rt.isBefore(nt))throw new Error("Overlapping ranges are not allowed!");k=!0}}_&&(b=this._reduceOperations(b));const j=o||i?PieceTreeTextBuffer._getInverseEditRanges(b):[],_e=[];if(i)for(let st=0;st<b.length;st++){const ot=b[st],nt=j[st];if(ot.isAutoWhitespaceEdit&&ot.range.isEmpty())for(let rt=nt.startLineNumber;rt<=nt.endLineNumber;rt++){let at="";rt===nt.startLineNumber&&(at=this.getLineContent(ot.range.startLineNumber),firstNonWhitespaceIndex(at)!==-1)||_e.push({lineNumber:rt,oldContent:at})}}let et=null;if(o){let st=0;et=[];for(let ot=0;ot<b.length;ot++){const nt=b[ot],rt=j[ot],at=this.getValueInRange(nt.range),lt=nt.rangeOffset+st;st+=nt.text.length-at.length,et[ot]={sortIndex:nt.sortIndex,identifier:nt.identifier,range:rt,text:at,textChange:new TextChange(nt.rangeOffset,at,lt,nt.text)}}k||et.sort((ot,nt)=>ot.sortIndex-nt.sortIndex)}this._mightContainRTL=a,this._mightContainUnusualLineTerminators=c,this._mightContainNonBasicASCII=d;const tt=this._doApplyEdits(b);let it=null;if(i&&_e.length>0){_e.sort((st,ot)=>ot.lineNumber-st.lineNumber),it=[];for(let st=0,ot=_e.length;st<ot;st++){const nt=_e[st].lineNumber;if(st>0&&_e[st-1].lineNumber===nt)continue;const rt=_e[st].oldContent,at=this.getLineContent(nt);at.length===0||at===rt||firstNonWhitespaceIndex(at)!==-1||it.push(nt)}}return this._onDidChangeContent.fire(),new ApplyEditsResult(et,tt,it)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let i=!1;const o=e[0].range,a=e[e.length-1].range,c=new Range$2(o.startLineNumber,o.startColumn,a.endLineNumber,a.endColumn);let d=o.startLineNumber,_=o.startColumn;const b=[];for(let tt=0,it=e.length;tt<it;tt++){const st=e[tt],ot=st.range;i=i||st.forceMoveMarkers,b.push(this.getValueInRange(new Range$2(d,_,ot.startLineNumber,ot.startColumn))),st.text.length>0&&b.push(st.text),d=ot.endLineNumber,_=ot.endColumn}const k=b.join(""),[j,_e,et]=countEOL(k);return{sortIndex:0,identifier:e[0].identifier,range:c,rangeOffset:this.getOffsetAt(c.startLineNumber,c.startColumn),rangeLength:this.getValueLengthInRange(c,0),text:k,eolCount:j,firstLineLength:_e,lastLineLength:et,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(PieceTreeTextBuffer._sortOpsDescending);const i=[];for(let o=0;o<e.length;o++){const a=e[o],c=a.range.startLineNumber,d=a.range.startColumn,_=a.range.endLineNumber,b=a.range.endColumn;if(c===_&&d===b&&a.text.length===0)continue;a.text?(this._pieceTree.delete(a.rangeOffset,a.rangeLength),this._pieceTree.insert(a.rangeOffset,a.text,!0)):this._pieceTree.delete(a.rangeOffset,a.rangeLength);const k=new Range$2(c,d,_,b);i.push({range:k,rangeLength:a.rangeLength,text:a.text,rangeOffset:a.rangeOffset,forceMoveMarkers:a.forceMoveMarkers})}return i}findMatchesLineByLine(e,i,o,a){return this._pieceTree.findMatchesLineByLine(e,i,o,a)}static _getInverseEditRanges(e){const i=[];let o=0,a=0,c=null;for(let d=0,_=e.length;d<_;d++){const b=e[d];let k,j;c?c.range.endLineNumber===b.range.startLineNumber?(k=o,j=a+(b.range.startColumn-c.range.endColumn)):(k=o+(b.range.startLineNumber-c.range.endLineNumber),j=b.range.startColumn):(k=b.range.startLineNumber,j=b.range.startColumn);let _e;if(b.text.length>0){const et=b.eolCount+1;et===1?_e=new Range$2(k,j,k,j+b.firstLineLength):_e=new Range$2(k,j,k+et-1,b.lastLineLength+1)}else _e=new Range$2(k,j,k,j);o=_e.endLineNumber,a=_e.endColumn,i.push(_e),c=b}return i}static _sortOpsAscending(e,i){const o=Range$2.compareRangesUsingEnds(e.range,i.range);return o===0?e.sortIndex-i.sortIndex:o}static _sortOpsDescending(e,i){const o=Range$2.compareRangesUsingEnds(e.range,i.range);return o===0?i.sortIndex-e.sortIndex:-o}}class PieceTreeTextBufferFactory{constructor(e,i,o,a,c,d,_,b,k){this._chunks=e,this._bom=i,this._cr=o,this._lf=a,this._crlf=c,this._containsRTL=d,this._containsUnusualLineTerminators=_,this._isBasicASCII=b,this._normalizeEOL=k}_getEOL(e){const i=this._cr+this._lf+this._crlf,o=this._cr+this._crlf;return i===0?e===1?`
`:`\r
`:o>i/2?`\r
`:`
`}create(e){const i=this._getEOL(e),o=this._chunks;if(this._normalizeEOL&&(i===`\r
`&&(this._cr>0||this._lf>0)||i===`
`&&(this._cr>0||this._crlf>0)))for(let c=0,d=o.length;c<d;c++){const _=o[c].buffer.replace(/\r\n|\r|\n/g,i),b=createLineStartsFast(_);o[c]=new StringBuffer(_,b)}const a=new PieceTreeTextBuffer(o,this._bom,i,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:a,disposable:a}}}class PieceTreeTextBufferBuilder{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&startsWithUTF8BOM(e)&&(this.BOM=UTF8_BOM_CHARACTER,e=e.substr(1));const i=e.charCodeAt(e.length-1);i===13||i>=55296&&i<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=i):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=i)}_acceptChunk1(e,i){!i&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const i=createLineStarts(this._tmpLineStarts,e);this.chunks.push(new StringBuffer(e,i.lineStarts)),this.cr+=i.cr,this.lf+=i.lf,this.crlf+=i.crlf,this.isBasicASCII&&(this.isBasicASCII=i.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=containsRTL(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=containsUnusualLineTerminators(e))}finish(e=!0){return this._finish(),new PieceTreeTextBufferFactory(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const i=createLineStartsFast(e.buffer);e.lineStarts=i,this._previousChar===13&&this.cr++}}}class ContiguousMultilineTokens{constructor(e,i){this._startLineNumber=e,this._tokens=i}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class ContiguousMultilineTokensBuilder{constructor(){this._tokens=[]}add(e,i){if(this._tokens.length>0){const o=this._tokens[this._tokens.length-1];if(o.endLineNumber+1===e){o.appendLineTokens(i);return}}this._tokens.push(new ContiguousMultilineTokens(e,[i]))}finalize(){return this._tokens}}class ContiguousGrowingArray{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,i){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=i}delete(e,i){i===0||e>=this._store.length||this._store.splice(e,i)}insert(e,i){if(i===0||e>=this._store.length)return;const o=[];for(let a=0;a<i;a++)o[a]=this._default;this._store=arrayInsert(this._store,e,o)}}class TokenizationStateStore{constructor(e,i){this.tokenizationSupport=e,this.initialState=i,this._lineBeginState=new ContiguousGrowingArray(null),this._lineNeedsTokenization=new ContiguousGrowingArray(!0),this._firstLineNeedsTokenization=0,this._lineBeginState.set(0,this.initialState)}get invalidLineStartIndex(){return this._firstLineNeedsTokenization}markMustBeTokenized(e){this._lineNeedsTokenization.set(e,!0),this._firstLineNeedsTokenization=Math.min(this._firstLineNeedsTokenization,e)}getBeginState(e){return this._lineBeginState.get(e)}setEndState(e,i,o){if(this._lineNeedsTokenization.set(i,!1),this._firstLineNeedsTokenization=i+1,i===e-1)return;const a=this._lineBeginState.get(i+1);if(a===null||!o.equals(a)){this._lineBeginState.set(i+1,o),this.markMustBeTokenized(i+1);return}let c=i+1;for(;c<e&&!this._lineNeedsTokenization.get(c);)c++;this._firstLineNeedsTokenization=c}applyEdits(e,i){this.markMustBeTokenized(e.startLineNumber-1),this._lineBeginState.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineNeedsTokenization.delete(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineBeginState.insert(e.startLineNumber,i),this._lineNeedsTokenization.insert(e.startLineNumber,i)}}class TextModelTokenization extends Disposable{constructor(e,i,o){super(),this._textModel=e,this._tokenizationPart=i,this._languageIdCodec=o,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=null,this._register(TokenizationRegistry.onDidChange(a=>{const c=this._textModel.getLanguageId();a.changedLanguages.indexOf(c)!==-1&&(this._resetTokenizationState(),this._tokenizationPart.clearTokens())})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}handleDidChangeContent(e){if(e.isFlush){this._resetTokenizationState();return}if(this._tokenizationStateStore)for(let i=0,o=e.changes.length;i<o;i++){const a=e.changes[i],[c]=countEOL(a.text);this._tokenizationStateStore.applyEdits(a.range,c)}this._beginBackgroundTokenization()}handleDidChangeAttached(){this._beginBackgroundTokenization()}handleDidChangeLanguage(e){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}_resetTokenizationState(){const[e,i]=initializeTokenization(this._textModel,this._tokenizationPart);e&&i?this._tokenizationStateStore=new TokenizationStateStore(e,i):this._tokenizationStateStore=null,this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,runWhenIdle(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const i=Date.now()+e.timeRemaining(),o=()=>{this._isDisposed||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<i?setTimeout0(o):this._beginBackgroundTokenization())};o()}_backgroundTokenizeForAtLeast1ms(){const e=this._textModel.getLineCount(),i=new ContiguousMultilineTokensBuilder,o=StopWatch.create(!1);do if(o.elapsed()>1||this._tokenizeOneInvalidLine(i)>=e)break;while(this._hasLinesToTokenize());this._tokenizationPart.setTokens(i.finalize(),this._isTokenizationComplete())}tokenizeViewport(e,i){const o=new ContiguousMultilineTokensBuilder;this._tokenizeViewport(o,e,i),this._tokenizationPart.setTokens(o.finalize(),this._isTokenizationComplete())}reset(){this._resetTokenizationState(),this._tokenizationPart.clearTokens()}forceTokenization(e){const i=new ContiguousMultilineTokensBuilder;this._updateTokensUntilLine(i,e),this._tokenizationPart.setTokens(i.finalize(),this._isTokenizationComplete())}getTokenTypeIfInsertingCharacter(e,i){if(!this._tokenizationStateStore)return 0;this.forceTokenization(e.lineNumber);const o=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!o)return 0;const a=this._textModel.getLanguageId(),c=this._textModel.getLineContent(e.lineNumber),d=c.substring(0,e.column-1)+i+c.substring(e.column-1),_=safeTokenize(this._languageIdCodec,a,this._tokenizationStateStore.tokenizationSupport,d,!0,o),b=new LineTokens(_.tokens,d,this._languageIdCodec);if(b.getCount()===0)return 0;const k=b.findTokenIndexAtOffset(e.column-1);return b.getStandardTokenType(k)}tokenizeLineWithEdit(e,i,o){const a=e.lineNumber,c=e.column;if(!this._tokenizationStateStore)return null;this.forceTokenization(a);const d=this._tokenizationStateStore.getBeginState(a-1);if(!d)return null;const _=this._textModel.getLineContent(a),b=_.substring(0,c-1)+o+_.substring(c-1+i),k=this._textModel.getLanguageIdAtPosition(a,0),j=safeTokenize(this._languageIdCodec,k,this._tokenizationStateStore.tokenizationSupport,b,!0,d);return new LineTokens(j.tokens,b,this._languageIdCodec)}isCheapToTokenize(e){if(!this._tokenizationStateStore)return!0;const i=this._tokenizationStateStore.invalidLineStartIndex+1;return e>i?!1:e<i||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_isTokenizationComplete(){return this._tokenizationStateStore?this._tokenizationStateStore.invalidLineStartIndex>=this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._tokenizationStateStore||!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const i=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,i),i}_updateTokensUntilLine(e,i){if(!this._tokenizationStateStore)return;const o=this._textModel.getLanguageId(),a=this._textModel.getLineCount(),c=i-1;for(let d=this._tokenizationStateStore.invalidLineStartIndex;d<=c;d++){const _=this._textModel.getLineContent(d+1),b=this._tokenizationStateStore.getBeginState(d),k=safeTokenize(this._languageIdCodec,o,this._tokenizationStateStore.tokenizationSupport,_,!0,b);e.add(d+1,k.tokens),this._tokenizationStateStore.setEndState(a,d,k.endState),d=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,i,o){if(!this._tokenizationStateStore||o<=this._tokenizationStateStore.invalidLineStartIndex)return;if(i<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,o);return}let a=this._textModel.getLineFirstNonWhitespaceColumn(i);const c=[];let d=null;for(let k=i-1;a>1&&k>=1;k--){const j=this._textModel.getLineFirstNonWhitespaceColumn(k);if(j!==0&&j<a&&(c.push(this._textModel.getLineContent(k)),a=j,d=this._tokenizationStateStore.getBeginState(k-1),d))break}d||(d=this._tokenizationStateStore.initialState);const _=this._textModel.getLanguageId();let b=d;for(let k=c.length-1;k>=0;k--)b=safeTokenize(this._languageIdCodec,_,this._tokenizationStateStore.tokenizationSupport,c[k],!1,b).endState;for(let k=i;k<=o;k++){const j=this._textModel.getLineContent(k),_e=safeTokenize(this._languageIdCodec,_,this._tokenizationStateStore.tokenizationSupport,j,!0,b);e.add(k,_e.tokens),this._tokenizationStateStore.markMustBeTokenized(k-1),b=_e.endState}}}function initializeTokenization(s,e){if(s.isTooLargeForTokenization())return[null,null];const i=TokenizationRegistry.get(e.getLanguageId());if(!i)return[null,null];let o;try{o=i.getInitialState()}catch(a){return onUnexpectedError(a),[null,null]}return[i,o]}function safeTokenize(s,e,i,o,a,c){let d=null;if(i)try{d=i.tokenizeEncoded(o,a,c.clone())}catch(_){onUnexpectedError(_)}return d||(d=nullTokenizeEncoded(s.encodeLanguageId(e),c)),LineTokens.convertToEndOffset(d.tokens,o.length),d}const EMPTY_LINE_TOKENS=new Uint32Array(0).buffer;class ContiguousTokensEditing{static deleteBeginning(e,i){return e===null||e===EMPTY_LINE_TOKENS?e:ContiguousTokensEditing.delete(e,0,i)}static deleteEnding(e,i){if(e===null||e===EMPTY_LINE_TOKENS)return e;const o=toUint32Array(e),a=o[o.length-2];return ContiguousTokensEditing.delete(e,i,a)}static delete(e,i,o){if(e===null||e===EMPTY_LINE_TOKENS||i===o)return e;const a=toUint32Array(e),c=a.length>>>1;if(i===0&&a[a.length-2]===o)return EMPTY_LINE_TOKENS;const d=LineTokens.findIndexInTokensArray(a,i),_=d>0?a[d-1<<1]:0,b=a[d<<1];if(o<b){const tt=o-i;for(let it=d;it<c;it++)a[it<<1]-=tt;return e}let k,j;_!==i?(a[d<<1]=i,k=d+1<<1,j=i):(k=d<<1,j=_);const _e=o-i;for(let tt=d+1;tt<c;tt++){const it=a[tt<<1]-_e;it>j&&(a[k++]=it,a[k++]=a[(tt<<1)+1],j=it)}if(k===a.length)return e;const et=new Uint32Array(k);return et.set(a.subarray(0,k),0),et.buffer}static append(e,i){if(i===EMPTY_LINE_TOKENS)return e;if(e===EMPTY_LINE_TOKENS)return i;if(e===null)return e;if(i===null)return null;const o=toUint32Array(e),a=toUint32Array(i),c=a.length>>>1,d=new Uint32Array(o.length+a.length);d.set(o,0);let _=o.length;const b=o[o.length-2];for(let k=0;k<c;k++)d[_++]=a[k<<1]+b,d[_++]=a[(k<<1)+1];return d.buffer}static insert(e,i,o){if(e===null||e===EMPTY_LINE_TOKENS)return e;const a=toUint32Array(e),c=a.length>>>1;let d=LineTokens.findIndexInTokensArray(a,i);d>0&&a[d-1<<1]===i&&d--;for(let _=d;_<c;_++)a[_<<1]+=o;return e}}function toUint32Array(s){return s instanceof Uint32Array?s:new Uint32Array(s)}class ContiguousTokensStore{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,i,o){let a=null;if(i<this._len&&(a=this._lineTokens[i]),a!==null&&a!==EMPTY_LINE_TOKENS)return new LineTokens(toUint32Array(a),o,this._languageIdCodec);const c=new Uint32Array(2);return c[0]=o.length,c[1]=getDefaultMetadata(this._languageIdCodec.encodeLanguageId(e)),new LineTokens(c,o,this._languageIdCodec)}static _massageTokens(e,i,o){const a=o?toUint32Array(o):null;if(i===0){let c=!1;if(a&&a.length>1&&(c=TokenMetadata.getLanguageId(a[1])!==e),!c)return EMPTY_LINE_TOKENS}if(!a||a.length===0){const c=new Uint32Array(2);return c[0]=i,c[1]=getDefaultMetadata(e),c.buffer}return a[a.length-2]=i,a.byteOffset===0&&a.byteLength===a.buffer.byteLength?a.buffer:a}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,i){i!==0&&(e+i>this._len&&(i=this._len-e),this._lineTokens.splice(e,i),this._len-=i)}_insertLines(e,i){if(i===0)return;const o=[];for(let a=0;a<i;a++)o[a]=null;this._lineTokens=arrayInsert(this._lineTokens,e,o),this._len+=i}setTokens(e,i,o,a,c){const d=ContiguousTokensStore._massageTokens(this._languageIdCodec.encodeLanguageId(e),o,a);this._ensureLine(i);const _=this._lineTokens[i];return this._lineTokens[i]=d,c?!ContiguousTokensStore._equals(_,d):!1}static _equals(e,i){if(!e||!i)return!e&&!i;const o=toUint32Array(e),a=toUint32Array(i);if(o.length!==a.length)return!1;for(let c=0,d=o.length;c<d;c++)if(o[c]!==a[c])return!1;return!0}acceptEdit(e,i,o){this._acceptDeleteRange(e),this._acceptInsertText(new Position$1(e.startLineNumber,e.startColumn),i,o)}_acceptDeleteRange(e){const i=e.startLineNumber-1;if(i>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[i]=ContiguousTokensEditing.delete(this._lineTokens[i],e.startColumn-1,e.endColumn-1);return}this._lineTokens[i]=ContiguousTokensEditing.deleteEnding(this._lineTokens[i],e.startColumn-1);const o=e.endLineNumber-1;let a=null;o<this._len&&(a=ContiguousTokensEditing.deleteBeginning(this._lineTokens[o],e.endColumn-1)),this._lineTokens[i]=ContiguousTokensEditing.append(this._lineTokens[i],a),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,i,o){if(i===0&&o===0)return;const a=e.lineNumber-1;if(!(a>=this._len)){if(i===0){this._lineTokens[a]=ContiguousTokensEditing.insert(this._lineTokens[a],e.column-1,o);return}this._lineTokens[a]=ContiguousTokensEditing.deleteEnding(this._lineTokens[a],e.column-1),this._lineTokens[a]=ContiguousTokensEditing.insert(this._lineTokens[a],e.column-1,o),this._insertLines(e.lineNumber,i)}}}function getDefaultMetadata(s){return(s<<0|0<<8|0<<11|1<<15|2<<24|1024)>>>0}class SparseTokensStore{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,i){this._pieces=e||[],this._isComplete=i}setPartial(e,i){let o=e;if(i.length>0){const c=i[0].getRange(),d=i[i.length-1].getRange();if(!c||!d)return e;o=e.plusRange(c).plusRange(d)}let a=null;for(let c=0,d=this._pieces.length;c<d;c++){const _=this._pieces[c];if(_.endLineNumber<o.startLineNumber)continue;if(_.startLineNumber>o.endLineNumber){a=a||{index:c};break}if(_.removeTokens(o),_.isEmpty()){this._pieces.splice(c,1),c--,d--;continue}if(_.endLineNumber<o.startLineNumber)continue;if(_.startLineNumber>o.endLineNumber){a=a||{index:c};continue}const[b,k]=_.split(o);if(b.isEmpty()){a=a||{index:c};continue}k.isEmpty()||(this._pieces.splice(c,1,b,k),c++,d++,a=a||{index:c})}return a=a||{index:this._pieces.length},i.length>0&&(this._pieces=arrayInsert(this._pieces,a.index,i)),o}isComplete(){return this._isComplete}addSparseTokens(e,i){if(i.getLineContent().length===0)return i;const o=this._pieces;if(o.length===0)return i;const a=SparseTokensStore._findFirstPieceWithLine(o,e),c=o[a].getLineTokens(e);if(!c)return i;const d=i.getCount(),_=c.getCount();let b=0;const k=[];let j=0,_e=0;const et=(tt,it)=>{tt!==_e&&(_e=tt,k[j++]=tt,k[j++]=it)};for(let tt=0;tt<_;tt++){const it=c.getStartCharacter(tt),st=c.getEndCharacter(tt),ot=c.getMetadata(tt),nt=((ot&1?2048:0)|(ot&2?4096:0)|(ot&4?8192:0)|(ot&8?16384:0)|(ot&16?16744448:0)|(ot&32?4278190080:0))>>>0,rt=~nt>>>0;for(;b<d&&i.getEndOffset(b)<=it;)et(i.getEndOffset(b),i.getMetadata(b)),b++;for(b<d&&i.getStartOffset(b)<it&&et(it,i.getMetadata(b));b<d&&i.getEndOffset(b)<st;)et(i.getEndOffset(b),i.getMetadata(b)&rt|ot&nt),b++;if(b<d)et(st,i.getMetadata(b)&rt|ot&nt),i.getEndOffset(b)===st&&b++;else{const at=Math.min(Math.max(0,b-1),d-1);et(st,i.getMetadata(at)&rt|ot&nt)}}for(;b<d;)et(i.getEndOffset(b),i.getMetadata(b)),b++;return new LineTokens(new Uint32Array(k),i.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,i){let o=0,a=e.length-1;for(;o<a;){let c=o+Math.floor((a-o)/2);if(e[c].endLineNumber<i)o=c+1;else if(e[c].startLineNumber>i)a=c-1;else{for(;c>o&&e[c-1].startLineNumber<=i&&i<=e[c-1].endLineNumber;)c--;return c}}return o}acceptEdit(e,i,o,a,c){for(const d of this._pieces)d.acceptEdit(e,i,o,a,c)}}class TokenizationTextModelPart extends TextModelPart{constructor(e,i,o,a,c){super(),this._languageService=e,this._languageConfigurationService=i,this._textModel=o,this.bracketPairsTextModelPart=a,this._languageId=c,this._onDidChangeLanguage=this._register(new Emitter$1),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new Emitter$1),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new Emitter$1),this.onDidChangeTokens=this._onDidChangeTokens.event,this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new Emitter$1),this._tokens=new ContiguousTokensStore(this._languageService.languageIdCodec),this._semanticTokens=new SparseTokensStore(this._languageService.languageIdCodec),this._tokenization=new TextModelTokenization(o,this,this._languageService.languageIdCodec),this._languageRegistryListener=this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})}acceptEdit(e,i,o,a,c){this._tokens.acceptEdit(e,o,a),this._semanticTokens.acceptEdit(e,o,a,c,i.length>0?i.charCodeAt(0):0)}handleDidChangeAttached(){this._tokenization.handleDidChangeAttached()}flush(){this._tokens.flush(),this._semanticTokens.flush()}handleDidChangeContent(e){this._tokenization.handleDidChangeContent(e)}dispose(){this._languageRegistryListener.dispose(),this._tokenization.dispose(),super.dispose()}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const i=e?2:1;this._backgroundTokenizationState!==i&&(this._backgroundTokenizationState=i,this.bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState(),this._onBackgroundTokenizationStateChanged.fire())}setTokens(e,i=!1){if(e.length!==0){const o=[];for(let a=0,c=e.length;a<c;a++){const d=e[a];let _=0,b=0,k=!1;for(let j=d.startLineNumber;j<=d.endLineNumber;j++)k?(this._tokens.setTokens(this._languageId,j-1,this._textModel.getLineLength(j),d.getLineTokens(j),!1),b=j):this._tokens.setTokens(this._languageId,j-1,this._textModel.getLineLength(j),d.getLineTokens(j),!0)&&(k=!0,_=j,b=j);k&&o.push({fromLineNumber:_,toLineNumber:b})}o.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:o})}this.handleTokenizationProgress(i)}setSemanticTokens(e,i){this._semanticTokens.set(e,i),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,i){if(this.hasCompleteSemanticTokens())return;const o=this._textModel.validateRange(this._semanticTokens.setPartial(e,i));this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:o.startLineNumber,toLineNumber:o.endLineNumber}]})}tokenizeViewport(e,i){e=Math.max(1,e),i=Math.min(this._textModel.getLineCount(),i),this._tokenization.tokenizeViewport(e,i)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this.bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this._textModel.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const i=this._textModel.getLineContent(e),o=this._tokens.getTokens(this._languageId,e-1,i);return this._semanticTokens.addSparseTokens(e,o)}getTokenTypeIfInsertingCharacter(e,i,o){const a=this._textModel.validatePosition(new Position$1(e,i));return this._tokenization.getTokenTypeIfInsertingCharacter(a,o)}tokenizeLineWithEdit(e,i,o){const a=this._textModel.validatePosition(e);return this._tokenization.tokenizeLineWithEdit(a,i,o)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this.assertNotDisposed();const i=this._textModel.validatePosition(e),o=this._textModel.getLineContent(i.lineNumber),a=this._getLineTokens(i.lineNumber),c=a.findTokenIndexAtOffset(i.column-1),[d,_]=TokenizationTextModelPart._findLanguageBoundaries(a,c),b=getWordAtText(i.column,this.getLanguageConfiguration(a.getLanguageId(c)).getWordDefinition(),o.substring(d,_),d);if(b&&b.startColumn<=e.column&&e.column<=b.endColumn)return b;if(c>0&&d===i.column-1){const[k,j]=TokenizationTextModelPart._findLanguageBoundaries(a,c-1),_e=getWordAtText(i.column,this.getLanguageConfiguration(a.getLanguageId(c-1)).getWordDefinition(),o.substring(k,j),k);if(_e&&_e.startColumn<=e.column&&e.column<=_e.endColumn)return _e}return null}static _findLanguageBoundaries(e,i){const o=e.getLanguageId(i);let a=0;for(let d=i;d>=0&&e.getLanguageId(d)===o;d--)a=e.getStartOffset(d);let c=e.getLineContent().length;for(let d=i,_=e.getCount();d<_&&e.getLanguageId(d)===o;d++)c=e.getEndOffset(d);return[a,c]}getWordUntilPosition(e){const i=this.getWordAtPosition(e);return i?{word:i.word.substr(0,e.column-i.startColumn),startColumn:i.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,i){const o=this._textModel.validatePosition(new Position$1(e,i)),a=this.getLineTokens(o.lineNumber);return a.getLanguageId(a.findTokenIndexAtOffset(o.column-1))}setLanguageId(e){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this.bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokenization.handleDidChangeLanguage(i),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}}const IUndoRedoService=createDecorator("undoRedoService");class ResourceEditStackSnapshot{constructor(e,i){this.resource=e,this.elements=i}}class UndoRedoGroup{constructor(){this.id=UndoRedoGroup._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}UndoRedoGroup._ID=0;UndoRedoGroup.None=new UndoRedoGroup;class UndoRedoSource{constructor(){this.id=UndoRedoSource._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}UndoRedoSource._ID=0;UndoRedoSource.None=new UndoRedoSource;var __decorate$t=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$o=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};function createTextBufferFactory(s){const e=new PieceTreeTextBufferBuilder;return e.acceptChunk(s),e.finish()}function createTextBufferFactoryFromSnapshot(s){const e=new PieceTreeTextBufferBuilder;let i;for(;typeof(i=s.read())=="string";)e.acceptChunk(i);return e.finish()}function createTextBuffer(s,e){let i;return typeof s=="string"?i=createTextBufferFactory(s):isITextSnapshot(s)?i=createTextBufferFactoryFromSnapshot(s):i=s,i.create(e)}let MODEL_ID$1=0;const LIMIT_FIND_COUNT=999,LONG_LINE_BOUNDARY=1e4;class TextModelSnapshot{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let i=0,o=0;do{const a=this._source.read();if(a===null)return this._eos=!0,i===0?null:e.join("");if(a.length>0&&(e[i++]=a,o+=a.length),o>=64*1024)return e.join("")}while(!0)}}const invalidFunc=()=>{throw new Error("Invalid change accessor")};let TextModel=class Cn extends Disposable{constructor(e,i,o,a=null,c,d,_){super(),this._undoRedoService=c,this._languageService=d,this._languageConfigurationService=_,this._onWillDispose=this._register(new Emitter$1),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new DidChangeDecorationsEmitter(et=>this.handleBeforeFireDecorationsChangedEvent(et))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new Emitter$1),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new Emitter$1),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new Emitter$1),this._eventEmitter=this._register(new DidChangeContentEmitter),this._deltaDecorationCallCnt=0,MODEL_ID$1++,this.id="$model"+MODEL_ID$1,this.isForSimpleWidget=o.isForSimpleWidget,typeof a>"u"||a===null?this._associatedResource=URI.parse("inmemory://model/"+MODEL_ID$1):this._associatedResource=a,this._attachedEditorCount=0;const{textBuffer:b,disposable:k}=createTextBuffer(e,o.defaultEOL);this._buffer=b,this._bufferDisposable=k,this._options=Cn.resolveOptions(this._buffer,o),this._bracketPairs=this._register(new BracketPairsTextModelPart(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new GuidesTextModelPart(this,this._languageConfigurationService)),this._decorationProvider=this._register(new ColorizedBracketPairsDecorationProvider(this)),this._tokenizationTextModelPart=new TokenizationTextModelPart(this._languageService,this._languageConfigurationService,this,this._bracketPairs,i);const j=this._buffer.getLineCount(),_e=this._buffer.getValueLengthInRange(new Range$2(1,1,j,this._buffer.getLineLength(j)+1),0);o.largeFileOptimizations?this._isTooLargeForTokenization=_e>Cn.LARGE_FILE_SIZE_THRESHOLD||j>Cn.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=_e>Cn.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=singleLetterHash(MODEL_ID$1),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager=new EditStack(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,i){if(i.detectIndentation){const o=guessIndentation(e,i.tabSize,i.insertSpaces);return new TextModelResolvedOptions({tabSize:o.tabSize,indentSize:o.tabSize,insertSpaces:o.insertSpaces,trimAutoWhitespace:i.trimAutoWhitespace,defaultEOL:i.defaultEOL,bracketPairColorizationOptions:i.bracketPairColorizationOptions})}return new TextModelResolvedOptions({tabSize:i.tabSize,indentSize:i.indentSize,insertSpaces:i.insertSpaces,trimAutoWhitespace:i.trimAutoWhitespace,defaultEOL:i.defaultEOL,bracketPairColorizationOptions:i.bracketPairColorizationOptions})}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(i=>e(i.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return combinedDisposable(this._eventEmitter.fastEvent(i=>e(i)),this._onDidChangeInjectedText.event(i=>e(i)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new PieceTreeTextBuffer([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Disposable.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,i){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(i),this._bracketPairs.handleDidChangeContent(i),this._eventEmitter.fire(new InternalModelContentChangeEvent(e,i)))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:i,disposable:o}=createTextBuffer(e,this._options.defaultEOL);this._setValueFromTextBuffer(i,o)}_createContentChanged2(e,i,o,a,c,d,_){return{changes:[{range:e,rangeOffset:i,rangeLength:o,text:a}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:c,isRedoing:d,isFlush:_}}_setValueFromTextBuffer(e,i){this._assertNotDisposed();const o=this.getFullModelRange(),a=this.getValueLengthInRange(o),c=this.getLineCount(),d=this.getLineMaxColumn(c);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=i,this._increaseVersionId(),this._tokenizationTextModelPart.flush(),this._decorations=Object.create(null),this._decorationsTree=new DecorationsTrees,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ModelRawContentChangedEvent([new ModelRawFlush],this._versionId,!1,!1),this._createContentChanged2(new Range$2(1,1,c,d),0,a,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const i=e===1?`\r
`:`
`;if(this._buffer.getEOL()===i)return;const o=this.getFullModelRange(),a=this.getValueLengthInRange(o),c=this.getLineCount(),d=this.getLineMaxColumn(c);this._onBeforeEOLChange(),this._buffer.setEOL(i),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ModelRawContentChangedEvent([new ModelRawEOLChanged],this._versionId,!1,!1),this._createContentChanged2(new Range$2(1,1,c,d),0,a,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),i=this._decorationsTree.collectNodesPostOrder();for(let o=0,a=i.length;o<a;o++){const c=i[o],d=c.range,_=c.cachedAbsoluteStart-c.start,b=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),k=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);c.cachedAbsoluteStart=b,c.cachedAbsoluteEnd=k,c.cachedVersionId=e,c.start=b-_,c.end=k-_,recomputeMaxEnd(c)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0))}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,i=0;const o=this._buffer.getLineCount();for(let a=1;a<=o;a++){const c=this._buffer.getLineLength(a);c>=LONG_LINE_BOUNDARY?i+=c:e+=c}return i>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const i=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,o=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,a=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,c=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,d=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,_=new TextModelResolvedOptions({tabSize:i,indentSize:o,insertSpaces:a,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:c,bracketPairColorizationOptions:d});if(this._options.equals(_))return;const b=this._options.createChangeEvent(_);this._options=_,this._bracketPairs.handleDidChangeOptions(b),this._decorationProvider.handleDidChangeOptions(b),this._onDidChangeOptions.fire(b)}detectIndentation(e,i){this._assertNotDisposed();const o=guessIndentation(this._buffer,i,e);this.updateOptions({insertSpaces:o.insertSpaces,tabSize:o.tabSize,indentSize:o.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const i=this.findMatches(UNUSUAL_LINE_TERMINATORS.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,i.map(o=>({range:o.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const i=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(i.lineNumber,i.column)}getPositionAt(e){this._assertNotDisposed();const i=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(i)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,i=!1){this._assertNotDisposed();const o=this.getFullModelRange(),a=this.getValueInRange(o,e);return i?this._buffer.getBOM()+a:a}createSnapshot(e=!1){return new TextModelSnapshot(this._buffer.createSnapshot(e))}getValueLength(e,i=!1){this._assertNotDisposed();const o=this.getFullModelRange(),a=this.getValueLengthInRange(o,e);return i?this._buffer.getBOM().length+a:a}getValueInRange(e,i=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),i)}getValueLengthInRange(e,i=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),i)}getCharacterCountInRange(e,i=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),i)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const i=this._buffer.getLineCount(),o=e.startLineNumber,a=e.startColumn;let c=Math.floor(typeof o=="number"&&!isNaN(o)?o:1),d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1);if(c<1)c=1,d=1;else if(c>i)c=i,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const _e=this.getLineMaxColumn(c);d>=_e&&(d=_e)}const _=e.endLineNumber,b=e.endColumn;let k=Math.floor(typeof _=="number"&&!isNaN(_)?_:1),j=Math.floor(typeof b=="number"&&!isNaN(b)?b:1);if(k<1)k=1,j=1;else if(k>i)k=i,j=this.getLineMaxColumn(k);else if(j<=1)j=1;else{const _e=this.getLineMaxColumn(k);j>=_e&&(j=_e)}return o===c&&a===d&&_===k&&b===j&&e instanceof Range$2&&!(e instanceof Selection$1)?e:new Range$2(c,d,k,j)}_isValidPosition(e,i,o){if(typeof e!="number"||typeof i!="number"||isNaN(e)||isNaN(i)||e<1||i<1||(e|0)!==e||(i|0)!==i)return!1;const a=this._buffer.getLineCount();if(e>a)return!1;if(i===1)return!0;const c=this.getLineMaxColumn(e);if(i>c)return!1;if(o===1){const d=this._buffer.getLineCharCode(e,i-2);if(isHighSurrogate(d))return!1}return!0}_validatePosition(e,i,o){const a=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),c=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),d=this._buffer.getLineCount();if(a<1)return new Position$1(1,1);if(a>d)return new Position$1(d,this.getLineMaxColumn(d));if(c<=1)return new Position$1(a,1);const _=this.getLineMaxColumn(a);if(c>=_)return new Position$1(a,_);if(o===1){const b=this._buffer.getLineCharCode(a,c-2);if(isHighSurrogate(b))return new Position$1(a,c-1)}return new Position$1(a,c)}validatePosition(e){return this._assertNotDisposed(),e instanceof Position$1&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,i){const o=e.startLineNumber,a=e.startColumn,c=e.endLineNumber,d=e.endColumn;if(!this._isValidPosition(o,a,0)||!this._isValidPosition(c,d,0))return!1;if(i===1){const _=a>1?this._buffer.getLineCharCode(o,a-2):0,b=d>1&&d<=this._buffer.getLineLength(c)?this._buffer.getLineCharCode(c,d-2):0,k=isHighSurrogate(_),j=isHighSurrogate(b);return!k&&!j}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Range$2&&!(e instanceof Selection$1)&&this._isValidRange(e,1))return e;const o=this._validatePosition(e.startLineNumber,e.startColumn,0),a=this._validatePosition(e.endLineNumber,e.endColumn,0),c=o.lineNumber,d=o.column,_=a.lineNumber,b=a.column;{const k=d>1?this._buffer.getLineCharCode(c,d-2):0,j=b>1&&b<=this._buffer.getLineLength(_)?this._buffer.getLineCharCode(_,b-2):0,_e=isHighSurrogate(k),et=isHighSurrogate(j);return!_e&&!et?new Range$2(c,d,_,b):c===_&&d===b?new Range$2(c,d-1,_,b-1):_e&&et?new Range$2(c,d-1,_,b+1):_e?new Range$2(c,d-1,_,b):new Range$2(c,d,_,b+1)}}modifyPosition(e,i){this._assertNotDisposed();const o=this.getOffsetAt(e)+i;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,o)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Range$2(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,i,o,a){return this._buffer.findMatchesLineByLine(e,i,o,a)}findMatches(e,i,o,a,c,d,_=LIMIT_FIND_COUNT){this._assertNotDisposed();let b=null;i!==null&&(Array.isArray(i)||(i=[i]),i.every(_e=>Range$2.isIRange(_e))&&(b=i.map(_e=>this.validateRange(_e)))),b===null&&(b=[this.getFullModelRange()]),b=b.sort((_e,et)=>_e.startLineNumber-et.startLineNumber||_e.startColumn-et.startColumn);const k=[];k.push(b.reduce((_e,et)=>Range$2.areIntersecting(_e,et)?_e.plusRange(et):(k.push(_e),et)));let j;if(!o&&e.indexOf(`
`)<0){const et=new SearchParams(e,o,a,c).parseSearchRequest();if(!et)return[];j=tt=>this.findMatchesLineByLine(tt,et,d,_)}else j=_e=>TextModelSearch.findMatches(this,new SearchParams(e,o,a,c),_e,d,_);return k.map(j).reduce((_e,et)=>_e.concat(et),[])}findNextMatch(e,i,o,a,c,d){this._assertNotDisposed();const _=this.validatePosition(i);if(!o&&e.indexOf(`
`)<0){const k=new SearchParams(e,o,a,c).parseSearchRequest();if(!k)return null;const j=this.getLineCount();let _e=new Range$2(_.lineNumber,_.column,j,this.getLineMaxColumn(j)),et=this.findMatchesLineByLine(_e,k,d,1);return TextModelSearch.findNextMatch(this,new SearchParams(e,o,a,c),_,d),et.length>0||(_e=new Range$2(1,1,_.lineNumber,this.getLineMaxColumn(_.lineNumber)),et=this.findMatchesLineByLine(_e,k,d,1),et.length>0)?et[0]:null}return TextModelSearch.findNextMatch(this,new SearchParams(e,o,a,c),_,d)}findPreviousMatch(e,i,o,a,c,d){this._assertNotDisposed();const _=this.validatePosition(i);return TextModelSearch.findPreviousMatch(this,new SearchParams(e,o,a,c),_,d)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof ValidAnnotatedEditOperation?e:new ValidAnnotatedEditOperation(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const i=[];for(let o=0,a=e.length;o<a;o++)i[o]=this._validateEditOperation(e[o]);return i}pushEditOperations(e,i,o){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(i),o)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,i,o){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const a=i.map(d=>({range:this.validateRange(d.range),text:d.text}));let c=!0;if(e)for(let d=0,_=e.length;d<_;d++){const b=e[d];let k=!1;for(let j=0,_e=a.length;j<_e;j++){const et=a[j].range,tt=et.startLineNumber>b.endLineNumber,it=b.startLineNumber>et.endLineNumber;if(!tt&&!it){k=!0;break}}if(!k){c=!1;break}}if(c)for(let d=0,_=this._trimAutoWhitespaceLines.length;d<_;d++){const b=this._trimAutoWhitespaceLines[d],k=this.getLineMaxColumn(b);let j=!0;for(let _e=0,et=a.length;_e<et;_e++){const tt=a[_e].range,it=a[_e].text;if(!(b<tt.startLineNumber||b>tt.endLineNumber)&&!(b===tt.startLineNumber&&tt.startColumn===k&&tt.isEmpty()&&it&&it.length>0&&it.charAt(0)===`
`)&&!(b===tt.startLineNumber&&tt.startColumn===1&&tt.isEmpty()&&it&&it.length>0&&it.charAt(it.length-1)===`
`)){j=!1;break}}if(j){const _e=new Range$2(b,1,b,k);i.push(new ValidAnnotatedEditOperation(null,_e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,i,o)}_applyUndo(e,i,o,a){const c=e.map(d=>{const _=this.getPositionAt(d.newPosition),b=this.getPositionAt(d.newEnd);return{range:new Range$2(_.lineNumber,_.column,b.lineNumber,b.column),text:d.oldText}});this._applyUndoRedoEdits(c,i,!0,!1,o,a)}_applyRedo(e,i,o,a){const c=e.map(d=>{const _=this.getPositionAt(d.oldPosition),b=this.getPositionAt(d.oldEnd);return{range:new Range$2(_.lineNumber,_.column,b.lineNumber,b.column),text:d.newText}});this._applyUndoRedoEdits(c,i,!1,!0,o,a)}_applyUndoRedoEdits(e,i,o,a,c,d){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=o,this._isRedoing=a,this.applyEdits(e,!1),this.setEOL(i),this._overwriteAlternativeVersionId(c)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(d),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,i=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const o=this._validateEditOperations(e);return this._doApplyEdits(o,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,i){const o=this._buffer.getLineCount(),a=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,i),c=this._buffer.getLineCount(),d=a.changes;if(this._trimAutoWhitespaceLines=a.trimAutoWhitespaceLineNumbers,d.length!==0){for(let k=0,j=d.length;k<j;k++){const _e=d[k],[et,tt,it]=countEOL(_e.text);this._tokenizationTextModelPart.acceptEdit(_e.range,_e.text,et,tt,it),this._decorationsTree.acceptReplace(_e.rangeOffset,_e.rangeLength,_e.text.length,_e.forceMoveMarkers)}const _=[];this._increaseVersionId();let b=o;for(let k=0,j=d.length;k<j;k++){const _e=d[k],[et]=countEOL(_e.text);this._onDidChangeDecorations.fire();const tt=_e.range.startLineNumber,it=_e.range.endLineNumber,st=it-tt,ot=et,nt=Math.min(st,ot),rt=ot-st,at=c-b-rt+tt,lt=at,gt=at+ot,ht=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Position$1(lt,1)),this.getOffsetAt(new Position$1(gt,this.getLineMaxColumn(gt))),0),ut=LineInjectedText.fromDecorations(ht),ct=new ArrayQueue(ut);for(let ft=nt;ft>=0;ft--){const dt=tt+ft,pt=at+ft;ct.takeFromEndWhile(_t=>_t.lineNumber>pt);const mt=ct.takeFromEndWhile(_t=>_t.lineNumber===pt);_.push(new ModelRawLineChanged(dt,this.getLineContent(pt),mt))}if(nt<st){const ft=tt+nt;_.push(new ModelRawLinesDeleted(ft+1,it))}if(nt<ot){const ft=new ArrayQueue(ut),dt=tt+nt,pt=ot-nt,mt=c-b-pt+dt+1,_t=[],Ct=[];for(let bt=0;bt<pt;bt++){const yt=mt+bt;Ct[bt]=this.getLineContent(yt),ft.takeWhile(wt=>wt.lineNumber<yt),_t[bt]=ft.takeWhile(wt=>wt.lineNumber===yt)}_.push(new ModelRawLinesInserted(dt+1,tt+ot,Ct,_t))}b+=rt}this._emitContentChangedEvent(new ModelRawContentChangedEvent(_,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:d,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return a.reverseEdits===null?void 0:a.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const o=Array.from(e).map(a=>new ModelRawLineChanged(a,this.getLineContent(a),this._getInjectedTextInLine(a)));this._onDidChangeInjectedText.fire(new ModelInjectedTextChangedEvent(o))}changeDecorations(e,i=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(i,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,i){const o={addDecoration:(c,d)=>this._deltaDecorationsImpl(e,[],[{range:c,options:d}])[0],changeDecoration:(c,d)=>{this._changeDecorationImpl(c,d)},changeDecorationOptions:(c,d)=>{this._changeDecorationOptionsImpl(c,_normalizeOptions(d))},removeDecoration:c=>{this._deltaDecorationsImpl(e,[c],[])},deltaDecorations:(c,d)=>c.length===0&&d.length===0?[]:this._deltaDecorationsImpl(e,c,d)};let a=null;try{a=i(o)}catch(c){onUnexpectedError(c)}return o.addDecoration=invalidFunc,o.changeDecoration=invalidFunc,o.changeDecorationOptions=invalidFunc,o.removeDecoration=invalidFunc,o.deltaDecorations=invalidFunc,a}deltaDecorations(e,i,o=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&i.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),onUnexpectedError(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(o,e,i)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,i,o){const a=e?this._decorations[e]:null;if(!a)return i?this._deltaDecorationsImpl(0,[],[{range:i,options:TRACKED_RANGE_OPTIONS[o]}])[0]:null;if(!i)return this._decorationsTree.delete(a),delete this._decorations[a.id],null;const c=this._validateRangeRelaxedNoAllocations(i),d=this._buffer.getOffsetAt(c.startLineNumber,c.startColumn),_=this._buffer.getOffsetAt(c.endLineNumber,c.endColumn);return this._decorationsTree.delete(a),a.reset(this.getVersionId(),d,_,c),a.setOptions(TRACKED_RANGE_OPTIONS[o]),this._decorationsTree.insert(a),a.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const i=this._decorationsTree.collectNodesFromOwner(e);for(let o=0,a=i.length;o<a;o++){const c=i[o];this._decorationsTree.delete(c),delete this._decorations[c.id]}}getDecorationOptions(e){const i=this._decorations[e];return i?i.options:null}getDecorationRange(e){const i=this._decorations[e];return i?this._decorationsTree.getNodeRange(this,i):null}getLineDecorations(e,i=0,o=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,i,o)}getLinesDecorations(e,i,o=0,a=!1){const c=this.getLineCount(),d=Math.min(c,Math.max(1,e)),_=Math.min(c,Math.max(1,i)),b=this.getLineMaxColumn(_),k=new Range$2(d,1,_,b),j=this._getDecorationsInRange(k,o,a);return pushMany(j,this._decorationProvider.getDecorationsInRange(k,o,a)),j}getDecorationsInRange(e,i=0,o=!1){const a=this.validateRange(e),c=this._getDecorationsInRange(a,i,o);return pushMany(c,this._decorationProvider.getDecorationsInRange(a,i,o)),c}getOverviewRulerDecorations(e=0,i=!1){return this._decorationsTree.getAll(this,e,i,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const i=this._buffer.getOffsetAt(e,1),o=i+this._buffer.getLineLength(e),a=this._decorationsTree.getInjectedTextInInterval(this,i,o,0);return LineInjectedText.fromDecorations(a).filter(c=>c.lineNumber===e)}getAllDecorations(e=0,i=!1){let o=this._decorationsTree.getAll(this,e,i,!1);return o=o.concat(this._decorationProvider.getAllDecorations(e,i)),o}_getDecorationsInRange(e,i,o){const a=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),c=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,a,c,i,o)}getRangeAt(e,i){return this._buffer.getRangeAt(e,i-e)}_changeDecorationImpl(e,i){const o=this._decorations[e];if(!o)return;if(o.options.after){const _=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.endLineNumber)}if(o.options.before){const _=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_.startLineNumber)}const a=this._validateRangeRelaxedNoAllocations(i),c=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),d=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);this._decorationsTree.delete(o),o.reset(this.getVersionId(),c,d,a),this._decorationsTree.insert(o),this._onDidChangeDecorations.checkAffectedAndFire(o.options),o.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber),o.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}_changeDecorationOptionsImpl(e,i){const o=this._decorations[e];if(!o)return;const a=!!(o.options.overviewRuler&&o.options.overviewRuler.color),c=!!(i.overviewRuler&&i.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(o.options),this._onDidChangeDecorations.checkAffectedAndFire(i),o.options.after||i.after){const d=this._decorationsTree.getNodeRange(this,o);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(o.options.before||i.before){const d=this._decorationsTree.getNodeRange(this,o);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}a!==c?(this._decorationsTree.delete(o),o.setOptions(i),this._decorationsTree.insert(o)):o.setOptions(i)}_deltaDecorationsImpl(e,i,o){const a=this.getVersionId(),c=i.length;let d=0;const _=o.length;let b=0;const k=new Array(_);for(;d<c||b<_;){let j=null;if(d<c){do j=this._decorations[i[d++]];while(!j&&d<c);if(j){if(j.options.after){const _e=this._decorationsTree.getNodeRange(this,j);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_e.endLineNumber)}if(j.options.before){const _e=this._decorationsTree.getNodeRange(this,j);this._onDidChangeDecorations.recordLineAffectedByInjectedText(_e.startLineNumber)}this._decorationsTree.delete(j),this._onDidChangeDecorations.checkAffectedAndFire(j.options)}}if(b<_){if(!j){const ot=++this._lastDecorationId,nt=`${this._instanceId};${ot}`;j=new IntervalNode(nt,0,0),this._decorations[nt]=j}const _e=o[b],et=this._validateRangeRelaxedNoAllocations(_e.range),tt=_normalizeOptions(_e.options),it=this._buffer.getOffsetAt(et.startLineNumber,et.startColumn),st=this._buffer.getOffsetAt(et.endLineNumber,et.endColumn);j.ownerId=e,j.reset(a,it,st,et),j.setOptions(tt),j.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(et.endLineNumber),j.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(et.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(tt),this._decorationsTree.insert(j),k[b]=j.id,b++}else j&&delete this._decorations[j.id]}return k}getLanguageId(){return this.tokenization.getLanguageId()}setMode(e){this.tokenization.setLanguageId(e)}getLanguageIdAtPosition(e,i){return this.tokenization.getLanguageIdAtPosition(e,i)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,i){return e}getLineIndentColumn(e){return indentOfLine(this.getLineContent(e))+1}};TextModel.MODEL_SYNC_LIMIT=50*1024*1024;TextModel.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;TextModel.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;TextModel.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:EDITOR_MODEL_DEFAULTS.tabSize,indentSize:EDITOR_MODEL_DEFAULTS.indentSize,insertSpaces:EDITOR_MODEL_DEFAULTS.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,largeFileOptimizations:EDITOR_MODEL_DEFAULTS.largeFileOptimizations,bracketPairColorizationOptions:EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions};TextModel=__decorate$t([__param$o(4,IUndoRedoService),__param$o(5,ILanguageService),__param$o(6,ILanguageConfigurationService)],TextModel);function indentOfLine(s){let e=0;for(const i of s)if(i===" "||i==="	")e++;else break;return e}function isNodeInOverviewRuler(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}function isNodeInjectedText(s){return!!s.options.after||!!s.options.before}class DecorationsTrees{constructor(){this._decorationsTree0=new IntervalTree,this._decorationsTree1=new IntervalTree,this._injectedTextDecorationsTree=new IntervalTree}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,i){for(const o of i)o.range===null&&(o.range=e.getRangeAt(o.cachedAbsoluteStart,o.cachedAbsoluteEnd));return i}getAllInInterval(e,i,o,a,c){const d=e.getVersionId(),_=this._intervalSearch(i,o,a,c,d);return this._ensureNodesHaveRanges(e,_)}_intervalSearch(e,i,o,a,c){const d=this._decorationsTree0.intervalSearch(e,i,o,a,c),_=this._decorationsTree1.intervalSearch(e,i,o,a,c),b=this._injectedTextDecorationsTree.intervalSearch(e,i,o,a,c);return d.concat(_).concat(b)}getInjectedTextInInterval(e,i,o,a){const c=e.getVersionId(),d=this._injectedTextDecorationsTree.intervalSearch(i,o,a,!1,c);return this._ensureNodesHaveRanges(e,d).filter(_=>_.options.showIfCollapsed||!_.range.isEmpty())}getAllInjectedText(e,i){const o=e.getVersionId(),a=this._injectedTextDecorationsTree.search(i,!1,o);return this._ensureNodesHaveRanges(e,a).filter(c=>c.options.showIfCollapsed||!c.range.isEmpty())}getAll(e,i,o,a){const c=e.getVersionId(),d=this._search(i,o,a,c);return this._ensureNodesHaveRanges(e,d)}_search(e,i,o,a){if(o)return this._decorationsTree1.search(e,i,a);{const c=this._decorationsTree0.search(e,i,a),d=this._decorationsTree1.search(e,i,a),_=this._injectedTextDecorationsTree.search(e,i,a);return c.concat(d).concat(_)}}collectNodesFromOwner(e){const i=this._decorationsTree0.collectNodesFromOwner(e),o=this._decorationsTree1.collectNodesFromOwner(e),a=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return i.concat(o).concat(a)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),i=this._decorationsTree1.collectNodesPostOrder(),o=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(i).concat(o)}insert(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.insert(e):isNodeInOverviewRuler(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){isNodeInjectedText(e)?this._injectedTextDecorationsTree.delete(e):isNodeInOverviewRuler(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,i){const o=e.getVersionId();return i.cachedVersionId!==o&&this._resolveNode(i,o),i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd)),i.range}_resolveNode(e,i){isNodeInjectedText(e)?this._injectedTextDecorationsTree.resolveNode(e,i):isNodeInOverviewRuler(e)?this._decorationsTree1.resolveNode(e,i):this._decorationsTree0.resolveNode(e,i)}acceptReplace(e,i,o,a){this._decorationsTree0.acceptReplace(e,i,o,a),this._decorationsTree1.acceptReplace(e,i,o,a),this._injectedTextDecorationsTree.acceptReplace(e,i,o,a)}}function cleanClassName(s){return s.replace(/[^a-z0-9\-_]/gi," ")}class DecorationOptions{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class ModelDecorationOverviewRulerOptions extends DecorationOptions{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:OverviewRulerLane.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,i){if(typeof e=="string")return e;const o=e?i.getColor(e.id):null;return o?o.toString():""}}class ModelDecorationMinimapOptions extends DecorationOptions{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,i){return typeof e=="string"?Color.fromHex(e):i.getColor(e.id)}}class ModelDecorationInjectedTextOptions{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}static from(e){return e instanceof ModelDecorationInjectedTextOptions?e:new ModelDecorationInjectedTextOptions(e)}}class ModelDecorationOptions{constructor(e){var i,o;this.description=e.description,this.blockClassName=e.blockClassName?cleanClassName(e.blockClassName):null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?cleanClassName(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ModelDecorationOverviewRulerOptions(e.overviewRuler):null,this.minimap=e.minimap?new ModelDecorationMinimapOptions(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?cleanClassName(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?cleanClassName(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?cleanClassName(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?cleanClassName(e.marginClassName):null,this.inlineClassName=e.inlineClassName?cleanClassName(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?cleanClassName(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?cleanClassName(e.afterContentClassName):null,this.after=e.after?ModelDecorationInjectedTextOptions.from(e.after):null,this.before=e.before?ModelDecorationInjectedTextOptions.from(e.before):null,this.hideInCommentTokens=(i=e.hideInCommentTokens)!==null&&i!==void 0?i:!1,this.hideInStringTokens=(o=e.hideInStringTokens)!==null&&o!==void 0?o:!1}static register(e){return new ModelDecorationOptions(e)}static createDynamic(e){return new ModelDecorationOptions(e)}}ModelDecorationOptions.EMPTY=ModelDecorationOptions.register({description:"empty"});const TRACKED_RANGE_OPTIONS=[ModelDecorationOptions.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ModelDecorationOptions.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ModelDecorationOptions.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function _normalizeOptions(s){return s instanceof ModelDecorationOptions?s:ModelDecorationOptions.createDynamic(s)}class DidChangeDecorationsEmitter extends Disposable{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new Emitter$1),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const i={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(i)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class DidChangeContentEmitter extends Disposable{constructor(){super(),this._fastEmitter=this._register(new Emitter$1),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new Emitter$1),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const i=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(i),this._slowEmitter.fire(i)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}globalThis&&globalThis.__awaiter;function tokenizeLineToHTML(s,e,i,o,a,c,d){let _="<div>",b=o,k=0,j=!0;for(let _e=0,et=e.getCount();_e<et;_e++){const tt=e.getEndOffset(_e);if(tt<=o)continue;let it="";for(;b<tt&&b<a;b++){const st=s.charCodeAt(b);switch(st){case 9:{let ot=c-(b+k)%c;for(k+=ot-1;ot>0;)d&&j?(it+="&#160;",j=!1):(it+=" ",j=!0),ot--;break}case 60:it+="&lt;",j=!1;break;case 62:it+="&gt;",j=!1;break;case 38:it+="&amp;",j=!1;break;case 0:it+="&#00;",j=!1;break;case 65279:case 8232:case 8233:case 133:it+="\uFFFD",j=!1;break;case 13:it+="&#8203",j=!1;break;case 32:d&&j?(it+="&#160;",j=!1):(it+=" ",j=!0);break;default:it+=String.fromCharCode(st),j=!1}}if(_+=`<span style="${e.getInlineStyle(_e,i)}">${it}</span>`,tt>a||b>=a)break}return _+="</div>",_}class PendingChanges{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const i=this._inserts,o=this._changes,a=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(i,o,a)}}class EditorWhitespace{constructor(e,i,o,a,c){this.id=e,this.afterLineNumber=i,this.ordinal=o,this.height=a,this.minWidth=c,this.prefixSum=0}}class LinesLayout{constructor(e,i,o,a){this._instanceId=singleLetterHash(++LinesLayout.INSTANCE_COUNT),this._pendingChanges=new PendingChanges,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=i,this._paddingTop=o,this._paddingBottom=a}static findInsertionIndex(e,i,o){let a=0,c=e.length;for(;a<c;){const d=a+c>>>1;i===e[d].afterLineNumber?o<e[d].ordinal?c=d:a=d+1:i<e[d].afterLineNumber?c=d:a=d+1}return a}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,i){this._paddingTop=e,this._paddingBottom=i}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let i=!1;try{e({insertWhitespace:(a,c,d,_)=>{i=!0,a=a|0,c=c|0,d=d|0,_=_|0;const b=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new EditorWhitespace(b,a,c,d,_)),b},changeOneWhitespace:(a,c,d)=>{i=!0,c=c|0,d=d|0,this._pendingChanges.change({id:a,newAfterLineNumber:c,newHeight:d})},removeWhitespace:a=>{i=!0,this._pendingChanges.remove({id:a})}})}finally{this._pendingChanges.commit(this)}return i}_commitPendingChanges(e,i,o){if((e.length>0||o.length>0)&&(this._minWidth=-1),e.length+i.length+o.length<=1){for(const b of e)this._insertWhitespace(b);for(const b of i)this._changeOneWhitespace(b.id,b.newAfterLineNumber,b.newHeight);for(const b of o){const k=this._findWhitespaceIndex(b.id);k!==-1&&this._removeWhitespace(k)}return}const a=new Set;for(const b of o)a.add(b.id);const c=new Map;for(const b of i)c.set(b.id,b);const d=b=>{const k=[];for(const j of b)if(!a.has(j.id)){if(c.has(j.id)){const _e=c.get(j.id);j.afterLineNumber=_e.newAfterLineNumber,j.height=_e.newHeight}k.push(j)}return k},_=d(this._arr).concat(d(e));_.sort((b,k)=>b.afterLineNumber===k.afterLineNumber?b.ordinal-k.ordinal:b.afterLineNumber-k.afterLineNumber),this._arr=_,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const i=LinesLayout.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(i,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)}_findWhitespaceIndex(e){const i=this._arr;for(let o=0,a=i.length;o<a;o++)if(i[o].id===e)return o;return-1}_changeOneWhitespace(e,i,o){const a=this._findWhitespaceIndex(e);if(a!==-1&&(this._arr[a].height!==o&&(this._arr[a].height=o,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,a-1)),this._arr[a].afterLineNumber!==i)){const c=this._arr[a];this._removeWhitespace(a),c.afterLineNumber=i,this._insertWhitespace(c)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,i){this._checkPendingChanges(),e=e|0,i=i|0,this._lineCount-=i-e+1;for(let o=0,a=this._arr.length;o<a;o++){const c=this._arr[o].afterLineNumber;e<=c&&c<=i?this._arr[o].afterLineNumber=e-1:c>i&&(this._arr[o].afterLineNumber-=i-e+1)}}onLinesInserted(e,i){this._checkPendingChanges(),e=e|0,i=i|0,this._lineCount+=i-e+1;for(let o=0,a=this._arr.length;o<a;o++){const c=this._arr[o].afterLineNumber;e<=c&&(this._arr[o].afterLineNumber+=i-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let i=Math.max(0,this._prefixSumValidIndex+1);i===0&&(this._arr[0].prefixSum=this._arr[0].height,i++);for(let o=i;o<=e;o++)this._arr[o].prefixSum=this._arr[o-1].prefixSum+this._arr[o].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,i=this.getWhitespacesTotalHeight();return e+i+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e);return i===-1?0:this.getWhitespacesAccumulatedHeight(i)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const i=this._arr;let o=0,a=i.length-1;for(;o<=a;){const d=(a-o|0)/2|0,_=o+d|0;if(i[_].afterLineNumber<e){if(_+1>=i.length||i[_+1].afterLineNumber>=e)return _;o=_+1|0}else a=_-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const o=this._findLastWhitespaceBeforeLineNumber(e)+1;return o<this._arr.length?o:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,i=!1){this._checkPendingChanges(),e=e|0;let o;e>1?o=this._lineHeight*(e-1):o=0;const a=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(i?1:0));return o+a+this._paddingTop}getVerticalOffsetAfterLineNumber(e,i=!1){this._checkPendingChanges(),e=e|0;const o=this._lineHeight*e,a=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(i?1:0));return o+a+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let i=0,o=this._arr.length;i<o;i++)e=Math.max(e,this._arr[i].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const i=this.getLinesTotalHeight();return e>i}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const i=this.getLinesTotalHeight();return e>=i-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const i=this._lineCount|0,o=this._lineHeight;let a=1,c=i;for(;a<c;){const d=(a+c)/2|0,_=this.getVerticalOffsetForLineNumber(d)|0;if(e>=_+o)a=d+1;else{if(e>=_)return d;c=d}}return a>i?i:a}getLinesViewportData(e,i){this._checkPendingChanges(),e=e|0,i=i|0;const o=this._lineHeight,a=this.getLineNumberAtOrAfterVerticalOffset(e)|0,c=this.getVerticalOffsetForLineNumber(a)|0;let d=this._lineCount|0,_=this.getFirstWhitespaceIndexAfterLineNumber(a)|0;const b=this.getWhitespacesCount()|0;let k,j;_===-1?(_=b,j=d+1,k=0):(j=this.getAfterLineNumberForWhitespaceIndex(_)|0,k=this.getHeightForWhitespaceIndex(_)|0);let _e=c,et=_e;const tt=5e5;let it=0;c>=tt&&(it=Math.floor(c/tt)*tt,it=Math.floor(it/o)*o,et-=it);const st=[],ot=e+(i-e)/2;let nt=-1;for(let gt=a;gt<=d;gt++){if(nt===-1){const ht=_e,ut=_e+o;(ht<=ot&&ot<ut||ht>ot)&&(nt=gt)}for(_e+=o,st[gt-a]=et,et+=o;j===gt;)et+=k,_e+=k,_++,_>=b?j=d+1:(j=this.getAfterLineNumberForWhitespaceIndex(_)|0,k=this.getHeightForWhitespaceIndex(_)|0);if(_e>=i){d=gt;break}}nt===-1&&(nt=d);const rt=this.getVerticalOffsetForLineNumber(d)|0;let at=a,lt=d;return at<lt&&c<e&&at++,at<lt&&rt+o>i&&lt--,{bigNumbersDelta:it,startLineNumber:a,endLineNumber:d,relativeVerticalOffset:st,centeredLineNumber:nt,completelyVisibleStartLineNumber:at,completelyVisibleEndLineNumber:lt}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const i=this.getAfterLineNumberForWhitespaceIndex(e);let o;i>=1?o=this._lineHeight*i:o=0;let a;return e>0?a=this.getWhitespacesAccumulatedHeight(e-1):a=0,o+a+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let i=0,o=this.getWhitespacesCount()-1;if(o<0)return-1;const a=this.getVerticalOffsetForWhitespaceIndex(o),c=this.getHeightForWhitespaceIndex(o);if(e>=a+c)return-1;for(;i<o;){const d=Math.floor((i+o)/2),_=this.getVerticalOffsetForWhitespaceIndex(d),b=this.getHeightForWhitespaceIndex(d);if(e>=_+b)i=d+1;else{if(e>=_)return d;o=d}}return i}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(i<0||i>=this.getWhitespacesCount())return null;const o=this.getVerticalOffsetForWhitespaceIndex(i);if(o>e)return null;const a=this.getHeightForWhitespaceIndex(i),c=this.getIdForWhitespaceIndex(i),d=this.getAfterLineNumberForWhitespaceIndex(i);return{id:c,afterLineNumber:d,verticalOffset:o,height:a}}getWhitespaceViewportData(e,i){this._checkPendingChanges(),e=e|0,i=i|0;const o=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),a=this.getWhitespacesCount()-1;if(o<0)return[];const c=[];for(let d=o;d<=a;d++){const _=this.getVerticalOffsetForWhitespaceIndex(d),b=this.getHeightForWhitespaceIndex(d);if(_>=i)break;c.push({id:this.getIdForWhitespaceIndex(d),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(d),verticalOffset:_,height:b})}return c}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}LinesLayout.INSTANCE_COUNT=0;const SMOOTH_SCROLLING_TIME=125;class EditorScrollDimensions{constructor(e,i,o,a){e=e|0,i=i|0,o=o|0,a=a|0,e<0&&(e=0),i<0&&(i=0),o<0&&(o=0),a<0&&(a=0),this.width=e,this.contentWidth=i,this.scrollWidth=Math.max(e,i),this.height=o,this.contentHeight=a,this.scrollHeight=Math.max(o,a)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class EditorScrollable extends Disposable{constructor(e,i){super(),this._onDidContentSizeChange=this._register(new Emitter$1),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new EditorScrollDimensions(0,0,0,0),this._scrollable=this._register(new Scrollable({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:i})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const i=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const o=i.contentWidth!==e.contentWidth,a=i.contentHeight!==e.contentHeight;(o||a)&&this._onDidContentSizeChange.fire(new ContentSizeChangedEvent(i.contentWidth,i.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class ViewLayout extends Disposable{constructor(e,i,o){super(),this._configuration=e;const a=this._configuration.options,c=a.get(133),d=a.get(77);this._linesLayout=new LinesLayout(i,a.get(61),d.top,d.bottom),this._scrollable=this._register(new EditorScrollable(0,o)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new EditorScrollDimensions(c.contentWidth,0,c.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(105)?SMOOTH_SCROLLING_TIME:0)}onConfigurationChanged(e){const i=this._configuration.options;if(e.hasChanged(61)&&this._linesLayout.setLineHeight(i.get(61)),e.hasChanged(77)){const o=i.get(77);this._linesLayout.setPadding(o.top,o.bottom)}if(e.hasChanged(133)){const o=i.get(133),a=o.contentWidth,c=o.height,d=this._scrollable.getScrollDimensions(),_=d.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(a,d.contentWidth,c,this._getContentHeight(a,c,_)))}else this._updateHeight();e.hasChanged(105)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,i){this._linesLayout.onLinesDeleted(e,i)}onLinesInserted(e,i){this._linesLayout.onLinesInserted(e,i)}_getHorizontalScrollbarHeight(e,i){const a=this._configuration.options.get(94);return a.horizontal===2||e>=i?0:a.horizontalScrollbarSize}_getContentHeight(e,i,o){const a=this._configuration.options;let c=this._linesLayout.getLinesTotalHeight();return a.get(96)?c+=Math.max(0,i-a.get(61)-a.get(77).bottom):c+=this._getHorizontalScrollbarHeight(e,o),c}_updateHeight(){const e=this._scrollable.getScrollDimensions(),i=e.width,o=e.height,a=e.contentWidth;this._scrollable.setScrollDimensions(new EditorScrollDimensions(i,e.contentWidth,o,this._getContentHeight(i,o,a)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),i=this._scrollable.getCurrentScrollPosition();return new Viewport(i.scrollTop,i.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),i=this._scrollable.getFutureScrollPosition();return new Viewport(i.scrollTop,i.scrollLeft,e.width,e.height)}_computeContentWidth(e){const i=this._configuration.options,o=i.get(134),a=i.get(46),c=i.get(133);if(o.isViewportWrapping){const d=i.get(67);return e>c.contentWidth+a.typicalHalfwidthCharacterWidth&&d.enabled&&d.side==="right"?e+c.verticalScrollbarWidth:e}else{const d=i.get(95)*a.typicalHalfwidthCharacterWidth,_=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+d+c.verticalScrollbarWidth,_)}}setMaxLineWidth(e){const i=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new EditorScrollDimensions(i.width,this._computeContentWidth(e),i.height,i.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),i=e.scrollTop,o=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(i),a=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(o);return{scrollTop:i,scrollTopWithoutViewZones:i-a,scrollLeft:e.scrollLeft}}changeWhitespace(e){const i=this._linesLayout.changeWhitespace(e);return i&&this.onHeightMaybeChanged(),i}getVerticalOffsetForLineNumber(e,i=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,i)}getVerticalOffsetAfterLineNumber(e,i=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,i)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const i=this._scrollable.getScrollDimensions();return e+i.height>i.scrollHeight&&(e=i.scrollHeight-i.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+i.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,i){i===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,i){const o=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:o.scrollLeft+e,scrollTop:o.scrollTop+i})}}class ViewModelDecorations{constructor(e,i,o,a,c){this.editorId=e,this.model=i,this.configuration=o,this._linesCollection=a,this._coordinatesConverter=c,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const i=e.id;let o=this._decorationsCache[i];if(!o){const a=e.range,c=e.options;let d;if(c.isWholeLine){const _=this._coordinatesConverter.convertModelPositionToViewPosition(new Position$1(a.startLineNumber,1),0),b=this._coordinatesConverter.convertModelPositionToViewPosition(new Position$1(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber)),1);d=new Range$2(_.lineNumber,_.column,b.lineNumber,b.column)}else d=this._coordinatesConverter.convertModelRangeToViewRange(a,1);o=new ViewModelDecoration(d,c),this._decorationsCache[i]=o}return o}getDecorationsViewportData(e){let i=this._cachedModelDecorationsResolver!==null;return i=i&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),i||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){const i=new Range$2(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i).inlineDecorations[0]}_getDecorationsInRange(e){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,filterValidationDecorations(this.configuration.options)),o=e.startLineNumber,a=e.endLineNumber,c=[];let d=0;const _=[];for(let b=o;b<=a;b++)_[b-o]=[];for(let b=0,k=i.length;b<k;b++){const j=i[b],_e=j.options;if(!isModelDecorationVisible(this.model,j))continue;const et=this._getOrCreateViewModelDecoration(j),tt=et.range;if(c[d++]=et,_e.inlineClassName){const it=new InlineDecoration(tt,_e.inlineClassName,_e.inlineClassNameAffectsLetterSpacing?3:0),st=Math.max(o,tt.startLineNumber),ot=Math.min(a,tt.endLineNumber);for(let nt=st;nt<=ot;nt++)_[nt-o].push(it)}if(_e.beforeContentClassName&&o<=tt.startLineNumber&&tt.startLineNumber<=a){const it=new InlineDecoration(new Range$2(tt.startLineNumber,tt.startColumn,tt.startLineNumber,tt.startColumn),_e.beforeContentClassName,1);_[tt.startLineNumber-o].push(it)}if(_e.afterContentClassName&&o<=tt.endLineNumber&&tt.endLineNumber<=a){const it=new InlineDecoration(new Range$2(tt.endLineNumber,tt.endColumn,tt.endLineNumber,tt.endColumn),_e.afterContentClassName,2);_[tt.endLineNumber-o].push(it)}}return{decorations:c,inlineDecorations:_}}}function isModelDecorationVisible(s,e){return!(e.options.hideInCommentTokens&&isModelDecorationInComment(s,e)||e.options.hideInStringTokens&&isModelDecorationInString(s,e))}function isModelDecorationInComment(s,e){return testTokensInRange(s,e.range,i=>i===1)}function isModelDecorationInString(s,e){return testTokensInRange(s,e.range,i=>i===2)}function testTokensInRange(s,e,i){for(let o=e.startLineNumber;o<=e.endLineNumber;o++){const a=s.tokenization.getLineTokens(o),c=o===e.startLineNumber,d=o===e.endLineNumber;let _=c?a.findTokenIndexAtOffset(e.startColumn-1):0;for(;_<a.getCount()&&!(d&&a.getStartOffset(_)>e.endColumn-1);){if(!i(a.getStandardTokenType(_)))return!1;_++}}return!0}function createModelLineProjection(s,e){return s===null?e?IdentityModelLineProjection.INSTANCE:HiddenModelLineProjection.INSTANCE:new ModelLineProjection(s,e)}class ModelLineProjection{constructor(e,i){this._projectionData=e,this._isVisible=i}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,i,o){this._assertVisible();const a=o>0?this._projectionData.breakOffsets[o-1]:0,c=this._projectionData.breakOffsets[o];let d;if(this._projectionData.injectionOffsets!==null){const _=this._projectionData.injectionOffsets.map((k,j)=>new LineInjectedText(0,0,k+1,this._projectionData.injectionOptions[j],0));d=LineInjectedText.applyInjectedText(e.getLineContent(i),_).substring(a,c)}else d=e.getValueInRange({startLineNumber:i,startColumn:a+1,endLineNumber:i,endColumn:c+1});return o>0&&(d=spaces(this._projectionData.wrappedTextIndentLength)+d),d}getViewLineLength(e,i,o){return this._assertVisible(),this._projectionData.getLineLength(o)}getViewLineMinColumn(e,i,o){return this._assertVisible(),this._projectionData.getMinOutputOffset(o)+1}getViewLineMaxColumn(e,i,o){return this._assertVisible(),this._projectionData.getMaxOutputOffset(o)+1}getViewLineData(e,i,o){const a=new Array;return this.getViewLinesData(e,i,o,1,0,[!0],a),a[0]}getViewLinesData(e,i,o,a,c,d,_){this._assertVisible();const b=this._projectionData,k=b.injectionOffsets,j=b.injectionOptions;let _e=null;if(k){_e=[];let tt=0,it=0;for(let st=0;st<b.getOutputLineCount();st++){const ot=new Array;_e[st]=ot;const nt=st>0?b.breakOffsets[st-1]:0,rt=b.breakOffsets[st];for(;it<k.length;){const at=j[it].content.length,lt=k[it]+tt,gt=lt+at;if(lt>rt)break;if(nt<gt){const ht=j[it];if(ht.inlineClassName){const ut=st>0?b.wrappedTextIndentLength:0,ct=ut+Math.max(lt-nt,0),ft=ut+Math.min(gt-nt,rt);ct!==ft&&ot.push(new SingleLineInlineDecoration(ct,ft,ht.inlineClassName,ht.inlineClassNameAffectsLetterSpacing))}}if(gt<=rt)tt+=at,it++;else break}}}let et;k?et=e.tokenization.getLineTokens(i).withInserted(k.map((tt,it)=>({offset:tt,text:j[it].content,tokenMetadata:LineTokens.defaultTokenMetadata}))):et=e.tokenization.getLineTokens(i);for(let tt=o;tt<o+a;tt++){const it=c+tt-o;if(!d[it]){_[it]=null;continue}_[it]=this._getViewLineData(et,_e?_e[tt]:null,tt)}}_getViewLineData(e,i,o){this._assertVisible();const a=this._projectionData,c=o>0?a.wrappedTextIndentLength:0,d=o>0?a.breakOffsets[o-1]:0,_=a.breakOffsets[o],b=e.sliceAndInflate(d,_,c);let k=b.getLineContent();o>0&&(k=spaces(a.wrappedTextIndentLength)+k);const j=this._projectionData.getMinOutputOffset(o)+1,_e=k.length+1,et=o+1<this.getViewLineCount(),tt=o===0?0:a.breakOffsetsVisibleColumn[o-1];return new ViewLineData(k,et,j,_e,tt,b,i)}getModelColumnOfViewPosition(e,i){return this._assertVisible(),this._projectionData.translateToInputOffset(e,i-1)+1}getViewPositionOfModelPosition(e,i,o=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(i-1,o).toPosition(e)}getViewLineNumberOfModelPosition(e,i){this._assertVisible();const o=this._projectionData.translateToOutputPosition(i-1);return e+o.outputLineIndex}normalizePosition(e,i,o){const a=i.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,i.column-1,o).toPosition(a)}getInjectedTextAt(e,i){return this._projectionData.getInjectedText(e,i-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class IdentityModelLineProjection{constructor(){}isVisible(){return!0}setVisible(e){return e?this:HiddenModelLineProjection.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,i,o){return e.getLineContent(i)}getViewLineLength(e,i,o){return e.getLineLength(i)}getViewLineMinColumn(e,i,o){return e.getLineMinColumn(i)}getViewLineMaxColumn(e,i,o){return e.getLineMaxColumn(i)}getViewLineData(e,i,o){const a=e.tokenization.getLineTokens(i),c=a.getLineContent();return new ViewLineData(c,!1,1,c.length+1,0,a.inflate(),null)}getViewLinesData(e,i,o,a,c,d,_){if(!d[c]){_[c]=null;return}_[c]=this.getViewLineData(e,i,0)}getModelColumnOfViewPosition(e,i){return i}getViewPositionOfModelPosition(e,i){return new Position$1(e,i)}getViewLineNumberOfModelPosition(e,i){return e}normalizePosition(e,i,o){return i}getInjectedTextAt(e,i){return null}}IdentityModelLineProjection.INSTANCE=new IdentityModelLineProjection;class HiddenModelLineProjection{constructor(){}isVisible(){return!1}setVisible(e){return e?IdentityModelLineProjection.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,i,o){throw new Error("Not supported")}getViewLineLength(e,i,o){throw new Error("Not supported")}getViewLineMinColumn(e,i,o){throw new Error("Not supported")}getViewLineMaxColumn(e,i,o){throw new Error("Not supported")}getViewLineData(e,i,o){throw new Error("Not supported")}getViewLinesData(e,i,o,a,c,d,_){throw new Error("Not supported")}getModelColumnOfViewPosition(e,i){throw new Error("Not supported")}getViewPositionOfModelPosition(e,i){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,i){throw new Error("Not supported")}normalizePosition(e,i,o){throw new Error("Not supported")}getInjectedTextAt(e,i){throw new Error("Not supported")}}HiddenModelLineProjection.INSTANCE=new HiddenModelLineProjection;const _spaces=[""];function spaces(s){if(s>=_spaces.length)for(let e=1;e<=s;e++)_spaces[e]=_makeSpaces(e);return _spaces[s]}function _makeSpaces(s){return new Array(s+1).join(" ")}class ViewModelLinesFromProjectedModel{constructor(e,i,o,a,c,d,_,b,k){this._editorId=e,this.model=i,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=o,this._monospaceLineBreaksComputerFactory=a,this.fontInfo=c,this.tabSize=d,this.wrappingStrategy=_,this.wrappingColumn=b,this.wrappingIndent=k,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new CoordinatesConverter(this)}_constructLines(e,i){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const o=this.model.getLinesContent(),a=this.model.getInjectedTextDecorations(this._editorId),c=o.length,d=this.createLineBreaksComputer(),_=new ArrayQueue(LineInjectedText.fromDecorations(a));for(let st=0;st<c;st++){const ot=_.takeWhile(nt=>nt.lineNumber===st+1);d.addRequest(o[st],ot,i?i[st]:null)}const b=d.finalize(),k=[],j=this.hiddenAreasDecorationIds.map(st=>this.model.getDecorationRange(st)).sort(Range$2.compareRangesUsingStarts);let _e=1,et=0,tt=-1,it=tt+1<j.length?et+1:c+2;for(let st=0;st<c;st++){const ot=st+1;ot===it&&(tt++,_e=j[tt].startLineNumber,et=j[tt].endLineNumber,it=tt+1<j.length?et+1:c+2);const nt=ot>=_e&&ot<=et,rt=createModelLineProjection(b[st],!nt);k[st]=rt.getViewLineCount(),this.modelLineProjections[st]=rt}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new ConstantTimePrefixSumComputer(k)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const i=e.map(et=>this.model.validateRange(et)),o=normalizeLineRanges(i),a=this.hiddenAreasDecorationIds.map(et=>this.model.getDecorationRange(et)).sort(Range$2.compareRangesUsingStarts);if(o.length===a.length){let et=!1;for(let tt=0;tt<o.length;tt++)if(!o[tt].equalsRange(a[tt])){et=!0;break}if(!et)return!1}const c=o.map(et=>({range:et,options:ModelDecorationOptions.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,c);const d=o;let _=1,b=0,k=-1,j=k+1<d.length?b+1:this.modelLineProjections.length+2,_e=!1;for(let et=0;et<this.modelLineProjections.length;et++){const tt=et+1;tt===j&&(k++,_=d[k].startLineNumber,b=d[k].endLineNumber,j=k+1<d.length?b+1:this.modelLineProjections.length+2);let it=!1;if(tt>=_&&tt<=b?this.modelLineProjections[et].isVisible()&&(this.modelLineProjections[et]=this.modelLineProjections[et].setVisible(!1),it=!0):(_e=!0,this.modelLineProjections[et].isVisible()||(this.modelLineProjections[et]=this.modelLineProjections[et].setVisible(!0),it=!0)),it){const st=this.modelLineProjections[et].getViewLineCount();this.projectedModelLineLineCounts.setValue(et,st)}}return _e||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,i){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,i,o,a){const c=this.fontInfo.equals(e),d=this.wrappingStrategy===i,_=this.wrappingColumn===o,b=this.wrappingIndent===a;if(c&&d&&_&&b)return!1;const k=c&&d&&!_&&b;this.fontInfo=e,this.wrappingStrategy=i,this.wrappingColumn=o,this.wrappingIndent=a;let j=null;if(k){j=[];for(let _e=0,et=this.modelLineProjections.length;_e<et;_e++)j[_e]=this.modelLineProjections[_e].getProjectionData()}return this._constructLines(!1,j),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,i,o){if(!e||e<=this._validModelVersionId)return null;const a=i===1?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,c=this.projectedModelLineLineCounts.getPrefixSum(o);return this.modelLineProjections.splice(i-1,o-i+1),this.projectedModelLineLineCounts.removeValues(i-1,o-i+1),new ViewLinesDeletedEvent(a,c)}onModelLinesInserted(e,i,o,a){if(!e||e<=this._validModelVersionId)return null;const c=i>2&&!this.modelLineProjections[i-2].isVisible(),d=i===1?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1;let _=0;const b=[],k=[];for(let j=0,_e=a.length;j<_e;j++){const et=createModelLineProjection(a[j],!c);b.push(et);const tt=et.getViewLineCount();_+=tt,k[j]=tt}return this.modelLineProjections=this.modelLineProjections.slice(0,i-1).concat(b).concat(this.modelLineProjections.slice(i-1)),this.projectedModelLineLineCounts.insertValues(i-1,k),new ViewLinesInsertedEvent(d,d+_-1)}onModelLineChanged(e,i,o){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const a=i-1,c=this.modelLineProjections[a].getViewLineCount(),d=this.modelLineProjections[a].isVisible(),_=createModelLineProjection(o,d);this.modelLineProjections[a]=_;const b=this.modelLineProjections[a].getViewLineCount();let k=!1,j=0,_e=-1,et=0,tt=-1,it=0,st=-1;c>b?(j=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,_e=j+b-1,it=_e+1,st=it+(c-b)-1,k=!0):c<b?(j=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,_e=j+c-1,et=_e+1,tt=et+(b-c)-1,k=!0):(j=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,_e=j+b-1),this.projectedModelLineLineCounts.setValue(a,b);const ot=j<=_e?new ViewLinesChangedEvent(j,_e-j+1):null,nt=et<=tt?new ViewLinesInsertedEvent(et,tt):null,rt=it<=st?new ViewLinesDeletedEvent(it,st):null;return[k,ot,nt,rt]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const i=this.getViewLineCount();return e>i?i:e|0}getActiveIndentGuide(e,i,o){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i),o=this._toValidViewLineNumber(o);const a=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),c=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),d=this.convertViewPositionToModelPosition(o,this.getViewLineMinColumn(o)),_=this.model.guides.getActiveIndentGuide(a.lineNumber,c.lineNumber,d.lineNumber),b=this.convertModelPositionToViewPosition(_.startLineNumber,1),k=this.convertModelPositionToViewPosition(_.endLineNumber,this.model.getLineMaxColumn(_.endLineNumber));return{startLineNumber:b.lineNumber,endLineNumber:k.lineNumber,indent:_.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,a=i.remainder;return new ViewLineInfo(o+1,a)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const i=this.modelLineProjections[e.modelLineNumber-1],o=i.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),a=i.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,o);return new Position$1(e.modelLineNumber,a)}getModelEndPositionOfViewLine(e){const i=this.modelLineProjections[e.modelLineNumber-1],o=i.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),a=i.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,o);return new Position$1(e.modelLineNumber,a)}getViewLineInfosGroupedByModelRanges(e,i){const o=this.getViewLineInfo(e),a=this.getViewLineInfo(i),c=new Array;let d=this.getModelStartPositionOfViewLine(o),_=new Array;for(let b=o.modelLineNumber;b<=a.modelLineNumber;b++){const k=this.modelLineProjections[b-1];if(k.isVisible()){const j=b===o.modelLineNumber?o.modelLineWrappedLineIdx:0,_e=b===a.modelLineNumber?a.modelLineWrappedLineIdx+1:k.getViewLineCount();for(let et=j;et<_e;et++)_.push(new ViewLineInfo(b,et))}if(!k.isVisible()&&d){const j=new Position$1(b-1,this.model.getLineMaxColumn(b-1)+1),_e=Range$2.fromPositions(d,j);c.push(new ViewLineInfoGroupedByModelRange(_e,_)),_=[],d=null}else k.isVisible()&&!d&&(d=new Position$1(b,1))}if(d){const b=Range$2.fromPositions(d,this.getModelEndPositionOfViewLine(a));c.push(new ViewLineInfoGroupedByModelRange(b,_))}return c}getViewLinesBracketGuides(e,i,o,a){const c=o?this.convertViewPositionToModelPosition(o.lineNumber,o.column):null,d=[];for(const _ of this.getViewLineInfosGroupedByModelRanges(e,i)){const b=_.modelRange.startLineNumber,k=this.model.guides.getLinesBracketGuides(b,_.modelRange.endLineNumber,c,a);for(const j of _.viewLines){const et=k[j.modelLineNumber-b].map(tt=>{if(tt.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[j.modelLineNumber-1].getViewPositionOfModelPosition(0,tt.forWrappedLinesAfterColumn).lineNumber>=j.modelLineWrappedLineIdx||tt.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[j.modelLineNumber-1].getViewPositionOfModelPosition(0,tt.forWrappedLinesBeforeOrAtColumn).lineNumber<j.modelLineWrappedLineIdx)return;if(!tt.horizontalLine)return tt;let it=-1;if(tt.column!==-1){const nt=this.modelLineProjections[j.modelLineNumber-1].getViewPositionOfModelPosition(0,tt.column);if(nt.lineNumber===j.modelLineWrappedLineIdx)it=nt.column;else if(nt.lineNumber<j.modelLineWrappedLineIdx)it=this.getMinColumnOfViewLine(j);else if(nt.lineNumber>j.modelLineWrappedLineIdx)return}const st=this.convertModelPositionToViewPosition(j.modelLineNumber,tt.horizontalLine.endColumn),ot=this.modelLineProjections[j.modelLineNumber-1].getViewPositionOfModelPosition(0,tt.horizontalLine.endColumn);return ot.lineNumber===j.modelLineWrappedLineIdx?new IndentGuide(tt.visibleColumn,it,tt.className,new IndentGuideHorizontalLine(tt.horizontalLine.top,st.column),-1,-1):ot.lineNumber<j.modelLineWrappedLineIdx||tt.visibleColumn!==-1?void 0:new IndentGuide(tt.visibleColumn,it,tt.className,new IndentGuideHorizontalLine(tt.horizontalLine.top,this.getMaxColumnOfViewLine(j)),-1,-1)});d.push(et.filter(tt=>!!tt))}}return d}getViewLinesIndentGuides(e,i){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i);const o=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),a=this.convertViewPositionToModelPosition(i,this.getViewLineMaxColumn(i));let c=[];const d=[],_=[],b=o.lineNumber-1,k=a.lineNumber-1;let j=null;for(let it=b;it<=k;it++){const st=this.modelLineProjections[it];if(st.isVisible()){const ot=st.getViewLineNumberOfModelPosition(0,it===b?o.column:1),nt=st.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(it+1)),rt=nt-ot+1;let at=0;rt>1&&st.getViewLineMinColumn(this.model,it+1,nt)===1&&(at=ot===0?1:2),d.push(rt),_.push(at),j===null&&(j=new Position$1(it+1,0))}else j!==null&&(c=c.concat(this.model.guides.getLinesIndentGuides(j.lineNumber,it)),j=null)}j!==null&&(c=c.concat(this.model.guides.getLinesIndentGuides(j.lineNumber,a.lineNumber)),j=null);const _e=i-e+1,et=new Array(_e);let tt=0;for(let it=0,st=c.length;it<st;it++){let ot=c[it];const nt=Math.min(_e-tt,d[it]),rt=_[it];let at;rt===2?at=0:rt===1?at=1:at=nt;for(let lt=0;lt<nt;lt++)lt===at&&(ot=0),et[tt++]=ot}return et}getViewLineContent(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineContent(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineLength(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineLength(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMinColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMaxColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineData(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineData(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLinesData(e,i,o){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i);const a=this.projectedModelLineLineCounts.getIndexOf(e-1);let c=e;const d=a.index,_=a.remainder,b=[];for(let k=d,j=this.model.getLineCount();k<j;k++){const _e=this.modelLineProjections[k];if(!_e.isVisible())continue;const et=k===d?_:0;let tt=_e.getViewLineCount()-et,it=!1;if(c+tt>i&&(it=!0,tt=i-c+1),_e.getViewLinesData(this.model,k+1,et,tt,c-e,o,b),c+=tt,it)break}return b}validateViewPosition(e,i,o){e=this._toValidViewLineNumber(e);const a=this.projectedModelLineLineCounts.getIndexOf(e-1),c=a.index,d=a.remainder,_=this.modelLineProjections[c],b=_.getViewLineMinColumn(this.model,c+1,d),k=_.getViewLineMaxColumn(this.model,c+1,d);i<b&&(i=b),i>k&&(i=k);const j=_.getModelColumnOfViewPosition(d,i);return this.model.validatePosition(new Position$1(c+1,j)).equals(o)?new Position$1(e,i):this.convertModelPositionToViewPosition(o.lineNumber,o.column)}validateViewRange(e,i){const o=this.validateViewPosition(e.startLineNumber,e.startColumn,i.getStartPosition()),a=this.validateViewPosition(e.endLineNumber,e.endColumn,i.getEndPosition());return new Range$2(o.lineNumber,o.column,a.lineNumber,a.column)}convertViewPositionToModelPosition(e,i){const o=this.getViewLineInfo(e),a=this.modelLineProjections[o.modelLineNumber-1].getModelColumnOfViewPosition(o.modelLineWrappedLineIdx,i);return this.model.validatePosition(new Position$1(o.modelLineNumber,a))}convertViewRangeToModelRange(e){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Range$2(i.lineNumber,i.column,o.lineNumber,o.column)}convertModelPositionToViewPosition(e,i,o=2){const a=this.model.validatePosition(new Position$1(e,i)),c=a.lineNumber,d=a.column;let _=c-1,b=!1;for(;_>0&&!this.modelLineProjections[_].isVisible();)_--,b=!0;if(_===0&&!this.modelLineProjections[_].isVisible())return new Position$1(1,1);const k=1+this.projectedModelLineLineCounts.getPrefixSum(_);let j;return b?j=this.modelLineProjections[_].getViewPositionOfModelPosition(k,this.model.getLineMaxColumn(_+1),o):j=this.modelLineProjections[c-1].getViewPositionOfModelPosition(k,d,o),j}convertModelRangeToViewRange(e,i=0){if(e.isEmpty()){const o=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,i);return Range$2.fromPositions(o)}else{const o=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),a=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Range$2(o.lineNumber,o.column,a.lineNumber,a.column)}}getViewLineNumberOfModelPosition(e,i){let o=e-1;if(this.modelLineProjections[o].isVisible()){const c=1+this.projectedModelLineLineCounts.getPrefixSum(o);return this.modelLineProjections[o].getViewLineNumberOfModelPosition(c,i)}for(;o>0&&!this.modelLineProjections[o].isVisible();)o--;if(o===0&&!this.modelLineProjections[o].isVisible())return 1;const a=1+this.projectedModelLineLineCounts.getPrefixSum(o);return this.modelLineProjections[o].getViewLineNumberOfModelPosition(a,this.model.getLineMaxColumn(o+1))}getDecorationsInRange(e,i,o){const a=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),c=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(c.lineNumber-a.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Range$2(a.lineNumber,1,c.lineNumber,c.column),i,o);let d=[];const _=a.lineNumber-1,b=c.lineNumber-1;let k=null;for(let tt=_;tt<=b;tt++)if(this.modelLineProjections[tt].isVisible())k===null&&(k=new Position$1(tt+1,tt===_?a.column:1));else if(k!==null){const st=this.model.getLineMaxColumn(tt);d=d.concat(this.model.getDecorationsInRange(new Range$2(k.lineNumber,k.column,tt,st),i,o)),k=null}k!==null&&(d=d.concat(this.model.getDecorationsInRange(new Range$2(k.lineNumber,k.column,c.lineNumber,c.column),i,o)),k=null),d.sort((tt,it)=>{const st=Range$2.compareRangesUsingStarts(tt.range,it.range);return st===0?tt.id<it.id?-1:tt.id>it.id?1:0:st});const j=[];let _e=0,et=null;for(const tt of d){const it=tt.id;et!==it&&(et=it,j[_e++]=tt)}return j}getInjectedTextAt(e){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].getInjectedTextAt(i.modelLineWrappedLineIdx,e.column)}normalizePosition(e,i){const o=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[o.modelLineNumber-1].normalizePosition(o.modelLineWrappedLineIdx,e,i)}getLineIndentColumn(e){const i=this.getViewLineInfo(e);return i.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(i.modelLineNumber):0}}function normalizeLineRanges(s){if(s.length===0)return[];const e=s.slice();e.sort(Range$2.compareRangesUsingStarts);const i=[];let o=e[0].startLineNumber,a=e[0].endLineNumber;for(let c=1,d=e.length;c<d;c++){const _=e[c];_.startLineNumber>a+1?(i.push(new Range$2(o,1,a,1)),o=_.startLineNumber,a=_.endLineNumber):_.endLineNumber>a&&(a=_.endLineNumber)}return i.push(new Range$2(o,1,a,1)),i}class ViewLineInfo{constructor(e,i){this.modelLineNumber=e,this.modelLineWrappedLineIdx=i}}class ViewLineInfoGroupedByModelRange{constructor(e,i){this.modelRange=e,this.viewLines=i}}class CoordinatesConverter{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,i){return this._lines.validateViewPosition(e.lineNumber,e.column,i)}validateViewRange(e,i){return this._lines.validateViewRange(e,i)}convertModelPositionToViewPosition(e,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,i)}convertModelRangeToViewRange(e,i){return this._lines.convertModelRangeToViewRange(e,i)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,i){return this._lines.getViewLineNumberOfModelPosition(e,i)}}class ViewModelLinesFromModelAsIs{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new IdentityCoordinatesConverter(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,i,o,a){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(i,o,a)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,i,o){return new ViewLinesDeletedEvent(i,o)}onModelLinesInserted(e,i,o,a){return new ViewLinesInsertedEvent(i,o)}onModelLineChanged(e,i,o){return[!1,new ViewLinesChangedEvent(i,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,i,o){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,i,o){return new Array(i-e+1).fill([])}getViewLinesIndentGuides(e,i){const o=i-e+1,a=new Array(o);for(let c=0;c<o;c++)a[c]=0;return a}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const i=this.model.tokenization.getLineTokens(e),o=i.getLineContent();return new ViewLineData(o,!1,1,o.length+1,0,i.inflate(),null)}getViewLinesData(e,i,o){const a=this.model.getLineCount();e=Math.min(Math.max(1,e),a),i=Math.min(Math.max(1,i),a);const c=[];for(let d=e;d<=i;d++){const _=d-e;c[_]=o[_]?this.getViewLineData(d):null}return c}getDecorationsInRange(e,i,o){return this.model.getDecorationsInRange(e,i,o)}normalizePosition(e,i){return this.model.normalizePosition(e,i)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class IdentityCoordinatesConverter{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,i){return this._validPosition(i)}validateViewRange(e,i){return this._validRange(i)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const i=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>i)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,i){return e}}class ViewModel extends Disposable{constructor(e,i,o,a,c,d,_,b){if(super(),this.languageConfigurationService=_,this._themeService=b,this._editorId=e,this._configuration=i,this.model=o,this._eventDispatcher=new ViewModelEventDispatcher,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._tokenizeViewportSoon=this._register(new RunOnceScheduler(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new RunOnceScheduler(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=ViewportStart.create(this.model),this.model.isTooLargeForTokenization())this._lines=new ViewModelLinesFromModelAsIs(this.model);else{const k=this._configuration.options,j=k.get(46),_e=k.get(127),et=k.get(134),tt=k.get(126);this._lines=new ViewModelLinesFromProjectedModel(this._editorId,this.model,a,c,j,this.model.getOptions().tabSize,_e,et.wrappingColumn,tt)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new CursorsController(o,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new ViewLayout(this._configuration,this.getLineCount(),d)),this._register(this.viewLayout.onDidScroll(k=>{k.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),k.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ViewScrollChangedEvent(k)),this._eventDispatcher.emitOutgoingEvent(new ScrollChangedEvent(k.oldScrollWidth,k.oldScrollLeft,k.oldScrollHeight,k.oldScrollTop,k.scrollWidth,k.scrollLeft,k.scrollHeight,k.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(k=>{this._eventDispatcher.emitOutgoingEvent(k)})),this._decorations=new ViewModelDecorations(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(k=>{try{const j=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(j,k)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(MinimapTokensColorTracker.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new ViewTokensColorsChangedEvent)})),this._register(this._themeService.onDidColorThemeChange(k=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new ViewThemeChangedEvent(k))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),i=new Range$2(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),o=this._toModelVisibleRanges(i);for(const a of o)this.model.tokenization.tokenizeViewport(a.startLineNumber,a.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new ViewFocusChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new FocusChangedEvent(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionStartEvent)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new ViewCompositionEndEvent)}_onConfigurationChanged(e,i){let o=null;if(this._viewportStart.isValid){const j=new Position$1(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber));o=this.coordinatesConverter.convertViewPositionToModelPosition(j)}let a=!1;const c=this._configuration.options,d=c.get(46),_=c.get(127),b=c.get(134),k=c.get(126);if(this._lines.setWrappingSettings(d,_,b.wrappingColumn,k)&&(e.emitViewEvent(new ViewFlushedEvent),e.emitViewEvent(new ViewLineMappingChangedEvent),e.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(a=!0),this._updateConfigurationViewLineCount.schedule()),i.hasChanged(83)&&(this._decorations.reset(),e.emitViewEvent(new ViewDecorationsChangedEvent(null))),e.emitViewEvent(new ViewConfigurationChangedEvent(i)),this.viewLayout.onConfigurationChanged(i),a&&o){const j=this.coordinatesConverter.convertModelPositionToViewPosition(o),_e=this.viewLayout.getVerticalOffsetForLineNumber(j.lineNumber);this.viewLayout.setScrollPosition({scrollTop:_e+this._viewportStart.startLineDelta},1)}CursorConfiguration.shouldRecreate(i)&&(this.cursorConfig=new CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const o=this._eventDispatcher.beginEmitViewEvents();let a=!1,c=!1;const d=e instanceof InternalModelContentChangeEvent?e.rawContentChangedEvent.changes:e.changes,_=e instanceof InternalModelContentChangeEvent?e.rawContentChangedEvent.versionId:null,b=this._lines.createLineBreaksComputer();for(const _e of d)switch(_e.changeType){case 4:{for(let et=0;et<_e.detail.length;et++){const tt=_e.detail[et];let it=_e.injectedTexts[et];it&&(it=it.filter(st=>!st.ownerId||st.ownerId===this._editorId)),b.addRequest(tt,it,null)}break}case 2:{let et=null;_e.injectedText&&(et=_e.injectedText.filter(tt=>!tt.ownerId||tt.ownerId===this._editorId)),b.addRequest(_e.detail,et,null);break}}const k=b.finalize(),j=new ArrayQueue(k);for(const _e of d)switch(_e.changeType){case 1:{this._lines.onModelFlushed(),o.emitViewEvent(new ViewFlushedEvent),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),a=!0;break}case 3:{const et=this._lines.onModelLinesDeleted(_,_e.fromLineNumber,_e.toLineNumber);et!==null&&(o.emitViewEvent(et),this.viewLayout.onLinesDeleted(et.fromLineNumber,et.toLineNumber)),a=!0;break}case 4:{const et=j.takeCount(_e.detail.length),tt=this._lines.onModelLinesInserted(_,_e.fromLineNumber,_e.toLineNumber,et);tt!==null&&(o.emitViewEvent(tt),this.viewLayout.onLinesInserted(tt.fromLineNumber,tt.toLineNumber)),a=!0;break}case 2:{const et=j.dequeue(),[tt,it,st,ot]=this._lines.onModelLineChanged(_,_e.lineNumber,et);c=tt,it&&o.emitViewEvent(it),st&&(o.emitViewEvent(st),this.viewLayout.onLinesInserted(st.fromLineNumber,st.toLineNumber)),ot&&(o.emitViewEvent(ot),this.viewLayout.onLinesDeleted(ot.fromLineNumber,ot.toLineNumber));break}case 5:break}_!==null&&this._lines.acceptVersionId(_),this.viewLayout.onHeightMaybeChanged(),!a&&c&&(o.emitViewEvent(new ViewLineMappingChangedEvent),o.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const i=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&i){const o=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(o){const a=this.coordinatesConverter.convertModelPositionToViewPosition(o.getStartPosition()),c=this.viewLayout.getVerticalOffsetForLineNumber(a.lineNumber);this.viewLayout.setScrollPosition({scrollTop:c+this._viewportStart.startLineDelta},1)}}try{const o=this._eventDispatcher.beginEmitViewEvents();e instanceof InternalModelContentChangeEvent&&o.emitOutgoingEvent(new ModelContentChangedEvent(e.contentChangedEvent)),this._cursor.onModelContentChanged(o,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeTokens(e=>{const i=[];for(let o=0,a=e.ranges.length;o<a;o++){const c=e.ranges[o],d=this.coordinatesConverter.convertModelPositionToViewPosition(new Position$1(c.fromLineNumber,1)).lineNumber,_=this.coordinatesConverter.convertModelPositionToViewPosition(new Position$1(c.toLineNumber,this.model.getLineMaxColumn(c.toLineNumber))).lineNumber;i[o]={fromLineNumber:d,toLineNumber:_}}this._eventDispatcher.emitSingleViewEvent(new ViewTokensChangedEvent(i)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitOutgoingEvent(new ModelTokensChangedEvent(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new ViewLanguageConfigurationEvent),this.cursorConfig=new CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelLanguageConfigurationChangedEvent(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelLanguageChangedEvent(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const i=this._eventDispatcher.beginEmitViewEvents();i.emitViewEvent(new ViewFlushedEvent),i.emitViewEvent(new ViewLineMappingChangedEvent),i.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new ModelOptionsChangedEvent(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new ViewDecorationsChangedEvent(e)),this._eventDispatcher.emitOutgoingEvent(new ModelDecorationsChangedEvent(e))}))}setHiddenAreas(e){let i=!1;try{const o=this._eventDispatcher.beginEmitViewEvents();i=this._lines.setHiddenAreas(e),i&&(o.emitViewEvent(new ViewFlushedEvent),o.emitViewEvent(new ViewLineMappingChangedEvent),o.emitViewEvent(new ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(o),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),i&&this._eventDispatcher.emitOutgoingEvent(new HiddenAreasChangedEvent)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(133),i=this._configuration.options.get(61),o=Math.max(20,Math.round(e.height/i)),a=this.viewLayout.getLinesViewportData(),c=Math.max(1,a.completelyVisibleStartLineNumber-o),d=Math.min(this.getLineCount(),a.completelyVisibleEndLineNumber+o);return this._toModelVisibleRanges(new Range$2(c,this.getLineMinColumn(c),d,this.getLineMaxColumn(d)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const i=this.coordinatesConverter.convertViewRangeToModelRange(e),o=this._lines.getHiddenAreas();if(o.length===0)return[i];const a=[];let c=0,d=i.startLineNumber,_=i.startColumn;const b=i.endLineNumber,k=i.endColumn;for(let j=0,_e=o.length;j<_e;j++){const et=o[j].startLineNumber,tt=o[j].endLineNumber;tt<d||et>b||(d<et&&(a[c++]=new Range$2(d,_,et-1,this.model.getLineMaxColumn(et-1))),d=tt+1,_=1)}return(d<b||d===b&&_<k)&&(a[c++]=new Range$2(d,_,b,k)),a}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),i=e.completelyVisibleStartLineNumber,o=e.completelyVisibleEndLineNumber;return new Range$2(i,this.getLineMinColumn(i),o,this.getLineMaxColumn(o))}getCompletelyVisibleViewRangeAtScrollTop(e){const i=this.viewLayout.getLinesViewportDataAtScrollTop(e),o=i.completelyVisibleStartLineNumber,a=i.completelyVisibleEndLineNumber;return new Range$2(o,this.getLineMinColumn(o),a,this.getLineMaxColumn(a))}saveState(){const e=this.viewLayout.saveState(),i=e.scrollTop,o=this.viewLayout.getLineNumberAtVerticalOffset(i),a=this.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(o,this.getLineMinColumn(o))),c=this.viewLayout.getVerticalOffsetForLineNumber(o)-i;return{scrollLeft:e.scrollLeft,firstPosition:a,firstPositionDeltaTop:c}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const i=this.model.validatePosition(e.firstPosition),o=this.coordinatesConverter.convertModelPositionToViewPosition(i),a=this.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:a}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,i,o){this._viewportStart.update(this,e)}getActiveIndentGuide(e,i,o){return this._lines.getActiveIndentGuide(e,i,o)}getLinesIndentGuides(e,i){return this._lines.getViewLinesIndentGuides(e,i)}getBracketGuidesInRangeByLine(e,i,o,a){return this._lines.getViewLinesBracketGuides(e,i,o,a)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const i=firstNonWhitespaceIndex(this.getLineContent(e));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(e){const i=lastNonWhitespaceIndex(this.getLineContent(e));return i===-1?0:i+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,i){const a=this._decorations.getDecorationsViewportData(e).inlineDecorations[i-e.startLineNumber];return this._getViewLineRenderingData(i,a)}getViewLineRenderingData(e){const i=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,i)}_getViewLineRenderingData(e,i){const o=this.model.mightContainRTL(),a=this.model.mightContainNonBasicASCII(),c=this.getTabSize(),d=this._lines.getViewLineData(e);return d.inlineDecorations&&(i=[...i,...d.inlineDecorations.map(_=>_.toInlineDecoration(e))]),new ViewLineRenderingData(d.minColumn,d.maxColumn,d.content,d.continuesWithWrappedLine,o,a,d.tokens,i,c,d.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,i,o){const a=this._lines.getViewLinesData(e,i,o);return new MinimapLinesRenderingData(this.getTabSize(),a)}getAllOverviewRulerDecorations(e){const i=this.model.getOverviewRulerDecorations(this._editorId,filterValidationDecorations(this._configuration.options)),o=new OverviewRulerDecorations;for(const a of i){const c=a.options,d=c.overviewRuler;if(!d)continue;const _=d.position;if(_===0)continue;const b=d.getColor(e.value),k=this.coordinatesConverter.getViewLineNumberOfModelPosition(a.range.startLineNumber,a.range.startColumn),j=this.coordinatesConverter.getViewLineNumberOfModelPosition(a.range.endLineNumber,a.range.endColumn);o.accept(b,c.zIndex,k,j,_)}return o.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const i of e){const o=i.options.overviewRuler;o&&o.invalidateCachedColor();const a=i.options.minimap;a&&a.invalidateCachedColor()}}getValueInRange(e,i){const o=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(o,i)}deduceModelPositionRelativeToViewPosition(e,i,o){const a=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(i<0?i-=o:i+=o);const d=this.model.getOffsetAt(a)+i;return this.model.getPositionAt(d)}getPlainTextToCopy(e,i,o){const a=o?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Range$2.compareRangesUsingStarts);let c=!1,d=!1;for(const b of e)b.isEmpty()?c=!0:d=!0;if(!d){if(!i)return"";const b=e.map(j=>j.startLineNumber);let k="";for(let j=0;j<b.length;j++)j>0&&b[j-1]===b[j]||(k+=this.model.getLineContent(b[j])+a);return k}if(c&&i){const b=[];let k=0;for(const j of e){const _e=j.startLineNumber;j.isEmpty()?_e!==k&&b.push(this.model.getLineContent(_e)):b.push(this.model.getValueInRange(j,o?2:0)),k=_e}return b.length===1?b[0]:b}const _=[];for(const b of e)b.isEmpty()||_.push(this.model.getValueInRange(b,o?2:0));return _.length===1?_[0]:_}getRichTextToCopy(e,i){const o=this.model.getLanguageId();if(o===PLAINTEXT_LANGUAGE_ID||e.length!==1)return null;let a=e[0];if(a.isEmpty()){if(!i)return null;const j=a.startLineNumber;a=new Range$2(j,this.model.getLineMinColumn(j),j,this.model.getLineMaxColumn(j))}const c=this._configuration.options.get(46),d=this._getColorMap(),b=/[:;\\\/<>]/.test(c.fontFamily)||c.fontFamily===EDITOR_FONT_DEFAULTS.fontFamily;let k;return b?k=EDITOR_FONT_DEFAULTS.fontFamily:(k=c.fontFamily,k=k.replace(/"/g,"'"),/[,']/.test(k)||/[+ ]/.test(k)&&(k=`'${k}'`),k=`${k}, ${EDITOR_FONT_DEFAULTS.fontFamily}`),{mode:o,html:`<div style="color: ${d[1]};background-color: ${d[2]};font-family: ${k};font-weight: ${c.fontWeight};font-size: ${c.fontSize}px;line-height: ${c.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(a,d)+"</div>"}}_getHTMLToCopy(e,i){const o=e.startLineNumber,a=e.startColumn,c=e.endLineNumber,d=e.endColumn,_=this.getTabSize();let b="";for(let k=o;k<=c;k++){const j=this.model.tokenization.getLineTokens(k),_e=j.getLineContent(),et=k===o?a-1:0,tt=k===c?d-1:_e.length;_e===""?b+="<br>":b+=tokenizeLineToHTML(_e,j.inflate(),i,et,tt,_,isWindows)}return b}_getColorMap(){const e=TokenizationRegistry.getColorMap(),i=["#000000"];if(e)for(let o=1,a=e.length;o<a;o++)i[o]=Color.Format.CSS.formatHex(e[o]);return i}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,i,o){return this._withViewEventsCollector(a=>this._cursor.setStates(a,e,i,o))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,i,o=0){this._withViewEventsCollector(a=>this._cursor.setSelections(a,e,i,o))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(i=>this._cursor.restoreState(i,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new ReadOnlyEditAttemptEvent);return}this._withViewEventsCollector(e)}executeEdits(e,i,o){this._executeCursorEdit(a=>this._cursor.executeEdits(a,e,i,o))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(i=>this._cursor.endComposition(i,e))}type(e,i){this._executeCursorEdit(o=>this._cursor.type(o,e,i))}compositionType(e,i,o,a,c){this._executeCursorEdit(d=>this._cursor.compositionType(d,e,i,o,a,c))}paste(e,i,o,a){this._executeCursorEdit(c=>this._cursor.paste(c,e,i,o,a))}cut(e){this._executeCursorEdit(i=>this._cursor.cut(i,e))}executeCommand(e,i){this._executeCursorEdit(o=>this._cursor.executeCommand(o,e,i))}executeCommands(e,i){this._executeCursorEdit(o=>this._cursor.executeCommands(o,e,i))}revealPrimaryCursor(e,i,o=!1){this._withViewEventsCollector(a=>this._cursor.revealPrimary(a,e,o,0,i,0))}revealTopMostCursor(e){const i=this._cursor.getTopMostViewPosition(),o=new Range$2(i.lineNumber,i.column,i.lineNumber,i.column);this._withViewEventsCollector(a=>a.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,o,null,0,!0,0)))}revealBottomMostCursor(e){const i=this._cursor.getBottomMostViewPosition(),o=new Range$2(i.lineNumber,i.column,i.lineNumber,i.column);this._withViewEventsCollector(a=>a.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,o,null,0,!0,0)))}revealRange(e,i,o,a,c){this._withViewEventsCollector(d=>d.emitViewEvent(new ViewRevealRangeRequestEvent(e,!1,o,null,a,i,c)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new ViewZonesChangedEvent$1),this._eventDispatcher.emitOutgoingEvent(new ViewZonesChangedEvent))}_withViewEventsCollector(e){try{const i=this._eventDispatcher.beginEmitViewEvents();return e(i)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,i){return this._lines.normalizePosition(e,i)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class ViewportStart{constructor(e,i,o,a,c){this._model=e,this._viewLineNumber=i,this._isValid=o,this._modelTrackedRange=a,this._startLineDelta=c}static create(e){const i=e._setTrackedRange(null,new Range$2(1,1,1,1),1);return new ViewportStart(e,1,!1,i,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,i){const o=e.coordinatesConverter.convertViewPositionToModelPosition(new Position$1(i,e.getLineMinColumn(i))),a=e.model._setTrackedRange(this._modelTrackedRange,new Range$2(o.lineNumber,o.column,o.lineNumber,o.column),1),c=e.viewLayout.getVerticalOffsetForLineNumber(i),d=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=i,this._isValid=!0,this._modelTrackedRange=a,this._startLineDelta=d-c}invalidate(){this._isValid=!1}}class OverviewRulerDecorations{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,i,o,a,c){const d=this._asMap[e];if(d){const _=d.data,b=_[_.length-3],k=_[_.length-1];if(b===c&&k+1>=o){a>k&&(_[_.length-1]=a);return}_.push(c,o,a)}else{const _=new OverviewRulerDecorationsGroup(e,i,[c,o,a]);this._asMap[e]=_,this.asArray.push(_)}}}class ServiceCollection{constructor(...e){this._entries=new Map;for(const[i,o]of e)this.set(i,o)}set(e,i){const o=this._entries.get(e);return this._entries.set(e,i),o}get(e){return this._entries.get(e)}}var Severity;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(Severity||(Severity={}));(function(s){const e="error",i="warning",o="warn",a="info",c="ignore";function d(b){return b?equalsIgnoreCase(e,b)?s.Error:equalsIgnoreCase(i,b)||equalsIgnoreCase(o,b)?s.Warning:equalsIgnoreCase(a,b)?s.Info:s.Ignore:s.Ignore}s.fromValue=d;function _(b){switch(b){case s.Error:return e;case s.Warning:return i;case s.Info:return a;default:return c}}s.toString=_})(Severity||(Severity={}));const Severity$1=Severity,INotificationService=createDecorator("notificationService");class NoOpNotification{}class ModelLineProjectionData{constructor(e,i,o,a,c){this.injectionOffsets=e,this.injectionOptions=i,this.breakOffsets=o,this.breakOffsetsVisibleColumn=a,this.wrappedTextIndentLength=c}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const i=e>0?this.breakOffsets[e-1]:0;let a=this.breakOffsets[e]-i;return e>0&&(a+=this.wrappedTextIndentLength),a}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,i){e>0&&(i=Math.max(0,i-this.wrappedTextIndentLength));let a=e===0?i:this.breakOffsets[e-1]+i;if(this.injectionOffsets!==null)for(let c=0;c<this.injectionOffsets.length&&a>this.injectionOffsets[c];c++)a<this.injectionOffsets[c]+this.injectionOptions[c].content.length?a=this.injectionOffsets[c]:a-=this.injectionOptions[c].content.length;return a}translateToOutputPosition(e,i=2){let o=e;if(this.injectionOffsets!==null)for(let a=0;a<this.injectionOffsets.length&&!(e<this.injectionOffsets[a]||i!==1&&e===this.injectionOffsets[a]);a++)o+=this.injectionOptions[a].content.length;return this.offsetInInputWithInjectionsToOutputPosition(o,i)}offsetInInputWithInjectionsToOutputPosition(e,i=2){let o=0,a=this.breakOffsets.length-1,c=0,d=0;for(;o<=a;){c=o+(a-o)/2|0;const b=this.breakOffsets[c];if(d=c>0?this.breakOffsets[c-1]:0,i===0)if(e<=d)a=c-1;else if(e>b)o=c+1;else break;else if(e<d)a=c-1;else if(e>=b)o=c+1;else break}let _=e-d;return c>0&&(_+=this.wrappedTextIndentLength),new OutputPosition(c,_)}normalizeOutputPosition(e,i,o){if(this.injectionOffsets!==null){const a=this.outputPositionToOffsetInInputWithInjections(e,i),c=this.normalizeOffsetInInputWithInjectionsAroundInjections(a,o);if(c!==a)return this.offsetInInputWithInjectionsToOutputPosition(c,o)}if(o===0){if(e>0&&i===this.getMinOutputOffset(e))return new OutputPosition(e-1,this.getMaxOutputOffset(e-1))}else if(o===1){const a=this.getOutputLineCount()-1;if(e<a&&i===this.getMaxOutputOffset(e))return new OutputPosition(e+1,this.getMinOutputOffset(e+1))}return new OutputPosition(e,i)}outputPositionToOffsetInInputWithInjections(e,i){return e>0&&(i=Math.max(0,i-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+i}normalizeOffsetInInputWithInjectionsAroundInjections(e,i){const o=this.getInjectedTextAtOffset(e);if(!o)return e;if(i===2){if(e===o.offsetInInputWithInjections+o.length&&hasRightCursorStop(this.injectionOptions[o.injectedTextIndex].cursorStops))return o.offsetInInputWithInjections+o.length;{let a=o.offsetInInputWithInjections;if(hasLeftCursorStop(this.injectionOptions[o.injectedTextIndex].cursorStops))return a;let c=o.injectedTextIndex-1;for(;c>=0&&this.injectionOffsets[c]===this.injectionOffsets[o.injectedTextIndex]&&!(hasRightCursorStop(this.injectionOptions[c].cursorStops)||(a-=this.injectionOptions[c].content.length,hasLeftCursorStop(this.injectionOptions[c].cursorStops)));)c--;return a}}else if(i===1||i===4){let a=o.offsetInInputWithInjections+o.length,c=o.injectedTextIndex;for(;c+1<this.injectionOffsets.length&&this.injectionOffsets[c+1]===this.injectionOffsets[c];)a+=this.injectionOptions[c+1].content.length,c++;return a}else if(i===0||i===3){let a=o.offsetInInputWithInjections,c=o.injectedTextIndex;for(;c-1>=0&&this.injectionOffsets[c-1]===this.injectionOffsets[c];)a-=this.injectionOptions[c-1].content.length,c--;return a}assertNever()}getInjectedText(e,i){const o=this.outputPositionToOffsetInInputWithInjections(e,i),a=this.getInjectedTextAtOffset(o);return a?{options:this.injectionOptions[a.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const i=this.injectionOffsets,o=this.injectionOptions;if(i!==null){let a=0;for(let c=0;c<i.length;c++){const d=o[c].content.length,_=i[c]+a,b=i[c]+a+d;if(_>e)break;if(e<=b)return{injectedTextIndex:c,offsetInInputWithInjections:_,length:d};a+=d}}}}function hasRightCursorStop(s){return s==null?!0:s===InjectedTextCursorStops.Right||s===InjectedTextCursorStops.Both}function hasLeftCursorStop(s){return s==null?!0:s===InjectedTextCursorStops.Left||s===InjectedTextCursorStops.Both}class OutputPosition{constructor(e,i){this.outputLineIndex=e,this.outputOffset=i}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Position$1(e+this.outputLineIndex,this.outputOffset+1)}}class MonospaceLineBreaksComputerFactory{constructor(e,i){this.classifier=new WrappingCharacterClassifier(e,i)}static create(e){return new MonospaceLineBreaksComputerFactory(e.get(122),e.get(121))}createLineBreaksComputer(e,i,o,a){const c=[],d=[],_=[];return{addRequest:(b,k,j)=>{c.push(b),d.push(k),_.push(j)},finalize:()=>{const b=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,k=[];for(let j=0,_e=c.length;j<_e;j++){const et=d[j],tt=_[j];tt&&!tt.injectionOptions&&!et?k[j]=createLineBreaksFromPreviousLineBreaks(this.classifier,tt,c[j],i,o,b,a):k[j]=createLineBreaks$1(this.classifier,c[j],et,i,o,b,a)}return arrPool1.length=0,arrPool2.length=0,k}}}}class WrappingCharacterClassifier extends CharacterClassifier{constructor(e,i){super(0);for(let o=0;o<e.length;o++)this.set(e.charCodeAt(o),1);for(let o=0;o<i.length;o++)this.set(i.charCodeAt(o),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let arrPool1=[],arrPool2=[];function createLineBreaksFromPreviousLineBreaks(s,e,i,o,a,c,d){if(a===-1)return null;const _=i.length;if(_<=1)return null;const b=e.breakOffsets,k=e.breakOffsetsVisibleColumn,j=computeWrappedTextIndentLength(i,o,a,c,d),_e=a-j,et=arrPool1,tt=arrPool2;let it=0,st=0,ot=0,nt=a;const rt=b.length;let at=0;if(at>=0){let lt=Math.abs(k[at]-nt);for(;at+1<rt;){const gt=Math.abs(k[at+1]-nt);if(gt>=lt)break;lt=gt,at++}}for(;at<rt;){let lt=at<0?0:b[at],gt=at<0?0:k[at];st>lt&&(lt=st,gt=ot);let ht=0,ut=0,ct=0,ft=0;if(gt<=nt){let pt=gt,mt=lt===0?0:i.charCodeAt(lt-1),_t=lt===0?0:s.get(mt),Ct=!0;for(let bt=lt;bt<_;bt++){const yt=bt,wt=i.charCodeAt(bt);let Tt,kt;if(isHighSurrogate(wt)?(bt++,Tt=0,kt=2):(Tt=s.get(wt),kt=computeCharWidth(wt,pt,o,c)),yt>st&&canBreak(mt,_t,wt,Tt)&&(ht=yt,ut=pt),pt+=kt,pt>nt){yt>st?(ct=yt,ft=pt-kt):(ct=bt+1,ft=pt),pt-ut>_e&&(ht=0),Ct=!1;break}mt=wt,_t=Tt}if(Ct){it>0&&(et[it]=b[b.length-1],tt[it]=k[b.length-1],it++);break}}if(ht===0){let pt=gt,mt=i.charCodeAt(lt),_t=s.get(mt),Ct=!1;for(let bt=lt-1;bt>=st;bt--){const yt=bt+1,wt=i.charCodeAt(bt);if(wt===9){Ct=!0;break}let Tt,kt;if(isLowSurrogate(wt)?(bt--,Tt=0,kt=2):(Tt=s.get(wt),kt=isFullWidthCharacter(wt)?c:1),pt<=nt){if(ct===0&&(ct=yt,ft=pt),pt<=nt-_e)break;if(canBreak(wt,Tt,mt,_t)){ht=yt,ut=pt;break}}pt-=kt,mt=wt,_t=Tt}if(ht!==0){const bt=_e-(ft-ut);if(bt<=o){const yt=i.charCodeAt(ct);let wt;isHighSurrogate(yt)?wt=2:wt=computeCharWidth(yt,ft,o,c),bt-wt<0&&(ht=0)}}if(Ct){at--;continue}}if(ht===0&&(ht=ct,ut=ft),ht<=st){const pt=i.charCodeAt(st);isHighSurrogate(pt)?(ht=st+2,ut=ot+2):(ht=st+1,ut=ot+computeCharWidth(pt,ot,o,c))}for(st=ht,et[it]=ht,ot=ut,tt[it]=ut,it++,nt=ut+_e;at<0||at<rt&&k[at]<ut;)at++;let dt=Math.abs(k[at]-nt);for(;at+1<rt;){const pt=Math.abs(k[at+1]-nt);if(pt>=dt)break;dt=pt,at++}}return it===0?null:(et.length=it,tt.length=it,arrPool1=e.breakOffsets,arrPool2=e.breakOffsetsVisibleColumn,e.breakOffsets=et,e.breakOffsetsVisibleColumn=tt,e.wrappedTextIndentLength=j,e)}function createLineBreaks$1(s,e,i,o,a,c,d){const _=LineInjectedText.applyInjectedText(e,i);let b,k;if(i&&i.length>0?(b=i.map(ut=>ut.options),k=i.map(ut=>ut.column-1)):(b=null,k=null),a===-1)return b?new ModelLineProjectionData(k,b,[_.length],[],0):null;const j=_.length;if(j<=1)return b?new ModelLineProjectionData(k,b,[_.length],[],0):null;const _e=computeWrappedTextIndentLength(_,o,a,c,d),et=a-_e,tt=[],it=[];let st=0,ot=0,nt=0,rt=a,at=_.charCodeAt(0),lt=s.get(at),gt=computeCharWidth(at,0,o,c),ht=1;isHighSurrogate(at)&&(gt+=1,at=_.charCodeAt(1),lt=s.get(at),ht++);for(let ut=ht;ut<j;ut++){const ct=ut,ft=_.charCodeAt(ut);let dt,pt;isHighSurrogate(ft)?(ut++,dt=0,pt=2):(dt=s.get(ft),pt=computeCharWidth(ft,gt,o,c)),canBreak(at,lt,ft,dt)&&(ot=ct,nt=gt),gt+=pt,gt>rt&&((ot===0||gt-nt>et)&&(ot=ct,nt=gt-pt),tt[st]=ot,it[st]=nt,st++,rt=nt+et,ot=0),at=ft,lt=dt}return st===0&&(!i||i.length===0)?null:(tt[st]=j,it[st]=gt,new ModelLineProjectionData(k,b,tt,it,_e))}function computeCharWidth(s,e,i,o){return s===9?i-e%i:isFullWidthCharacter(s)||s<32?o:1}function tabCharacterWidth(s,e){return e-s%e}function canBreak(s,e,i,o){return i!==32&&(e===2&&o!==2||e!==1&&o===1||e===3&&o!==2||o===3&&e!==1)}function computeWrappedTextIndentLength(s,e,i,o,a){let c=0;if(a!==0){const d=firstNonWhitespaceIndex(s);if(d!==-1){for(let b=0;b<d;b++){const k=s.charCodeAt(b)===9?tabCharacterWidth(c,e):1;c+=k}const _=a===3?2:a===2?1:0;for(let b=0;b<_;b++){const k=tabCharacterWidth(c,e);c+=k}c+o>i&&(c=0)}}return c}var _a$4;const ttPolicy$1=(_a$4=window.trustedTypes)===null||_a$4===void 0?void 0:_a$4.createPolicy("domLineBreaksComputer",{createHTML:s=>s});class DOMLineBreaksComputerFactory{static create(){return new DOMLineBreaksComputerFactory}constructor(){}createLineBreaksComputer(e,i,o,a){const c=[],d=[];return{addRequest:(_,b,k)=>{c.push(_),d.push(b)},finalize:()=>createLineBreaks(c,e,i,o,a,d)}}}function createLineBreaks(s,e,i,o,a,c){var d;function _(ct){const ft=c[ct];if(ft){const dt=LineInjectedText.applyInjectedText(s[ct],ft),pt=ft.map(_t=>_t.options),mt=ft.map(_t=>_t.column-1);return new ModelLineProjectionData(mt,pt,[dt.length],[],0)}else return null}if(o===-1){const ct=[];for(let ft=0,dt=s.length;ft<dt;ft++)ct[ft]=_(ft);return ct}const b=Math.round(o*e.typicalHalfwidthCharacterWidth),j=Math.round(i*(a===3?2:a===2?1:0)),_e=Math.ceil(e.spaceWidth*j),et=document.createElement("div");applyFontInfo(et,e);const tt=createStringBuilder(1e4),it=[],st=[],ot=[],nt=[],rt=[];for(let ct=0;ct<s.length;ct++){const ft=LineInjectedText.applyInjectedText(s[ct],c[ct]);let dt=0,pt=0,mt=b;if(a!==0)if(dt=firstNonWhitespaceIndex(ft),dt===-1)dt=0;else{for(let yt=0;yt<dt;yt++){const wt=ft.charCodeAt(yt)===9?i-pt%i:1;pt+=wt}const bt=Math.ceil(e.spaceWidth*pt);bt+e.typicalFullwidthCharacterWidth>b?(dt=0,pt=0):mt=b-bt}const _t=ft.substr(dt),Ct=renderLine(_t,pt,i,mt,tt,_e);it[ct]=dt,st[ct]=pt,ot[ct]=_t,nt[ct]=Ct[0],rt[ct]=Ct[1]}const at=tt.build(),lt=(d=ttPolicy$1==null?void 0:ttPolicy$1.createHTML(at))!==null&&d!==void 0?d:at;et.innerHTML=lt,et.style.position="absolute",et.style.top="10000",et.style.wordWrap="break-word",document.body.appendChild(et);const gt=document.createRange(),ht=Array.prototype.slice.call(et.children,0),ut=[];for(let ct=0;ct<s.length;ct++){const ft=ht[ct],dt=readLineBreaks(gt,ft,ot[ct],nt[ct]);if(dt===null){ut[ct]=_(ct);continue}const pt=it[ct],mt=st[ct]+j,_t=rt[ct],Ct=[];for(let Tt=0,kt=dt.length;Tt<kt;Tt++)Ct[Tt]=_t[dt[Tt]];if(pt!==0)for(let Tt=0,kt=dt.length;Tt<kt;Tt++)dt[Tt]+=pt;let bt,yt;const wt=c[ct];wt?(bt=wt.map(Tt=>Tt.options),yt=wt.map(Tt=>Tt.column-1)):(bt=null,yt=null),ut[ct]=new ModelLineProjectionData(yt,bt,dt,Ct,mt)}return document.body.removeChild(et),ut}function renderLine(s,e,i,o,a,c){if(c!==0){const et=String(c);a.appendASCIIString('<div style="text-indent: -'),a.appendASCIIString(et),a.appendASCIIString("px; padding-left: "),a.appendASCIIString(et),a.appendASCIIString("px; box-sizing: border-box; width:")}else a.appendASCIIString('<div style="width:');a.appendASCIIString(String(o)),a.appendASCIIString('px;">');const d=s.length;let _=e,b=0;const k=[],j=[];let _e=0<d?s.charCodeAt(0):0;a.appendASCIIString("<span>");for(let et=0;et<d;et++){et!==0&&et%16384===0&&a.appendASCIIString("</span><span>"),k[et]=b,j[et]=_;const tt=_e;_e=et+1<d?s.charCodeAt(et+1):0;let it=1,st=1;switch(tt){case 9:it=i-_%i,st=it;for(let ot=1;ot<=it;ot++)ot<it?a.write1(160):a.appendASCII(32);break;case 32:_e===32?a.write1(160):a.appendASCII(32);break;case 60:a.appendASCIIString("&lt;");break;case 62:a.appendASCIIString("&gt;");break;case 38:a.appendASCIIString("&amp;");break;case 0:a.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:a.write1(65533);break;default:isFullWidthCharacter(tt)&&st++,tt<32?a.write1(9216+tt):a.write1(tt)}b+=it,_+=st}return a.appendASCIIString("</span>"),k[s.length]=b,j[s.length]=_,a.appendASCIIString("</div>"),[k,j]}function readLineBreaks(s,e,i,o){if(i.length<=1)return null;const a=Array.prototype.slice.call(e.children,0),c=[];try{discoverBreaks(s,a,o,0,null,i.length-1,null,c)}catch(d){return console.log(d),null}return c.length===0?null:(c.push(i.length),c)}function discoverBreaks(s,e,i,o,a,c,d,_){if(o===c||(a=a||readClientRect(s,e,i[o],i[o+1]),d=d||readClientRect(s,e,i[c],i[c+1]),Math.abs(a[0].top-d[0].top)<=.1))return;if(o+1===c){_.push(c);return}const b=o+(c-o)/2|0,k=readClientRect(s,e,i[b],i[b+1]);discoverBreaks(s,e,i,o,a,b,k,_),discoverBreaks(s,e,i,b,k,c,d,_)}function readClientRect(s,e,i,o){return s.setStart(e[i/16384|0].firstChild,i%16384),s.setEnd(e[o/16384|0].firstChild,o%16384),s.getClientRects()}var __decorate$s=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$n=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$k=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};let EDITOR_ID=0;class ModelData$1{constructor(e,i,o,a,c){this.model=e,this.viewModel=i,this.view=o,this.hasRealView=a,this.listenersToRemove=c}dispose(){dispose(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let CodeEditorWidget=class cn extends Disposable{constructor(e,i,o,a,c,d,_,b,k,j,_e,et){super(),this.languageConfigurationService=_e,this._deliveryQueue=new EventDeliveryQueue,this._onDidDispose=this._register(new Emitter$1),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new BooleanEventEmitter({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new Emitter$1({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();const tt=Object.assign({},i);this._domElement=e,this._overflowWidgetsDomNode=tt.overflowWidgetsDomNode,delete tt.overflowWidgetsDomNode,this._id=++EDITOR_ID,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=o.telemetryData,this._configuration=this._register(this._createConfiguration(o.isSimpleWidget||!1,tt,j)),this._register(this._configuration.onDidChange(ot=>{this._onDidChangeConfiguration.fire(ot);const nt=this._configuration.options;if(ot.hasChanged(133)){const rt=nt.get(133);this._onDidLayoutChange.fire(rt)}})),this._contextKeyService=this._register(_.createScoped(this._domElement)),this._notificationService=k,this._codeEditorService=c,this._commandService=d,this._themeService=b,this._register(new EditorContextKeysManager(this,this._contextKeyService)),this._register(new EditorModeContext(this,this._contextKeyService,et)),this._instantiationService=a.createChild(new ServiceCollection([IContextKeyService,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new CodeEditorWidgetFocusTracker(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let it;Array.isArray(o.contributions)?it=o.contributions:it=EditorExtensionsRegistry.getEditorContributions();for(const ot of it){if(this._contributions[ot.id]){onUnexpectedError(new Error(`Cannot have two contributions with the same id ${ot.id}`));continue}try{const nt=this._instantiationService.createInstance(ot.ctor,this);this._contributions[ot.id]=nt}catch(nt){onUnexpectedError(nt)}}EditorExtensionsRegistry.getEditorActions().forEach(ot=>{if(this._actions[ot.id]){onUnexpectedError(new Error(`Cannot have two actions with the same id ${ot.id}`));return}const nt=new InternalEditorAction(ot.id,ot.label,ot.alias,withNullAsUndefined(ot.precondition),()=>this._instantiationService.invokeFunction(rt=>Promise.resolve(ot.runEditorCommand(rt,this,null))),this._contextKeyService);this._actions[nt.id]=nt});const st=()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled;this._register(new DragAndDropObserver(this._domElement,{onDragEnter:()=>{},onDragOver:ot=>{if(!st())return;const nt=this.getTargetAtClientPoint(ot.clientX,ot.clientY);nt!=null&&nt.position&&this.showDropIndicatorAt(nt.position)},onDrop:ot=>__awaiter$k(this,void 0,void 0,function*(){if(!st()||(this.removeDropIndicator(),!ot.dataTransfer))return;const nt=this.getTargetAtClientPoint(ot.clientX,ot.clientY);nt!=null&&nt.position&&this._onDropIntoEditor.fire({position:nt.position,event:ot})}),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,i,o){return new EditorConfiguration(e,i,this._domElement,o)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return EditorType.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let i=0,o=e.length;i<o;i++){const a=e[i];this._contributions[a].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?WordOperations.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";const i=!!(e&&e.preserveBOM);let o=0;return e&&e.lineEnding&&e.lineEnding===`
`?o=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(o=2),this._modelData.model.getValue(o,i)}setValue(e){!this._modelData||this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const o=this.hasTextFocus(),a=this._detachModel();this._attachModel(i),o&&this.hasModel()&&this.focus();const c={oldModelUrl:a?a.uri:null,newModelUrl:i?i.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(c),this._postDetachModelCleanup(a)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const i=this._decorationTypeSubtypes[e];for(const o in i)this._removeDecorationType(e+"-"+o)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,i,o,a){const c=e.model.validatePosition({lineNumber:i,column:o}),d=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(c);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(d.lineNumber,a)}getTopForLineNumber(e,i=!1){return this._modelData?cn._getVerticalOffsetForPosition(this._modelData,e,1,i):-1}getTopForPosition(e,i){return this._modelData?cn._getVerticalOffsetForPosition(this._modelData,e,i,!1):-1}static _getVerticalOffsetForPosition(e,i,o,a=!1){const c=e.model.validatePosition({lineNumber:i,column:o}),d=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(c);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(d.lineNumber,a)}getBottomForLineNumber(e,i=!1){return this._modelData?cn._getVerticalOffsetAfterPosition(this._modelData,e,1,i):-1}setHiddenAreas(e){var i;(i=this._modelData)===null||i===void 0||i.viewModel.setHiddenAreas(e.map(o=>Range$2.lift(o)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const i=this._modelData.model.validatePosition(e),o=this._modelData.model.getOptions().tabSize;return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,o)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,i="api"){if(!!this._modelData){if(!Position$1.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,i,o,a){if(!this._modelData)return;if(!Range$2.isIRange(e))throw new Error("Invalid arguments");const c=this._modelData.model.validateRange(e),d=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(c);this._modelData.viewModel.revealRange("api",o,d,i,a)}revealLine(e,i=0){this._revealLine(e,0,i)}revealLineInCenter(e,i=0){this._revealLine(e,1,i)}revealLineInCenterIfOutsideViewport(e,i=0){this._revealLine(e,2,i)}revealLineNearTop(e,i=0){this._revealLine(e,5,i)}_revealLine(e,i,o){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Range$2(e,1,e,1),i,!1,o)}revealPosition(e,i=0){this._revealPosition(e,0,!0,i)}revealPositionInCenter(e,i=0){this._revealPosition(e,1,!0,i)}revealPositionInCenterIfOutsideViewport(e,i=0){this._revealPosition(e,2,!0,i)}revealPositionNearTop(e,i=0){this._revealPosition(e,5,!0,i)}_revealPosition(e,i,o,a){if(!Position$1.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Range$2(e.lineNumber,e.column,e.lineNumber,e.column),i,o,a)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,i="api"){const o=Selection$1.isISelection(e),a=Range$2.isIRange(e);if(!o&&!a)throw new Error("Invalid arguments");if(o)this._setSelectionImpl(e,i);else if(a){const c={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(c,i)}}_setSelectionImpl(e,i){if(!this._modelData)return;const o=new Selection$1(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[o])}revealLines(e,i,o=0){this._revealLines(e,i,0,o)}revealLinesInCenter(e,i,o=0){this._revealLines(e,i,1,o)}revealLinesInCenterIfOutsideViewport(e,i,o=0){this._revealLines(e,i,2,o)}revealLinesNearTop(e,i,o=0){this._revealLines(e,i,5,o)}_revealLines(e,i,o,a){if(typeof e!="number"||typeof i!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Range$2(e,1,i,1),o,!1,a)}revealRange(e,i=0,o=!1,a=!0){this._revealRange(e,o?1:0,a,i)}revealRangeInCenter(e,i=0){this._revealRange(e,1,!0,i)}revealRangeInCenterIfOutsideViewport(e,i=0){this._revealRange(e,2,!0,i)}revealRangeNearTop(e,i=0){this._revealRange(e,5,!0,i)}revealRangeNearTopIfOutsideViewport(e,i=0){this._revealRange(e,6,!0,i)}revealRangeAtTop(e,i=0){this._revealRange(e,3,!0,i)}_revealRange(e,i,o,a){if(!Range$2.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Range$2.lift(e),i,o,a)}setSelections(e,i="api",o=0){if(!!this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let a=0,c=e.length;a<c;a++)if(!Selection$1.isISelection(e[a]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,o)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,i=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}setScrollTop(e,i=1){if(!!this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}setScrollPosition(e,i=1){!this._modelData||this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}saveViewState(){if(!this._modelData)return null;const e={},i=Object.keys(this._contributions);for(const c of i){const d=this._contributions[c];typeof d.saveViewState=="function"&&(e[c]=d.saveViewState())}const o=this._modelData.viewModel.saveCursorState(),a=this._modelData.viewModel.saveState();return{cursorState:o,viewState:a,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const i=e;if(i&&i.cursorState&&i.viewState){const o=i.cursorState;Array.isArray(o)?o.length>0&&this._modelData.viewModel.restoreCursorState(o):this._modelData.viewModel.restoreCursorState([o]);const a=i.contributionsState||{},c=Object.keys(this._contributions);for(let _=0,b=c.length;_<b;_++){const k=c[_],j=this._contributions[k];typeof j.restoreViewState=="function"&&j.restoreViewState(a[k])}const d=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(d)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],i=Object.keys(this._actions);for(let o=0,a=i.length;o<a;o++){const c=i[o];e.push(this._actions[c])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(i=>i.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,i,o){switch(o=o||{},i){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const c=o;this._type(e,c.text||"");return}case"replacePreviousChar":{const c=o;this._compositionType(e,c.text||"",c.replaceCharCnt||0,0,0);return}case"compositionType":{const c=o;this._compositionType(e,c.text||"",c.replacePrevCharCnt||0,c.replaceNextCharCnt||0,c.positionDelta||0);return}case"paste":{const c=o;this._paste(e,c.text||"",c.pasteOnNewLine||!1,c.multicursorText||null,c.mode||null);return}case"cut":this._cut(e);return}const a=this.getAction(i);if(a){Promise.resolve(a.run()).then(void 0,onUnexpectedError);return}!this._modelData||this._triggerEditorCommand(e,i,o)||this._triggerCommand(i,o)}_triggerCommand(e,i){this._commandService.executeCommand(e,i)}_startComposition(){!this._modelData||(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){!this._modelData||(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,i){!this._modelData||i.length===0||(e==="keyboard"&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),e==="keyboard"&&this._onDidType.fire(i))}_compositionType(e,i,o,a,c){!this._modelData||this._modelData.viewModel.compositionType(i,o,a,c,e)}_paste(e,i,o,a,c){if(!this._modelData||i.length===0)return;const d=this._modelData.viewModel,_=d.getSelection().getStartPosition();d.paste(i,o,a,e);const b=d.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new Range$2(_.lineNumber,_.column,b.lineNumber,b.column),languageId:c})}_cut(e){!this._modelData||this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,i,o){const a=EditorExtensionsRegistry.getEditorCommand(i);return a?(o=o||{},o.source=e,this._instantiationService.invokeFunction(c=>{Promise.resolve(a.runEditorCommand(c,this,o)).then(void 0,onUnexpectedError)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(83)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,i,o){if(!this._modelData||this._configuration.options.get(83))return!1;let a;return o?Array.isArray(o)?a=()=>o:a=o:a=()=>null,this._modelData.viewModel.executeEdits(e,i,a),!0}executeCommand(e,i){!this._modelData||this._modelData.viewModel.executeCommand(i,e)}executeCommands(e,i){!this._modelData||this._modelData.viewModel.executeCommands(i,e)}createDecorationsCollection(e){return new EditorDecorationsCollection(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,filterValidationDecorations(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,filterValidationDecorations(this._configuration.options)):null}deltaDecorations(e,i){return this._modelData?e.length===0&&i.length===0?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(i=>{i.deltaDecorations(e,[])})}removeDecorationsByType(e){const i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}layoutContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const o=this._contentWidgets[i];o.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(o)}}removeContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const o=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(o)}}addOverlayWidget(e){const i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}layoutOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const o=this._overlayWidgets[i];o.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(o)}}removeOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const o=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(o)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,i){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,i)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(e),o=this._configuration.options,a=o.get(133),c=cn._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),d=this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+a.glyphMarginWidth+a.lineNumbersWidth+a.decorationsWidth-this.getScrollLeft();return{top:c,left:d,height:o.get(61)}}getOffsetForColumn(e,i){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,i)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){applyFontInfo(e,this._configuration.options.get(46))}setBanner(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const o=new ViewModel(this._id,this._configuration,e,DOMLineBreaksComputerFactory.create(),MonospaceLineBreaksComputerFactory.create(this._configuration.options),d=>scheduleAtNextAnimationFrame(d),this.languageConfigurationService,this._themeService);i.push(e.onWillDispose(()=>this.setModel(null))),i.push(o.onEvent(d=>{switch(d.kind){case 0:this._onDidContentSizeChange.fire(d);break;case 1:this._editorTextFocus.setValue(d.hasFocus);break;case 2:this._onDidScrollChange.fire(d);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{d.reachedMaxCursorCount&&this._notificationService.warn(localize("cursors.maximum","The number of cursors has been limited to {0}.",CursorsController.MAX_CURSOR_COUNT));const _=[];for(let j=0,_e=d.selections.length;j<_e;j++)_[j]=d.selections[j].getPosition();const b={position:_[0],secondaryPositions:_.slice(1),reason:d.reason,source:d.source};this._onDidChangeCursorPosition.fire(b);const k={selection:d.selections[0],secondarySelections:d.selections.slice(1),modelVersionId:d.modelVersionId,oldSelections:d.oldSelections,oldModelVersionId:d.oldModelVersionId,source:d.source,reason:d.reason};this._onDidChangeCursorSelection.fire(k);break}case 7:this._onDidChangeModelDecorations.fire(d.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(d.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(d.event);break;case 10:this._onDidChangeModelContent.fire(d.event);break;case 11:this._onDidChangeModelOptions.fire(d.event);break;case 12:this._onDidChangeModelTokens.fire(d.event);break}}));const[a,c]=this._createView(o);if(c){this._domElement.appendChild(a.domNode.domNode);let d=Object.keys(this._contentWidgets);for(let _=0,b=d.length;_<b;_++){const k=d[_];a.addContentWidget(this._contentWidgets[k])}d=Object.keys(this._overlayWidgets);for(let _=0,b=d.length;_<b;_++){const k=d[_];a.addOverlayWidget(this._overlayWidgets[k])}a.render(!1,!0),a.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ModelData$1(e,o,a,c,i)}_createView(e){let i;this.isSimpleWidget?i={paste:(c,d,_,b)=>{this._paste("keyboard",c,d,_,b)},type:c=>{this._type("keyboard",c)},compositionType:(c,d,_,b)=>{this._compositionType("keyboard",c,d,_,b)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:i={paste:(c,d,_,b)=>{const k={text:c,pasteOnNewLine:d,multicursorText:_,mode:b};this._commandService.executeCommand("paste",k)},type:c=>{const d={text:c};this._commandService.executeCommand("type",d)},compositionType:(c,d,_,b)=>{if(_||b){const k={text:c,replacePrevCharCnt:d,replaceNextCharCnt:_,positionDelta:b};this._commandService.executeCommand("compositionType",k)}else{const k={text:c,replaceCharCnt:d};this._commandService.executeCommand("replacePreviousChar",k)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const o=new ViewUserInputEvents(e.coordinatesConverter);return o.onKeyDown=c=>this._onKeyDown.fire(c),o.onKeyUp=c=>this._onKeyUp.fire(c),o.onContextMenu=c=>this._onContextMenu.fire(c),o.onMouseMove=c=>this._onMouseMove.fire(c),o.onMouseLeave=c=>this._onMouseLeave.fire(c),o.onMouseDown=c=>this._onMouseDown.fire(c),o.onMouseUp=c=>this._onMouseUp.fire(c),o.onMouseDrag=c=>this._onMouseDrag.fire(c),o.onMouseDrop=c=>this._onMouseDrop.fire(c),o.onMouseDropCanceled=c=>this._onMouseDropCanceled.fire(c),o.onMouseWheel=c=>this._onMouseWheel.fire(c),[new View(i,this._configuration,this._themeService.getColorTheme(),e,o,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const i=[{range:new Range$2(e.lineNumber,e.column,e.lineNumber,e.column),options:cn.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};CodeEditorWidget.dropIntoEditorDecorationOptions=ModelDecorationOptions.register({description:"workbench-dnd-target",className:"dnd-target"});CodeEditorWidget=__decorate$s([__param$n(3,IInstantiationService),__param$n(4,ICodeEditorService),__param$n(5,ICommandService),__param$n(6,IContextKeyService),__param$n(7,IThemeService),__param$n(8,INotificationService),__param$n(9,IAccessibilityService),__param$n(10,ILanguageConfigurationService),__param$n(11,ILanguageFeaturesService)],CodeEditorWidget);class BooleanEventEmitter extends Disposable{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new Emitter$1(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new Emitter$1(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const i=e?2:1;this._value!==i&&(this._value=i,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class EditorContextKeysManager extends Disposable{constructor(e,i){super(),this._editor=e,i.createKey("editorId",e.getId()),this._editorSimpleInput=EditorContextKeys.editorSimpleInput.bindTo(i),this._editorFocus=EditorContextKeys.focus.bindTo(i),this._textInputFocus=EditorContextKeys.textInputFocus.bindTo(i),this._editorTextFocus=EditorContextKeys.editorTextFocus.bindTo(i),this._editorTabMovesFocus=EditorContextKeys.tabMovesFocus.bindTo(i),this._editorReadonly=EditorContextKeys.readOnly.bindTo(i),this._inDiffEditor=EditorContextKeys.inDiffEditor.bindTo(i),this._editorColumnSelection=EditorContextKeys.columnSelection.bindTo(i),this._hasMultipleSelections=EditorContextKeys.hasMultipleSelections.bindTo(i),this._hasNonEmptySelection=EditorContextKeys.hasNonEmptySelection.bindTo(i),this._canUndo=EditorContextKeys.canUndo.bindTo(i),this._canRedo=EditorContextKeys.canRedo.bindTo(i),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(i=>!i.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class EditorModeContext extends Disposable{constructor(e,i,o){super(),this._editor=e,this._contextKeyService=i,this._languageFeaturesService=o,this._langId=EditorContextKeys.languageId.bindTo(i),this._hasCompletionItemProvider=EditorContextKeys.hasCompletionItemProvider.bindTo(i),this._hasCodeActionsProvider=EditorContextKeys.hasCodeActionsProvider.bindTo(i),this._hasCodeLensProvider=EditorContextKeys.hasCodeLensProvider.bindTo(i),this._hasDefinitionProvider=EditorContextKeys.hasDefinitionProvider.bindTo(i),this._hasDeclarationProvider=EditorContextKeys.hasDeclarationProvider.bindTo(i),this._hasImplementationProvider=EditorContextKeys.hasImplementationProvider.bindTo(i),this._hasTypeDefinitionProvider=EditorContextKeys.hasTypeDefinitionProvider.bindTo(i),this._hasHoverProvider=EditorContextKeys.hasHoverProvider.bindTo(i),this._hasDocumentHighlightProvider=EditorContextKeys.hasDocumentHighlightProvider.bindTo(i),this._hasDocumentSymbolProvider=EditorContextKeys.hasDocumentSymbolProvider.bindTo(i),this._hasReferenceProvider=EditorContextKeys.hasReferenceProvider.bindTo(i),this._hasRenameProvider=EditorContextKeys.hasRenameProvider.bindTo(i),this._hasSignatureHelpProvider=EditorContextKeys.hasSignatureHelpProvider.bindTo(i),this._hasInlayHintsProvider=EditorContextKeys.hasInlayHintsProvider.bindTo(i),this._hasDocumentFormattingProvider=EditorContextKeys.hasDocumentFormattingProvider.bindTo(i),this._hasDocumentSelectionFormattingProvider=EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(i),this._hasMultipleDocumentFormattingProvider=EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(i),this._hasMultipleDocumentSelectionFormattingProvider=EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),this._isInWalkThrough=EditorContextKeys.isInWalkThroughSnippet.bindTo(i);const a=()=>this._update();this._register(e.onDidChangeModel(a)),this._register(e.onDidChangeModelLanguage(a)),this._register(o.completionProvider.onDidChange(a)),this._register(o.codeActionProvider.onDidChange(a)),this._register(o.codeLensProvider.onDidChange(a)),this._register(o.definitionProvider.onDidChange(a)),this._register(o.declarationProvider.onDidChange(a)),this._register(o.implementationProvider.onDidChange(a)),this._register(o.typeDefinitionProvider.onDidChange(a)),this._register(o.hoverProvider.onDidChange(a)),this._register(o.documentHighlightProvider.onDidChange(a)),this._register(o.documentSymbolProvider.onDidChange(a)),this._register(o.referenceProvider.onDidChange(a)),this._register(o.renameProvider.onDidChange(a)),this._register(o.documentFormattingEditProvider.onDidChange(a)),this._register(o.documentRangeFormattingEditProvider.onDidChange(a)),this._register(o.signatureHelpProvider.onDidChange(a)),this._register(o.inlayHintsProvider.onDidChange(a)),a()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===Schemas.walkThroughSnippet)})}}class CodeEditorWidgetFocusTracker extends Disposable{constructor(e){super(),this._onChange=this._register(new Emitter$1),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(trackFocus(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}class EditorDecorationsCollection{constructor(e,i){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}get length(){return this._decorationIds.length}onDidChange(e,i,o){return this._editor.onDidChangeModelDecorations(a=>{this._isChangingDecorations||e.call(i,a)},o)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),i=[];for(const o of this._decorationIds){const a=e.getDecorationRange(o);a&&i.push(a)}return i}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{this._decorationIds=i.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}}}const squigglyStart=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),squigglyEnd=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function getSquigglySVGData(s){return squigglyStart+encodeURIComponent(s.toString())+squigglyEnd}const dotdotdotStart=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),dotdotdotEnd=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function getDotDotDotSVGData(s){return dotdotdotStart+encodeURIComponent(s.toString())+dotdotdotEnd}registerThemingParticipant((s,e)=>{const i=s.getColor(editorErrorBorder);i&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${i}; }`);const o=s.getColor(editorErrorForeground);o&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${getSquigglySVGData(o)}") repeat-x bottom left; }`);const a=s.getColor(editorErrorBackground);a&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const c=s.getColor(editorWarningBorder);c&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${c}; }`);const d=s.getColor(editorWarningForeground);d&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${getSquigglySVGData(d)}") repeat-x bottom left; }`);const _=s.getColor(editorWarningBackground);_&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${_}; }`);const b=s.getColor(editorInfoBorder);b&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${b}; }`);const k=s.getColor(editorInfoForeground);k&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${getSquigglySVGData(k)}") repeat-x bottom left; }`);const j=s.getColor(editorInfoBackground);j&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${j}; }`);const _e=s.getColor(editorHintBorder);_e&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${_e}; }`);const et=s.getColor(editorHintForeground);et&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${getDotDotDotSVGData(et)}") no-repeat bottom left; }`);const tt=s.getColor(editorUnnecessaryCodeOpacity);tt&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${tt.rgba.a}; }`);const it=s.getColor(editorUnnecessaryCodeBorder);it&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${it}; }`);const st=s.getColor(editorForeground)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${st}}`)});const diffEditor="";class DomEmitter{constructor(e,i,o){const a=c=>this.emitter.fire(c);this.emitter=new Emitter$1({onFirstListenerAdd:()=>e.addEventListener(i,a,o),onLastListenerRemove:()=>e.removeEventListener(i,a,o)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function stopEvent(s){return s.preventDefault(),s.stopPropagation(),s}const sash="";var __decorate$r=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c};const DEBUG=!1;var OrthogonalEdge;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(OrthogonalEdge||(OrthogonalEdge={}));let globalSize=4;const onDidChangeGlobalSize=new Emitter$1;let globalHoverDelay=300;const onDidChangeHoverDelay=new Emitter$1;class MouseEventFactory{constructor(){this.disposables=new DisposableStore}get onPointerMove(){return this.disposables.add(new DomEmitter(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new DomEmitter(window,"mouseup")).event}dispose(){this.disposables.dispose()}}__decorate$r([memoize],MouseEventFactory.prototype,"onPointerMove",null);__decorate$r([memoize],MouseEventFactory.prototype,"onPointerUp",null);class GestureEventFactory{constructor(e){this.el=e,this.disposables=new DisposableStore}get onPointerMove(){return this.disposables.add(new DomEmitter(this.el,EventType.Change)).event}get onPointerUp(){return this.disposables.add(new DomEmitter(this.el,EventType.End)).event}dispose(){this.disposables.dispose()}}__decorate$r([memoize],GestureEventFactory.prototype,"onPointerMove",null);__decorate$r([memoize],GestureEventFactory.prototype,"onPointerUp",null);class OrthogonalPointerEventFactory{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}__decorate$r([memoize],OrthogonalPointerEventFactory.prototype,"onPointerMove",null);__decorate$r([memoize],OrthogonalPointerEventFactory.prototype,"onPointerUp",null);const PointerEventsDisabledCssClass="pointer-events-disabled";class Sash extends Disposable{constructor(e,i,o){super(),this.hoverDelay=globalHoverDelay,this.hoverDelayer=this._register(new Delayer(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new Emitter$1),this._onDidStart=this._register(new Emitter$1),this._onDidChange=this._register(new Emitter$1),this._onDidReset=this._register(new Emitter$1),this._onDidEnd=this._register(new Emitter$1),this.orthogonalStartSashDisposables=this._register(new DisposableStore),this.orthogonalStartDragHandleDisposables=this._register(new DisposableStore),this.orthogonalEndSashDisposables=this._register(new DisposableStore),this.orthogonalEndDragHandleDisposables=this._register(new DisposableStore),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=append$1(e,$$5(".monaco-sash")),o.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${o.orthogonalEdge}`),isMacintosh&&this.el.classList.add("mac");const a=this._register(new DomEmitter(this.el,"mousedown")).event;this._register(a(_e=>this.onPointerStart(_e,new MouseEventFactory),this));const c=this._register(new DomEmitter(this.el,"dblclick")).event;this._register(c(this.onPointerDoublePress,this));const d=this._register(new DomEmitter(this.el,"mouseenter")).event;this._register(d(()=>Sash.onMouseEnter(this)));const _=this._register(new DomEmitter(this.el,"mouseleave")).event;this._register(_(()=>Sash.onMouseLeave(this))),this._register(Gesture.addTarget(this.el));const b=Event.map(this._register(new DomEmitter(this.el,EventType.Start)).event,_e=>{var et;return Object.assign(Object.assign({},_e),{target:(et=_e.initialTarget)!==null&&et!==void 0?et:null})});this._register(b(_e=>this.onPointerStart(_e,new GestureEventFactory(this.el)),this));const k=this._register(new DomEmitter(this.el,EventType.Tap)).event,j=Event.map(Event.filter(Event.debounce(k,(_e,et)=>{var tt;return{event:et,count:((tt=_e==null?void 0:_e.count)!==null&&tt!==void 0?tt:0)+1}},250),({count:_e})=>_e===2),({event:_e})=>{var et;return Object.assign(Object.assign({},_e),{target:(et=_e.initialTarget)!==null&&et!==void 0?et:null})});this._register(j(this.onPointerDoublePress,this)),typeof o.size=="number"?(this.size=o.size,o.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=globalSize,this._register(onDidChangeGlobalSize.event(_e=>{this.size=_e,this.layout()}))),this._register(onDidChangeHoverDelay.event(_e=>this.hoverDelay=_e)),this.layoutProvider=i,this.orthogonalStartSash=o.orthogonalStartSash,this.orthogonalEndSash=o.orthogonalEndSash,this.orientation=o.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",DEBUG),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const i=o=>{this.orthogonalStartDragHandleDisposables.clear(),o!==0&&(this._orthogonalStartDragHandle=append$1(this.el,$$5(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(toDisposable(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Sash.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Sash.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(i,this)),i(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const i=o=>{this.orthogonalEndDragHandleDisposables.clear(),o!==0&&(this._orthogonalEndDragHandle=append$1(this.el,$$5(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(toDisposable(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Sash.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Sash.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(i,this)),i(e.state)}this._orthogonalEndSash=e}onPointerStart(e,i){EventHelper.stop(e);let o=!1;if(!e.__orthogonalSashEvent){const it=this.getOrthogonalSash(e);it&&(o=!0,e.__orthogonalSashEvent=!0,it.onPointerStart(e,new OrthogonalPointerEventFactory(i)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new OrthogonalPointerEventFactory(i))),!this.state)return;const a=getElementsByTagName("iframe");for(const it of a)it.classList.add(PointerEventsDisabledCssClass);const c=e.pageX,d=e.pageY,_=e.altKey,b={startX:c,currentX:c,startY:d,currentY:d,altKey:_};this.el.classList.add("active"),this._onDidStart.fire(b);const k=createStyleSheet(this.el),j=()=>{let it="";o?it="all-scroll":this.orientation===1?this.state===1?it="s-resize":this.state===2?it="n-resize":it=isMacintosh?"row-resize":"ns-resize":this.state===1?it="e-resize":this.state===2?it="w-resize":it=isMacintosh?"col-resize":"ew-resize",k.textContent=`* { cursor: ${it} !important; }`},_e=new DisposableStore;j(),o||this.onDidEnablementChange.event(j,null,_e);const et=it=>{EventHelper.stop(it,!1);const st={startX:c,currentX:it.pageX,startY:d,currentY:it.pageY,altKey:_};this._onDidChange.fire(st)},tt=it=>{EventHelper.stop(it,!1),this.el.removeChild(k),this.el.classList.remove("active"),this._onDidEnd.fire(),_e.dispose();for(const st of a)st.classList.remove(PointerEventsDisabledCssClass)};i.onPointerMove(et,null,_e),i.onPointerUp(tt,null,_e),_e.add(i)}onPointerDoublePress(e){const i=this.getOrthogonalSash(e);i&&i._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,i=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!i&&e.linkedSash&&Sash.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,i=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!i&&e.linkedSash&&Sash.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Sash.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}class StableEditorScrollState{constructor(e,i,o){this._visiblePosition=e,this._visiblePositionScrollDelta=i,this._cursorPosition=o}static capture(e){let i=null,o=0;if(e.getScrollTop()!==0){const a=e.getVisibleRanges();if(a.length>0){i=a[0].getStartPosition();const c=e.getTopForPosition(i.lineNumber,i.column);o=e.getScrollTop()-c}}return new StableEditorScrollState(i,o,e.getPosition())}restore(e){if(this._visiblePosition){const i=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(i+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const i=e.getPosition();if(!this._cursorPosition||!i)return;const o=e.getTopForLineNumber(i.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+o)}}const diffReview="",DataTransfers={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Mimes.text},StaticDND={CurrentDragAndDropData:void 0};var _a$3,_b;class StringIterator{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const i=e.charCodeAt(0),o=this._value.charCodeAt(this._pos);return i-o}value(){return this._value[this._pos]}}class ConfigKeysIterator{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?compareSubstring(e,this._value,0,e.length,this._from,this._to):compareSubstringIgnoreCase(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class PathIterator{constructor(e=!0,i=!0){this._splitOnBackslash=e,this._caseSensitive=i}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let i=e.length-1;i>=0;i--,this._valueLen--){const o=this._value.charCodeAt(i);if(!(o===47||this._splitOnBackslash&&o===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const i=this._value.charCodeAt(this._to);if(i===47||this._splitOnBackslash&&i===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?compareSubstring(e,this._value,0,e.length,this._from,this._to):compareSubstringIgnoreCase(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class UriIterator{constructor(e,i){this._ignorePathCasing=e,this._ignoreQueryAndFragment=i,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new PathIterator(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return compareIgnoreCase(e,this._value.scheme);if(this._states[this._stateIdx]===2)return compareIgnoreCase(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return compare(e,this._value.query);if(this._states[this._stateIdx]===5)return compare(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class TernarySearchTreeNode{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,i;return(i=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}get heightRight(){var e,i;return(i=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&i!==void 0?i:0}}class TernarySearchTree{constructor(e){this._iter=e}static forUris(e=()=>!1,i=()=>!1){return new TernarySearchTree(new UriIterator(e,i))}static forStrings(){return new TernarySearchTree(new StringIterator)}static forConfigKeys(){return new TernarySearchTree(new ConfigKeysIterator)}clear(){this._root=void 0}set(e,i){const o=this._iter.reset(e);let a;this._root||(this._root=new TernarySearchTreeNode,this._root.segment=o.value());const c=[];for(a=this._root;;){const _=o.cmp(a.segment);if(_>0)a.left||(a.left=new TernarySearchTreeNode,a.left.segment=o.value()),c.push([-1,a]),a=a.left;else if(_<0)a.right||(a.right=new TernarySearchTreeNode,a.right.segment=o.value()),c.push([1,a]),a=a.right;else if(o.hasNext())o.next(),a.mid||(a.mid=new TernarySearchTreeNode,a.mid.segment=o.value()),c.push([0,a]),a=a.mid;else break}const d=a.value;a.value=i,a.key=e;for(let _=c.length-1;_>=0;_--){const b=c[_][1];b.updateHeight();const k=b.balanceFactor();if(k<-1||k>1){const j=c[_][0],_e=c[_+1][0];if(j===1&&_e===1)c[_][1]=b.rotateLeft();else if(j===-1&&_e===-1)c[_][1]=b.rotateRight();else if(j===1&&_e===-1)b.right=c[_+1][1]=c[_+1][1].rotateRight(),c[_][1]=b.rotateLeft();else if(j===-1&&_e===1)b.left=c[_+1][1]=c[_+1][1].rotateLeft(),c[_][1]=b.rotateRight();else throw new Error;if(_>0)switch(c[_-1][0]){case-1:c[_-1][1].left=c[_][1];break;case 1:c[_-1][1].right=c[_][1];break;case 0:c[_-1][1].mid=c[_][1];break}else this._root=c[0][1]}}return d}get(e){var i;return(i=this._getNode(e))===null||i===void 0?void 0:i.value}_getNode(e){const i=this._iter.reset(e);let o=this._root;for(;o;){const a=i.cmp(o.segment);if(a>0)o=o.left;else if(a<0)o=o.right;else if(i.hasNext())i.next(),o=o.mid;else break}return o}has(e){const i=this._getNode(e);return!((i==null?void 0:i.value)===void 0&&(i==null?void 0:i.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,i){var o;const a=this._iter.reset(e),c=[];let d=this._root;for(;d;){const _=a.cmp(d.segment);if(_>0)c.push([-1,d]),d=d.left;else if(_<0)c.push([1,d]),d=d.right;else if(a.hasNext())a.next(),c.push([0,d]),d=d.mid;else break}if(!!d){if(i?(d.left=void 0,d.mid=void 0,d.right=void 0,d.height=1):(d.key=void 0,d.value=void 0),!d.mid&&!d.value)if(d.left&&d.right){const _=this._min(d.right),{key:b,value:k,segment:j}=_;this._delete(_.key,!1),d.key=b,d.value=k,d.segment=j}else{const _=(o=d.left)!==null&&o!==void 0?o:d.right;if(c.length>0){const[b,k]=c[c.length-1];switch(b){case-1:k.left=_;break;case 0:k.mid=_;break;case 1:k.right=_;break}}else this._root=_}for(let _=c.length-1;_>=0;_--){const b=c[_][1];b.updateHeight();const k=b.balanceFactor();if(k>1?(b.right.balanceFactor()>=0||(b.right=b.right.rotateRight()),c[_][1]=b.rotateLeft()):k<-1&&(b.left.balanceFactor()<=0||(b.left=b.left.rotateLeft()),c[_][1]=b.rotateRight()),_>0)switch(c[_-1][0]){case-1:c[_-1][1].left=c[_][1];break;case 1:c[_-1][1].right=c[_][1];break;case 0:c[_-1][1].mid=c[_][1];break}else this._root=c[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const i=this._iter.reset(e);let o=this._root,a;for(;o;){const c=i.cmp(o.segment);if(c>0)o=o.left;else if(c<0)o=o.right;else if(i.hasNext())i.next(),a=o.value||a,o=o.mid;else break}return o&&o.value||a}findSuperstr(e){const i=this._iter.reset(e);let o=this._root;for(;o;){const a=i.cmp(o.segment);if(a>0)o=o.left;else if(a<0)o=o.right;else if(i.hasNext())i.next(),o=o.mid;else return o.mid?this._entries(o.mid):void 0}}forEach(e){for(const[i,o]of this)e(o,i)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const i=[];return this._dfsEntries(e,i),i[Symbol.iterator]()}_dfsEntries(e,i){!e||(e.left&&this._dfsEntries(e.left,i),e.value&&i.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,i),e.right&&this._dfsEntries(e.right,i))}}class ResourceMapEntry{constructor(e,i){this.uri=e,this.value=i}}class ResourceMap{constructor(e,i){this[_a$3]="ResourceMap",e instanceof ResourceMap?(this.map=new Map(e.map),this.toKey=i!=null?i:ResourceMap.defaultToKey):(this.map=new Map,this.toKey=e!=null?e:ResourceMap.defaultToKey)}set(e,i){return this.map.set(this.toKey(e),new ResourceMapEntry(e,i)),this}get(e){var i;return(i=this.map.get(this.toKey(e)))===null||i===void 0?void 0:i.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,i){typeof i<"u"&&(e=e.bind(i));for(const[o,a]of this.map)e(a.value,a.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(_a$3=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}ResourceMap.defaultToKey=s=>s.toString();class LinkedMap{constructor(){this[_b]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,i=0){const o=this._map.get(e);if(!!o)return i!==0&&this.touch(o,i),o.value}set(e,i,o=0){let a=this._map.get(e);if(a)a.value=i,o!==0&&this.touch(a,o);else{switch(a={key:e,value:i,next:void 0,previous:void 0},o){case 0:this.addItemLast(a);break;case 1:this.addItemFirst(a);break;case 2:this.addItemLast(a);break;default:this.addItemLast(a);break}this._map.set(e,a),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const i=this._map.get(e);if(!!i)return this._map.delete(e),this.removeItem(i),this._size--,i.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,i){const o=this._state;let a=this._head;for(;a;){if(i?e.bind(i)(a.value,a.key,this):e(a.value,a.key,this),this._state!==o)throw new Error("LinkedMap got modified during iteration.");a=a.next}}keys(){const e=this,i=this._state;let o=this._head;const a={[Symbol.iterator](){return a},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:o.key,done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}values(){const e=this,i=this._state;let o=this._head;const a={[Symbol.iterator](){return a},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:o.value,done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}entries(){const e=this,i=this._state;let o=this._head;const a={[Symbol.iterator](){return a},next(){if(e._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const c={value:[o.key,o.value],done:!1};return o=o.next,c}else return{value:void 0,done:!0}}};return a}[(_b=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let i=this._head,o=this.size;for(;i&&o>e;)this._map.delete(i.key),i=i.next,o--;this._head=i,this._size=o,i&&(i.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const i=e.next,o=e.previous;if(!i||!o)throw new Error("Invalid list");i.previous=o,o.next=i}e.next=void 0,e.previous=void 0,this._state++}touch(e,i){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(i!==1&&i!==2)){if(i===1){if(e===this._head)return;const o=e.next,a=e.previous;e===this._tail?(a.next=void 0,this._tail=a):(o.previous=a,a.next=o),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(i===2){if(e===this._tail)return;const o=e.next,a=e.previous;e===this._head?(o.previous=void 0,this._head=o):(o.previous=a,a.next=o),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((i,o)=>{e.push([o,i])}),e}fromJSON(e){this.clear();for(const[i,o]of e)this.set(i,o)}}class LRUCache extends LinkedMap{constructor(e,i=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,i),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,i=2){return super.get(e,i)}peek(e){return super.get(e,0)}set(e,i){return super.set(e,i,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function or(...s){return function(e,i){for(let o=0,a=s.length;o<a;o++){const c=s[o](e,i);if(c)return c}return null}}_matchesPrefix.bind(void 0,!1);const matchesPrefix=_matchesPrefix.bind(void 0,!0);function _matchesPrefix(s,e,i){if(!i||i.length<e.length)return null;let o;return s?o=startsWithIgnoreCase(i,e):o=i.indexOf(e)===0,o?e.length>0?[{start:0,end:e.length}]:[]:null}function matchesContiguousSubString(s,e){const i=e.toLowerCase().indexOf(s.toLowerCase());return i===-1?null:[{start:i,end:i+s.length}]}function matchesSubString(s,e){return _matchesSubString(s.toLowerCase(),e.toLowerCase(),0,0)}function _matchesSubString(s,e,i,o){if(i===s.length)return[];if(o===e.length)return null;if(s[i]===e[o]){let a=null;return(a=_matchesSubString(s,e,i+1,o+1))?join({start:o,end:o+1},a):null}return _matchesSubString(s,e,i,o+1)}function isLower(s){return 97<=s&&s<=122}function isUpper(s){return 65<=s&&s<=90}function isNumber(s){return 48<=s&&s<=57}function isWhitespace(s){return s===32||s===9||s===10||s===13}const wordSeparators=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>wordSeparators.add(s.charCodeAt(0)));function isAlphanumeric(s){return isLower(s)||isUpper(s)||isNumber(s)}function join(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}function nextAnchor(s,e){for(let i=e;i<s.length;i++){const o=s.charCodeAt(i);if(isUpper(o)||isNumber(o)||i>0&&!isAlphanumeric(s.charCodeAt(i-1)))return i}return s.length}function _matchesCamelCase(s,e,i,o){if(i===s.length)return[];if(o===e.length)return null;if(s[i]!==e[o].toLowerCase())return null;{let a=null,c=o+1;for(a=_matchesCamelCase(s,e,i+1,o+1);!a&&(c=nextAnchor(e,c))<e.length;)a=_matchesCamelCase(s,e,i+1,c),c++;return a===null?null:join({start:o,end:o+1},a)}}function analyzeCamelCaseWord(s){let e=0,i=0,o=0,a=0,c=0;for(let j=0;j<s.length;j++)c=s.charCodeAt(j),isUpper(c)&&e++,isLower(c)&&i++,isAlphanumeric(c)&&o++,isNumber(c)&&a++;const d=e/s.length,_=i/s.length,b=o/s.length,k=a/s.length;return{upperPercent:d,lowerPercent:_,alphaPercent:b,numericPercent:k}}function isUpperCaseWord(s){const{upperPercent:e,lowerPercent:i}=s;return i===0&&e>.6}function isCamelCaseWord(s){const{upperPercent:e,lowerPercent:i,alphaPercent:o,numericPercent:a}=s;return i>.2&&e<.8&&o>.6&&a<.2}function isCamelCasePattern(s){let e=0,i=0,o=0,a=0;for(let c=0;c<s.length;c++)o=s.charCodeAt(c),isUpper(o)&&e++,isLower(o)&&i++,isWhitespace(o)&&a++;return(e===0||i===0)&&a===0?s.length<=30:e<=5}function matchesCamelCase(s,e){if(!e||(e=e.trim(),e.length===0)||!isCamelCasePattern(s)||e.length>60)return null;const i=analyzeCamelCaseWord(e);if(!isCamelCaseWord(i)){if(!isUpperCaseWord(i))return null;e=e.toLowerCase()}let o=null,a=0;for(s=s.toLowerCase();a<e.length&&(o=_matchesCamelCase(s,e,0,a))===null;)a=nextAnchor(e,a+1);return o}const fuzzyContiguousFilter=or(matchesPrefix,matchesCamelCase,matchesContiguousSubString),fuzzySeparateFilter=or(matchesPrefix,matchesCamelCase,matchesSubString),fuzzyRegExpCache=new LRUCache(1e4);function matchesFuzzy(s,e,i=!1){if(typeof s!="string"||typeof e!="string")return null;let o=fuzzyRegExpCache.get(s);o||(o=new RegExp(convertSimple2RegExpPattern(s),"i"),fuzzyRegExpCache.set(s,o));const a=o.exec(e);return a?[{start:a.index,end:a.index+a[0].length}]:i?fuzzySeparateFilter(s,e):fuzzyContiguousFilter(s,e)}const _maxLen=128;function initTable(){const s=[],e=[];for(let i=0;i<=_maxLen;i++)e[i]=0;for(let i=0;i<=_maxLen;i++)s.push(e.slice(0));return s}function initArr(s){const e=[];for(let i=0;i<=s;i++)e[i]=0;return e}const _minWordMatchPos=initArr(2*_maxLen),_maxWordMatchPos=initArr(2*_maxLen),_diag=initTable(),_table=initTable(),_arrows=initTable();function isSeparatorAtPos(s,e){if(e<0||e>=s.length)return!1;const i=s.codePointAt(e);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!isEmojiImprecise(i)}}function isWhitespaceAtPos(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function isUpperCaseAtPos(s,e,i){return e[s]!==i[s]}function isPatternInWord(s,e,i,o,a,c,d=!1){for(;e<i&&a<c;)s[e]===o[a]&&(d&&(_minWordMatchPos[e]=a),e+=1),a+=1;return e===i}var FuzzyScore;(function(s){s.Default=[-100,0];function e(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}s.isDefault=e})(FuzzyScore||(FuzzyScore={}));class FuzzyScoreOptions{constructor(e,i){this.firstMatchCanBeWeak=e,this.boostFullMatch=i}}FuzzyScoreOptions.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};function fuzzyScore(s,e,i,o,a,c,d=FuzzyScoreOptions.default){const _=s.length>_maxLen?_maxLen:s.length,b=o.length>_maxLen?_maxLen:o.length;if(i>=_||c>=b||_-i>b-c||!isPatternInWord(e,i,_,a,c,b,!0))return;_fillInMaxWordMatchPos(_,b,i,c,e,a);let k=1,j=1,_e=i,et=c;const tt=[!1];for(k=1,_e=i;_e<_;k++,_e++){const rt=_minWordMatchPos[_e],at=_maxWordMatchPos[_e],lt=_e+1<_?_maxWordMatchPos[_e+1]:b;for(j=rt-c+1,et=rt;et<lt;j++,et++){let gt=Number.MIN_SAFE_INTEGER,ht=!1;et<=at&&(gt=_doScore(s,e,_e,i,o,a,et,b,c,_diag[k-1][j-1]===0,tt));let ut=0;gt!==Number.MAX_SAFE_INTEGER&&(ht=!0,ut=gt+_table[k-1][j-1]);const ct=et>rt,ft=ct?_table[k][j-1]+(_diag[k][j-1]>0?-5:0):0,dt=et>rt+1&&_diag[k][j-1]>0,pt=dt?_table[k][j-2]+(_diag[k][j-2]>0?-5:0):0;if(dt&&(!ct||pt>=ft)&&(!ht||pt>=ut))_table[k][j]=pt,_arrows[k][j]=3,_diag[k][j]=0;else if(ct&&(!ht||ft>=ut))_table[k][j]=ft,_arrows[k][j]=2,_diag[k][j]=0;else if(ht)_table[k][j]=ut,_arrows[k][j]=1,_diag[k][j]=_diag[k-1][j-1]+1;else throw new Error("not possible")}}if(!tt[0]&&!d.firstMatchCanBeWeak)return;k--,j--;const it=[_table[k][j],c];let st=0,ot=0;for(;k>=1;){let rt=j;do{const at=_arrows[k][rt];if(at===3)rt=rt-2;else if(at===2)rt=rt-1;else break}while(rt>=1);st>1&&e[i+k-1]===a[c+j-1]&&!isUpperCaseAtPos(rt+c-1,o,a)&&st+1>_diag[k][rt]&&(rt=j),rt===j?st++:st=1,ot||(ot=rt),k--,j=rt-1,it.push(j)}b===_&&d.boostFullMatch&&(it[0]+=2);const nt=ot-_;return it[0]-=nt,it}function _fillInMaxWordMatchPos(s,e,i,o,a,c){let d=s-1,_=e-1;for(;d>=i&&_>=o;)a[d]===c[_]&&(_maxWordMatchPos[d]=_,d--),_--}function _doScore(s,e,i,o,a,c,d,_,b,k,j){if(e[i]!==c[d])return Number.MIN_SAFE_INTEGER;let _e=1,et=!1;return d===i-o?_e=s[i]===a[d]?7:5:isUpperCaseAtPos(d,a,c)&&(d===0||!isUpperCaseAtPos(d-1,a,c))?(_e=s[i]===a[d]?7:5,et=!0):isSeparatorAtPos(c,d)&&(d===0||!isSeparatorAtPos(c,d-1))?_e=5:(isSeparatorAtPos(c,d-1)||isWhitespaceAtPos(c,d-1))&&(_e=5,et=!0),_e>1&&i===o&&(j[0]=!0),et||(et=isUpperCaseAtPos(d,a,c)||isSeparatorAtPos(c,d-1)||isWhitespaceAtPos(c,d-1)),i===o?d>b&&(_e-=et?3:5):k?_e+=et?2:0:_e+=et?0:1,d+1===_&&(_e-=et?3:5),_e}const iconStartMarker="$(",iconsRegex=new RegExp(`\\$\\(${CSSIcon.iconNameExpression}(?:${CSSIcon.iconModifierExpression})?\\)`,"g"),iconNameCharacterRegexp=new RegExp(CSSIcon.iconNameCharacter),escapeIconsRegex=new RegExp(`(\\\\)?${iconsRegex.source}`,"g");function escapeIcons(s){return s.replace(escapeIconsRegex,(e,i)=>i?e:`\\${e}`)}new RegExp(`\\\\${iconsRegex.source}`,"g");const stripIconsRegex=new RegExp(`(\\s)?(\\\\)?${iconsRegex.source}(\\s)?`,"g");function stripIcons(s){return s.indexOf(iconStartMarker)===-1?s:s.replace(stripIconsRegex,(e,i,o,a)=>o?e:i||a||"")}function parseLabelWithIcons(s){const e=s.indexOf(iconStartMarker);return e===-1?{text:s}:doParseLabelWithIcons(s,e)}function doParseLabelWithIcons(s,e){const i=[];let o="";function a(et){if(et){o+=et;for(const tt of et)i.push(_)}}let c=-1,d="",_=0,b,k,j=e;const _e=s.length;for(a(s.substr(0,e));j<_e;){if(b=s[j],k=s[j+1],b===iconStartMarker[0]&&k===iconStartMarker[1])c=j,a(d),d=iconStartMarker,j++;else if(b===")"&&c!==-1){const et=j-c+1;_+=et,c=-1,d=""}else c!==-1?iconNameCharacterRegexp.test(b)?d+=b:(a(d),c=-1,d=""):a(b);j++}return a(d),{text:o,iconOffsets:i}}function matchesFuzzyIconAware(s,e,i=!1){const{text:o,iconOffsets:a}=e;if(!a||a.length===0)return matchesFuzzy(s,o,i);const c=ltrim(o," "),d=o.length-c.length,_=matchesFuzzy(s,c,i);if(_)for(const b of _){const k=a[b.start+d]+d;b.start+=k,b.end+=k}return _}class MarkdownString{constructor(e="",i=!1){var o,a,c;if(this.value=e,typeof this.value!="string")throw illegalArgument("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(o=i.isTrusted)!==null&&o!==void 0?o:void 0,this.supportThemeIcons=(a=i.supportThemeIcons)!==null&&a!==void 0?a:!1,this.supportHtml=(c=i.supportHtml)!==null&&c!==void 0?c:!1)}appendText(e,i=0){return this.value+=escapeMarkdownSyntaxTokens(this.supportThemeIcons?escapeIcons(e):e).replace(/([ \t]+)/g,(o,a)=>"&nbsp;".repeat(a.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,i){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=i,this.value+="\n```\n",this}appendLink(e,i,o){return this.value+="[",this.value+=this._escape(i,"]"),this.value+="](",this.value+=this._escape(String(e),")"),o&&(this.value+=` "${this._escape(this._escape(o,'"'),")")}"`),this.value+=")",this}_escape(e,i){const o=new RegExp(escapeRegExpCharacters(i),"g");return e.replace(o,(a,c)=>e.charAt(c-1)!=="\\"?`\\${a}`:a)}}function isMarkdownString(s){return s instanceof MarkdownString?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}function escapeMarkdownSyntaxTokens(s){return s.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}var __awaiter$j=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function setupNativeHover(s,e){isString$1(e)?s.title=stripIcons(e):e!=null&&e.markdownNotSupportedFallback?s.title=e.markdownNotSupportedFallback:s.removeAttribute("title")}class UpdatableHoverWidget{constructor(e,i,o){this.hoverDelegate=e,this.target=i,this.fadeInAnimation=o}update(e,i,o){var a;return __awaiter$j(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let c;if(e===void 0||isString$1(e)||e instanceof HTMLElement)c=e;else if(!isFunction(e.markdown))c=(a=e.markdown)!==null&&a!==void 0?a:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(localize("iconLabel.loading","Loading..."),i),this._cancellationTokenSource=new CancellationTokenSource$1;const d=this._cancellationTokenSource.token;if(c=yield e.markdown(d),c===void 0&&(c=e.markdownNotSupportedFallback),this.isDisposed||d.isCancellationRequested)return}this.show(c,i,o)})}show(e,i,o){const a=this._hoverWidget;if(this.hasContent(e)){const c=Object.assign({content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!a},o);this._hoverWidget=this.hoverDelegate.showHover(c,i)}a==null||a.dispose()}hasContent(e){return e?isMarkdownString(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,i;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(i=this._cancellationTokenSource)===null||i===void 0||i.dispose(!0),this._cancellationTokenSource=void 0}}function setupCustomHover(s,e,i,o){let a,c;const d=(_e,et)=>{var tt;_e&&(c==null||c.dispose(),c=void 0),et&&(a==null||a.dispose(),a=void 0),(tt=s.onDidHideHover)===null||tt===void 0||tt.call(s)},_=(_e,et,tt)=>new TimeoutTimer(()=>__awaiter$j(this,void 0,void 0,function*(){(!c||c.isDisposed)&&(c=new UpdatableHoverWidget(s,tt||e,_e>0),yield c.update(i,et,o))}),_e),b=()=>{if(a)return;const _e=new DisposableStore,et=st=>d(!1,st.fromElement===e);_e.add(addDisposableListener(e,EventType$1.MOUSE_LEAVE,et,!0));const tt=()=>d(!0,!0);_e.add(addDisposableListener(e,EventType$1.MOUSE_DOWN,tt,!0));const it={targetElements:[e],dispose:()=>{}};if(s.placement===void 0||s.placement==="mouse"){const st=ot=>{it.x=ot.x+10,ot.target instanceof HTMLElement&&ot.target.classList.contains("action-label")&&d(!0,!0)};_e.add(addDisposableListener(e,EventType$1.MOUSE_MOVE,st,!0))}_e.add(_(s.delay,!1,it)),a=_e},k=addDisposableListener(e,EventType$1.MOUSE_OVER,b,!0);return{show:_e=>{d(!1,!0),_(0,_e)},hide:()=>{d(!0,!0)},update:(_e,et)=>__awaiter$j(this,void 0,void 0,function*(){i=_e,yield c==null?void 0:c.update(i,void 0,et)}),dispose:()=>{k.dispose(),d(!0,!0)}}}const actionbar="";class BaseActionViewItem extends Disposable{constructor(e,i,o={}){super(),this.options=o,this._context=e||this,this._action=i,i instanceof Action&&this._register(i.onDidChange(a=>{!this.element||this.handleActionChangeEvent(a)}))}get action(){return this._action}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new ActionRunner)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const i=this.element=e;this._register(Gesture.addTarget(e));const o=this.options&&this.options.draggable;o&&(e.draggable=!0,isFirefox&&this._register(addDisposableListener(e,EventType$1.DRAG_START,a=>{var c;return(c=a.dataTransfer)===null||c===void 0?void 0:c.setData(DataTransfers.TEXT,this._action.label)}))),this._register(addDisposableListener(i,EventType.Tap,a=>this.onClick(a,!0))),this._register(addDisposableListener(i,EventType$1.MOUSE_DOWN,a=>{o||EventHelper.stop(a,!0),this._action.enabled&&a.button===0&&i.classList.add("active")})),isMacintosh&&this._register(addDisposableListener(i,EventType$1.CONTEXT_MENU,a=>{a.button===0&&a.ctrlKey===!0&&this.onClick(a)})),this._register(addDisposableListener(i,EventType$1.CLICK,a=>{EventHelper.stop(a,!0),this.options&&this.options.isMenu||this.onClick(a)})),this._register(addDisposableListener(i,EventType$1.DBLCLICK,a=>{EventHelper.stop(a,!0)})),[EventType$1.MOUSE_UP,EventType$1.MOUSE_OUT].forEach(a=>{this._register(addDisposableListener(i,a,c=>{EventHelper.stop(c),i.classList.remove("active")}))})}onClick(e,i=!1){var o;EventHelper.stop(e,!0);const a=isUndefinedOrNull(this._context)?!((o=this.options)===null||o===void 0)&&o.useEventAsContext?e:{preserveFocus:i}:this._context;this.actionRunner.run(this._action,a)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getTooltip(){return this.getAction().tooltip}updateTooltip(){var e;if(!this.element)return;const i=(e=this.getTooltip())!==null&&e!==void 0?e:"";this.element.setAttribute("aria-label",i),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(i):(this.customHover=setupCustomHover(this.options.hoverDelegate,this.element,i),this._store.add(this.customHover))):this.element.title=i}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ActionViewItem extends BaseActionViewItem{constructor(e,i,o={}){super(e,i,o),this.options=o,this.options.icon=o.icon!==void 0?o.icon:!1,this.options.label=o.label!==void 0?o.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=append$1(this.element,$$5("a.action-label"))),this.label&&(this._action.id===Separator.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(append$1(this.element,$$5("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}getTooltip(){let e=null;return this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=localize({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e!=null?e:void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)===null||e===void 0||e.classList.remove("codicon")}updateEnabled(){var e,i;this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)===null||e===void 0||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(i=this.element)===null||i===void 0||i.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var __awaiter$i=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class ActionBar extends Disposable{constructor(e,i={}){var o,a,c,d,_,b;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new Emitter$1),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new Emitter$1({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new Emitter$1),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new Emitter$1),this.onBeforeRun=this._onBeforeRun.event,this.options=i,this._context=(o=i.context)!==null&&o!==void 0?o:null,this._orientation=(a=this.options.orientation)!==null&&a!==void 0?a:0,this._triggerKeys={keyDown:(d=(c=this.options.triggerKeys)===null||c===void 0?void 0:c.keyDown)!==null&&d!==void 0?d:!1,keys:(b=(_=this.options.triggerKeys)===null||_===void 0?void 0:_.keys)!==null&&b!==void 0?b:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new ActionRunner,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(_e=>this._onDidRun.fire(_e))),this._register(this._actionRunner.onBeforeRun(_e=>this._onBeforeRun.fire(_e))),this._actionIds=[],this.viewItems=[],this.viewItemDisposables=new Map,this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",i.animated!==!1&&this.domNode.classList.add("animated");let k,j;switch(this._orientation){case 0:k=[15],j=[17];break;case 1:k=[16],j=[18],this.domNode.className+=" vertical";break}this._register(addDisposableListener(this.domNode,EventType$1.KEY_DOWN,_e=>{const et=new StandardKeyboardEvent(_e);let tt=!0;const it=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;k&&(et.equals(k[0])||et.equals(k[1]))?tt=this.focusPrevious():j&&(et.equals(j[0])||et.equals(j[1]))?tt=this.focusNext():et.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():et.equals(14)?tt=this.focusFirst():et.equals(13)?tt=this.focusLast():et.equals(2)&&it instanceof BaseActionViewItem&&it.trapsArrowNavigation?tt=this.focusNext():this.isTriggerKeyEvent(et)?this._triggerKeys.keyDown?this.doTrigger(et):this.triggerKeyDown=!0:tt=!1,tt&&(et.preventDefault(),et.stopPropagation())})),this._register(addDisposableListener(this.domNode,EventType$1.KEY_UP,_e=>{const et=new StandardKeyboardEvent(_e);this.isTriggerKeyEvent(et)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(et)),et.preventDefault(),et.stopPropagation()):(et.equals(2)||et.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(trackFocus(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(getActiveElement()===this.domNode||!isAncestor$1(getActiveElement(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=2?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const i=this.viewItems.find(o=>o instanceof BaseActionViewItem&&o.isEnabled());i instanceof BaseActionViewItem&&i.setFocusable(!0)}else this.viewItems.forEach(i=>{i instanceof BaseActionViewItem&&i.setFocusable(!1)})}isTriggerKeyEvent(e){let i=!1;return this._triggerKeys.keys.forEach(o=>{i=i||e.equals(o)}),i}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const i=this.actionsList.children[e];if(isAncestor$1(getActiveElement(),i)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(i=>i.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(i=>i.actionRunner=e))}getContainer(){return this.domNode}push(e,i={}){const o=Array.isArray(e)?e:[e];let a=isNumber$1(i.index)?i.index:null;o.forEach(c=>{const d=document.createElement("li");d.className="action-item",d.setAttribute("role","presentation");let _;this.options.actionViewItemProvider&&(_=this.options.actionViewItemProvider(c)),_||(_=new ActionViewItem(this.context,c,Object.assign({hoverDelegate:this.options.hoverDelegate},i))),this.options.allowContextMenu||this.viewItemDisposables.set(_,addDisposableListener(d,EventType$1.CONTEXT_MENU,b=>{EventHelper.stop(b,!0)})),_.actionRunner=this._actionRunner,_.setActionContext(this.context),_.render(d),this.focusable&&_ instanceof BaseActionViewItem&&this.viewItems.length===0&&_.setFocusable(!0),a===null||a<0||a>=this.actionsList.children.length?(this.actionsList.appendChild(d),this.viewItems.push(_),this._actionIds.push(c.id)):(this.actionsList.insertBefore(d,this.actionsList.children[a]),this.viewItems.splice(a,0,_),this._actionIds.splice(a,0,c.id),a++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){dispose(this.viewItems),this.viewItemDisposables.forEach(e=>e.dispose()),this.viewItemDisposables.clear(),this.viewItems=[],this._actionIds=[],clearNode(this.actionsList),this.refreshRole()}length(){return this.viewItems.length}focus(e){let i=!1,o;if(e===void 0?i=!0:typeof e=="number"?o=e:typeof e=="boolean"&&(i=e),i&&typeof this.focusedItem>"u"){const a=this.viewItems.findIndex(c=>c.isEnabled());this.focusedItem=a===-1?void 0:a,this.updateFocus(void 0,void 0,!0)}else o!==void 0&&(this.focusedItem=o),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let o;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,o=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!o.isEnabled()||o.action.id===Separator.ID));return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let o;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=i,!1;this.focusedItem=this.viewItems.length-1}o=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!o.isEnabled()||o.action.id===Separator.ID));return this.updateFocus(!0),!0}updateFocus(e,i,o=!1){var a;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:i}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((a=this.viewItems[this.previouslyFocusedItem])===null||a===void 0||a.blur());const c=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(c){let d=!0;isFunction(c.focus)||(d=!1),this.options.focusOnlyEnabledItems&&isFunction(c.isEnabled)&&!c.isEnabled()&&(d=!1),c.action.id===Separator.ID&&(d=!1),d?(o||this.previouslyFocusedItem!==this.focusedItem)&&(c.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:i}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const i=this.viewItems[this.focusedItem];if(i instanceof BaseActionViewItem){const o=i._context===null||i._context===void 0?e:i._context;this.run(i._action,o)}}run(e,i){return __awaiter$i(this,void 0,void 0,function*(){yield this._actionRunner.run(e,i)})}dispose(){dispose(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const Extensions$1={IconContribution:"base.contributions.icons"};var IconContribution;(function(s){function e(i,o){let a=i.defaults;for(;ThemeIcon.isThemeIcon(a);){const c=iconRegistry.getIcon(a.id);if(!c)return;a=c.defaults}return a}s.getDefinition=e})(IconContribution||(IconContribution={}));var IconFontDefinition;(function(s){function e(o){return{weight:o.weight,style:o.style,src:o.src.map(a=>({format:a.format,location:a.location.toString()}))}}s.toJSONObject=e;function i(o){const a=c=>isString$1(c)?c:void 0;if(o&&Array.isArray(o.src)&&o.src.every(c=>isString$1(c.format)&&isString$1(c.location)))return{weight:a(o.weight),style:a(o.style),src:o.src.map(c=>({format:c.format,location:URI.parse(c.location)}))}}s.fromJSONObject=i})(IconFontDefinition||(IconFontDefinition={}));class IconRegistry{constructor(){this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:localize("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:localize("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${CSSIcon.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,i,o,a){const c=this.iconsById[e];if(c){if(o&&!c.description){c.description=o,this.iconSchema.properties[e].markdownDescription=`${o} $(${e})`;const b=this.iconReferenceSchema.enum.indexOf(e);b!==-1&&(this.iconReferenceSchema.enumDescriptions[b]=o),this._onDidChange.fire()}return c}const d={id:e,description:o,defaults:i,deprecationMessage:a};this.iconsById[e]=d;const _={$ref:"#/definitions/icons"};return a&&(_.deprecationMessage=a),o&&(_.markdownDescription=`${o}: $(${e})`),this.iconSchema.properties[e]=_,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(o||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(c,d)=>c.id.localeCompare(d.id),i=c=>{for(;ThemeIcon.isThemeIcon(c.defaults);)c=this.iconsById[c.defaults.id];return`codicon codicon-${c?c.id:""}`},o=[];o.push("| preview     | identifier                        | default codicon ID                | description"),o.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const a=Object.keys(this.iconsById).map(c=>this.iconsById[c]);for(const c of a.filter(d=>!!d.description).sort(e))o.push(`|<i class="${i(c)}"></i>|${c.id}|${ThemeIcon.isThemeIcon(c.defaults)?c.defaults.id:c.id}|${c.description||""}|`);o.push("| preview     | identifier                        "),o.push("| ----------- | --------------------------------- |");for(const c of a.filter(d=>!ThemeIcon.isThemeIcon(d.defaults)).sort(e))o.push(`|<i class="${i(c)}"></i>|${c.id}|`);return o.join(`
`)}}const iconRegistry=new IconRegistry;Registry.add(Extensions$1.IconContribution,iconRegistry);function registerIcon(s,e,i,o){return iconRegistry.registerIcon(s,e,i,o)}function getIconRegistry(){return iconRegistry}function initialize(){for(const s of Codicon.getAll())iconRegistry.registerIcon(s.id,s.definition,s.description)}initialize();const iconsSchemaId="vscode://schemas/icons",schemaRegistry=Registry.as(Extensions$8.JSONContribution);schemaRegistry.registerSchema(iconsSchemaId,iconRegistry.getIconSchema());const delayer=new RunOnceScheduler(()=>schemaRegistry.notifySchemaChanged(iconsSchemaId),200);iconRegistry.onDidChange(()=>{delayer.isScheduled()||delayer.schedule()});registerIcon("widget-close",Codicon.close,localize("widgetClose","Icon for the close action in widgets."));registerIcon("goto-previous-location",Codicon.arrowUp,localize("previousChangeIcon","Icon for goto previous editor location."));registerIcon("goto-next-location",Codicon.arrowDown,localize("nextChangeIcon","Icon for goto next editor location."));ThemeIcon.modify(Codicon.sync,"spin");ThemeIcon.modify(Codicon.loading,"spin");var __decorate$q=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$m=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$h=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})},_a$2;const DIFF_LINES_PADDING=3;class DiffEntry{constructor(e,i,o,a){this.originalLineStart=e,this.originalLineEnd=i,this.modifiedLineStart=o,this.modifiedLineEnd=a}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class Diff{constructor(e){this.entries=e}}const diffReviewInsertIcon=registerIcon("diff-review-insert",Codicon.add,localize("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),diffReviewRemoveIcon=registerIcon("diff-review-remove",Codicon.remove,localize("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),diffReviewCloseIcon=registerIcon("diff-review-close",Codicon.close,localize("diffReviewCloseIcon","Icon for 'Close' in diff review."));let DiffReview=class tn extends Disposable{constructor(e,i){super(),this._languageService=i,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=createFastDomNode(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=createFastDomNode(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new ActionBar(this.actionBarContainer.domNode)),this._actionBar.push(new Action("diffreview.close",localize("label.close","Close"),"close-diff-review "+ThemeIcon.asClassName(diffReviewCloseIcon),!0,()=>__awaiter$h(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=createFastDomNode(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=createFastDomNode(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new DomScrollableElement(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{!this._isVisible||(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{!this._isVisible||this._render()})),this._register(addStandardDisposableListener(this.domNode.domNode,"click",o=>{o.preventDefault();const a=findParentWithClass(o.target,"diff-review-row");a&&this._goToRow(a)})),this._register(addStandardDisposableListener(this.domNode.domNode,"keydown",o=>{(o.equals(18)||o.equals(2066)||o.equals(530))&&(o.preventDefault(),this._goToRow(this._getNextRow())),(o.equals(16)||o.equals(2064)||o.equals(528))&&(o.preventDefault(),this._goToRow(this._getPrevRow())),(o.equals(9)||o.equals(2057)||o.equals(521)||o.equals(1033))&&(o.preventDefault(),this.hide()),(o.equals(10)||o.equals(3))&&(o.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let o=-1;for(let a=0,c=this._diffs.length;a<c;a++)if(this._diffs[a]===this._currentDiff){o=a;break}e=this._diffs.length+o-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const i=this._diffs[e].entries;this._diffEditor.setPosition(new Position$1(i[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:i[0].modifiedLineStart,endColumn:1073741824,endLineNumber:i[i.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let o=-1;for(let a=0,c=this._diffs.length;a<c;a++)if(this._diffs[a]===this._currentDiff){o=a;break}e=o+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const i=this._diffs[e].entries;this._diffEditor.setPosition(new Position$1(i[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:i[0].modifiedLineStart,endColumn:1073741824,endLineNumber:i[i.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const i=this._getCurrentFocusedRow();if(i){const o=parseInt(i.getAttribute("data-line"),10);isNaN(o)||(e=o)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Position$1(e,1)),this._diffEditor.revealPosition(new Position$1(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const i=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),i&&i!==e&&(i.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,i,o){this._width=i,this.shadow.setTop(e-6),this.shadow.setWidth(i),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(i),this.domNode.setHeight(o),this._content.setHeight(o),this._content.setWidth(i),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const i=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel();return!i||!o?[]:tn._mergeAdjacent(e,i.getLineCount(),o.getLineCount())}static _mergeAdjacent(e,i,o){if(!e||e.length===0)return[];const a=[];let c=0;for(let k=0,j=e.length;k<j;k++){const _e=e[k],et=_e.originalStartLineNumber,tt=_e.originalEndLineNumber,it=_e.modifiedStartLineNumber,st=_e.modifiedEndLineNumber,ot=[];let nt=0;{const rt=tt===0?et:et-1,at=st===0?it:it-1;let lt=1,gt=1;if(k>0){const ct=e[k-1];ct.originalEndLineNumber===0?lt=ct.originalStartLineNumber+1:lt=ct.originalEndLineNumber+1,ct.modifiedEndLineNumber===0?gt=ct.modifiedStartLineNumber+1:gt=ct.modifiedEndLineNumber+1}let ht=rt-DIFF_LINES_PADDING+1,ut=at-DIFF_LINES_PADDING+1;if(ht<lt){const ct=lt-ht;ht=ht+ct,ut=ut+ct}if(ut<gt){const ct=gt-ut;ht=ht+ct,ut=ut+ct}ot[nt++]=new DiffEntry(ht,rt,ut,at)}tt!==0&&(ot[nt++]=new DiffEntry(et,tt,0,0)),st!==0&&(ot[nt++]=new DiffEntry(0,0,it,st));{const rt=tt===0?et+1:tt+1,at=st===0?it+1:st+1;let lt=i,gt=o;if(k+1<j){const ct=e[k+1];ct.originalEndLineNumber===0?lt=ct.originalStartLineNumber:lt=ct.originalStartLineNumber-1,ct.modifiedEndLineNumber===0?gt=ct.modifiedStartLineNumber:gt=ct.modifiedStartLineNumber-1}let ht=rt+DIFF_LINES_PADDING-1,ut=at+DIFF_LINES_PADDING-1;if(ht>lt){const ct=lt-ht;ht=ht+ct,ut=ut+ct}if(ut>gt){const ct=gt-ut;ht=ht+ct,ut=ut+ct}ot[nt++]=new DiffEntry(rt,ht,at,ut)}a[c++]=new Diff(ot)}let d=a[0].entries;const _=[];let b=0;for(let k=1,j=a.length;k<j;k++){const _e=a[k].entries,et=d[d.length-1],tt=_e[0];if(et.getType()===0&&tt.getType()===0&&tt.originalLineStart<=et.originalLineEnd){d[d.length-1]=new DiffEntry(et.originalLineStart,tt.originalLineEnd,et.modifiedLineStart,tt.modifiedLineEnd),d=d.concat(_e.slice(1));continue}_[b++]=new Diff(d),d=_e}return _[b++]=new Diff(d),_}_findDiffIndex(e){const i=e.lineNumber;for(let o=0,a=this._diffs.length;o<a;o++){const c=this._diffs[o].entries,d=c[c.length-1].modifiedLineEnd;if(i<=d)return o}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),i=this._diffEditor.getModifiedEditor().getOptions(),o=this._diffEditor.getOriginalEditor().getModel(),a=this._diffEditor.getModifiedEditor().getModel(),c=o.getOptions(),d=a.getOptions();if(!this._isVisible||!o||!a){clearNode(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const _=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[_]===this._currentDiff)return;this._currentDiff=this._diffs[_];const b=this._diffs[_].entries,k=document.createElement("div");k.className="diff-review-table",k.setAttribute("role","list"),k.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),applyFontInfo(k,i.get(46));let j=0,_e=0,et=0,tt=0;for(let ut=0,ct=b.length;ut<ct;ut++){const ft=b[ut],dt=ft.originalLineStart,pt=ft.originalLineEnd,mt=ft.modifiedLineStart,_t=ft.modifiedLineEnd;dt!==0&&(j===0||dt<j)&&(j=dt),pt!==0&&(_e===0||pt>_e)&&(_e=pt),mt!==0&&(et===0||mt<et)&&(et=mt),_t!==0&&(tt===0||_t>tt)&&(tt=_t)}const it=document.createElement("div");it.className="diff-review-row";const st=document.createElement("div");st.className="diff-review-cell diff-review-summary";const ot=_e-j+1,nt=tt-et+1;st.appendChild(document.createTextNode(`${_+1}/${this._diffs.length}: @@ -${j},${ot} +${et},${nt} @@`)),it.setAttribute("data-line",String(et));const rt=ut=>ut===0?localize("no_lines_changed","no lines changed"):ut===1?localize("one_line_changed","1 line changed"):localize("more_lines_changed","{0} lines changed",ut),at=rt(ot),lt=rt(nt);it.setAttribute("aria-label",localize({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,this._diffs.length,j,at,et,lt)),it.appendChild(st),it.setAttribute("role","listitem"),k.appendChild(it);const gt=i.get(61);let ht=et;for(let ut=0,ct=b.length;ut<ct;ut++){const ft=b[ut];tn._renderSection(k,ft,ht,gt,this._width,e,o,c,i,a,d,this._languageService.languageIdCodec),ft.modifiedLineStart!==0&&(ht=ft.modifiedLineEnd)}clearNode(this._content.domNode),this._content.domNode.appendChild(k),this.scrollbar.scanDomNode()}static _renderSection(e,i,o,a,c,d,_,b,k,j,_e,et){const tt=i.getType();let it="diff-review-row",st="";const ot="diff-review-spacer";let nt=null;switch(tt){case 1:it="diff-review-row line-insert",st=" char-insert",nt=diffReviewInsertIcon;break;case 2:it="diff-review-row line-delete",st=" char-delete",nt=diffReviewRemoveIcon;break}const rt=i.originalLineStart,at=i.originalLineEnd,lt=i.modifiedLineStart,gt=i.modifiedLineEnd,ht=Math.max(gt-lt,at-rt),ut=d.get(133),ct=ut.glyphMarginWidth+ut.lineNumbersWidth,ft=k.get(133),dt=10+ft.glyphMarginWidth+ft.lineNumbersWidth;for(let pt=0;pt<=ht;pt++){const mt=rt===0?0:rt+pt,_t=lt===0?0:lt+pt,Ct=document.createElement("div");Ct.style.minWidth=c+"px",Ct.className=it,Ct.setAttribute("role","listitem"),_t!==0&&(o=_t),Ct.setAttribute("data-line",String(o));const bt=document.createElement("div");bt.className="diff-review-cell",bt.style.height=`${a}px`,Ct.appendChild(bt);const yt=document.createElement("span");yt.style.width=ct+"px",yt.style.minWidth=ct+"px",yt.className="diff-review-line-number"+st,mt!==0?yt.appendChild(document.createTextNode(String(mt))):yt.innerText="\xA0",bt.appendChild(yt);const wt=document.createElement("span");wt.style.width=dt+"px",wt.style.minWidth=dt+"px",wt.style.paddingRight="10px",wt.className="diff-review-line-number"+st,_t!==0?wt.appendChild(document.createTextNode(String(_t))):wt.innerText="\xA0",bt.appendChild(wt);const Tt=document.createElement("span");if(Tt.className=ot,nt){const St=document.createElement("span");St.className=ThemeIcon.asClassName(nt),St.innerText="\xA0\xA0",Tt.appendChild(St)}else Tt.innerText="\xA0\xA0";bt.appendChild(Tt);let kt;if(_t!==0){let St=this._renderLine(j,k,_e.tabSize,_t,et);tn._ttPolicy&&(St=tn._ttPolicy.createHTML(St)),bt.insertAdjacentHTML("beforeend",St),kt=j.getLineContent(_t)}else{let St=this._renderLine(_,d,b.tabSize,mt,et);tn._ttPolicy&&(St=tn._ttPolicy.createHTML(St)),bt.insertAdjacentHTML("beforeend",St),kt=_.getLineContent(mt)}kt.length===0&&(kt=localize("blankLine","blank"));let Rt="";switch(tt){case 0:mt===_t?Rt=localize({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",kt,mt):Rt=localize("equalLine","{0} original line {1} modified line {2}",kt,mt,_t);break;case 1:Rt=localize("insertLine","+ {0} modified line {1}",kt,_t);break;case 2:Rt=localize("deleteLine","- {0} original line {1}",kt,mt);break}Ct.setAttribute("aria-label",Rt),e.appendChild(Ct)}}static _renderLine(e,i,o,a,c){const d=e.getLineContent(a),_=i.get(46),b=LineTokens.createEmpty(d,c),k=ViewLineRenderingData.isBasicASCII(d,e.mightContainNonBasicASCII()),j=ViewLineRenderingData.containsRTL(d,k,e.mightContainRTL());return renderViewLine2(new RenderLineInput(_.isMonospace&&!i.get(29),_.canUseHalfwidthRightwardsArrow,d,!1,k,j,0,b,[],o,0,_.spaceWidth,_.middotWidth,_.wsmiddotWidth,i.get(107),i.get(90),i.get(85),i.get(47)!==EditorFontLigatures.OFF,null)).html}};DiffReview._ttPolicy=(_a$2=window.trustedTypes)===null||_a$2===void 0?void 0:_a$2.createPolicy("diffReview",{createHTML:s=>s});DiffReview=__decorate$q([__param$m(1,ILanguageService)],DiffReview);registerThemingParticipant((s,e)=>{const i=s.getColor(editorLineNumbers);i&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${i}; }`);const o=s.getColor(scrollbarShadow);o&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${o} 0 -6px 6px -6px inset; }`)});class DiffReviewNext extends EditorAction{constructor(){super({id:"editor.action.diffReview.next",label:localize("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:ContextKeyExpr.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,i){const o=findFocusedDiffEditor(e);o&&o.diffReviewNext()}}class DiffReviewPrev extends EditorAction{constructor(){super({id:"editor.action.diffReview.prev",label:localize("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:ContextKeyExpr.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,i){const o=findFocusedDiffEditor(e);o&&o.diffReviewPrev()}}function findFocusedDiffEditor(s){const e=s.get(ICodeEditorService),i=e.listDiffEditors(),o=e.getActiveCodeEditor();if(!o)return null;for(let a=0,c=i.length;a<c;a++){const d=i[a];if(d.getModifiedEditor().getId()===o.getId()||d.getOriginalEditor().getId()===o.getId())return d}return null}registerEditorAction(DiffReviewNext);registerEditorAction(DiffReviewPrev);const ID_EDITOR_WORKER_SERVICE="editorWorkerService",IEditorWorkerService=createDecorator(ID_EDITOR_WORKER_SERVICE),IContextViewService=createDecorator("contextViewService"),IContextMenuService=createDecorator("contextMenuService");var __awaiter$g=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class InlineDiffMargin extends Disposable{constructor(e,i,o,a,c,d){super(),this._viewZoneId=e,this._marginDomNode=i,this.editor=o,this.diff=a,this._contextMenuService=c,this._clipboardService=d,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Codicon.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const _=o.getOption(61),b=o.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${_}px`,this._diffActions.style.lineHeight=`${_}px`,this._marginDomNode.appendChild(this._diffActions);const k=[],j=a.modifiedEndLineNumber===0;k.push(new Action("diff.clipboard.copyDeletedContent",j?a.originalEndLineNumber>a.modifiedStartLineNumber?localize("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):localize("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):a.originalEndLineNumber>a.modifiedStartLineNumber?localize("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):localize("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>__awaiter$g(this,void 0,void 0,function*(){const st=new Range$2(a.originalStartLineNumber,1,a.originalEndLineNumber+1,1),ot=a.originalModel.getValueInRange(st);yield this._clipboardService.writeText(ot)})));let _e=0,et;a.originalEndLineNumber>a.modifiedStartLineNumber&&(et=new Action("diff.clipboard.copyDeletedLineContent",j?localize("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber):localize("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber),void 0,!0,()=>__awaiter$g(this,void 0,void 0,function*(){const st=a.originalModel.getLineContent(a.originalStartLineNumber+_e);if(st===""){const ot=a.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(ot===0?`
`:`\r
`)}else yield this._clipboardService.writeText(st)})),k.push(et)),o.getOption(83)||k.push(new Action("diff.inline.revertChange",localize("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>__awaiter$g(this,void 0,void 0,function*(){const st=new Range$2(a.originalStartLineNumber,1,a.originalEndLineNumber,a.originalModel.getLineMaxColumn(a.originalEndLineNumber)),ot=a.originalModel.getValueInRange(st);if(a.modifiedEndLineNumber===0){const nt=o.getModel().getLineMaxColumn(a.modifiedStartLineNumber);o.executeEdits("diffEditor",[{range:new Range$2(a.modifiedStartLineNumber,nt,a.modifiedStartLineNumber,nt),text:b+ot}])}else{const nt=o.getModel().getLineMaxColumn(a.modifiedEndLineNumber);o.executeEdits("diffEditor",[{range:new Range$2(a.modifiedStartLineNumber,1,a.modifiedEndLineNumber,nt),text:ot}])}})));const it=(st,ot)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:st,y:ot}),getActions:()=>(et&&(et.label=j?localize("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber+_e):localize("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber+_e)),k),autoSelectFirstItem:!0})};this._register(addStandardDisposableListener(this._diffActions,"mousedown",st=>{const{top:ot,height:nt}=getDomNodePagePosition(this._diffActions),rt=Math.floor(_/3);st.preventDefault(),it(st.posx,ot+nt+rt)})),this._register(o.onMouseMove(st=>{st.target.type===8||st.target.type===5?st.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,_e=this._updateLightBulbPosition(this._marginDomNode,st.event.browserEvent.y,_)):this.visibility=!1:this.visibility=!1})),this._register(o.onMouseDown(st=>{!st.event.rightButton||(st.target.type===8||st.target.type===5)&&st.target.detail.viewZoneId===this._viewZoneId&&(st.event.preventDefault(),_e=this._updateLightBulbPosition(this._marginDomNode,st.event.browserEvent.y,_),it(st.event.posx,st.event.posy+_))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,i,o){const{top:a}=getDomNodePagePosition(e),c=i-a,d=Math.floor(c/o),_=d*o;if(this._diffActions.style.top=`${_}px`,this.diff.viewLineCounts){let b=0;for(let k=0;k<this.diff.viewLineCounts.length;k++)if(b+=this.diff.viewLineCounts[k],d<b)return k}return d}}const IClipboardService=createDecorator("clipboardService"),IProgressService=createDecorator("progressService");Object.freeze({total(){},worked(){},done(){}});Object.freeze({report(){}});const IEditorProgressService=createDecorator("editorProgressService");var __decorate$p=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$l=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},_a$1;class VisualEditorState{constructor(e,i){this._contextMenuService=e,this._clipboardService=i,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(i=>!this._zonesMap[String(i.id)])}clean(e){this._zones.length>0&&e.changeViewZones(i=>{for(const o of this._zones)i.removeZone(o)}),this._zones=[],this._zonesMap={},e.changeDecorations(i=>{this._decorations=i.deltaDecorations(this._decorations,[])})}apply(e,i,o,a){const c=a?StableEditorScrollState.capture(e):null;e.changeViewZones(d=>{var _;for(const b of this._zones)d.removeZone(b);for(const b of this._inlineDiffMargins)b.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let b=0,k=o.zones.length;b<k;b++){const j=o.zones[b];j.suppressMouseDown=!0;const _e=d.addZone(j);this._zones.push(_e),this._zonesMap[String(_e)]=!0,o.zones[b].diff&&j.marginDomNode&&(j.suppressMouseDown=!1,((_=o.zones[b].diff)===null||_===void 0?void 0:_.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new InlineDiffMargin(_e,j.marginDomNode,e,o.zones[b].diff,this._contextMenuService,this._clipboardService)))}}),c==null||c.restore(e),e.changeDecorations(d=>{this._decorations=d.deltaDecorations(this._decorations,o.decorations)}),i==null||i.setZones(o.overviewZones)}}let DIFF_EDITOR_ID=0;const diffInsertIcon=registerIcon("diff-insert",Codicon.add,localize("diffInsertIcon","Line decoration for inserts in the diff editor.")),diffRemoveIcon=registerIcon("diff-remove",Codicon.remove,localize("diffRemoveIcon","Line decoration for removals in the diff editor.")),ttPolicy=(_a$1=window.trustedTypes)===null||_a$1===void 0?void 0:_a$1.createPolicy("diffEditorWidget",{createHTML:s=>s});let DiffEditorWidget=class $t extends Disposable{constructor(e,i,o,a,c,d,_,b,k,j,_e,et){super(),this._editorProgressService=et,this._onDidDispose=this._register(new Emitter$1),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new Emitter$1),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new Emitter$1),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=c,this._codeEditorService=b,this._contextKeyService=this._register(d.createScoped(e)),this._instantiationService=_.createChild(new ServiceCollection([IContextKeyService,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=k,this._notificationService=j,this._id=++DIFF_EDITOR_ID,this._state=0,this._updatingDiffProgress=null,this._domElement=e,i=i||{},this._options=validateDiffEditorOptions(i,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof i.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",i.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new RunOnceScheduler(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=$t._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=createFastDomNode(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(addStandardDisposableListener(this._overviewDomElement,EventType$1.POINTER_DOWN,it=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(it)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new VisualEditorState(_e,a),this._modifiedEditorState=new VisualEditorState(_e,a),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new ElementSizeObserver(this._containerDomElement,i.dimension)),this._register(this._elementSizeObserver.onDidChange(()=>this._onDidContainerSizeChanged())),i.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(i,o.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(i,o.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=_.createInstance(DiffReview,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(k.onDidColorThemeChange(it=>{this._strategy&&this._strategy.applyColors(it)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=$t._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const tt=EditorExtensionsRegistry.getDiffEditorContributions();for(const it of tt)try{this._register(_.createInstance(it.ctor,this))}catch(st){onUnexpectedError(st)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,i){let o="monaco-diff-editor monaco-editor-background ";return i&&(o+="side-by-side "),o+=getThemeTypeSelector(e.type),o}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){!this._options.renderOverviewRuler||(ok(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,i){const o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),i);this._register(o.onDidScrollChange(c=>{this._isHandlingScrollEvent||!c.scrollTopChanged&&!c.scrollLeftChanged&&!c.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(c=>{!o.getModel()||(c.hasChanged(46)&&this._updateDecorationsRunner.schedule(),c.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const a=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>a.set(!0))),this._register(o.onDidBlurEditorWidget(()=>a.set(!1))),this._register(o.onDidContentSizeChange(c=>{const d=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+$t.ONE_OVERVIEW_WIDTH,_=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:_,contentWidth:d,contentHeightChanged:c.contentHeightChanged,contentWidthChanged:c.contentWidthChanged})})),o}_createRightHandSideEditor(e,i){const o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),i);this._register(o.onDidScrollChange(c=>{this._isHandlingScrollEvent||!c.scrollTopChanged&&!c.scrollLeftChanged&&!c.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:c.scrollLeft,scrollTop:c.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(o.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(o.onDidChangeConfiguration(c=>{!o.getModel()||(c.hasChanged(46)&&this._updateDecorationsRunner.schedule(),c.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(o.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(o.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(o.onDidChangeModelOptions(c=>{c.tabSize&&this._updateDecorationsRunner.schedule()}));const a=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget(()=>a.set(!0))),this._register(o.onDidBlurEditorWidget(()=>a.set(!1))),this._register(o.onDidContentSizeChange(c=>{const d=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+$t.ONE_OVERVIEW_WIDTH,_=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:_,contentWidth:d,contentHeightChanged:c.contentHeightChanged,contentWidthChanged:c.contentWidthChanged})})),this._register(o.onMouseDown(c=>{var d,_;if(!c.event.rightButton&&c.target.position&&((d=c.target.element)===null||d===void 0?void 0:d.className.includes("arrow-revert-change"))){const b=c.target.position.lineNumber,k=(_=this._diffComputationResult)===null||_===void 0?void 0:_.changes.find(j=>j.modifiedStartLineNumber===b-1||j.modifiedStartLineNumber===b);k&&this.revertChange(k),c.event.stopPropagation(),this._updateDecorations();return}})),o}revertChange(e){const i=this._modifiedEditor,o=this._originalEditor.getModel(),a=this._modifiedEditor.getModel();if(!o||!a||!i)return;const c=e.originalEndLineNumber>0?new Range$2(e.originalStartLineNumber,1,e.originalEndLineNumber,o.getLineMaxColumn(e.originalEndLineNumber)):null,d=c?o.getValueInRange(c):null,_=e.modifiedEndLineNumber>0?new Range$2(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,a.getLineMaxColumn(e.modifiedEndLineNumber)):null,b=a.getEOL();if(e.originalEndLineNumber===0&&_){let k=_;e.modifiedStartLineNumber>1?k=_.setStartPosition(e.modifiedStartLineNumber-1,a.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<a.getLineCount()&&(k=_.setEndPosition(e.modifiedEndLineNumber+1,1)),i.executeEdits("diffEditor",[{range:k,text:""}])}else if(e.modifiedEndLineNumber===0&&d!==null){const k=e.modifiedStartLineNumber<a.getLineCount()?new Position$1(e.modifiedStartLineNumber+1,1):new Position$1(e.modifiedStartLineNumber,a.getLineMaxColumn(e.modifiedStartLineNumber));i.executeEdits("diffEditor",[{range:Range$2.fromPositions(k,k),text:e.modifiedStartLineNumber<a.getLineCount()?d+b:b+d}])}else _&&d!==null&&i.executeEdits("diffEditor",[{range:_,text:d}])}_createInnerEditor(e,i,o,a){return e.createInstance(CodeEditorWidget,i,o,a)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return EditorType.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const i=validateDiffEditorOptions(e,this._options),o=changedDiffEditorOptions(this._options,i);this._options=i;const a=o.ignoreTrimWhitespace||o.renderIndicators||o.renderMarginRevertIcon,c=this._isVisible&&(o.maxComputationTime||o.maxFileSize);a?this._beginUpdateDecorations():c&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),o.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new DiffEditorWidgetSideBySide(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new DiffEditorWidgetInline(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=$t._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),o.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,i="api"){this._modifiedEditor.setPosition(e,i)}revealLine(e,i=0){this._modifiedEditor.revealLine(e,i)}revealLineInCenter(e,i=0){this._modifiedEditor.revealLineInCenter(e,i)}revealLineInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,i)}revealLineNearTop(e,i=0){this._modifiedEditor.revealLineNearTop(e,i)}revealPosition(e,i=0){this._modifiedEditor.revealPosition(e,i)}revealPositionInCenter(e,i=0){this._modifiedEditor.revealPositionInCenter(e,i)}revealPositionInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,i)}revealPositionNearTop(e,i=0){this._modifiedEditor.revealPositionNearTop(e,i)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,i="api"){this._modifiedEditor.setSelection(e,i)}setSelections(e,i="api"){this._modifiedEditor.setSelections(e,i)}revealLines(e,i,o=0){this._modifiedEditor.revealLines(e,i,o)}revealLinesInCenter(e,i,o=0){this._modifiedEditor.revealLinesInCenter(e,i,o)}revealLinesInCenterIfOutsideViewport(e,i,o=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,i,o)}revealLinesNearTop(e,i,o=0){this._modifiedEditor.revealLinesNearTop(e,i,o)}revealRange(e,i=0,o=!1,a=!0){this._modifiedEditor.revealRange(e,i,o,a)}revealRangeInCenter(e,i=0){this._modifiedEditor.revealRangeInCenter(e,i)}revealRangeInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,i)}revealRangeNearTop(e,i=0){this._modifiedEditor.revealRangeNearTop(e,i)}revealRangeNearTopIfOutsideViewport(e,i=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,i)}revealRangeAtTop(e,i=0){this._modifiedEditor.revealRangeAtTop(e,i)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),i=this._modifiedEditor.saveViewState();return{original:e,modified:i}}restoreViewState(e){if(e&&e.original&&e.modified){const i=e;this._originalEditor.restoreViewState(i.original),this._modifiedEditor.restoreViewState(i.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,i,o){this._modifiedEditor.trigger(e,i,o)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),o=$t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*$t.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:$t.ONE_OVERVIEW_WIDTH,right:o+$t.ONE_OVERVIEW_WIDTH,height:e-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:$t.ONE_OVERVIEW_WIDTH,height:e-i}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),$t.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,i){return!e&&!i?!0:!e||!i?!1:e.toString()===i.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),i=this._modifiedEditor.getModel();if(!e||!i)return;this._diffComputationToken++;const o=this._diffComputationToken,a=this._options.maxFileSize*1024*1024,c=d=>{const _=d.getValueLength();return a===0||_<=a};if(!c(e)||!c(i)){(!$t._equals(e.uri,this._lastOriginalWarning)||!$t._equals(i.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=i.uri,this._notificationService.warn(localize("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,i.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(d=>{o===this._diffComputationToken&&e===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=d,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},d=>{o===this._diffComputationToken&&e===this._originalEditor.getModel()&&i===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],i=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),o=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),a=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,i,o);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,a.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,a.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const i=Object.assign({},e);return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens,i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,i}_adjustOptionsForLeftHandSide(e){const i=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?i.wordWrapOverride1=this._options.diffWordWrap:(i.wordWrapOverride1="off",i.wordWrapOverride2="off"),e.originalAriaLabel&&(i.ariaLabel=e.originalAriaLabel),i.readOnly=!this._options.originalEditable,i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const i=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(i.ariaLabel=e.modifiedAriaLabel),i.wordWrapOverride1=this._options.diffWordWrap,i.revealHorizontalRightPadding=EditorOptions.revealHorizontalRightPadding.defaultValue+$t.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),o=this._getReviewHeight(),a=this._strategy.layout();this._originalDomNode.style.width=a+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-a+"px",this._modifiedDomNode.style.left=a+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-o+"px",this._overviewDomElement.style.width=$t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-$t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth($t.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:a,height:i-o}),this._modifiedEditor.layout({width:e-a-(this._options.renderOverviewRuler?$t.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-o}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-o,e,o),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const i=this._modifiedEditor.getScrollTop(),o=this._modifiedEditor.getScrollHeight(),a=Math.max(0,e.height),c=Math.max(0,a-2*0),d=o>0?c/o:0,_=Math.max(0,Math.floor(e.height*d)),b=Math.floor(i*d);return{height:_,top:b}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,i){const o=this._diffComputationResult?this._diffComputationResult.changes:[];if(o.length===0||e<i(o[0]))return null;let a=0,c=o.length-1;for(;a<c;){const d=Math.floor((a+c)/2),_=i(o[d]),b=d+1<=c?i(o[d+1]):1073741824;e<_?c=d-1:e>=b?a=d+1:(a=d,c=d)}return o[a]}_getEquivalentLineForOriginalLineNumber(e){const i=this._getLineChangeAtOrBeforeLineNumber(e,b=>b.originalStartLineNumber);if(!i)return e;const o=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),a=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),c=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,d=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,_=e-o;return _<=c?a+Math.min(_,d):a+d-c+_}_getEquivalentLineForModifiedLineNumber(e){const i=this._getLineChangeAtOrBeforeLineNumber(e,b=>b.modifiedStartLineNumber);if(!i)return e;const o=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),a=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),c=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,d=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,_=e-a;return _<=d?o+Math.min(_,c):o+c-d+_}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};DiffEditorWidget.ONE_OVERVIEW_WIDTH=15;DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH=30;DiffEditorWidget.UPDATE_DIFF_DECORATIONS_DELAY=200;DiffEditorWidget=__decorate$p([__param$l(3,IClipboardService),__param$l(4,IEditorWorkerService),__param$l(5,IContextKeyService),__param$l(6,IInstantiationService),__param$l(7,ICodeEditorService),__param$l(8,IThemeService),__param$l(9,INotificationService),__param$l(10,IContextMenuService),__param$l(11,IEditorProgressService)],DiffEditorWidget);class DiffEditorWidgetStyle extends Disposable{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const i=e.getColor(diffOverviewRulerInserted)||(e.getColor(diffInserted)||defaultInsertColor).transparent(2),o=e.getColor(diffOverviewRulerRemoved)||(e.getColor(diffRemoved)||defaultRemoveColor).transparent(2),a=!i.equals(this._insertColor)||!o.equals(this._removeColor);return this._insertColor=i,this._removeColor=o,a}getEditorsDiffDecorations(e,i,o,a,c,d){d=d.sort((j,_e)=>j.afterLineNumber-_e.afterLineNumber),c=c.sort((j,_e)=>j.afterLineNumber-_e.afterLineNumber);const _=this._getViewZones(e,c,d,o),b=this._getOriginalEditorDecorations(_,e,i,o),k=this._getModifiedEditorDecorations(_,e,i,o,a);return{original:{decorations:b.decorations,overviewZones:b.overviewZones,zones:_.original},modified:{decorations:k.decorations,overviewZones:k.overviewZones,zones:_.modified}}}}class ForeignViewZonesIterator{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ViewZonesComputer{constructor(e,i,o,a,c){this._lineChanges=e,this._originalForeignVZ=i,this._modifiedForeignVZ=o,this._originalEditor=a,this._modifiedEditor=c}static _getViewLineCount(e,i,o){const a=e.getModel(),c=e._getViewModel();if(a&&c){const d=getViewRange(a,c,i,o);return d.endLineNumber-d.startLineNumber+1}return o-i+1}getViewZones(){const e=this._originalEditor.getOption(61),i=this._modifiedEditor.getOption(61),o=this._originalEditor.getOption(134).wrappingColumn!==-1,a=this._modifiedEditor.getOption(134).wrappingColumn!==-1,c=o||a,d=this._originalEditor.getModel(),_=this._originalEditor._getViewModel().coordinatesConverter,b=this._modifiedEditor._getViewModel().coordinatesConverter,k={original:[],modified:[]};let j=0,_e=0,et=0,tt=0,it=0,st=0;const ot=(ht,ut)=>ht.afterLineNumber-ut.afterLineNumber,nt=(ht,ut)=>{if(ut.domNode===null&&ht.length>0){const ct=ht[ht.length-1];if(ct.afterLineNumber===ut.afterLineNumber&&ct.domNode===null){ct.heightInLines+=ut.heightInLines;return}}ht.push(ut)},rt=new ForeignViewZonesIterator(this._modifiedForeignVZ),at=new ForeignViewZonesIterator(this._originalForeignVZ);let lt=1,gt=1;for(let ht=0,ut=this._lineChanges.length;ht<=ut;ht++){const ct=ht<ut?this._lineChanges[ht]:null;ct!==null?(et=ct.originalStartLineNumber+(ct.originalEndLineNumber>0?-1:0),tt=ct.modifiedStartLineNumber+(ct.modifiedEndLineNumber>0?-1:0),_e=ct.originalEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._originalEditor,ct.originalStartLineNumber,ct.originalEndLineNumber):0,j=ct.modifiedEndLineNumber>0?ViewZonesComputer._getViewLineCount(this._modifiedEditor,ct.modifiedStartLineNumber,ct.modifiedEndLineNumber):0,it=Math.max(ct.originalStartLineNumber,ct.originalEndLineNumber),st=Math.max(ct.modifiedStartLineNumber,ct.modifiedEndLineNumber)):(et+=1e7+_e,tt+=1e7+j,it=et,st=tt);let ft=[],dt=[];if(c){let _t;ct?ct.originalEndLineNumber>0?_t=ct.originalStartLineNumber-lt:_t=ct.modifiedStartLineNumber-gt:_t=d.getLineCount()-lt+1;for(let Ct=0;Ct<_t;Ct++){const bt=lt+Ct,yt=gt+Ct,wt=_.getModelLineViewLineCount(bt),Tt=b.getModelLineViewLineCount(yt);wt<Tt?ft.push({afterLineNumber:bt,heightInLines:Tt-wt,domNode:null,marginDomNode:null}):wt>Tt&&dt.push({afterLineNumber:yt,heightInLines:wt-Tt,domNode:null,marginDomNode:null})}ct&&(lt=(ct.originalEndLineNumber>0?ct.originalEndLineNumber:ct.originalStartLineNumber)+1,gt=(ct.modifiedEndLineNumber>0?ct.modifiedEndLineNumber:ct.modifiedStartLineNumber)+1)}for(;rt.current&&rt.current.afterLineNumber<=st;){let _t;rt.current.afterLineNumber<=tt?_t=et-tt+rt.current.afterLineNumber:_t=it;let Ct=null;ct&&ct.modifiedStartLineNumber<=rt.current.afterLineNumber&&rt.current.afterLineNumber<=ct.modifiedEndLineNumber&&(Ct=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),ft.push({afterLineNumber:_t,heightInLines:rt.current.height/i,domNode:null,marginDomNode:Ct}),rt.advance()}for(;at.current&&at.current.afterLineNumber<=it;){let _t;at.current.afterLineNumber<=et?_t=tt-et+at.current.afterLineNumber:_t=st,dt.push({afterLineNumber:_t,heightInLines:at.current.height/e,domNode:null}),at.advance()}if(ct!==null&&isChangeOrInsert(ct)){const _t=this._produceOriginalFromDiff(ct,_e,j);_t&&ft.push(_t)}if(ct!==null&&isChangeOrDelete(ct)){const _t=this._produceModifiedFromDiff(ct,_e,j);_t&&dt.push(_t)}let pt=0,mt=0;for(ft=ft.sort(ot),dt=dt.sort(ot);pt<ft.length&&mt<dt.length;){const _t=ft[pt],Ct=dt[mt],bt=_t.afterLineNumber-et,yt=Ct.afterLineNumber-tt;bt<yt?(nt(k.original,_t),pt++):yt<bt?(nt(k.modified,Ct),mt++):_t.shouldNotShrink?(nt(k.original,_t),pt++):Ct.shouldNotShrink?(nt(k.modified,Ct),mt++):_t.heightInLines>=Ct.heightInLines?(_t.heightInLines-=Ct.heightInLines,mt++):(Ct.heightInLines-=_t.heightInLines,pt++)}for(;pt<ft.length;)nt(k.original,ft[pt]),pt++;for(;mt<dt.length;)nt(k.modified,dt[mt]),mt++}return{original:ViewZonesComputer._ensureDomNodes(k.original),modified:ViewZonesComputer._ensureDomNodes(k.modified)}}static _ensureDomNodes(e){return e.map(i=>(i.domNode||(i.domNode=createFakeLinesDiv()),i))}}function createDecoration(s,e,i,o,a){return{range:new Range$2(s,e,i,o),options:a}}const DECORATIONS={arrowRevertChange:ModelDecorationOptions.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+ThemeIcon.asClassName(Codicon.arrowRight)}),charDelete:ModelDecorationOptions.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:ModelDecorationOptions.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:ModelDecorationOptions.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:ModelDecorationOptions.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:ModelDecorationOptions.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:ModelDecorationOptions.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+ThemeIcon.asClassName(diffInsertIcon),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:ModelDecorationOptions.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:ModelDecorationOptions.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+ThemeIcon.asClassName(diffRemoveIcon),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:ModelDecorationOptions.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class DiffEditorWidgetSideBySide extends DiffEditorWidgetStyle{constructor(e,i){super(e),this._disableSash=i===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Sash(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(o=>this._onSashDrag(o)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const i=e===!1;this._disableSash!==i&&(this._disableSash=i,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const o=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let a=Math.floor((e||.5)*o);const c=Math.floor(.5*o);return a=this._disableSash?c:a||c,o>DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH*2?(a<DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH&&(a=DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH),a>o-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH&&(a=o-DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH)):a=c,this._sashPosition!==a&&(this._sashPosition=a),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const o=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?DiffEditorWidget.ENTIRE_DIFF_OVERVIEW_WIDTH:0),a=this.layout((this._startSashPosition+(e.currentX-e.startX))/o);this._sashRatio=a/o,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,i,o){const a=this._dataSource.getOriginalEditor(),c=this._dataSource.getModifiedEditor();return new SideBySideViewZonesComputer(e,i,o,a,c).getViewZones()}_getOriginalEditorDecorations(e,i,o,a){const c=this._dataSource.getOriginalEditor(),d=String(this._removeColor),_={decorations:[],overviewZones:[]},b=c.getModel(),k=c._getViewModel();for(const j of i)if(isChangeOrDelete(j)){_.decorations.push({range:new Range$2(j.originalStartLineNumber,1,j.originalEndLineNumber,1073741824),options:a?DECORATIONS.lineDeleteWithSign:DECORATIONS.lineDelete}),(!isChangeOrInsert(j)||!j.charChanges)&&_.decorations.push(createDecoration(j.originalStartLineNumber,1,j.originalEndLineNumber,1073741824,DECORATIONS.charDeleteWholeLine));const _e=getViewRange(b,k,j.originalStartLineNumber,j.originalEndLineNumber);if(_.overviewZones.push(new OverviewRulerZone(_e.startLineNumber,_e.endLineNumber,0,d)),j.charChanges){for(const et of j.charChanges)if(isCharChangeOrDelete(et))if(o)for(let tt=et.originalStartLineNumber;tt<=et.originalEndLineNumber;tt++){let it,st;tt===et.originalStartLineNumber?it=et.originalStartColumn:it=b.getLineFirstNonWhitespaceColumn(tt),tt===et.originalEndLineNumber?st=et.originalEndColumn:st=b.getLineLastNonWhitespaceColumn(tt),_.decorations.push(createDecoration(tt,it,tt,st,DECORATIONS.charDelete))}else _.decorations.push(createDecoration(et.originalStartLineNumber,et.originalStartColumn,et.originalEndLineNumber,et.originalEndColumn,DECORATIONS.charDelete))}}return _}_getModifiedEditorDecorations(e,i,o,a,c){const d=this._dataSource.getModifiedEditor(),_=String(this._insertColor),b={decorations:[],overviewZones:[]},k=d.getModel(),j=d._getViewModel();for(const _e of i){if(c)if(_e.modifiedEndLineNumber>0)b.decorations.push({range:new Range$2(_e.modifiedStartLineNumber,1,_e.modifiedStartLineNumber,1),options:DECORATIONS.arrowRevertChange});else{const et=e.modified.find(tt=>tt.afterLineNumber===_e.modifiedStartLineNumber);et&&(et.marginDomNode=createViewZoneMarginArrow())}if(isChangeOrInsert(_e)){b.decorations.push({range:new Range$2(_e.modifiedStartLineNumber,1,_e.modifiedEndLineNumber,1073741824),options:a?DECORATIONS.lineInsertWithSign:DECORATIONS.lineInsert}),(!isChangeOrDelete(_e)||!_e.charChanges)&&b.decorations.push(createDecoration(_e.modifiedStartLineNumber,1,_e.modifiedEndLineNumber,1073741824,DECORATIONS.charInsertWholeLine));const et=getViewRange(k,j,_e.modifiedStartLineNumber,_e.modifiedEndLineNumber);if(b.overviewZones.push(new OverviewRulerZone(et.startLineNumber,et.endLineNumber,0,_)),_e.charChanges){for(const tt of _e.charChanges)if(isCharChangeOrInsert(tt))if(o)for(let it=tt.modifiedStartLineNumber;it<=tt.modifiedEndLineNumber;it++){let st,ot;it===tt.modifiedStartLineNumber?st=tt.modifiedStartColumn:st=k.getLineFirstNonWhitespaceColumn(it),it===tt.modifiedEndLineNumber?ot=tt.modifiedEndColumn:ot=k.getLineLastNonWhitespaceColumn(it),b.decorations.push(createDecoration(it,st,it,ot,DECORATIONS.charInsert))}else b.decorations.push(createDecoration(tt.modifiedStartLineNumber,tt.modifiedStartColumn,tt.modifiedEndLineNumber,tt.modifiedEndColumn,DECORATIONS.charInsert))}}}return b}}DiffEditorWidgetSideBySide.MINIMUM_EDITOR_WIDTH=100;class SideBySideViewZonesComputer extends ViewZonesComputer{constructor(e,i,o,a,c){super(e,i,o,a,c)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,i,o){return o>i?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:o-i,domNode:null}:null}_produceModifiedFromDiff(e,i,o){return i>o?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:i-o,domNode:null}:null}}class DiffEditorWidgetInline extends DiffEditorWidgetStyle{constructor(e,i){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(o=>{this._decorationsLeft!==o.decorationsLeft&&(this._decorationsLeft=o.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,i,o,a){const c=this._dataSource.getOriginalEditor(),d=this._dataSource.getModifiedEditor();return new InlineViewZonesComputer(e,i,o,c,d,a).getViewZones()}_getOriginalEditorDecorations(e,i,o,a){const c=String(this._removeColor),d={decorations:[],overviewZones:[]},_=this._dataSource.getOriginalEditor(),b=_.getModel(),k=_._getViewModel();let j=0;for(const _e of i)if(isChangeOrDelete(_e)){for(d.decorations.push({range:new Range$2(_e.originalStartLineNumber,1,_e.originalEndLineNumber,1073741824),options:DECORATIONS.lineDeleteMargin});j<e.modified.length;){const it=e.modified[j];if(it.diff&&it.diff.originalStartLineNumber>=_e.originalStartLineNumber)break;j++}let et=0;if(j<e.modified.length){const it=e.modified[j];it.diff&&it.diff.originalStartLineNumber===_e.originalStartLineNumber&&it.diff.originalEndLineNumber===_e.originalEndLineNumber&&it.diff.modifiedStartLineNumber===_e.modifiedStartLineNumber&&it.diff.modifiedEndLineNumber===_e.modifiedEndLineNumber&&(et=it.heightInLines)}const tt=getViewRange(b,k,_e.originalStartLineNumber,_e.originalEndLineNumber);d.overviewZones.push(new OverviewRulerZone(tt.startLineNumber,tt.endLineNumber,et,c))}return d}_getModifiedEditorDecorations(e,i,o,a,c){const d=this._dataSource.getModifiedEditor(),_=String(this._insertColor),b={decorations:[],overviewZones:[]},k=d.getModel(),j=d._getViewModel();for(const _e of i)if(isChangeOrInsert(_e)){b.decorations.push({range:new Range$2(_e.modifiedStartLineNumber,1,_e.modifiedEndLineNumber,1073741824),options:a?DECORATIONS.lineInsertWithSign:DECORATIONS.lineInsert});const et=getViewRange(k,j,_e.modifiedStartLineNumber,_e.modifiedEndLineNumber);if(b.overviewZones.push(new OverviewRulerZone(et.startLineNumber,et.endLineNumber,0,_)),_e.charChanges){for(const tt of _e.charChanges)if(isCharChangeOrInsert(tt))if(o)for(let it=tt.modifiedStartLineNumber;it<=tt.modifiedEndLineNumber;it++){let st,ot;it===tt.modifiedStartLineNumber?st=tt.modifiedStartColumn:st=k.getLineFirstNonWhitespaceColumn(it),it===tt.modifiedEndLineNumber?ot=tt.modifiedEndColumn:ot=k.getLineLastNonWhitespaceColumn(it),b.decorations.push(createDecoration(it,st,it,ot,DECORATIONS.charInsert))}else b.decorations.push(createDecoration(tt.modifiedStartLineNumber,tt.modifiedStartColumn,tt.modifiedEndLineNumber,tt.modifiedEndColumn,DECORATIONS.charInsert))}else b.decorations.push(createDecoration(_e.modifiedStartLineNumber,1,_e.modifiedEndLineNumber,1073741824,DECORATIONS.charInsertWholeLine))}return b}layout(){return Math.max(5,this._decorationsLeft)}}class InlineViewZonesComputer extends ViewZonesComputer{constructor(e,i,o,a,c,d){super(e,i,o,a,c),this._originalModel=a.getModel(),this._renderIndicators=d,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,i,o){const a=document.createElement("div");return a.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:o,domNode:document.createElement("div"),marginDomNode:a}}_produceModifiedFromDiff(e,i,o){const a=document.createElement("div");a.className=`view-lines line-delete ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`;const c=document.createElement("div");c.className="inline-deleted-margin-view-zone";const d={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:i,minWidthInPx:0,domNode:a,marginDomNode:c,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let _=e.originalStartLineNumber;_<=e.originalEndLineNumber;_++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(_),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(d),d}_finalize(e){const i=this._modifiedEditor.getOptions(),o=this._modifiedEditor.getModel().getOptions().tabSize,a=i.get(46),c=i.get(29),d=a.typicalHalfwidthCharacterWidth,_=i.get(95),b=this._originalModel.mightContainNonBasicASCII(),k=this._originalModel.mightContainRTL(),j=i.get(61),et=i.get(133).decorationsWidth,tt=i.get(107),it=i.get(90),st=i.get(85),ot=i.get(47),nt=this._lineBreaksComputer.finalize();let rt=0;for(let at=0;at<this._pendingLineChange.length;at++){const lt=this._pendingLineChange[at],gt=this._pendingViewZones[at],ht=gt.domNode;applyFontInfo(ht,a);const ut=gt.marginDomNode;applyFontInfo(ut,a);const ct=[];if(lt.charChanges)for(const yt of lt.charChanges)isCharChangeOrDelete(yt)&&ct.push(new InlineDecoration(new Range$2(yt.originalStartLineNumber,yt.originalStartColumn,yt.originalEndLineNumber,yt.originalEndColumn),"char-delete",0));const ft=ct.length>0,dt=createStringBuilder(1e4);let pt=0,mt=0,_t=null;for(let yt=lt.originalStartLineNumber;yt<=lt.originalEndLineNumber;yt++){const wt=yt-lt.originalStartLineNumber,Tt=this._originalModel.tokenization.getLineTokens(yt),kt=Tt.getLineContent(),Rt=nt[rt++],St=LineDecoration.filter(ct,yt,1,kt.length+1);if(Rt){let Lt=0;for(const xt of Rt.breakOffsets){const Mt=Tt.sliceAndInflate(Lt,xt,0),Pt=kt.substring(Lt,xt);pt=Math.max(pt,this._renderOriginalLine(mt++,Pt,Mt,LineDecoration.extractWrapped(St,Lt,xt),ft,b,k,a,c,j,et,tt,it,st,ot,o,dt,ut)),Lt=xt}for(_t||(_t=[]);_t.length<wt;)_t[_t.length]=1;_t[wt]=Rt.breakOffsets.length,gt.heightInLines+=Rt.breakOffsets.length-1;const It=document.createElement("div");It.className="gutter-delete",e.original.push({afterLineNumber:yt,afterColumn:0,heightInLines:Rt.breakOffsets.length-1,domNode:createFakeLinesDiv(),marginDomNode:It})}else pt=Math.max(pt,this._renderOriginalLine(mt++,kt,Tt,St,ft,b,k,a,c,j,et,tt,it,st,ot,o,dt,ut))}pt+=_;const Ct=dt.build(),bt=ttPolicy?ttPolicy.createHTML(Ct):Ct;if(ht.innerHTML=bt,gt.minWidthInPx=pt*d,_t){const yt=lt.originalEndLineNumber-lt.originalStartLineNumber;for(;_t.length<=yt;)_t[_t.length]=1}gt.diff.viewLineCounts=_t}e.original.sort((at,lt)=>at.afterLineNumber-lt.afterLineNumber)}_renderOriginalLine(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st,ot,nt,rt){nt.appendASCIIString('<div class="view-line'),c||nt.appendASCIIString(" char-delete"),nt.appendASCIIString('" style="top:'),nt.appendASCIIString(String(e*j)),nt.appendASCIIString('px;width:1000000px;">');const at=ViewLineRenderingData.isBasicASCII(i,d),lt=ViewLineRenderingData.containsRTL(i,at,_),gt=renderViewLine(new RenderLineInput(b.isMonospace&&!k,b.canUseHalfwidthRightwardsArrow,i,!1,at,lt,0,o,a,ot,0,b.spaceWidth,b.middotWidth,b.wsmiddotWidth,et,tt,it,st!==EditorFontLigatures.OFF,null),nt);if(nt.appendASCIIString("</div>"),this._renderIndicators){const ht=document.createElement("div");ht.className=`delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`,ht.setAttribute("style",`position:absolute;top:${e*j}px;width:${_e}px;height:${j}px;right:0;`),rt.appendChild(ht)}return gt.characterMapping.getHorizontalOffset(gt.characterMapping.length)}}function validateDiffWordWrap(s,e){return stringSet(s,e,["off","on","inherit"])}function isChangeOrInsert(s){return s.modifiedEndLineNumber>0}function isChangeOrDelete(s){return s.originalEndLineNumber>0}function isCharChangeOrInsert(s){return s.modifiedStartLineNumber===s.modifiedEndLineNumber?s.modifiedEndColumn-s.modifiedStartColumn>0:s.modifiedEndLineNumber-s.modifiedStartLineNumber>0}function isCharChangeOrDelete(s){return s.originalStartLineNumber===s.originalEndLineNumber?s.originalEndColumn-s.originalStartColumn>0:s.originalEndLineNumber-s.originalStartLineNumber>0}function createFakeLinesDiv(){const s=document.createElement("div");return s.className="diagonal-fill",s}function createViewZoneMarginArrow(){const s=document.createElement("div");return s.className="arrow-revert-change "+ThemeIcon.asClassName(Codicon.arrowRight),$$5("div",{},s)}function getViewRange(s,e,i,o){const a=s.getLineCount();return i=Math.min(a,Math.max(1,i)),o=Math.min(a,Math.max(1,o)),e.coordinatesConverter.convertModelRangeToViewRange(new Range$2(i,s.getLineMinColumn(i),o,s.getLineMaxColumn(o)))}function validateDiffEditorOptions(s,e){return{enableSplitViewResizing:boolean(s.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:boolean(s.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:boolean(s.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:clampedInt(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:clampedInt(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:boolean(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:boolean(s.renderIndicators,e.renderIndicators),originalEditable:boolean(s.originalEditable,e.originalEditable),diffCodeLens:boolean(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:boolean(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:validateDiffWordWrap(s.diffWordWrap,e.diffWordWrap)}}function changedDiffEditorOptions(s,e){return{enableSplitViewResizing:s.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:s.renderSideBySide!==e.renderSideBySide,renderMarginRevertIcon:s.renderMarginRevertIcon!==e.renderMarginRevertIcon,maxComputationTime:s.maxComputationTime!==e.maxComputationTime,maxFileSize:s.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:s.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:s.renderIndicators!==e.renderIndicators,originalEditable:s.originalEditable!==e.originalEditable,diffCodeLens:s.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:s.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:s.diffWordWrap!==e.diffWordWrap}}registerThemingParticipant((s,e)=>{const i=s.getColor(diffInserted);i&&e.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${i}; }`);const o=s.getColor(diffInsertedLine)||i;o&&e.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${o}; }`);const a=s.getColor(diffInsertedLineGutter)||o;a&&(e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${a}; }`),e.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${a}; }`));const c=s.getColor(diffRemoved);c&&e.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${c}; }`);const d=s.getColor(diffRemovedLine)||c;d&&e.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${d}; }`);const _=s.getColor(diffRemovedLineGutter)||d;_&&(e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${_}; }`),e.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${_}; }`));const b=s.getColor(diffInsertedOutline);b&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${isHighContrast(s.type)?"dashed":"solid"} ${b}; }`);const k=s.getColor(diffRemovedOutline);k&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${isHighContrast(s.type)?"dashed":"solid"} ${k}; }`);const j=s.getColor(scrollbarShadow);j&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${j}; }`);const _e=s.getColor(diffBorder);_e&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${_e}; }`);const et=s.getColor(scrollbarSliderBackground);et&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${et};
			}
		`);const tt=s.getColor(scrollbarSliderHoverBackground);tt&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${tt};
			}
		`);const it=s.getColor(scrollbarSliderActiveBackground);it&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${it};
			}
		`);const st=s.getColor(diffDiagonalFill);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${st} 12.5%,
			#0000 12.5%, #0000 50%,
			${st} 50%, ${st} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});var __decorate$o=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$k=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$f=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};let AbstractCodeEditorService=class extends Disposable{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new Emitter$1),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Emitter$1),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Emitter$1),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Emitter$1),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new LinkedList,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const i=this.listCodeEditors();for(const o of i){if(o.hasTextFocus())return o;o.hasWidgetFocus()&&(e=o)}return e}removeDecorationType(e){const i=this._decorationOptionProviders.get(e);i&&(i.refCount--,i.refCount<=0&&(this._decorationOptionProviders.delete(e),i.dispose(),this.listCodeEditors().forEach(o=>o.removeDecorationsByType(e))))}setModelProperty(e,i,o){const a=e.toString();let c;this._modelProperties.has(a)?c=this._modelProperties.get(a):(c=new Map,this._modelProperties.set(a,c)),c.set(i,o)}getModelProperty(e,i){const o=e.toString();if(this._modelProperties.has(o))return this._modelProperties.get(o).get(i)}openCodeEditor(e,i,o){return __awaiter$f(this,void 0,void 0,function*(){for(const a of this._codeEditorOpenHandlers){const c=yield a(e,i,o);if(c!==null)return c}return null})}registerCodeEditorOpenHandler(e){const i=this._codeEditorOpenHandlers.unshift(e);return toDisposable(i)}};AbstractCodeEditorService=__decorate$o([__param$k(0,IThemeService)],AbstractCodeEditorService);var __decorate$n=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$j=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$e=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};let StandaloneCodeEditorService=class extends AbstractCodeEditorService{constructor(e,i){super(i),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler((o,a,c)=>__awaiter$e(this,void 0,void 0,function*(){return a?this.doOpenEditor(a,o):null}))}_checkContextKey(){let e=!1;for(const i of this.listCodeEditors())if(!i.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,i){if(!this.findModel(e,i.resource)){if(i.resource){const c=i.resource.scheme;if(c===Schemas.http||c===Schemas.https)return windowOpenNoOpener(i.resource.toString()),e}return null}const a=i.options?i.options.selection:null;if(a)if(typeof a.endLineNumber=="number"&&typeof a.endColumn=="number")e.setSelection(a),e.revealRangeInCenter(a,1);else{const c={lineNumber:a.startLineNumber,column:a.startColumn};e.setPosition(c),e.revealPositionInCenter(c,1)}return e}findModel(e,i){const o=e.getModel();return o&&o.uri.toString()!==i.toString()?null:o}};StandaloneCodeEditorService=__decorate$n([__param$j(0,IContextKeyService),__param$j(1,IThemeService)],StandaloneCodeEditorService);registerSingleton(ICodeEditorService,StandaloneCodeEditorService);const ILayoutService=createDecorator("layoutService");var __decorate$m=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$i=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let StandaloneLayoutService=class{constructor(e){this._codeEditorService=e,this.onDidLayout=Event.None,this.offset={top:0,quickPickTop:0}}get dimension(){return this._dimension||(this._dimension=getClientArea(window.document.body)),this._dimension}get hasContainer(){return!1}get container(){throw new Error("ILayoutService.container is not available in the standalone editor!")}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}};StandaloneLayoutService=__decorate$m([__param$i(0,ICodeEditorService)],StandaloneLayoutService);let EditorScopedLayoutService=class extends StandaloneLayoutService{constructor(e,i){super(i),this._container=e}get hasContainer(){return!1}get container(){return this._container}};EditorScopedLayoutService=__decorate$m([__param$i(1,ICodeEditorService)],EditorScopedLayoutService);registerSingleton(ILayoutService,StandaloneLayoutService);const IDialogService=createDecorator("dialogService");var __decorate$l=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$h=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$d=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function getResourceLabel(s){return s.scheme===Schemas.file?s.fsPath:s.path}let stackElementCounter=0;class ResourceStackElement{constructor(e,i,o,a,c,d,_){this.id=++stackElementCounter,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=i,this.strResource=o,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=a,this.groupOrder=c,this.sourceId=d,this.sourceOrder=_,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ResourceReasonPair{constructor(e,i){this.resourceLabel=e,this.reason=i}}class RemovedResources{constructor(){this.elements=new Map}createMessage(){const e=[],i=[];for(const[,a]of this.elements)(a.reason===0?e:i).push(a.resourceLabel);const o=[];return e.length>0&&o.push(localize({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),i.length>0&&o.push(localize({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",i.join(", "))),o.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,i){this.elements.set(e,i)}delete(e){return this.elements.delete(e)}}class WorkspaceStackElement{constructor(e,i,o,a,c,d,_){this.id=++stackElementCounter,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=i,this.strResources=o,this.groupId=a,this.groupOrder=c,this.sourceId=d,this.sourceOrder=_,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,i,o){this.removedResources||(this.removedResources=new RemovedResources),this.removedResources.has(i)||this.removedResources.set(i,new ResourceReasonPair(e,o))}setValid(e,i,o){o?this.invalidatedResources&&(this.invalidatedResources.delete(i),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new RemovedResources),this.invalidatedResources.has(i)||this.invalidatedResources.set(i,new ResourceReasonPair(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class ResourceEditStack{constructor(e,i){this.resourceLabel=e,this.strResource=i,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let i=0;i<this._past.length;i++)e.push(`   * [UNDO] ${this._past[i]}`);for(let i=this._future.length-1;i>=0;i--)e.push(`   * [REDO] ${this._future[i]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,i){e.type===1?e.setValid(this.resourceLabel,this.strResource,i):e.setValid(i)}setElementsValidFlag(e,i){for(const o of this._past)i(o.actual)&&this._setElementValidFlag(o,e);for(const o of this._future)i(o.actual)&&this._setElementValidFlag(o,e)}pushElement(e){for(const i of this._future)i.type===1&&i.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const i=[];for(let o=0,a=this._past.length;o<a;o++)i.push(this._past[o].id);for(let o=this._future.length-1;o>=0;o--)i.push(this._future[o].id);return new ResourceEditStackSnapshot(e,i)}restoreSnapshot(e){const i=e.elements.length;let o=!0,a=0,c=-1;for(let _=0,b=this._past.length;_<b;_++,a++){const k=this._past[_];o&&(a>=i||k.id!==e.elements[a])&&(o=!1,c=0),!o&&k.type===1&&k.removeResource(this.resourceLabel,this.strResource,0)}let d=-1;for(let _=this._future.length-1;_>=0;_--,a++){const b=this._future[_];o&&(a>=i||b.id!==e.elements[a])&&(o=!1,d=_),!o&&b.type===1&&b.removeResource(this.resourceLabel,this.strResource,0)}c!==-1&&(this._past=this._past.slice(0,c)),d!==-1&&(this._future=this._future.slice(d+1)),this.versionId++}getElements(){const e=[],i=[];for(const o of this._past)e.push(o.actual);for(const o of this._future)i.push(o.actual);return{past:e,future:i}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,i){for(let o=this._past.length-1;o>=0;o--)if(this._past[o]===e){i.has(this.strResource)?this._past[o]=i.get(this.strResource):this._past.splice(o,1);break}this.versionId++}splitFutureWorkspaceElement(e,i){for(let o=this._future.length-1;o>=0;o--)if(this._future[o]===e){i.has(this.strResource)?this._future[o]=i.get(this.strResource):this._future.splice(o,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class EditStackSnapshot{constructor(e){this.editStacks=e,this._versionIds=[];for(let i=0,o=this.editStacks.length;i<o;i++)this._versionIds[i]=this.editStacks[i].versionId}isValid(){for(let e=0,i=this.editStacks.length;e<i;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const missingEditStack=new ResourceEditStack("","");missingEditStack.locked=!0;let UndoRedoService=class{constructor(e,i){this._dialogService=e,this._notificationService=i,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const i of this._uriComparisonKeyComputers)if(i[0]===e.scheme)return i[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const i=[];for(const o of this._editStacks)i.push(o[1].toString());console.log(i.join(`
`))}pushElement(e,i=UndoRedoGroup.None,o=UndoRedoSource.None){if(e.type===0){const a=getResourceLabel(e.resource),c=this.getUriComparisonKey(e.resource);this._pushElement(new ResourceStackElement(e,a,c,i.id,i.nextOrder(),o.id,o.nextOrder()))}else{const a=new Set,c=[],d=[];for(const _ of e.resources){const b=getResourceLabel(_),k=this.getUriComparisonKey(_);a.has(k)||(a.add(k),c.push(b),d.push(k))}c.length===1?this._pushElement(new ResourceStackElement(e,c[0],d[0],i.id,i.nextOrder(),o.id,o.nextOrder())):this._pushElement(new WorkspaceStackElement(e,c,d,i.id,i.nextOrder(),o.id,o.nextOrder()))}}_pushElement(e){for(let i=0,o=e.strResources.length;i<o;i++){const a=e.resourceLabels[i],c=e.strResources[i];let d;this._editStacks.has(c)?d=this._editStacks.get(c):(d=new ResourceEditStack(a,c),this._editStacks.set(c,d)),d.pushElement(e)}}getLastElement(e){const i=this.getUriComparisonKey(e);if(this._editStacks.has(i)){const o=this._editStacks.get(i);if(o.hasFutureElements())return null;const a=o.getClosestPastElement();return a?a.actual:null}return null}_splitPastWorkspaceElement(e,i){const o=e.actual.split(),a=new Map;for(const c of o){const d=getResourceLabel(c.resource),_=this.getUriComparisonKey(c.resource),b=new ResourceStackElement(c,d,_,0,0,0,0);a.set(b.strResource,b)}for(const c of e.strResources){if(i&&i.has(c))continue;this._editStacks.get(c).splitPastWorkspaceElement(e,a)}}_splitFutureWorkspaceElement(e,i){const o=e.actual.split(),a=new Map;for(const c of o){const d=getResourceLabel(c.resource),_=this.getUriComparisonKey(c.resource),b=new ResourceStackElement(c,d,_,0,0,0,0);a.set(b.strResource,b)}for(const c of e.strResources){if(i&&i.has(c))continue;this._editStacks.get(c).splitFutureWorkspaceElement(e,a)}}removeElements(e){const i=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(i)&&(this._editStacks.get(i).dispose(),this._editStacks.delete(i))}setElementsValidFlag(e,i,o){const a=this.getUriComparisonKey(e);this._editStacks.has(a)&&this._editStacks.get(a).setElementsValidFlag(i,o)}createSnapshot(e){const i=this.getUriComparisonKey(e);return this._editStacks.has(i)?this._editStacks.get(i).createSnapshot(e):new ResourceEditStackSnapshot(e,[])}restoreSnapshot(e){const i=this.getUriComparisonKey(e.resource);if(this._editStacks.has(i)){const o=this._editStacks.get(i);o.restoreSnapshot(e),!o.hasPastElements()&&!o.hasFutureElements()&&(o.dispose(),this._editStacks.delete(i))}}getElements(e){const i=this.getUriComparisonKey(e);return this._editStacks.has(i)?this._editStacks.get(i).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let i=null,o=null;for(const[a,c]of this._editStacks){const d=c.getClosestPastElement();!d||d.sourceId===e&&(!i||d.sourceOrder>i.sourceOrder)&&(i=d,o=a)}return[i,o]}canUndo(e){if(e instanceof UndoRedoSource){const[,o]=this._findClosestUndoElementWithSource(e.id);return!!o}const i=this.getUriComparisonKey(e);return this._editStacks.has(i)?this._editStacks.get(i).hasPastElements():!1}_onError(e,i){onUnexpectedError(e);for(const o of i.strResources)this.removeElements(o);this._notificationService.error(e)}_acquireLocks(e){for(const i of e.editStacks)if(i.locked)throw new Error("Cannot acquire edit stack lock");for(const i of e.editStacks)i.locked=!0;return()=>{for(const i of e.editStacks)i.locked=!1}}_safeInvokeWithLocks(e,i,o,a,c){const d=this._acquireLocks(o);let _;try{_=i()}catch(b){return d(),a.dispose(),this._onError(b,e)}return _?_.then(()=>(d(),a.dispose(),c()),b=>(d(),a.dispose(),this._onError(b,e))):(d(),a.dispose(),c())}_invokeWorkspacePrepare(e){return __awaiter$d(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return Disposable.None;const i=e.actual.prepareUndoRedo();return typeof i>"u"?Disposable.None:i})}_invokeResourcePrepare(e,i){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return i(Disposable.None);const o=e.actual.prepareUndoRedo();return o?isDisposable(o)?i(o):o.then(a=>i(a)):i(Disposable.None)}_getAffectedEditStacks(e){const i=[];for(const o of e.strResources)i.push(this._editStacks.get(o)||missingEditStack);return new EditStackSnapshot(i)}_tryToSplitAndUndo(e,i,o,a){if(i.canSplit())return this._splitPastWorkspaceElement(i,o),this._notificationService.warn(a),new WorkspaceVerificationError(this._undo(e,0,!0));for(const c of i.strResources)this.removeElements(c);return this._notificationService.warn(a),new WorkspaceVerificationError}_checkWorkspaceUndo(e,i,o,a){if(i.removedResources)return this._tryToSplitAndUndo(e,i,i.removedResources,localize({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",i.label,i.removedResources.createMessage()));if(a&&i.invalidatedResources)return this._tryToSplitAndUndo(e,i,i.invalidatedResources,localize({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",i.label,i.invalidatedResources.createMessage()));const c=[];for(const _ of o.editStacks)_.getClosestPastElement()!==i&&c.push(_.resourceLabel);if(c.length>0)return this._tryToSplitAndUndo(e,i,null,localize({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",i.label,c.join(", ")));const d=[];for(const _ of o.editStacks)_.locked&&d.push(_.resourceLabel);return d.length>0?this._tryToSplitAndUndo(e,i,null,localize({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",i.label,d.join(", "))):o.isValid()?null:this._tryToSplitAndUndo(e,i,null,localize({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",i.label))}_workspaceUndo(e,i,o){const a=this._getAffectedEditStacks(i),c=this._checkWorkspaceUndo(e,i,a,!1);return c?c.returnValue:this._confirmAndExecuteWorkspaceUndo(e,i,a,o)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,i]of this._editStacks){const o=i.getClosestPastElement();if(!!o){if(o===e){const a=i.getSecondClosestPastElement();if(a&&a.groupId===e.groupId)return!0}if(o.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,i,o,a){return __awaiter$d(this,void 0,void 0,function*(){if(i.canSplit()&&!this._isPartOfUndoGroup(i)){const _=yield this._dialogService.show(Severity$1.Info,localize("confirmWorkspace","Would you like to undo '{0}' across all files?",i.label),[localize({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",o.editStacks.length),localize("nok","Undo this File"),localize("cancel","Cancel")],{cancelId:2});if(_.choice===2)return;if(_.choice===1)return this._splitPastWorkspaceElement(i,null),this._undo(e,0,!0);const b=this._checkWorkspaceUndo(e,i,o,!1);if(b)return b.returnValue;a=!0}let c;try{c=yield this._invokeWorkspacePrepare(i)}catch(_){return this._onError(_,i)}const d=this._checkWorkspaceUndo(e,i,o,!0);if(d)return c.dispose(),d.returnValue;for(const _ of o.editStacks)_.moveBackward(i);return this._safeInvokeWithLocks(i,()=>i.actual.undo(),o,c,()=>this._continueUndoInGroup(i.groupId,a))})}_resourceUndo(e,i,o){if(!i.isValid){e.flushAllElements();return}if(e.locked){const a=localize({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",i.label);this._notificationService.warn(a);return}return this._invokeResourcePrepare(i,a=>(e.moveBackward(i),this._safeInvokeWithLocks(i,()=>i.actual.undo(),new EditStackSnapshot([e]),a,()=>this._continueUndoInGroup(i.groupId,o))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let i=null,o=null;for(const[a,c]of this._editStacks){const d=c.getClosestPastElement();!d||d.groupId===e&&(!i||d.groupOrder>i.groupOrder)&&(i=d,o=a)}return[i,o]}_continueUndoInGroup(e,i){if(!e)return;const[,o]=this._findClosestUndoElementInGroup(e);if(o)return this._undo(o,0,i)}undo(e){if(e instanceof UndoRedoSource){const[,i]=this._findClosestUndoElementWithSource(e.id);return i?this._undo(i,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,i=0,o){if(!this._editStacks.has(e))return;const a=this._editStacks.get(e),c=a.getClosestPastElement();if(!c)return;if(c.groupId){const[_,b]=this._findClosestUndoElementInGroup(c.groupId);if(c!==_&&b)return this._undo(b,i,o)}if((c.sourceId!==i||c.confirmBeforeUndo)&&!o)return this._confirmAndContinueUndo(e,i,c);try{return c.type===1?this._workspaceUndo(e,c,o):this._resourceUndo(a,c,o)}finally{}}_confirmAndContinueUndo(e,i,o){return __awaiter$d(this,void 0,void 0,function*(){if((yield this._dialogService.show(Severity$1.Info,localize("confirmDifferentSource","Would you like to undo '{0}'?",o.label),[localize("confirmDifferentSource.yes","Yes"),localize("confirmDifferentSource.no","No")],{cancelId:1})).choice!==1)return this._undo(e,i,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let i=null,o=null;for(const[a,c]of this._editStacks){const d=c.getClosestFutureElement();!d||d.sourceId===e&&(!i||d.sourceOrder<i.sourceOrder)&&(i=d,o=a)}return[i,o]}canRedo(e){if(e instanceof UndoRedoSource){const[,o]=this._findClosestRedoElementWithSource(e.id);return!!o}const i=this.getUriComparisonKey(e);return this._editStacks.has(i)?this._editStacks.get(i).hasFutureElements():!1}_tryToSplitAndRedo(e,i,o,a){if(i.canSplit())return this._splitFutureWorkspaceElement(i,o),this._notificationService.warn(a),new WorkspaceVerificationError(this._redo(e));for(const c of i.strResources)this.removeElements(c);return this._notificationService.warn(a),new WorkspaceVerificationError}_checkWorkspaceRedo(e,i,o,a){if(i.removedResources)return this._tryToSplitAndRedo(e,i,i.removedResources,localize({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",i.label,i.removedResources.createMessage()));if(a&&i.invalidatedResources)return this._tryToSplitAndRedo(e,i,i.invalidatedResources,localize({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",i.label,i.invalidatedResources.createMessage()));const c=[];for(const _ of o.editStacks)_.getClosestFutureElement()!==i&&c.push(_.resourceLabel);if(c.length>0)return this._tryToSplitAndRedo(e,i,null,localize({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",i.label,c.join(", ")));const d=[];for(const _ of o.editStacks)_.locked&&d.push(_.resourceLabel);return d.length>0?this._tryToSplitAndRedo(e,i,null,localize({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",i.label,d.join(", "))):o.isValid()?null:this._tryToSplitAndRedo(e,i,null,localize({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",i.label))}_workspaceRedo(e,i){const o=this._getAffectedEditStacks(i),a=this._checkWorkspaceRedo(e,i,o,!1);return a?a.returnValue:this._executeWorkspaceRedo(e,i,o)}_executeWorkspaceRedo(e,i,o){return __awaiter$d(this,void 0,void 0,function*(){let a;try{a=yield this._invokeWorkspacePrepare(i)}catch(d){return this._onError(d,i)}const c=this._checkWorkspaceRedo(e,i,o,!0);if(c)return a.dispose(),c.returnValue;for(const d of o.editStacks)d.moveForward(i);return this._safeInvokeWithLocks(i,()=>i.actual.redo(),o,a,()=>this._continueRedoInGroup(i.groupId))})}_resourceRedo(e,i){if(!i.isValid){e.flushAllElements();return}if(e.locked){const o=localize({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",i.label);this._notificationService.warn(o);return}return this._invokeResourcePrepare(i,o=>(e.moveForward(i),this._safeInvokeWithLocks(i,()=>i.actual.redo(),new EditStackSnapshot([e]),o,()=>this._continueRedoInGroup(i.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let i=null,o=null;for(const[a,c]of this._editStacks){const d=c.getClosestFutureElement();!d||d.groupId===e&&(!i||d.groupOrder<i.groupOrder)&&(i=d,o=a)}return[i,o]}_continueRedoInGroup(e){if(!e)return;const[,i]=this._findClosestRedoElementInGroup(e);if(i)return this._redo(i)}redo(e){if(e instanceof UndoRedoSource){const[,i]=this._findClosestRedoElementWithSource(e.id);return i?this._redo(i):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),o=i.getClosestFutureElement();if(!!o){if(o.groupId){const[a,c]=this._findClosestRedoElementInGroup(o.groupId);if(o!==a&&c)return this._redo(c)}try{return o.type===1?this._workspaceRedo(e,o):this._resourceRedo(i,o)}finally{}}}};UndoRedoService=__decorate$l([__param$h(0,IDialogService),__param$h(1,INotificationService)],UndoRedoService);class WorkspaceVerificationError{constructor(e){this.returnValue=e}}registerSingleton(IUndoRedoService,UndoRedoService);function clamp(s,e,i){return Math.min(Math.max(s,e),i)}class MovingAverage{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class SlidingWindowAverage{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const i=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=i,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}var __awaiter$c=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};const IOpenerService=createDecorator("openerService");Object.freeze({_serviceBrand:void 0,registerOpener(){return Disposable.None},registerValidator(){return Disposable.None},registerExternalUriResolver(){return Disposable.None},setDefaultExternalOpener(){},registerExternalOpener(){return Disposable.None},open(){return __awaiter$c(this,void 0,void 0,function*(){return!1})},resolveExternalUri(s){return __awaiter$c(this,void 0,void 0,function*(){return{resolved:s,dispose(){}}})}});function matchesScheme(s,e){return URI.isUri(s)?equalsIgnoreCase(s.scheme,e):startsWithIgnoreCase(s,e+":")}function matchesSomeScheme(s,...e){return e.some(i=>matchesScheme(s,i))}function extractSelection(s){let e;const i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return i&&(e={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}var __decorate$k=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$g=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};const ILanguageFeatureDebounceService=createDecorator("ILanguageFeatureDebounceService");var IdentityHash;(function(s){const e=new WeakMap;let i=0;function o(a){let c=e.get(a);return c===void 0&&(c=++i,e.set(a,c)),c}s.of=o})(IdentityHash||(IdentityHash={}));class FeatureDebounceInformation{constructor(e,i,o,a,c,d){this._logService=e,this._name=i,this._registry=o,this._default=a,this._min=c,this._max=d,this._cache=new LRUCache(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((i,o)=>doHash(IdentityHash.of(o),i),0)}get(e){const i=this._key(e),o=this._cache.get(i);return o?clamp(o.value,this._min,this._max):this.default()}update(e,i){const o=this._key(e);let a=this._cache.get(o);a||(a=new SlidingWindowAverage(6),this._cache.set(o,a));const c=clamp(a.update(i),this._min,this._max);return matchesScheme(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${c}ms`),c}_overall(){const e=new MovingAverage;for(const[,i]of this._cache)e.update(i.value);return e.value}default(){const e=this._overall()|0||this._default;return clamp(e,this._min,this._max)}}let LanguageFeatureDebounceService=class{constructor(e){this._logService=e,this._data=new Map}for(e,i,o){var a,c,d;const _=(a=o==null?void 0:o.min)!==null&&a!==void 0?a:50,b=(c=o==null?void 0:o.max)!==null&&c!==void 0?c:Math.pow(_,2),k=(d=o==null?void 0:o.key)!==null&&d!==void 0?d:void 0,j=`${IdentityHash.of(e)},${_}${k?","+k:""}`;let _e=this._data.get(j);return _e||(_e=new FeatureDebounceInformation(this._logService,i,e,this._overallAverage()|0||_*1.5,_,b),this._data.set(j,_e)),_e}_overallAverage(){const e=new MovingAverage;for(const i of this._data.values())e.update(i.default());return e.value}};LanguageFeatureDebounceService=__decorate$k([__param$g(0,ILogService)],LanguageFeatureDebounceService);registerSingleton(ILanguageFeatureDebounceService,LanguageFeatureDebounceService,!0);const IBulkEditService=createDecorator("IWorkspaceEditService");class ResourceEdit{constructor(e){this.metadata=e}static convert(e){return e.edits.map(i=>{if(ResourceTextEdit.is(i))return ResourceTextEdit.lift(i);if(ResourceFileEdit.is(i))return ResourceFileEdit.lift(i);throw new Error("Unsupported edit")})}}class ResourceTextEdit extends ResourceEdit{constructor(e,i,o=void 0,a){super(a),this.resource=e,this.textEdit=i,this.versionId=o}static is(e){return e instanceof ResourceTextEdit?!0:isObject(e)&&URI.isUri(e.resource)&&isObject(e.textEdit)}static lift(e){return e instanceof ResourceTextEdit?e:new ResourceTextEdit(e.resource,e.textEdit,e.versionId,e.metadata)}}class ResourceFileEdit extends ResourceEdit{constructor(e,i,o={},a){super(a),this.oldResource=e,this.newResource=i,this.options=o}static is(e){return e instanceof ResourceFileEdit?!0:isObject(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof ResourceFileEdit?e:new ResourceFileEdit(e.oldResource,e.newResource,e.options,e.metadata)}}const editorConfigurationBaseNode=Object.freeze({id:"editor",order:5,type:"object",title:localize("editorConfigurationTitle","Editor"),scope:5}),editorConfiguration=Object.assign(Object.assign({},editorConfigurationBaseNode),{properties:{"editor.tabSize":{type:"number",default:EDITOR_MODEL_DEFAULTS.tabSize,minimum:1,markdownDescription:localize("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:EDITOR_MODEL_DEFAULTS.insertSpaces,markdownDescription:localize("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:EDITOR_MODEL_DEFAULTS.detectIndentation,markdownDescription:localize("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,description:localize("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:EDITOR_MODEL_DEFAULTS.largeFileOptimizations,description:localize("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:localize("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[localize("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),localize("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),localize("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:localize("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[localize("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),localize("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),localize("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:localize("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:localize("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:localize("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:["array","null"],default:null,description:localize("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:localize("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:localize("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:localize("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:localize("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:localize("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:localize("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:localize("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:localize("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:!0,description:localize("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:localize("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:localize("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:localize("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[localize("wordWrap.off","Lines will never wrap."),localize("wordWrap.on","Lines will wrap at the viewport width."),localize("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function isConfigurationPropertySchema(s){return typeof s.type<"u"||typeof s.anyOf<"u"}for(const s of editorOptionsRegistry){const e=s.schema;if(typeof e<"u")if(isConfigurationPropertySchema(e))editorConfiguration.properties[`editor.${s.name}`]=e;else for(const i in e)Object.hasOwnProperty.call(e,i)&&(editorConfiguration.properties[i]=e[i])}let cachedEditorConfigurationKeys=null;function getEditorConfigurationKeys(){return cachedEditorConfigurationKeys===null&&(cachedEditorConfigurationKeys=Object.create(null),Object.keys(editorConfiguration.properties).forEach(s=>{cachedEditorConfigurationKeys[s]=!0})),cachedEditorConfigurationKeys}function isEditorConfigurationKey(s){return getEditorConfigurationKeys()[`editor.${s}`]||!1}function isDiffEditorConfigurationKey(s){return getEditorConfigurationKeys()[`diffEditor.${s}`]||!1}const configurationRegistry$1=Registry.as(Extensions$7.Configuration);configurationRegistry$1.registerConfiguration(editorConfiguration);class EditOperation{static insert(e,i){return{range:new Range$2(e.lineNumber,e.column,e.lineNumber,e.column),text:i,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,i){return{range:e,text:i}}static replaceMove(e,i){return{range:e,text:i,forceMoveMarkers:!0}}}class ConfigurationModel{constructor(e={},i=[],o=[]){this._contents=e,this._keys=i,this._overrides=o,this.frozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?getConfigurationValue(this.contents,e):this.contents}getOverrideValue(e,i){const o=this.getContentsForOverrideIdentifer(i);return o?e?getConfigurationValue(o,e):o:void 0}override(e){let i=this.overrideConfigurations.get(e);return i||(i=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,i)),i}merge(...e){const i=deepClone(this.contents),o=deepClone(this.overrides),a=[...this.keys];for(const c of e)if(!c.isEmpty()){this.mergeContents(i,c.contents);for(const d of c.overrides){const[_]=o.filter(b=>equals$1(b.identifiers,d.identifiers));_?(this.mergeContents(_.contents,d.contents),_.keys.push(...d.keys),_.keys=distinct(_.keys)):o.push(deepClone(d))}for(const d of c.keys)a.indexOf(d)===-1&&a.push(d)}return new ConfigurationModel(i,a,o)}freeze(){return this.frozen=!0,this}createOverrideConfigurationModel(e){const i=this.getContentsForOverrideIdentifer(e);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const o={};for(const a of distinct([...Object.keys(this.contents),...Object.keys(i)])){let c=this.contents[a];const d=i[a];d&&(typeof c=="object"&&typeof d=="object"?(c=deepClone(c),this.mergeContents(c,d)):c=d),o[a]=c}return new ConfigurationModel(o,this.keys,this.overrides)}mergeContents(e,i){for(const o of Object.keys(i)){if(o in e&&isObject(e[o])&&isObject(i[o])){this.mergeContents(e[o],i[o]);continue}e[o]=deepClone(i[o])}}checkAndFreeze(e){return this.frozen&&!Object.isFrozen(e)?deepFreeze(e):e}getContentsForOverrideIdentifer(e){let i=null,o=null;const a=c=>{c&&(o?this.mergeContents(o,c):o=deepClone(c))};for(const c of this.overrides)equals$1(c.identifiers,[e])?i=c.contents:c.identifiers.includes(e)&&a(c.contents);return a(i),o}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,i){this.addKey(e),addToValueTree(this.contents,e,i,o=>{throw new Error(o)})}removeValue(e){this.removeKey(e)&&removeFromValueTree(this.contents,e)}addKey(e){let i=this.keys.length;for(let o=0;o<i;o++)e.indexOf(this.keys[o])===0&&(i=o);this.keys.splice(i,1,e)}removeKey(e){const i=this.keys.indexOf(e);return i!==-1?(this.keys.splice(i,1),!0):!1}}class Configuration{constructor(e,i,o,a,c=new ConfigurationModel,d=new ConfigurationModel,_=new ResourceMap,b=new ConfigurationModel,k=new ResourceMap,j=!0){this._defaultConfiguration=e,this._policyConfiguration=i,this._applicationConfiguration=o,this._localUserConfiguration=a,this._remoteUserConfiguration=c,this._workspaceConfiguration=d,this._folderConfigurations=_,this._memoryConfiguration=b,this._memoryConfigurationByResource=k,this._freeze=j,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ResourceMap,this._userConfiguration=null}getValue(e,i,o){return this.getConsolidatedConfigurationModel(e,i,o).getValue(e)}updateValue(e,i,o={}){let a;o.resource?(a=this._memoryConfigurationByResource.get(o.resource),a||(a=new ConfigurationModel,this._memoryConfigurationByResource.set(o.resource,a))):a=this._memoryConfiguration,i===void 0?a.removeValue(e):a.setValue(e,i),o.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,i,o){const a=this.getConsolidatedConfigurationModel(e,i,o),c=this.getFolderConfigurationModelForResource(i.resource,o),d=i.resource?this._memoryConfigurationByResource.get(i.resource)||this._memoryConfiguration:this._memoryConfiguration,_=i.overrideIdentifier?this._defaultConfiguration.freeze().override(i.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),b=this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration.freeze().getValue(e),k=this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration.freeze().getValue(e),j=i.overrideIdentifier?this.userConfiguration.freeze().override(i.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),_e=i.overrideIdentifier?this.localUserConfiguration.freeze().override(i.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),et=i.overrideIdentifier?this.remoteUserConfiguration.freeze().override(i.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),tt=o?i.overrideIdentifier?this._workspaceConfiguration.freeze().override(i.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,it=c?i.overrideIdentifier?c.freeze().override(i.overrideIdentifier).getValue(e):c.freeze().getValue(e):void 0,st=i.overrideIdentifier?d.override(i.overrideIdentifier).getValue(e):d.getValue(e),ot=a.getValue(e),nt=distinct(a.overrides.map(rt=>rt.identifiers).flat()).filter(rt=>a.getOverrideValue(e,rt)!==void 0);return{defaultValue:_,policyValue:b,applicationValue:k,userValue:j,userLocalValue:_e,userRemoteValue:et,workspaceValue:tt,workspaceFolderValue:it,memoryValue:st,value:ot,default:_!==void 0?{value:this._defaultConfiguration.freeze().getValue(e),override:i.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,policy:b!==void 0?{value:b}:void 0,application:k!==void 0?{value:k,override:i.overrideIdentifier?this.applicationConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,user:j!==void 0?{value:this.userConfiguration.freeze().getValue(e),override:i.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,userLocal:_e!==void 0?{value:this.localUserConfiguration.freeze().getValue(e),override:i.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,userRemote:et!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(e),override:i.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,workspace:tt!==void 0?{value:this._workspaceConfiguration.freeze().getValue(e),override:i.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,workspaceFolder:it!==void 0?{value:c==null?void 0:c.freeze().getValue(e),override:i.overrideIdentifier?c==null?void 0:c.freeze().getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,memory:st!==void 0?{value:d.getValue(e),override:i.overrideIdentifier?d.getOverrideValue(e,i.overrideIdentifier):void 0}:void 0,overrideIdentifiers:nt.length?nt:void 0}}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,i,o){let a=this.getConsolidatedConfigurationModelForResource(i,o);return i.overrideIdentifier&&(a=a.override(i.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(a=a.merge(this._policyConfiguration)),a}getConsolidatedConfigurationModelForResource({resource:e},i){let o=this.getWorkspaceConsolidatedConfiguration();if(i&&e){const a=i.getFolder(e);a&&(o=this.getFolderConsolidatedConfiguration(a.uri)||o);const c=this._memoryConfigurationByResource.get(e);c&&(o=o.merge(c))}return o}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let i=this._foldersConsolidatedConfigurations.get(e);if(!i){const o=this.getWorkspaceConsolidatedConfiguration(),a=this._folderConfigurations.get(e);a?(i=o.merge(a),this._freeze&&(i=i.freeze()),this._foldersConsolidatedConfigurations.set(e,i)):i=o}return i}getFolderConfigurationModelForResource(e,i){if(i&&e){const o=i.getFolder(e);if(o)return this._folderConfigurations.get(o.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,i)=>{const{contents:o,overrides:a,keys:c}=this._folderConfigurations.get(i);return e.push([i,{contents:o,overrides:a,keys:c}]),e},[])}}static parse(e){const i=this.parseConfigurationModel(e.defaults),o=this.parseConfigurationModel(e.policy),a=this.parseConfigurationModel(e.application),c=this.parseConfigurationModel(e.user),d=this.parseConfigurationModel(e.workspace),_=e.folders.reduce((b,k)=>(b.set(URI.revive(k[0]),this.parseConfigurationModel(k[1])),b),new ResourceMap);return new Configuration(i,o,a,c,new ConfigurationModel,d,_,new ConfigurationModel,new ResourceMap,!1)}static parseConfigurationModel(e){return new ConfigurationModel(e.contents,e.keys,e.overrides).freeze()}}class ConfigurationChangeEvent{constructor(e,i,o,a){this.change=e,this.previous=i,this.currentConfiguraiton=o,this.currentWorkspace=a,this._previousConfiguration=void 0;const c=new Set;e.keys.forEach(_=>c.add(_)),e.overrides.forEach(([,_])=>_.forEach(b=>c.add(b))),this.affectedKeys=[...c.values()];const d=new ConfigurationModel;this.affectedKeys.forEach(_=>d.setValue(_,{})),this.affectedKeysTree=d.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=Configuration.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,i){var o;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(i){const a=this.previousConfiguration?this.previousConfiguration.getValue(e,i,(o=this.previous)===null||o===void 0?void 0:o.workspace):void 0,c=this.currentConfiguraiton.getValue(e,i,this.currentWorkspace);return!equals(a,c)}return!0}return!1}doesAffectedKeysTreeContains(e,i){let o=toValuesTree({[i]:!0},()=>{}),a;for(;typeof o=="object"&&(a=Object.keys(o)[0]);){if(e=e[a],!e)return!1;o=o[a]}return!0}}const HIGH_FREQ_COMMANDS=/^(cursor|delete)/;class AbstractKeybindingService extends Disposable{constructor(e,i,o,a,c){super(),this._contextKeyService=e,this._commandService=i,this._telemetryService=o,this._notificationService=a,this._logService=c,this._onDidUpdateKeybindings=this._register(new Emitter$1),this._currentChord=null,this._currentChordChecker=new IntervalTimer,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new TimeoutTimer,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Event.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,i){const o=this._getResolver().lookupPrimaryKeybinding(e,i||this._contextKeyService);if(!!o)return o.resolvedKeybinding}dispatchEvent(e,i){return this._dispatch(e,i)}softDispatch(e,i){this._log("/ Soft dispatching keyboard event");const o=this.resolveKeyboardEvent(e);if(o.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[a]=o.getDispatchParts();if(a===null)return this._log("\\ Keyboard event cannot be dispatched"),null;const c=this._contextKeyService.getContext(i),d=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(c,d,a)}_enterChordMode(e,i){this._currentChord={keypress:e,label:i},this._currentChordStatusMessage=this._notificationService.status(localize("first.chord","({0}) was pressed. Waiting for second key of chord...",i));const o=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-o>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,i){return this._doDispatch(this.resolveKeyboardEvent(e),i,!1)}_singleModifierDispatch(e,i){const o=this.resolveKeyboardEvent(e),[a]=o.getSingleModifierDispatchParts();if(a)return this._ignoreSingleModifiers.has(a)?(this._log(`+ Ignoring single modifier ${a} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=KeybindingModifierSet.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${a}.`),this._currentSingleModifier=a,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):a===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${a} ${a}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(o,i,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${a}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[c]=o.getParts();return this._ignoreSingleModifiers=new KeybindingModifierSet(c),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,i,o=!1){let a=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let c=null,d=null;if(o){const[j]=e.getSingleModifierDispatchParts();c=j,d=j}else[c]=e.getDispatchParts(),d=this._currentChord?this._currentChord.keypress:null;if(c===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),a;const _=this._contextKeyService.getContext(i),b=e.getLabel(),k=this._getResolver().resolve(_,d,c);return this._logService.trace("KeybindingService#dispatch",b,k==null?void 0:k.commandId),k&&k.enterChord?(a=!0,this._enterChordMode(c,b),this._log("+ Entering chord mode..."),a):(this._currentChord&&(!k||!k.commandId)&&(this._log(`+ Leaving chord mode: Nothing bound to "${this._currentChord.label} ${b}".`),this._notificationService.status(localize("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,b),{hideAfter:10*1e3}),a=!0),this._leaveChordMode(),k&&k.commandId&&(k.bubble||(a=!0),this._log(`+ Invoking command ${k.commandId}.`),typeof k.commandArgs>"u"?this._commandService.executeCommand(k.commandId).then(void 0,j=>this._notificationService.warn(j)):this._commandService.executeCommand(k.commandId,k.commandArgs).then(void 0,j=>this._notificationService.warn(j)),HIGH_FREQ_COMMANDS.test(k.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:k.commandId,from:"keybinding"})),a)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class KeybindingModifierSet{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}KeybindingModifierSet.EMPTY=new KeybindingModifierSet(null);const IKeybindingService=createDecorator("keybindingService");class KeybindingResolver{constructor(e,i,o){this._log=o,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const a of e){const c=a.command;c&&c.charAt(0)!=="-"&&this._defaultBoundCommands.set(c,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=KeybindingResolver.handleRemovals([].concat(e).concat(i));for(let a=0,c=this._keybindings.length;a<c;a++){const d=this._keybindings[a];d.keypressParts.length!==0&&(d.when&&d.when.type===0||this._addKeyPress(d.keypressParts[0],d))}}static _isTargetedForRemoval(e,i,o,a){return!(i&&e.keypressParts[0]!==i||o&&e.keypressParts[1]!==o||a&&(!e.when||!expressionsAreEqualWithConstantSubstitution(a,e.when)))}static handleRemovals(e){const i=new Map;for(let a=0,c=e.length;a<c;a++){const d=e[a];if(d.command&&d.command.charAt(0)==="-"){const _=d.command.substring(1);i.has(_)?i.get(_).push(d):i.set(_,[d])}}if(i.size===0)return e;const o=[];for(let a=0,c=e.length;a<c;a++){const d=e[a];if(!d.command||d.command.length===0){o.push(d);continue}if(d.command.charAt(0)==="-")continue;const _=i.get(d.command);if(!_||!d.isDefault){o.push(d);continue}let b=!1;for(const k of _){const j=k.keypressParts[0],_e=k.keypressParts[1],et=k.when;if(this._isTargetedForRemoval(d,j,_e,et)){b=!0;break}}if(!b){o.push(d);continue}}return o}_addKeyPress(e,i){const o=this._map.get(e);if(typeof o>"u"){this._map.set(e,[i]),this._addToLookupMap(i);return}for(let a=o.length-1;a>=0;a--){const c=o[a];if(c.command===i.command)continue;const d=c.keypressParts.length>1,_=i.keypressParts.length>1;d&&_&&c.keypressParts[1]!==i.keypressParts[1]||KeybindingResolver.whenIsEntirelyIncluded(c.when,i.when)&&this._removeFromLookupMap(c)}o.push(i),this._addToLookupMap(i)}_addToLookupMap(e){if(!e.command)return;let i=this._lookupMap.get(e.command);typeof i>"u"?(i=[e],this._lookupMap.set(e.command,i)):i.push(e)}_removeFromLookupMap(e){if(!e.command)return;const i=this._lookupMap.get(e.command);if(!(typeof i>"u")){for(let o=0,a=i.length;o<a;o++)if(i[o]===e){i.splice(o,1);return}}}static whenIsEntirelyIncluded(e,i){return!i||i.type===1?!0:!e||e.type===1?!1:implies(e,i)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,i){const o=this._lookupMap.get(e);if(typeof o>"u"||o.length===0)return null;if(o.length===1)return o[0];for(let a=o.length-1;a>=0;a--){const c=o[a];if(i.contextMatchesRules(c.when))return c}return o[o.length-1]}resolve(e,i,o){this._log(`| Resolving ${o}${i?` chorded from ${i}`:""}`);let a=null;if(i!==null){const d=this._map.get(i);if(typeof d>"u")return this._log("\\ No keybinding entries."),null;a=[];for(let _=0,b=d.length;_<b;_++){const k=d[_];k.keypressParts[1]===o&&a.push(k)}}else{const d=this._map.get(o);if(typeof d>"u")return this._log("\\ No keybinding entries."),null;a=d}const c=this._findCommand(e,a);return c?i===null&&c.keypressParts.length>1&&c.keypressParts[1]!==null?(this._log(`\\ From ${a.length} keybinding entries, matched chord, when: ${printWhenExplanation(c.when)}, source: ${printSourceExplanation(c)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${a.length} keybinding entries, matched ${c.command}, when: ${printWhenExplanation(c.when)}, source: ${printSourceExplanation(c)}.`),{enterChord:!1,leaveChord:c.keypressParts.length>1,commandId:c.command,commandArgs:c.commandArgs,bubble:c.bubble}):(this._log(`\\ From ${a.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,i){for(let o=i.length-1;o>=0;o--){const a=i[o];if(!!KeybindingResolver._contextMatchesRules(e,a.when))return a}return null}static _contextMatchesRules(e,i){return i?i.evaluate(e):!0}}function printWhenExplanation(s){return s?`${s.serialize()}`:"no when condition"}function printSourceExplanation(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}class ResolvedKeybindingItem{constructor(e,i,o,a,c,d,_){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?removeElementsAfterNulls(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=removeElementsAfterNulls(e.getSingleModifierDispatchParts())),this.bubble=i?i.charCodeAt(0)===94:!1,this.command=this.bubble?i.substr(1):i,this.commandArgs=o,this.when=a,this.isDefault=c,this.extensionId=d,this.isBuiltinExtension=_}}function removeElementsAfterNulls(s){const e=[];for(let i=0,o=s.length;i<o;i++){const a=s[i];if(!a)return e;e.push(a)}return e}class ModifierLabelProvider{constructor(e,i,o=i){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=i,this.modifierLabels[3]=o}toLabel(e,i,o){if(i.length===0)return null;const a=[];for(let c=0,d=i.length;c<d;c++){const _=i[c],b=o(_);if(b===null)return null;a[c]=_simpleAsString(_,b,this.modifierLabels[e])}return a.join(" ")}}const UILabelProvider=new ModifierLabelProvider({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:localize({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:localize({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:localize({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:localize({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:localize({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:localize({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:localize({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:localize({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),AriaLabelProvider=new ModifierLabelProvider({ctrlKey:localize({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:localize({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:localize({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:localize({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:localize({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:localize({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:localize({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:localize({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:localize({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:localize({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:localize({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:localize({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),ElectronAcceleratorLabelProvider=new ModifierLabelProvider({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});new ModifierLabelProvider({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function _simpleAsString(s,e,i){if(e===null)return"";const o=[];return s.ctrlKey&&o.push(i.ctrlKey),s.shiftKey&&o.push(i.shiftKey),s.altKey&&o.push(i.altKey),s.metaKey&&o.push(i.metaKey),e!==""&&o.push(e),o.join(i.separator)}class BaseResolvedKeybinding extends ResolvedKeybinding{constructor(e,i){if(super(),i.length===0)throw illegalArgument("parts");this._os=e,this._parts=i}getLabel(){return UILabelProvider.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return AriaLabelProvider.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:ElectronAcceleratorLabelProvider.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new ResolvedKeybindingPart(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class USLayoutResolvedKeybinding extends BaseResolvedKeybinding{constructor(e,i){super(i,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return KeyCodeUtils.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":KeyCodeUtils.toString(e.keyCode)}_getElectronAccelerator(e){return KeyCodeUtils.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return USLayoutResolvedKeybinding.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let i="";return e.ctrlKey&&(i+="ctrl+"),e.shiftKey&&(i+="shift+"),e.altKey&&(i+="alt+"),e.metaKey&&(i+="meta+"),i+=KeyCodeUtils.toString(e.keyCode),i}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const i=IMMUTABLE_CODE_TO_KEY_CODE[e];if(i!==-1)return i;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof SimpleKeybinding)return e;const i=this._scanCodeToKeyCode(e.scanCode);return i===0?null:new SimpleKeybinding(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,i)}static resolveUserBinding(e,i){const o=removeElementsAfterNulls(e.map(a=>this._resolveSimpleUserBinding(a)));return o.length>0?[new USLayoutResolvedKeybinding(new ChordKeybinding(o),i)]:[]}}const ILabelService=createDecorator("labelService"),IWorkspaceContextService=createDecorator("contextService");class WorkspaceFolder{constructor(e,i){this.raw=i,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const WORKSPACE_EXTENSION="code-workspace";localize("codeWorkspace","Code Workspace");var AccessibilityHelpNLS;(function(s){s.noSelection=localize("noSelection","No selection"),s.singleSelectionRange=localize("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),s.singleSelection=localize("singleSelection","Line {0}, Column {1}"),s.multiSelectionRange=localize("multiSelectionRange","{0} selections ({1} characters selected)"),s.multiSelection=localize("multiSelection","{0} selections"),s.emergencyConfOn=localize("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),s.openingDocs=localize("openingDocs","Now opening the Editor Accessibility documentation page."),s.readonlyDiffEditor=localize("readonlyDiffEditor"," in a read-only pane of a diff editor."),s.editableDiffEditor=localize("editableDiffEditor"," in a pane of a diff editor."),s.readonlyEditor=localize("readonlyEditor"," in a read-only code editor"),s.editableEditor=localize("editableEditor"," in a code editor"),s.changeConfigToOnMac=localize("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),s.changeConfigToOnWinLinux=localize("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),s.auto_on=localize("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),s.auto_off=localize("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),s.tabFocusModeOnMsg=localize("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),s.tabFocusModeOnMsgNoKb=localize("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),s.tabFocusModeOffMsg=localize("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),s.tabFocusModeOffMsgNoKb=localize("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),s.openDocMac=localize("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),s.openDocWinLinux=localize("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),s.outroMsg=localize("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),s.showAccessibilityHelpAction=localize("showAccessibilityHelpAction","Show Accessibility Help")})(AccessibilityHelpNLS||(AccessibilityHelpNLS={}));var InspectTokensNLS;(function(s){s.inspectTokensAction=localize("inspectTokens","Developer: Inspect Tokens")})(InspectTokensNLS||(InspectTokensNLS={}));var GoToLineNLS;(function(s){s.gotoLineActionLabel=localize("gotoLineActionLabel","Go to Line/Column...")})(GoToLineNLS||(GoToLineNLS={}));var QuickHelpNLS;(function(s){s.helpQuickAccessActionLabel=localize("helpQuickAccess","Show all Quick Access Providers")})(QuickHelpNLS||(QuickHelpNLS={}));var QuickCommandNLS;(function(s){s.quickCommandActionLabel=localize("quickCommandActionLabel","Command Palette"),s.quickCommandHelp=localize("quickCommandActionHelp","Show And Run Commands")})(QuickCommandNLS||(QuickCommandNLS={}));var QuickOutlineNLS;(function(s){s.quickOutlineActionLabel=localize("quickOutlineActionLabel","Go to Symbol..."),s.quickOutlineByCategoryActionLabel=localize("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(QuickOutlineNLS||(QuickOutlineNLS={}));var StandaloneCodeEditorNLS;(function(s){s.editorViewAccessibleLabel=localize("editorViewAccessibleLabel","Editor content"),s.accessibilityHelpMessage=localize("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(StandaloneCodeEditorNLS||(StandaloneCodeEditorNLS={}));var ToggleHighContrastNLS;(function(s){s.toggleHighContrast=localize("toggleHighContrast","Toggle High Contrast Theme")})(ToggleHighContrastNLS||(ToggleHighContrastNLS={}));var StandaloneServicesNLS;(function(s){s.bulkEditServiceSummary=localize("bulkEditServiceSummary","Made {0} edits in {1} files")})(StandaloneServicesNLS||(StandaloneServicesNLS={}));const IWorkspaceTrustManagementService=createDecorator("workspaceTrustManagementService");var Range$1;(function(s){function e(c,d){if(c.start>=d.end||d.start>=c.end)return{start:0,end:0};const _=Math.max(c.start,d.start),b=Math.min(c.end,d.end);return b-_<=0?{start:0,end:0}:{start:_,end:b}}s.intersect=e;function i(c){return c.end-c.start<=0}s.isEmpty=i;function o(c,d){return!i(e(c,d))}s.intersects=o;function a(c,d){const _=[],b={start:c.start,end:Math.min(d.start,c.end)},k={start:Math.max(d.end,c.start),end:c.end};return i(b)||_.push(b),i(k)||_.push(k),_}s.relativeComplement=a})(Range$1||(Range$1={}));const contextview="";var LayoutAnchorMode;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(LayoutAnchorMode||(LayoutAnchorMode={}));function layout(s,e,i){const o=i.mode===LayoutAnchorMode.ALIGN?i.offset:i.offset+i.size,a=i.mode===LayoutAnchorMode.ALIGN?i.offset+i.size:i.offset;return i.position===0?e<=s-o?o:e<=a?a-e:Math.max(s-e,0):e<=a?a-e:e<=s-o?o:0}class ContextView extends Disposable{constructor(e,i){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=Disposable.None,this.toDisposeOnSetContainer=Disposable.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=$$5(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,hide(this.view),this.setContainer(e,i),this._register(toDisposable(()=>this.setContainer(null,1)))}setContainer(e,i){var o;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(o=this.shadowRootHostElement)===null||o===void 0||o.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=i!==1,this.useShadowDOM=i===3,this.useShadowDOM){this.shadowRootHostElement=$$5(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const c=document.createElement("style");c.textContent=SHADOW_ROOT_CSS,this.shadowRoot.appendChild(c),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild($$5("slot"))}else this.container.appendChild(this.view);const a=new DisposableStore;ContextView.BUBBLE_UP_EVENTS.forEach(c=>{a.add(addStandardDisposableListener(this.container,c,d=>{this.onDOMEvent(d,!1)}))}),ContextView.BUBBLE_DOWN_EVENTS.forEach(c=>{a.add(addStandardDisposableListener(this.container,c,d=>{this.onDOMEvent(d,!0)},!0))}),this.toDisposeOnSetContainer=a}}show(e){var i,o;this.isVisible()&&this.hide(),clearNode(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",show(this.view),this.toDisposeOnClean=e.render(this.view)||Disposable.None,this.delegate=e,this.doLayout(),(o=(i=this.delegate).focus)===null||o===void 0||o.call(i)}getViewElement(){return this.view}layout(){if(!!this.isVisible()){if(this.delegate.canRelayout===!1&&!(isIOS&&BrowserFeatures.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let i;if(isHTMLElement(e)){const _e=getDomNodePagePosition(e),et=getDomNodeZoomLevel(e);i={top:_e.top*et,left:_e.left*et,width:_e.width*et,height:_e.height*et}}else i={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const o=getTotalWidth(this.view),a=getTotalHeight(this.view),c=this.delegate.anchorPosition||0,d=this.delegate.anchorAlignment||0,_=this.delegate.anchorAxisAlignment||0;let b,k;if(_===0){const _e={offset:i.top-window.pageYOffset,size:i.height,position:c===0?0:1},et={offset:i.left,size:i.width,position:d===0?0:1,mode:LayoutAnchorMode.ALIGN};b=layout(window.innerHeight,a,_e)+window.pageYOffset,Range$1.intersects({start:b,end:b+a},{start:_e.offset,end:_e.offset+_e.size})&&(et.mode=LayoutAnchorMode.AVOID),k=layout(window.innerWidth,o,et)}else{const _e={offset:i.left,size:i.width,position:d===0?0:1},et={offset:i.top,size:i.height,position:c===0?0:1,mode:LayoutAnchorMode.ALIGN};k=layout(window.innerWidth,o,_e),Range$1.intersects({start:k,end:k+o},{start:_e.offset,end:_e.offset+_e.size})&&(et.mode=LayoutAnchorMode.AVOID),b=layout(window.innerHeight,a,et)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(c===0?"bottom":"top"),this.view.classList.add(d===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const j=getDomNodePagePosition(this.container);this.view.style.top=`${b-(this.useFixedPosition?getDomNodePagePosition(this.view).top:j.top)}px`,this.view.style.left=`${k-(this.useFixedPosition?getDomNodePagePosition(this.view).left:j.left)}px`,this.view.style.width="initial"}hide(e){const i=this.delegate;this.delegate=null,i!=null&&i.onHide&&i.onHide(e),this.toDisposeOnClean.dispose(),hide(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,i){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):i&&!isAncestor$1(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}ContextView.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];ContextView.BUBBLE_DOWN_EVENTS=["click"];const SHADOW_ROOT_CSS=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var __decorate$j=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$f=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let ContextViewService=class extends Disposable{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Disposable.None,this.container=e.hasContainer?e.container:null,this.contextView=this._register(new ContextView(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,i){this.contextView.setContainer(e,i||1)}showContextView(e,i,o){i?(i!==this.container||this.shadowRoot!==o)&&(this.container=i,this.setContainer(i,o?3:2)):this.layoutService.hasContainer&&this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.shadowRoot=o,this.contextView.show(e);const a=toDisposable(()=>{this.currentViewDisposable===a&&this.hideContextView()});return this.currentViewDisposable=a,a}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};ContextViewService=__decorate$j([__param$f(0,ILayoutService)],ContextViewService);var __awaiter$b=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};const GLOBSTAR="**",GLOB_SPLIT="/",PATH_REGEX="[/\\\\]",NO_PATH_REGEX="[^/\\\\]",ALL_FORWARD_SLASHES=/\//g;function starsToRegExp(s,e){switch(s){case 0:return"";case 1:return`${NO_PATH_REGEX}*?`;default:return`(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}${e?`|${PATH_REGEX}${NO_PATH_REGEX}+`:""})*?`}}function splitGlobAware(s,e){if(!s)return[];const i=[];let o=!1,a=!1,c="";for(const d of s){switch(d){case e:if(!o&&!a){i.push(c),c="";continue}break;case"{":o=!0;break;case"}":o=!1;break;case"[":a=!0;break;case"]":a=!1;break}c+=d}return c&&i.push(c),i}function parseRegExp(s){if(!s)return"";let e="";const i=splitGlobAware(s,GLOB_SPLIT);if(i.every(o=>o===GLOBSTAR))e=".*";else{let o=!1;i.forEach((a,c)=>{if(a===GLOBSTAR){if(o)return;e+=starsToRegExp(2,c===i.length-1)}else{let d=!1,_="",b=!1,k="";for(const j of a){if(j!=="}"&&d){_+=j;continue}if(b&&(j!=="]"||!k)){let _e;j==="-"?_e=j:(j==="^"||j==="!")&&!k?_e="^":j===GLOB_SPLIT?_e="":_e=escapeRegExpCharacters(j),k+=_e;continue}switch(j){case"{":d=!0;continue;case"[":b=!0;continue;case"}":{const et=`(?:${splitGlobAware(_,",").map(tt=>parseRegExp(tt)).join("|")})`;e+=et,d=!1,_="";break}case"]":{e+="["+k+"]",b=!1,k="";break}case"?":e+=NO_PATH_REGEX;continue;case"*":e+=starsToRegExp(1);continue;default:e+=escapeRegExpCharacters(j)}}c<i.length-1&&(i[c+1]!==GLOBSTAR||c+2<i.length)&&(e+=PATH_REGEX)}o=a===GLOBSTAR})}return e}const T1=/^\*\*\/\*\.[\w\.-]+$/,T2=/^\*\*\/([\w\.-]+)\/?$/,T3=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,T3_2=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,T4=/^\*\*((\/[\w\.-]+)+)\/?$/,T5=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,CACHE=new LRUCache(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(s,e){if(!s)return NULL;let i;typeof s!="string"?i=s.pattern:i=s,i=i.trim();const o=`${i}_${!!e.trimForExclusions}`;let a=CACHE.get(o);if(a)return wrapRelativePattern(a,s);let c;return T1.test(i)?a=trivia1(i.substr(4),i):(c=T2.exec(trimForExclusions(i,e)))?a=trivia2(c[1],i):(e.trimForExclusions?T3_2:T3).test(i)?a=trivia3(i,e):(c=T4.exec(trimForExclusions(i,e)))?a=trivia4and5(c[1].substr(1),i,!0):(c=T5.exec(trimForExclusions(i,e)))?a=trivia4and5(c[1],i,!1):a=toRegExp(i),CACHE.set(o,a),wrapRelativePattern(a,s)}function wrapRelativePattern(s,e){if(typeof e=="string")return s;const i=function(o,a){return isEqualOrParent(o,e.base,!isLinux)?s(o.substr(e.base.length+1),a):null};return i.allBasenames=s.allBasenames,i.allPaths=s.allPaths,i.basenames=s.basenames,i.patterns=s.patterns,i}function trimForExclusions(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}function trivia1(s,e){return function(i,o){return typeof i=="string"&&i.endsWith(s)?e:null}}function trivia2(s,e){const i=`/${s}`,o=`\\${s}`,a=function(d,_){return typeof d!="string"?null:_?_===s?e:null:d===s||d.endsWith(i)||d.endsWith(o)?e:null},c=[s];return a.basenames=c,a.patterns=[e],a.allBasenames=c,a}function trivia3(s,e){const i=aggregateBasenameMatches(s.slice(1,-1).split(",").map(_=>parsePattern(_,e)).filter(_=>_!==NULL),s),o=i.length;if(!o)return NULL;if(o===1)return i[0];const a=function(_,b){for(let k=0,j=i.length;k<j;k++)if(i[k](_,b))return s;return null},c=i.find(_=>!!_.allBasenames);c&&(a.allBasenames=c.allBasenames);const d=i.reduce((_,b)=>b.allPaths?_.concat(b.allPaths):_,[]);return d.length&&(a.allPaths=d),a}function trivia4and5(s,e,i){const o=sep===posix.sep,a=o?s:s.replace(ALL_FORWARD_SLASHES,sep),c=sep+a,d=posix.sep+s;let _;return i?_=function(b,k){return typeof b=="string"&&(b===a||b.endsWith(c)||!o&&(b===s||b.endsWith(d)))?e:null}:_=function(b,k){return typeof b=="string"&&(b===a||!o&&b===s)?e:null},_.allPaths=[(i?"*/":"./")+s],_}function toRegExp(s){try{const e=new RegExp(`^${parseRegExp(s)}$`);return function(i){return e.lastIndex=0,typeof i=="string"&&e.test(i)?s:null}}catch{return NULL}}function match(s,e,i){return!s||typeof e!="string"?!1:parse$2(s)(e,void 0,i)}function parse$2(s,e={}){if(!s)return FALSE;if(typeof s=="string"||isRelativePattern(s)){const i=parsePattern(s,e);if(i===NULL)return FALSE;const o=function(a,c){return!!i(a,c)};return i.allBasenames&&(o.allBasenames=i.allBasenames),i.allPaths&&(o.allPaths=i.allPaths),o}return parsedExpression(s,e)}function isRelativePattern(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function parsedExpression(s,e){const i=aggregateBasenameMatches(Object.getOwnPropertyNames(s).map(_=>parseExpressionPattern(_,s[_],e)).filter(_=>_!==NULL)),o=i.length;if(!o)return NULL;if(!i.some(_=>!!_.requiresSiblings)){if(o===1)return i[0];const _=function(j,_e){let et;for(let tt=0,it=i.length;tt<it;tt++){const st=i[tt](j,_e);if(typeof st=="string")return st;isThenable$1(st)&&(et||(et=[]),et.push(st))}return et?(()=>__awaiter$b(this,void 0,void 0,function*(){for(const tt of et){const it=yield tt;if(typeof it=="string")return it}return null}))():null},b=i.find(j=>!!j.allBasenames);b&&(_.allBasenames=b.allBasenames);const k=i.reduce((j,_e)=>_e.allPaths?j.concat(_e.allPaths):j,[]);return k.length&&(_.allPaths=k),_}const a=function(_,b,k){let j,_e;for(let et=0,tt=i.length;et<tt;et++){const it=i[et];it.requiresSiblings&&k&&(b||(b=basename$1(_)),j||(j=b.substr(0,b.length-extname(_).length)));const st=it(_,b,j,k);if(typeof st=="string")return st;isThenable$1(st)&&(_e||(_e=[]),_e.push(st))}return _e?(()=>__awaiter$b(this,void 0,void 0,function*(){for(const et of _e){const tt=yield et;if(typeof tt=="string")return tt}return null}))():null},c=i.find(_=>!!_.allBasenames);c&&(a.allBasenames=c.allBasenames);const d=i.reduce((_,b)=>b.allPaths?_.concat(b.allPaths):_,[]);return d.length&&(a.allPaths=d),a}function parseExpressionPattern(s,e,i){if(e===!1)return NULL;const o=parsePattern(s,i);if(o===NULL)return NULL;if(typeof e=="boolean")return o;if(e){const a=e.when;if(typeof a=="string"){const c=(d,_,b,k)=>{if(!k||!o(d,_))return null;const j=a.replace("$(basename)",b),_e=k(j);return isThenable$1(_e)?_e.then(et=>et?s:null):_e?s:null};return c.requiresSiblings=!0,c}}return o}function aggregateBasenameMatches(s,e){const i=s.filter(_=>!!_.basenames);if(i.length<2)return s;const o=i.reduce((_,b)=>{const k=b.basenames;return k?_.concat(k):_},[]);let a;if(e){a=[];for(let _=0,b=o.length;_<b;_++)a.push(e)}else a=i.reduce((_,b)=>{const k=b.patterns;return k?_.concat(k):_},[]);const c=function(_,b){if(typeof _!="string")return null;if(!b){let j;for(j=_.length;j>0;j--){const _e=_.charCodeAt(j-1);if(_e===47||_e===92)break}b=_.substr(j)}const k=o.indexOf(b);return k!==-1?a[k]:null};c.basenames=o,c.patterns=a,c.allBasenames=o;const d=s.filter(_=>!_.basenames);return d.push(c),d}let registeredAssociations=[],nonUserRegisteredAssociations=[],userRegisteredAssociations=[];function registerPlatformLanguageAssociation(s,e=!1){_registerLanguageAssociation(s,!1,e)}function _registerLanguageAssociation(s,e,i){const o=toLanguageAssociationItem(s,e);registeredAssociations.push(o),o.userConfigured?userRegisteredAssociations.push(o):nonUserRegisteredAssociations.push(o),i&&!o.userConfigured&&registeredAssociations.forEach(a=>{a.mime===o.mime||a.userConfigured||(o.extension&&a.extension===o.extension&&console.warn(`Overwriting extension <<${o.extension}>> to now point to mime <<${o.mime}>>`),o.filename&&a.filename===o.filename&&console.warn(`Overwriting filename <<${o.filename}>> to now point to mime <<${o.mime}>>`),o.filepattern&&a.filepattern===o.filepattern&&console.warn(`Overwriting filepattern <<${o.filepattern}>> to now point to mime <<${o.mime}>>`),o.firstline&&a.firstline===o.firstline&&console.warn(`Overwriting firstline <<${o.firstline}>> to now point to mime <<${o.mime}>>`))})}function toLanguageAssociationItem(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?parse$2(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(posix.sep)>=0:!1}}function clearPlatformLanguageAssociations(){registeredAssociations=registeredAssociations.filter(s=>s.userConfigured),nonUserRegisteredAssociations=[]}function getLanguageIds(s,e){return getAssociations(s,e).map(i=>i.id)}function getAssociations(s,e){let i;if(s)switch(s.scheme){case Schemas.file:i=s.fsPath;break;case Schemas.data:{i=DataUri.parseMetaData(s).get(DataUri.META_DATA_LABEL);break}case Schemas.vscodeNotebookCell:i=void 0;break;default:i=s.path}if(!i)return[{id:"unknown",mime:Mimes.unknown}];i=i.toLowerCase();const o=basename$1(i),a=getAssociationByPath(i,o,userRegisteredAssociations);if(a)return[a,{id:PLAINTEXT_LANGUAGE_ID,mime:Mimes.text}];const c=getAssociationByPath(i,o,nonUserRegisteredAssociations);if(c)return[c,{id:PLAINTEXT_LANGUAGE_ID,mime:Mimes.text}];if(e){const d=getAssociationByFirstline(e);if(d)return[d,{id:PLAINTEXT_LANGUAGE_ID,mime:Mimes.text}]}return[{id:"unknown",mime:Mimes.unknown}]}function getAssociationByPath(s,e,i){var o;let a,c,d;for(let _=i.length-1;_>=0;_--){const b=i[_];if(e===b.filenameLowercase){a=b;break}if(b.filepattern&&(!c||b.filepattern.length>c.filepattern.length)){const k=b.filepatternOnPath?s:e;!((o=b.filepatternLowercase)===null||o===void 0)&&o.call(b,k)&&(c=b)}b.extension&&(!d||b.extension.length>d.extension.length)&&e.endsWith(b.extensionLowercase)&&(d=b)}if(a)return a;if(c)return c;if(d)return d}function getAssociationByFirstline(s){if(startsWithUTF8BOM(s)&&(s=s.substr(1)),s.length>0)for(let e=registeredAssociations.length-1;e>=0;e--){const i=registeredAssociations[e];if(!i.firstline)continue;const o=s.match(i.firstline);if(o&&o.length>0)return i}}const hasOwnProperty=Object.prototype.hasOwnProperty,NULL_LANGUAGE_ID="vs.editor.nullLanguage";class LanguageIdCodec{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(NULL_LANGUAGE_ID,0),this._register(PLAINTEXT_LANGUAGE_ID,1),this._nextLanguageId=2}_register(e,i){this._languageIdToLanguage[i]=e,this._languageToLanguageId.set(e,i)}register(e){if(this._languageToLanguageId.has(e))return;const i=this._nextLanguageId++;this._register(e,i)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||NULL_LANGUAGE_ID}}class LanguagesRegistry extends Disposable{constructor(e=!0,i=!1){super(),this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,LanguagesRegistry.instanceCount++,this._warnOnOverwrite=i,this.languageIdCodec=new LanguageIdCodec,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(ModesRegistry.onDidChangeLanguages(o=>{this._initializeFromRegistry()})))}dispose(){LanguagesRegistry.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},clearPlatformLanguageAssociations();const e=[].concat(ModesRegistry.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const i of e)this._registerLanguage(i);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(i=>{const o=this._languages[i];o.name&&(this._nameMap[o.name]=o.identifier),o.aliases.forEach(a=>{this._lowercaseNameMap[a.toLowerCase()]=o.identifier}),o.mimetypes.forEach(a=>{this._mimeTypesMap[a]=o.identifier})}),Registry.as(Extensions$7.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const i=e.id;let o;hasOwnProperty.call(this._languages,i)?o=this._languages[i]:(this.languageIdCodec.register(i),o={identifier:i,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[i]=o),this._mergeLanguage(o,e)}_mergeLanguage(e,i){const o=i.id;let a=null;if(Array.isArray(i.mimetypes)&&i.mimetypes.length>0&&(e.mimetypes.push(...i.mimetypes),a=i.mimetypes[0]),a||(a=`text/x-${o}`,e.mimetypes.push(a)),Array.isArray(i.extensions)){i.configuration?e.extensions=i.extensions.concat(e.extensions):e.extensions=e.extensions.concat(i.extensions);for(const _ of i.extensions)registerPlatformLanguageAssociation({id:o,mime:a,extension:_},this._warnOnOverwrite)}if(Array.isArray(i.filenames))for(const _ of i.filenames)registerPlatformLanguageAssociation({id:o,mime:a,filename:_},this._warnOnOverwrite),e.filenames.push(_);if(Array.isArray(i.filenamePatterns))for(const _ of i.filenamePatterns)registerPlatformLanguageAssociation({id:o,mime:a,filepattern:_},this._warnOnOverwrite);if(typeof i.firstLine=="string"&&i.firstLine.length>0){let _=i.firstLine;_.charAt(0)!=="^"&&(_="^"+_);try{const b=new RegExp(_);regExpLeadsToEndlessLoop(b)||registerPlatformLanguageAssociation({id:o,mime:a,firstline:b},this._warnOnOverwrite)}catch(b){onUnexpectedError(b)}}e.aliases.push(o);let c=null;if(typeof i.aliases<"u"&&Array.isArray(i.aliases)&&(i.aliases.length===0?c=[null]:c=i.aliases),c!==null)for(const _ of c)!_||_.length===0||e.aliases.push(_);const d=c!==null&&c.length>0;if(!(d&&c[0]===null)){const _=(d?c[0]:null)||o;(d||!e.name)&&(e.name=_)}i.configuration&&e.configurationFiles.push(i.configuration),i.icon&&e.icons.push(i.icon)}isRegisteredLanguageId(e){return e?hasOwnProperty.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const i=e.toLowerCase();return hasOwnProperty.call(this._lowercaseNameMap,i)?this._lowercaseNameMap[i]:null}getLanguageIdByMimeType(e){return e&&hasOwnProperty.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,i){return!e&&!i?[]:getLanguageIds(e,i)}}LanguagesRegistry.instanceCount=0;class LanguageService extends Disposable{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new Emitter$1),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onDidChange=this._register(new Emitter$1({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,LanguageService.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new LanguagesRegistry(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){LanguageService.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,i){const o=this._registry.guessLanguageIdByFilepathOrFirstLine(e,i);return firstOrDefault(o,null)}createById(e){return new LanguageSelection(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,i){return new LanguageSelection(this.onDidChange,()=>{const o=this.guessLanguageIdByFilepathOrFirstLine(e,i);return this._createAndGetLanguageIdentifier(o)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=PLAINTEXT_LANGUAGE_ID),this._encounteredLanguages.has(e)||(this._encounteredLanguages.add(e),TokenizationRegistry.getOrCreate(e),this._onDidEncounterLanguage.fire(e)),e}}LanguageService.instanceCount=0;class LanguageSelection{constructor(e,i){this._onDidChangeLanguages=e,this._selector=i,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new Emitter$1({onLastListenerRemove:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const i=this._selector();i!==this.languageId&&(this.languageId=i,(e=this._emitter)===null||e===void 0||e.fire(this.languageId))}}const codicon="",codiconModifiers="";function formatRule(s){let e=s.definition;for(;e instanceof Codicon;)e=e.definition;return`.codicon-${s.id}:before { content: '${e.fontCharacter}'; }`}const MENU_MNEMONIC_REGEX=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,MENU_ESCAPED_MNEMONIC_REGEX=/(&amp;)?(&amp;)([^\s&])/g;var Direction;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(Direction||(Direction={}));class Menu$1 extends ActionBar{constructor(e,i,o={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const a=document.createElement("div");a.classList.add("monaco-menu"),a.setAttribute("role","presentation"),super(a,{orientation:1,actionViewItemProvider:_=>this.doGetActionViewItem(_,o,c),context:o.context,actionRunner:o.actionRunner,ariaLabel:o.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...isMacintosh||isLinux?[10]:[]],keyDown:!0}}),this.menuElement=a,this.actionsList.tabIndex=0,this.menuDisposables=this._register(new DisposableStore),this.initializeOrUpdateStyleSheet(e,{}),this._register(Gesture.addTarget(a)),addDisposableListener(a,EventType$1.KEY_DOWN,_=>{new StandardKeyboardEvent(_).equals(2)&&_.preventDefault()}),o.enableMnemonics&&this.menuDisposables.add(addDisposableListener(a,EventType$1.KEY_DOWN,_=>{const b=_.key.toLocaleLowerCase();if(this.mnemonics.has(b)){EventHelper.stop(_,!0);const k=this.mnemonics.get(b);if(k.length===1&&(k[0]instanceof SubmenuMenuActionViewItem&&k[0].container&&this.focusItemByElement(k[0].container),k[0].onClick(_)),k.length>1){const j=k.shift();j&&j.container&&(this.focusItemByElement(j.container),k.push(j)),this.mnemonics.set(b,k)}}})),isLinux&&this._register(addDisposableListener(a,EventType$1.KEY_DOWN,_=>{const b=new StandardKeyboardEvent(_);b.equals(14)||b.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),EventHelper.stop(_,!0)):(b.equals(13)||b.equals(12))&&(this.focusedItem=0,this.focusPrevious(),EventHelper.stop(_,!0))})),this._register(addDisposableListener(this.domNode,EventType$1.MOUSE_OUT,_=>{const b=_.relatedTarget;isAncestor$1(b,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),_.stopPropagation())})),this._register(addDisposableListener(this.actionsList,EventType$1.MOUSE_OVER,_=>{let b=_.target;if(!(!b||!isAncestor$1(b,this.actionsList)||b===this.actionsList)){for(;b.parentElement!==this.actionsList&&b.parentElement!==null;)b=b.parentElement;if(b.classList.contains("action-item")){const k=this.focusedItem;this.setFocusedItem(b),k!==this.focusedItem&&this.updateFocus()}}})),this._register(Gesture.addTarget(this.actionsList)),this._register(addDisposableListener(this.actionsList,EventType.Tap,_=>{let b=_.initialTarget;if(!(!b||!isAncestor$1(b,this.actionsList)||b===this.actionsList)){for(;b.parentElement!==this.actionsList&&b.parentElement!==null;)b=b.parentElement;if(b.classList.contains("action-item")){const k=this.focusedItem;this.setFocusedItem(b),k!==this.focusedItem&&this.updateFocus()}}}));const c={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new DomScrollableElement(a,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const d=this.scrollableElement.getDomNode();d.style.position="",this._register(addDisposableListener(a,EventType.Change,_=>{EventHelper.stop(_,!0);const b=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:b-_.translationY})})),this._register(addDisposableListener(d,EventType$1.MOUSE_UP,_=>{_.preventDefault()})),a.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,i=i.filter(_=>{var b;return!((b=o.submenuIds)===null||b===void 0)&&b.has(_.id)?(console.warn(`Found submenu cycle: ${_.id}`),!1):!0}),this.push(i,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(_=>!(_ instanceof MenuSeparatorActionViewItem)).forEach((_,b,k)=>{_.updatePositionInSet(b+1,k.length)})}initializeOrUpdateStyleSheet(e,i){this.styleSheet||(isInShadowDOM(e)?this.styleSheet=createStyleSheet(e):(Menu$1.globalStyleSheet||(Menu$1.globalStyleSheet=createStyleSheet()),this.styleSheet=Menu$1.globalStyleSheet)),this.styleSheet.textContent=getMenuWidgetCSS(i,isInShadowDOM(e))}style(e){const i=this.getContainer();this.initializeOrUpdateStyleSheet(i,e);const o=e.foregroundColor?`${e.foregroundColor}`:"",a=e.backgroundColor?`${e.backgroundColor}`:"",c=e.borderColor?`1px solid ${e.borderColor}`:"",d="5px",_=e.shadowColor?`0 2px 8px ${e.shadowColor}`:"";i.style.outline=c,i.style.borderRadius=d,i.style.color=o,i.style.backgroundColor=a,i.style.boxShadow=_,this.viewItems&&this.viewItems.forEach(b=>{(b instanceof BaseMenuActionViewItem||b instanceof MenuSeparatorActionViewItem)&&b.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const i=this.focusedItem;this.setFocusedItem(e),i!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let i=0;i<this.actionsList.children.length;i++){const o=this.actionsList.children[i];if(e===o){this.focusedItem=i;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,i,o){if(e instanceof Separator)return new MenuSeparatorActionViewItem(i.context,e,{icon:!0});if(e instanceof SubmenuAction){const a=new SubmenuMenuActionViewItem(e,e.actions,o,Object.assign(Object.assign({},i),{submenuIds:new Set([...i.submenuIds||[],e.id])}));if(i.enableMnemonics){const c=a.getMnemonic();if(c&&a.isEnabled()){let d=[];this.mnemonics.has(c)&&(d=this.mnemonics.get(c)),d.push(a),this.mnemonics.set(c,d)}}return a}else{const a={enableMnemonics:i.enableMnemonics,useEventAsContext:i.useEventAsContext};if(i.getKeyBinding){const d=i.getKeyBinding(e);if(d){const _=d.getLabel();_&&(a.keybinding=_)}}const c=new BaseMenuActionViewItem(i.context,e,a);if(i.enableMnemonics){const d=c.getMnemonic();if(d&&c.isEnabled()){let _=[];this.mnemonics.has(d)&&(_=this.mnemonics.get(d)),_.push(c),this.mnemonics.set(d,_)}}return c}}}class BaseMenuActionViewItem extends BaseActionViewItem{constructor(e,i,o={}){if(o.isMenu=!0,super(i,i,o),this.options=o,this.options.icon=o.icon!==void 0?o.icon:!1,this.options.label=o.label!==void 0?o.label:!0,this.cssClass="",this.options.label&&o.enableMnemonics){const a=this.getAction().label;if(a){const c=MENU_MNEMONIC_REGEX.exec(a);c&&(this.mnemonic=(c[1]?c[1]:c[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new RunOnceScheduler(()=>{!this.element||(this._register(addDisposableListener(this.element,EventType$1.MOUSE_UP,a=>{if(EventHelper.stop(a,!0),isFirefox){if(new StandardMouseEvent(a).rightButton)return;this.onClick(a)}else setTimeout(()=>{this.onClick(a)},0)})),this._register(addDisposableListener(this.element,EventType$1.CONTEXT_MENU,a=>{EventHelper.stop(a,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=append$1(this.element,$$5("a.action-menu-item")),this._action.id===Separator.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=append$1(this.item,$$5("span.menu-item-check"+Codicon.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=append$1(this.item,$$5("span.action-label")),this.options.label&&this.options.keybinding&&(append$1(this.item,$$5("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,i){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${i}`))}updateLabel(){var e;if(!!this.label&&this.options.label){clearNode(this.label);let i=stripIcons(this.getAction().label);if(i){const o=cleanMnemonic(i);this.options.enableMnemonics||(i=o),this.label.setAttribute("aria-label",o.replace(/&&/g,"&"));const a=MENU_MNEMONIC_REGEX.exec(i);if(a){i=escape(i),MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let c=MENU_ESCAPED_MNEMONIC_REGEX.exec(i);for(;c&&c[1];)c=MENU_ESCAPED_MNEMONIC_REGEX.exec(i);const d=_=>_.replace(/&amp;&amp;/g,"&amp;");c?this.label.append(ltrim(d(i.substr(0,c.index))," "),$$5("u",{"aria-hidden":"true"},c[3]),rtrim(d(i.substr(c.index+c[0].length))," ")):this.label.innerText=d(i).trim(),(e=this.item)===null||e===void 0||e.setAttribute("aria-keyshortcuts",(a[1]?a[1]:a[3]).toLocaleLowerCase())}else this.label.innerText=i.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),i=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,o=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,a=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",c=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=i?i.toString():"",this.item.style.backgroundColor=o?o.toString():"",this.item.style.outline=a,this.item.style.outlineOffset=c),this.check&&(this.check.style.color=i?i.toString():"")}style(e){this.menuStyle=e,this.applyStyle()}}class SubmenuMenuActionViewItem extends BaseMenuActionViewItem{constructor(e,i,o,a){super(e,e,a),this.submenuActions=i,this.parentData=o,this.submenuOptions=a,this.mysubmenu=null,this.submenuDisposables=this._register(new DisposableStore),this.mouseOver=!1,this.expandDirection=a&&a.expandDirection!==void 0?a.expandDirection:Direction.Right,this.showScheduler=new RunOnceScheduler(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new RunOnceScheduler(()=>{this.element&&!isAncestor$1(getActiveElement(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=append$1(this.item,$$5("span.submenu-indicator"+Codicon.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(addDisposableListener(this.element,EventType$1.KEY_UP,i=>{const o=new StandardKeyboardEvent(i);(o.equals(17)||o.equals(3))&&(EventHelper.stop(i,!0),this.createSubmenu(!0))})),this._register(addDisposableListener(this.element,EventType$1.KEY_DOWN,i=>{const o=new StandardKeyboardEvent(i);getActiveElement()===this.item&&(o.equals(17)||o.equals(3))&&EventHelper.stop(i,!0)})),this._register(addDisposableListener(this.element,EventType$1.MOUSE_OVER,i=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(addDisposableListener(this.element,EventType$1.MOUSE_LEAVE,i=>{this.mouseOver=!1})),this._register(addDisposableListener(this.element,EventType$1.FOCUS_OUT,i=>{this.element&&!isAncestor$1(getActiveElement(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){EventHelper.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,i,o,a){const c={top:0,left:0};return c.left=layout(e.width,i.width,{position:a===Direction.Right?0:1,offset:o.left,size:o.width}),c.left>=o.left&&c.left<o.left+o.width&&(o.left+10+i.width<=e.width&&(c.left=o.left+10),o.top+=10,o.height=0),c.top=layout(e.height,i.height,{position:0,offset:o.top,size:0}),c.top+i.height===o.top&&c.top+o.height+i.height<=e.height&&(c.top+=o.height),c}createSubmenu(e=!0){if(!!this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=append$1(this.element,$$5("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const i=getComputedStyle(this.parentData.parent.domNode),o=parseFloat(i.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Menu$1(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new EmptySubmenuAction],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const a=this.element.getBoundingClientRect(),c={top:a.top-o,left:a.left,height:a.height+2*o,width:a.width},d=this.submenuContainer.getBoundingClientRect(),{top:_,left:b}=this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth,window.innerHeight),Dimension.lift(d),c,this.expandDirection);this.submenuContainer.style.left=`${b-d.left}px`,this.submenuContainer.style.top=`${_-d.top}px`,this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType$1.KEY_UP,k=>{new StandardKeyboardEvent(k).equals(15)&&(EventHelper.stop(k,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType$1.KEY_DOWN,k=>{new StandardKeyboardEvent(k).equals(15)&&EventHelper.stop(k,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var i;this.item&&((i=this.item)===null||i===void 0||i.setAttribute("aria-expanded",e))}applyStyle(){var e;if(super.applyStyle(),!this.menuStyle)return;const o=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=o?`${o}`:""),(e=this.parentData.submenu)===null||e===void 0||e.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class MenuSeparatorActionViewItem extends ActionViewItem{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function cleanMnemonic(s){const e=MENU_MNEMONIC_REGEX,i=e.exec(s);if(!i)return s;const o=!i[1];return s.replace(e,o?"$2$3":"").trim()}function getMenuWidgetCSS(s,e){let i=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${formatRule(Codicon.menuSelection)}
${formatRule(Codicon.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221A\u03C6 */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .6em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){i+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const o=s.scrollbarShadow;o&&(i+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${o} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${o} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${o} 6px 6px 6px -6px inset;
				}
			`);const a=s.scrollbarSliderBackground;a&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${a};
				}
			`);const c=s.scrollbarSliderHoverBackground;c&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${c};
				}
			`);const d=s.scrollbarSliderActiveBackground;d&&(i+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${d};
				}
			`)}return i}function computeStyles(s,e){const i=Object.create(null);for(const o in e){const a=e[o];a&&(i[o]=resolveColorValue(a,s))}return i}function attachStyler(s,e,i){function o(){const a=computeStyles(s.getColorTheme(),e);typeof i=="function"?i(a):i.style(a)}return o(),s.onDidColorThemeChange(o)}function attachListStyler(s,e,i){return attachStyler(e,Object.assign(Object.assign({},defaultListStyles),i||{}),s)}const defaultListStyles={listFocusBackground,listFocusForeground,listFocusOutline,listActiveSelectionBackground,listActiveSelectionForeground,listActiveSelectionIconForeground,listFocusAndSelectionOutline,listFocusAndSelectionBackground:listActiveSelectionBackground,listFocusAndSelectionForeground:listActiveSelectionForeground,listInactiveSelectionBackground,listInactiveSelectionIconForeground,listInactiveSelectionForeground,listInactiveFocusBackground,listInactiveFocusOutline,listHoverBackground,listHoverForeground,listDropBackground,listSelectionOutline:activeContrastBorder,listHoverOutline:activeContrastBorder,listFilterWidgetBackground,listFilterWidgetOutline,listFilterWidgetNoMatchesOutline,listFilterWidgetShadow,treeIndentGuidesStroke,tableColumnsBorder,tableOddRowsBackgroundColor,inputActiveOptionBorder,inputActiveOptionForeground,inputActiveOptionBackground,inputBackground,inputForeground,inputBorder,inputValidationInfoBackground,inputValidationInfoForeground,inputValidationInfoBorder,inputValidationWarningBackground,inputValidationWarningForeground,inputValidationWarningBorder,inputValidationErrorBackground,inputValidationErrorForeground,inputValidationErrorBorder},defaultMenuStyles={shadowColor:widgetShadow,borderColor:menuBorder,foregroundColor:menuForeground,backgroundColor:menuBackground,selectionForegroundColor:menuSelectionForeground,selectionBackgroundColor:menuSelectionBackground,selectionBorderColor:menuSelectionBorder,separatorColor:menuSeparatorBackground,scrollbarShadow,scrollbarSliderBackground,scrollbarSliderHoverBackground,scrollbarSliderActiveBackground};function attachMenuStyler(s,e,i){return attachStyler(e,Object.assign(Object.assign({},defaultMenuStyles),i),s)}class ContextMenuHandler{constructor(e,i,o,a,c){this.contextViewService=e,this.telemetryService=i,this.notificationService=o,this.keybindingService=a,this.themeService=c,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const i=e.getActions();if(!i.length)return;this.focusToReturn=document.activeElement;let o;const a=isHTMLElement(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:c=>{const d=e.getMenuClassName?e.getMenuClassName():"";d&&(c.className+=" "+d),this.options.blockMouse&&(this.block=c.appendChild($$5(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",addDisposableListener(this.block,EventType$1.MOUSE_DOWN,k=>k.stopPropagation()));const _=new DisposableStore,b=e.actionRunner||new ActionRunner;return b.onBeforeRun(this.onActionRun,this,_),b.onDidRun(this.onDidActionRun,this,_),o=new Menu$1(c,i,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:b,getKeyBinding:e.getKeyBinding?e.getKeyBinding:k=>this.keybindingService.lookupKeybinding(k.id)}),_.add(attachMenuStyler(o,this.themeService)),o.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,_),o.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,_),_.add(addDisposableListener(window,EventType$1.BLUR,()=>this.contextViewService.hideContextView(!0))),_.add(addDisposableListener(window,EventType$1.MOUSE_DOWN,k=>{if(k.defaultPrevented)return;const j=new StandardMouseEvent(k);let _e=j.target;if(!j.rightButton){for(;_e;){if(_e===c)return;_e=_e.parentElement}this.contextViewService.hideContextView(!0)}})),combinedDisposable(_,o)},focus:()=>{o==null||o.focus(!!e.autoSelectFirstItem)},onHide:c=>{var d;(d=e.onHide)===null||d===void 0||d.call(e,!!c),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},a,!!a)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!isCancellationError(e.error)&&this.notificationService.error(e.error)}}var __decorate$i=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$e=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let ContextMenuService=class extends Disposable{constructor(e,i,o,a,c){super(),this._onDidShowContextMenu=new Emitter$1,this._onDidHideContextMenu=new Emitter$1,this.contextMenuHandler=new ContextMenuHandler(o,e,i,a,c)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:i=>{var o;(o=e.onHide)===null||o===void 0||o.call(e,i),this._onDidHideContextMenu.fire()}})),ModifierKeyEmitter.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};ContextMenuService=__decorate$i([__param$e(0,ITelemetryService),__param$e(1,INotificationService),__param$e(2,IContextViewService),__param$e(3,IKeybindingService),__param$e(4,IThemeService)],ContextMenuService);function parse$1(s){let e=JSON.parse(s);return e=revive(e),e}function revive(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return URI.revive(s);case 2:return new RegExp(s.source,s.flags);case 14:return new Date(s.source)}if(s instanceof VSBuffer||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let i=0;i<s.length;++i)s[i]=revive(s[i],e+1);else for(const i in s)Object.hasOwnProperty.call(s,i)&&(s[i]=revive(s[i],e+1))}return s}var EditorOpenSource;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(EditorOpenSource||(EditorOpenSource={}));var __decorate$h=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$d=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$a=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};let CommandOpener=class{constructor(e){this._commandService=e}open(e,i){return __awaiter$a(this,void 0,void 0,function*(){if(!matchesScheme(e,Schemas.command))return!1;if(!(i!=null&&i.allowCommands))return!0;typeof e=="string"&&(e=URI.parse(e));let o=[];try{o=parse$1(decodeURIComponent(e.query))}catch{try{o=parse$1(e.query)}catch{}}return Array.isArray(o)||(o=[o]),yield this._commandService.executeCommand(e.path,...o),!0})}};CommandOpener=__decorate$h([__param$d(0,ICommandService)],CommandOpener);let EditorOpener=class{constructor(e){this._editorService=e}open(e,i){return __awaiter$a(this,void 0,void 0,function*(){typeof e=="string"&&(e=URI.parse(e));const{selection:o,uri:a}=extractSelection(e);return e=a,e.scheme===Schemas.file&&(e=normalizePath(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:o,source:i!=null&&i.fromUserGesture?EditorOpenSource.USER:EditorOpenSource.API},i==null?void 0:i.editorOptions)},this._editorService.getFocusedCodeEditor(),i==null?void 0:i.openToSide),!0})}};EditorOpener=__decorate$h([__param$d(0,ICodeEditorService)],EditorOpener);let OpenerService=class{constructor(e,i){this._openers=new LinkedList,this._validators=new LinkedList,this._resolvers=new LinkedList,this._resolvedUriTargets=new ResourceMap(o=>o.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new LinkedList,this._defaultExternalOpener={openExternal:o=>__awaiter$a(this,void 0,void 0,function*(){return matchesSomeScheme(o,Schemas.http,Schemas.https)?windowOpenNoOpener(o):window.location.href=o,!0})},this._openers.push({open:(o,a)=>__awaiter$a(this,void 0,void 0,function*(){return(a==null?void 0:a.openExternal)||matchesSomeScheme(o,Schemas.mailto,Schemas.http,Schemas.https,Schemas.vsls)?(yield this._doOpenExternal(o,a),!0):!1})}),this._openers.push(new CommandOpener(i)),this._openers.push(new EditorOpener(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,i){var o;return __awaiter$a(this,void 0,void 0,function*(){const a=typeof e=="string"?URI.parse(e):e,c=(o=this._resolvedUriTargets.get(a))!==null&&o!==void 0?o:e;for(const d of this._validators)if(!(yield d.shouldOpen(c,i)))return!1;for(const d of this._openers)if(yield d.open(e,i))return!0;return!1})}resolveExternalUri(e,i){return __awaiter$a(this,void 0,void 0,function*(){for(const o of this._resolvers)try{const a=yield o.resolveExternalUri(e,i);if(a)return this._resolvedUriTargets.has(a.resolved)||this._resolvedUriTargets.set(a.resolved,e),a}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,i){return __awaiter$a(this,void 0,void 0,function*(){const o=typeof e=="string"?URI.parse(e):e;let a;try{a=(yield this.resolveExternalUri(o,i)).resolved}catch{a=o}let c;if(typeof e=="string"&&o.toString()===a.toString()?c=e:c=encodeURI(a.toString(!0)),i!=null&&i.allowContributedOpeners){const d=typeof(i==null?void 0:i.allowContributedOpeners)=="string"?i==null?void 0:i.allowContributedOpeners:void 0;for(const _ of this._externalOpeners)if(yield _.openExternal(c,{sourceUri:o,preferredOpenerId:d},CancellationToken.None))return!0}return this._defaultExternalOpener.openExternal(c,{sourceUri:o},CancellationToken.None)})}dispose(){this._validators.clear()}};OpenerService=__decorate$h([__param$d(0,ICodeEditorService),__param$d(1,ICommandService)],OpenerService);var MarkerSeverity$1;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(MarkerSeverity$1||(MarkerSeverity$1={}));(function(s){function e(d,_){return _-d}s.compare=e;const i=Object.create(null);i[s.Error]=localize("sev.error","Error"),i[s.Warning]=localize("sev.warning","Warning"),i[s.Info]=localize("sev.info","Info");function o(d){return i[d]||""}s.toString=o;function a(d){switch(d){case Severity$1.Error:return s.Error;case Severity$1.Warning:return s.Warning;case Severity$1.Info:return s.Info;case Severity$1.Ignore:return s.Hint}}s.fromSeverity=a;function c(d){switch(d){case s.Error:return Severity$1.Error;case s.Warning:return Severity$1.Warning;case s.Info:return Severity$1.Info;case s.Hint:return Severity$1.Ignore}}s.toSeverity=c})(MarkerSeverity$1||(MarkerSeverity$1={}));var IMarkerData;(function(s){const e="";function i(a){return o(a,!0)}s.makeKey=i;function o(a,c){const d=[e];return a.source?d.push(a.source.replace("\xA6","\\\xA6")):d.push(e),a.code?typeof a.code=="string"?d.push(a.code.replace("\xA6","\\\xA6")):d.push(a.code.value.replace("\xA6","\\\xA6")):d.push(e),a.severity!==void 0&&a.severity!==null?d.push(MarkerSeverity$1.toString(a.severity)):d.push(e),a.message&&c?d.push(a.message.replace("\xA6","\\\xA6")):d.push(e),a.startLineNumber!==void 0&&a.startLineNumber!==null?d.push(a.startLineNumber.toString()):d.push(e),a.startColumn!==void 0&&a.startColumn!==null?d.push(a.startColumn.toString()):d.push(e),a.endLineNumber!==void 0&&a.endLineNumber!==null?d.push(a.endLineNumber.toString()):d.push(e),a.endColumn!==void 0&&a.endColumn!==null?d.push(a.endColumn.toString()):d.push(e),d.push(e),d.join("\xA6")}s.makeKeyOptionalMessage=o})(IMarkerData||(IMarkerData={}));const IMarkerService=createDecorator("markerService");var __decorate$g=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$c=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};class MarkerDecorations extends Disposable{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(toDisposable(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,i){const o=[...this._markersData.keys()];this._markersData.clear();const a=this.model.deltaDecorations(o,i);for(let c=0;c<a.length;c++)this._markersData.set(a[c],e[c]);return o.length!==0||a.length!==0}getMarker(e){return this._markersData.get(e.id)}}let MarkerDecorationsService=class extends Disposable{constructor(e,i){super(),this._markerService=i,this._onDidChangeMarker=this._register(new Emitter$1),this._markerDecorations=new ResourceMap,e.getModels().forEach(o=>this._onModelAdded(o)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,i){const o=this._markerDecorations.get(e);return o&&o.getMarker(i)||null}_handleMarkerChange(e){e.forEach(i=>{const o=this._markerDecorations.get(i);o&&this._updateDecorations(o)})}_onModelAdded(e){const i=new MarkerDecorations(e);this._markerDecorations.set(e.uri,i),this._updateDecorations(i)}_onModelRemoved(e){var i;const o=this._markerDecorations.get(e.uri);o&&(o.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Schemas.inMemory||e.uri.scheme===Schemas.internal||e.uri.scheme===Schemas.vscode)&&((i=this._markerService)===null||i===void 0||i.read({resource:e.uri}).map(a=>a.owner).forEach(a=>this._markerService.remove(a,[e.uri])))}_updateDecorations(e){const i=this._markerService.read({resource:e.model.uri,take:500}),o=i.map(a=>({range:this._createDecorationRange(e.model,a),options:this._createDecorationOption(a)}));e.update(i,o)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,i){let o=Range$2.lift(i);if(i.severity===MarkerSeverity$1.Hint&&!this._hasMarkerTag(i,1)&&!this._hasMarkerTag(i,2)&&(o=o.setEndPosition(o.startLineNumber,o.startColumn+2)),o=e.validateRange(o),o.isEmpty()){const a=e.getLineLastNonWhitespaceColumn(o.startLineNumber)||e.getLineMaxColumn(o.startLineNumber);if(a===1||o.endColumn>=a)return o;const c=e.getWordAtPosition(o.getStartPosition());c&&(o=new Range$2(o.startLineNumber,c.startColumn,o.endLineNumber,c.endColumn))}else if(i.endColumn===Number.MAX_VALUE&&i.startColumn===1&&o.startLineNumber===o.endLineNumber){const a=e.getLineFirstNonWhitespaceColumn(i.startLineNumber);a<o.endColumn&&(o=new Range$2(o.startLineNumber,a,o.endLineNumber,o.endColumn),i.startColumn=a)}return o}_createDecorationOption(e){let i,o,a,c,d;switch(e.severity){case MarkerSeverity$1.Hint:this._hasMarkerTag(e,2)?i=void 0:this._hasMarkerTag(e,1)?i="squiggly-unnecessary":i="squiggly-hint",a=0;break;case MarkerSeverity$1.Warning:i="squiggly-warning",o=themeColorFromId(overviewRulerWarning),a=20,d={color:themeColorFromId(minimapWarning),position:MinimapPosition.Inline};break;case MarkerSeverity$1.Info:i="squiggly-info",o=themeColorFromId(overviewRulerInfo),a=10;break;case MarkerSeverity$1.Error:default:i="squiggly-error",o=themeColorFromId(overviewRulerError),a=30,d={color:themeColorFromId(minimapError),position:MinimapPosition.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(c="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(c="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:i,showIfCollapsed:!0,overviewRuler:{color:o,position:OverviewRulerLane.Right},minimap:d,zIndex:a,inlineClassName:c}}_hasMarkerTag(e,i){return e.tags?e.tags.indexOf(i)>=0:!1}};MarkerDecorationsService=__decorate$g([__param$c(0,IModelService),__param$c(1,IMarkerService)],MarkerDecorationsService);class SparseMultilineTokens{constructor(e,i){this._startLineNumber=e,this._tokens=i,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}static create(e,i){return new SparseMultilineTokens(e,new SparseMultilineTokensStorage(i))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new Range$2(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const i=e.startLineNumber-this._startLineNumber,o=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(i,e.startColumn-1,o,e.endColumn-1),this._updateEndLineNumber()}split(e){const i=e.startLineNumber-this._startLineNumber,o=e.endLineNumber-this._startLineNumber,[a,c,d]=this._tokens.split(i,e.startColumn-1,o,e.endColumn-1);return[new SparseMultilineTokens(this._startLineNumber,a),new SparseMultilineTokens(this._startLineNumber+d,c)]}applyEdit(e,i){const[o,a,c]=countEOL(i);this.acceptEdit(e,o,a,c,i.length>0?i.charCodeAt(0):0)}acceptEdit(e,i,o,a,c){this._acceptDeleteRange(e),this._acceptInsertText(new Position$1(e.startLineNumber,e.startColumn),i,o,a,c),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const i=e.startLineNumber-this._startLineNumber,o=e.endLineNumber-this._startLineNumber;if(o<0){const c=o-i;this._startLineNumber-=c;return}const a=this._tokens.getMaxDeltaLine();if(!(i>=a+1)){if(i<0&&o>=a+1){this._startLineNumber=0,this._tokens.clear();return}if(i<0){const c=-i;this._startLineNumber-=c,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,o,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,i,e.startColumn-1,o,e.endColumn-1)}}_acceptInsertText(e,i,o,a,c){if(i===0&&o===0)return;const d=e.lineNumber-this._startLineNumber;if(d<0){this._startLineNumber+=i;return}const _=this._tokens.getMaxDeltaLine();d>=_+1||this._tokens.acceptInsertText(d,e.column-1,i,o,a,c)}}class SparseMultilineTokensStorage{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const i=[];for(let o=0;o<this._tokenCount;o++)i.push(`(${this._getDeltaLine(o)+e},${this._getStartCharacter(o)}-${this._getEndCharacter(o)})`);return`[${i.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const i=this._getStartCharacter(0),o=this._getDeltaLine(e-1),a=this._getEndCharacter(e-1);return new Range$2(0,i+1,o,a+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let i=0,o=this._getTokenCount()-1;for(;i<o;){const a=i+Math.floor((o-i)/2),c=this._getDeltaLine(a);if(c<e)i=a+1;else if(c>e)o=a-1;else{let d=a;for(;d>i&&this._getDeltaLine(d-1)===e;)d--;let _=a;for(;_<o&&this._getDeltaLine(_+1)===e;)_++;return new SparseLineTokens(this._tokens.subarray(4*d,4*_+4))}}return this._getDeltaLine(i)===e?new SparseLineTokens(this._tokens.subarray(4*i,4*i+4)):null}clear(){this._tokenCount=0}removeTokens(e,i,o,a){const c=this._tokens,d=this._tokenCount;let _=0,b=!1,k=0;for(let j=0;j<d;j++){const _e=4*j,et=c[_e],tt=c[_e+1],it=c[_e+2],st=c[_e+3];if((et>e||et===e&&it>=i)&&(et<o||et===o&&tt<=a))b=!0;else{if(_===0&&(k=et),b){const ot=4*_;c[ot]=et-k,c[ot+1]=tt,c[ot+2]=it,c[ot+3]=st}_++}}return this._tokenCount=_,k}split(e,i,o,a){const c=this._tokens,d=this._tokenCount,_=[],b=[];let k=_,j=0,_e=0;for(let et=0;et<d;et++){const tt=4*et,it=c[tt],st=c[tt+1],ot=c[tt+2],nt=c[tt+3];if(it>e||it===e&&ot>=i){if(it<o||it===o&&st<=a)continue;k!==b&&(k=b,j=0,_e=it)}k[j++]=it-_e,k[j++]=st,k[j++]=ot,k[j++]=nt}return[new SparseMultilineTokensStorage(new Uint32Array(_)),new SparseMultilineTokensStorage(new Uint32Array(b)),_e]}acceptDeleteRange(e,i,o,a,c){const d=this._tokens,_=this._tokenCount,b=a-i;let k=0,j=!1;for(let _e=0;_e<_;_e++){const et=4*_e;let tt=d[et],it=d[et+1],st=d[et+2];const ot=d[et+3];if(tt<i||tt===i&&st<=o){k++;continue}else if(tt===i&&it<o)tt===a&&st>c?st-=c-o:st=o;else if(tt===i&&it===o)if(tt===a&&st>c)st-=c-o;else{j=!0;continue}else if(tt<a||tt===a&&it<c)if(tt===a&&st>c)tt===i?(it=o,st=it+(st-c)):(it=0,st=it+(st-c));else{j=!0;continue}else if(tt>a){if(b===0&&!j){k=_;break}tt-=b}else if(tt===a&&it>=c)e&&tt===0&&(it+=e,st+=e),tt-=b,it-=c-o,st-=c-o;else throw new Error("Not possible!");const nt=4*k;d[nt]=tt,d[nt+1]=it,d[nt+2]=st,d[nt+3]=ot,k++}this._tokenCount=k}acceptInsertText(e,i,o,a,c,d){const _=o===0&&a===1&&(d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122),b=this._tokens,k=this._tokenCount;for(let j=0;j<k;j++){const _e=4*j;let et=b[_e],tt=b[_e+1],it=b[_e+2];if(!(et<e||et===e&&it<i)){if(et===e&&it===i)if(_)it+=1;else continue;else if(et===e&&tt<i&&i<it)o===0?it+=a:it=i;else{if(et===e&&tt===i&&_)continue;if(et===e)if(et+=o,o===0)tt+=a,it+=a;else{const st=it-tt;tt=c+(tt-i),it=tt+st}else et+=o}b[_e]=et,b[_e+1]=tt,b[_e+2]=it}}}}class SparseLineTokens{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var __decorate$f=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$b=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let SemanticTokensProviderStyling=class{constructor(e,i,o,a){this._legend=e,this._themeService=i,this._languageService=o,this._logService=a,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new HashTable}getMetadata(e,i,o){const a=this._languageService.languageIdCodec.encodeLanguageId(o),c=this._hashTable.get(e,i,a);let d;if(c)d=c.metadata,this._logService.getLevel()===LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${i}: foreground ${TokenMetadata.getForeground(d)}, fontStyle ${TokenMetadata.getFontStyle(d).toString(2)}`);else{let _=this._legend.tokenTypes[e];const b=[];if(_){let k=i;for(let _e=0;k>0&&_e<this._legend.tokenModifiers.length;_e++)k&1&&b.push(this._legend.tokenModifiers[_e]),k=k>>1;k>0&&this._logService.getLevel()===LogLevel.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${i.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),b.push("not-in-legend"));const j=this._themeService.getColorTheme().getTokenStyleMetadata(_,b,o);if(typeof j>"u")d=2147483647;else{if(d=0,typeof j.italic<"u"){const _e=(j.italic?1:0)<<11;d|=_e|1}if(typeof j.bold<"u"){const _e=(j.bold?2:0)<<11;d|=_e|2}if(typeof j.underline<"u"){const _e=(j.underline?4:0)<<11;d|=_e|4}if(typeof j.strikethrough<"u"){const _e=(j.strikethrough?8:0)<<11;d|=_e|8}if(j.foreground){const _e=j.foreground<<15;d|=_e|16}d===0&&(d=2147483647)}}else this._logService.getLevel()===LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),d=2147483647,_="not-in-legend";this._hashTable.add(e,i,a,d),this._logService.getLevel()===LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${_}) / ${i} (${b.join(" ")}): foreground ${TokenMetadata.getForeground(d)}, fontStyle ${TokenMetadata.getFontStyle(d).toString(2)}`)}return d}warnOverlappingSemanticTokens(e,i){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${i}`))}warnInvalidLengthSemanticTokens(e,i){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,console.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${i}`))}warnInvalidEditStart(e,i,o,a,c){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,console.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${i}) at edit #${o}: The provided start offset ${a} is outside the previous data (length ${c}).`))}};SemanticTokensProviderStyling=__decorate$f([__param$b(1,IThemeService),__param$b(2,ILanguageService),__param$b(3,ILogService)],SemanticTokensProviderStyling);function toMultilineTokens2(s,e,i){const o=s.data,a=s.data.length/5|0,c=Math.max(Math.ceil(a/1024),400),d=[];let _=0,b=1,k=0;for(;_<a;){const j=_;let _e=Math.min(j+c,a);if(_e<a){let rt=_e;for(;rt-1>j&&o[5*rt]===0;)rt--;if(rt-1===j){let at=_e;for(;at+1<a&&o[5*at]===0;)at++;_e=at}else _e=rt}let et=new Uint32Array((_e-j)*4),tt=0,it=0,st=0,ot=0;for(;_<_e;){const rt=5*_,at=o[rt],lt=o[rt+1],gt=b+at|0,ht=at===0?k+lt|0:lt,ut=o[rt+2],ct=ht+ut|0,ft=o[rt+3],dt=o[rt+4];if(ct<=ht)e.warnInvalidLengthSemanticTokens(gt,ht+1);else if(st===gt&&ot>ht)e.warnOverlappingSemanticTokens(gt,ht+1);else{const pt=e.getMetadata(ft,dt,i);pt!==2147483647&&(it===0&&(it=gt),et[tt]=gt-it,et[tt+1]=ht,et[tt+2]=ct,et[tt+3]=pt,tt+=4,st=gt,ot=ct)}b=gt,k=ht,_++}tt!==et.length&&(et=et.subarray(0,tt));const nt=SparseMultilineTokens.create(it,et);d.push(nt)}return d}class HashTableEntry{constructor(e,i,o,a){this.tokenTypeIndex=e,this.tokenModifierSet=i,this.languageId=o,this.metadata=a,this.next=null}}class HashTable{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,i){for(let o=0;o<i;o++)e[o]=null}_hash2(e,i){return(e<<5)-e+i|0}_hashFunc(e,i,o){return this._hash2(this._hash2(e,i),o)%this._currentLength}get(e,i,o){const a=this._hashFunc(e,i,o);let c=this._elements[a];for(;c;){if(c.tokenTypeIndex===e&&c.tokenModifierSet===i&&c.languageId===o)return c;c=c.next}return null}add(e,i,o,a){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const c=this._elements;this._currentLengthIndex++,this._currentLength=HashTable._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<HashTable._SIZES.length?2/3*this._currentLength:0),this._elements=[],HashTable._nullOutEntries(this._elements,this._currentLength);for(const d of c){let _=d;for(;_;){const b=_.next;_.next=null,this._add(_),_=b}}}this._add(new HashTableEntry(e,i,o,a))}_add(e){const i=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[i],this._elements[i]=e}}HashTable._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function reverseEndianness(s){for(let e=0,i=s.length;e<i;e+=4){const o=s[e+0],a=s[e+1],c=s[e+2],d=s[e+3];s[e+0]=d,s[e+1]=c,s[e+2]=a,s[e+3]=o}}function toLittleEndianBuffer(s){const e=new Uint8Array(s.buffer,s.byteOffset,s.length*4);return isLittleEndian()||reverseEndianness(e),VSBuffer.wrap(e)}function encodeSemanticTokensDto(s){const e=new Uint32Array(encodeSemanticTokensDtoSize(s));let i=0;if(e[i++]=s.id,s.type==="full")e[i++]=1,e[i++]=s.data.length,e.set(s.data,i),i+=s.data.length;else{e[i++]=2,e[i++]=s.deltas.length;for(const o of s.deltas)e[i++]=o.start,e[i++]=o.deleteCount,o.data?(e[i++]=o.data.length,e.set(o.data,i),i+=o.data.length):e[i++]=0}return toLittleEndianBuffer(e)}function encodeSemanticTokensDtoSize(s){let e=0;if(e+=1+1,s.type==="full")e+=1+s.data.length;else{e+=1,e+=(1+1+1)*s.deltas.length;for(const i of s.deltas)i.data&&(e+=i.data.length)}return e}var __awaiter$9=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function isSemanticTokens(s){return s&&!!s.data}function isSemanticTokensEdits(s){return s&&Array.isArray(s.edits)}class DocumentSemanticTokensResult{constructor(e,i,o){this.provider=e,this.tokens=i,this.error=o}}function hasDocumentSemanticTokensProvider(s,e){return s.has(e)}function getDocumentSemanticTokensProviders(s,e){const i=s.orderedGroups(e);return i.length>0?i[0]:[]}function getDocumentSemanticTokens(s,e,i,o,a){return __awaiter$9(this,void 0,void 0,function*(){const c=getDocumentSemanticTokensProviders(s,e),d=yield Promise.all(c.map(_=>__awaiter$9(this,void 0,void 0,function*(){let b,k=null;try{b=yield _.provideDocumentSemanticTokens(e,_===i?o:null,a)}catch(j){k=j,b=null}return(!b||!isSemanticTokens(b)&&!isSemanticTokensEdits(b))&&(b=null),new DocumentSemanticTokensResult(_,b,k)})));for(const _ of d){if(_.error)throw _.error;if(_.tokens)return _}return d.length>0?d[0]:null})}function _getDocumentSemanticTokensProviderHighestGroup(s,e){const i=s.orderedGroups(e);return i.length>0?i[0]:null}class DocumentRangeSemanticTokensResult{constructor(e,i){this.provider=e,this.tokens=i}}function getDocumentRangeSemanticTokensProviders(s,e){const i=s.orderedGroups(e);return i.length>0?i[0]:[]}function getDocumentRangeSemanticTokens(s,e,i,o){return __awaiter$9(this,void 0,void 0,function*(){const a=getDocumentRangeSemanticTokensProviders(s,e),c=yield Promise.all(a.map(d=>__awaiter$9(this,void 0,void 0,function*(){let _;try{_=yield d.provideDocumentRangeSemanticTokens(e,i,o)}catch(b){onUnexpectedExternalError(b),_=null}return(!_||!isSemanticTokens(_))&&(_=null),new DocumentRangeSemanticTokensResult(d,_)})));for(const d of c)if(d.tokens)return d;return c.length>0?c[0]:null})}CommandsRegistry.registerCommand("_provideDocumentSemanticTokensLegend",(s,...e)=>__awaiter$9(void 0,void 0,void 0,function*(){const[i]=e;assertType(i instanceof URI);const o=s.get(IModelService).getModel(i);if(!o)return;const{documentSemanticTokensProvider:a}=s.get(ILanguageFeaturesService),c=_getDocumentSemanticTokensProviderHighestGroup(a,o);return c?c[0].getLegend():s.get(ICommandService).executeCommand("_provideDocumentRangeSemanticTokensLegend",i)}));CommandsRegistry.registerCommand("_provideDocumentSemanticTokens",(s,...e)=>__awaiter$9(void 0,void 0,void 0,function*(){const[i]=e;assertType(i instanceof URI);const o=s.get(IModelService).getModel(i);if(!o)return;const{documentSemanticTokensProvider:a}=s.get(ILanguageFeaturesService);if(!hasDocumentSemanticTokensProvider(a,o))return s.get(ICommandService).executeCommand("_provideDocumentRangeSemanticTokens",i,o.getFullModelRange());const c=yield getDocumentSemanticTokens(a,o,null,null,CancellationToken.None);if(!c)return;const{provider:d,tokens:_}=c;if(!_||!isSemanticTokens(_))return;const b=encodeSemanticTokensDto({id:0,type:"full",data:_.data});return _.resultId&&d.releaseDocumentSemanticTokens(_.resultId),b}));CommandsRegistry.registerCommand("_provideDocumentRangeSemanticTokensLegend",(s,...e)=>__awaiter$9(void 0,void 0,void 0,function*(){const[i,o]=e;assertType(i instanceof URI);const a=s.get(IModelService).getModel(i);if(!a)return;const{documentRangeSemanticTokensProvider:c}=s.get(ILanguageFeaturesService),d=getDocumentRangeSemanticTokensProviders(c,a);if(d.length===0)return;if(d.length===1)return d[0].getLegend();if(!o||!Range$2.isIRange(o))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),d[0].getLegend();const _=yield getDocumentRangeSemanticTokens(c,a,Range$2.lift(o),CancellationToken.None);if(!!_)return _.provider.getLegend()}));CommandsRegistry.registerCommand("_provideDocumentRangeSemanticTokens",(s,...e)=>__awaiter$9(void 0,void 0,void 0,function*(){const[i,o]=e;assertType(i instanceof URI),assertType(Range$2.isIRange(o));const a=s.get(IModelService).getModel(i);if(!a)return;const{documentRangeSemanticTokensProvider:c}=s.get(ILanguageFeaturesService),d=yield getDocumentRangeSemanticTokens(c,a,Range$2.lift(o),CancellationToken.None);if(!(!d||!d.tokens))return encodeSemanticTokensDto({id:0,type:"full",data:d.tokens.data})}));var __decorate$e=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$a=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};function MODEL_ID(s){return s.toString()}function computeModelSha1(s){const e=new StringSHA1,i=s.createSnapshot();let o;for(;o=i.read();)e.update(o);return e.digest()}class ModelData{constructor(e,i,o){this._modelEventListeners=new DisposableStore,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>i(e))),this._modelEventListeners.add(e.onDidChangeLanguage(a=>o(e,a)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const DEFAULT_EOL=isLinux||isMacintosh?1:2;class DisposedModelInfo{constructor(e,i,o,a,c,d,_,b){this.uri=e,this.initialUndoRedoSnapshot=i,this.time=o,this.sharesUndoRedoStack=a,this.heapSize=c,this.sha1=d,this.versionId=_,this.alternativeVersionId=b}}let ModelService=class vn extends Disposable{constructor(e,i,o,a,c,d,_,b,k){super(),this._configurationService=e,this._resourcePropertiesService=i,this._themeService=o,this._logService=a,this._undoRedoService=c,this._languageService=d,this._languageConfigurationService=_,this._languageFeatureDebounceService=b,this._onModelAdded=this._register(new Emitter$1),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new Emitter$1),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new Emitter$1),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new SemanticStyling(this._themeService,this._languageService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new SemanticColoringFeature(this._semanticStyling,this,this._themeService,this._configurationService,this._languageFeatureDebounceService,k))}static _readModelOptions(e,i){var o;let a=EDITOR_MODEL_DEFAULTS.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const tt=parseInt(e.editor.tabSize,10);isNaN(tt)||(a=tt),a<1&&(a=1)}let c=a;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const tt=parseInt(e.editor.indentSize,10);isNaN(tt)||(c=tt),c<1&&(c=1)}let d=EDITOR_MODEL_DEFAULTS.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(d=e.editor.insertSpaces==="false"?!1:Boolean(e.editor.insertSpaces));let _=DEFAULT_EOL;const b=e.eol;b===`\r
`?_=2:b===`
`&&(_=1);let k=EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(k=e.editor.trimAutoWhitespace==="false"?!1:Boolean(e.editor.trimAutoWhitespace));let j=EDITOR_MODEL_DEFAULTS.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(j=e.editor.detectIndentation==="false"?!1:Boolean(e.editor.detectIndentation));let _e=EDITOR_MODEL_DEFAULTS.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(_e=e.editor.largeFileOptimizations==="false"?!1:Boolean(e.editor.largeFileOptimizations));let et=EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions;return((o=e.editor)===null||o===void 0?void 0:o.bracketPairColorization)&&typeof e.editor.bracketPairColorization=="object"&&(et={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:i,tabSize:a,indentSize:c,insertSpaces:d,detectIndentation:j,defaultEOL:_,trimAutoWhitespace:k,largeFileOptimizations:_e,bracketPairColorizationOptions:et}}_getEOL(e,i){if(e)return this._resourcePropertiesService.getEOL(e,i);const o=this._configurationService.getValue("files.eol",{overrideIdentifier:i});return o&&typeof o=="string"&&o!=="auto"?o:OS===3||OS===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,i,o){let a=this._modelCreationOptionsByLanguageAndResource[e+i];if(!a){const c=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:i}),d=this._getEOL(i,e);a=vn._readModelOptions({editor:c,eol:d},o),this._modelCreationOptionsByLanguageAndResource[e+i]=a}return a}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let o=0,a=i.length;o<a;o++){const c=i[o],d=this._models[c],_=d.model.getLanguageId(),b=d.model.uri,k=e[_+b],j=this.getCreationOptions(_,b,d.model.isForSimpleWidget);vn._setModelOptionsForModel(d.model,j,k)}}static _setModelOptionsForModel(e,i,o){o&&o.defaultEOL!==i.defaultEOL&&e.getLineCount()===1&&e.setEOL(i.defaultEOL===1?0:1),!(o&&o.detectIndentation===i.detectIndentation&&o.insertSpaces===i.insertSpaces&&o.tabSize===i.tabSize&&o.indentSize===i.indentSize&&o.trimAutoWhitespace===i.trimAutoWhitespace&&equals(o.bracketPairColorizationOptions,i.bracketPairColorizationOptions))&&(i.detectIndentation?(e.detectIndentation(i.insertSpaces,i.tabSize),e.updateOptions({trimAutoWhitespace:i.trimAutoWhitespace,bracketColorizationOptions:i.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.indentSize,trimAutoWhitespace:i.trimAutoWhitespace,bracketColorizationOptions:i.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(MODEL_ID(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const i=this._disposedModels.get(MODEL_ID(e));return i&&(this._disposedModelsHeapSize-=i.heapSize),this._disposedModels.delete(MODEL_ID(e)),i}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const i=[];for(this._disposedModels.forEach(o=>{o.sharesUndoRedoStack||i.push(o)}),i.sort((o,a)=>o.time-a.time);i.length>0&&this._disposedModelsHeapSize>e;){const o=i.shift();this._removeDisposedModel(o.uri),o.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(o.initialUndoRedoSnapshot)}}}_createModelData(e,i,o,a){const c=this.getCreationOptions(i,o,a),d=new TextModel(e,i,c,o,this._undoRedoService,this._languageService,this._languageConfigurationService);if(o&&this._disposedModels.has(MODEL_ID(o))){const k=this._removeDisposedModel(o),j=this._undoRedoService.getElements(o),_e=computeModelSha1(d)===k.sha1;if(_e||k.sharesUndoRedoStack){for(const et of j.past)isEditStackElement(et)&&et.matchesResource(o)&&et.setModel(d);for(const et of j.future)isEditStackElement(et)&&et.matchesResource(o)&&et.setModel(d);this._undoRedoService.setElementsValidFlag(o,!0,et=>isEditStackElement(et)&&et.matchesResource(o)),_e&&(d._overwriteVersionId(k.versionId),d._overwriteAlternativeVersionId(k.alternativeVersionId),d._overwriteInitialUndoRedoSnapshot(k.initialUndoRedoSnapshot))}else k.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(k.initialUndoRedoSnapshot)}const _=MODEL_ID(d.uri);if(this._models[_])throw new Error("ModelService: Cannot add model because it already exists!");const b=new ModelData(d,k=>this._onWillDispose(k),(k,j)=>this._onDidChangeLanguage(k,j));return this._models[_]=b,b}createModel(e,i,o,a=!1){let c;return i?(c=this._createModelData(e,i.languageId,o,a),this.setMode(c.model,i)):c=this._createModelData(e,PLAINTEXT_LANGUAGE_ID,o,a),this._onModelAdded.fire(c.model),c.model}setMode(e,i){if(!i)return;const o=this._models[MODEL_ID(e.uri)];!o||o.setLanguage(i)}getModels(){const e=[],i=Object.keys(this._models);for(let o=0,a=i.length;o<a;o++){const c=i[o];e.push(this._models[c].model)}return e}getModel(e){const i=MODEL_ID(e),o=this._models[i];return o?o.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Schemas.file||e.scheme===Schemas.vscodeRemote||e.scheme===Schemas.vscodeUserData||e.scheme===Schemas.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const i=MODEL_ID(e.uri),o=this._models[i],a=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let c=!1,d=0;if(a||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const b=this._undoRedoService.getElements(e.uri);if(b.past.length>0||b.future.length>0){for(const k of b.past)isEditStackElement(k)&&k.matchesResource(e.uri)&&(c=!0,d+=k.heapSize(e.uri),k.setModel(e.uri));for(const k of b.future)isEditStackElement(k)&&k.matchesResource(e.uri)&&(c=!0,d+=k.heapSize(e.uri),k.setModel(e.uri))}}const _=vn.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(c)if(!a&&d>_){const b=o.model.getInitialUndoRedoSnapshot();b!==null&&this._undoRedoService.restoreSnapshot(b)}else this._ensureDisposedModelsHeapSize(_-d),this._undoRedoService.setElementsValidFlag(e.uri,!1,b=>isEditStackElement(b)&&b.matchesResource(e.uri)),this._insertDisposedModel(new DisposedModelInfo(e.uri,o.model.getInitialUndoRedoSnapshot(),Date.now(),a,d,computeModelSha1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!a){const b=o.model.getInitialUndoRedoSnapshot();b!==null&&this._undoRedoService.restoreSnapshot(b)}delete this._models[i],o.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,i){const o=i.oldLanguage,a=e.getLanguageId(),c=this.getCreationOptions(o,e.uri,e.isForSimpleWidget),d=this.getCreationOptions(a,e.uri,e.isForSimpleWidget);vn._setModelOptionsForModel(e,d,c),this._onModelModeChanged.fire({model:e,oldLanguageId:o})}};ModelService.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;ModelService=__decorate$e([__param$a(0,IConfigurationService),__param$a(1,ITextResourcePropertiesService),__param$a(2,IThemeService),__param$a(3,ILogService),__param$a(4,IUndoRedoService),__param$a(5,ILanguageService),__param$a(6,ILanguageConfigurationService),__param$a(7,ILanguageFeatureDebounceService),__param$a(8,ILanguageFeaturesService)],ModelService);const SEMANTIC_HIGHLIGHTING_SETTING_ID="editor.semanticHighlighting";function isSemanticColoringEnabled(s,e,i){var o;const a=(o=i.getValue(SEMANTIC_HIGHLIGHTING_SETTING_ID,{overrideIdentifier:s.getLanguageId(),resource:s.uri}))===null||o===void 0?void 0:o.enabled;return typeof a=="boolean"?a:e.getColorTheme().semanticHighlighting}let SemanticColoringFeature=class extends Disposable{constructor(e,i,o,a,c,d){super(),this._watchers=Object.create(null),this._semanticStyling=e;const _=j=>{this._watchers[j.uri.toString()]=new ModelSemanticColoring(j,this._semanticStyling,o,c,d)},b=(j,_e)=>{_e.dispose(),delete this._watchers[j.uri.toString()]},k=()=>{for(const j of i.getModels()){const _e=this._watchers[j.uri.toString()];isSemanticColoringEnabled(j,o,a)?_e||_(j):_e&&b(j,_e)}};this._register(i.onModelAdded(j=>{isSemanticColoringEnabled(j,o,a)&&_(j)})),this._register(i.onModelRemoved(j=>{const _e=this._watchers[j.uri.toString()];_e&&b(j,_e)})),this._register(a.onDidChangeConfiguration(j=>{j.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)&&k()})),this._register(o.onDidColorThemeChange(k))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};SemanticColoringFeature=__decorate$e([__param$a(1,IModelService),__param$a(2,IThemeService),__param$a(3,IConfigurationService),__param$a(4,ILanguageFeatureDebounceService),__param$a(5,ILanguageFeaturesService)],SemanticColoringFeature);class SemanticStyling extends Disposable{constructor(e,i,o){super(),this._themeService=e,this._languageService=i,this._logService=o,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new SemanticTokensProviderStyling(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}}class SemanticTokensResponse{constructor(e,i,o){this.provider=e,this.resultId=i,this.data=o}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}let ModelSemanticColoring=class nn extends Disposable{constructor(e,i,o,a,c){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=i,this._provider=c.documentSemanticTokensProvider,this._debounceInformation=a.for(this._provider,"DocumentSemanticTokens",{min:nn.REQUEST_MIN_DELAY,max:nn.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new RunOnceScheduler(()=>this._fetchDocumentSemanticTokensNow(),nn.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const d=()=>{dispose(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const _ of this._provider.all(e))typeof _.onDidChange=="function"&&this._documentProvidersChangeListeners.push(_.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};d(),this._register(this._provider.onDidChange(()=>{d(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(o.onDidColorThemeChange(_=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!hasDocumentSemanticTokensProvider(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}const e=new CancellationTokenSource$1,i=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,o=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,a=getDocumentSemanticTokens(this._provider,this._model,i,o,e.token);this._currentDocumentRequestCancellationTokenSource=e;const c=[],d=this._model.onDidChangeContent(b=>{c.push(b)}),_=new StopWatch(!1);a.then(b=>{if(this._debounceInformation.update(this._model,_.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,d.dispose(),!b)this._setDocumentSemanticTokens(null,null,null,c);else{const{provider:k,tokens:j}=b,_e=this._semanticStyling.get(k);this._setDocumentSemanticTokens(k,j||null,_e,c)}},b=>{b&&(isCancellationError(b)||typeof b.message=="string"&&b.message.indexOf("busy")!==-1)||onUnexpectedError(b),this._currentDocumentRequestCancellationTokenSource=null,d.dispose(),c.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,i,o,a,c){c=Math.min(c,o.length-a,e.length-i);for(let d=0;d<c;d++)o[a+d]=e[i+d]}_setDocumentSemanticTokens(e,i,o,a){const c=this._currentDocumentResponse,d=()=>{a.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&i&&e.releaseDocumentSemanticTokens(i.resultId);return}if(!e||!o){this._model.tokenization.setSemanticTokens(null,!1);return}if(!i){this._model.tokenization.setSemanticTokens(null,!0),d();return}if(isSemanticTokensEdits(i)){if(!c){this._model.tokenization.setSemanticTokens(null,!0);return}if(i.edits.length===0)i={resultId:i.resultId,data:c.data};else{let _=0;for(const et of i.edits)_+=(et.data?et.data.length:0)-et.deleteCount;const b=c.data,k=new Uint32Array(b.length+_);let j=b.length,_e=k.length;for(let et=i.edits.length-1;et>=0;et--){const tt=i.edits[et];if(tt.start>b.length){o.warnInvalidEditStart(c.resultId,i.resultId,et,tt.start,b.length),this._model.tokenization.setSemanticTokens(null,!0);return}const it=j-(tt.start+tt.deleteCount);it>0&&(nn._copy(b,j-it,k,_e-it,it),_e-=it),tt.data&&(nn._copy(tt.data,0,k,_e-tt.data.length,tt.data.length),_e-=tt.data.length),j=tt.start}j>0&&nn._copy(b,0,k,0,j),i={resultId:i.resultId,data:k}}}if(isSemanticTokens(i)){this._currentDocumentResponse=new SemanticTokensResponse(e,i.resultId,i.data);const _=toMultilineTokens2(i,o,this._model.getLanguageId());if(a.length>0)for(const b of a)for(const k of _)for(const j of b.changes)k.applyEdit(j.range,j.text);this._model.tokenization.setSemanticTokens(_,!0)}else this._model.tokenization.setSemanticTokens(null,!0);d()}};ModelSemanticColoring.REQUEST_MIN_DELAY=300;ModelSemanticColoring.REQUEST_MAX_DELAY=2e3;ModelSemanticColoring=__decorate$e([__param$a(2,IThemeService),__param$a(3,ILanguageFeatureDebounceService),__param$a(4,ILanguageFeaturesService)],ModelSemanticColoring);const standaloneQuickInput="",labelWithIconsRegex=new RegExp(`(\\\\)?\\$\\((${CSSIcon.iconNameExpression}(?:${CSSIcon.iconModifierExpression})?)\\)`,"g");function renderLabelWithIcons(s){const e=new Array;let i,o=0,a=0;for(;(i=labelWithIconsRegex.exec(s))!==null;){a=i.index||0,e.push(s.substring(o,a)),o=(i.index||0)+i[0].length;const[,c,d]=i;e.push(c?`$(${d})`:renderIcon({id:d}))}return o<s.length&&e.push(s.substring(o)),e}function renderIcon(s){const e=$$5("span");return e.classList.add(...CSSIcon.asClassNameArray(s)),e}const button="",defaultOptions={buttonBackground:Color.fromHex("#0E639C"),buttonHoverBackground:Color.fromHex("#006BB3"),buttonSeparator:Color.white,buttonForeground:Color.white};class Button extends Disposable{constructor(e,i){super(),this._onDidClick=this._register(new Emitter$1),this.options=i||Object.create(null),mixin(this.options,defaultOptions,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Gesture.addTarget(this._element)),[EventType$1.CLICK,EventType.Tap].forEach(o=>{this._register(addDisposableListener(this._element,o,a=>{if(!this.enabled){EventHelper.stop(a);return}this._onDidClick.fire(a)}))}),this._register(addDisposableListener(this._element,EventType$1.KEY_DOWN,o=>{const a=new StandardKeyboardEvent(o);let c=!1;this.enabled&&(a.equals(3)||a.equals(10))?(this._onDidClick.fire(o),c=!0):a.equals(9)&&(this._element.blur(),c=!0),c&&EventHelper.stop(a,!0)})),this._register(addDisposableListener(this._element,EventType$1.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(addDisposableListener(this._element,EventType$1.MOUSE_OUT,o=>{this.applyStyles()})),this.focusTracker=this._register(trackFocus(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.setHoverBackground()})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.applyStyles()})),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,i;this.options.secondary?(i=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(i=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const o=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=i,this._element.style.backgroundColor=e,this._element.style.borderWidth=o?"1px":"",this._element.style.borderStyle=o?"solid":"",this._element.style.borderColor=o}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?reset(this._element,...renderLabelWithIcons(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const countBadge="",defaultOpts$2={badgeBackground:Color.fromHex("#4D4D4D"),badgeForeground:Color.fromHex("#FFFFFF")};class CountBadge{constructor(e,i){this.count=0,this.options=i||Object.create(null),mixin(this.options,defaultOpts$2,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=append$1(e,$$5(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=format(this.countFormat,this.count),this.element.title=format(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",i=this.badgeForeground?this.badgeForeground.toString():"",o=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=i,this.element.style.borderWidth=o?"1px":"",this.element.style.borderStyle=o?"solid":"",this.element.style.borderColor=o}}}const progressbar="",CSS_DONE="done",CSS_ACTIVE="active",CSS_INFINITE="infinite",CSS_INFINITE_LONG_RUNNING="infinite-long-running",CSS_DISCRETE="discrete",defaultOpts$1={progressBarBackground:Color.fromHex("#0E70C0")};class ProgressBar extends Disposable{constructor(e,i){super(),this.options=i||Object.create(null),mixin(this.options,defaultOpts$1,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this.showDelayedScheduler=this._register(new RunOnceScheduler(()=>show(this.element),0)),this.longRunningScheduler=this._register(new RunOnceScheduler(()=>this.infiniteLongRunning(),ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(CSS_ACTIVE,CSS_INFINITE,CSS_INFINITE_LONG_RUNNING,CSS_DISCRETE),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(CSS_DONE),this.element.classList.contains(CSS_INFINITE)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(CSS_DISCRETE,CSS_DONE,CSS_INFINITE_LONG_RUNNING),this.element.classList.add(CSS_ACTIVE,CSS_INFINITE),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(CSS_INFINITE_LONG_RUNNING)}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD=1e4;class IdGenerator{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}new IdGenerator("id#");const quickInput="",iconPathToClass={},iconClassGenerator=new IdGenerator("quick-input-button-icon-");function getIconClass(s){if(!s)return;let e;const i=s.dark.toString();return iconPathToClass[i]?e=iconPathToClass[i]:(e=iconClassGenerator.nextId(),createCSSRule(`.${e}, .hc-light .${e}`,`background-image: ${asCSSUrl(s.light||s.dark)}`),createCSSRule(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${asCSSUrl(s.dark)}`),iconPathToClass[i]=e),e}const NO_KEY_MODS={ctrlCmd:!1,alt:!1};var QuickInputHideReason;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})(QuickInputHideReason||(QuickInputHideReason={}));var ItemActivation;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(ItemActivation||(ItemActivation={}));function renderText(s,e={}){const i=createElement(e);return i.textContent=s,i}function renderFormattedText(s,e={}){const i=createElement(e);return _renderFormattedText(i,parseFormattedText(s,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),i}function createElement(s){const e=s.inline?"span":"div",i=document.createElement(e);return s.className&&(i.className=s.className),i}class StringStream{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function _renderFormattedText(s,e,i,o){let a;if(e.type===2)a=document.createTextNode(e.content||"");else if(e.type===3)a=document.createElement("b");else if(e.type===4)a=document.createElement("i");else if(e.type===7&&o)a=document.createElement("code");else if(e.type===5&&i){const c=document.createElement("a");i.disposables.add(addStandardDisposableListener(c,"click",d=>{i.callback(String(e.index),d)})),a=c}else e.type===8?a=document.createElement("br"):e.type===1&&(a=s);a&&s!==a&&s.appendChild(a),a&&Array.isArray(e.children)&&e.children.forEach(c=>{_renderFormattedText(a,c,i,o)})}function parseFormattedText(s,e){const i={type:1,children:[]};let o=0,a=i;const c=[],d=new StringStream(s);for(;!d.eos();){let _=d.next();const b=_==="\\"&&formatTagType(d.peek(),e)!==0;if(b&&(_=d.next()),!b&&isFormatTag(_,e)&&_===d.peek()){d.advance(),a.type===2&&(a=c.pop());const k=formatTagType(_,e);if(a.type===k||a.type===5&&k===6)a=c.pop();else{const j={type:k,children:[]};k===5&&(j.index=o,o++),a.children.push(j),c.push(a),a=j}}else if(_===`
`)a.type===2&&(a=c.pop()),a.children.push({type:8});else if(a.type!==2){const k={type:2,content:_};a.children.push(k),c.push(a),a=k}else a.content+=_}return a.type===2&&(a=c.pop()),i}function isFormatTag(s,e){return formatTagType(s,e)!==0}function formatTagType(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const inputBox="",$$4=$$5,defaultOpts={inputBackground:Color.fromHex("#3C3C3C"),inputForeground:Color.fromHex("#CCCCCC"),inputValidationInfoBorder:Color.fromHex("#55AAFF"),inputValidationInfoBackground:Color.fromHex("#063B49"),inputValidationWarningBorder:Color.fromHex("#B89500"),inputValidationWarningBackground:Color.fromHex("#352A05"),inputValidationErrorBorder:Color.fromHex("#BE1100"),inputValidationErrorBackground:Color.fromHex("#5A1D1D")};class InputBox extends Widget{constructor(e,i,o){var a;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new Emitter$1),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new Emitter$1),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=i,this.options=o||Object.create(null),mixin(this.options,defaultOpts,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(a=this.options.tooltip)!==null&&a!==void 0?a:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=append$1(e,$$4(".monaco-inputbox.idle"));const c=this.options.flexibleHeight?"textarea":"input",d=append$1(this.element,$$4(".ibwrapper"));if(this.input=append$1(d,$$4(c+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=append$1(d,$$4("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new ScrollableElement(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),append$1(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(k=>this.input.scrollTop=k.scrollTop));const _=this._register(new DomEmitter(document,"selectionchange")),b=Event.filter(_.event,()=>{const k=document.getSelection();return(k==null?void 0:k.anchorNode)===d});this._register(b(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ActionBar(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:getTotalHeight(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return getTotalWidth(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let i=0;if(this.mirror){const o=parseFloat(this.mirror.style.paddingLeft||"")||0,a=parseFloat(this.mirror.style.paddingRight||"")||0;i=o+a}this.input.style.width=e-i+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,i=this.cachedHeight,o=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:i}),this.scrollableElement.setScrollPosition({scrollTop:o})}showMessage(e,i){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const o=this.stylesForType(this.message.type);this.element.style.border=o.border?`1px solid ${o.border}`:"",(this.hasFocus()||i)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const i=()=>e.style.width=getTotalWidth(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:a=>{if(!this.message)return null;e=append$1(a,$$4(".monaco-inputbox-container")),i();const c={inline:!0,className:"monaco-inputbox-message"},d=this.message.formatContent?renderFormattedText(this.message.content,c):renderText(this.message.content,c);d.classList.add(this.classForType(this.message.type));const _=this.stylesForType(this.message.type);return d.style.backgroundColor=_.background?_.background.toString():"",d.style.color=_.foreground?_.foreground.toString():"",d.style.border=_.border?`1px solid ${_.border}`:"",append$1(e,d),null},onHide:()=>{this.state="closed"},layout:i});let o;this.message.type===3?o=localize("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?o=localize("alertWarningMessage","Warning: {0}",this.message.content):o=localize("alertInfoMessage","Info: {0}",this.message.content),alert(o),this.state="open"}_hideMessage(){!this.contextViewProvider||(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,o=e.charCodeAt(e.length-1)===10?" ":"";(e+o).replace(/\u000c/g,"")?this.mirror.textContent=e+o:this.mirror.innerText="\xA0",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",i=this.inputForeground?this.inputForeground.toString():"",o=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.borderWidth=o?"1px":"",this.element.style.borderStyle=o?"solid":"",this.element.style.borderColor=o}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=getTotalHeight(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const i=this.inputElement,o=i.selectionStart,a=i.selectionEnd,c=i.value;o!==null&&a!==null&&(this.value=c.substr(0,o)+e+c.substr(a),i.setSelectionRange(o+1,o+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}const $$3=$$5;class QuickInputBox extends Disposable{constructor(e){super(),this.parent=e,this.onKeyDown=i=>addDisposableListener(this.inputBox.inputElement,EventType$1.KEY_DOWN,o=>{i(new StandardKeyboardEvent(o))}),this.onMouseDown=i=>addDisposableListener(this.inputBox.inputElement,EventType$1.MOUSE_DOWN,o=>{i(new StandardMouseEvent(o))}),this.onDidChange=i=>this.inputBox.onDidChange(i),this.container=append$1(this.parent,$$3(".quick-input-box")),this.inputBox=this._register(new InputBox(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,i){this.inputBox.inputElement.setAttribute(e,i)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Severity$1.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Severity$1.Info?1:e===Severity$1.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Severity$1.Info?1:e===Severity$1.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}const iconlabel="";class HighlightedLabel{constructor(e,i){var o;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(o=i==null?void 0:i.supportIcons)!==null&&o!==void 0?o:!1,this.domNode=append$1(e,$$5("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,i=[],o="",a){e||(e=""),a&&(e=HighlightedLabel.escapeNewLines(e,i)),!(this.didEverRender&&this.text===e&&this.title===o&&equals(this.highlights,i))&&(this.text=e,this.title=o,this.highlights=i,this.render())}render(){const e=[];let i=0;for(const o of this.highlights){if(o.end===o.start)continue;if(i<o.start){const d=this.text.substring(i,o.start);e.push($$5("span",void 0,...this.supportIcons?renderLabelWithIcons(d):[d])),i=o.end}const a=this.text.substring(o.start,o.end),c=$$5("span.highlight",void 0,...this.supportIcons?renderLabelWithIcons(a):[a]);o.extraClasses&&c.classList.add(...o.extraClasses),e.push(c),i=o.end}if(i<this.text.length){const o=this.text.substring(i);e.push($$5("span",void 0,...this.supportIcons?renderLabelWithIcons(o):[o]))}reset(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,i){let o=0,a=0;return e.replace(/\r\n|\r|\n/g,(c,d)=>{a=c===`\r
`?-1:0,d+=o;for(const _ of i)_.end<=d||(_.start>=d&&(_.start+=a),_.end>=d&&(_.end+=a));return o+=a,"\u23CE"})}}class FastLabelNode{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class IconLabel extends Disposable{constructor(e,i){super(),this.customHovers=new Map,this.domNode=this._register(new FastLabelNode(append$1(e,$$5(".monaco-icon-label")))),this.labelContainer=append$1(this.domNode.element,$$5(".monaco-icon-label-container"));const o=append$1(this.labelContainer,$$5("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new FastLabelNode(append$1(this.labelContainer,$$5("span.monaco-icon-description-container")))),(i==null?void 0:i.supportHighlights)||(i==null?void 0:i.supportIcons)?this.nameNode=new LabelWithHighlights(o,!!i.supportIcons):this.nameNode=new Label(o),i!=null&&i.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new HighlightedLabel(append$1(this.descriptionContainer.element,$$5("span.label-description")),{supportIcons:!!i.supportIcons}):this.descriptionNodeFactory=()=>this._register(new FastLabelNode(append$1(this.descriptionContainer.element,$$5("span.label-description")))),this.hoverDelegate=i==null?void 0:i.hoverDelegate}get element(){return this.domNode.element}setLabel(e,i,o){const a=["monaco-icon-label"];o&&(o.extraClasses&&a.push(...o.extraClasses),o.italic&&a.push("italic"),o.strikethrough&&a.push("strikethrough")),this.domNode.className=a.join(" "),this.setupHover(o!=null&&o.descriptionTitle?this.labelContainer:this.element,o==null?void 0:o.title),this.nameNode.setLabel(e,o),(i||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof HighlightedLabel?(this.descriptionNode.set(i||"",o?o.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,o==null?void 0:o.descriptionTitle)):(this.descriptionNode.textContent=i||"",this.setupHover(this.descriptionNode.element,(o==null?void 0:o.descriptionTitle)||""),this.descriptionNode.empty=!i))}setupHover(e,i){const o=this.customHovers.get(e);if(o&&(o.dispose(),this.customHovers.delete(e)),!i){e.removeAttribute("title");return}if(!this.hoverDelegate)setupNativeHover(e,i);else{const a=setupCustomHover(this.hoverDelegate,e,i);a&&this.customHovers.set(e,a)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class Label{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,i){if(!(this.label===e&&equals(this.options,i)))if(this.label=e,this.options=i,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=append$1(this.container,$$5("a.label-name",{id:i==null?void 0:i.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let o=0;o<e.length;o++){const a=e[o],c=(i==null?void 0:i.domId)&&`${i==null?void 0:i.domId}_${o}`;append$1(this.container,$$5("a.label-name",{id:c,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"},a)),o<e.length-1&&append$1(this.container,$$5("span.label-separator",void 0,(i==null?void 0:i.separator)||"/"))}}}}function splitMatches(s,e,i){if(!i)return;let o=0;return s.map(a=>{const c={start:o,end:o+a.length},d=i.map(_=>Range$1.intersect(c,_)).filter(_=>!Range$1.isEmpty(_)).map(({start:_,end:b})=>({start:_-o,end:b-o}));return o=c.end+e.length,d})}class LabelWithHighlights{constructor(e,i){this.container=e,this.supportIcons=i,this.label=void 0,this.singleLabel=void 0}setLabel(e,i){if(!(this.label===e&&equals(this.options,i)))if(this.label=e,this.options=i,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new HighlightedLabel(append$1(this.container,$$5("a.label-name",{id:i==null?void 0:i.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,i==null?void 0:i.matches,void 0,i==null?void 0:i.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const o=(i==null?void 0:i.separator)||"/",a=splitMatches(e,o,i==null?void 0:i.matches);for(let c=0;c<e.length;c++){const d=e[c],_=a?a[c]:void 0,b=(i==null?void 0:i.domId)&&`${i==null?void 0:i.domId}_${c}`,k=$$5("a.label-name",{id:b,"data-icon-label-count":e.length,"data-icon-label-index":c,role:"treeitem"});new HighlightedLabel(append$1(this.container,k),{supportIcons:this.supportIcons}).set(d,_,void 0,i==null?void 0:i.labelEscapeNewLines),c<e.length-1&&append$1(k,$$5("span.label-separator",void 0,o))}}}}const keybindingLabel="",$$2=$$5;class KeybindingLabel{constructor(e,i,o){this.os=i,this.keyElements=new Set,this.options=o||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=append$1(e,$$2(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,i){this.didEverRender&&this.keybinding===e&&KeybindingLabel.areSame(this.matches,i)||(this.keybinding=e,this.matches=i,this.render())}render(){if(this.clear(),this.keybinding){const[e,i]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),i&&(append$1(this.domNode,$$2("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,i,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){clearNode(this.domNode),this.keyElements.clear()}renderPart(e,i,o){const a=UILabelProvider.modifierLabels[this.os];i.ctrlKey&&this.renderKey(e,a.ctrlKey,Boolean(o==null?void 0:o.ctrlKey),a.separator),i.shiftKey&&this.renderKey(e,a.shiftKey,Boolean(o==null?void 0:o.shiftKey),a.separator),i.altKey&&this.renderKey(e,a.altKey,Boolean(o==null?void 0:o.altKey),a.separator),i.metaKey&&this.renderKey(e,a.metaKey,Boolean(o==null?void 0:o.metaKey),a.separator);const c=i.keyLabel;c&&this.renderKey(e,c,Boolean(o==null?void 0:o.keyCode),"")}renderKey(e,i,o,a){append$1(e,this.createKeyElement(i,o?".highlight":"")),a&&append$1(e,$$2("span.monaco-keybinding-key-separator",void 0,a))}renderUnbound(e){append$1(e,this.createKeyElement(localize("unbound","Unbound")))}createKeyElement(e,i=""){const o=$$2("span.monaco-keybinding-key"+i,void 0,e);return this.keyElements.add(o),o}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const i of this.keyElements)this.labelBackground&&(i.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(i.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(i.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,i){return e===i||!e&&!i?!0:!!e&&!!i&&equals(e.firstPart,i.firstPart)&&equals(e.chordPart,i.chordPart)}}const intlFileNameCollatorBaseNumeric=new IdleValue(()=>{const s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});new IdleValue(()=>({collator:new Intl.Collator(void 0,{numeric:!0})}));new IdleValue(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function compareFileNames(s,e,i=!1){const o=s||"",a=e||"",c=intlFileNameCollatorBaseNumeric.value.collator.compare(o,a);return intlFileNameCollatorBaseNumeric.value.collatorIsNumeric&&c===0&&o!==a?o<a?-1:1:c}function compareAnything(s,e,i){const o=s.toLowerCase(),a=e.toLowerCase(),c=compareByPrefix(s,e,i);if(c)return c;const d=o.endsWith(i),_=a.endsWith(i);if(d!==_)return d?-1:1;const b=compareFileNames(o,a);return b!==0?b:o.localeCompare(a)}function compareByPrefix(s,e,i){const o=s.toLowerCase(),a=e.toLowerCase(),c=o.startsWith(i),d=a.startsWith(i);if(c!==d)return c?-1:1;if(c&&d){if(o.length<a.length)return-1;if(o.length>a.length)return 1}return 0}var __decorate$d=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__awaiter$8=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};const $$1=$$5;class ListElement{constructor(e){this.hidden=!1,this._onChecked=new Emitter$1,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class ListElementRenderer{get templateId(){return ListElementRenderer.ID}renderTemplate(e){const i=Object.create(null);i.toDisposeElement=[],i.toDisposeTemplate=[],i.entry=append$1(e,$$1(".quick-input-list-entry"));const o=append$1(i.entry,$$1("label.quick-input-list-label"));i.toDisposeTemplate.push(addStandardDisposableListener(o,EventType$1.CLICK,k=>{i.checkbox.offsetParent||k.preventDefault()})),i.checkbox=append$1(o,$$1("input.quick-input-list-checkbox")),i.checkbox.type="checkbox",i.toDisposeTemplate.push(addStandardDisposableListener(i.checkbox,EventType$1.CHANGE,k=>{i.element.checked=i.checkbox.checked}));const a=append$1(o,$$1(".quick-input-list-rows")),c=append$1(a,$$1(".quick-input-list-row")),d=append$1(a,$$1(".quick-input-list-row"));i.label=new IconLabel(c,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const _=append$1(c,$$1(".quick-input-list-entry-keybinding"));i.keybinding=new KeybindingLabel(_,OS);const b=append$1(d,$$1(".quick-input-list-label-meta"));return i.detail=new IconLabel(b,{supportHighlights:!0,supportIcons:!0}),i.separator=append$1(i.entry,$$1(".quick-input-list-separator")),i.actionBar=new ActionBar(i.entry),i.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),i.toDisposeTemplate.push(i.actionBar),i}renderElement(e,i,o){o.toDisposeElement=dispose(o.toDisposeElement),o.element=e,o.checkbox.checked=e.checked,o.toDisposeElement.push(e.onChecked(k=>o.checkbox.checked=k));const{labelHighlights:a,descriptionHighlights:c,detailHighlights:d}=e,_=Object.create(null);_.matches=a||[],_.descriptionTitle=e.saneDescription,_.descriptionMatches=c||[],_.extraClasses=e.item.iconClasses,_.italic=e.item.italic,_.strikethrough=e.item.strikethrough,o.label.setLabel(e.saneLabel,e.saneDescription,_),o.keybinding.set(e.item.keybinding),e.saneDetail&&o.detail.setLabel(e.saneDetail,void 0,{matches:d,title:e.saneDetail}),e.separator&&e.separator.label?(o.separator.textContent=e.separator.label,o.separator.style.display=""):o.separator.style.display="none",o.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),o.actionBar.clear();const b=e.item.buttons;b&&b.length?(o.actionBar.push(b.map((k,j)=>{let _e=k.iconClass||(k.iconPath?getIconClass(k.iconPath):void 0);k.alwaysVisible&&(_e=_e?`${_e} always-visible`:"always-visible");const et=new Action(`id-${j}`,"",_e,!0,()=>__awaiter$8(this,void 0,void 0,function*(){e.fireButtonTriggered({button:k,item:e.item})}));return et.tooltip=k.tooltip||"",et}),{icon:!0,label:!1}),o.entry.classList.add("has-actions")):o.entry.classList.remove("has-actions")}disposeElement(e,i,o){o.toDisposeElement=dispose(o.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=dispose(e.toDisposeElement),e.toDisposeTemplate=dispose(e.toDisposeTemplate)}}ListElementRenderer.ID="listelement";class ListElementDelegate{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return ListElementRenderer.ID}}var QuickInputListFocus;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage"})(QuickInputListFocus||(QuickInputListFocus={}));class QuickInputList{constructor(e,i,o){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new Emitter$1,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new Emitter$1,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new Emitter$1,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new Emitter$1,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new Emitter$1,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new Emitter$1,this.onKeyDown=this._onKeyDown.event,this._onLeave=new Emitter$1,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=i,this.container=append$1(this.parent,$$1(".quick-input-list"));const a=new ListElementDelegate,c=new QuickInputAccessibilityProvider;this.list=o.createList("QuickInput",this.container,a,[new ListElementRenderer],{identityProvider:{getId:d=>d.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:c}),this.list.getHTMLElement().id=i,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(d=>{const _=new StandardKeyboardEvent(d);switch(_.keyCode){case 10:this.toggleCheckbox();break;case 31:(isMacintosh?d.metaKey:d.ctrlKey)&&this.list.setFocus(range(this.list.length));break;case 16:{const b=this.list.getFocus();b.length===1&&b[0]===0&&this._onLeave.fire();break}case 18:{const b=this.list.getFocus();b.length===1&&b[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(_)})),this.disposables.push(this.list.onMouseDown(d=>{d.browserEvent.button!==2&&d.browserEvent.preventDefault()})),this.disposables.push(addDisposableListener(this.container,EventType$1.CLICK,d=>{(d.x||d.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(d=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(d=>{typeof d.index=="number"&&(d.browserEvent.preventDefault(),this.list.setSelection([d.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Event.map(this.list.onDidChangeFocus,e=>e.elements.map(i=>i.item))}get onDidChangeSelection(){return Event.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(i=>i.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,i=!0){for(let o=0,a=e.length;o<a;o++){const c=e[o];if(!c.hidden)if(c.checked)i=!0;else return!1}return i}getCheckedCount(){let e=0;const i=this.elements;for(let o=0,a=i.length;o<a;o++)i[o].checked&&e++;return e}getVisibleCount(){let e=0;const i=this.elements;for(let o=0,a=i.length;o<a;o++)i[o].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(i=>{i.hidden||(i.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=dispose(this.elementDisposables);const i=o=>this.fireButtonTriggered(o);this.inputElements=e,this.elements=e.reduce((o,a,c)=>{var d,_,b;if(a.type!=="separator"){const k=c&&e[c-1],j=a.label&&a.label.replace(/\r?\n/g," "),_e=parseLabelWithIcons(j).text.trim(),et=a.meta&&a.meta.replace(/\r?\n/g," "),tt=a.description&&a.description.replace(/\r?\n/g," "),it=a.detail&&a.detail.replace(/\r?\n/g," "),st=a.ariaLabel||[j,tt,it].map(nt=>getCodiconAriaLabel(nt)).filter(nt=>!!nt).join(", "),ot=this.parent.classList.contains("show-checkboxes");o.push(new ListElement({hasCheckbox:ot,index:c,item:a,saneLabel:j,saneSortLabel:_e,saneMeta:et,saneAriaLabel:st,saneDescription:tt,saneDetail:it,labelHighlights:(d=a.highlights)===null||d===void 0?void 0:d.label,descriptionHighlights:(_=a.highlights)===null||_===void 0?void 0:_.description,detailHighlights:(b=a.highlights)===null||b===void 0?void 0:b.detail,checked:!1,separator:k&&k.type==="separator"?k:void 0,fireButtonTriggered:i}))}return o},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(o=>o.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((o,a,c)=>(o.set(a.item,c),o),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(i=>this.elementsToIndexes.has(i)).map(i=>this.elementsToIndexes.get(i))),e.length>0){const i=this.list.getFocus()[0];typeof i=="number"&&this.list.reveal(i)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(i=>this.elementsToIndexes.has(i)).map(i=>this.elementsToIndexes.get(i)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const i=new Set;for(const o of e)i.add(o);for(const o of this.elements)o.checked=i.has(o.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===QuickInputListFocus.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=QuickInputListFocus.First),e===QuickInputListFocus.Previous&&this.list.getFocus()[0]===0&&(e=QuickInputListFocus.Last),e===QuickInputListFocus.Second&&this.list.length<2&&(e=QuickInputListFocus.First),e){case QuickInputListFocus.First:this.list.focusFirst();break;case QuickInputListFocus.Second:this.list.focusNth(1);break;case QuickInputListFocus.Last:this.list.focusLast();break;case QuickInputListFocus.Next:this.list.focusNext();break;case QuickInputListFocus.Previous:this.list.focusPrevious();break;case QuickInputListFocus.NextPage:this.list.focusNextPage();break;case QuickInputListFocus.PreviousPage:this.list.focusPreviousPage();break}const i=this.list.getFocus()[0];typeof i=="number"&&this.list.reveal(i)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const i=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(a=>{a.labelHighlights=void 0,a.descriptionHighlights=void 0,a.detailHighlights=void 0,a.hidden=!1;const c=a.index&&this.inputElements[a.index-1];a.separator=c&&c.type==="separator"?c:void 0});else{let a;this.elements.forEach(c=>{let d;this.matchOnLabelMode==="fuzzy"?d=this.matchOnLabel?withNullAsUndefined(matchesFuzzyIconAware(e,parseLabelWithIcons(c.saneLabel))):void 0:d=this.matchOnLabel?withNullAsUndefined(matchesContiguousIconAware(i,parseLabelWithIcons(c.saneLabel))):void 0;const _=this.matchOnDescription?withNullAsUndefined(matchesFuzzyIconAware(e,parseLabelWithIcons(c.saneDescription||""))):void 0,b=this.matchOnDetail?withNullAsUndefined(matchesFuzzyIconAware(e,parseLabelWithIcons(c.saneDetail||""))):void 0,k=this.matchOnMeta?withNullAsUndefined(matchesFuzzyIconAware(e,parseLabelWithIcons(c.saneMeta||""))):void 0;if(d||_||b||k?(c.labelHighlights=d,c.descriptionHighlights=_,c.detailHighlights=b,c.hidden=!1):(c.labelHighlights=void 0,c.descriptionHighlights=void 0,c.detailHighlights=void 0,c.hidden=!c.item.alwaysShow),c.separator=void 0,!this.sortByLabel){const j=c.index&&this.inputElements[c.index-1];a=j&&j.type==="separator"?j:a,a&&!c.hidden&&(c.separator=a,a=void 0)}})}const o=this.elements.filter(a=>!a.hidden);if(this.sortByLabel&&e){const a=e.toLowerCase();o.sort((c,d)=>compareEntries(c,d,a))}return this.elementsToIndexes=o.reduce((a,c,d)=>(a.set(c.item,d),a),new Map),this.list.splice(0,this.list.length,o),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(o.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),i=this.allVisibleChecked(e);for(const o of e)o.checked=!i}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=dispose(this.elementDisposables),this.disposables=dispose(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}__decorate$d([memoize],QuickInputList.prototype,"onDidChangeFocus",null);__decorate$d([memoize],QuickInputList.prototype,"onDidChangeSelection",null);function matchesContiguousIconAware(s,e){const{text:i,iconOffsets:o}=e;if(!o||o.length===0)return matchesContiguous(s,i);const a=ltrim(i," "),c=i.length-a.length,d=matchesContiguous(s,a);if(d)for(const _ of d){const b=o[_.start+c]+c;_.start+=b,_.end+=b}return d}function matchesContiguous(s,e){const i=e.toLowerCase().indexOf(s.toLowerCase());return i!==-1?[{start:i,end:i+s.length}]:null}function compareEntries(s,e,i){const o=s.labelHighlights||[],a=e.labelHighlights||[];return o.length&&!a.length?-1:!o.length&&a.length?1:o.length===0&&a.length===0?0:compareAnything(s.saneSortLabel,e.saneSortLabel,i)}class QuickInputAccessibilityProvider{getWidgetAriaLabel(){return localize("quickInput","Quick Input")}getAriaLabel(e){var i;return!((i=e.separator)===null||i===void 0)&&i.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!!e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}var __awaiter$7=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};const $=$$5,backButton={iconClass:Codicon.quickInputBack.classNames,tooltip:localize("quickInput.back","Back"),handle:-1};class QuickInput extends Disposable{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=QuickInput.noPromptMessage,this._severity=Severity$1.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new Emitter$1),this.onDidHideEmitter=this._register(new Emitter$1),this.onDisposeEmitter=this._register(new Emitter$1),this.visibleDisposables=this._register(new DisposableStore),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const i=this._ignoreFocusOut!==e&&!isIOS;this._ignoreFocusOut=e&&!isIOS,i&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){!this.visible||this.ui.hide()}didHide(e=QuickInputHideReason.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const i=this.getDescription();if(this.ui.description1.textContent!==i&&(this.ui.description1.textContent=i),this.ui.description2.textContent!==i&&(this.ui.description2.textContent=i),this.busy&&!this.busyDelay&&(this.busyDelay=new TimeoutTimer,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const a=this.buttons.filter(d=>d===backButton);this.ui.leftActionBar.push(a.map((d,_)=>{const b=new Action(`id-${_}`,"",d.iconClass||getIconClass(d.iconPath),!0,()=>__awaiter$7(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(d)}));return b.tooltip=d.tooltip||"",b}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const c=this.buttons.filter(d=>d!==backButton);this.ui.rightActionBar.push(c.map((d,_)=>{const b=new Action(`id-${_}`,"",d.iconClass||getIconClass(d.iconPath),!0,()=>__awaiter$7(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(d)}));return b.tooltip=d.tooltip||"",b}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const o=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==o&&(this._lastValidationMessage=o,reset(this.ui.message,...renderLabelWithIcons(o))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?localize("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Severity$1.Ignore){const i=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=i.foreground?`${i.foreground}`:"",this.ui.message.style.backgroundColor=i.background?`${i.background}`:"",this.ui.message.style.border=i.border?`1px solid ${i.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}QuickInput.noPromptMessage=localize("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class QuickPick extends QuickInput{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new Emitter$1),this.onWillAcceptEmitter=this._register(new Emitter$1),this.onDidAcceptEmitter=this._register(new Emitter$1),this.onDidCustomEmitter=this._register(new Emitter$1),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?ItemActivation.NONE:ItemActivation.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new Emitter$1),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new Emitter$1),this.onDidTriggerItemButtonEmitter=this._register(new Emitter$1),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,i){this._value!==e&&(this._value=e,i||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?NO_KEY_MODS:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(QuickInputListFocus.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(QuickInputListFocus.Next),this.canSelectMany&&this.ui.list.domFocus(),EventHelper.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(QuickInputListFocus.Previous):this.ui.list.focus(QuickInputListFocus.Last),this.canSelectMany&&this.ui.list.domFocus(),EventHelper.stop(e,!0);break;case 12:this.ui.list.focus(QuickInputListFocus.NextPage),this.canSelectMany&&this.ui.list.domFocus(),EventHelper.stop(e,!0);break;case 11:this.ui.list.focus(QuickInputListFocus.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),EventHelper.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(QuickInputListFocus.First),EventHelper.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(QuickInputListFocus.Last),EventHelper.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&equals$1(e,this._activeItems,(i,o)=>i===o)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:i})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&equals$1(e,this._selectedItems,(o,a)=>o===a)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(i instanceof MouseEvent&&i.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||this.selectedItemsToConfirm!==this._selectedItems&&equals$1(e,this._selectedItems,(i,o)=>i===o)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let i=!1;this.onWillAcceptEmitter.fire({veto:()=>i=!0}),i||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return addDisposableListener(this.ui.container,EventType$1.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const i=new StandardKeyboardEvent(e),o=i.keyCode;this._quickNavigate.keybindings.some(d=>{const[_,b]=d.getParts();return b?!1:_.shiftKey&&o===4?!(i.ctrlKey||i.altKey||i.metaKey):!!(_.altKey&&o===6||_.ctrlKey&&o===5||_.metaKey&&o===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,i=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",i&&!this.description);const o={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!i,progressBar:!i,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(o),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let a=this.ariaLabel;if(a||(a=this.placeholder||QuickPick.DEFAULT_ARIA_LABEL,this.title&&(a+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==a&&(this.ui.inputBox.ariaLabel=a),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case ItemActivation.NONE:this._itemActivation=ItemActivation.FIRST;break;case ItemActivation.SECOND:this.ui.list.focus(QuickInputListFocus.Second),this._itemActivation=ItemActivation.FIRST;break;case ItemActivation.LAST:this.ui.list.focus(QuickInputListFocus.Last),this._itemActivation=ItemActivation.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),o.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(QuickInputListFocus.First)),this.keepScrollPosition&&(this.scrollTop=e)}}QuickPick.DEFAULT_ARIA_LABEL=localize("quickInputBox.ariaLabel","Type to narrow down results.");class QuickInputController extends Disposable{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new Emitter$1),this.onDidCustomEmitter=this._register(new Emitter$1),this.onDidTriggerButtonEmitter=this._register(new Emitter$1),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new Emitter$1),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new Emitter$1),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=i=>{this.keyMods.ctrlCmd=i.ctrlKey||i.metaKey,this.keyMods.alt=i.altKey};this._register(addDisposableListener(window,EventType$1.KEY_DOWN,e,!0)),this._register(addDisposableListener(window,EventType$1.KEY_UP,e,!0)),this._register(addDisposableListener(window,EventType$1.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=append$1(this.parentElement,$(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const i=createStyleSheet(e),o=append$1(e,$(".quick-input-titlebar")),a=this._register(new ActionBar(o));a.domNode.classList.add("quick-input-left-action-bar");const c=append$1(o,$(".quick-input-title")),d=this._register(new ActionBar(o));d.domNode.classList.add("quick-input-right-action-bar");const _=append$1(e,$(".quick-input-description")),b=append$1(e,$(".quick-input-header")),k=append$1(b,$("input.quick-input-check-all"));k.type="checkbox",k.setAttribute("aria-label",localize("quickInput.checkAll","Toggle all checkboxes")),this._register(addStandardDisposableListener(k,EventType$1.CHANGE,dt=>{const pt=k.checked;ut.setAllVisibleChecked(pt)})),this._register(addDisposableListener(k,EventType$1.CLICK,dt=>{(dt.x||dt.y)&&tt.setFocus()}));const j=append$1(b,$(".quick-input-description")),_e=append$1(b,$(".quick-input-and-message")),et=append$1(_e,$(".quick-input-filter")),tt=this._register(new QuickInputBox(et));tt.setAttribute("aria-describedby",`${this.idPrefix}message`);const it=append$1(et,$(".quick-input-visible-count"));it.setAttribute("aria-live","polite"),it.setAttribute("aria-atomic","true");const st=new CountBadge(it,{countFormat:localize({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),ot=append$1(et,$(".quick-input-count"));ot.setAttribute("aria-live","polite");const nt=new CountBadge(ot,{countFormat:localize({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),rt=append$1(b,$(".quick-input-action")),at=new Button(rt);at.label=localize("ok","OK"),this._register(at.onDidClick(dt=>{this.onDidAcceptEmitter.fire()}));const lt=append$1(b,$(".quick-input-action")),gt=new Button(lt);gt.label=localize("custom","Custom"),this._register(gt.onDidClick(dt=>{this.onDidCustomEmitter.fire()}));const ht=append$1(_e,$(`#${this.idPrefix}message.quick-input-message`)),ut=this._register(new QuickInputList(e,this.idPrefix+"list",this.options));this._register(ut.onChangedAllVisibleChecked(dt=>{k.checked=dt})),this._register(ut.onChangedVisibleCount(dt=>{st.setCount(dt)})),this._register(ut.onChangedCheckedCount(dt=>{nt.setCount(dt)})),this._register(ut.onLeave(()=>{setTimeout(()=>{tt.setFocus(),this.controller instanceof QuickPick&&this.controller.canSelectMany&&ut.clearFocus()},0)})),this._register(ut.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const ct=new ProgressBar(e);ct.getContainer().classList.add("quick-input-progress");const ft=trackFocus(e);return this._register(ft),this._register(addDisposableListener(e,EventType$1.FOCUS,dt=>{this.previousFocusElement=dt.relatedTarget instanceof HTMLElement?dt.relatedTarget:void 0},!0)),this._register(ft.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(QuickInputHideReason.Blur),this.previousFocusElement=void 0})),this._register(addDisposableListener(e,EventType$1.FOCUS,dt=>{tt.setFocus()})),this._register(addDisposableListener(e,EventType$1.KEY_DOWN,dt=>{const pt=new StandardKeyboardEvent(dt);switch(pt.keyCode){case 3:EventHelper.stop(dt,!0),this.onDidAcceptEmitter.fire();break;case 9:EventHelper.stop(dt,!0),this.hide(QuickInputHideReason.Gesture);break;case 2:if(!pt.altKey&&!pt.ctrlKey&&!pt.metaKey){const mt=[".action-label.codicon"];e.classList.contains("show-checkboxes")?mt.push("input"):mt.push("input[type=text]"),this.getUI().list.isDisplayed()&&mt.push(".monaco-list");const _t=e.querySelectorAll(mt.join(", "));pt.shiftKey&&pt.target===_t[0]?(EventHelper.stop(dt,!0),_t[_t.length-1].focus()):!pt.shiftKey&&pt.target===_t[_t.length-1]&&(EventHelper.stop(dt,!0),_t[0].focus())}break}})),this.ui={container:e,styleSheet:i,leftActionBar:a,titleBar:o,title:c,description1:_,description2:j,rightActionBar:d,checkAll:k,filterContainer:et,inputBox:tt,visibleCountContainer:it,visibleCount:st,countContainer:ot,count:nt,okContainer:rt,ok:at,message:ht,customButtonContainer:lt,customButton:gt,list:ut,progressBar:ct,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:dt=>this.show(dt),hide:()=>this.hide(),setVisibilities:dt=>this.setVisibilities(dt),setComboboxAccessibility:dt=>this.setComboboxAccessibility(dt),setEnabled:dt=>this.setEnabled(dt),setContextKey:dt=>this.options.setContextKey(dt)},this.updateStyles(),this.ui}pick(e,i={},o=CancellationToken.None){return new Promise((a,c)=>{let d=j=>{var _e;d=a,(_e=i.onKeyMods)===null||_e===void 0||_e.call(i,_.keyMods),a(j)};if(o.isCancellationRequested){d(void 0);return}const _=this.createQuickPick();let b;const k=[_,_.onDidAccept(()=>{if(_.canSelectMany)d(_.selectedItems.slice()),_.hide();else{const j=_.activeItems[0];j&&(d(j),_.hide())}}),_.onDidChangeActive(j=>{const _e=j[0];_e&&i.onDidFocus&&i.onDidFocus(_e)}),_.onDidChangeSelection(j=>{if(!_.canSelectMany){const _e=j[0];_e&&(d(_e),_.hide())}}),_.onDidTriggerItemButton(j=>i.onDidTriggerItemButton&&i.onDidTriggerItemButton(Object.assign(Object.assign({},j),{removeItem:()=>{const _e=_.items.indexOf(j.item);if(_e!==-1){const et=_.items.slice(),tt=et.splice(_e,1),it=_.activeItems.filter(ot=>ot!==tt[0]),st=_.keepScrollPosition;_.keepScrollPosition=!0,_.items=et,it&&(_.activeItems=it),_.keepScrollPosition=st}}}))),_.onDidChangeValue(j=>{b&&!j&&(_.activeItems.length!==1||_.activeItems[0]!==b)&&(_.activeItems=[b])}),o.onCancellationRequested(()=>{_.hide()}),_.onDidHide(()=>{dispose(k),d(void 0)})];_.title=i.title,_.canSelectMany=!!i.canPickMany,_.placeholder=i.placeHolder,_.ignoreFocusOut=!!i.ignoreFocusLost,_.matchOnDescription=!!i.matchOnDescription,_.matchOnDetail=!!i.matchOnDetail,_.matchOnLabel=i.matchOnLabel===void 0||i.matchOnLabel,_.autoFocusOnList=i.autoFocusOnList===void 0||i.autoFocusOnList,_.quickNavigate=i.quickNavigate,_.hideInput=!!i.hideInput,_.contextKey=i.contextKey,_.busy=!0,Promise.all([e,i.activeItem]).then(([j,_e])=>{b=_e,_.busy=!1,_.items=j,_.canSelectMany&&(_.selectedItems=j.filter(et=>et.type!=="separator"&&et.picked)),b&&(_.activeItems=[b])}),_.show(),Promise.resolve(e).then(void 0,j=>{c(j),_.hide()})})}createQuickPick(){const e=this.getUI();return new QuickPick(e)}show(e){const i=this.getUI();this.onShowEmitter.fire();const o=this.controller;this.controller=e,o&&o.didHide(),this.setEnabled(!0),i.leftActionBar.clear(),i.title.textContent="",i.description1.textContent="",i.description2.textContent="",i.rightActionBar.clear(),i.checkAll.checked=!1,i.inputBox.placeholder="",i.inputBox.password=!1,i.inputBox.showDecoration(Severity$1.Ignore),i.visibleCount.setCount(0),i.count.setCount(0),reset(i.message),i.progressBar.stop(),i.list.setElements([]),i.list.matchOnDescription=!1,i.list.matchOnDetail=!1,i.list.matchOnLabel=!0,i.list.sortByLabel=!0,i.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),i.inputBox.ariaLabel="";const a=this.options.backKeybindingLabel();backButton.tooltip=a?localize("quickInput.backWithKeybinding","Back ({0})",a):localize("quickInput.back","Back"),i.container.style.display="",this.updateLayout(),i.inputBox.setFocus()}setVisibilities(e){const i=this.getUI();i.title.style.display=e.title?"":"none",i.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",i.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",i.checkAll.style.display=e.checkAll?"":"none",i.filterContainer.style.display=e.inputBox?"":"none",i.visibleCountContainer.style.display=e.visibleCount?"":"none",i.countContainer.style.display=e.count?"":"none",i.okContainer.style.display=e.ok?"":"none",i.customButtonContainer.style.display=e.customButton?"":"none",i.message.style.display=e.message?"":"none",i.progressBar.getContainer().style.display=e.progressBar?"":"none",i.list.display(!!e.list),i.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const i=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(i.inputBox.setAttribute("role","combobox"),i.inputBox.setAttribute("aria-haspopup","true"),i.inputBox.setAttribute("aria-autocomplete","list"),i.inputBox.setAttribute("aria-activedescendant",i.list.getActiveDescendant()||"")):(i.inputBox.removeAttribute("role"),i.inputBox.removeAttribute("aria-haspopup"),i.inputBox.removeAttribute("aria-autocomplete"),i.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const i of this.getUI().leftActionBar.viewItems)i.getAction().enabled=e;for(const i of this.getUI().rightActionBar.viewItems)i.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var i;const o=this.controller;if(o){const a=!(!((i=this.ui)===null||i===void 0)&&i.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!a){let c=this.previousFocusElement;for(;c&&!c.offsetParent;)c=withNullAsUndefined(c.parentElement);c!=null&&c.offsetParent?(c.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}o.didHide(e)}}layout(e,i){this.dimension=e,this.titleBarOffset=i,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,i=Math.min(this.dimension.width*.62,QuickInputController.MAX_WIDTH);e.width=i+"px",e.marginLeft="-"+i/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:i,quickInputForeground:o,contrastBorder:a,widgetShadow:c}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=i?i.toString():"",this.ui.container.style.color=o?o.toString():"",this.ui.container.style.border=a?`1px solid ${a}`:"",this.ui.container.style.boxShadow=c?`0 0 8px 2px ${c}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const d=[];this.styles.list.pickerGroupBorder&&d.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&d.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(d.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&d.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&d.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&d.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&d.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&d.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),d.push("}"));const _=d.join(`
`);_!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=_)}}}QuickInputController.MAX_WIDTH=600;const list="";class CombinedSpliceable{constructor(e){this.spliceables=e}splice(e,i,o){this.spliceables.forEach(a=>a.splice(e,i,o))}}class ListError extends Error{constructor(e,i){super(`ListError [${e}] ${i}`)}}function groupIntersect(s,e){const i=[];for(const o of e){if(s.start>=o.range.end)continue;if(s.end<o.range.start)break;const a=Range$1.intersect(s,o.range);Range$1.isEmpty(a)||i.push({range:a,size:o.size})}return i}function shift({start:s,end:e},i){return{start:s+i,end:e+i}}function consolidate(s){const e=[];let i=null;for(const o of s){const a=o.range.start,c=o.range.end,d=o.size;if(i&&d===i.size){i.range.end=c;continue}i={range:{start:a,end:c},size:d},e.push(i)}return e}function concat(...s){return consolidate(s.reduce((e,i)=>e.concat(i),[]))}class RangeMap{constructor(){this.groups=[],this._size=0}splice(e,i,o=[]){const a=o.length-i,c=groupIntersect({start:0,end:e},this.groups),d=groupIntersect({start:e+i,end:Number.POSITIVE_INFINITY},this.groups).map(b=>({range:shift(b.range,a),size:b.size})),_=o.map((b,k)=>({range:{start:e+k,end:e+k+1},size:b.size}));this.groups=concat(c,_,d),this._size=this.groups.reduce((b,k)=>b+k.size*(k.range.end-k.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let i=0,o=0;for(const a of this.groups){const c=a.range.end-a.range.start,d=o+c*a.size;if(e<d)return i+Math.floor((e-o)/a.size);i+=c,o=d}return i}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let i=0,o=0;for(const a of this.groups){const c=a.range.end-a.range.start,d=o+c;if(e<d)return i+(e-o)*a.size;i+=c*a.size,o=d}return-1}}function removeFromParent(s){var e;try{(e=s.parentElement)===null||e===void 0||e.removeChild(s)}catch{}}class RowCache{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let i=this.getTemplateCache(e).pop();if(!i){const o=$$5(".monaco-list-row"),c=this.getRenderer(e).renderTemplate(o);i={domNode:o,templateId:e,templateData:c}}return i}release(e){!e||this.releaseRow(e)}releaseRow(e){const{domNode:i,templateId:o}=e;i&&(i.classList.remove("scrolling"),removeFromParent(i)),this.getTemplateCache(o).push(e)}getTemplateCache(e){let i=this.cache.get(e);return i||(i=[],this.cache.set(e,i)),i}dispose(){this.cache.forEach((e,i)=>{for(const o of e)this.getRenderer(i).disposeTemplate(o.templateData),o.templateData=null}),this.cache.clear()}getRenderer(e){const i=this.renderers.get(e);if(!i)throw new Error(`No renderer found for ${e}`);return i}}var __decorate$c=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c};const DefaultOptions$1={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class ElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ExternalElementsDragAndDropData{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class NativeDragAndDropData{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let i=0;i<e.files.length;i++){const o=e.files.item(i);o&&(o.size||o.type)&&this.files.push(o)}}}getData(){return{types:this.types,files:this.files}}}function equalsDragFeedback(s,e){return Array.isArray(s)&&Array.isArray(e)?equals$1(s,e):s===e}class ListViewAccessibilityProvider{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(i,o,a)=>a,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(i,o)=>o+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=i=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=i=>{}}}class ListView{constructor(e,i,o,a=DefaultOptions$1){var c,d,_,b,k,j,_e,et,tt,it;if(this.virtualDelegate=i,this.domId=`list_id_${++ListView.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Delayer(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Disposable.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Disposable.None,this.onDragLeaveTimeout=Disposable.None,this.disposables=new DisposableStore,this._onDidChangeContentHeight=new Emitter$1,this._horizontalScrolling=!1,a.horizontalScrolling&&a.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new RangeMap;for(const ot of o)this.renderers.set(ot.templateId,ot);this.cache=this.disposables.add(new RowCache(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof a.mouseSupport=="boolean"?a.mouseSupport:!0),this._horizontalScrolling=(c=a.horizontalScrolling)!==null&&c!==void 0?c:DefaultOptions$1.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof a.additionalScrollHeight>"u"?0:a.additionalScrollHeight,this.accessibilityProvider=new ListViewAccessibilityProvider(a.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((d=a.transformOptimization)!==null&&d!==void 0?d:DefaultOptions$1.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Gesture.addTarget(this.rowsContainer)),this.scrollable=new Scrollable({forceIntegerValues:!0,smoothScrollDuration:(_=a.smoothScrolling)!==null&&_!==void 0&&_?125:0,scheduleAtNextAnimationFrame:ot=>scheduleAtNextAnimationFrame(ot)}),this.scrollableElement=this.disposables.add(new SmoothScrollableElement(this.rowsContainer,{alwaysConsumeMouseWheel:(b=a.alwaysConsumeMouseWheel)!==null&&b!==void 0?b:DefaultOptions$1.alwaysConsumeMouseWheel,horizontal:1,vertical:(k=a.verticalScrollMode)!==null&&k!==void 0?k:DefaultOptions$1.verticalScrollMode,useShadows:(j=a.useShadows)!==null&&j!==void 0?j:DefaultOptions$1.useShadows,mouseWheelScrollSensitivity:a.mouseWheelScrollSensitivity,fastScrollSensitivity:a.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(addDisposableListener(this.rowsContainer,EventType.Change,ot=>this.onTouchChange(ot))),this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(),"scroll",ot=>ot.target.scrollTop=0)),this.disposables.add(addDisposableListener(this.domNode,"dragover",ot=>this.onDragOver(this.toDragEvent(ot)))),this.disposables.add(addDisposableListener(this.domNode,"drop",ot=>this.onDrop(this.toDragEvent(ot)))),this.disposables.add(addDisposableListener(this.domNode,"dragleave",ot=>this.onDragLeave(this.toDragEvent(ot)))),this.disposables.add(addDisposableListener(this.domNode,"dragend",ot=>this.onDragEnd(ot))),this.setRowLineHeight=(_e=a.setRowLineHeight)!==null&&_e!==void 0?_e:DefaultOptions$1.setRowLineHeight,this.setRowHeight=(et=a.setRowHeight)!==null&&et!==void 0?et:DefaultOptions$1.setRowHeight,this.supportDynamicHeights=(tt=a.supportDynamicHeights)!==null&&tt!==void 0?tt:DefaultOptions$1.supportDynamicHeights,this.dnd=(it=a.dnd)!==null&&it!==void 0?it:DefaultOptions$1.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const i of this.items)this.measureItemWidth(i);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:getContentWidth(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,i,o=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,i,o)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,i,o=[]){const a=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),c={start:e,end:e+i},d=Range$1.intersect(a,c),_=new Map;for(let ht=d.end-1;ht>=d.start;ht--){const ut=this.items[ht];if(ut.dragStartDisposable.dispose(),ut.checkedDisposable.dispose(),ut.row){let ct=_.get(ut.templateId);ct||(ct=[],_.set(ut.templateId,ct));const ft=this.renderers.get(ut.templateId);ft&&ft.disposeElement&&ft.disposeElement(ut.element,ht,ut.row.templateData,ut.size),ct.push(ut.row)}ut.row=null}const b={start:e+i,end:this.items.length},k=Range$1.intersect(b,a),j=Range$1.relativeComplement(b,a),_e=o.map(ht=>({id:String(this.itemId++),element:ht,templateId:this.virtualDelegate.getTemplateId(ht),size:this.virtualDelegate.getHeight(ht),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(ht),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Disposable.None,checkedDisposable:Disposable.None}));let et;e===0&&i>=this.items.length?(this.rangeMap=new RangeMap,this.rangeMap.splice(0,0,_e),et=this.items,this.items=_e):(this.rangeMap.splice(e,i,_e),et=this.items.splice(e,i,..._e));const tt=o.length-i,it=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),st=shift(k,tt),ot=Range$1.intersect(it,st);for(let ht=ot.start;ht<ot.end;ht++)this.updateItemInDOM(this.items[ht],ht);const nt=Range$1.relativeComplement(st,it);for(const ht of nt)for(let ut=ht.start;ut<ht.end;ut++)this.removeItemFromDOM(ut);const rt=j.map(ht=>shift(ht,tt)),lt=[{start:e,end:e+o.length},...rt].map(ht=>Range$1.intersect(it,ht)),gt=this.getNextToLastElement(lt);for(const ht of lt)for(let ut=ht.start;ut<ht.end;ut++){const ct=this.items[ut],ft=_.get(ct.templateId),dt=ft==null?void 0:ft.pop();this.insertItemInDOM(ut,gt,dt)}for(const ht of _.values())for(const ut of ht)this.cache.release(ut);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),et.map(ht=>ht.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=scheduleAtNextAnimationFrame(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const i of this.items)typeof i.width<"u"&&(e=Math.max(e,i.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(!!this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const i=this.items[e].row;return i&&i.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,i){const o={height:typeof e=="number"?e:getContentHeight(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,o.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(o),typeof i<"u"&&(this.renderWidth=i,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof i=="number"?i:getContentWidth(this.domNode)})}render(e,i,o,a,c,d=!1){const _=this.getRenderRange(i,o),b=Range$1.relativeComplement(_,e),k=Range$1.relativeComplement(e,_),j=this.getNextToLastElement(b);if(d){const _e=Range$1.intersect(e,_);for(let et=_e.start;et<_e.end;et++)this.updateItemInDOM(this.items[et],et)}for(const _e of b)for(let et=_e.start;et<_e.end;et++)this.insertItemInDOM(et,j);for(const _e of k)for(let et=_e.start;et<_e.end;et++)this.removeItemFromDOM(et);a!==void 0&&(this.rowsContainer.style.left=`-${a}px`),this.rowsContainer.style.top=`-${i}px`,this.horizontalScrolling&&c!==void 0&&(this.rowsContainer.style.width=`${Math.max(c,this.renderWidth)}px`),this.lastRenderTop=i,this.lastRenderHeight=o}insertItemInDOM(e,i,o){const a=this.items[e];a.row||(a.row=o!=null?o:this.cache.alloc(a.templateId));const c=this.accessibilityProvider.getRole(a.element)||"listitem";a.row.domNode.setAttribute("role",c);const d=this.accessibilityProvider.isChecked(a.element);if(typeof d=="boolean")a.row.domNode.setAttribute("aria-checked",String(!!d));else if(d){const k=j=>a.row.domNode.setAttribute("aria-checked",String(!!j));k(d.value),a.checkedDisposable=d.onDidChange(k)}a.row.domNode.parentElement||(i?this.rowsContainer.insertBefore(a.row.domNode,i):this.rowsContainer.appendChild(a.row.domNode)),this.updateItemInDOM(a,e);const _=this.renderers.get(a.templateId);if(!_)throw new Error(`No renderer found for template id ${a.templateId}`);_==null||_.renderElement(a.element,e,a.row.templateData,a.size);const b=this.dnd.getDragURI(a.element);a.dragStartDisposable.dispose(),a.row.domNode.draggable=!!b,b&&(a.dragStartDisposable=addDisposableListener(a.row.domNode,"dragstart",k=>this.onDragStart(a.element,b,k))),this.horizontalScrolling&&(this.measureItemWidth(a),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=isFirefox?"-moz-fit-content":"fit-content",e.width=getContentWidth(e.row.domNode);const i=window.getComputedStyle(e.row.domNode);i.paddingLeft&&(e.width+=parseFloat(i.paddingLeft)),i.paddingRight&&(e.width+=parseFloat(i.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,i){e.row.domNode.style.top=`${this.elementTop(i)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${i}`),e.row.domNode.setAttribute("data-last-element",i===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",i%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,i,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,i))),e.row.domNode.setAttribute("id",this.getElementDomId(i)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const i=this.items[e];if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const o=this.renderers.get(i.templateId);o&&o.disposeElement&&o.disposeElement(i.element,e,i.row.templateData,i.size),this.cache.release(i.row),i.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,i){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:i})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Event.map(this.disposables.add(new DomEmitter(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Event.map(this.disposables.add(new DomEmitter(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Event.map(this.disposables.add(new DomEmitter(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Event.map(this.disposables.add(new DomEmitter(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Event.map(this.disposables.add(new DomEmitter(this.domNode,EventType.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Event.map(this.disposables.add(new DomEmitter(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer,EventType.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const i=this.getItemIndexFromEventTarget(e.target||null),o=typeof i>"u"?void 0:this.items[i],a=o&&o.element;return{browserEvent:e,index:i,element:a}}toTouchEvent(e){const i=this.getItemIndexFromEventTarget(e.target||null),o=typeof i>"u"?void 0:this.items[i],a=o&&o.element;return{browserEvent:e,index:i,element:a}}toGestureEvent(e){const i=this.getItemIndexFromEventTarget(e.initialTarget||null),o=typeof i>"u"?void 0:this.items[i],a=o&&o.element;return{browserEvent:e,index:i,element:a}}toDragEvent(e){const i=this.getItemIndexFromEventTarget(e.target||null),o=typeof i>"u"?void 0:this.items[i],a=o&&o.element;return{browserEvent:e,index:i,element:a}}onScroll(e){try{const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(i,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(i){throw console.error("Got bad scroll event:",e),i}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,i,o){var a,c;if(!o.dataTransfer)return;const d=this.dnd.getDragElements(e);if(o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setData(DataTransfers.TEXT,i),o.dataTransfer.setDragImage){let _;this.dnd.getDragLabel&&(_=this.dnd.getDragLabel(d,o)),typeof _>"u"&&(_=String(d.length));const b=$$5(".monaco-drag-image");b.textContent=_,document.body.appendChild(b),o.dataTransfer.setDragImage(b,-10,-10),setTimeout(()=>document.body.removeChild(b),0)}this.currentDragData=new ElementsDragAndDropData(d),StaticDND.CurrentDragAndDropData=new ExternalElementsDragAndDropData(d),(c=(a=this.dnd).onDragStart)===null||c===void 0||c.call(a,this.currentDragData,o)}onDragOver(e){var i;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),StaticDND.CurrentDragAndDropData&&StaticDND.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(StaticDND.CurrentDragAndDropData)this.currentDragData=StaticDND.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NativeDragAndDropData}const o=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof o=="boolean"?o:o.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof o!="boolean"&&o.effect===0?"copy":"move";let a;if(typeof o!="boolean"&&o.feedback?a=o.feedback:typeof e.index>"u"?a=[-1]:a=[e.index],a=distinct(a).filter(c=>c>=-1&&c<this.length).sort((c,d)=>c-d),a=a[0]===-1?[-1]:a,equalsDragFeedback(this.currentDragFeedback,a))return!0;if(this.currentDragFeedback=a,this.currentDragFeedbackDisposable.dispose(),a[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=toDisposable(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const c of a){const d=this.items[c];d.dropTarget=!0,(i=d.row)===null||i===void 0||i.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=toDisposable(()=>{var c;for(const d of a){const _=this.items[d];_.dropTarget=!1,(c=_.row)===null||c===void 0||c.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var i,o;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=disposableTimeout(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((o=(i=this.dnd).onDragLeave)===null||o===void 0||o.call(i,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const i=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,StaticDND.CurrentDragAndDropData=void 0,!(!i||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),i.update(e.browserEvent.dataTransfer),this.dnd.drop(i,e.element,e.index,e.browserEvent))}onDragEnd(e){var i,o;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,StaticDND.CurrentDragAndDropData=void 0,(o=(i=this.dnd).onDragEnd)===null||o===void 0||o.call(i,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Disposable.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const i=getTopLeftOffset(this.domNode).top;this.dragOverAnimationDisposable=animate(this.animateDragAndDropScrollTop.bind(this,i))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=disposableTimeout(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const i=this.dragOverMouseY-e,o=this.renderHeight-35;i<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(i-35))):i>o&&(this.scrollTop+=Math.min(14,Math.floor(.3*(i-o))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const i=this.scrollableElement.getDomNode();let o=e;for(;o instanceof HTMLElement&&o!==this.rowsContainer&&i.contains(o);){const a=o.getAttribute("data-index");if(a){const c=Number(a);if(!isNaN(c))return c}o=o.parentElement}}getRenderRange(e,i){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+i-1)}}_rerender(e,i,o){const a=this.getRenderRange(e,i);let c,d;e===this.elementTop(a.start)?(c=a.start,d=0):a.end-a.start>1&&(c=a.start+1,d=this.elementTop(c)-e);let _=0;for(;;){const b=this.getRenderRange(e,i);let k=!1;for(let j=b.start;j<b.end;j++){const _e=this.probeDynamicHeight(j);_e!==0&&this.rangeMap.splice(j,1,[this.items[j]]),_+=_e,k=k||_e!==0}if(!k){_!==0&&this.eventuallyUpdateScrollDimensions();const j=Range$1.relativeComplement(a,b);for(const et of j)for(let tt=et.start;tt<et.end;tt++)this.items[tt].row&&this.removeItemFromDOM(tt);const _e=Range$1.relativeComplement(b,a);for(const et of _e)for(let tt=et.start;tt<et.end;tt++){const it=tt+1,st=it<this.items.length?this.items[it].row:null,ot=st?st.domNode:null;this.insertItemInDOM(tt,ot)}for(let et=b.start;et<b.end;et++)this.items[et].row&&this.updateItemInDOM(this.items[et],et);if(typeof c=="number"){const et=this.scrollable.getFutureScrollPosition().scrollTop-e,tt=this.elementTop(c)-d+et;this.setScrollTop(tt,o)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var i,o,a;const c=this.items[e];if(this.virtualDelegate.getDynamicHeight){const k=this.virtualDelegate.getDynamicHeight(c.element);if(k!==null){const j=c.size;return c.size=k,c.lastDynamicHeightWidth=this.renderWidth,k-j}}if(!c.hasDynamicHeight||c.lastDynamicHeightWidth===this.renderWidth||!!this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(c.element))return 0;const d=c.size;if(!this.setRowHeight&&c.row){const k=c.row.domNode.offsetHeight;return c.size=k,c.lastDynamicHeightWidth=this.renderWidth,k-d}const _=this.cache.alloc(c.templateId);_.domNode.style.height="",this.rowsContainer.appendChild(_.domNode);const b=this.renderers.get(c.templateId);return b&&(b.renderElement(c.element,e,_.templateData,void 0),(i=b.disposeElement)===null||i===void 0||i.call(b,c.element,e,_.templateData,void 0)),c.size=_.domNode.offsetHeight,(a=(o=this.virtualDelegate).setDynamicHeight)===null||a===void 0||a.call(o,c.element,c.size),c.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(_.domNode),this.cache.release(_),c.size-d}getNextToLastElement(e){const i=e[e.length-1];if(!i)return null;const o=this.items[i.end];return!o||!o.row?null:o.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const i of this.items)if(i.row){const o=this.renderers.get(i.row.templateId);o&&((e=o.disposeElement)===null||e===void 0||e.call(o,i.element,-1,i.row.templateData,void 0),o.disposeTemplate(i.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),dispose(this.disposables)}}ListView.InstanceCount=0;__decorate$c([memoize],ListView.prototype,"onMouseClick",null);__decorate$c([memoize],ListView.prototype,"onMouseDblClick",null);__decorate$c([memoize],ListView.prototype,"onMouseMiddleClick",null);__decorate$c([memoize],ListView.prototype,"onMouseDown",null);__decorate$c([memoize],ListView.prototype,"onMouseOver",null);__decorate$c([memoize],ListView.prototype,"onContextMenu",null);__decorate$c([memoize],ListView.prototype,"onTouchStart",null);__decorate$c([memoize],ListView.prototype,"onTap",null);var __decorate$b=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__awaiter$6=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class TraitRenderer{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,i,o){const a=this.renderedElements.findIndex(c=>c.templateData===o);if(a>=0){const c=this.renderedElements[a];this.trait.unrender(o),c.index=i}else{const c={index:i,templateData:o};this.renderedElements.push(c)}this.trait.renderIndex(i,o)}splice(e,i,o){const a=[];for(const c of this.renderedElements)c.index<e?a.push(c):c.index>=e+i&&a.push({index:c.index+o-i,templateData:c.templateData});this.renderedElements=a}renderIndexes(e){for(const{index:i,templateData:o}of this.renderedElements)e.indexOf(i)>-1&&this.trait.renderIndex(i,o)}disposeTemplate(e){const i=this.renderedElements.findIndex(o=>o.templateData===e);i<0||this.renderedElements.splice(i,1)}}class Trait$1{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new Emitter$1,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new TraitRenderer(this)}splice(e,i,o){var a;i=Math.max(0,Math.min(i,this.length-e));const c=o.length-i,d=e+i,_=[...this.sortedIndexes.filter(k=>k<e),...o.map((k,j)=>k?j+e:-1).filter(k=>k!==-1),...this.sortedIndexes.filter(k=>k>=d).map(k=>k+c)],b=this.length+c;if(this.sortedIndexes.length>0&&_.length===0&&b>0){const k=(a=this.sortedIndexes.find(j=>j>=e))!==null&&a!==void 0?a:b-1;_.push(Math.min(k,b-1))}this.renderer.splice(e,i,o.length),this._set(_,_),this.length=b}renderIndex(e,i){i.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,i){return this._set(e,[...e].sort(numericSort),i)}_set(e,i,o){const a=this.indexes,c=this.sortedIndexes;this.indexes=e,this.sortedIndexes=i;const d=disjunction(c,e);return this.renderer.renderIndexes(d),this._onChange.fire({indexes:e,browserEvent:o}),a}get(){return this.indexes}contains(e){return binarySearch(this.sortedIndexes,e,numericSort)>=0}dispose(){dispose(this._onChange)}}__decorate$b([memoize],Trait$1.prototype,"renderer",null);class SelectionTrait extends Trait$1{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,i){super.renderIndex(e,i),this.setAriaSelected&&(this.contains(e)?i.setAttribute("aria-selected","true"):i.setAttribute("aria-selected","false"))}}class TraitSpliceable{constructor(e,i,o){this.trait=e,this.view=i,this.identityProvider=o}splice(e,i,o){if(!this.identityProvider)return this.trait.splice(e,i,o.map(()=>!1));const a=this.trait.get().map(d=>this.identityProvider.getId(this.view.element(d)).toString()),c=o.map(d=>a.indexOf(this.identityProvider.getId(d).toString())>-1);this.trait.splice(e,i,c)}}function isInputElement(s){return s.tagName==="INPUT"||s.tagName==="TEXTAREA"}function isMonacoEditor(s){return s.classList.contains("monaco-editor")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:isMonacoEditor(s.parentElement)}function isButton(s){return s.tagName==="A"&&s.classList.contains("monaco-button")||s.tagName==="DIV"&&s.classList.contains("monaco-button-dropdown")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:isButton(s.parentElement)}class KeyboardController{constructor(e,i,o){this.list=e,this.view=i,this.disposables=new DisposableStore,this.multipleSelectionDisposables=new DisposableStore,this.onKeyDown.filter(a=>a.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(a=>a.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(a=>a.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(a=>a.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(a=>a.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(a=>a.keyCode===9).on(this.onEscape,this,this.disposables),o.multipleSelectionSupport!==!1&&this.onKeyDown.filter(a=>(isMacintosh?a.metaKey:a.ctrlKey)&&a.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode,"keydown")).event).filter(e=>!isInputElement(e.target)).map(e=>new StandardKeyboardEvent(e)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(i=>(isMacintosh?i.metaKey:i.ctrlKey)&&i.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const i=this.list.getFocus()[0];this.list.setAnchor(i),this.list.reveal(i),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(range(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}__decorate$b([memoize],KeyboardController.prototype,"onKeyDown",null);var TypeNavigationMode;(function(s){s[s.Automatic=0]="Automatic",s[s.Trigger=1]="Trigger"})(TypeNavigationMode||(TypeNavigationMode={}));var TypeNavigationControllerState;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(TypeNavigationControllerState||(TypeNavigationControllerState={}));const DefaultKeyboardNavigationDelegate=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=93&&s.keyCode<=102||s.keyCode>=80&&s.keyCode<=90}};class TypeNavigationController{constructor(e,i,o,a,c){this.list=e,this.view=i,this.keyboardNavigationLabelProvider=o,this.keyboardNavigationEventFilter=a,this.delegate=c,this.enabled=!1,this.state=TypeNavigationControllerState.Idle,this.mode=TypeNavigationMode.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new DisposableStore,this.disposables=new DisposableStore,this.updateOptions(e.options)}updateOptions(e){var i,o;!((i=e.typeNavigationEnabled)!==null&&i!==void 0)||i?this.enable():this.disable(),this.mode=(o=e.typeNavigationMode)!==null&&o!==void 0?o:TypeNavigationMode.Automatic}enable(){if(this.enabled)return;let e=!1;const i=this.enabledDisposables.add(Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode,"keydown")).event)).filter(c=>!isInputElement(c.target)).filter(()=>this.mode===TypeNavigationMode.Automatic||this.triggered).map(c=>new StandardKeyboardEvent(c)).filter(c=>e||this.keyboardNavigationEventFilter(c)).filter(c=>this.delegate.mightProducePrintableCharacter(c)).forEach(stopEvent).map(c=>c.browserEvent.key).event,o=Event.debounce(i,()=>null,800,void 0,void 0,this.enabledDisposables);Event.reduce(Event.any(i,o),(c,d)=>d===null?null:(c||"")+d,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),o(this.onClear,this,this.enabledDisposables),i(()=>e=!0,void 0,this.enabledDisposables),o(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){!this.enabled||(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const i=this.list.getFocus();if(i.length>0&&i[0]===this.previouslyFocused){const o=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(i[0]));o&&alert(o)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=TypeNavigationControllerState.Idle,this.triggered=!1;return}const i=this.list.getFocus(),o=i.length>0?i[0]:0,a=this.state===TypeNavigationControllerState.Idle?1:0;this.state=TypeNavigationControllerState.Typing;for(let c=0;c<this.list.length;c++){const d=(o+c+a)%this.list.length,_=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(d)),b=_&&_.toString();if(typeof b>"u"||matchesPrefix(e,b)){this.previouslyFocused=o,this.list.setFocus([d]),this.list.reveal(d);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class DOMFocusController{constructor(e,i){this.list=e,this.view=i,this.disposables=new DisposableStore,this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(i.domNode,"keydown")).event)).filter(a=>!isInputElement(a.target)).map(a=>new StandardKeyboardEvent(a)).filter(a=>a.keyCode===2&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&!a.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const i=this.list.getFocus();if(i.length===0)return;const o=this.view.domElement(i[0]);if(!o)return;const a=o.querySelector("[tabIndex]");if(!a||!(a instanceof HTMLElement)||a.tabIndex===-1)return;const c=window.getComputedStyle(a);c.visibility==="hidden"||c.display==="none"||(e.preventDefault(),e.stopPropagation(),a.focus())}dispose(){this.disposables.dispose()}}function isSelectionSingleChangeEvent(s){return isMacintosh?s.browserEvent.metaKey:s.browserEvent.ctrlKey}function isSelectionRangeChangeEvent(s){return s.browserEvent.shiftKey}function isMouseRightClick(s){return s instanceof MouseEvent&&s.button===2}const DefaultMultipleSelectionController={isSelectionSingleChangeEvent,isSelectionRangeChangeEvent};class MouseController{constructor(e){this.list=e,this.disposables=new DisposableStore,this._onPointer=new Emitter$1,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||DefaultMultipleSelectionController),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Gesture.addTarget(e.getHTMLElement()))),Event.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||DefaultMultipleSelectionController))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){isMonacoEditor(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(isMonacoEditor(e.browserEvent.target))return;const i=typeof e.index>"u"?[]:[e.index];this.list.setFocus(i,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target))return;const i=e.index;if(typeof i>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([i],e.browserEvent),this.list.setAnchor(i),isMouseRightClick(e.browserEvent)||this.list.setSelection([i],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const i=this.list.getFocus();this.list.setSelection(i,e.browserEvent)}changeSelection(e){const i=e.index;let o=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof o>"u"){const j=this.list.getFocus()[0];o=j!=null?j:i,this.list.setAnchor(o)}const a=Math.min(o,i),c=Math.max(o,i),d=range(a,c+1),_=this.list.getSelection(),b=getContiguousRangeContaining(disjunction(_,[o]),o);if(b.length===0)return;const k=disjunction(d,relativeComplement(_,b));this.list.setSelection(k,e.browserEvent),this.list.setFocus([i],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const a=this.list.getSelection(),c=a.filter(d=>d!==i);this.list.setFocus([i]),this.list.setAnchor(i),a.length===c.length?this.list.setSelection([...c,i],e.browserEvent):this.list.setSelection(c,e.browserEvent)}}dispose(){this.disposables.dispose()}}class DefaultStyleController{constructor(e,i){this.styleElement=e,this.selectorSuffix=i}style(e){const i=this.selectorSuffix&&`.${this.selectorSuffix}`,o=[];e.listBackground&&(e.listBackground.isOpaque()?o.push(`.monaco-list${i} .monaco-list-rows { background: ${e.listBackground}; }`):isMacintosh||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(o.push(`.monaco-list${i}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),o.push(`.monaco-list${i}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&o.push(`.monaco-list${i}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(o.push(`.monaco-list${i}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),o.push(`.monaco-list${i}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&o.push(`.monaco-list${i}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&o.push(`.monaco-list${i}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&o.push(`.monaco-list${i}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&o.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&o.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(o.push(`.monaco-list${i} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),o.push(`.monaco-list${i} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&o.push(`.monaco-list${i} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(o.push(`.monaco-list${i} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),o.push(`.monaco-list${i} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(o.push(`.monaco-list${i} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),o.push(`.monaco-list${i} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&o.push(`.monaco-list${i} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&o.push(`.monaco-list${i}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&o.push(`.monaco-list${i} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&o.push(`.monaco-list${i} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&o.push(`
				.monaco-drag-image,
				.monaco-list${i}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${i}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&o.push(`.monaco-list${i} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&o.push(`.monaco-list${i} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&o.push(`
				.monaco-list${i}.drop-target,
				.monaco-list${i} .monaco-list-rows.drop-target,
				.monaco-list${i} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.tableColumnsBorder&&o.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&o.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=o.join(`
`)}}const defaultStyles$1={listFocusBackground:Color.fromHex("#7FB0D0"),listActiveSelectionBackground:Color.fromHex("#0E639C"),listActiveSelectionForeground:Color.fromHex("#FFFFFF"),listActiveSelectionIconForeground:Color.fromHex("#FFFFFF"),listFocusAndSelectionOutline:Color.fromHex("#90C2F9"),listFocusAndSelectionBackground:Color.fromHex("#094771"),listFocusAndSelectionForeground:Color.fromHex("#FFFFFF"),listInactiveSelectionBackground:Color.fromHex("#3F3F46"),listInactiveSelectionIconForeground:Color.fromHex("#FFFFFF"),listHoverBackground:Color.fromHex("#2A2D2E"),listDropBackground:Color.fromHex("#383B3D"),treeIndentGuidesStroke:Color.fromHex("#a9a9a9"),tableColumnsBorder:Color.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:Color.fromHex("#cccccc").transparent(.04)},DefaultOptions={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function getContiguousRangeContaining(s,e){const i=s.indexOf(e);if(i===-1)return[];const o=[];let a=i-1;for(;a>=0&&s[a]===e-(i-a);)o.push(s[a--]);for(o.reverse(),a=i;a<s.length&&s[a]===e+(a-i);)o.push(s[a++]);return o}function disjunction(s,e){const i=[];let o=0,a=0;for(;o<s.length||a<e.length;)if(o>=s.length)i.push(e[a++]);else if(a>=e.length)i.push(s[o++]);else if(s[o]===e[a]){i.push(s[o]),o++,a++;continue}else s[o]<e[a]?i.push(s[o++]):i.push(e[a++]);return i}function relativeComplement(s,e){const i=[];let o=0,a=0;for(;o<s.length||a<e.length;)if(o>=s.length)i.push(e[a++]);else if(a>=e.length)i.push(s[o++]);else if(s[o]===e[a]){o++,a++;continue}else s[o]<e[a]?i.push(s[o++]):a++;return i}const numericSort=(s,e)=>s-e;class PipelineRenderer{constructor(e,i){this._templateId=e,this.renderers=i}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(i=>i.renderTemplate(e))}renderElement(e,i,o,a){let c=0;for(const d of this.renderers)d.renderElement(e,i,o[c++],a)}disposeElement(e,i,o,a){var c;let d=0;for(const _ of this.renderers)(c=_.disposeElement)===null||c===void 0||c.call(_,e,i,o[d],a),d+=1}disposeTemplate(e){let i=0;for(const o of this.renderers)o.disposeTemplate(e[i++])}}class AccessibiltyRenderer{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,i,o){const a=this.accessibilityProvider.getAriaLabel(e);a?o.setAttribute("aria-label",a):o.removeAttribute("aria-label");const c=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof c=="number"?o.setAttribute("aria-level",`${c}`):o.removeAttribute("aria-level")}disposeTemplate(e){}}class ListViewDragAndDrop{constructor(e,i){this.list=e,this.dnd=i}getDragElements(e){const i=this.list.getSelectedElements();return i.indexOf(e)>-1?i:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,i)}onDragStart(e,i){var o,a;(a=(o=this.dnd).onDragStart)===null||a===void 0||a.call(o,e,i)}onDragOver(e,i,o,a){return this.dnd.onDragOver(e,i,o,a)}onDragLeave(e,i,o,a){var c,d;(d=(c=this.dnd).onDragLeave)===null||d===void 0||d.call(c,e,i,o,a)}onDragEnd(e){var i,o;(o=(i=this.dnd).onDragEnd)===null||o===void 0||o.call(i,e)}drop(e,i,o,a){this.dnd.drop(e,i,o,a)}}class List{constructor(e,i,o,a,c=DefaultOptions){var d,_,b,k;this.user=e,this._options=c,this.focus=new Trait$1("focused"),this.anchor=new Trait$1("anchor"),this.eventBufferer=new EventBufferer,this._ariaLabel="",this.disposables=new DisposableStore,this._onDidDispose=new Emitter$1,this.onDidDispose=this._onDidDispose.event;const j=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(d=this._options.accessibilityProvider)===null||d===void 0?void 0:d.getWidgetRole():"list";this.selection=new SelectionTrait(j!=="listbox"),mixin(c,defaultStyles$1,!1);const _e=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=c.accessibilityProvider,this.accessibilityProvider&&(_e.push(new AccessibiltyRenderer(this.accessibilityProvider)),(b=(_=this.accessibilityProvider).onDidChangeActiveDescendant)===null||b===void 0||b.call(_,this.onDidChangeActiveDescendant,this,this.disposables)),a=a.map(tt=>new PipelineRenderer(tt.templateId,[..._e,tt]));const et=Object.assign(Object.assign({},c),{dnd:c.dnd&&new ListViewDragAndDrop(this,c.dnd)});if(this.view=new ListView(i,o,a,et),this.view.domNode.setAttribute("role",j),c.styleController)this.styleController=c.styleController(this.view.domId);else{const tt=createStyleSheet(this.view.domNode);this.styleController=new DefaultStyleController(tt,this.view.domId)}if(this.spliceable=new CombinedSpliceable([new TraitSpliceable(this.focus,this.view,c.identityProvider),new TraitSpliceable(this.selection,this.view,c.identityProvider),new TraitSpliceable(this.anchor,this.view,c.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new DOMFocusController(this,this.view)),(typeof c.keyboardSupport!="boolean"||c.keyboardSupport)&&(this.keyboardController=new KeyboardController(this,this.view,c),this.disposables.add(this.keyboardController)),c.keyboardNavigationLabelProvider){const tt=c.keyboardNavigationDelegate||DefaultKeyboardNavigationDelegate;this.typeNavigationController=new TypeNavigationController(this,this.view,c.keyboardNavigationLabelProvider,(k=c.keyboardNavigationEventFilter)!==null&&k!==void 0?k:()=>!0,tt),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(c),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const i=this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode,"keydown")).event)).map(c=>new StandardKeyboardEvent(c)).filter(c=>e=c.keyCode===58||c.shiftKey&&c.keyCode===68).map(stopEvent).filter(()=>!1).event,o=this.disposables.add(Event.chain(this.disposables.add(new DomEmitter(this.view.domNode,"keyup")).event)).forEach(()=>e=!1).map(c=>new StandardKeyboardEvent(c)).filter(c=>c.keyCode===58||c.shiftKey&&c.keyCode===68).map(stopEvent).map(({browserEvent:c})=>{const d=this.getFocus(),_=d.length?d[0]:void 0,b=typeof _<"u"?this.view.element(_):void 0,k=typeof _<"u"?this.view.domElement(_):this.view.domNode;return{index:_,element:b,anchor:k,browserEvent:c}}).event,a=this.disposables.add(Event.chain(this.view.onContextMenu)).filter(c=>!e).map(({element:c,index:d,browserEvent:_})=>({element:c,index:d,anchor:{x:_.pageX+1,y:_.pageY},browserEvent:_})).event;return Event.any(i,o,a)}get onKeyDown(){return this.disposables.add(new DomEmitter(this.view.domNode,"keydown")).event}get onDidFocus(){return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new MouseController(this)}updateOptions(e={}){var i,o;this._options=Object.assign(Object.assign({},this._options),e),(i=this.typeNavigationController)===null||i===void 0||i.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(o=this.keyboardController)===null||o===void 0||o.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,i,o=[]){if(e<0||e>this.view.length)throw new ListError(this.user,`Invalid start index: ${e}`);if(i<0)throw new ListError(this.user,`Invalid delete count: ${i}`);i===0&&o.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,i,o))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,i){this.view.layout(e,i)}setSelection(e,i){for(const o of e)if(o<0||o>=this.length)throw new ListError(this.user,`Invalid index ${o}`);this.selection.set(e,i)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return firstOrDefault(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,i){for(const o of e)if(o<0||o>=this.length)throw new ListError(this.user,`Invalid index ${o}`);this.focus.set(e,i)}focusNext(e=1,i=!1,o,a){if(this.length===0)return;const c=this.focus.get(),d=this.findNextIndex(c.length>0?c[0]+e:0,i,a);d>-1&&this.setFocus([d],o)}focusPrevious(e=1,i=!1,o,a){if(this.length===0)return;const c=this.focus.get(),d=this.findPreviousIndex(c.length>0?c[0]-e:0,i,a);d>-1&&this.setFocus([d],o)}focusNextPage(e,i){return __awaiter$6(this,void 0,void 0,function*(){let o=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);o=o===0?0:o-1;const a=this.getFocus()[0];if(a!==o&&(a===void 0||o>a)){const c=this.findPreviousIndex(o,!1,i);c>-1&&a!==c?this.setFocus([c],e):this.setFocus([o],e)}else{const c=this.view.getScrollTop();let d=c+this.view.renderHeight;o>a&&(d-=this.view.elementHeight(o)),this.view.setScrollTop(d),this.view.getScrollTop()!==c&&(this.setFocus([]),yield timeout(0),yield this.focusNextPage(e,i))}})}focusPreviousPage(e,i){return __awaiter$6(this,void 0,void 0,function*(){let o;const a=this.view.getScrollTop();a===0?o=this.view.indexAt(a):o=this.view.indexAfter(a-1);const c=this.getFocus()[0];if(c!==o&&(c===void 0||c>=o)){const d=this.findNextIndex(o,!1,i);d>-1&&c!==d?this.setFocus([d],e):this.setFocus([o],e)}else{const d=a;this.view.setScrollTop(a-this.view.renderHeight),this.view.getScrollTop()!==d&&(this.setFocus([]),yield timeout(0),yield this.focusPreviousPage(e,i))}})}focusLast(e,i){if(this.length===0)return;const o=this.findPreviousIndex(this.length-1,!1,i);o>-1&&this.setFocus([o],e)}focusFirst(e,i){this.focusNth(0,e,i)}focusNth(e,i,o){if(this.length===0)return;const a=this.findNextIndex(e,!1,o);a>-1&&this.setFocus([a],i)}findNextIndex(e,i=!1,o){for(let a=0;a<this.length;a++){if(e>=this.length&&!i)return-1;if(e=e%this.length,!o||o(this.element(e)))return e;e++}return-1}findPreviousIndex(e,i=!1,o){for(let a=0;a<this.length;a++){if(e<0&&!i)return-1;if(e=(this.length+e%this.length)%this.length,!o||o(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,i){if(e<0||e>=this.length)throw new ListError(this.user,`Invalid index ${e}`);const o=this.view.getScrollTop(),a=this.view.elementTop(e),c=this.view.elementHeight(e);if(isNumber$1(i)){const d=c-this.view.renderHeight;this.view.setScrollTop(d*clamp(i,0,1)+a)}else{const d=a+c,_=o+this.view.renderHeight;a<o&&d>=_||(a<o||d>=_&&c>=this.view.renderHeight?this.view.setScrollTop(a):d>=_&&this.view.setScrollTop(d-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:i}){return{indexes:e,elements:e.map(o=>this.view.element(o)),browserEvent:i}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const i=this.focus.get();if(i.length>0){let o;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(o=this.accessibilityProvider.getActiveDescendantId(this.view.element(i[0]))),this.view.domNode.setAttribute("aria-activedescendant",o||this.view.getElementDomId(i[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}__decorate$b([memoize],List.prototype,"onDidChangeFocus",null);__decorate$b([memoize],List.prototype,"onDidChangeSelection",null);__decorate$b([memoize],List.prototype,"onContextMenu",null);__decorate$b([memoize],List.prototype,"onKeyDown",null);__decorate$b([memoize],List.prototype,"onDidFocus",null);class PagedRenderer{constructor(e,i){this.renderer=e,this.modelProvider=i}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Disposable.None}}renderElement(e,i,o,a){if(o.disposable&&o.disposable.dispose(),!o.data)return;const c=this.modelProvider();if(c.isResolved(e))return this.renderer.renderElement(c.get(e),e,o.data,a);const d=new CancellationTokenSource$1,_=c.resolve(e,d.token);o.disposable={dispose:()=>d.cancel()},this.renderer.renderPlaceholder(e,o.data),_.then(b=>this.renderer.renderElement(b,e,o.data,a))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class PagedAccessibilityProvider{constructor(e,i){this.modelProvider=e,this.accessibilityProvider=i}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const i=this.modelProvider();return i.isResolved(e)?this.accessibilityProvider.getAriaLabel(i.get(e)):null}}function fromPagedListOptions(s,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new PagedAccessibilityProvider(s,e.accessibilityProvider)})}class PagedList{constructor(e,i,o,a,c={}){const d=()=>this.model,_=a.map(b=>new PagedRenderer(b,d));this.list=new List(e,i,o,_,fromPagedListOptions(d,c))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Event.map(this.list.onMouseDblClick,({element:e,index:i,browserEvent:o})=>({element:e===void 0?void 0:this._model.get(e),index:i,browserEvent:o}))}get onPointer(){return Event.map(this.list.onPointer,({element:e,index:i,browserEvent:o})=>({element:e===void 0?void 0:this._model.get(e),index:i,browserEvent:o}))}get onDidChangeSelection(){return Event.map(this.list.onDidChangeSelection,({elements:e,indexes:i,browserEvent:o})=>({elements:e.map(a=>this._model.get(a)),indexes:i,browserEvent:o}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,range(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const splitview="",defaultStyles={separatorBorder:Color.transparent};class ViewItem{constructor(e,i,o,a){this.container=e,this.view=i,this.disposable=a,this._cachedVisibleSize=void 0,typeof o=="number"?(this._size=o,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=o.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,i){var o,a;e!==this.visible&&(e?(this.size=clamp(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof i=="number"?i:this.size,this.size=0),this.container.classList.toggle("visible",e),(a=(o=this.view).setVisible)===null||a===void 0||a.call(o,e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,i){this.layoutContainer(e),this.view.layout(this.size,e,i)}dispose(){return this.disposable.dispose(),this.view}}class VerticalViewItem extends ViewItem{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class HorizontalViewItem extends ViewItem{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var State;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(State||(State={}));var Sizing;(function(s){s.Distribute={type:"distribute"};function e(o){return{type:"split",index:o}}s.Split=e;function i(o){return{type:"invisible",cachedVisibleSize:o}}s.Invisible=i})(Sizing||(Sizing={}));class SplitView extends Disposable{constructor(e,i={}){var o,a,c,d,_;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=State.Idle,this._onDidSashChange=this._register(new Emitter$1),this._onDidSashReset=this._register(new Emitter$1),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(o=i.orientation)!==null&&o!==void 0?o:0,this.inverseAltBehavior=(a=i.inverseAltBehavior)!==null&&a!==void 0?a:!1,this.proportionalLayout=(c=i.proportionalLayout)!==null&&c!==void 0?c:!0,this.getSashOrthogonalSize=i.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=append$1(this.el,$$5(".sash-container")),this.viewContainer=$$5(".split-view-container"),this.scrollable=new Scrollable({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame}),this.scrollableElement=this._register(new SmoothScrollableElement(this.viewContainer,{vertical:this.orientation===0?(d=i.scrollbarVisibility)!==null&&d!==void 0?d:1:2,horizontal:this.orientation===1?(_=i.scrollbarVisibility)!==null&&_!==void 0?_:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(b=>{this.viewContainer.scrollTop=b.scrollTop,this.viewContainer.scrollLeft=b.scrollLeft})),append$1(this.el,this.scrollableElement.getDomNode()),this.style(i.styles||defaultStyles),i.descriptor&&(this.size=i.descriptor.size,i.descriptor.views.forEach((b,k)=>{const j=isUndefined(b.visible)||b.visible?b.size:{type:"invisible",cachedVisibleSize:b.size},_e=b.view;this.doAddView(_e,j,k,!0)}),this.contentSize=this.viewItems.reduce((b,k)=>b+k.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const i of this.sashItems)i.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const i of this.sashItems)i.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,i,o=this.viewItems.length,a){this.doAddView(e,i,o,a)}layout(e,i){const o=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=i,this.proportions)for(let a=0;a<this.viewItems.length;a++){const c=this.viewItems[a];c.size=clamp(Math.round(this.proportions[a]*e),c.minimumSize,c.maximumSize)}else{const a=range(this.viewItems.length),c=a.filter(_=>this.viewItems[_].priority===1),d=a.filter(_=>this.viewItems[_].priority===2);this.resize(this.viewItems.length-1,e-o,void 0,c,d)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:i,alt:o}){for(const _ of this.viewItems)_.enabled=!1;const a=this.sashItems.findIndex(_=>_.sash===e),c=combinedDisposable(addDisposableListener(document.body,"keydown",_=>d(this.sashDragState.current,_.altKey)),addDisposableListener(document.body,"keyup",()=>d(this.sashDragState.current,!1))),d=(_,b)=>{const k=this.viewItems.map(it=>it.size);let j=Number.NEGATIVE_INFINITY,_e=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(b=!b),b)if(a===this.sashItems.length-1){const st=this.viewItems[a];j=(st.minimumSize-st.size)/2,_e=(st.maximumSize-st.size)/2}else{const st=this.viewItems[a+1];j=(st.size-st.maximumSize)/2,_e=(st.size-st.minimumSize)/2}let et,tt;if(!b){const it=range(a,-1),st=range(a+1,this.viewItems.length),ot=it.reduce((ct,ft)=>ct+(this.viewItems[ft].minimumSize-k[ft]),0),nt=it.reduce((ct,ft)=>ct+(this.viewItems[ft].viewMaximumSize-k[ft]),0),rt=st.length===0?Number.POSITIVE_INFINITY:st.reduce((ct,ft)=>ct+(k[ft]-this.viewItems[ft].minimumSize),0),at=st.length===0?Number.NEGATIVE_INFINITY:st.reduce((ct,ft)=>ct+(k[ft]-this.viewItems[ft].viewMaximumSize),0),lt=Math.max(ot,at),gt=Math.min(rt,nt),ht=this.findFirstSnapIndex(it),ut=this.findFirstSnapIndex(st);if(typeof ht=="number"){const ct=this.viewItems[ht],ft=Math.floor(ct.viewMinimumSize/2);et={index:ht,limitDelta:ct.visible?lt-ft:lt+ft,size:ct.size}}if(typeof ut=="number"){const ct=this.viewItems[ut],ft=Math.floor(ct.viewMinimumSize/2);tt={index:ut,limitDelta:ct.visible?gt+ft:gt-ft,size:ct.size}}}this.sashDragState={start:_,current:_,index:a,sizes:k,minDelta:j,maxDelta:_e,alt:b,snapBefore:et,snapAfter:tt,disposable:c}};d(i,o)}onSashChange({current:e}){const{index:i,start:o,sizes:a,alt:c,minDelta:d,maxDelta:_,snapBefore:b,snapAfter:k}=this.sashDragState;this.sashDragState.current=e;const j=e-o,_e=this.resize(i,j,a,void 0,void 0,d,_,b,k);if(c){const et=i===this.sashItems.length-1,tt=this.viewItems.map(at=>at.size),it=et?i:i+1,st=this.viewItems[it],ot=st.size-st.maximumSize,nt=st.size-st.minimumSize,rt=et?i-1:i+1;this.resize(rt,-_e,tt,void 0,void 0,ot,nt)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const i of this.viewItems)i.enabled=!0}onViewChange(e,i){const o=this.viewItems.indexOf(e);o<0||o>=this.viewItems.length||(i=typeof i=="number"?i:e.size,i=clamp(i,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&o>0?(this.resize(o-1,Math.floor((e.size-i)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=i,this.relayout([o],void 0)))}resizeView(e,i){if(this.state!==State.Idle)throw new Error("Cant modify splitview");if(this.state=State.Busy,e<0||e>=this.viewItems.length)return;const o=range(this.viewItems.length).filter(_=>_!==e),a=[...o.filter(_=>this.viewItems[_].priority===1),e],c=o.filter(_=>this.viewItems[_].priority===2),d=this.viewItems[e];i=Math.round(i),i=clamp(i,d.minimumSize,Math.min(d.maximumSize,this.size)),d.size=i,this.relayout(a,c),this.state=State.Idle}distributeViewSizes(){const e=[];let i=0;for(const _ of this.viewItems)_.maximumSize-_.minimumSize>0&&(e.push(_),i+=_.size);const o=Math.floor(i/e.length);for(const _ of e)_.size=clamp(o,_.minimumSize,_.maximumSize);const a=range(this.viewItems.length),c=a.filter(_=>this.viewItems[_].priority===1),d=a.filter(_=>this.viewItems[_].priority===2);this.relayout(c,d)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,i,o=this.viewItems.length,a){if(this.state!==State.Idle)throw new Error("Cant modify splitview");this.state=State.Busy;const c=$$5(".split-view-view");o===this.viewItems.length?this.viewContainer.appendChild(c):this.viewContainer.insertBefore(c,this.viewContainer.children.item(o));const d=e.onDidChange(et=>this.onViewChange(j,et)),_=toDisposable(()=>this.viewContainer.removeChild(c)),b=combinedDisposable(d,_);let k;typeof i=="number"?k=i:i.type==="split"?k=this.getViewSize(i.index)/2:i.type==="invisible"?k={cachedVisibleSize:i.cachedVisibleSize}:k=e.minimumSize;const j=this.orientation===0?new VerticalViewItem(c,e,k,b):new HorizontalViewItem(c,e,k,b);if(this.viewItems.splice(o,0,j),this.viewItems.length>1){const et={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},tt=this.orientation===0?new Sash(this.sashContainer,{getHorizontalSashTop:ct=>this.getSashPosition(ct),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},et),{orientation:1})):new Sash(this.sashContainer,{getVerticalSashLeft:ct=>this.getSashPosition(ct),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},et),{orientation:0})),it=this.orientation===0?ct=>({sash:tt,start:ct.startY,current:ct.currentY,alt:ct.altKey}):ct=>({sash:tt,start:ct.startX,current:ct.currentX,alt:ct.altKey}),ot=Event.map(tt.onDidStart,it)(this.onSashStart,this),rt=Event.map(tt.onDidChange,it)(this.onSashChange,this),lt=Event.map(tt.onDidEnd,()=>this.sashItems.findIndex(ct=>ct.sash===tt))(this.onSashEnd,this),gt=tt.onDidReset(()=>{const ct=this.sashItems.findIndex(_t=>_t.sash===tt),ft=range(ct,-1),dt=range(ct+1,this.viewItems.length),pt=this.findFirstSnapIndex(ft),mt=this.findFirstSnapIndex(dt);typeof pt=="number"&&!this.viewItems[pt].visible||typeof mt=="number"&&!this.viewItems[mt].visible||this._onDidSashReset.fire(ct)}),ht=combinedDisposable(ot,rt,lt,gt,tt),ut={sash:tt,disposable:ht};this.sashItems.splice(o-1,0,ut)}c.appendChild(e.element);let _e;typeof i!="number"&&i.type==="split"&&(_e=[i.index]),a||this.relayout([o],_e),this.state=State.Idle,!a&&typeof i!="number"&&i.type==="distribute"&&this.distributeViewSizes()}relayout(e,i){const o=this.viewItems.reduce((a,c)=>a+c.size,0);this.resize(this.viewItems.length-1,this.size-o,void 0,e,i),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,i,o=this.viewItems.map(j=>j.size),a,c,d=Number.NEGATIVE_INFINITY,_=Number.POSITIVE_INFINITY,b,k){if(e<0||e>=this.viewItems.length)return 0;const j=range(e,-1),_e=range(e+1,this.viewItems.length);if(c)for(const ut of c)pushToStart(j,ut),pushToStart(_e,ut);if(a)for(const ut of a)pushToEnd(j,ut),pushToEnd(_e,ut);const et=j.map(ut=>this.viewItems[ut]),tt=j.map(ut=>o[ut]),it=_e.map(ut=>this.viewItems[ut]),st=_e.map(ut=>o[ut]),ot=j.reduce((ut,ct)=>ut+(this.viewItems[ct].minimumSize-o[ct]),0),nt=j.reduce((ut,ct)=>ut+(this.viewItems[ct].maximumSize-o[ct]),0),rt=_e.length===0?Number.POSITIVE_INFINITY:_e.reduce((ut,ct)=>ut+(o[ct]-this.viewItems[ct].minimumSize),0),at=_e.length===0?Number.NEGATIVE_INFINITY:_e.reduce((ut,ct)=>ut+(o[ct]-this.viewItems[ct].maximumSize),0),lt=Math.max(ot,at,d),gt=Math.min(rt,nt,_);let ht=!1;if(b){const ut=this.viewItems[b.index],ct=i>=b.limitDelta;ht=ct!==ut.visible,ut.setVisible(ct,b.size)}if(!ht&&k){const ut=this.viewItems[k.index],ct=i<k.limitDelta;ht=ct!==ut.visible,ut.setVisible(ct,k.size)}if(ht)return this.resize(e,i,o,a,c,d,_);i=clamp(i,lt,gt);for(let ut=0,ct=i;ut<et.length;ut++){const ft=et[ut],dt=clamp(tt[ut]+ct,ft.minimumSize,ft.maximumSize),pt=dt-tt[ut];ct-=pt,ft.size=dt}for(let ut=0,ct=i;ut<it.length;ut++){const ft=it[ut],dt=clamp(st[ut]-ct,ft.minimumSize,ft.maximumSize),pt=dt-st[ut];ct+=pt,ft.size=dt}return i}distributeEmptySpace(e){const i=this.viewItems.reduce((_,b)=>_+b.size,0);let o=this.size-i;const a=range(this.viewItems.length-1,-1),c=a.filter(_=>this.viewItems[_].priority===1),d=a.filter(_=>this.viewItems[_].priority===2);for(const _ of d)pushToStart(a,_);for(const _ of c)pushToEnd(a,_);typeof e=="number"&&pushToEnd(a,e);for(let _=0;o!==0&&_<a.length;_++){const b=this.viewItems[a[_]],k=clamp(b.size+o,b.minimumSize,b.maximumSize),j=k-b.size;o-=j,b.size=k}}layoutViews(){this.contentSize=this.viewItems.reduce((i,o)=>i+o.size,0);let e=0;for(const i of this.viewItems)i.layout(e,this.layoutContext),e+=i.size;this.sashItems.forEach(i=>i.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const i=this.viewItems.map(b=>e=b.size-b.minimumSize>0||e);e=!1;const o=this.viewItems.map(b=>e=b.maximumSize-b.size>0||e),a=[...this.viewItems].reverse();e=!1;const c=a.map(b=>e=b.size-b.minimumSize>0||e).reverse();e=!1;const d=a.map(b=>e=b.maximumSize-b.size>0||e).reverse();let _=0;for(let b=0;b<this.sashItems.length;b++){const{sash:k}=this.sashItems[b],j=this.viewItems[b];_+=j.size;const _e=!(i[b]&&d[b+1]),et=!(o[b]&&c[b+1]);if(_e&&et){const tt=range(b,-1),it=range(b+1,this.viewItems.length),st=this.findFirstSnapIndex(tt),ot=this.findFirstSnapIndex(it),nt=typeof st=="number"&&!this.viewItems[st].visible,rt=typeof ot=="number"&&!this.viewItems[ot].visible;nt&&c[b]&&(_>0||this.startSnappingEnabled)?k.state=1:rt&&i[b]&&(_<this.contentSize||this.endSnappingEnabled)?k.state=2:k.state=0}else _e&&!et?k.state=1:!_e&&et?k.state=2:k.state=3}}getSashPosition(e){let i=0;for(let o=0;o<this.sashItems.length;o++)if(i+=this.viewItems[o].size,this.sashItems[o].sash===e)return i;return 0}findFirstSnapIndex(e){for(const i of e){const o=this.viewItems[i];if(!!o.visible&&o.snap)return i}for(const i of e){const o=this.viewItems[i];if(o.visible&&o.maximumSize-o.minimumSize>0)return;if(!o.visible&&o.snap)return i}}dispose(){super.dispose(),dispose(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}const table="";class TableListRenderer{constructor(e,i,o){this.columns=e,this.getColumnSize=o,this.templateId=TableListRenderer.TemplateId,this.renderedTemplates=new Set;const a=new Map(i.map(c=>[c.templateId,c]));this.renderers=[];for(const c of e){const d=a.get(c.templateId);if(!d)throw new Error(`Table cell renderer for template id ${c.templateId} not found.`);this.renderers.push(d)}}renderTemplate(e){const i=append$1(e,$$5(".monaco-table-tr")),o=[],a=[];for(let d=0;d<this.columns.length;d++){const _=this.renderers[d],b=append$1(i,$$5(".monaco-table-td",{"data-col-index":d}));b.style.width=`${this.getColumnSize(d)}px`,o.push(b),a.push(_.renderTemplate(b))}const c={container:e,cellContainers:o,cellTemplateData:a};return this.renderedTemplates.add(c),c}renderElement(e,i,o,a){for(let c=0;c<this.columns.length;c++){const _=this.columns[c].project(e);this.renderers[c].renderElement(_,i,o.cellTemplateData[c],a)}}disposeElement(e,i,o,a){for(let c=0;c<this.columns.length;c++){const d=this.renderers[c];if(d.disposeElement){const b=this.columns[c].project(e);d.disposeElement(b,i,o.cellTemplateData[c],a)}}}disposeTemplate(e){for(let i=0;i<this.columns.length;i++)this.renderers[i].disposeTemplate(e.cellTemplateData[i]);clearNode(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,i){for(const{cellContainers:o}of this.renderedTemplates)o[e].style.width=`${i}px`}}TableListRenderer.TemplateId="row";function asListVirtualDelegate(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return TableListRenderer.TemplateId}}}class ColumnHeader{constructor(e,i){this.column=e,this.index=i,this._onDidLayout=new Emitter$1,this.onDidLayout=this._onDidLayout.event,this.element=$$5(".monaco-table-th",{"data-col-index":i,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Event.None}layout(e){this._onDidLayout.fire([this.index,e])}}class Table{constructor(e,i,o,a,c,d){this.virtualDelegate=o,this.domId=`table_id_${++Table.InstanceCount}`,this.disposables=new DisposableStore,this.cachedWidth=0,this.cachedHeight=0,this.domNode=append$1(i,$$5(`.monaco-table.${this.domId}`));const _=a.map((j,_e)=>new ColumnHeader(j,_e)),b={size:_.reduce((j,_e)=>j+_e.column.weight,0),views:_.map(j=>({size:j.column.weight,view:j}))};this.splitview=this.disposables.add(new SplitView(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:b})),this.splitview.el.style.height=`${o.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${o.headerRowHeight}px`;const k=new TableListRenderer(a,c,j=>this.splitview.getViewSize(j));this.list=this.disposables.add(new List(e,this.domNode,asListVirtualDelegate(o),[k],d)),Event.any(..._.map(j=>j.onDidLayout))(([j,_e])=>k.layoutColumn(j,_e),null,this.disposables),this.splitview.onDidSashReset(j=>{const _e=a.reduce((tt,it)=>tt+it.weight,0),et=a[j].weight/_e*this.cachedWidth;this.splitview.resizeView(j,et)},null,this.disposables),this.styleElement=createStyleSheet(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,i,o=[]){this.list.splice(e,i,o)}getHTMLElement(){return this.domNode}style(e){const i=[];i.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=i.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}Table.InstanceCount=0;const toggle="";Color.fromHex("#007ACC00"),Color.fromHex("#FFFFFF"),Color.fromHex("#0E639C50");localize("caseDescription","Match Case");localize("wordsDescription","Match Whole Word");localize("regexDescription","Use Regular Expression");const findInput="";localize("defaultLabel","input");var TreeMouseEventTarget;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element",s[s.Filter=3]="Filter"})(TreeMouseEventTarget||(TreeMouseEventTarget={}));class TreeError extends Error{constructor(e,i){super(`TreeError [${e}] ${i}`)}}class WeakMapper{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let i=this._map.get(e);return i||(i=this.fn(e),this._map.set(e,i)),i}}function isFilterResult(s){return typeof s=="object"&&"visibility"in s&&"data"in s}function getVisibleState(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}function isCollapsibleStateUpdate(s){return typeof s.collapsible=="boolean"}class IndexTreeModel{constructor(e,i,o,a={}){this.user=e,this.list=i,this.rootRef=[],this.eventBufferer=new EventBufferer,this._onDidChangeCollapseState=new Emitter$1,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new Emitter$1,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new Emitter$1,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Delayer(MicrotaskDelay),this.collapseByDefault=typeof a.collapseByDefault>"u"?!1:a.collapseByDefault,this.filter=a.filter,this.autoExpandSingleChildren=typeof a.autoExpandSingleChildren>"u"?!1:a.autoExpandSingleChildren,this.root={parent:void 0,element:o,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,i,o=Iterable.empty(),a={}){if(e.length===0)throw new TreeError(this.user,"Invalid tree location");a.diffIdentityProvider?this.spliceSmart(a.diffIdentityProvider,e,i,o,a):this.spliceSimple(e,i,o,a)}spliceSmart(e,i,o,a,c,d){var _;a===void 0&&(a=Iterable.empty()),d===void 0&&(d=(_=c.diffDepth)!==null&&_!==void 0?_:0);const{parentNode:b}=this.getParentNodeWithListIndex(i);if(!b.lastDiffIds)return this.spliceSimple(i,o,a,c);const k=[...a],j=i[i.length-1],_e=new LcsDiff({getElements:()=>b.lastDiffIds},{getElements:()=>[...b.children.slice(0,j),...k,...b.children.slice(j+o)].map(ot=>e.getId(ot.element).toString())}).ComputeDiff(!1);if(_e.quitEarly)return b.lastDiffIds=void 0,this.spliceSimple(i,o,k,c);const et=i.slice(0,-1),tt=(ot,nt,rt)=>{if(d>0)for(let at=0;at<rt;at++)ot--,nt--,this.spliceSmart(e,[...et,ot,0],Number.MAX_SAFE_INTEGER,k[nt].children,c,d-1)};let it=Math.min(b.children.length,j+o),st=k.length;for(const ot of _e.changes.sort((nt,rt)=>rt.originalStart-nt.originalStart))tt(it,st,it-(ot.originalStart+ot.originalLength)),it=ot.originalStart,st=ot.modifiedStart-j,this.spliceSimple([...et,it],ot.originalLength,Iterable.slice(k,st,st+ot.modifiedLength),c);tt(it,st,it)}spliceSimple(e,i,o=Iterable.empty(),{onDidCreateNode:a,onDidDeleteNode:c,diffIdentityProvider:d}){const{parentNode:_,listIndex:b,revealed:k,visible:j}=this.getParentNodeWithListIndex(e),_e=[],et=Iterable.map(o,ut=>this.createTreeNode(ut,_,_.visible?1:0,k,_e,a)),tt=e[e.length-1],it=_.children.length>0;let st=0;for(let ut=tt;ut>=0&&ut<_.children.length;ut--){const ct=_.children[ut];if(ct.visible){st=ct.visibleChildIndex;break}}const ot=[];let nt=0,rt=0;for(const ut of et)ot.push(ut),rt+=ut.renderNodeCount,ut.visible&&(ut.visibleChildIndex=st+nt++);const at=splice$1(_.children,tt,i,ot);d?_.lastDiffIds?splice$1(_.lastDiffIds,tt,i,ot.map(ut=>d.getId(ut.element).toString())):_.lastDiffIds=_.children.map(ut=>d.getId(ut.element).toString()):_.lastDiffIds=void 0;let lt=0;for(const ut of at)ut.visible&&lt++;if(lt!==0)for(let ut=tt+ot.length;ut<_.children.length;ut++){const ct=_.children[ut];ct.visible&&(ct.visibleChildIndex-=lt)}if(_.visibleChildrenCount+=nt-lt,k&&j){const ut=at.reduce((ct,ft)=>ct+(ft.visible?ft.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(_,rt-ut),this.list.splice(b,ut,_e)}if(at.length>0&&c){const ut=ct=>{c(ct),ct.children.forEach(ut)};at.forEach(ut)}this._onDidSplice.fire({insertedNodes:ot,deletedNodes:at});const gt=_.children.length>0;it!==gt&&this.setCollapsible(e.slice(0,-1),gt);let ht=_;for(;ht;){if(ht.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}ht=ht.parent}}rerender(e){if(e.length===0)throw new TreeError(this.user,"Invalid tree location");const{node:i,listIndex:o,revealed:a}=this.getTreeNodeWithListIndex(e);i.visible&&a&&this.list.splice(o,1,[i])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:i,visible:o,revealed:a}=this.getTreeNodeWithListIndex(e);return o&&a?i:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,i){const o=this.getTreeNode(e);typeof i>"u"&&(i=!o.collapsible);const a={collapsible:i};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,a))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,i,o){const a=this.getTreeNode(e);typeof i>"u"&&(i=!a.collapsed);const c={collapsed:i,recursive:o||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,c))}_setCollapseState(e,i){const{node:o,listIndex:a,revealed:c}=this.getTreeNodeWithListIndex(e),d=this._setListNodeCollapseState(o,a,c,i);if(o!==this.root&&this.autoExpandSingleChildren&&d&&!isCollapsibleStateUpdate(i)&&o.collapsible&&!o.collapsed&&!i.recursive){let _=-1;for(let b=0;b<o.children.length;b++)if(o.children[b].visible)if(_>-1){_=-1;break}else _=b;_>-1&&this._setCollapseState([...e,_],i)}return d}_setListNodeCollapseState(e,i,o,a){const c=this._setNodeCollapseState(e,a,!1);if(!o||!e.visible||!c)return c;const d=e.renderNodeCount,_=this.updateNodeAfterCollapseChange(e),b=d-(i===-1?0:1);return this.list.splice(i+1,b,_.slice(1)),c}_setNodeCollapseState(e,i,o){let a;if(e===this.root?a=!1:(isCollapsibleStateUpdate(i)?(a=e.collapsible!==i.collapsible,e.collapsible=i.collapsible):e.collapsible?(a=e.collapsed!==i.collapsed,e.collapsed=i.collapsed):a=!1,a&&this._onDidChangeCollapseState.fire({node:e,deep:o})),!isCollapsibleStateUpdate(i)&&i.recursive)for(const c of e.children)a=this._setNodeCollapseState(c,i,!0)||a;return a}expandTo(e){this.eventBufferer.bufferEvents(()=>{let i=this.getTreeNode(e);for(;i.parent;)i=i.parent,e=e.slice(0,e.length-1),i.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,i=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,i),this.refilterDelayer.cancel()}createTreeNode(e,i,o,a,c,d){const _={parent:i,element:e.element,children:[],depth:i.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},b=this._filterNode(_,o);_.visibility=b,a&&c.push(_);const k=e.children||Iterable.empty(),j=a&&b!==0&&!_.collapsed,_e=Iterable.map(k,it=>this.createTreeNode(it,_,b,j,c,d));let et=0,tt=1;for(const it of _e)_.children.push(it),tt+=it.renderNodeCount,it.visible&&(it.visibleChildIndex=et++);return _.collapsible=_.collapsible||_.children.length>0,_.visibleChildrenCount=et,_.visible=b===2?et>0:b===1,_.visible?_.collapsed||(_.renderNodeCount=tt):(_.renderNodeCount=0,a&&c.pop()),d==null||d(_),_}updateNodeAfterCollapseChange(e){const i=e.renderNodeCount,o=[];return this._updateNodeAfterCollapseChange(e,o),this._updateAncestorsRenderNodeCount(e.parent,o.length-i),o}_updateNodeAfterCollapseChange(e,i){if(e.visible===!1)return 0;if(i.push(e),e.renderNodeCount=1,!e.collapsed)for(const o of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(o,i);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const i=e.renderNodeCount,o=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,o),this._updateAncestorsRenderNodeCount(e.parent,o.length-i),o}_updateNodeAfterFilterChange(e,i,o,a=!0){let c;if(e!==this.root){if(c=this._filterNode(e,i),c===0)return e.visible=!1,e.renderNodeCount=0,!1;a&&o.push(e)}const d=o.length;e.renderNodeCount=e===this.root?0:1;let _=!1;if(!e.collapsed||c!==0){let b=0;for(const k of e.children)_=this._updateNodeAfterFilterChange(k,c,o,a&&!e.collapsed)||_,k.visible&&(k.visibleChildIndex=b++);e.visibleChildrenCount=b}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=c===2?_:c===1,e.visibility=c),e.visible?e.collapsed||(e.renderNodeCount+=o.length-d):(e.renderNodeCount=0,a&&o.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,i){if(i!==0)for(;e;)e.renderNodeCount+=i,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,i){const o=this.filter?this.filter.filter(e.element,i):1;return typeof o=="boolean"?(e.filterData=void 0,o?1:0):isFilterResult(o)?(e.filterData=o.data,getVisibleState(o.visibility)):(e.filterData=void 0,getVisibleState(o))}hasTreeNode(e,i=this.root){if(!e||e.length===0)return!0;const[o,...a]=e;return o<0||o>i.children.length?!1:this.hasTreeNode(a,i.children[o])}getTreeNode(e,i=this.root){if(!e||e.length===0)return i;const[o,...a]=e;if(o<0||o>i.children.length)throw new TreeError(this.user,"Invalid tree location");return this.getTreeNode(a,i.children[o])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:i,listIndex:o,revealed:a,visible:c}=this.getParentNodeWithListIndex(e),d=e[e.length-1];if(d<0||d>i.children.length)throw new TreeError(this.user,"Invalid tree location");const _=i.children[d];return{node:_,listIndex:o,revealed:a,visible:c&&_.visible}}getParentNodeWithListIndex(e,i=this.root,o=0,a=!0,c=!0){const[d,..._]=e;if(d<0||d>i.children.length)throw new TreeError(this.user,"Invalid tree location");for(let b=0;b<d;b++)o+=i.children[b].renderNodeCount;return a=a&&!i.collapsed,c=c&&i.visible,_.length===0?{parentNode:i,listIndex:o,revealed:a,visible:c}:this.getParentNodeWithListIndex(_,i.children[d],o+1,a,c)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const i=[];let o=e;for(;o.parent;)i.push(o.parent.children.indexOf(o)),o=o.parent;return i.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:tail2(e)[0]}getFirstElementChild(e){const i=this.getTreeNode(e);if(i.children.length!==0)return i.children[0].element}}class SetMap{constructor(){this.map=new Map}add(e,i){let o=this.map.get(e);o||(o=new Set,this.map.set(e,o)),o.add(i)}delete(e,i){const o=this.map.get(e);!o||(o.delete(i),o.size===0&&this.map.delete(e))}forEach(e,i){const o=this.map.get(e);!o||o.forEach(i)}}const tree="";globalThis&&globalThis.__awaiter;class TreeElementsDragAndDropData extends ElementsDragAndDropData{constructor(e){super(e.elements.map(i=>i.element)),this.data=e}}function asTreeDragAndDropData(s){return s instanceof ElementsDragAndDropData?new TreeElementsDragAndDropData(s):s}class TreeNodeListDragAndDrop{constructor(e,i){this.modelProvider=e,this.dnd=i,this.autoExpandDisposable=Disposable.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(o=>o.element),i)}onDragStart(e,i){var o,a;(a=(o=this.dnd).onDragStart)===null||a===void 0||a.call(o,asTreeDragAndDropData(e),i)}onDragOver(e,i,o,a,c=!0){const d=this.dnd.onDragOver(asTreeDragAndDropData(e),i&&i.element,o,a),_=this.autoExpandNode!==i;if(_&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=i),typeof i>"u")return d;if(_&&typeof d!="boolean"&&d.autoExpand&&(this.autoExpandDisposable=disposableTimeout(()=>{const et=this.modelProvider(),tt=et.getNodeLocation(i);et.isCollapsed(tt)&&et.setCollapsed(tt,!1),this.autoExpandNode=void 0},500)),typeof d=="boolean"||!d.accept||typeof d.bubble>"u"||d.feedback){if(!c){const et=typeof d=="boolean"?d:d.accept,tt=typeof d=="boolean"?void 0:d.effect;return{accept:et,effect:tt,feedback:[o]}}return d}if(d.bubble===1){const et=this.modelProvider(),tt=et.getNodeLocation(i),it=et.getParentNodeLocation(tt),st=et.getNode(it),ot=it&&et.getListIndex(it);return this.onDragOver(e,st,ot,a,!1)}const b=this.modelProvider(),k=b.getNodeLocation(i),j=b.getListIndex(k),_e=b.getListRenderCount(k);return Object.assign(Object.assign({},d),{feedback:range(j,j+_e)})}drop(e,i,o,a){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(asTreeDragAndDropData(e),i&&i.element,o,a)}onDragEnd(e){var i,o;(o=(i=this.dnd).onDragEnd)===null||o===void 0||o.call(i,e)}}function asListOptions(s,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(i){return e.identityProvider.getId(i.element)}},dnd:e.dnd&&new TreeNodeListDragAndDrop(s,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(i){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},i),{element:i.element}))},isSelectionRangeChangeEvent(i){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},i),{element:i.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(i){const o=s(),a=o.getNodeLocation(i),c=o.getParentNodeLocation(a);return o.getNode(c).visibleChildrenCount},getPosInSet(i){return i.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?i=>e.accessibilityProvider.isChecked(i.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?i=>e.accessibilityProvider.getRole(i.element):()=>"treeitem",getAriaLabel(i){return e.accessibilityProvider.getAriaLabel(i.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?i=>e.accessibilityProvider.getAriaLevel(i.element):i=>i.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(i=>e.accessibilityProvider.getActiveDescendantId(i.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(i){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i.element)}})})}class ComposedTreeDelegate{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,i){var o,a;(a=(o=this.delegate).setDynamicHeight)===null||a===void 0||a.call(o,e.element,i)}}var RenderIndentGuides;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(RenderIndentGuides||(RenderIndentGuides={}));class EventCollection{constructor(e,i=[]){this._elements=i,this.disposables=new DisposableStore,this.onDidChange=Event.forEach(e,o=>this._elements=o,this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}class TreeRenderer{constructor(e,i,o,a,c={}){var d;this.renderer=e,this.modelProvider=i,this.activeNodes=a,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=TreeRenderer.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new SetMap,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Disposable.None,this.disposables=new DisposableStore,this.templateId=e.templateId,this.updateOptions(c),Event.map(o,_=>_.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(d=e.onDidChangeTwistieState)===null||d===void 0||d.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=clamp(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const i=e.renderIndentGuides!==RenderIndentGuides.None;if(i!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=i,this.indentGuidesDisposable.dispose(),i)){const o=new DisposableStore;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,o),this.indentGuidesDisposable=o,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const i=append$1(e,$$5(".monaco-tl-row")),o=append$1(i,$$5(".monaco-tl-indent")),a=append$1(i,$$5(".monaco-tl-twistie")),c=append$1(i,$$5(".monaco-tl-contents")),d=this.renderer.renderTemplate(c);return{container:e,indent:o,twistie:a,indentGuidesDisposable:Disposable.None,templateData:d}}renderElement(e,i,o,a){typeof a=="number"&&(this.renderedNodes.set(e,{templateData:o,height:a}),this.renderedElements.set(e.element,e));const c=TreeRenderer.DefaultIndent+(e.depth-1)*this.indent;o.twistie.style.paddingLeft=`${c}px`,o.indent.style.width=`${c+this.indent-16}px`,this.renderTwistie(e,o),typeof a=="number"&&this.renderIndentGuides(e,o),this.renderer.renderElement(e,i,o.templateData,a)}disposeElement(e,i,o,a){var c,d;o.indentGuidesDisposable.dispose(),(d=(c=this.renderer).disposeElement)===null||d===void 0||d.call(c,e,i,o.templateData,a),typeof a=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const i=this.renderedElements.get(e);!i||this.onDidChangeNodeTwistieState(i)}onDidChangeNodeTwistieState(e){const i=this.renderedNodes.get(e);!i||(this.renderTwistie(e,i.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,i.templateData))}renderTwistie(e,i){i.twistie.classList.remove(...Codicon.treeItemExpanded.classNamesArray);let o=!1;this.renderer.renderTwistie&&(o=this.renderer.renderTwistie(e.element,i.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(o||i.twistie.classList.add(...Codicon.treeItemExpanded.classNamesArray),i.twistie.classList.add("collapsible"),i.twistie.classList.toggle("collapsed",e.collapsed)):i.twistie.classList.remove("collapsible","collapsed"),e.collapsible?i.container.setAttribute("aria-expanded",String(!e.collapsed)):i.container.removeAttribute("aria-expanded")}renderIndentGuides(e,i){if(clearNode(i.indent),i.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const o=new DisposableStore,a=this.modelProvider();let c=e;for(;;){const d=a.getNodeLocation(c),_=a.getParentNodeLocation(d);if(!_)break;const b=a.getNode(_),k=$$5(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(b)&&k.classList.add("active"),i.indent.childElementCount===0?i.indent.appendChild(k):i.indent.insertBefore(k,i.indent.firstElementChild),this.renderedIndentGuides.add(b,k),o.add(toDisposable(()=>this.renderedIndentGuides.delete(b,k))),c=b}i.indentGuidesDisposable=o}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const i=new Set,o=this.modelProvider();e.forEach(a=>{const c=o.getNodeLocation(a);try{const d=o.getParentNodeLocation(c);a.collapsible&&a.children.length>0&&!a.collapsed?i.add(a):d&&i.add(o.getNode(d))}catch{}}),this.activeIndentNodes.forEach(a=>{i.has(a)||this.renderedIndentGuides.forEach(a,c=>c.classList.remove("active"))}),i.forEach(a=>{this.activeIndentNodes.has(a)||this.renderedIndentGuides.forEach(a,c=>c.classList.add("active"))}),this.activeIndentNodes=i}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),dispose(this.disposables)}}TreeRenderer.DefaultIndent=8;class FindFilter{constructor(e,i,o){this.tree=e,this.keyboardNavigationLabelProvider=i,this._filter=o,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new DisposableStore,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,i){let o=1;if(this._filter){const d=this._filter.filter(e,i);if(typeof d=="boolean"?o=d?1:0:isFilterResult(d)?o=getVisibleState(d.visibility):o=d,o===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:FuzzyScore.Default,visibility:o};const a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),c=Array.isArray(a)?a:[a];for(const d of c){const _=d&&d.toString();if(typeof _>"u")return{data:FuzzyScore.Default,visibility:o};const b=fuzzyScore(this._pattern,this._lowercasePattern,0,_,_.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(b)return this._matchCount++,c.length===1?{data:b,visibility:o}:{data:{label:_,score:b},visibility:o}}return this.tree.findMode===TreeFindMode.Filter?2:{data:FuzzyScore.Default,visibility:o}}reset(){this._totalCount=0,this._matchCount=0}dispose(){dispose(this.disposables)}}var TreeFindMode;(function(s){s[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter"})(TreeFindMode||(TreeFindMode={}));class FindController{constructor(e,i,o,a,c){var d;this.tree=e,this.view=o,this.filter=a,this.contextViewProvider=c,this._pattern="",this.width=0,this._onDidChangeMode=new Emitter$1,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new Emitter$1,this._onDidChangeOpenState=new Emitter$1,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new DisposableStore,this.disposables=new DisposableStore,this._mode=(d=e.options.defaultFindMode)!==null&&d!==void 0?d:TreeFindMode.Highlight,i.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var e,i;const o=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&o?(e=this.widget)===null||e===void 0||e.showMessage({type:2,content:localize("not found","No elements found.")}):(i=this.widget)===null||i===void 0||i.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===TreeFindMode.Filter||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!FuzzyScore.isDefault(e.filterData)}style(e){var i;this.styles=e,(i=this.widget)===null||i===void 0||i.style(e)}layout(e){var i;this.width=e,(i=this.widget)===null||i===void 0||i.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function asTreeMouseEvent$1(s){let e=TreeMouseEventTarget.Unknown;return hasParentWithClass(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=TreeMouseEventTarget.Twistie:hasParentWithClass(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=TreeMouseEventTarget.Element:hasParentWithClass(s.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=TreeMouseEventTarget.Filter),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}function dfs$1(s,e){e(s),s.children.forEach(i=>dfs$1(i,e))}class Trait{constructor(e,i){this.getFirstViewElementWithTrait=e,this.identityProvider=i,this.nodes=[],this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,i){!(i!=null&&i.__forceEvent)&&equals$1(this.nodes,e)||this._set(e,!1,i)}_set(e,i,o){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!i){const a=this;this._onDidChange.fire({get elements(){return a.get()},browserEvent:o})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:i}){if(!this.identityProvider){const b=this.createNodeSet(),k=j=>b.delete(j);i.forEach(j=>dfs$1(j,k)),this.set([...b.values()]);return}const o=new Set,a=b=>o.add(this.identityProvider.getId(b.element).toString());i.forEach(b=>dfs$1(b,a));const c=new Map,d=b=>c.set(this.identityProvider.getId(b.element).toString(),b);e.forEach(b=>dfs$1(b,d));const _=[];for(const b of this.nodes){const k=this.identityProvider.getId(b.element).toString();if(!o.has(k))_.push(b);else{const _e=c.get(k);_e&&_.push(_e)}}if(this.nodes.length>0&&_.length===0){const b=this.getFirstViewElementWithTrait();b&&_.push(b)}this._set(_,!0)}createNodeSet(){const e=new Set;for(const i of this.nodes)e.add(i);return e}}class TreeNodeListMouseController extends MouseController{constructor(e,i){super(e),this.tree=i}onViewPointer(e){if(isButton(e.browserEvent.target)||isInputElement(e.browserEvent.target)||isMonacoEditor(e.browserEvent.target))return;const i=e.element;if(!i)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const o=e.browserEvent.target,a=o.classList.contains("monaco-tl-twistie")||o.classList.contains("monaco-icon-label")&&o.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let c=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?c=this.tree.expandOnlyOnTwistieClick(i.element):c=!!this.tree.expandOnlyOnTwistieClick,c&&!a&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(i.collapsible){const d=this.tree.model,_=d.getNodeLocation(i),b=e.browserEvent.altKey;if(this.tree.setFocus([_]),d.setCollapsed(_,void 0,b),c&&a)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class TreeNodeList extends List{constructor(e,i,o,a,c,d,_,b){super(e,i,o,a,b),this.focusTrait=c,this.selectionTrait=d,this.anchorTrait=_}createMouseController(e){return new TreeNodeListMouseController(this,e.tree)}splice(e,i,o=[]){if(super.splice(e,i,o),o.length===0)return;const a=[],c=[];let d;o.forEach((_,b)=>{this.focusTrait.has(_)&&a.push(e+b),this.selectionTrait.has(_)&&c.push(e+b),this.anchorTrait.has(_)&&(d=e+b)}),a.length>0&&super.setFocus(distinct([...super.getFocus(),...a])),c.length>0&&super.setSelection(distinct([...super.getSelection(),...c])),typeof d=="number"&&super.setAnchor(d)}setFocus(e,i,o=!1){super.setFocus(e,i),o||this.focusTrait.set(e.map(a=>this.element(a)),i)}setSelection(e,i,o=!1){super.setSelection(e,i),o||this.selectionTrait.set(e.map(a=>this.element(a)),i)}setAnchor(e,i=!1){super.setAnchor(e),i||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class AbstractTree{constructor(e,i,o,a,c={}){var d;this._user=e,this._options=c,this.eventBufferer=new EventBufferer,this.onDidChangeFindOpenState=Event.None,this.disposables=new DisposableStore,this._onWillRefilter=new Emitter$1,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new Emitter$1;const _=new ComposedTreeDelegate(o),b=new Relay,k=new Relay,j=this.disposables.add(new EventCollection(k.event));this.renderers=a.map(tt=>new TreeRenderer(tt,()=>this.model,b.event,j,c));for(const tt of this.renderers)this.disposables.add(tt);let _e;c.keyboardNavigationLabelProvider&&(_e=new FindFilter(this,c.keyboardNavigationLabelProvider,c.filter),c=Object.assign(Object.assign({},c),{filter:_e}),this.disposables.add(_e)),this.focus=new Trait(()=>this.view.getFocusedElements()[0],c.identityProvider),this.selection=new Trait(()=>this.view.getSelectedElements()[0],c.identityProvider),this.anchor=new Trait(()=>this.view.getAnchorElement(),c.identityProvider),this.view=new TreeNodeList(e,i,_,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},asListOptions(()=>this.model,c)),{tree:this})),this.model=this.createModel(e,this.view,c),b.input=this.model.onDidChangeCollapseState;const et=Event.forEach(this.model.onDidSplice,tt=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(tt),this.selection.onDidModelSplice(tt)})},this.disposables);if(et(()=>null,null,this.disposables),k.input=Event.chain(Event.any(et,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const tt=new Set;for(const it of this.focus.getNodes())tt.add(it);for(const it of this.selection.getNodes())tt.add(it);return[...tt.values()]}).event,c.keyboardSupport!==!1){const tt=Event.chain(this.view.onKeyDown).filter(it=>!isInputElement(it.target)).map(it=>new StandardKeyboardEvent(it));tt.filter(it=>it.keyCode===15).on(this.onLeftArrow,this,this.disposables),tt.filter(it=>it.keyCode===17).on(this.onRightArrow,this,this.disposables),tt.filter(it=>it.keyCode===10).on(this.onSpace,this,this.disposables)}((d=c.findWidgetEnabled)!==null&&d!==void 0?d:!0)&&c.keyboardNavigationLabelProvider&&c.contextViewProvider?(this.findController=new FindController(this,this.model,this.view,_e,c.contextViewProvider),this.focusNavigationFilter=tt=>this.findController.shouldAllowFocus(tt),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=Event.None,this.styleElement=createStyleSheet(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===RenderIndentGuides.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Event.filter(Event.map(this.view.onMouseDblClick,asTreeMouseEvent$1),e=>e.target!==TreeMouseEventTarget.Filter)}get onPointer(){return Event.map(this.view.onPointer,asTreeMouseEvent$1)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Event.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,i;return(i=(e=this.findController)===null||e===void 0?void 0:e.mode)!==null&&i!==void 0?i:TreeFindMode.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===RenderIndentGuides.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,i){var o;this.view.layout(e,i),isNumber$1(i)&&((o=this.findController)===null||o===void 0||o.layout(i))}style(e){var i;const o=`.${this.view.domId}`,a=[];e.treeIndentGuidesStroke&&(a.push(`.monaco-list${o}:hover .monaco-tl-indent > .indent-guide, .monaco-list${o}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),a.push(`.monaco-list${o} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=a.join(`
`),(i=this.findController)===null||i===void 0||i.style(e),this.view.style(e)}getParentElement(e){const i=this.model.getParentNodeLocation(e);return this.model.getNode(i).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,i=!1){return this.model.setCollapsed(e,!0,i)}expand(e,i=!1){return this.model.setCollapsed(e,!1,i)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,i){return this.model.setCollapsible(e,i)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,i){const o=e.map(c=>this.model.getNode(c));this.selection.set(o,i);const a=e.map(c=>this.model.getListIndex(c)).filter(c=>c>-1);this.view.setSelection(a,i,!0)}getSelection(){return this.selection.get()}setFocus(e,i){const o=e.map(c=>this.model.getNode(c));this.focus.set(o,i);const a=e.map(c=>this.model.getListIndex(c)).filter(c=>c>-1);this.view.setFocus(a,i,!0)}getFocus(){return this.focus.get()}reveal(e,i){this.model.expandTo(e);const o=this.model.getListIndex(e);o!==-1&&this.view.reveal(o,i)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const o=i[0],a=this.model.getNodeLocation(o);if(!this.model.setCollapsed(a,!0)){const d=this.model.getParentNodeLocation(a);if(!d)return;const _=this.model.getListIndex(d);this.view.reveal(_),this.view.setFocus([_])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const o=i[0],a=this.model.getNodeLocation(o);if(!this.model.setCollapsed(a,!1)){if(!o.children.some(b=>b.visible))return;const[d]=this.view.getFocus(),_=d+1;this.view.reveal(_),this.view.setFocus([_])}}onSpace(e){e.preventDefault(),e.stopPropagation();const i=this.view.getFocusedElements();if(i.length===0)return;const o=i[0],a=this.model.getNodeLocation(o),c=e.browserEvent.altKey;this.model.setCollapsed(a,void 0,c)}dispose(){dispose(this.disposables),this.view.dispose()}}class ObjectTreeModel{constructor(e,i,o={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new IndexTreeModel(e,i,null,o),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,o.sorter&&(this.sorter={compare(a,c){return o.sorter.compare(a.element,c.element)}}),this.identityProvider=o.identityProvider}setChildren(e,i=Iterable.empty(),o={}){const a=this.getElementLocation(e);this._setChildren(a,this.preserveCollapseState(i),o)}_setChildren(e,i=Iterable.empty(),o){const a=new Set,c=new Set,d=b=>{var k;if(b.element===null)return;const j=b;if(a.add(j.element),this.nodes.set(j.element,j),this.identityProvider){const _e=this.identityProvider.getId(j.element).toString();c.add(_e),this.nodesByIdentity.set(_e,j)}(k=o.onDidCreateNode)===null||k===void 0||k.call(o,j)},_=b=>{var k;if(b.element===null)return;const j=b;if(a.has(j.element)||this.nodes.delete(j.element),this.identityProvider){const _e=this.identityProvider.getId(j.element).toString();c.has(_e)||this.nodesByIdentity.delete(_e)}(k=o.onDidDeleteNode)===null||k===void 0||k.call(o,j)};this.model.splice([...e,0],Number.MAX_VALUE,i,Object.assign(Object.assign({},o),{onDidCreateNode:d,onDidDeleteNode:_}))}preserveCollapseState(e=Iterable.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Iterable.map(e,i=>{let o=this.nodes.get(i.element);if(!o&&this.identityProvider){const d=this.identityProvider.getId(i.element).toString();o=this.nodesByIdentity.get(d)}if(!o)return Object.assign(Object.assign({},i),{children:this.preserveCollapseState(i.children)});const a=typeof i.collapsible=="boolean"?i.collapsible:o.collapsible,c=typeof i.collapsed<"u"?i.collapsed:o.collapsed;return Object.assign(Object.assign({},i),{collapsible:a,collapsed:c,children:this.preserveCollapseState(i.children)})})}rerender(e){const i=this.getElementLocation(e);this.model.rerender(i)}getFirstElementChild(e=null){const i=this.getElementLocation(e);return this.model.getFirstElementChild(i)}has(e){return this.nodes.has(e)}getListIndex(e){const i=this.getElementLocation(e);return this.model.getListIndex(i)}getListRenderCount(e){const i=this.getElementLocation(e);return this.model.getListRenderCount(i)}isCollapsible(e){const i=this.getElementLocation(e);return this.model.isCollapsible(i)}setCollapsible(e,i){const o=this.getElementLocation(e);return this.model.setCollapsible(o,i)}isCollapsed(e){const i=this.getElementLocation(e);return this.model.isCollapsed(i)}setCollapsed(e,i,o){const a=this.getElementLocation(e);return this.model.setCollapsed(a,i,o)}expandTo(e){const i=this.getElementLocation(e);this.model.expandTo(i)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const i=this.nodes.get(e);if(!i)throw new TreeError(this.user,`Tree element not found: ${e}`);return i}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new TreeError(this.user,"Invalid getParentNodeLocation call");const i=this.nodes.get(e);if(!i)throw new TreeError(this.user,`Tree element not found: ${e}`);const o=this.model.getNodeLocation(i),a=this.model.getParentNodeLocation(o);return this.model.getNode(a).element}getElementLocation(e){if(e===null)return[];const i=this.nodes.get(e);if(!i)throw new TreeError(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(i)}}function noCompress(s){const e=[s.element],i=s.incompressible||!1;return{element:{elements:e,incompressible:i},children:Iterable.map(Iterable.from(s.children),noCompress),collapsible:s.collapsible,collapsed:s.collapsed}}function compress(s){const e=[s.element],i=s.incompressible||!1;let o,a;for(;[a,o]=Iterable.consume(Iterable.from(s.children),2),!(a.length!==1||a[0].incompressible);)s=a[0],e.push(s.element);return{element:{elements:e,incompressible:i},children:Iterable.map(Iterable.concat(a,o),compress),collapsible:s.collapsible,collapsed:s.collapsed}}function _decompress(s,e=0){let i;return e<s.element.elements.length-1?i=[_decompress(s,e+1)]:i=Iterable.map(Iterable.from(s.children),o=>_decompress(o,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:i,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:i,collapsible:s.collapsible,collapsed:s.collapsed}}function decompress(s){return _decompress(s,0)}function splice(s,e,i){return s.element===e?Object.assign(Object.assign({},s),{children:i}):Object.assign(Object.assign({},s),{children:Iterable.map(Iterable.from(s.children),o=>splice(o,e,i))})}const wrapIdentityProvider=s=>({getId(e){return e.elements.map(i=>s.getId(i).toString()).join("\0")}});class CompressedObjectTreeModel{constructor(e,i,o={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new ObjectTreeModel(e,i,o),this.enabled=typeof o.compressionEnabled>"u"?!0:o.compressionEnabled,this.identityProvider=o.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,i=Iterable.empty(),o){const a=o.diffIdentityProvider&&wrapIdentityProvider(o.diffIdentityProvider);if(e===null){const tt=Iterable.map(i,this.enabled?compress:noCompress);this._setChildren(null,tt,{diffIdentityProvider:a,diffDepth:1/0});return}const c=this.nodes.get(e);if(!c)throw new Error("Unknown compressed tree node");const d=this.model.getNode(c),_=this.model.getParentNodeLocation(c),b=this.model.getNode(_),k=decompress(d),j=splice(k,e,i),_e=(this.enabled?compress:noCompress)(j),et=b.children.map(tt=>tt===d?_e:tt);this._setChildren(b.element,et,{diffIdentityProvider:a,diffDepth:d.depth-b.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const o=this.model.getNode().children,a=Iterable.map(o,decompress),c=Iterable.map(a,e?compress:noCompress);this._setChildren(null,c,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,i,o){const a=new Set,c=_=>{for(const b of _.element.elements)a.add(b),this.nodes.set(b,_.element)},d=_=>{for(const b of _.element.elements)a.has(b)||this.nodes.delete(b)};this.model.setChildren(e,i,Object.assign(Object.assign({},o),{onDidCreateNode:c,onDidDeleteNode:d}))}has(e){return this.nodes.has(e)}getListIndex(e){const i=this.getCompressedNode(e);return this.model.getListIndex(i)}getListRenderCount(e){const i=this.getCompressedNode(e);return this.model.getListRenderCount(i)}getNode(e){if(typeof e>"u")return this.model.getNode();const i=this.getCompressedNode(e);return this.model.getNode(i)}getNodeLocation(e){const i=this.model.getNodeLocation(e);return i===null?null:i.elements[i.elements.length-1]}getParentNodeLocation(e){const i=this.getCompressedNode(e),o=this.model.getParentNodeLocation(i);return o===null?null:o.elements[o.elements.length-1]}getFirstElementChild(e){const i=this.getCompressedNode(e);return this.model.getFirstElementChild(i)}isCollapsible(e){const i=this.getCompressedNode(e);return this.model.isCollapsible(i)}setCollapsible(e,i){const o=this.getCompressedNode(e);return this.model.setCollapsible(o,i)}isCollapsed(e){const i=this.getCompressedNode(e);return this.model.isCollapsed(i)}setCollapsed(e,i,o){const a=this.getCompressedNode(e);return this.model.setCollapsed(a,i,o)}expandTo(e){const i=this.getCompressedNode(e);this.model.expandTo(i)}rerender(e){const i=this.getCompressedNode(e);this.model.rerender(i)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const i=this.nodes.get(e);if(!i)throw new TreeError(this.user,`Tree element not found: ${e}`);return i}}const DefaultElementMapper=s=>s[s.length-1];class CompressedTreeNodeWrapper{constructor(e,i){this.unwrapper=e,this.node=i}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new CompressedTreeNodeWrapper(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function mapList(s,e){return{splice(i,o,a){e.splice(i,o,a.map(c=>s.map(c)))},updateElementHeight(i,o){e.updateElementHeight(i,o)}}}function mapOptions(s,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(i){return e.identityProvider.getId(s(i))}},sorter:e.sorter&&{compare(i,o){return e.sorter.compare(i.elements[0],o.elements[0])}},filter:e.filter&&{filter(i,o){return e.filter.filter(s(i),o)}}})}class CompressibleObjectTreeModel{constructor(e,i,o={}){this.rootRef=null,this.elementMapper=o.elementMapper||DefaultElementMapper;const a=c=>this.elementMapper(c.elements);this.nodeMapper=new WeakMapper(c=>new CompressedTreeNodeWrapper(a,c)),this.model=new CompressedObjectTreeModel(e,mapList(this.nodeMapper,i),mapOptions(a,o))}get onDidSplice(){return Event.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:i})=>({insertedNodes:e.map(o=>this.nodeMapper.map(o)),deletedNodes:i.map(o=>this.nodeMapper.map(o))}))}get onDidChangeCollapseState(){return Event.map(this.model.onDidChangeCollapseState,({node:e,deep:i})=>({node:this.nodeMapper.map(e),deep:i}))}get onDidChangeRenderNodeCount(){return Event.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,i=Iterable.empty(),o={}){this.model.setChildren(e,i,o)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const i=this.model.getFirstElementChild(e);return i===null||typeof i>"u"?i:this.elementMapper(i.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,i){return this.model.setCollapsible(e,i)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,i,o){return this.model.setCollapsed(e,i,o)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var __decorate$a=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c};class ObjectTree extends AbstractTree{constructor(e,i,o,a,c={}){super(e,i,o,a,c),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,i=Iterable.empty(),o){this.model.setChildren(e,i,o)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,i,o){return new ObjectTreeModel(e,i,o)}}class CompressibleRenderer{constructor(e,i){this._compressedTreeNodeProvider=e,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,i,o,a){const c=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);c.element.elements.length===1?(o.compressedTreeNode=void 0,this.renderer.renderElement(e,i,o.data,a)):(o.compressedTreeNode=c,this.renderer.renderCompressedElements(c,i,o.data,a))}disposeElement(e,i,o,a){var c,d,_,b;o.compressedTreeNode?(d=(c=this.renderer).disposeCompressedElements)===null||d===void 0||d.call(c,o.compressedTreeNode,i,o.data,a):(b=(_=this.renderer).disposeElement)===null||b===void 0||b.call(_,e,i,o.data,a)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,i){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,i):!1}}__decorate$a([memoize],CompressibleRenderer.prototype,"compressedTreeNodeProvider",null);function asObjectTreeOptions$1(s,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let o;try{o=s().getCompressedTreeNode(i)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return o.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(o.element.elements)}}})}class CompressibleObjectTree extends ObjectTree{constructor(e,i,o,a,c={}){const d=()=>this,_=a.map(b=>new CompressibleRenderer(d,b));super(e,i,o,_,asObjectTreeOptions$1(d,c))}setChildren(e,i=Iterable.empty(),o){this.model.setChildren(e,i,o)}createModel(e,i,o){return new CompressibleObjectTreeModel(e,i,o)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function createAsyncDataTreeNode(s){return Object.assign(Object.assign({},s),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function isAncestor(s,e){return e.parent?e.parent===s?!0:isAncestor(s,e.parent):!1}function intersects(s,e){return s===e||isAncestor(s,e)||isAncestor(e,s)}class AsyncDataTreeNodeWrapper{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new AsyncDataTreeNodeWrapper(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class AsyncDataTreeRenderer{constructor(e,i,o){this.renderer=e,this.nodeMapper=i,this.onDidChangeTwistieState=o,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,i,o,a){this.renderer.renderElement(this.nodeMapper.map(e),i,o.templateData,a)}renderTwistie(e,i){return e.slow?(i.classList.add(...Codicon.treeItemLoading.classNamesArray),!0):(i.classList.remove(...Codicon.treeItemLoading.classNamesArray),!1)}disposeElement(e,i,o,a){var c,d;(d=(c=this.renderer).disposeElement)===null||d===void 0||d.call(c,this.nodeMapper.map(e),i,o.templateData,a)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function asTreeEvent(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}function asTreeMouseEvent(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}class AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData{constructor(e){super(e.elements.map(i=>i.element)),this.data=e}}function asAsyncDataTreeDragAndDropData(s){return s instanceof ElementsDragAndDropData?new AsyncDataTreeElementsDragAndDropData(s):s}class AsyncDataTreeNodeListDragAndDrop{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,i){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(o=>o.element),i)}onDragStart(e,i){var o,a;(a=(o=this.dnd).onDragStart)===null||a===void 0||a.call(o,asAsyncDataTreeDragAndDropData(e),i)}onDragOver(e,i,o,a,c=!0){return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(e),i&&i.element,o,a)}drop(e,i,o,a){this.dnd.drop(asAsyncDataTreeDragAndDropData(e),i&&i.element,o,a)}onDragEnd(e){var i,o;(o=(i=this.dnd).onDragEnd)===null||o===void 0||o.call(i,e)}}function asObjectTreeOptions(s){return s&&Object.assign(Object.assign({},s),{collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new AsyncDataTreeNodeListDragAndDrop(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:s.accessibilityProvider&&Object.assign(Object.assign({},s.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>{var i;return!!(!((i=s.accessibilityProvider)===null||i===void 0)&&i.isChecked(e.element))}:void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))}),filter:s.filter&&{filter(e,i){return s.filter.filter(e.element,i)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},s.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:e=>s.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:s.additionalScrollHeight})}function dfs(s,e){e(s),s.children.forEach(i=>dfs(i,e))}class AsyncDataTree{constructor(e,i,o,a,c,d={}){this.user=e,this.dataSource=c,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new Emitter$1,this._onDidChangeNodeSlowState=new Emitter$1,this.nodeMapper=new WeakMapper(_=>new AsyncDataTreeNodeWrapper(_)),this.disposables=new DisposableStore,this.identityProvider=d.identityProvider,this.autoExpandSingleChildren=typeof d.autoExpandSingleChildren>"u"?!1:d.autoExpandSingleChildren,this.sorter=d.sorter,this.collapseByDefault=d.collapseByDefault,this.tree=this.createTree(e,i,o,a,d),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=createAsyncDataTreeNode({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Event.map(this.tree.onDidChangeFocus,asTreeEvent)}get onDidChangeSelection(){return Event.map(this.tree.onDidChangeSelection,asTreeEvent)}get onMouseDblClick(){return Event.map(this.tree.onMouseDblClick,asTreeMouseEvent)}get onPointer(){return Event.map(this.tree.onPointer,asTreeMouseEvent)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,i,o,a,c){const d=new ComposedTreeDelegate(o),_=a.map(k=>new AsyncDataTreeRenderer(k,this.nodeMapper,this._onDidChangeNodeSlowState.event)),b=asObjectTreeOptions(c)||{};return new ObjectTree(e,i,d,_,b)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,i){this.tree.layout(e,i)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,i){return __awaiter$5(this,void 0,void 0,function*(){this.refreshPromises.forEach(a=>a.cancel()),this.refreshPromises.clear(),this.root.element=e;const o=i&&{viewState:i,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,o),o&&(this.tree.setFocus(o.focus),this.tree.setSelection(o.selection)),i&&typeof i.scrollTop=="number"&&(this.scrollTop=i.scrollTop)})}_updateChildren(e=this.root.element,i=!0,o=!1,a,c){return __awaiter$5(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Event.toPromise(this._onDidRender.event));const d=this.getDataNode(e);if(yield this.refreshAndRenderNode(d,i,a,c),o)try{this.tree.rerender(d)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const i=this.getDataNode(e);this.tree.rerender(i)}getNode(e=this.root.element){const i=this.getDataNode(e),o=this.tree.getNode(i===this.root?null:i);return this.nodeMapper.map(o)}collapse(e,i=!1){const o=this.getDataNode(e);return this.tree.collapse(o===this.root?null:o,i)}expand(e,i=!1){return __awaiter$5(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Event.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(this.tree.hasElement(o)&&!this.tree.isCollapsible(o)||(o.refreshPromise&&(yield this.root.refreshPromise,yield Event.toPromise(this._onDidRender.event)),o!==this.root&&!o.refreshPromise&&!this.tree.isCollapsed(o)))return!1;const a=this.tree.expand(o===this.root?null:o,i);return o.refreshPromise&&(yield this.root.refreshPromise,yield Event.toPromise(this._onDidRender.event)),a})}setSelection(e,i){const o=e.map(a=>this.getDataNode(a));this.tree.setSelection(o,i)}getSelection(){return this.tree.getSelection().map(i=>i.element)}setFocus(e,i){const o=e.map(a=>this.getDataNode(a));this.tree.setFocus(o,i)}getFocus(){return this.tree.getFocus().map(i=>i.element)}reveal(e,i){this.tree.reveal(this.getDataNode(e),i)}getParentElement(e){const i=this.tree.getParentElement(this.getDataNode(e));return i&&i.element}getFirstElementChild(e=this.root.element){const i=this.getDataNode(e),o=this.tree.getFirstElementChild(i===this.root?null:i);return o&&o.element}getDataNode(e){const i=this.nodes.get(e===this.root.element?null:e);if(!i)throw new TreeError(this.user,`Data tree node not found: ${e}`);return i}refreshAndRenderNode(e,i,o,a){return __awaiter$5(this,void 0,void 0,function*(){yield this.refreshNode(e,i,o),this.render(e,o,a)})}refreshNode(e,i,o){return __awaiter$5(this,void 0,void 0,function*(){let a;if(this.subTreeRefreshPromises.forEach((c,d)=>{!a&&intersects(d,e)&&(a=c.then(()=>this.refreshNode(e,i,o)))}),a)return a;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0;return}return this.doRefreshSubTree(e,i,o)})}doRefreshSubTree(e,i,o){return __awaiter$5(this,void 0,void 0,function*(){let a;e.refreshPromise=new Promise(c=>a=c),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const c=yield this.doRefreshNode(e,i,o);e.stale=!1,yield Promises.settled(c.map(d=>this.doRefreshSubTree(d,i,o)))}finally{a()}})}doRefreshNode(e,i,o){return __awaiter$5(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let a;if(!e.hasChildren)a=Promise.resolve(Iterable.empty());else{const c=this.doGetChildren(e);if(isIterable(c))a=Promise.resolve(c);else{const d=timeout(800);d.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},_=>null),a=c.finally(()=>d.cancel())}}try{const c=yield a;return this.setChildren(e,c,i,o)}catch(c){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),isCancellationError(c))return[];throw c}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let i=this.refreshPromises.get(e);if(i)return i;const o=this.dataSource.getChildren(e.element);return isIterable(o)?this.processChildren(o):(i=createCancelablePromise(()=>__awaiter$5(this,void 0,void 0,function*(){return this.processChildren(yield o)})),this.refreshPromises.set(e,i),i.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:i}){e.element!==null&&!e.collapsed&&e.element.stale&&(i?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(onUnexpectedError))}setChildren(e,i,o,a){const c=[...i];if(e.children.length===0&&c.length===0)return[];const d=new Map,_=new Map;for(const j of e.children)if(d.set(j.element,j),this.identityProvider){const _e=this.tree.isCollapsed(j);_.set(j.id,{node:j,collapsed:_e})}const b=[],k=c.map(j=>{const _e=!!this.dataSource.hasChildren(j);if(!this.identityProvider){const st=createAsyncDataTreeNode({element:j,parent:e,hasChildren:_e});return _e&&this.collapseByDefault&&!this.collapseByDefault(j)&&(st.collapsedByDefault=!1,b.push(st)),st}const et=this.identityProvider.getId(j).toString(),tt=_.get(et);if(tt){const st=tt.node;return d.delete(st.element),this.nodes.delete(st.element),this.nodes.set(j,st),st.element=j,st.hasChildren=_e,o?tt.collapsed?(st.children.forEach(ot=>dfs(ot,nt=>this.nodes.delete(nt.element))),st.children.splice(0,st.children.length),st.stale=!0):b.push(st):_e&&this.collapseByDefault&&!this.collapseByDefault(j)&&(st.collapsedByDefault=!1,b.push(st)),st}const it=createAsyncDataTreeNode({element:j,parent:e,id:et,hasChildren:_e});return a&&a.viewState.focus&&a.viewState.focus.indexOf(et)>-1&&a.focus.push(it),a&&a.viewState.selection&&a.viewState.selection.indexOf(et)>-1&&a.selection.push(it),a&&a.viewState.expanded&&a.viewState.expanded.indexOf(et)>-1?b.push(it):_e&&this.collapseByDefault&&!this.collapseByDefault(j)&&(it.collapsedByDefault=!1,b.push(it)),it});for(const j of d.values())dfs(j,_e=>this.nodes.delete(_e.element));for(const j of k)this.nodes.set(j.element,j);return e.children.splice(0,e.children.length,...k),e!==this.root&&this.autoExpandSingleChildren&&k.length===1&&b.length===0&&(k[0].collapsedByDefault=!1,b.push(k[0])),b}render(e,i,o){const a=e.children.map(d=>this.asTreeElement(d,i)),c=o&&Object.assign(Object.assign({},o),{diffIdentityProvider:o.diffIdentityProvider&&{getId(d){return o.diffIdentityProvider.getId(d.element)}}});this.tree.setChildren(e===this.root?null:e,a,c),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,i){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let o;return i&&i.viewState.expanded&&e.id&&i.viewState.expanded.indexOf(e.id)>-1?o=!1:o=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Iterable.map(e.children,a=>this.asTreeElement(a,i)):[],collapsible:e.hasChildren,collapsed:o}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class CompressibleAsyncDataTreeNodeWrapper{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new CompressibleAsyncDataTreeNodeWrapper(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class CompressibleAsyncDataTreeRenderer{constructor(e,i,o,a){this.renderer=e,this.nodeMapper=i,this.compressibleNodeMapperProvider=o,this.onDidChangeTwistieState=a,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,i,o,a){this.renderer.renderElement(this.nodeMapper.map(e),i,o.templateData,a)}renderCompressedElements(e,i,o,a){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),i,o.templateData,a)}renderTwistie(e,i){return e.slow?(i.classList.add(...Codicon.treeItemLoading.classNamesArray),!0):(i.classList.remove(...Codicon.treeItemLoading.classNamesArray),!1)}disposeElement(e,i,o,a){var c,d;(d=(c=this.renderer).disposeElement)===null||d===void 0||d.call(c,this.nodeMapper.map(e),i,o.templateData,a)}disposeCompressedElements(e,i,o,a){var c,d;(d=(c=this.renderer).disposeCompressedElements)===null||d===void 0||d.call(c,this.compressibleNodeMapperProvider().map(e),i,o.templateData,a)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=dispose(this.disposables)}}function asCompressibleObjectTreeOptions(s){const e=s&&asObjectTreeOptions(s);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(i){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.map(o=>o.element))}})})}class CompressibleAsyncDataTree extends AsyncDataTree{constructor(e,i,o,a,c,d,_={}){super(e,i,o,c,d,_),this.compressionDelegate=a,this.compressibleNodeMapper=new WeakMapper(b=>new CompressibleAsyncDataTreeNodeWrapper(b)),this.filter=_.filter}createTree(e,i,o,a,c){const d=new ComposedTreeDelegate(o),_=a.map(k=>new CompressibleAsyncDataTreeRenderer(k,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),b=asCompressibleObjectTreeOptions(c)||{};return new CompressibleObjectTree(e,i,d,_,b)}asTreeElement(e,i){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,i))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,i){if(!this.identityProvider)return super.render(e,i);const o=et=>this.identityProvider.getId(et).toString(),a=et=>{const tt=new Set;for(const it of et){const st=this.tree.getCompressedTreeNode(it===this.root?null:it);if(!!st.element)for(const ot of st.element.elements)tt.add(o(ot.element))}return tt},c=a(this.tree.getSelection()),d=a(this.tree.getFocus());super.render(e,i);const _=this.getSelection();let b=!1;const k=this.getFocus();let j=!1;const _e=et=>{const tt=et.element;if(tt)for(let it=0;it<tt.elements.length;it++){const st=o(tt.elements[it].element),ot=tt.elements[tt.elements.length-1].element;c.has(st)&&_.indexOf(ot)===-1&&(_.push(ot),b=!0),d.has(st)&&k.indexOf(ot)===-1&&(k.push(ot),j=!0)}et.children.forEach(_e)};_e(this.tree.getCompressedTreeNode(e===this.root?null:e)),b&&this.setSelection(_),j&&this.setFocus(k)}processChildren(e){return this.filter&&(e=Iterable.filter(e,i=>{const o=this.filter.filter(i,1),a=getVisibility(o);if(a===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return a===1})),super.processChildren(e)}}function getVisibility(s){return typeof s=="boolean"?s?1:0:isFilterResult(s)?getVisibleState(s.visibility):getVisibleState(s)}class DataTree extends AbstractTree{constructor(e,i,o,a,c,d={}){super(e,i,o,a,d),this.user=e,this.dataSource=c,this.identityProvider=d.identityProvider}createModel(e,i,o){return new ObjectTreeModel(e,i,o)}}new RawContextKey("isMac",isMacintosh,localize("isMac","Whether the operating system is macOS"));new RawContextKey("isLinux",isLinux,localize("isLinux","Whether the operating system is Linux"));new RawContextKey("isWindows",isWindows,localize("isWindows","Whether the operating system is Windows"));new RawContextKey("isWeb",isWeb,localize("isWeb","Whether the platform is a web browser"));new RawContextKey("isMacNative",isMacintosh&&!isWeb,localize("isMacNative","Whether the operating system is macOS on a non-browser platform"));new RawContextKey("isIOS",isIOS,localize("isIOS","Whether the operating system is iOS"));new RawContextKey("isDevelopment",!1,!0);new RawContextKey("productQualityType","",localize("productQualityType","Quality type of VS Code"));const InputFocusedContextKey="inputFocus";new RawContextKey(InputFocusedContextKey,!1,localize("inputFocus","Whether keyboard focus is inside an input box"));var __decorate$9=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$9=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};const IListService=createDecorator("listService");let ListService=class{constructor(e){this._themeService=e,this.disposables=new DisposableStore,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var i,o;e!==this._lastFocusedWidget&&((i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(o=this._lastFocusedWidget)===null||o===void 0||o.getHTMLElement().classList.add("last-focused"))}register(e,i){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const a=new DefaultStyleController(createStyleSheet(),"");this.disposables.add(attachListStyler(a,this._themeService))}if(this.lists.some(a=>a.widget===e))throw new Error("Cannot register the same widget multiple times");const o={widget:e,extraContextKeys:i};return this.lists.push(o),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),combinedDisposable(e.onDidFocus(()=>this.setLastFocusedList(e)),toDisposable(()=>this.lists.splice(this.lists.indexOf(o),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(a=>a!==o),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};ListService=__decorate$9([__param$9(0,IThemeService)],ListService);const RawWorkbenchListFocusContextKey=new RawContextKey("listFocus",!0),WorkbenchListSupportsMultiSelectContextKey=new RawContextKey("listSupportsMultiselect",!0);ContextKeyExpr.and(RawWorkbenchListFocusContextKey,ContextKeyExpr.not(InputFocusedContextKey));const WorkbenchListHasSelectionOrFocus=new RawContextKey("listHasSelectionOrFocus",!1),WorkbenchListDoubleSelection=new RawContextKey("listDoubleSelection",!1),WorkbenchListMultiSelection=new RawContextKey("listMultiSelection",!1),WorkbenchListSelectionNavigation=new RawContextKey("listSelectionNavigation",!1),WorkbenchListSupportsFind=new RawContextKey("listSupportsFind",!0),WorkbenchTreeElementCanCollapse=new RawContextKey("treeElementCanCollapse",!1),WorkbenchTreeElementHasParent=new RawContextKey("treeElementHasParent",!1),WorkbenchTreeElementCanExpand=new RawContextKey("treeElementCanExpand",!1),WorkbenchTreeElementHasChild=new RawContextKey("treeElementHasChild",!1),WorkbenchTreeFindOpen=new RawContextKey("treeFindOpen",!1),WorkbenchListTypeNavigationModeKey="listTypeNavigationMode",WorkbenchListAutomaticKeyboardNavigationLegacyKey="listAutomaticKeyboardNavigation";function createScopedContextKeyService(s,e){const i=s.createScoped(e.getHTMLElement());return RawWorkbenchListFocusContextKey.bindTo(i),i}const multiSelectModifierSettingKey="workbench.list.multiSelectModifier",openModeSettingKey="workbench.list.openMode",horizontalScrollingKey="workbench.list.horizontalScrolling",defaultFindModeSettingKey="workbench.list.defaultFindMode",keyboardNavigationSettingKey="workbench.list.keyboardNavigation",treeIndentKey="workbench.tree.indent",treeRenderIndentGuidesKey="workbench.tree.renderIndentGuides",listSmoothScrolling="workbench.list.smoothScrolling",mouseWheelScrollSensitivityKey="workbench.list.mouseWheelScrollSensitivity",fastScrollSensitivityKey="workbench.list.fastScrollSensitivity",treeExpandMode="workbench.tree.expandMode";function useAltAsMultipleSelectionModifier(s){return s.getValue(multiSelectModifierSettingKey)==="alt"}class MultipleSelectionController extends Disposable{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(multiSelectModifierSettingKey)&&(this.useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return isSelectionRangeChangeEvent(e)}}function toWorkbenchListOptions(s,e){var i;const o=s.get(IConfigurationService),a=s.get(IKeybindingService),c=new DisposableStore;return[Object.assign(Object.assign({},e),{keyboardNavigationDelegate:{mightProducePrintableCharacter(_){return a.mightProducePrintableCharacter(_)}},smoothScrolling:Boolean(o.getValue(listSmoothScrolling)),mouseWheelScrollSensitivity:o.getValue(mouseWheelScrollSensitivityKey),fastScrollSensitivity:o.getValue(fastScrollSensitivityKey),multipleSelectionController:(i=e.multipleSelectionController)!==null&&i!==void 0?i:c.add(new MultipleSelectionController(o)),keyboardNavigationEventFilter:createKeyboardNavigationEventFilter(a)}),c]}let WorkbenchList=class extends List{constructor(e,i,o,a,c,d,_,b,k,j){const _e=typeof c.horizontalScrolling<"u"?c.horizontalScrolling:Boolean(k.getValue(horizontalScrollingKey)),[et,tt]=j.invokeFunction(toWorkbenchListOptions,c);super(e,i,o,a,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},computeStyles(b.getColorTheme(),defaultListStyles)),et),{horizontalScrolling:_e})),this.disposables.add(tt),this.contextKeyService=createScopedContextKeyService(d,this),this.themeService=b,this.listSupportsMultiSelect=WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(c.multipleSelectionSupport!==!1),WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(Boolean(c.selectionNavigation)),this.listHasSelectionOrFocus=WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.listDoubleSelection=WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.listMultiSelection=WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.horizontalScrolling=c.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(k),this.disposables.add(this.contextKeyService),this.disposables.add(_.register(this)),c.overrideStyles&&this.updateStyles(c.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const st=this.getSelection(),ot=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(st.length>0||ot.length>0),this.listMultiSelection.set(st.length>1),this.listDoubleSelection.set(st.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const st=this.getSelection(),ot=this.getFocus();this.listHasSelectionOrFocus.set(st.length>0||ot.length>0)})),this.disposables.add(k.onDidChangeConfiguration(st=>{st.affectsConfiguration(multiSelectModifierSettingKey)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(k));let ot={};if(st.affectsConfiguration(horizontalScrollingKey)&&this.horizontalScrolling===void 0){const nt=Boolean(k.getValue(horizontalScrollingKey));ot=Object.assign(Object.assign({},ot),{horizontalScrolling:nt})}if(st.affectsConfiguration(listSmoothScrolling)){const nt=Boolean(k.getValue(listSmoothScrolling));ot=Object.assign(Object.assign({},ot),{smoothScrolling:nt})}if(st.affectsConfiguration(mouseWheelScrollSensitivityKey)){const nt=k.getValue(mouseWheelScrollSensitivityKey);ot=Object.assign(Object.assign({},ot),{mouseWheelScrollSensitivity:nt})}if(st.affectsConfiguration(fastScrollSensitivityKey)){const nt=k.getValue(fastScrollSensitivityKey);ot=Object.assign(Object.assign({},ot),{fastScrollSensitivity:nt})}Object.keys(ot).length>0&&this.updateOptions(ot)})),this.navigator=new ListResourceNavigator(this,Object.assign({configurationService:k},c)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var i;(i=this._styler)===null||i===void 0||i.dispose(),this._styler=attachListStyler(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};WorkbenchList=__decorate$9([__param$9(5,IContextKeyService),__param$9(6,IListService),__param$9(7,IThemeService),__param$9(8,IConfigurationService),__param$9(9,IInstantiationService)],WorkbenchList);let WorkbenchPagedList=class extends PagedList{constructor(e,i,o,a,c,d,_,b,k,j){const _e=typeof c.horizontalScrolling<"u"?c.horizontalScrolling:Boolean(k.getValue(horizontalScrollingKey)),[et,tt]=j.invokeFunction(toWorkbenchListOptions,c);super(e,i,o,a,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},computeStyles(b.getColorTheme(),defaultListStyles)),et),{horizontalScrolling:_e})),this.disposables=new DisposableStore,this.disposables.add(tt),this.contextKeyService=createScopedContextKeyService(d,this),this.themeService=b,this.horizontalScrolling=c.horizontalScrolling,this.listSupportsMultiSelect=WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(c.multipleSelectionSupport!==!1),WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(Boolean(c.selectionNavigation)),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(k),this.disposables.add(this.contextKeyService),this.disposables.add(_.register(this)),c.overrideStyles&&this.updateStyles(c.overrideStyles),c.overrideStyles&&this.disposables.add(attachListStyler(this,b,c.overrideStyles)),this.disposables.add(k.onDidChangeConfiguration(st=>{st.affectsConfiguration(multiSelectModifierSettingKey)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(k));let ot={};if(st.affectsConfiguration(horizontalScrollingKey)&&this.horizontalScrolling===void 0){const nt=Boolean(k.getValue(horizontalScrollingKey));ot=Object.assign(Object.assign({},ot),{horizontalScrolling:nt})}if(st.affectsConfiguration(listSmoothScrolling)){const nt=Boolean(k.getValue(listSmoothScrolling));ot=Object.assign(Object.assign({},ot),{smoothScrolling:nt})}if(st.affectsConfiguration(mouseWheelScrollSensitivityKey)){const nt=k.getValue(mouseWheelScrollSensitivityKey);ot=Object.assign(Object.assign({},ot),{mouseWheelScrollSensitivity:nt})}if(st.affectsConfiguration(fastScrollSensitivityKey)){const nt=k.getValue(fastScrollSensitivityKey);ot=Object.assign(Object.assign({},ot),{fastScrollSensitivity:nt})}Object.keys(ot).length>0&&this.updateOptions(ot)})),this.navigator=new ListResourceNavigator(this,Object.assign({configurationService:k},c)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var i;(i=this._styler)===null||i===void 0||i.dispose(),this._styler=attachListStyler(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};WorkbenchPagedList=__decorate$9([__param$9(5,IContextKeyService),__param$9(6,IListService),__param$9(7,IThemeService),__param$9(8,IConfigurationService),__param$9(9,IInstantiationService)],WorkbenchPagedList);let WorkbenchTable=class extends Table{constructor(e,i,o,a,c,d,_,b,k,j,_e){const et=typeof d.horizontalScrolling<"u"?d.horizontalScrolling:Boolean(j.getValue(horizontalScrollingKey)),[tt,it]=_e.invokeFunction(toWorkbenchListOptions,d);super(e,i,o,a,c,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},computeStyles(k.getColorTheme(),defaultListStyles)),tt),{horizontalScrolling:et})),this.disposables.add(it),this.contextKeyService=createScopedContextKeyService(_,this),this.themeService=k,this.listSupportsMultiSelect=WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(d.multipleSelectionSupport!==!1),WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(Boolean(d.selectionNavigation)),this.listHasSelectionOrFocus=WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.listDoubleSelection=WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.listMultiSelection=WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.horizontalScrolling=d.horizontalScrolling,this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(j),this.disposables.add(this.contextKeyService),this.disposables.add(b.register(this)),d.overrideStyles&&this.updateStyles(d.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const ot=this.getSelection(),nt=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(ot.length>0||nt.length>0),this.listMultiSelection.set(ot.length>1),this.listDoubleSelection.set(ot.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const ot=this.getSelection(),nt=this.getFocus();this.listHasSelectionOrFocus.set(ot.length>0||nt.length>0)})),this.disposables.add(j.onDidChangeConfiguration(ot=>{ot.affectsConfiguration(multiSelectModifierSettingKey)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(j));let nt={};if(ot.affectsConfiguration(horizontalScrollingKey)&&this.horizontalScrolling===void 0){const rt=Boolean(j.getValue(horizontalScrollingKey));nt=Object.assign(Object.assign({},nt),{horizontalScrolling:rt})}if(ot.affectsConfiguration(listSmoothScrolling)){const rt=Boolean(j.getValue(listSmoothScrolling));nt=Object.assign(Object.assign({},nt),{smoothScrolling:rt})}if(ot.affectsConfiguration(mouseWheelScrollSensitivityKey)){const rt=j.getValue(mouseWheelScrollSensitivityKey);nt=Object.assign(Object.assign({},nt),{mouseWheelScrollSensitivity:rt})}if(ot.affectsConfiguration(fastScrollSensitivityKey)){const rt=j.getValue(fastScrollSensitivityKey);nt=Object.assign(Object.assign({},nt),{fastScrollSensitivity:rt})}Object.keys(nt).length>0&&this.updateOptions(nt)})),this.navigator=new TableResourceNavigator(this,Object.assign({configurationService:j},d)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var i;(i=this._styler)===null||i===void 0||i.dispose(),this._styler=attachListStyler(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};WorkbenchTable=__decorate$9([__param$9(6,IContextKeyService),__param$9(7,IListService),__param$9(8,IThemeService),__param$9(9,IConfigurationService),__param$9(10,IInstantiationService)],WorkbenchTable);class ResourceNavigator extends Disposable{constructor(e,i){var o;super(),this.widget=e,this._onDidOpen=this._register(new Emitter$1),this.onDidOpen=this._onDidOpen.event,this._register(Event.filter(this.widget.onDidChangeSelection,a=>a.browserEvent instanceof KeyboardEvent)(a=>this.onSelectionFromKeyboard(a))),this._register(this.widget.onPointer(a=>this.onPointer(a.element,a.browserEvent))),this._register(this.widget.onMouseDblClick(a=>this.onMouseDblClick(a.element,a.browserEvent))),typeof(i==null?void 0:i.openOnSingleClick)!="boolean"&&(i==null?void 0:i.configurationService)?(this.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(openModeSettingKey))!=="doubleClick",this._register(i==null?void 0:i.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(openModeSettingKey))!=="doubleClick"}))):this.openOnSingleClick=(o=i==null?void 0:i.openOnSingleClick)!==null&&o!==void 0?o:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const i=e.browserEvent,o=typeof i.preserveFocus=="boolean"?i.preserveFocus:!0,a=typeof i.pinned=="boolean"?i.pinned:!o,c=!1;this._open(this.getSelectedElement(),o,a,c,e.browserEvent)}onPointer(e,i){if(!this.openOnSingleClick||i.detail===2)return;const a=i.button===1,c=!0,d=a,_=i.ctrlKey||i.metaKey||i.altKey;this._open(e,c,d,_,i)}onMouseDblClick(e,i){if(!i)return;const o=i.target;if(o.classList.contains("monaco-tl-twistie")||o.classList.contains("monaco-icon-label")&&o.classList.contains("folder-icon")&&i.offsetX<16)return;const c=!1,d=!0,_=i.ctrlKey||i.metaKey||i.altKey;this._open(e,c,d,_,i)}_open(e,i,o,a,c){!e||this._onDidOpen.fire({editorOptions:{preserveFocus:i,pinned:o,revealIfVisible:!0},sideBySide:a,element:e,browserEvent:c})}}class ListResourceNavigator extends ResourceNavigator{constructor(e,i){super(e,i),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class TableResourceNavigator extends ResourceNavigator{constructor(e,i){super(e,i)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class TreeResourceNavigator extends ResourceNavigator{constructor(e,i){super(e,i)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function createKeyboardNavigationEventFilter(s){let e=!1;return i=>{if(i.toKeybinding().isModifierKey())return!1;if(e)return e=!1,!1;const o=s.softDispatch(i,i.target);return o!=null&&o.enterChord?(e=!0,!1):(e=!1,!o)}}let WorkbenchObjectTree=class extends ObjectTree{constructor(e,i,o,a,c,d,_,b,k,j){const{options:_e,getTypeNavigationMode:et,disposable:tt}=d.invokeFunction(workbenchTreeDataPreamble,c);super(e,i,o,a,_e),this.disposables.add(tt),this.internals=new WorkbenchTreeInternals(this,c,et,c.overrideStyles,_,b,k,j),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};WorkbenchObjectTree=__decorate$9([__param$9(5,IInstantiationService),__param$9(6,IContextKeyService),__param$9(7,IListService),__param$9(8,IThemeService),__param$9(9,IConfigurationService)],WorkbenchObjectTree);let WorkbenchCompressibleObjectTree=class extends CompressibleObjectTree{constructor(e,i,o,a,c,d,_,b,k,j){const{options:_e,getTypeNavigationMode:et,disposable:tt}=d.invokeFunction(workbenchTreeDataPreamble,c);super(e,i,o,a,_e),this.disposables.add(tt),this.internals=new WorkbenchTreeInternals(this,c,et,c.overrideStyles,_,b,k,j),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};WorkbenchCompressibleObjectTree=__decorate$9([__param$9(5,IInstantiationService),__param$9(6,IContextKeyService),__param$9(7,IListService),__param$9(8,IThemeService),__param$9(9,IConfigurationService)],WorkbenchCompressibleObjectTree);let WorkbenchDataTree=class extends DataTree{constructor(e,i,o,a,c,d,_,b,k,j,_e){const{options:et,getTypeNavigationMode:tt,disposable:it}=_.invokeFunction(workbenchTreeDataPreamble,d);super(e,i,o,a,c,et),this.disposables.add(it),this.internals=new WorkbenchTreeInternals(this,d,tt,d.overrideStyles,b,k,j,_e),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};WorkbenchDataTree=__decorate$9([__param$9(6,IInstantiationService),__param$9(7,IContextKeyService),__param$9(8,IListService),__param$9(9,IThemeService),__param$9(10,IConfigurationService)],WorkbenchDataTree);let WorkbenchAsyncDataTree=class extends AsyncDataTree{constructor(e,i,o,a,c,d,_,b,k,j,_e){const{options:et,getTypeNavigationMode:tt,disposable:it}=_.invokeFunction(workbenchTreeDataPreamble,d);super(e,i,o,a,c,et),this.disposables.add(it),this.internals=new WorkbenchTreeInternals(this,d,tt,d.overrideStyles,b,k,j,_e),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};WorkbenchAsyncDataTree=__decorate$9([__param$9(6,IInstantiationService),__param$9(7,IContextKeyService),__param$9(8,IListService),__param$9(9,IThemeService),__param$9(10,IConfigurationService)],WorkbenchAsyncDataTree);let WorkbenchCompressibleAsyncDataTree=class extends CompressibleAsyncDataTree{constructor(e,i,o,a,c,d,_,b,k,j,_e,et){const{options:tt,getTypeNavigationMode:it,disposable:st}=b.invokeFunction(workbenchTreeDataPreamble,_);super(e,i,o,a,c,d,tt),this.disposables.add(st),this.internals=new WorkbenchTreeInternals(this,_,it,_.overrideStyles,k,j,_e,et),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};WorkbenchCompressibleAsyncDataTree=__decorate$9([__param$9(7,IInstantiationService),__param$9(8,IContextKeyService),__param$9(9,IListService),__param$9(10,IThemeService),__param$9(11,IConfigurationService)],WorkbenchCompressibleAsyncDataTree);function getDefaultTreeFindMode(s){const e=s.getValue(defaultFindModeSettingKey);if(e==="highlight")return TreeFindMode.Highlight;if(e==="filter")return TreeFindMode.Filter;const i=s.getValue(keyboardNavigationSettingKey);if(i==="simple"||i==="highlight")return TreeFindMode.Highlight;if(i==="filter")return TreeFindMode.Filter}function workbenchTreeDataPreamble(s,e){var i;const o=s.get(IConfigurationService),a=s.get(IContextViewService),c=s.get(IContextKeyService),d=s.get(IInstantiationService),_=()=>{const et=c.getContextKeyValue(WorkbenchListTypeNavigationModeKey);if(et==="automatic")return TypeNavigationMode.Automatic;if(et==="trigger"||c.getContextKeyValue(WorkbenchListAutomaticKeyboardNavigationLegacyKey)===!1)return TypeNavigationMode.Trigger},b=e.horizontalScrolling!==void 0?e.horizontalScrolling:Boolean(o.getValue(horizontalScrollingKey)),[k,j]=d.invokeFunction(toWorkbenchListOptions,e),_e=e.additionalScrollHeight;return{getTypeNavigationMode:_,disposable:j,options:Object.assign(Object.assign({keyboardSupport:!1},k),{indent:typeof o.getValue(treeIndentKey)=="number"?o.getValue(treeIndentKey):void 0,renderIndentGuides:o.getValue(treeRenderIndentGuidesKey),smoothScrolling:Boolean(o.getValue(listSmoothScrolling)),defaultFindMode:getDefaultTreeFindMode(o),horizontalScrolling:b,additionalScrollHeight:_e,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(i=e.expandOnlyOnTwistieClick)!==null&&i!==void 0?i:o.getValue(treeExpandMode)==="doubleClick",contextViewProvider:a})}}let WorkbenchTreeInternals=class{constructor(e,i,o,a,c,d,_,b){var k;this.tree=e,this.themeService=_,this.disposables=[],this.contextKeyService=createScopedContextKeyService(c,e),this.listSupportsMultiSelect=WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(i.multipleSelectionSupport!==!1),WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(Boolean(i.selectionNavigation)),this.listSupportFindWidget=WorkbenchListSupportsFind.bindTo(this.contextKeyService),this.listSupportFindWidget.set((k=i.findWidgetEnabled)!==null&&k!==void 0?k:!0),this.hasSelectionOrFocus=WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.hasDoubleSelection=WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.hasMultiSelection=WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.treeElementCanCollapse=WorkbenchTreeElementCanCollapse.bindTo(this.contextKeyService),this.treeElementHasParent=WorkbenchTreeElementHasParent.bindTo(this.contextKeyService),this.treeElementCanExpand=WorkbenchTreeElementCanExpand.bindTo(this.contextKeyService),this.treeElementHasChild=WorkbenchTreeElementHasChild.bindTo(this.contextKeyService),this.treeFindOpen=WorkbenchTreeFindOpen.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(b),this.updateStyleOverrides(a);const _e=()=>{const tt=e.getFocus()[0];if(!tt)return;const it=e.getNode(tt);this.treeElementCanCollapse.set(it.collapsible&&!it.collapsed),this.treeElementHasParent.set(!!e.getParentElement(tt)),this.treeElementCanExpand.set(it.collapsible&&it.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(tt))},et=new Set;et.add(WorkbenchListTypeNavigationModeKey),et.add(WorkbenchListAutomaticKeyboardNavigationLegacyKey),this.disposables.push(this.contextKeyService,d.register(e),e.onDidChangeSelection(()=>{const tt=e.getSelection(),it=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(tt.length>0||it.length>0),this.hasMultiSelection.set(tt.length>1),this.hasDoubleSelection.set(tt.length===2)})}),e.onDidChangeFocus(()=>{const tt=e.getSelection(),it=e.getFocus();this.hasSelectionOrFocus.set(tt.length>0||it.length>0),_e()}),e.onDidChangeCollapseState(_e),e.onDidChangeModel(_e),e.onDidChangeFindOpenState(tt=>this.treeFindOpen.set(tt)),b.onDidChangeConfiguration(tt=>{let it={};if(tt.affectsConfiguration(multiSelectModifierSettingKey)&&(this._useAltAsMultipleSelectionModifier=useAltAsMultipleSelectionModifier(b)),tt.affectsConfiguration(treeIndentKey)){const st=b.getValue(treeIndentKey);it=Object.assign(Object.assign({},it),{indent:st})}if(tt.affectsConfiguration(treeRenderIndentGuidesKey)){const st=b.getValue(treeRenderIndentGuidesKey);it=Object.assign(Object.assign({},it),{renderIndentGuides:st})}if(tt.affectsConfiguration(listSmoothScrolling)){const st=Boolean(b.getValue(listSmoothScrolling));it=Object.assign(Object.assign({},it),{smoothScrolling:st})}if((tt.affectsConfiguration(defaultFindModeSettingKey)||tt.affectsConfiguration(keyboardNavigationSettingKey))&&e.updateOptions({defaultFindMode:getDefaultTreeFindMode(b)}),tt.affectsConfiguration(horizontalScrollingKey)&&i.horizontalScrolling===void 0){const st=Boolean(b.getValue(horizontalScrollingKey));it=Object.assign(Object.assign({},it),{horizontalScrolling:st})}if(tt.affectsConfiguration(treeExpandMode)&&i.expandOnlyOnTwistieClick===void 0&&(it=Object.assign(Object.assign({},it),{expandOnlyOnTwistieClick:b.getValue(treeExpandMode)==="doubleClick"})),tt.affectsConfiguration(mouseWheelScrollSensitivityKey)){const st=b.getValue(mouseWheelScrollSensitivityKey);it=Object.assign(Object.assign({},it),{mouseWheelScrollSensitivity:st})}if(tt.affectsConfiguration(fastScrollSensitivityKey)){const st=b.getValue(fastScrollSensitivityKey);it=Object.assign(Object.assign({},it),{fastScrollSensitivity:st})}Object.keys(it).length>0&&e.updateOptions(it)}),this.contextKeyService.onDidChangeContext(tt=>{tt.affectsSome(et)&&e.updateOptions({typeNavigationMode:o()})})),this.navigator=new TreeResourceNavigator(e,Object.assign({configurationService:b},i)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){dispose(this.styler),this.styler=e?attachListStyler(this.tree,this.themeService,e):Disposable.None}dispose(){this.disposables=dispose(this.disposables),dispose(this.styler),this.styler=void 0}};WorkbenchTreeInternals=__decorate$9([__param$9(4,IContextKeyService),__param$9(5,IListService),__param$9(6,IThemeService),__param$9(7,IConfigurationService)],WorkbenchTreeInternals);const configurationRegistry=Registry.as(Extensions$7.Configuration);configurationRegistry.registerConfiguration({id:"workbench",order:7,title:localize("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[multiSelectModifierSettingKey]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[localize("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),localize("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:localize({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[openModeSettingKey]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:localize({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[horizontalScrollingKey]:{type:"boolean",default:!1,description:localize("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[treeIndentKey]:{type:"number",default:8,minimum:4,maximum:40,description:localize("tree indent setting","Controls tree indentation in pixels.")},[treeRenderIndentGuidesKey]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:localize("render tree indent guides","Controls whether the tree should render indent guides.")},[listSmoothScrolling]:{type:"boolean",default:!1,description:localize("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[mouseWheelScrollSensitivityKey]:{type:"number",default:1,markdownDescription:localize("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[fastScrollSensitivityKey]:{type:"number",default:5,description:localize("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[defaultFindModeSettingKey]:{type:"string",enum:["highlight","filter"],enumDescriptions:[localize("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),localize("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:localize("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[keyboardNavigationSettingKey]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[localize("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),localize("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),localize("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:localize("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:localize("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' instead.")},[treeExpandMode]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:localize("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var DefaultQuickAccessFilterValue;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(DefaultQuickAccessFilterValue||(DefaultQuickAccessFilterValue={}));const Extensions={Quickaccess:"workbench.contributions.quickaccess"};class QuickAccessRegistry{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((i,o)=>o.prefix.length-i.prefix.length),toDisposable(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return coalesce([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(o=>e.startsWith(o.prefix))||void 0||this.defaultProvider}}Registry.add(Extensions.Quickaccess,new QuickAccessRegistry);const IQuickInputService=createDecorator("quickInputService");var __decorate$8=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$8=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let QuickAccessController=class extends Disposable{constructor(e,i){super(),this.quickInputService=e,this.instantiationService=i,this.registry=Registry.as(Extensions.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",i){this.doShowOrPick(e,!1,i)}doShowOrPick(e,i,o){var a;const[c,d]=this.getOrInstantiateProvider(e),_=this.visibleQuickAccess,b=_==null?void 0:_.descriptor;if(_&&d&&b===d){e!==d.prefix&&!(o!=null&&o.preserveValue)&&(_.picker.value=e),this.adjustValueSelection(_.picker,d,o);return}if(d&&!(o!=null&&o.preserveValue)){let tt;if(_&&b&&b!==d){const it=_.value.substr(b.prefix.length);it&&(tt=`${d.prefix}${it}`)}if(!tt){const it=c==null?void 0:c.defaultFilterValue;it===DefaultQuickAccessFilterValue.LAST?tt=this.lastAcceptedPickerValues.get(d):typeof it=="string"&&(tt=`${d.prefix}${it}`)}typeof tt=="string"&&(e=tt)}const k=new DisposableStore,j=k.add(this.quickInputService.createQuickPick());j.value=e,this.adjustValueSelection(j,d,o),j.placeholder=d==null?void 0:d.placeholder,j.quickNavigate=o==null?void 0:o.quickNavigateConfiguration,j.hideInput=!!j.quickNavigate&&!_,(typeof(o==null?void 0:o.itemActivation)=="number"||(o==null?void 0:o.quickNavigateConfiguration))&&(j.itemActivation=(a=o==null?void 0:o.itemActivation)!==null&&a!==void 0?a:ItemActivation.SECOND),j.contextKey=d==null?void 0:d.contextKey,j.filterValue=tt=>tt.substring(d?d.prefix.length:0),d!=null&&d.placeholder&&(j.ariaLabel=d==null?void 0:d.placeholder);let _e;i&&(_e=new DeferredPromise,k.add(once$1(j.onWillAccept)(tt=>{tt.veto(),j.hide()}))),k.add(this.registerPickerListeners(j,c,d,e));const et=k.add(new CancellationTokenSource$1);if(c&&k.add(c.provide(j,et.token)),once$1(j.onDidHide)(()=>{j.selectedItems.length===0&&et.cancel(),k.dispose(),_e==null||_e.complete(j.selectedItems.slice(0))}),j.show(),i)return _e==null?void 0:_e.p}adjustValueSelection(e,i,o){var a;let c;o!=null&&o.preserveValue?c=[e.value.length,e.value.length]:c=[(a=i==null?void 0:i.prefix.length)!==null&&a!==void 0?a:0,e.value.length],e.valueSelection=c}registerPickerListeners(e,i,o,a){const c=new DisposableStore,d=this.visibleQuickAccess={picker:e,descriptor:o,value:a};return c.add(toDisposable(()=>{d===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),c.add(e.onDidChangeValue(_=>{const[b]=this.getOrInstantiateProvider(_);b!==i?this.show(_,{preserveValue:!0}):d.value=_})),o&&c.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(o,e.value)})),c}getOrInstantiateProvider(e){const i=this.registry.getQuickAccessProvider(e);if(!i)return[void 0,void 0];let o=this.mapProviderToDescriptor.get(i);return o||(o=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,o)),[o,i]}};QuickAccessController=__decorate$8([__param$8(0,IQuickInputService),__param$8(1,IInstantiationService)],QuickAccessController);var __decorate$7=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$7=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let QuickInputService=class extends Themable{constructor(e,i,o,a,c){super(o),this.instantiationService=e,this.contextKeyService=i,this.accessibilityService=a,this.layoutService=c,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(QuickAccessController))),this._quickAccess}createController(e=this.layoutService,i){const o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:c=>this.setContextKey(c),returnFocus:()=>e.focus(),createList:(c,d,_,b,k)=>this.instantiationService.createInstance(WorkbenchList,c,d,_,b,k),styles:this.computeStyles()},a=this._register(new QuickInputController(Object.assign(Object.assign({},o),i)));return a.layout(e.dimension,e.offset.quickPickTop),this._register(e.onDidLayout(c=>a.layout(c,e.offset.quickPickTop))),this._register(a.onShow(()=>this.resetContextKeys())),this._register(a.onHide(()=>this.resetContextKeys())),a}setContextKey(e){let i;e&&(i=this.contexts.get(e),i||(i=new RawContextKey(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,i))),!(i&&i.get())&&(this.resetContextKeys(),i==null||i.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,i={},o=CancellationToken.None){return this.controller.pick(e,i,o)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},computeStyles(this.theme,{quickInputBackground,quickInputForeground,quickInputTitleBackground,contrastBorder,widgetShadow})),inputBox:computeStyles(this.theme,{inputForeground,inputBackground,inputBorder,inputValidationInfoBackground,inputValidationInfoForeground,inputValidationInfoBorder,inputValidationWarningBackground,inputValidationWarningForeground,inputValidationWarningBorder,inputValidationErrorBackground,inputValidationErrorForeground,inputValidationErrorBorder}),countBadge:computeStyles(this.theme,{badgeBackground,badgeForeground,badgeBorder:contrastBorder}),button:computeStyles(this.theme,{buttonForeground,buttonBackground,buttonHoverBackground,buttonBorder:contrastBorder}),progressBar:computeStyles(this.theme,{progressBarBackground}),keybindingLabel:computeStyles(this.theme,{keybindingLabelBackground,keybindingLabelForeground,keybindingLabelBorder,keybindingLabelBottomBorder,keybindingLabelShadow:widgetShadow}),list:computeStyles(this.theme,{listBackground:quickInputBackground,listInactiveFocusForeground:quickInputListFocusForeground,listInactiveSelectionIconForeground:quickInputListFocusIconForeground,listInactiveFocusBackground:quickInputListFocusBackground,listFocusOutline:activeContrastBorder,listInactiveFocusOutline:activeContrastBorder,pickerGroupBorder,pickerGroupForeground})}}};QuickInputService=__decorate$7([__param$7(0,IInstantiationService),__param$7(1,IContextKeyService),__param$7(2,IThemeService),__param$7(3,IAccessibilityService),__param$7(4,ILayoutService)],QuickInputService);var __decorate$6=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$6=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let EditorScopedQuickInputService=class extends QuickInputService{constructor(e,i,o,a,c,d){super(i,o,a,c,new EditorScopedLayoutService(e.getContainerDomNode(),d)),this.host=void 0;const _=QuickInputEditorContribution.get(e);if(_){const b=_.widget;this.host={_serviceBrand:void 0,get hasContainer(){return!0},get container(){return b.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus(),offset:{top:0,quickPickTop:0}}}else this.host=void 0}createController(){return super.createController(this.host)}};EditorScopedQuickInputService=__decorate$6([__param$6(1,IInstantiationService),__param$6(2,IContextKeyService),__param$6(3,IThemeService),__param$6(4,IAccessibilityService),__param$6(5,ICodeEditorService)],EditorScopedQuickInputService);let StandaloneQuickInputService=class{constructor(e,i){this.instantiationService=e,this.codeEditorService=i,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let i=this.mapEditorToService.get(e);if(!i){const o=i=this.instantiationService.createInstance(EditorScopedQuickInputService,e);this.mapEditorToService.set(e,i),once$1(e.onDidDispose)(()=>{o.dispose(),this.mapEditorToService.delete(e)})}return i}get quickAccess(){return this.activeService.quickAccess}pick(e,i={},o=CancellationToken.None){return this.activeService.pick(e,i,o)}createQuickPick(){return this.activeService.createQuickPick()}};StandaloneQuickInputService=__decorate$6([__param$6(0,IInstantiationService),__param$6(1,ICodeEditorService)],StandaloneQuickInputService);class QuickInputEditorContribution{constructor(e){this.editor=e,this.widget=new QuickInputEditorWidget(this.editor)}static get(e){return e.getContribution(QuickInputEditorContribution.ID)}dispose(){this.widget.dispose()}}QuickInputEditorContribution.ID="editor.controller.quickInput";class QuickInputEditorWidget{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return QuickInputEditorWidget.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}QuickInputEditorWidget.ID="editor.contrib.quickInputWidget";registerEditorContribution(QuickInputEditorContribution.ID,QuickInputEditorContribution);class ParsedTokenThemeRule{constructor(e,i,o,a,c){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=i,this.fontStyle=o,this.foreground=a,this.background=c}}function parseTokenTheme(s){if(!s||!Array.isArray(s))return[];const e=[];let i=0;for(let o=0,a=s.length;o<a;o++){const c=s[o];let d=-1;if(typeof c.fontStyle=="string"){d=0;const k=c.fontStyle.split(" ");for(let j=0,_e=k.length;j<_e;j++)switch(k[j]){case"italic":d=d|1;break;case"bold":d=d|2;break;case"underline":d=d|4;break;case"strikethrough":d=d|8;break}}let _=null;typeof c.foreground=="string"&&(_=c.foreground);let b=null;typeof c.background=="string"&&(b=c.background),e[i++]=new ParsedTokenThemeRule(c.token||"",o,d,_,b)}return e}function resolveParsedTokenThemeRules(s,e){s.sort((j,_e)=>{const et=strcmp(j.token,_e.token);return et!==0?et:j.index-_e.index});let i=0,o="000000",a="ffffff";for(;s.length>=1&&s[0].token==="";){const j=s.shift();j.fontStyle!==-1&&(i=j.fontStyle),j.foreground!==null&&(o=j.foreground),j.background!==null&&(a=j.background)}const c=new ColorMap;for(const j of e)c.getId(j);const d=c.getId(o),_=c.getId(a),b=new ThemeTrieElementRule(i,d,_),k=new ThemeTrieElement(b);for(let j=0,_e=s.length;j<_e;j++){const et=s[j];k.insert(et.token,et.fontStyle,c.getId(et.foreground),c.getId(et.background))}return new TokenTheme(c,k)}const colorRegExp=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class ColorMap{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const i=e.match(colorRegExp);if(!i)throw new Error("Illegal value for token color: "+e);e=i[1].toUpperCase();let o=this._color2id.get(e);return o||(o=++this._lastColorId,this._color2id.set(e,o),this._id2color[o]=Color.fromHex("#"+e),o)}getColorMap(){return this._id2color.slice(0)}}class TokenTheme{constructor(e,i){this._colorMap=e,this._root=i,this._cache=new Map}static createFromRawTokenTheme(e,i){return this.createFromParsedTokenTheme(parseTokenTheme(e),i)}static createFromParsedTokenTheme(e,i){return resolveParsedTokenThemeRules(e,i)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,i){let o=this._cache.get(i);if(typeof o>"u"){const a=this._match(i),c=toStandardTokenType(i);o=(a.metadata|c<<8)>>>0,this._cache.set(i,o)}return(o|e<<0)>>>0}}const STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|regexp)\b/;function toStandardTokenType(s){const e=s.match(STANDARD_TOKEN_TYPE_REGEXP);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function strcmp(s,e){return s<e?-1:s>e?1:0}class ThemeTrieElementRule{constructor(e,i,o){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=i,this._background=o,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new ThemeTrieElementRule(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,i,o){e!==-1&&(this._fontStyle=e),i!==0&&(this._foreground=i),o!==0&&(this._background=o),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class ThemeTrieElement{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const i=e.indexOf(".");let o,a;i===-1?(o=e,a=""):(o=e.substring(0,i),a=e.substring(i+1));const c=this._children.get(o);return typeof c<"u"?c.match(a):this._mainRule}insert(e,i,o,a){if(e===""){this._mainRule.acceptOverwrite(i,o,a);return}const c=e.indexOf(".");let d,_;c===-1?(d=e,_=""):(d=e.substring(0,c),_=e.substring(c+1));let b=this._children.get(d);typeof b>"u"&&(b=new ThemeTrieElement(this._mainRule.clone()),this._children.set(d,b)),b.insert(_,i,o,a)}}function generateTokensCSSForColorMap(s){const e=[];for(let i=1,o=s.length;i<o;i++){const a=s[i];e[i]=`.mtk${i} { color: ${a}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const vs={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[editorBackground]:"#FFFFFE",[editorForeground]:"#000000",[editorInactiveSelection]:"#E5EBF1",[editorIndentGuides]:"#D3D3D3",[editorActiveIndentGuides]:"#939393",[editorSelectionHighlight]:"#ADD6FF4D"}},vs_dark={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[editorBackground]:"#1E1E1E",[editorForeground]:"#D4D4D4",[editorInactiveSelection]:"#3A3D41",[editorIndentGuides]:"#404040",[editorActiveIndentGuides]:"#707070",[editorSelectionHighlight]:"#ADD6FF26"}},hc_black={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[editorBackground]:"#000000",[editorForeground]:"#FFFFFF",[editorIndentGuides]:"#FFFFFF",[editorActiveIndentGuides]:"#FFFFFF"}},hc_light={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[editorBackground]:"#FFFFFF",[editorForeground]:"#292929",[editorIndentGuides]:"#292929",[editorActiveIndentGuides]:"#292929"}};function getIconsStyleSheet(s){const e=new Emitter$1,i=getIconRegistry();return i.onDidChange(()=>e.fire()),s==null||s.onDidProductIconThemeChange(()=>e.fire()),{onDidChange:e.event,getCSS(){const o=s?s.getProductIconTheme():new UnthemedProductIconTheme,a={},c=_=>{const b=o.getIcon(_);if(!b)return;const k=b.font;return k?(a[k.id]=k.definition,`.codicon-${_.id}:before { content: '${b.fontCharacter}'; font-family: ${asCSSPropertyValue(k.id)}; }`):`.codicon-${_.id}:before { content: '${b.fontCharacter}'; }`},d=[];for(const _ of i.getIcons()){const b=c(_);b&&d.push(b)}for(const _ in a){const b=a[_],k=b.weight?`font-weight: ${b.weight};`:"",j=b.style?`font-style: ${b.style};`:"",_e=b.src.map(et=>`${asCSSUrl(et.location)} format('${et.format}')`).join(", ");d.push(`@font-face { src: ${_e}; font-family: ${asCSSPropertyValue(_)};${k}${j} font-display: block; }`)}return d.join(`
`)}}}class UnthemedProductIconTheme{getIcon(e){const i=getIconRegistry();let o=e.defaults;for(;ThemeIcon.isThemeIcon(o);){const a=i.getIcon(o.id);if(!a)return;o=a.defaults}return o}}const VS_LIGHT_THEME_NAME="vs",VS_DARK_THEME_NAME="vs-dark",HC_BLACK_THEME_NAME="hc-black",HC_LIGHT_THEME_NAME="hc-light",colorRegistry=Registry.as(Extensions$2.ColorContribution),themingRegistry=Registry.as(Extensions$5.ThemingContribution);class StandaloneTheme{constructor(e,i){this.semanticHighlighting=!1,this.themeData=i;const o=i.base;e.length>0?(isBuiltinTheme(e)?this.id=e:this.id=o+" "+e,this.themeName=e):(this.id=o,this.themeName=o),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const i in this.themeData.colors)e.set(i,Color.fromHex(this.themeData.colors[i]));if(this.themeData.inherit){const i=getBuiltinRules(this.themeData.base);for(const o in i.colors)e.has(o)||e.set(o,Color.fromHex(i.colors[o]))}this.colors=e}return this.colors}getColor(e,i){const o=this.getColors().get(e);if(o)return o;if(i!==!1)return this.getDefault(e)}getDefault(e){let i=this.defaultColors[e];return i||(i=colorRegistry.resolveDefaultColor(e,this),this.defaultColors[e]=i,i)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case VS_LIGHT_THEME_NAME:return ColorScheme.LIGHT;case HC_BLACK_THEME_NAME:return ColorScheme.HIGH_CONTRAST_DARK;case HC_LIGHT_THEME_NAME:return ColorScheme.HIGH_CONTRAST_LIGHT;default:return ColorScheme.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],i=[];if(this.themeData.inherit){const c=getBuiltinRules(this.themeData.base);e=c.rules,c.encodedTokensColors&&(i=c.encodedTokensColors)}const o=this.themeData.colors["editor.foreground"],a=this.themeData.colors["editor.background"];if(o||a){const c={token:""};o&&(c.foreground=o),a&&(c.background=a),e.push(c)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(i=this.themeData.encodedTokensColors),this._tokenTheme=TokenTheme.createFromRawTokenTheme(e,i)}return this._tokenTheme}getTokenStyleMetadata(e,i,o){const c=this.tokenTheme._match([e].concat(i).join(".")).metadata,d=TokenMetadata.getForeground(c),_=TokenMetadata.getFontStyle(c);return{foreground:d,italic:Boolean(_&1),bold:Boolean(_&2),underline:Boolean(_&4),strikethrough:Boolean(_&8)}}}function isBuiltinTheme(s){return s===VS_LIGHT_THEME_NAME||s===VS_DARK_THEME_NAME||s===HC_BLACK_THEME_NAME||s===HC_LIGHT_THEME_NAME}function getBuiltinRules(s){switch(s){case VS_LIGHT_THEME_NAME:return vs;case VS_DARK_THEME_NAME:return vs_dark;case HC_BLACK_THEME_NAME:return hc_black;case HC_LIGHT_THEME_NAME:return hc_light}}function newBuiltInTheme(s){const e=getBuiltinRules(s);return new StandaloneTheme(s,e)}class StandaloneThemeService extends Disposable{constructor(){super(),this._onColorThemeChange=this._register(new Emitter$1),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new Emitter$1),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new UnthemedProductIconTheme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(VS_LIGHT_THEME_NAME,newBuiltInTheme(VS_LIGHT_THEME_NAME)),this._knownThemes.set(VS_DARK_THEME_NAME,newBuiltInTheme(VS_DARK_THEME_NAME)),this._knownThemes.set(HC_BLACK_THEME_NAME,newBuiltInTheme(HC_BLACK_THEME_NAME)),this._knownThemes.set(HC_LIGHT_THEME_NAME,newBuiltInTheme(HC_LIGHT_THEME_NAME));const e=getIconsStyleSheet(this);this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(VS_LIGHT_THEME_NAME),this._onOSSchemeChanged(),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),addMatchMediaChangeListener("(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return isInShadowDOM(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=createStyleSheet(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Disposable.None}_registerShadowDomContainer(e){const i=createStyleSheet(e);return i.className="monaco-colors",i.textContent=this._allCSS,this._styleElements.push(i),{dispose:()=>{for(let o=0;o<this._styleElements.length;o++)if(this._styleElements[o]===i){this._styleElements.splice(o,1);return}}}}defineTheme(e,i){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!isBuiltinTheme(i.base)&&!isBuiltinTheme(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new StandaloneTheme(e,i)),isBuiltinTheme(e)&&this._knownThemes.forEach(o=>{o.base===e&&o.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let i;this._knownThemes.has(e)?i=this._knownThemes.get(e):i=this._knownThemes.get(VS_LIGHT_THEME_NAME),this._updateActualTheme(i)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=window.matchMedia("(forced-colors: active)").matches;if(e!==isHighContrast(this._theme.type)){let i;isDark(this._theme.type)?i=e?HC_BLACK_THEME_NAME:VS_DARK_THEME_NAME:i=e?HC_LIGHT_THEME_NAME:VS_LIGHT_THEME_NAME,this._updateActualTheme(this._knownThemes.get(i))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],i={},o={addRule:d=>{i[d]||(e.push(d),i[d]=!0)}};themingRegistry.getThemingParticipants().forEach(d=>d(this._theme,o,this._environment));const a=[];for(const d of colorRegistry.getColors()){const _=this._theme.getColor(d.id,!0);_&&a.push(`${asCssVariableName(d.id)}: ${_.toString()};`)}o.addRule(`.monaco-editor { ${a.join(`
`)} }`);const c=this._colorMapOverride||this._theme.tokenTheme.getColorMap();o.addRule(generateTokensCSSForColorMap(c)),this._themeCSS=e.join(`
`),this._updateCSS(),TokenizationRegistry.setColorMap(c),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const IStandaloneThemeService=createDecorator("themeService");var __decorate$5=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$5=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let AccessibilityService=class extends Disposable{constructor(e,i,o){super(),this._contextKeyService=e,this._layoutService=i,this._configurationService=o,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new Emitter$1,this._onDidChangeReducedMotion=new Emitter$1,this._accessibilityModeEnabledContext=CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);const a=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(d=>{d.affectsConfiguration("editor.accessibilitySupport")&&(a(),this._onDidChangeScreenReaderOptimized.fire()),d.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),a(),this._register(this.onDidChangeScreenReaderOptimized(()=>a()));const c=window.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=c.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(c)}initReducedMotionListeners(e){if(!this._layoutService.hasContainer)return;this._register(addDisposableListener(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const i=()=>{const o=this.isMotionReduced();this._layoutService.container.classList.toggle("reduce-motion",o),this._layoutService.container.classList.toggle("enable-motion",!o)};i(),this._register(this.onDidChangeReducedMotion(()=>i()))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};AccessibilityService=__decorate$5([__param$5(0,IContextKeyService),__param$5(1,ILayoutService),__param$5(2,IConfigurationService)],AccessibilityService);var __awaiter$4=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})},StorageState;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(StorageState||(StorageState={}));class Storage extends Disposable{constructor(e,i=Object.create(null)){super(),this.database=e,this.options=i,this._onDidChangeStorage=this._register(new Emitter$1),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=StorageState.None,this.cache=new Map,this.flushDelayer=new ThrottledDelayer(Storage.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var i,o;(i=e.changed)===null||i===void 0||i.forEach((a,c)=>this.accept(c,a)),(o=e.deleted)===null||o===void 0||o.forEach(a=>this.accept(a,void 0))}accept(e,i){if(this.state===StorageState.Closed)return;let o=!1;isUndefinedOrNull(i)?o=this.cache.delete(e):this.cache.get(e)!==i&&(this.cache.set(e,i),o=!0),o&&this._onDidChangeStorage.fire(e)}get(e,i){const o=this.cache.get(e);return isUndefinedOrNull(o)?i:o}getBoolean(e,i){const o=this.get(e);return isUndefinedOrNull(o)?i:o==="true"}getNumber(e,i){const o=this.get(e);return isUndefinedOrNull(o)?i:parseInt(o,10)}set(e,i){return __awaiter$4(this,void 0,void 0,function*(){if(this.state===StorageState.Closed)return;if(isUndefinedOrNull(i))return this.delete(e);const o=String(i);if(this.cache.get(e)!==o)return this.cache.set(e,o),this.pendingInserts.set(e,o),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return __awaiter$4(this,void 0,void 0,function*(){if(!(this.state===StorageState.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return __awaiter$4(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var i;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(i=this.whenFlushedCallbacks.pop())===null||i===void 0||i()})})}doFlush(e){return __awaiter$4(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}Storage.DEFAULT_FLUSH_DELAY=100;class InMemoryStorageDatabase{constructor(){this.onDidChangeItemsExternal=Event.None,this.items=new Map}updateItems(e){var i,o;return __awaiter$4(this,void 0,void 0,function*(){(i=e.insert)===null||i===void 0||i.forEach((a,c)=>this.items.set(c,a)),(o=e.delete)===null||o===void 0||o.forEach(a=>this.items.delete(a))})}}const TARGET_KEY="__$__targetStorageMarker",IStorageService=createDecorator("storageService");var WillSaveStateReason;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(WillSaveStateReason||(WillSaveStateReason={}));class AbstractStorageService extends Disposable{constructor(e={flushInterval:AbstractStorageService.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new PauseableEmitter),this.onDidChangeValue=this._onDidChangeValue.event,this._onDidChangeTarget=this._register(new PauseableEmitter),this._onWillSaveState=this._register(new Emitter$1),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}emitDidChangeValue(e,i){if(i===TARGET_KEY){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i]})}get(e,i,o){var a;return(a=this.getStorage(i))===null||a===void 0?void 0:a.get(e,o)}getBoolean(e,i,o){var a;return(a=this.getStorage(i))===null||a===void 0?void 0:a.getBoolean(e,o)}getNumber(e,i,o){var a;return(a=this.getStorage(i))===null||a===void 0?void 0:a.getNumber(e,o)}store(e,i,o,a){if(isUndefinedOrNull(i)){this.remove(e,o);return}this.withPausedEmitters(()=>{var c;this.updateKeyTarget(e,o,a),(c=this.getStorage(o))===null||c===void 0||c.set(e,i)})}remove(e,i){this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,void 0),(o=this.getStorage(i))===null||o===void 0||o.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,i,o){var a,c;const d=this.getKeyTargets(i);typeof o=="number"?d[e]!==o&&(d[e]=o,(a=this.getStorage(i))===null||a===void 0||a.set(TARGET_KEY,JSON.stringify(d))):typeof d[e]=="number"&&(delete d[e],(c=this.getStorage(i))===null||c===void 0||c.set(TARGET_KEY,JSON.stringify(d)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const i=this.get(TARGET_KEY,e);if(i)try{return JSON.parse(i)}catch{}return Object.create(null)}}AbstractStorageService.DEFAULT_FLUSH_INTERVAL=60*1e3;class InMemoryStorageService extends AbstractStorageService{constructor(){super(),this.applicationStorage=this._register(new Storage(new InMemoryStorageDatabase)),this.profileStorage=this._register(new Storage(new InMemoryStorageDatabase)),this.workspaceStorage=this._register(new Storage(new InMemoryStorageDatabase)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}var __decorate$4=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$4=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let MenuService=class{constructor(e,i){this._commandService=e,this._hiddenStates=new PersistedMenuHideState(i)}createMenu(e,i,o){return new Menu(e,this._hiddenStates,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},o),this._commandService,i,this)}};MenuService=__decorate$4([__param$4(0,ICommandService),__param$4(1,IStorageService)],MenuService);let PersistedMenuHideState=class bn{constructor(e){this._storageService=e,this._disposables=new DisposableStore,this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1;try{const i=e.get(bn._key,0,"{}");this._data=JSON.parse(i)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(i=>{if(i.key===bn._key){if(!this._ignoreChangeEvent)try{const o=e.get(bn._key,0,"{}");this._data=JSON.parse(o)}catch(o){console.log("FAILED to read storage after UPDATE",o)}this._onDidChange.fire()}}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}isHidden(e,i){var o,a;return(a=(o=this._data[e.id])===null||o===void 0?void 0:o.includes(i))!==null&&a!==void 0?a:!1}updateHidden(e,i,o){const a=this._data[e.id];if(o)a?a.indexOf(i)<0&&a.push(i):this._data[e.id]=[i];else if(a){const c=a.indexOf(i);c>=0&&removeFastWithoutKeepingOrder(a,c),a.length===0&&delete this._data[e.id]}this._persist()}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(bn._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};PersistedMenuHideState._key="menu.hiddenCommands";PersistedMenuHideState=__decorate$4([__param$4(0,IStorageService)],PersistedMenuHideState);let Menu=class dn{constructor(e,i,o,a,c,d){this._id=e,this._hiddenStates=i,this._options=o,this._commandService=a,this._contextKeyService=c,this._menuService=d,this._disposables=new DisposableStore,this._menuGroups=[],this._contextKeys=new Set,this._build();const _=new RunOnceScheduler(()=>{this._build(),this._onDidChange.fire(this)},o.eventDebounceDelay);this._disposables.add(_),this._disposables.add(MenuRegistry.onDidChangeMenu(j=>{j.has(e)&&_.schedule()}));const b=this._disposables.add(new DisposableStore),k=()=>{const j=new RunOnceScheduler(()=>this._onDidChange.fire(this),o.eventDebounceDelay);b.add(j),b.add(c.onDidChangeContext(_e=>{_e.affectsSome(this._contextKeys)&&j.schedule()})),b.add(i.onDidChange(()=>{j.schedule()}))};this._onDidChange=new Emitter$1({onFirstListenerAdd:k,onLastListenerRemove:b.clear.bind(b)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=MenuRegistry.getMenuItems(this._id);let i;e.sort(dn._compareMenuItems);for(const o of e){const a=o.group||"";(!i||i[0]!==a)&&(i=[a,[]],this._menuGroups.push(i)),i[1].push(o),this._collectContextKeys(o)}}_collectContextKeys(e){if(dn._fillInKbExprKeys(e.when,this._contextKeys),isIMenuItem(e)){if(e.command.precondition&&dn._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const i=e.command.toggled.condition||e.command.toggled;dn._fillInKbExprKeys(i,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&MenuRegistry.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const i=[];for(const o of this._menuGroups){const[a,c]=o,d=[],_=[];for(const b of c)if(this._contextKeyService.contextMatchesRules(b.when)){let k;if(isIMenuItem(b)){const _e=createMenuHide(this._id,b.command,this._hiddenStates);k=new MenuItemAction(b.command,b.alt,e,_e,this._contextKeyService,this._commandService)}else k=new SubmenuItemAction(b,this._menuService,this._contextKeyService,e),k.actions.length===0&&(k.dispose(),k=void 0);k&&_.push(k)}_.length>0&&i.push([a,_]),d.length>0}return i}static _fillInKbExprKeys(e,i){if(e)for(const o of e.keys())i.add(o)}static _compareMenuItems(e,i){const o=e.group,a=i.group;if(o!==a){if(o){if(!a)return-1}else return 1;if(o==="navigation")return-1;if(a==="navigation")return 1;const _=o.localeCompare(a);if(_!==0)return _}const c=e.order||0,d=i.order||0;return c<d?-1:c>d?1:dn._compareTitles(isIMenuItem(e)?e.command.title:e.title,isIMenuItem(i)?i.command.title:i.title)}static _compareTitles(e,i){const o=typeof e=="string"?e:e.original,a=typeof i=="string"?i:i.original;return o.localeCompare(a)}};Menu=__decorate$4([__param$4(3,ICommandService),__param$4(4,IContextKeyService),__param$4(5,IMenuService)],Menu);function createMenuHide(s,e,i){const o=`${s.id}/${e.id}`,a=typeof e.title=="string"?e.title:e.title.value,c=toAction({id:o,label:localize("hide.label","Hide '{0}'",a),run(){i.updateHidden(s,e.id,!0)}}),d=toAction({id:o,label:a,get checked(){return!i.isHidden(s,e.id)},run(){const _=!i.isHidden(s,e.id);i.updateHidden(s,e.id,_)}});return{hide:c,toggle:d,get isHidden(){return!d.checked}}}var __decorate$3=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$3=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$3=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};let BrowserClipboardService=class extends Disposable{constructor(e,i){super(),this.layoutService=e,this.logService=i,this.mapTextToType=new Map,this.findText="",this.resources=[],(isSafari||isWebkitWebView)&&this.installWebKitWriteTextWorkaround()}installWebKitWriteTextWorkaround(){const e=()=>{const i=new DeferredPromise;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=i,navigator.clipboard.write([new ClipboardItem({"text/plain":i.p})]).catch(o=>__awaiter$3(this,void 0,void 0,function*(){(!(o instanceof Error)||o.name!=="NotAllowedError"||!i.isRejected)&&this.logService.error(o)}))};this.layoutService.hasContainer&&(this._register(addDisposableListener(this.layoutService.container,"click",e)),this._register(addDisposableListener(this.layoutService.container,"keydown",e)))}writeText(e,i){return __awaiter$3(this,void 0,void 0,function*(){if(i){this.mapTextToType.set(i,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return yield navigator.clipboard.writeText(e)}catch(c){console.error(c)}const o=document.activeElement,a=document.body.appendChild($$5("textarea",{"aria-hidden":!0}));a.style.height="1px",a.style.width="1px",a.style.position="absolute",a.value=e,a.focus(),a.select(),document.execCommand("copy"),o instanceof HTMLElement&&o.focus(),document.body.removeChild(a)})}readText(e){return __awaiter$3(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(i){return console.error(i),""}})}readFindText(){return __awaiter$3(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return __awaiter$3(this,void 0,void 0,function*(){this.findText=e})}readResources(){return __awaiter$3(this,void 0,void 0,function*(){return this.resources})}};BrowserClipboardService=__decorate$3([__param$3(0,ILayoutService),__param$3(1,ILogService)],BrowserClipboardService);var __decorate$2=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$2=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};const KEYBINDING_CONTEXT_ATTR="data-keybinding-context";class Context{constructor(e,i){this._id=e,this._parent=i,this._value=Object.create(null),this._value._contextId=e}get value(){return Object.assign({},this._value)}setValue(e,i){return this._value[e]!==i?(this._value[e]=i,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const i=this._value[e];return typeof i>"u"&&this._parent?this._parent.getValue(e):i}}class NullContext extends Context{constructor(){super(-1,null)}setValue(e,i){return!1}removeValue(e){return!1}getValue(e){}}NullContext.INSTANCE=new NullContext;class ConfigAwareContextValuesContainer extends Context{constructor(e,i,o){super(e,null),this._configurationService=i,this._values=TernarySearchTree.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(a=>{if(a.source===7){const c=Array.from(Iterable.map(this._values,([d])=>d));this._values.clear(),o.fire(new ArrayContextKeyChangeEvent(c))}else{const c=[];for(const d of a.affectedKeys){const _=`config.${d}`,b=this._values.findSuperstr(_);b!==void 0&&(c.push(...Iterable.map(b,([k])=>k)),this._values.deleteSuperstr(_)),this._values.has(_)&&(c.push(_),this._values.delete(_))}o.fire(new ArrayContextKeyChangeEvent(c))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(ConfigAwareContextValuesContainer._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const i=e.substr(ConfigAwareContextValuesContainer._keyPrefix.length),o=this._configurationService.getValue(i);let a;switch(typeof o){case"number":case"boolean":case"string":a=o;break;default:Array.isArray(o)?a=JSON.stringify(o):a=o}return this._values.set(e,a),a}setValue(e,i){return super.setValue(e,i)}removeValue(e){return super.removeValue(e)}}ConfigAwareContextValuesContainer._keyPrefix="config.";class ContextKey{constructor(e,i,o){this._service=e,this._key=i,this._defaultValue=o,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class SimpleContextKeyChangeEvent{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class ArrayContextKeyChangeEvent{constructor(e){this.keys=e}affectsSome(e){for(const i of this.keys)if(e.has(i))return!0;return!1}allKeysContainedIn(e){return this.keys.every(i=>e.has(i))}}class CompositeContextKeyChangeEvent{constructor(e){this.events=e}affectsSome(e){for(const i of this.events)if(i.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(i=>i.allKeysContainedIn(e))}}function allEventKeysInContext(s,e){return s.allKeysContainedIn(new Set(Object.keys(e)))}class AbstractContextKeyService{constructor(e){this._onDidChangeContext=new PauseableEmitter({merge:i=>new CompositeContextKeyChangeEvent(i)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,i){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ContextKey(this,e,i)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ScopedContextKeyService(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const i=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(i):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,i){if(this._isDisposed)return;const o=this.getContextValuesContainer(this._myContextId);!o||o.setValue(e,i)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(e))}getContext(e){return this._isDisposed?NullContext.INSTANCE:this.getContextValuesContainer(findContextAttr(e))}}let ContextKeyService=class extends AbstractContextKeyService{constructor(e){super(0),this._contexts=new Map,this._toDispose=new DisposableStore,this._lastContextId=0;const i=new ConfigAwareContextValuesContainer(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,i),this._toDispose.add(i)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._contexts.get(e)||NullContext.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const i=++this._lastContextId;return this._contexts.set(i,new Context(i,this.getContextValuesContainer(e))),i}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};ContextKeyService=__decorate$2([__param$2(0,IConfigurationService)],ContextKeyService);class ScopedContextKeyService extends AbstractContextKeyService{constructor(e,i){if(super(e.createChildContext()),this._parentChangeListener=new MutableDisposable,this._parent=e,this._updateParentChangeListener(),this._domNode=i,this._domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)){let o="";this._domNode.classList&&(o=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${o?": "+o:""}`)}this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const o=this._parent.getContextValuesContainer(this._myContextId).value;allEventKeysInContext(e,o)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?NullContext.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function findContextAttr(s){for(;s;){if(s.hasAttribute(KEYBINDING_CONTEXT_ATTR)){const e=s.getAttribute(KEYBINDING_CONTEXT_ATTR);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}function setContext(s,e,i){s.get(IContextKeyService).createKey(String(e),stringifyURIs(i))}function stringifyURIs(s){return cloneAndChange(s,e=>{if(typeof e=="object"&&e.$mid===1)return URI.revive(e).toString();if(e instanceof URI)return e.toString()})}CommandsRegistry.registerCommand(SET_CONTEXT_COMMAND_ID,setContext);CommandsRegistry.registerCommand({id:"getContextKeyInfo",handler(){return[...RawContextKey.all()].sort((s,e)=>s.key.localeCompare(e.key))},description:{description:localize("getContextKeyInfo","A command that returns information about context keys"),args:[]}});CommandsRegistry.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(const i of RawContextKey.all())e.has(i.key)||(e.add(i.key),s.push(i));s.sort((i,o)=>i.key.localeCompare(o.key)),console.log(JSON.stringify(s,void 0,2))});class Node$1{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class Graph{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const i of this._nodes.values())i.outgoing.size===0&&e.push(i);return e}insertEdge(e,i){const o=this.lookupOrInsertNode(e),a=this.lookupOrInsertNode(i);o.outgoing.set(this._hashFn(i),a),a.incoming.set(this._hashFn(e),o)}removeNode(e){const i=this._hashFn(e);this._nodes.delete(i);for(const o of this._nodes.values())o.outgoing.delete(i),o.incoming.delete(i)}lookupOrInsertNode(e){const i=this._hashFn(e);let o=this._nodes.get(i);return o||(o=new Node$1(e),this._nodes.set(i,o)),o}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[i,o]of this._nodes)e.push(`${i}, (incoming)[${[...o.incoming.keys()].join(", ")}], (outgoing)[${[...o.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(const[e,i]of this._nodes){const o=new Set([e]),a=this._findCycle(i,o);if(a)return a}}_findCycle(e,i){for(const[o,a]of e.outgoing){if(i.has(o))return[...i,o].join(" -> ");i.add(o);const c=this._findCycle(a,i);if(c)return c;i.delete(o)}}}class CyclicDependencyError extends Error{constructor(e){var i;super("cyclic dependency between services"),this.message=(i=e.findCycleSlow())!==null&&i!==void 0?i:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class InstantiationService{constructor(e=new ServiceCollection,i=!1,o){this._activeInstantiations=new Set,this._services=e,this._strict=i,this._parent=o,this._services.set(IInstantiationService,this)}createChild(e){return new InstantiationService(e,this._strict,this)}invokeFunction(e,...i){const o=Trace.traceInvocation(e);let a=!1;try{return e({get:d=>{if(a)throw illegalState("service accessor is only valid during the invocation of its target method");const _=this._getOrCreateServiceInstance(d,o);if(!_)throw new Error(`[invokeFunction] unknown service '${d}'`);return _}},...i)}finally{a=!0,o.stop()}}createInstance(e,...i){let o,a;return e instanceof SyncDescriptor?(o=Trace.traceCreation(e.ctor),a=this._createInstance(e.ctor,e.staticArguments.concat(i),o)):(o=Trace.traceCreation(e),a=this._createInstance(e,i,o)),o.stop(),a}_createInstance(e,i=[],o){const a=_util.getServiceDependencies(e).sort((_,b)=>_.index-b.index),c=[];for(const _ of a){const b=this._getOrCreateServiceInstance(_.id,o);b||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${_.id}.`,!1),c.push(b)}const d=a.length>0?a[0].index:i.length;if(i.length!==d){console.trace(`[createInstance] First service dependency of ${e.name} at position ${d+1} conflicts with ${i.length} static arguments`);const _=d-i.length;_>0?i=i.concat(new Array(_)):i=i.slice(0,d)}return new e(...i,...c)}_setServiceInstance(e,i){if(this._services.get(e)instanceof SyncDescriptor)this._services.set(e,i);else if(this._parent)this._parent._setServiceInstance(e,i);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const i=this._services.get(e);return!i&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):i}_getOrCreateServiceInstance(e,i){const o=this._getServiceInstanceOrDescriptor(e);return o instanceof SyncDescriptor?this._safeCreateAndCacheServiceInstance(e,o,i.branch(e,!0)):(i.branch(e,!1),o)}_safeCreateAndCacheServiceInstance(e,i,o){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,i,o)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,i,o){const a=new Graph(_=>_.id.toString());let c=0;const d=[{id:e,desc:i,_trace:o}];for(;d.length;){const _=d.pop();if(a.lookupOrInsertNode(_),c++>1e3)throw new CyclicDependencyError(a);for(const b of _util.getServiceDependencies(_.desc.ctor)){const k=this._getServiceInstanceOrDescriptor(b.id);if(k||this._throwIfStrict(`[createInstance] ${e} depends on ${b.id} which is NOT registered.`,!0),k instanceof SyncDescriptor){const j={id:b.id,desc:k,_trace:_._trace.branch(b.id,!0)};a.insertEdge(_,j),d.push(j)}}}for(;;){const _=a.roots();if(_.length===0){if(!a.isEmpty())throw new CyclicDependencyError(a);break}for(const{data:b}of _){if(this._getServiceInstanceOrDescriptor(b.id)instanceof SyncDescriptor){const j=this._createServiceInstanceWithOwner(b.id,b.desc.ctor,b.desc.staticArguments,b.desc.supportsDelayedInstantiation,b._trace);this._setServiceInstance(b.id,j)}a.removeNode(b)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,i,o=[],a,c){if(this._services.get(e)instanceof SyncDescriptor)return this._createServiceInstance(i,o,a,c);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,i,o,a,c);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}_createServiceInstance(e,i=[],o,a){if(o){const c=new IdleValue(()=>this._createInstance(e,i,a));return new Proxy(Object.create(null),{get(d,_){if(_ in d)return d[_];const b=c.value;let k=b[_];return typeof k!="function"||(k=k.bind(b),d[_]=k),k},set(d,_,b){return c.value[_]=b,!0}})}else return this._createInstance(e,i,a)}_throwIfStrict(e,i){if(i&&console.warn(e),this._strict)throw new Error(e)}}class Trace{constructor(e,i){this.type=e,this.name=i,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Trace._None}static traceCreation(e){return Trace._None}branch(e,i){const o=new Trace(2,e.toString());return this._dep.push([e,i,o]),o}stop(){const e=Date.now()-this._start;Trace._totals+=e;let i=!1;function o(c,d){const _=[],b=new Array(c+1).join("	");for(const[k,j,_e]of d._dep)if(j&&_e){i=!0,_.push(`${b}CREATES -> ${k}`);const et=o(c+1,_e);et&&_.push(et)}else _.push(`${b}uses -> ${k}`);return _.join(`
`)}const a=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${o(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`];(e>2||i)&&console.log(a.join(`
`))}}Trace._None=new class extends Trace{constructor(){super(-1,null)}stop(){}branch(){return this}};Trace._totals=0;class DoubleResourceMap{constructor(){this._byResource=new ResourceMap,this._byOwner=new Map}set(e,i,o){let a=this._byResource.get(e);a||(a=new Map,this._byResource.set(e,a)),a.set(i,o);let c=this._byOwner.get(i);c||(c=new ResourceMap,this._byOwner.set(i,c)),c.set(e,o)}get(e,i){const o=this._byResource.get(e);return o==null?void 0:o.get(i)}delete(e,i){let o=!1,a=!1;const c=this._byResource.get(e);c&&(o=c.delete(i));const d=this._byOwner.get(i);if(d&&(a=d.delete(e)),o!==a)throw new Error("illegal state");return o&&a}values(e){var i,o,a,c;return typeof e=="string"?(o=(i=this._byOwner.get(e))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:Iterable.empty():URI.isUri(e)?(c=(a=this._byResource.get(e))===null||a===void 0?void 0:a.values())!==null&&c!==void 0?c:Iterable.empty():Iterable.map(Iterable.concat(...this._byOwner.values()),d=>d[1])}}class MarkerStats{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ResourceMap,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const i of e){const o=this._data.get(i);o&&this._substract(o);const a=this._resourceStats(i);this._add(a),this._data.set(i,a)}}_resourceStats(e){const i={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===Schemas.inMemory||e.scheme===Schemas.walkThrough||e.scheme===Schemas.walkThroughSnippet||e.scheme===Schemas.vscodeSourceControl)return i;for(const{severity:o}of this._service.read({resource:e}))o===MarkerSeverity$1.Error?i.errors+=1:o===MarkerSeverity$1.Warning?i.warnings+=1:o===MarkerSeverity$1.Info?i.infos+=1:i.unknowns+=1;return i}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class MarkerService{constructor(){this._onMarkerChanged=new DebounceEmitter({delay:0,merge:MarkerService._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new DoubleResourceMap,this._stats=new MarkerStats(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,i){for(const o of i||[])this.changeOne(e,o,[])}changeOne(e,i,o){if(isFalsyOrEmpty(o))this._data.delete(i,e)&&this._onMarkerChanged.fire([i]);else{const a=[];for(const c of o){const d=MarkerService._toMarker(e,i,c);d&&a.push(d)}this._data.set(i,e,a),this._onMarkerChanged.fire([i])}}static _toMarker(e,i,o){let{code:a,severity:c,message:d,source:_,startLineNumber:b,startColumn:k,endLineNumber:j,endColumn:_e,relatedInformation:et,tags:tt}=o;if(!!d)return b=b>0?b:1,k=k>0?k:1,j=j>=b?j:b,_e=_e>0?_e:k,{resource:i,owner:e,code:a,severity:c,message:d,source:_,startLineNumber:b,startColumn:k,endLineNumber:j,endColumn:_e,relatedInformation:et,tags:tt}}changeAll(e,i){const o=[],a=this._data.values(e);if(a)for(const c of a){const d=Iterable.first(c);d&&(o.push(d.resource),this._data.delete(d.resource,e))}if(isNonEmptyArray(i)){const c=new ResourceMap;for(const{resource:d,marker:_}of i){const b=MarkerService._toMarker(e,d,_);if(!b)continue;const k=c.get(d);k?k.push(b):(c.set(d,[b]),o.push(d))}for(const[d,_]of c)this._data.set(d,e,_)}o.length>0&&this._onMarkerChanged.fire(o)}read(e=Object.create(null)){let{owner:i,resource:o,severities:a,take:c}=e;if((!c||c<0)&&(c=-1),i&&o){const d=this._data.get(o,i);if(d){const _=[];for(const b of d)if(MarkerService._accept(b,a)){const k=_.push(b);if(c>0&&k===c)break}return _}else return[]}else if(!i&&!o){const d=[];for(const _ of this._data.values())for(const b of _)if(MarkerService._accept(b,a)){const k=d.push(b);if(c>0&&k===c)return d}return d}else{const d=this._data.values(o!=null?o:i),_=[];for(const b of d)for(const k of b)if(MarkerService._accept(k,a)){const j=_.push(k);if(c>0&&j===c)return _}return _}}static _accept(e,i){return i===void 0||(i&e.severity)===e.severity}static _merge(e){const i=new ResourceMap;for(const o of e)for(const a of o)i.set(a,!0);return Array.from(i.keys())}}function score(s,e,i,o,a,c){if(Array.isArray(s)){let d=0;for(const _ of s){const b=score(_,e,i,o,a,c);if(b===10)return b;b>d&&(d=b)}return d}else{if(typeof s=="string")return o?s==="*"?5:s===i?10:0:0;if(s){const{language:d,pattern:_,scheme:b,hasAccessToAllModels:k,notebookType:j}=s;if(!o&&!k)return 0;j&&a&&(e=a);let _e=0;if(b)if(b===e.scheme)_e=10;else if(b==="*")_e=5;else return 0;if(d)if(d===i)_e=10;else if(d==="*")_e=Math.max(_e,5);else return 0;if(j)if(j===c)_e=10;else if(j==="*"&&c!==void 0)_e=Math.max(_e,5);else return 0;if(_){let et;if(typeof _=="string"?et=_:et=Object.assign(Object.assign({},_),{base:normalize(_.base)}),et===e.fsPath||match(et,e.fsPath))_e=10;else return 0}return _e}else return 0}}function isExclusive(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(isExclusive):!!s.exclusive}class MatchCandidate{constructor(e,i,o,a){this.uri=e,this.languageId=i,this.notebookUri=o,this.notebookType=a}equals(e){var i,o;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((i=this.notebookUri)===null||i===void 0?void 0:i.toString())===((o=e.notebookUri)===null||o===void 0?void 0:o.toString())}}class LanguageFeatureRegistry{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new Emitter$1,this.onDidChange=this._onDidChange.event}register(e,i){let o={selector:e,provider:i,_score:-1,_time:this._clock++};return this._entries.push(o),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),toDisposable(()=>{if(o){const a=this._entries.indexOf(o);a>=0&&(this._entries.splice(a,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),o=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const i=[];for(const o of this._entries)o._score>0&&i.push(o.provider);return i}ordered(e){const i=[];return this._orderedForEach(e,o=>i.push(o.provider)),i}orderedGroups(e){const i=[];let o,a;return this._orderedForEach(e,c=>{o&&a===c._score?o.push(c.provider):(a=c._score,o=[c.provider],i.push(o))}),i}_orderedForEach(e,i){this._updateScores(e);for(const o of this._entries)o._score>0&&i(o)}_updateScores(e){var i,o;const a=(i=this._notebookInfoResolver)===null||i===void 0?void 0:i.call(this,e.uri),c=a?new MatchCandidate(e.uri,e.getLanguageId(),a.uri,a.type):new MatchCandidate(e.uri,e.getLanguageId(),void 0,void 0);if(!(!((o=this._lastCandidate)===null||o===void 0)&&o.equals(c))){this._lastCandidate=c;for(const d of this._entries)if(d._score=score(d.selector,c.uri,c.languageId,shouldSynchronizeModel(e),c.notebookUri,c.notebookType),isExclusive(d.selector)&&d._score>0){for(const _ of this._entries)_._score=0;d._score=1e3;break}this._entries.sort(LanguageFeatureRegistry._compareByScoreAndTime)}}static _compareByScoreAndTime(e,i){return e._score<i._score?1:e._score>i._score?-1:e._time<i._time?1:e._time>i._time?-1:0}}class LanguageFeaturesService{constructor(){this.referenceProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentOnDropEditProvider=new LanguageFeatureRegistry(this._score.bind(this)),this.documentPasteEditProvider=new LanguageFeatureRegistry(this._score.bind(this))}_score(e){var i;return(i=this._notebookTypeResolver)===null||i===void 0?void 0:i.call(this,e)}}registerSingleton(ILanguageFeaturesService,LanguageFeaturesService,!0);class DefaultConfigurationModel extends ConfigurationModel{constructor(e={}){const i=Registry.as(Extensions$7.Configuration).getConfigurationProperties(),o=Object.keys(i),a=Object.create(null),c=[];for(const d in i){const _=e[d],b=_!==void 0?_:i[d].default;addToValueTree(a,d,b,k=>console.error(`Conflict in default settings: ${k}`))}for(const d of Object.keys(a))OVERRIDE_PROPERTY_REGEX.test(d)&&c.push({identifiers:overrideIdentifiersFromKey(d),keys:Object.keys(a[d]),contents:toValuesTree(a[d],_=>console.error(`Conflict in default settings file: ${_}`))});super(a,o,c)}}var __decorate$1=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param$1=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}},__awaiter$2=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};class SimpleModel{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new Emitter$1}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let StandaloneTextModelService=class{constructor(e){this.modelService=e}createModelReference(e){const i=this.modelService.getModel(e);return i?Promise.resolve(new ImmortalReference(new SimpleModel(i))):Promise.reject(new Error("Model not found"))}};StandaloneTextModelService=__decorate$1([__param$1(0,IModelService)],StandaloneTextModelService);class StandaloneEditorProgressService{show(){return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER}showWhile(e,i){return __awaiter$2(this,void 0,void 0,function*(){yield e})}}StandaloneEditorProgressService.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class StandaloneProgressService{withProgress(e,i,o){return i({report:()=>{}})}}class StandaloneDialogService{confirm(e){return this.doConfirm(e).then(i=>({confirmed:i,checkboxChecked:!1}))}doConfirm(e){let i=e.message;return e.detail&&(i=i+`

`+e.detail),Promise.resolve(window.confirm(i))}show(e,i,o,a){return Promise.resolve({choice:0})}}class StandaloneNotificationService{info(e){return this.notify({severity:Severity$1.Info,message:e})}warn(e){return this.notify({severity:Severity$1.Warning,message:e})}error(e){return this.notify({severity:Severity$1.Error,message:e})}notify(e){switch(e.severity){case Severity$1.Error:console.error(e.message);break;case Severity$1.Warning:console.warn(e.message);break;default:console.log(e.message);break}return StandaloneNotificationService.NO_OP}status(e,i){return Disposable.None}}StandaloneNotificationService.NO_OP=new NoOpNotification;let StandaloneCommandService=class{constructor(e){this._onWillExecuteCommand=new Emitter$1,this._onDidExecuteCommand=new Emitter$1,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...i){const o=CommandsRegistry.getCommand(e);if(!o)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:i});const a=this._instantiationService.invokeFunction.apply(this._instantiationService,[o.handler,...i]);return this._onDidExecuteCommand.fire({commandId:e,args:i}),Promise.resolve(a)}catch(a){return Promise.reject(a)}}};StandaloneCommandService=__decorate$1([__param$1(0,IInstantiationService)],StandaloneCommandService);let StandaloneKeybindingService=class extends AbstractKeybindingService{constructor(e,i,o,a,c,d){super(e,i,o,a,c),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const _=tt=>{const it=new DisposableStore;it.add(addDisposableListener(tt,EventType$1.KEY_DOWN,st=>{const ot=new StandardKeyboardEvent(st);this._dispatch(ot,ot.target)&&(ot.preventDefault(),ot.stopPropagation())})),it.add(addDisposableListener(tt,EventType$1.KEY_UP,st=>{const ot=new StandardKeyboardEvent(st);this._singleModifierDispatch(ot,ot.target)&&ot.preventDefault()})),this._domNodeListeners.push(new DomNodeListeners(tt,it))},b=tt=>{for(let it=0;it<this._domNodeListeners.length;it++){const st=this._domNodeListeners[it];st.domNode===tt&&(this._domNodeListeners.splice(it,1),st.dispose())}},k=tt=>{tt.getOption(56)||_(tt.getContainerDomNode())},j=tt=>{tt.getOption(56)||b(tt.getContainerDomNode())};this._register(d.onCodeEditorAdd(k)),this._register(d.onCodeEditorRemove(j)),d.listCodeEditors().forEach(k);const _e=tt=>{_(tt.getContainerDomNode())},et=tt=>{b(tt.getContainerDomNode())};this._register(d.onDiffEditorAdd(_e)),this._register(d.onDiffEditorRemove(et)),d.listDiffEditors().forEach(_e)}addDynamicKeybinding(e,i,o,a){return combinedDisposable(CommandsRegistry.registerCommand(e,o),this.addDynamicKeybindings([{keybinding:i,command:e,when:a}]))}addDynamicKeybindings(e){const i=e.map(o=>{var a,c;const d=createKeybinding(o.keybinding,OS);return{keybinding:(a=d==null?void 0:d.parts)!==null&&a!==void 0?a:null,command:(c=o.command)!==null&&c!==void 0?c:null,commandArgs:o.commandArgs,when:o.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}});return this._dynamicKeybindings=this._dynamicKeybindings.concat(i),this.updateResolver(),toDisposable(()=>{for(let o=0;o<this._dynamicKeybindings.length;o++)if(this._dynamicKeybindings[o]===i[0]){this._dynamicKeybindings.splice(o,i.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(),!0),i=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new KeybindingResolver(e,i,o=>this._log(o))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,i){const o=[];let a=0;for(const c of e){const d=c.when||void 0,_=c.keybinding;if(!_)o[a++]=new ResolvedKeybindingItem(void 0,c.command,c.commandArgs,d,i,null,!1);else{const b=USLayoutResolvedKeybinding.resolveUserBinding(_,OS);for(const k of b)o[a++]=new ResolvedKeybindingItem(k,c.command,c.commandArgs,d,i,null,!1)}}return o}resolveKeyboardEvent(e){const i=new SimpleKeybinding(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new USLayoutResolvedKeybinding(i,OS)}};StandaloneKeybindingService=__decorate$1([__param$1(0,IContextKeyService),__param$1(1,ICommandService),__param$1(2,ITelemetryService),__param$1(3,INotificationService),__param$1(4,ILogService),__param$1(5,ICodeEditorService)],StandaloneKeybindingService);class DomNodeListeners extends Disposable{constructor(e,i){super(),this.domNode=e,this._register(i)}}function isConfigurationOverrides(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof URI)}class StandaloneConfigurationService{constructor(){this._onDidChangeConfiguration=new Emitter$1,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new Configuration(new DefaultConfigurationModel,new ConfigurationModel,new ConfigurationModel,new ConfigurationModel)}getValue(e,i){const o=typeof e=="string"?e:void 0,a=isConfigurationOverrides(e)?e:isConfigurationOverrides(i)?i:{};return this._configuration.getValue(o,a,void 0)}updateValues(e){const i={data:this._configuration.toData()},o=[];for(const a of e){const[c,d]=a;this.getValue(c)!==d&&(this._configuration.updateValue(c,d),o.push(c))}if(o.length>0){const a=new ConfigurationChangeEvent({keys:o,overrides:[]},i,this._configuration);a.source=8,a.sourceConfig=null,this._onDidChangeConfiguration.fire(a)}return Promise.resolve()}updateValue(e,i,o,a){return this.updateValues([[e,i]])}inspect(e,i={}){return this._configuration.inspect(e,i,void 0)}}let StandaloneResourceConfigurationService=class{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new Emitter$1,this.configurationService.onDidChangeConfiguration(i=>{this._onDidChangeConfiguration.fire({affectedKeys:i.affectedKeys,affectsConfiguration:(o,a)=>i.affectsConfiguration(a)})})}getValue(e,i,o){const c=(Position$1.isIPosition(i)?i:null)?typeof o=="string"?o:void 0:typeof i=="string"?i:void 0;return typeof c>"u"?this.configurationService.getValue():this.configurationService.getValue(c)}};StandaloneResourceConfigurationService=__decorate$1([__param$1(0,IConfigurationService)],StandaloneResourceConfigurationService);let StandaloneResourcePropertiesService=class{constructor(e){this.configurationService=e}getEOL(e,i){const o=this.configurationService.getValue("files.eol",{overrideIdentifier:i,resource:e});return o&&typeof o=="string"&&o!=="auto"?o:isLinux||isMacintosh?`
`:`\r
`}};StandaloneResourcePropertiesService=__decorate$1([__param$1(0,IConfigurationService)],StandaloneResourcePropertiesService);class StandaloneTelemetryService{publicLog(e,i){return Promise.resolve(void 0)}publicLog2(e,i){return this.publicLog(e,i)}}class StandaloneWorkspaceContextService{constructor(){const e=URI.from({scheme:StandaloneWorkspaceContextService.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new WorkspaceFolder({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===StandaloneWorkspaceContextService.SCHEME?this.workspace.folders[0]:null}}StandaloneWorkspaceContextService.SCHEME="inmemory";function updateConfigurationService(s,e,i){if(!e||!(s instanceof StandaloneConfigurationService))return;const o=[];Object.keys(e).forEach(a=>{isEditorConfigurationKey(a)&&o.push([`editor.${a}`,e[a]]),i&&isDiffEditorConfigurationKey(a)&&o.push([`diffEditor.${a}`,e[a]])}),o.length>0&&s.updateValues(o)}let StandaloneBulkEditService=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,i){return __awaiter$2(this,void 0,void 0,function*(){const o=new Map;for(const d of e){if(!(d instanceof ResourceTextEdit))throw new Error("bad edit - only text edits are supported");const _=this._modelService.getModel(d.resource);if(!_)throw new Error("bad edit - model not found");if(typeof d.versionId=="number"&&_.getVersionId()!==d.versionId)throw new Error("bad state - model changed in the meantime");let b=o.get(_);b||(b=[],o.set(_,b)),b.push(EditOperation.replaceMove(Range$2.lift(d.textEdit.range),d.textEdit.text))}let a=0,c=0;for(const[d,_]of o)d.pushStackElement(),d.pushEditOperations([],_,()=>[]),d.pushStackElement(),c+=1,a+=_.length;return{ariaSummary:format(StandaloneServicesNLS.bulkEditServiceSummary,a,c)}})}};StandaloneBulkEditService=__decorate$1([__param$1(0,IModelService)],StandaloneBulkEditService);class StandaloneUriLabelService{getUriLabel(e,i){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return basename(e)}}let StandaloneContextViewService=class extends ContextViewService{constructor(e,i){super(e),this._codeEditorService=i}showContextView(e,i,o){if(!i){const a=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();a&&(i=a.getContainerDomNode())}return super.showContextView(e,i,o)}};StandaloneContextViewService=__decorate$1([__param$1(0,ILayoutService),__param$1(1,ICodeEditorService)],StandaloneContextViewService);class StandaloneWorkspaceTrustManagementService{constructor(){this._neverEmitter=new Emitter$1,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class StandaloneLanguageService extends LanguageService{constructor(){super()}}class StandaloneLogService extends LogService{constructor(){super(new ConsoleLogger)}}let StandaloneContextMenuService=class extends ContextMenuService{constructor(e,i,o,a,c){super(e,i,o,a,c),this.configure({blockMouse:!1})}};StandaloneContextMenuService=__decorate$1([__param$1(0,ITelemetryService),__param$1(1,INotificationService),__param$1(2,IContextViewService),__param$1(3,IKeybindingService),__param$1(4,IThemeService)],StandaloneContextMenuService);registerSingleton(IConfigurationService,StandaloneConfigurationService);registerSingleton(ITextResourceConfigurationService,StandaloneResourceConfigurationService);registerSingleton(ITextResourcePropertiesService,StandaloneResourcePropertiesService);registerSingleton(IWorkspaceContextService,StandaloneWorkspaceContextService);registerSingleton(ILabelService,StandaloneUriLabelService);registerSingleton(ITelemetryService,StandaloneTelemetryService);registerSingleton(IDialogService,StandaloneDialogService);registerSingleton(INotificationService,StandaloneNotificationService);registerSingleton(IMarkerService,MarkerService);registerSingleton(ILanguageService,StandaloneLanguageService);registerSingleton(IStandaloneThemeService,StandaloneThemeService);registerSingleton(ILogService,StandaloneLogService);registerSingleton(IModelService,ModelService);registerSingleton(IMarkerDecorationsService,MarkerDecorationsService);registerSingleton(IContextKeyService,ContextKeyService);registerSingleton(IProgressService,StandaloneProgressService);registerSingleton(IEditorProgressService,StandaloneEditorProgressService);registerSingleton(IStorageService,InMemoryStorageService);registerSingleton(IEditorWorkerService,EditorWorkerService);registerSingleton(IBulkEditService,StandaloneBulkEditService);registerSingleton(IWorkspaceTrustManagementService,StandaloneWorkspaceTrustManagementService);registerSingleton(ITextModelService,StandaloneTextModelService);registerSingleton(IAccessibilityService,AccessibilityService);registerSingleton(IListService,ListService);registerSingleton(ICommandService,StandaloneCommandService);registerSingleton(IKeybindingService,StandaloneKeybindingService);registerSingleton(IQuickInputService,StandaloneQuickInputService);registerSingleton(IContextViewService,StandaloneContextViewService);registerSingleton(IOpenerService,OpenerService);registerSingleton(IClipboardService,BrowserClipboardService);registerSingleton(IContextMenuService,StandaloneContextMenuService);registerSingleton(IMenuService,MenuService);var StandaloneServices;(function(s){const e=new ServiceCollection;for(const[d,_]of getSingletonServiceDescriptors())e.set(d,_);const i=new InstantiationService(e,!0);e.set(IInstantiationService,i);function o(d){const _=e.get(d);if(!_)throw new Error("Missing service "+d);return _ instanceof SyncDescriptor?i.invokeFunction(b=>b.get(d)):_}s.get=o;let a=!1;function c(d){if(a)return i;a=!0;for(const[_,b]of getSingletonServiceDescriptors())e.get(_)||e.set(_,b);for(const _ in d)if(d.hasOwnProperty(_)){const b=createDecorator(_);e.get(b)instanceof SyncDescriptor&&e.set(b,d[_])}return i}s.initialize=c})(StandaloneServices||(StandaloneServices={}));var __decorate=globalThis&&globalThis.__decorate||function(s,e,i,o){var a=arguments.length,c=a<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,e,i,o);else for(var _=s.length-1;_>=0;_--)(d=s[_])&&(c=(a<3?d(c):a>3?d(e,i,c):d(e,i))||c);return a>3&&c&&Object.defineProperty(e,i,c),c},__param=globalThis&&globalThis.__param||function(s,e){return function(i,o){e(i,o,s)}};let LAST_GENERATED_COMMAND_ID=0,ariaDomNodeCreated=!1;function createAriaDomNode(s){if(!s){if(ariaDomNodeCreated)return;ariaDomNodeCreated=!0}setARIAContainer(s||document.body)}let StandaloneCodeEditor=class extends CodeEditorWidget{constructor(e,i,o,a,c,d,_,b,k,j,_e,et){const tt=Object.assign({},i);tt.ariaLabel=tt.ariaLabel||StandaloneCodeEditorNLS.editorViewAccessibleLabel,tt.ariaLabel=tt.ariaLabel+";"+StandaloneCodeEditorNLS.accessibilityHelpMessage,super(e,tt,{},o,a,c,d,b,k,j,_e,et),_ instanceof StandaloneKeybindingService?this._standaloneKeybindingService=_:this._standaloneKeybindingService=null,createAriaDomNode(tt.ariaContainerElement)}addCommand(e,i,o){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const a="DYNAMIC_"+ ++LAST_GENERATED_COMMAND_ID,c=ContextKeyExpr.deserialize(o);return this._standaloneKeybindingService.addDynamicKeybinding(a,e,i,c),a}createContextKey(e,i){return this._contextKeyService.createKey(e,i)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Disposable.None;const i=e.id,o=e.label,a=ContextKeyExpr.and(ContextKeyExpr.equals("editorId",this.getId()),ContextKeyExpr.deserialize(e.precondition)),c=e.keybindings,d=ContextKeyExpr.and(a,ContextKeyExpr.deserialize(e.keybindingContext)),_=e.contextMenuGroupId||null,b=e.contextMenuOrder||0,k=(tt,...it)=>Promise.resolve(e.run(this,...it)),j=new DisposableStore,_e=this.getId()+":"+i;if(j.add(CommandsRegistry.registerCommand(_e,k)),_){const tt={command:{id:_e,title:o},when:a,group:_,order:b};j.add(MenuRegistry.appendMenuItem(MenuId.EditorContext,tt))}if(Array.isArray(c))for(const tt of c)j.add(this._standaloneKeybindingService.addDynamicKeybinding(_e,tt,k,d));const et=new InternalEditorAction(_e,o,o,a,k,this._contextKeyService);return this._actions[i]=et,j.add(toDisposable(()=>{delete this._actions[i]})),j}_triggerCommand(e,i){if(this._codeEditorService instanceof StandaloneCodeEditorService)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,i)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,i)}};StandaloneCodeEditor=__decorate([__param(2,IInstantiationService),__param(3,ICodeEditorService),__param(4,ICommandService),__param(5,IContextKeyService),__param(6,IKeybindingService),__param(7,IThemeService),__param(8,INotificationService),__param(9,IAccessibilityService),__param(10,ILanguageConfigurationService),__param(11,ILanguageFeaturesService)],StandaloneCodeEditor);let StandaloneEditor=class extends StandaloneCodeEditor{constructor(e,i,o,a,c,d,_,b,k,j,_e,et,tt,it,st){const ot=Object.assign({},i);updateConfigurationService(j,ot,!1);const nt=b.registerEditorContainer(e);typeof ot.theme=="string"&&b.setTheme(ot.theme),typeof ot.autoDetectHighContrast<"u"&&b.setAutoDetectHighContrast(Boolean(ot.autoDetectHighContrast));const rt=ot.model;delete ot.model,super(e,ot,o,a,c,d,_,b,k,_e,it,st),this._configurationService=j,this._standaloneThemeService=b,this._register(nt);let at;if(typeof rt>"u"){const lt=tt.getLanguageIdByMimeType(ot.language)||ot.language||PLAINTEXT_LANGUAGE_ID;at=createTextModel(et,tt,ot.value||"",lt,void 0),this._ownsModel=!0}else at=rt,this._ownsModel=!1;if(this._attachModel(at),at){const lt={oldModelUrl:null,newModelUrl:at.uri};this._onDidChangeModel.fire(lt)}}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};StandaloneEditor=__decorate([__param(2,IInstantiationService),__param(3,ICodeEditorService),__param(4,ICommandService),__param(5,IContextKeyService),__param(6,IKeybindingService),__param(7,IStandaloneThemeService),__param(8,INotificationService),__param(9,IConfigurationService),__param(10,IAccessibilityService),__param(11,IModelService),__param(12,ILanguageService),__param(13,ILanguageConfigurationService),__param(14,ILanguageFeaturesService)],StandaloneEditor);let StandaloneDiffEditor=class extends DiffEditorWidget{constructor(e,i,o,a,c,d,_,b,k,j,_e,et){const tt=Object.assign({},i);updateConfigurationService(k,tt,!0);const it=_.registerEditorContainer(e);typeof tt.theme=="string"&&_.setTheme(tt.theme),typeof tt.autoDetectHighContrast<"u"&&_.setAutoDetectHighContrast(Boolean(tt.autoDetectHighContrast)),super(e,tt,{},et,c,a,o,d,_,b,j,_e),this._configurationService=k,this._standaloneThemeService=_,this._register(it)}dispose(){super.dispose()}updateOptions(e){updateConfigurationService(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,i,o){return e.createInstance(StandaloneCodeEditor,i,o)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,i,o){return this.getModifiedEditor().addCommand(e,i,o)}createContextKey(e,i){return this.getModifiedEditor().createContextKey(e,i)}addAction(e){return this.getModifiedEditor().addAction(e)}};StandaloneDiffEditor=__decorate([__param(2,IInstantiationService),__param(3,IContextKeyService),__param(4,IEditorWorkerService),__param(5,ICodeEditorService),__param(6,IStandaloneThemeService),__param(7,INotificationService),__param(8,IConfigurationService),__param(9,IContextMenuService),__param(10,IEditorProgressService),__param(11,IClipboardService)],StandaloneDiffEditor);function createTextModel(s,e,i,o,a){if(i=i||"",!o){const c=i.indexOf(`
`);let d=i;return c!==-1&&(d=i.substring(0,c)),doCreateModel(s,i,e.createByFilepathOrFirstLine(a||null,d),a)}return doCreateModel(s,i,e.createById(o),a)}function doCreateModel(s,e,i,o){return s.createModel(e,i,o)}function create(s,e,i){return StandaloneServices.initialize(i||{}).createInstance(StandaloneEditor,s,e)}function onDidCreateEditor(s){return StandaloneServices.get(ICodeEditorService).onCodeEditorAdd(i=>{s(i)})}function onDidCreateDiffEditor(s){return StandaloneServices.get(ICodeEditorService).onDiffEditorAdd(i=>{s(i)})}function getEditors(){return StandaloneServices.get(ICodeEditorService).listCodeEditors()}function getDiffEditors(){return StandaloneServices.get(ICodeEditorService).listDiffEditors()}function createDiffEditor(s,e,i){return StandaloneServices.initialize(i||{}).createInstance(StandaloneDiffEditor,s,e)}function createDiffNavigator(s,e){return new DiffNavigator(s,e)}function addCommand(s){if(typeof s.id!="string"||typeof s.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return CommandsRegistry.registerCommand(s.id,s.run)}function addEditorAction(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=ContextKeyExpr.deserialize(s.precondition),i=(a,...c)=>EditorCommand.runEditorCommand(a,c,e,(d,_,b)=>Promise.resolve(s.run(_,...b))),o=new DisposableStore;if(o.add(CommandsRegistry.registerCommand(s.id,i)),s.contextMenuGroupId){const a={command:{id:s.id,title:s.label},when:e,group:s.contextMenuGroupId,order:s.contextMenuOrder||0};o.add(MenuRegistry.appendMenuItem(MenuId.EditorContext,a))}if(Array.isArray(s.keybindings)){const a=StandaloneServices.get(IKeybindingService);if(!(a instanceof StandaloneKeybindingService))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const c=ContextKeyExpr.and(e,ContextKeyExpr.deserialize(s.keybindingContext));o.add(a.addDynamicKeybindings(s.keybindings.map(d=>({keybinding:d,command:s.id,when:c}))))}}return o}function addKeybindingRule(s){return addKeybindingRules([s])}function addKeybindingRules(s){const e=StandaloneServices.get(IKeybindingService);return e instanceof StandaloneKeybindingService?e.addDynamicKeybindings(s.map(i=>({keybinding:i.keybinding,command:i.command,commandArgs:i.commandArgs,when:ContextKeyExpr.deserialize(i.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Disposable.None)}function createModel(s,e,i){const o=StandaloneServices.get(ILanguageService),a=o.getLanguageIdByMimeType(e)||e;return createTextModel(StandaloneServices.get(IModelService),o,s,a,i)}function setModelLanguage(s,e){const i=StandaloneServices.get(ILanguageService);StandaloneServices.get(IModelService).setMode(s,i.createById(e))}function setModelMarkers(s,e,i){s&&StandaloneServices.get(IMarkerService).changeOne(e,s.uri,i)}function removeAllMarkers(s){StandaloneServices.get(IMarkerService).changeAll(s,[])}function getModelMarkers(s){return StandaloneServices.get(IMarkerService).read(s)}function onDidChangeMarkers(s){return StandaloneServices.get(IMarkerService).onMarkerChanged(s)}function getModel(s){return StandaloneServices.get(IModelService).getModel(s)}function getModels(){return StandaloneServices.get(IModelService).getModels()}function onDidCreateModel(s){return StandaloneServices.get(IModelService).onModelAdded(s)}function onWillDisposeModel(s){return StandaloneServices.get(IModelService).onModelRemoved(s)}function onDidChangeModelLanguage(s){return StandaloneServices.get(IModelService).onModelLanguageChanged(i=>{s({model:i.model,oldLanguage:i.oldLanguageId})})}function createWebWorker(s){return createWebWorker$1(StandaloneServices.get(IModelService),StandaloneServices.get(ILanguageConfigurationService),s)}function colorizeElement(s,e){const i=StandaloneServices.get(ILanguageService),o=StandaloneServices.get(IStandaloneThemeService);return o.registerEditorContainer(s),Colorizer.colorizeElement(o,i,s,e)}function colorize(s,e,i){const o=StandaloneServices.get(ILanguageService);return StandaloneServices.get(IStandaloneThemeService).registerEditorContainer(document.body),Colorizer.colorize(o,s,e,i)}function colorizeModelLine(s,e,i=4){return StandaloneServices.get(IStandaloneThemeService).registerEditorContainer(document.body),Colorizer.colorizeModelLine(s,e,i)}function getSafeTokenizationSupport(s){const e=TokenizationRegistry.get(s);return e||{getInitialState:()=>NullState,tokenize:(i,o,a)=>nullTokenize(s,a)}}function tokenize(s,e){TokenizationRegistry.getOrCreate(e);const i=getSafeTokenizationSupport(e),o=splitLines(s),a=[];let c=i.getInitialState();for(let d=0,_=o.length;d<_;d++){const b=o[d],k=i.tokenize(b,!0,c);a[d]=k.tokens,c=k.endState}return a}function defineTheme(s,e){StandaloneServices.get(IStandaloneThemeService).defineTheme(s,e)}function setTheme(s){StandaloneServices.get(IStandaloneThemeService).setTheme(s)}function remeasureFonts(){FontMeasurements.clearAllFontInfos()}function registerCommand(s,e){return CommandsRegistry.registerCommand({id:s,handler:e})}function createMonacoEditorAPI(){return{create,getEditors,getDiffEditors,onDidCreateEditor,onDidCreateDiffEditor,createDiffEditor,createDiffNavigator,addCommand,addEditorAction,addKeybindingRule,addKeybindingRules,createModel,setModelLanguage,setModelMarkers,getModelMarkers,removeAllMarkers,onDidChangeMarkers,getModels,getModel,onDidCreateModel,onWillDisposeModel,onDidChangeModelLanguage,createWebWorker,colorizeElement,colorize,colorizeModelLine,tokenize,defineTheme,setTheme,remeasureFonts,registerCommand,AccessibilitySupport,ContentWidgetPositionPreference,CursorChangeReason,DefaultEndOfLine,EditorAutoIndentStrategy,EditorOption,EndOfLinePreference,EndOfLineSequence,MinimapPosition:MinimapPosition$1,MouseTargetType,OverlayWidgetPositionPreference,OverviewRulerLane:OverviewRulerLane$1,RenderLineNumbersType,RenderMinimap,ScrollbarVisibility,ScrollType,TextEditorCursorBlinkingStyle,TextEditorCursorStyle,TrackedRangeStickiness,WrappingIndent,InjectedTextCursorStops:InjectedTextCursorStops$1,PositionAffinity,ConfigurationChangedEvent,BareFontInfo,FontInfo,TextModelResolvedOptions,FindMatch,ApplyUpdateResult,EditorType,EditorOptions}}function isArrayOf(s,e){if(!e||!Array.isArray(e))return!1;for(const i of e)if(!s(i))return!1;return!0}function bool(s,e){return typeof s=="boolean"?s:e}function string(s,e){return typeof s=="string"?s:e}function arrayToHash(s){const e={};for(const i of s)e[i]=!0;return e}function createKeywordMatcher(s,e=!1){e&&(s=s.map(function(o){return o.toLowerCase()}));const i=arrayToHash(s);return e?function(o){return i[o.toLowerCase()]!==void 0&&i.hasOwnProperty(o.toLowerCase())}:function(o){return i[o]!==void 0&&i.hasOwnProperty(o)}}function compileRegExp(s,e){e=e.replace(/@@/g,"");let i=0,o;do o=!1,e=e.replace(/@(\w+)/g,function(c,d){o=!0;let _="";if(typeof s[d]=="string")_=s[d];else if(s[d]&&s[d]instanceof RegExp)_=s[d].source;else throw s[d]===void 0?createError(s,"language definition does not contain attribute '"+d+"', used at: "+e):createError(s,"attribute reference '"+d+"' must be a string, used at: "+e);return empty(_)?"":"(?:"+_+")"}),i++;while(o&&i<5);e=e.replace(/\x01/g,"@");const a=(s.ignoreCase?"i":"")+(s.unicode?"u":"");return new RegExp(e,a)}function selectScrutinee(s,e,i,o){if(o<0)return s;if(o<e.length)return e[o];if(o>=100){o=o-100;const a=i.split(".");if(a.unshift(i),o<a.length)return a[o]}return null}function createGuard(s,e,i,o){let a=-1,c=i,d=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);d&&(d[3]&&(a=parseInt(d[3]),d[2]&&(a=a+100)),c=d[4]);let _="~",b=c;!c||c.length===0?(_="!=",b=""):/^\w*$/.test(b)?_="==":(d=c.match(/^(@|!@|~|!~|==|!=)(.*)$/),d&&(_=d[1],b=d[2]));let k;if((_==="~"||_==="!~")&&/^(\w|\|)*$/.test(b)){const j=createKeywordMatcher(b.split("|"),s.ignoreCase);k=function(_e){return _==="~"?j(_e):!j(_e)}}else if(_==="@"||_==="!@"){const j=s[b];if(!j)throw createError(s,"the @ match target '"+b+"' is not defined, in rule: "+e);if(!isArrayOf(function(et){return typeof et=="string"},j))throw createError(s,"the @ match target '"+b+"' must be an array of strings, in rule: "+e);const _e=createKeywordMatcher(j,s.ignoreCase);k=function(et){return _==="@"?_e(et):!_e(et)}}else if(_==="~"||_==="!~")if(b.indexOf("$")<0){const j=compileRegExp(s,"^"+b+"$");k=function(_e){return _==="~"?j.test(_e):!j.test(_e)}}else k=function(j,_e,et,tt){return compileRegExp(s,"^"+substituteMatches(s,b,_e,et,tt)+"$").test(j)};else if(b.indexOf("$")<0){const j=fixCase(s,b);k=function(_e){return _==="=="?_e===j:_e!==j}}else{const j=fixCase(s,b);k=function(_e,et,tt,it,st){const ot=substituteMatches(s,j,et,tt,it);return _==="=="?_e===ot:_e!==ot}}return a===-1?{name:i,value:o,test:function(j,_e,et,tt){return k(j,j,_e,et,tt)}}:{name:i,value:o,test:function(j,_e,et,tt){const it=selectScrutinee(j,_e,et,a);return k(it||"",j,_e,et,tt)}}}function compileAction(s,e,i){if(i){if(typeof i=="string")return i;if(i.token||i.token===""){if(typeof i.token!="string")throw createError(s,"a 'token' attribute must be of type string, in rule: "+e);{const o={token:i.token};if(i.token.indexOf("$")>=0&&(o.tokenSubst=!0),typeof i.bracket=="string")if(i.bracket==="@open")o.bracket=1;else if(i.bracket==="@close")o.bracket=-1;else throw createError(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(i.next){if(typeof i.next!="string")throw createError(s,"the next state must be a string value in rule: "+e);{let a=i.next;if(!/^(@pop|@push|@popall)$/.test(a)&&(a[0]==="@"&&(a=a.substr(1)),a.indexOf("$")<0&&!stateExists(s,substituteMatches(s,a,"",[],""))))throw createError(s,"the next state '"+i.next+"' is not defined in rule: "+e);o.next=a}}return typeof i.goBack=="number"&&(o.goBack=i.goBack),typeof i.switchTo=="string"&&(o.switchTo=i.switchTo),typeof i.log=="string"&&(o.log=i.log),typeof i.nextEmbedded=="string"&&(o.nextEmbedded=i.nextEmbedded,s.usesEmbedded=!0),o}}else if(Array.isArray(i)){const o=[];for(let a=0,c=i.length;a<c;a++)o[a]=compileAction(s,e,i[a]);return{group:o}}else if(i.cases){const o=[];for(const c in i.cases)if(i.cases.hasOwnProperty(c)){const d=compileAction(s,e,i.cases[c]);c==="@default"||c==="@"||c===""?o.push({test:void 0,value:d,name:c}):c==="@eos"?o.push({test:function(_,b,k,j){return j},value:d,name:c}):o.push(createGuard(s,e,c,d))}const a=s.defaultToken;return{test:function(c,d,_,b){for(const k of o)if(!k.test||k.test(c,d,_,b))return k.value;return a}}}else throw createError(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class Rule{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,i){let o;if(typeof i=="string")o=i;else if(i instanceof RegExp)o=i.source;else throw createError(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=o.length>0&&o[0]==="^",this.name=this.name+": "+o,this.regex=compileRegExp(e,"^(?:"+(this.matchOnlyAtLineStart?o.substr(1):o)+")")}setAction(e,i){this.action=compileAction(e,this.name,i)}}function compile(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const i={};i.languageId=s,i.includeLF=bool(e.includeLF,!1),i.noThrow=!1,i.maxStack=100,i.start=typeof e.start=="string"?e.start:null,i.ignoreCase=bool(e.ignoreCase,!1),i.unicode=bool(e.unicode,!1),i.tokenPostfix=string(e.tokenPostfix,"."+i.languageId),i.defaultToken=string(e.defaultToken,"source"),i.usesEmbedded=!1;const o=e;o.languageId=s,o.includeLF=i.includeLF,o.ignoreCase=i.ignoreCase,o.unicode=i.unicode,o.noThrow=i.noThrow,o.usesEmbedded=i.usesEmbedded,o.stateNames=e.tokenizer,o.defaultToken=i.defaultToken;function a(d,_,b){for(const k of b){let j=k.include;if(j){if(typeof j!="string")throw createError(i,"an 'include' attribute must be a string at: "+d);if(j[0]==="@"&&(j=j.substr(1)),!e.tokenizer[j])throw createError(i,"include target '"+j+"' is not defined at: "+d);a(d+"."+j,_,e.tokenizer[j])}else{const _e=new Rule(d);if(Array.isArray(k)&&k.length>=1&&k.length<=3)if(_e.setRegex(o,k[0]),k.length>=3)if(typeof k[1]=="string")_e.setAction(o,{token:k[1],next:k[2]});else if(typeof k[1]=="object"){const et=k[1];et.next=k[2],_e.setAction(o,et)}else throw createError(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+d);else _e.setAction(o,k[1]);else{if(!k.regex)throw createError(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+d);k.name&&typeof k.name=="string"&&(_e.name=k.name),k.matchOnlyAtStart&&(_e.matchOnlyAtLineStart=bool(k.matchOnlyAtLineStart,!1)),_e.setRegex(o,k.regex),_e.setAction(o,k.action)}_.push(_e)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw createError(i,"a language definition must define the 'tokenizer' attribute as an object");i.tokenizer=[];for(const d in e.tokenizer)if(e.tokenizer.hasOwnProperty(d)){i.start||(i.start=d);const _=e.tokenizer[d];i.tokenizer[d]=new Array,a("tokenizer."+d,i.tokenizer[d],_)}if(i.usesEmbedded=o.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw createError(i,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const c=[];for(const d of e.brackets){let _=d;if(_&&Array.isArray(_)&&_.length===3&&(_={token:_[2],open:_[0],close:_[1]}),_.open===_.close)throw createError(i,"open and close brackets in a 'brackets' attribute must be different: "+_.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof _.open=="string"&&typeof _.token=="string"&&typeof _.close=="string")c.push({token:_.token+i.tokenPostfix,open:fixCase(i,_.open),close:fixCase(i,_.close)});else throw createError(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return i.brackets=c,i.noThrow=!0,i}var __awaiter$1=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function register(s){ModesRegistry.registerLanguage(s)}function getLanguages(){let s=[];return s=s.concat(ModesRegistry.getLanguages()),s}function getEncodedLanguageId(s){return StandaloneServices.get(ILanguageService).languageIdCodec.encodeLanguageId(s)}function onLanguage(s,e){const o=StandaloneServices.get(ILanguageService).onDidEncounterLanguage(a=>{a===s&&(o.dispose(),e())});return o}function setLanguageConfiguration(s,e){if(!StandaloneServices.get(ILanguageService).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return StandaloneServices.get(ILanguageConfigurationService).register(s,e,100)}class EncodedTokenizationSupportAdapter{constructor(e,i){this._languageId=e,this._actual=i}getInitialState(){return this._actual.getInitialState()}tokenize(e,i,o){if(typeof this._actual.tokenize=="function")return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,o);throw new Error("Not supported!")}tokenizeEncoded(e,i,o){const a=this._actual.tokenizeEncoded(e,o);return new EncodedTokenizationResult(a.tokens,a.endState)}}class TokenizationSupportAdapter{constructor(e,i,o,a){this._languageId=e,this._actual=i,this._languageService=o,this._standaloneThemeService=a}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,i){const o=[];let a=0;for(let c=0,d=e.length;c<d;c++){const _=e[c];let b=_.startIndex;c===0?b=0:b<a&&(b=a),o[c]=new Token$2(b,_.scopes,i),a=b}return o}static adaptTokenize(e,i,o,a){const c=i.tokenize(o,a),d=TokenizationSupportAdapter._toClassicTokens(c.tokens,e);let _;return c.endState.equals(a)?_=a:_=c.endState,new TokenizationResult(d,_)}tokenize(e,i,o){return TokenizationSupportAdapter.adaptTokenize(this._languageId,this._actual,e,o)}_toBinaryTokens(e,i){const o=e.encodeLanguageId(this._languageId),a=this._standaloneThemeService.getColorTheme().tokenTheme,c=[];let d=0,_=0;for(let k=0,j=i.length;k<j;k++){const _e=i[k],et=a.match(o,_e.scopes);if(d>0&&c[d-1]===et)continue;let tt=_e.startIndex;k===0?tt=0:tt<_&&(tt=_),c[d++]=tt,c[d++]=et,_=tt}const b=new Uint32Array(d);for(let k=0;k<d;k++)b[k]=c[k];return b}tokenizeEncoded(e,i,o){const a=this._actual.tokenize(e,o),c=this._toBinaryTokens(this._languageService.languageIdCodec,a.tokens);let d;return a.endState.equals(o)?d=o:d=a.endState,new EncodedTokenizationResult(c,d)}}function isATokensProvider(s){return typeof s.getInitialState=="function"}function isEncodedTokensProvider(s){return"tokenizeEncoded"in s}function isThenable(s){return s&&typeof s.then=="function"}function setColorMap(s){const e=StandaloneServices.get(IStandaloneThemeService);if(s){const i=[null];for(let o=1,a=s.length;o<a;o++)i[o]=Color.fromHex(s[o]);e.setColorMapOverride(i)}else e.setColorMapOverride(null)}function createTokenizationSupportAdapter(s,e){return isEncodedTokensProvider(e)?new EncodedTokenizationSupportAdapter(s,e):new TokenizationSupportAdapter(s,e,StandaloneServices.get(ILanguageService),StandaloneServices.get(IStandaloneThemeService))}function registerTokensProviderFactory(s,e){const i={createTokenizationSupport:()=>__awaiter$1(this,void 0,void 0,function*(){const o=yield Promise.resolve(e.create());return o?isATokensProvider(o)?createTokenizationSupportAdapter(s,o):new MonarchTokenizer(StandaloneServices.get(ILanguageService),StandaloneServices.get(IStandaloneThemeService),s,compile(s,o),StandaloneServices.get(IConfigurationService)):null})};return TokenizationRegistry.registerFactory(s,i)}function setTokensProvider(s,e){if(!StandaloneServices.get(ILanguageService).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return isThenable(e)?registerTokensProviderFactory(s,{create:()=>e}):TokenizationRegistry.register(s,createTokenizationSupportAdapter(s,e))}function setMonarchTokensProvider(s,e){const i=o=>new MonarchTokenizer(StandaloneServices.get(ILanguageService),StandaloneServices.get(IStandaloneThemeService),s,compile(s,o),StandaloneServices.get(IConfigurationService));return isThenable(e)?registerTokensProviderFactory(s,{create:()=>e}):TokenizationRegistry.register(s,i(e))}function registerReferenceProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).referenceProvider.register(s,e)}function registerRenameProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).renameProvider.register(s,e)}function registerSignatureHelpProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).signatureHelpProvider.register(s,e)}function registerHoverProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).hoverProvider.register(s,{provideHover:(o,a,c)=>{const d=o.getWordAtPosition(a);return Promise.resolve(e.provideHover(o,a,c)).then(_=>{if(!!_)return!_.range&&d&&(_.range=new Range$2(a.lineNumber,d.startColumn,a.lineNumber,d.endColumn)),_.range||(_.range=new Range$2(a.lineNumber,a.column,a.lineNumber,a.column)),_})}})}function registerDocumentSymbolProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentSymbolProvider.register(s,e)}function registerDocumentHighlightProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentHighlightProvider.register(s,e)}function registerLinkedEditingRangeProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).linkedEditingRangeProvider.register(s,e)}function registerDefinitionProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).definitionProvider.register(s,e)}function registerImplementationProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).implementationProvider.register(s,e)}function registerTypeDefinitionProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).typeDefinitionProvider.register(s,e)}function registerCodeLensProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).codeLensProvider.register(s,e)}function registerCodeActionProvider(s,e,i){return StandaloneServices.get(ILanguageFeaturesService).codeActionProvider.register(s,{providedCodeActionKinds:i==null?void 0:i.providedCodeActionKinds,documentation:i==null?void 0:i.documentation,provideCodeActions:(a,c,d,_)=>{const k=StandaloneServices.get(IMarkerService).read({resource:a.uri}).filter(j=>Range$2.areIntersectingOrTouching(j,c));return e.provideCodeActions(a,c,{markers:k,only:d.only,trigger:d.trigger},_)},resolveCodeAction:e.resolveCodeAction})}function registerDocumentFormattingEditProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentFormattingEditProvider.register(s,e)}function registerDocumentRangeFormattingEditProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentRangeFormattingEditProvider.register(s,e)}function registerOnTypeFormattingEditProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).onTypeFormattingEditProvider.register(s,e)}function registerLinkProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).linkProvider.register(s,e)}function registerCompletionItemProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).completionProvider.register(s,e)}function registerColorProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).colorProvider.register(s,e)}function registerFoldingRangeProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).foldingRangeProvider.register(s,e)}function registerDeclarationProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).declarationProvider.register(s,e)}function registerSelectionRangeProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).selectionRangeProvider.register(s,e)}function registerDocumentSemanticTokensProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentSemanticTokensProvider.register(s,e)}function registerDocumentRangeSemanticTokensProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).documentRangeSemanticTokensProvider.register(s,e)}function registerInlineCompletionsProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).inlineCompletionsProvider.register(s,e)}function registerInlayHintsProvider(s,e){return StandaloneServices.get(ILanguageFeaturesService).inlayHintsProvider.register(s,e)}function createMonacoLanguagesAPI(){return{register,getLanguages,onLanguage,getEncodedLanguageId,setLanguageConfiguration,setColorMap,registerTokensProviderFactory,setTokensProvider,setMonarchTokensProvider,registerReferenceProvider,registerRenameProvider,registerCompletionItemProvider,registerSignatureHelpProvider,registerHoverProvider,registerDocumentSymbolProvider,registerDocumentHighlightProvider,registerLinkedEditingRangeProvider,registerDefinitionProvider,registerImplementationProvider,registerTypeDefinitionProvider,registerCodeLensProvider,registerCodeActionProvider,registerDocumentFormattingEditProvider,registerDocumentRangeFormattingEditProvider,registerOnTypeFormattingEditProvider,registerLinkProvider,registerColorProvider,registerFoldingRangeProvider,registerDeclarationProvider,registerSelectionRangeProvider,registerDocumentSemanticTokensProvider,registerDocumentRangeSemanticTokensProvider,registerInlineCompletionsProvider,registerInlayHintsProvider,DocumentHighlightKind,CompletionItemKind,CompletionItemTag,CompletionItemInsertTextRule,SymbolKind,SymbolTag,IndentAction:IndentAction$1,CompletionTriggerKind,SignatureHelpTriggerKind,InlayHintKind,InlineCompletionTriggerKind,CodeActionTriggerType,FoldingRangeKind}}const IEditorCancellationTokens=createDecorator("IEditorCancelService"),ctxCancellableOperation=new RawContextKey("cancellableOperation",!1,localize("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));registerSingleton(IEditorCancellationTokens,class{constructor(){this._tokens=new WeakMap}add(s,e){let i=this._tokens.get(s);i||(i=s.invokeWithinContext(a=>{const c=ctxCancellableOperation.bindTo(a.get(IContextKeyService)),d=new LinkedList;return{key:c,tokens:d}}),this._tokens.set(s,i));let o;return i.key.set(!0),o=i.tokens.push(e),()=>{o&&(o(),i.key.set(!i.tokens.isEmpty()),o=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const i=e.tokens.pop();i&&(i.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);registerEditorCommand(new class extends EditorCommand{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:ctxCancellableOperation})}runEditorCommand(s,e){s.get(IEditorCancellationTokens).cancel(e)}});class ExtensionIdentifier{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var __awaiter=globalThis&&globalThis.__awaiter||function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function _(j){try{k(o.next(j))}catch(_e){d(_e)}}function b(j){try{k(o.throw(j))}catch(_e){d(_e)}}function k(j){j.done?c(j.value):a(j.value).then(_,b)}k((o=o.apply(s,e||[])).next())})};function getRealAndSyntheticDocumentFormattersOrdered(s,e,i){const o=[],a=new Set,c=s.ordered(i);for(const _ of c)o.push(_),_.extensionId&&a.add(ExtensionIdentifier.toKey(_.extensionId));const d=e.ordered(i);for(const _ of d){if(_.extensionId){if(a.has(ExtensionIdentifier.toKey(_.extensionId)))continue;a.add(ExtensionIdentifier.toKey(_.extensionId))}o.push({displayName:_.displayName,extensionId:_.extensionId,provideDocumentFormattingEdits(b,k,j){return _.provideDocumentRangeFormattingEdits(b,b.getFullModelRange(),k,j)}})}return o}class FormattingConflicts{static setFormatterSelector(e){return{dispose:FormattingConflicts._selectors.unshift(e)}}static select(e,i,o){return __awaiter(this,void 0,void 0,function*(){if(e.length===0)return;const a=Iterable.first(FormattingConflicts._selectors);if(a)return yield a(e,i,o)})}}FormattingConflicts._selectors=new LinkedList;function getDocumentRangeFormattingEditsUntilResult(s,e,i,o,a,c){return __awaiter(this,void 0,void 0,function*(){const d=e.documentRangeFormattingEditProvider.ordered(i);for(const _ of d){const b=yield Promise.resolve(_.provideDocumentRangeFormattingEdits(i,o,a,c)).catch(onUnexpectedExternalError);if(isNonEmptyArray(b))return yield s.computeMoreMinimalEdits(i.uri,b)}})}function getDocumentFormattingEditsUntilResult(s,e,i,o,a){return __awaiter(this,void 0,void 0,function*(){const c=getRealAndSyntheticDocumentFormattersOrdered(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,i);for(const d of c){const _=yield Promise.resolve(d.provideDocumentFormattingEdits(i,o,a)).catch(onUnexpectedExternalError);if(isNonEmptyArray(_))return yield s.computeMoreMinimalEdits(i.uri,_)}})}function getOnTypeFormattingEdits(s,e,i,o,a,c,d){const _=e.onTypeFormattingEditProvider.ordered(i);return _.length===0||_[0].autoFormatTriggerCharacters.indexOf(a)<0?Promise.resolve(void 0):Promise.resolve(_[0].provideOnTypeFormattingEdits(i,o,a,c,d)).catch(onUnexpectedExternalError).then(b=>s.computeMoreMinimalEdits(i.uri,b))}CommandsRegistry.registerCommand("_executeFormatRangeProvider",function(s,...e){return __awaiter(this,void 0,void 0,function*(){const[i,o,a]=e;assertType(URI.isUri(i)),assertType(Range$2.isIRange(o));const c=s.get(ITextModelService),d=s.get(IEditorWorkerService),_=s.get(ILanguageFeaturesService),b=yield c.createModelReference(i);try{return getDocumentRangeFormattingEditsUntilResult(d,_,b.object.textEditorModel,Range$2.lift(o),a,CancellationToken.None)}finally{b.dispose()}})});CommandsRegistry.registerCommand("_executeFormatDocumentProvider",function(s,...e){return __awaiter(this,void 0,void 0,function*(){const[i,o]=e;assertType(URI.isUri(i));const a=s.get(ITextModelService),c=s.get(IEditorWorkerService),d=s.get(ILanguageFeaturesService),_=yield a.createModelReference(i);try{return getDocumentFormattingEditsUntilResult(c,d,_.object.textEditorModel,o,CancellationToken.None)}finally{_.dispose()}})});CommandsRegistry.registerCommand("_executeFormatOnTypeProvider",function(s,...e){return __awaiter(this,void 0,void 0,function*(){const[i,o,a,c]=e;assertType(URI.isUri(i)),assertType(Position$1.isIPosition(o)),assertType(typeof a=="string");const d=s.get(ITextModelService),_=s.get(IEditorWorkerService),b=s.get(ILanguageFeaturesService),k=yield d.createModelReference(i);try{return getOnTypeFormattingEdits(_,b,k.object.textEditorModel,Position$1.lift(o),a,c,CancellationToken.None)}finally{k.dispose()}})});var _a;EditorOptions.wrappingIndent.defaultValue=0;EditorOptions.glyphMargin.defaultValue=!1;EditorOptions.autoIndent.defaultValue=3;EditorOptions.overviewRulerLanes.defaultValue=2;FormattingConflicts.setFormatterSelector((s,e,i)=>Promise.resolve(s[0]));const api=createMonacoBaseAPI();api.editor=createMonacoEditorAPI();api.languages=createMonacoLanguagesAPI();const CancellationTokenSource=api.CancellationTokenSource,Emitter=api.Emitter,KeyCode=api.KeyCode,KeyMod=api.KeyMod,Position=api.Position,Range=api.Range,Selection=api.Selection,SelectionDirection=api.SelectionDirection,MarkerSeverity=api.MarkerSeverity,MarkerTag=api.MarkerTag,Uri=api.Uri,Token=api.Token,editor=api.editor,languages=api.languages;(((_a=globals.MonacoEnvironment)===null||_a===void 0?void 0:_a.globalAPI)||typeof define=="function"&&define.amd)&&(self.monaco=api);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const monaco=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource,Emitter,KeyCode,KeyMod,Position,Range,Selection,SelectionDirection,MarkerSeverity,MarkerTag,Uri,Token,editor,languages},Symbol.toStringTag,{value:"Module"}));function processSize(s){return/^\d+$/.test(s)?"".concat(s,"px"):s}function noop(){}var __extends$1=globalThis&&globalThis.__extends||function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},s(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");s(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),__assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(s){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}return s},__assign$1.apply(this,arguments)};(function(s){__extends$1(e,s);function e(i){var o=s.call(this,i)||this;return o.assignRef=function(a){o.containerElement=a},o.containerElement=void 0,o}return e.prototype.componentDidMount=function(){this.initMonaco()},e.prototype.componentDidUpdate=function(i){var o=this.props,a=o.language,c=o.theme,d=o.height,_=o.options,b=o.width,k=o.className,j=this.editor.getModel(),_e=j.original,et=j.modified;this.props.original!==_e.getValue()&&_e.setValue(this.props.original),this.props.value!=null&&this.props.value!==et.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.getModifiedEditor().pushUndoStop(),et.pushEditOperations([],[{range:et.getFullModelRange(),text:this.props.value}]),this.editor.getModifiedEditor().pushUndoStop(),this.__prevent_trigger_change_event=!1),i.language!==a&&(editor.setModelLanguage(_e,a),editor.setModelLanguage(et,a)),i.theme!==c&&editor.setTheme(c),this.editor&&(b!==i.width||d!==i.height)&&this.editor.layout(),i.options!==_&&this.editor.updateOptions(__assign$1(__assign$1({},k?{extraEditorClassName:k}:{}),_))},e.prototype.componentWillUnmount=function(){this.destroyMonaco()},e.prototype.editorWillMount=function(){var i=this.props.editorWillMount,o=i(monaco);return o||{}},e.prototype.editorDidMount=function(i){var o=this;this.props.editorDidMount(i,monaco);var a=i.getModel().modified;this._subscription=a.onDidChangeContent(function(c){o.__prevent_trigger_change_event||o.props.onChange(a.getValue(),c)})},e.prototype.editorWillUnmount=function(i){var o=this.props.editorWillUnmount;o(i,monaco)},e.prototype.initModels=function(i,o){var a=this.props.language,c=editor.createModel(o,a),d=editor.createModel(i,a);this.editor.setModel({original:c,modified:d})},e.prototype.initMonaco=function(){var i=this.props.value!=null?this.props.value:this.props.defaultValue,o=this.props,a=o.original,c=o.theme,d=o.options,_=o.overrideServices,b=o.className;this.containerElement&&(this.editorWillMount(),this.editor=editor.createDiffEditor(this.containerElement,__assign$1(__assign$1(__assign$1({},b?{extraEditorClassName:b}:{}),d),c?{theme:c}:{}),_),this.initModels(i,a),this.editorDidMount(this.editor))},e.prototype.destroyMonaco=function(){if(this.editor){this.editorWillUnmount(this.editor),this.editor.dispose();var i=this.editor.getModel(),o=i.original,a=i.modified;o&&o.dispose(),a&&a.dispose()}this._subscription&&this._subscription.dispose()},e.prototype.render=function(){var i=this.props,o=i.width,a=i.height,c=processSize(o),d=processSize(a),_={width:c,height:d};return jsx("div",{ref:this.assignRef,style:_,className:"react-monaco-editor-container"})},e.propTypes={width:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),height:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),original:propTypes.exports.string,value:propTypes.exports.string,defaultValue:propTypes.exports.string,language:propTypes.exports.string,theme:propTypes.exports.string,options:propTypes.exports.object,overrideServices:propTypes.exports.object,editorWillMount:propTypes.exports.func,editorDidMount:propTypes.exports.func,editorWillUnmount:propTypes.exports.func,onChange:propTypes.exports.func,className:propTypes.exports.string},e.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:noop,editorDidMount:noop,editorWillUnmount:noop,onChange:noop,className:null},e})(react.exports.Component);var __extends=globalThis&&globalThis.__extends||function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])},s(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");s(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(s){for(var e,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}return s},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(s,e){var i={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&e.indexOf(o)<0&&(i[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(i[o[a]]=s[o[a]]);return i},MonacoEditor=function(s){__extends(e,s);function e(i){var o=s.call(this,i)||this;return o.assignRef=function(a){o.containerElement=a},o.containerElement=void 0,o}return e.prototype.componentDidMount=function(){this.initMonaco()},e.prototype.componentDidUpdate=function(i){var o=this.props,a=o.value,c=o.language,d=o.theme,_=o.height,b=o.options,k=o.width,j=o.className,_e=this.editor,et=_e.getModel();if(this.props.value!=null&&this.props.value!==et.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.pushUndoStop(),et.pushEditOperations([],[{range:et.getFullModelRange(),text:a}]),this.editor.pushUndoStop(),this.__prevent_trigger_change_event=!1),i.language!==c&&editor.setModelLanguage(et,c),i.theme!==d&&editor.setTheme(d),_e&&(k!==i.width||_!==i.height)&&_e.layout(),i.options!==b){b.model;var tt=__rest(b,["model"]);_e.updateOptions(__assign(__assign({},j?{extraEditorClassName:j}:{}),tt))}},e.prototype.componentWillUnmount=function(){this.destroyMonaco()},e.prototype.destroyMonaco=function(){if(this.editor){this.editorWillUnmount(this.editor),this.editor.dispose();var i=this.editor.getModel();i&&i.dispose()}this._subscription&&this._subscription.dispose()},e.prototype.initMonaco=function(){var i=this.props.value!=null?this.props.value:this.props.defaultValue,o=this.props,a=o.language,c=o.theme,d=o.overrideServices,_=o.className;if(this.containerElement){var b=__assign(__assign({},this.props.options),this.editorWillMount());this.editor=editor.create(this.containerElement,__assign(__assign(__assign({value:i,language:a},_?{extraEditorClassName:_}:{}),b),c?{theme:c}:{}),d),this.editorDidMount(this.editor)}},e.prototype.editorWillMount=function(){var i=this.props.editorWillMount,o=i(monaco);return o||{}},e.prototype.editorDidMount=function(i){var o=this;this.props.editorDidMount(i,monaco),this._subscription=i.onDidChangeModelContent(function(a){o.__prevent_trigger_change_event||o.props.onChange(i.getValue(),a)})},e.prototype.editorWillUnmount=function(i){var o=this.props.editorWillUnmount;o(i,monaco)},e.prototype.render=function(){var i=this.props,o=i.width,a=i.height,c=processSize(o),d=processSize(a),_={width:c,height:d};return jsx("div",{ref:this.assignRef,style:_,className:"react-monaco-editor-container"})},e.propTypes={width:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),height:propTypes.exports.oneOfType([propTypes.exports.string,propTypes.exports.number]),value:propTypes.exports.string,defaultValue:propTypes.exports.string,language:propTypes.exports.string,theme:propTypes.exports.string,options:propTypes.exports.object,overrideServices:propTypes.exports.object,editorWillMount:propTypes.exports.func,editorDidMount:propTypes.exports.func,editorWillUnmount:propTypes.exports.func,onChange:propTypes.exports.func,className:propTypes.exports.string},e.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:noop,editorDidMount:noop,editorWillUnmount:noop,onChange:noop,className:null},e}(react.exports.Component);const Editor=({code:s,onChange:e,format:i,readonly:o})=>jsx(MonacoEditor,{width:"100%",height:"300",language:"javascript",theme:"vs-dark",value:i?js.exports.js_beautify(s):s,options:{formatOnPaste:!0,formatOnType:!0},onChange:o?void 0:e});class RunResultMonad{constructor(e){this.runResult=e}bind(e){return new RunResultMonad(i=>{const[o,a]=this.runResult(i);return e([o,a]).runResult(a)})}static return(e){return new RunResultMonad(i=>e)}}const runNum=(s,e)=>[s.value,e],runStr=(s,e)=>[s.value,e],runBool=(s,e)=>[s.value,e],getVar=(s,e)=>{if(s.vars.has(e))return s.vars.get(e);if(s.parent)return getVar(s.parent,e);throw new Error(`Variable ${e} is not declared`)},declareVar=(s,e,i)=>{if(s.vars.has(e))throw new Error(`Variable ${e} is already declared in this scope`);return s.vars.set(e,i),[i,s]},setVar=(s,e,i)=>{if(!s)throw new Error(`Variable ${e} is not declared`);return s.vars.has(e)?[i,s]:setVar(s.parent,e,i)},createContext=(s=null,e=[])=>({parent:s,vars:new Map(e)}),zip=(s,e)=>{if(s.length===e.length)return s.map((i,o)=>[i,e[o]]);throw Error(`${e.length} arguments provided where ${s.length} expected`)},createBinary=s=>(e,i,o)=>{const[a]=run(e,o),[c]=run(i,o);return[s(a,c),o]},runSubNum=createBinary((s,e)=>s-e),runMulNum=createBinary((s,e)=>s*e),runDivNum=createBinary((s,e)=>s/e),runPowNum=createBinary((s,e)=>s**e),runEq=createBinary((s,e)=>s==e),runNotEq=createBinary((s,e)=>s!=e),runGreater=createBinary((s,e)=>s>e),runGreaterEq=createBinary((s,e)=>s>=e),runLess=createBinary((s,e)=>s<e),runLessEq=createBinary((s,e)=>s<=e),runIf=(s,e)=>{const[i]=run(s.cond,e);return run(i?s.then:s.else,e)},runSequence=(s,e)=>s.reduce(([,i],o)=>run(o,i),[!1,e]),runProg=(s,e)=>{const i=createContext(e),[o]=runSequence(s.body,i);return[o,i.parent]},runAdd=(s,e,i)=>{const o=new RunResultMonad(d=>run(s,d)),a=new RunResultMonad(d=>run(e,d)),c=(d,_)=>typeof d=="number"&&typeof _=="number"||typeof d=="string"&&typeof _=="string";return o.bind(([d])=>a.bind(([_])=>{if(c(d,_))return RunResultMonad.return([d+_,i]);throw Error(`Type mismatch: can't + ${d} and ${_}`)})).runResult(i)},runBinary=(s,e)=>{switch(s.op){case BinaryOp.Plus:return runAdd(s.left,s.right,e);case BinaryOp.Minus:return runSubNum(s.left,s.right,e);case BinaryOp.Mul:return runMulNum(s.left,s.right,e);case BinaryOp.Div:return runDivNum(s.left,s.right,e);case BinaryOp.Power:return runPowNum(s.left,s.right,e);case BinaryOp.Eq:return runEq(s.left,s.right,e);case BinaryOp.NotEq:return runNotEq(s.left,s.right,e);case BinaryOp.GT:return runGreater(s.left,s.right,e);case BinaryOp.GTE:return runGreaterEq(s.left,s.right,e);case BinaryOp.LT:return runLess(s.left,s.right,e);case BinaryOp.LTE:return runLessEq(s.left,s.right,e)}},runVarName=(s,e)=>[s.value,e],runVarValue=(s,e)=>{const i=s.value;return[getVar(e,i),e]},runAssign=(s,e)=>{const[i,o]=runVarName(s.left,e);if(o){const[a,c]=run(s.right,o);if(c)return s.declare?declareVar(c,i,a):setVar(c,i,a)}throw new Error("Context is not defined")},runCall=(s,e)=>{const[i]=run(s.func,e),o=s.args.map(k=>run(k,e)).map(([k,j])=>k);let a;switch(typeof i){case"string":{a=getVar(e,i);break}case"object":{a=i;break}default:throw new Error(`${i} can not be invoked as function`)}const c=a.vars.map(k=>runVarName(k,e)).map(([k])=>k),d=createContext(e,zip(c,o)),[_,b]=run(a.body,d);return[_,b.parent]},runLambda=(s,e)=>[s,e],run=(s,e)=>{switch(s.type){case AstNode.Bool:return runBool(s,e);case AstNode.Num:return runNum(s,e);case AstNode.Str:return runStr(s,e);case AstNode.Var:return runVarValue(s,e);case AstNode.If:return runIf(s,e);case AstNode.Lambda:return runLambda(s,e);case AstNode.Call:return runCall(s,e);case AstNode.Assign:return runAssign(s,e);case AstNode.Binary:return runBinary(s,e);case AstNode.Prog:return runProg(s,e)}},Result=props=>{const[vmRes,setVmRes]=react.exports.useState(""),[jsRes,setJsRes]=react.exports.useState(""),runAst=()=>{try{const[s]=run(props.ast,createContext());setVmRes(s.toString())}catch(s){setVmRes(s.message)}finally{setTimeout(()=>setVmRes(""),500)}},runJs=()=>{try{const res=eval(props.js);setJsRes(res.toString())}catch(s){setJsRes(s.message)}finally{setTimeout(()=>setJsRes(""),500)}};return jsxs(Fragment,{children:[jsx(Button$1,{id:"runvm",onClick:runAst,children:"Run VM"}),jsx(Popover,{placement:"bottom",isOpen:!!vmRes,target:"runvm",toggle:()=>setVmRes(""),children:jsx(PopoverBody,{children:vmRes})}),jsx(Button$1,{id:"runjs",onClick:runJs,children:"Run JS"}),jsx(Popover,{placement:"bottom",isOpen:!!jsRes,target:"runjs",toggle:()=>setJsRes(""),children:jsx(PopoverBody,{children:jsRes})})]})},reactTreeview="",style="",fibonacciExample=`
# fibonacci
let fib = lambda (x): {
  if x < 2 then 1 else {
      fib(x-2) + fib(x-1);
  };
};
fib(7);
`,oddEvenExample=`
# recursive odd/even
let even = lambda (x) : if (x == 0) then true else odd(x-1);
let odd = lambda (x) : if (x == 0) then false else even(x-1);

odd(500);
`,parse=s=>{try{return{ast:new Parser$1(s).parseTopLevel(),error:""}}catch(e){return{ast:null,error:e.message}}},App=()=>{const[s,e]=react.exports.useState(fibonacciExample),{ast:i,error:o}=parse(s),a=i?compile$1(i):"";return jsxs(Container,{children:[jsxs(Row,{children:[jsxs(Col,{sm:6,children:[jsx("h3",{children:"Simple lang"}),jsx(Editor,{code:s,onChange:e}),jsx(Button$1,{color:"warning",onClick:()=>e(fibonacciExample),children:"Fibonacci"}),jsx(Button$1,{color:"info",onClick:()=>e(oddEvenExample),children:"Recursive odd/even"})]}),jsxs(Col,{sm:6,children:[jsx("h3",{children:"Compiled JavaScript"}),jsx(Editor,{code:a,readonly:!0,format:!0}),jsx(Result,{ast:i,js:a})]})]}),jsx(Row,{children:jsxs(Col,{children:[jsx("h3",{children:"AST Preview"}),jsx(AstViewer,{ast:i,error:o})]})})]})};reactDom.exports.render(jsx(App,{}),document.getElementById("app"));
